"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e5c2c750-16e1-54c6-a873-b7c482bd7df7")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6596],{430335:(e,t,n)=>{n.d(t,{$M:()=>E,AT:()=>C,Gd:()=>i,I$:()=>x,IO:()=>h,K4:()=>k,KF:()=>M,Kk:()=>I,L3:()=>r,LU:()=>b,MO:()=>D,SR:()=>_,T$:()=>u,TQ:()=>A,V3:()=>O,WD:()=>N,WX:()=>s,YQ:()=>m,YS:()=>T,b0:()=>F,dg:()=>P,dl:()=>d,fI:()=>v,f_:()=>f,fo:()=>y,hP:()=>l,i7:()=>L,jU:()=>w,oE:()=>c,r9:()=>R,sp:()=>p,v6:()=>S,wK:()=>g,yO:()=>a,yS:()=>o});let o="component_browser_component_list--componentListLoadingRow--6VtcP",a="component_browser_component_list--componentListLoadingItems--XJ359",c="component_browser_component_list--compact--3tCnY",r="component_browser_component_list--componentsList--jcFMY",s="component_browser_component_list--componentsListLoadingContainer--WPYPK",l="component_browser_component_list--componentsListTable--puqS-",i="component_browser_component_list--componentsListTableHeader--Aynmf",m="component_browser_component_list--spacious--yB0HS",d="component_browser_component_list--componentsListTableBody--PiBLQ",_="component_browser_component_list--componentsListTableHeaderRow---iaPM",p="component_browser_component_list--isSelected--oGCS1",u="component_browser_component_list--componentsListTableRow--MWiH-",b="component_browser_component_list--componentsListTableCell--qX8vW",g="component_browser_component_list--suggestionsCell--Bm-AC",f="component_browser_component_list--designCell--2WgKC",h="component_browser_component_list--decoratorCell--f6ZpC",v="component_browser_component_list--decoratorIcon--DSFkj",w="component_browser_component_list--fileCell--oVoAy",E="component_browser_component_list--variantsCell--yGi-I",y="component_browser_component_list--statusCell--x8DtR",C="component_browser_component_list--actionsCell--xbCNx",k="component_browser_component_list--tableRowExpandChevron--bw780",N="component_browser_component_list--countItemNumber--0qq5f",S="component_browser_component_list--componentItemImageContainer--XlLnu",I="component_browser_component_list--icon--qFSlI",x="component_browser_component_list--componentItemImage--l1RBu",L="component_browser_component_list--codeConnectionStatus--p3-4K",M="component_browser_component_list--searchInputContainer--1OO4i",R="component_browser_component_list--disabled--DfITX",P="component_browser_component_list--componentsListEmptyContainer--MxQaf",T="component_browser_component_list--onlyShowActionsOnHover--X76em",D="component_browser_component_list--menuOpen--1-ztt",A="component_browser_component_list--componentName--yOdtn",F="component_browser_component_list--libraryName--rDSdu",O="component_browser_component_list--nameBlock--Qm8-K"},817068:(e,t,n)=>{n.d(t,{a:()=>o});let o=(0,n(382902).eU)("components")},993999:(e,t,n)=>{n.d(t,{z:()=>p});var o=n(848318),a=n(23207),c=n(544405),r=n(952647),s=n(19180),l=n(967688),i=n(763593),m=n(273372),d=n(741680);function _({label:e,value:t,count:n}){return o.createElement(a.c$,{key:t,value:t},o.createElement("div",{className:"component_browser_filters--option--0cVym"},e,o.createElement(r.J,{mode:"dark"},o.createElement("span",{className:"component_browser_filters--count--opEnb"},n))))}function p({dropdownFilter:e,setDropdownFilter:t,componentCounts:n}){let r=(0,d.sD)();return o.createElement(a.bL,{value:e,onChange:e=>t(e)},o.createElement(a.l9,{label:o.createElement(c.h,null,(0,l.t)("dev_handoff.component_browser.filter"))},o.createElement("div",{className:"component_browser_filters--trigger--tf4CK"},r[e],o.createElement(i.u,{count:n[e]}))),o.createElement(a.mc,null,Object.entries(m.W).filter(([e])=>(0,s.k)().dt_component_browser_bulk_mapping||"suggestionsAvailable"!==e).map(([e,{value:t}])=>{let a=r[t];return o.createElement(_,{key:e,label:a,value:t,count:n[t]})})))}},884286:(e,t,n)=>{n.d(t,{Mj:()=>k,cU:()=>v,k1:()=>h,kE:()=>w,qd:()=>y});var o=n(848318);if(443==n.j)var a=n(660376);var c=n(382902),r=n(53837),s=n(967688),l=n(957872),i=n(34542),m=n(385711),d=n(517776),_=n(263336),p=n(518383),u=n(391301),b=n(370715),g=n(136169);let f=(0,d.r1)("dev_mode_has_seen_component_browser_onboarding"),h={Step1:"dev_mode_component_browser_manual_mapping_step_1",Step2:"dev_mode_component_browser_manual_mapping_step_2",Step3:"dev_mode_component_browser_manual_mapping_step_3"},v={Step1:"dev_mode_component_browser_shared_step_1"},w={Step1:"dev_mode_component_browser_codebase_ingestion_step_1",Step2:"dev_mode_component_browser_codebase_ingestion_step_2",Step3:"dev_mode_component_browser_codebase_ingestion_step_3"};var E=(e=>(e.ManualStep1="ManualStep1",e.ManualStep2="ManualStep2",e.ManualStep3="ManualStep3",e.ManualStep4="ManualStep4",e.CodebaseIngestionStep1="CodebaseIngestionStep1",e.CodebaseIngestionStep2="CodebaseIngestionStep2",e.CodebaseIngestionStep3="CodebaseIngestionStep3",e))(E||{}),y=(e=>(e.OpenDialog="OpenDialog",e.CloseDialog="CloseDialog",e))(y||{});function C(e){let{step:t,isOverlayShowing:n,next:c,complete:r,onOnboardingSequenceAction:i}=e,m=e=>{e&&i?.(e),c()};switch(t){case"ManualStep1":return o.createElement(u.rq,{description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.next"),type:"button",onClick:c,ctaTrackingDescriptor:l.c.NEXT},stepCounter:{stepNum:1,totalNumSteps:4},targetKey:h.Step1,trackingContextName:"dev_mode_component_browser_step_1 - identify the code file"});case"ManualStep2":return o.createElement(u.rq,{description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.next"),type:"button",onClick:c,ctaTrackingDescriptor:l.c.NEXT},stepCounter:{stepNum:2,totalNumSteps:4},targetKey:h.Step2,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - identify the component"});case"ManualStep3":return o.createElement(u.rq,{description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.next"),type:"button",onClick:c,ctaTrackingDescriptor:l.c.NEXT},stepCounter:{stepNum:3,totalNumSteps:4},targetKey:h.Step3,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_title"),trackingContextName:"dev_mode_component_browser_step_3 - review or edit the mapping"});case"ManualStep4":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.got_it"),type:"button",onClick:r,ctaTrackingDescriptor:l.c.DONE},stepCounter:{stepNum:4,totalNumSteps:4},targetKey:v.Step1,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_4 - manage your connection"});case"CodebaseIngestionStep1":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.next"),type:"button",onClick:()=>m("OpenDialog"),ctaTrackingDescriptor:l.c.DONE},stepCounter:{stepNum:1,totalNumSteps:3},targetKey:w.Step1,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_title"),trackingContextName:"dev_mode_component_browser_step_1 - manage your connection"});case"CodebaseIngestionStep2":return o.createElement(u.rq,{description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_description"),isShowing:n,onClose:r,onTargetLost:()=>m("CloseDialog"),primaryCta:{label:(0,s.tx)("general.next"),type:"button",onClick:()=>m("CloseDialog"),ctaTrackingDescriptor:l.c.DONE},stepCounter:{stepNum:2,totalNumSteps:3},targetKey:w.Step2,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - manage your connection",zIndex:b.R.MODAL});case"CodebaseIngestionStep3":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,s.tx)("general.got_it"),type:"button",onClick:r,ctaTrackingDescriptor:l.c.DONE},stepCounter:{stepNum:3,totalNumSteps:3},targetKey:v.Step1,title:(0,s.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_3 - manage your connection"});default:(0,a.xb)(t)}}function k({onOnboardingSequenceAction:e,canShowOnboarding:t}){let n=(0,c.md)(f),[a,s]=(0,r.Vc)("componentBrowserOnboardingSelection",null),{show:l,complete:d,isShowing:u}=(0,i.e)({overlay:g.Hx5,priority:_.N.DEFAULT_MODAL},[n]),b=(0,o.useMemo)(()=>"codebase_ingestion"===a?["CodebaseIngestionStep1","CodebaseIngestionStep2","CodebaseIngestionStep3"]:["ManualStep1","ManualStep2","ManualStep3","ManualStep4"],[a]),{currentStep:h,next:v}=(0,m.A)({numSteps:b.length,onComplete:d});return(0,o.useEffect)(()=>{t&&l({canShow:e=>!e})},[l,a,t]),o.createElement(p.U,{currentStep:h,isShowing:u,children:b.map((t,n)=>o.createElement(C,{key:n,step:t,isOverlayShowing:u,next:v,complete:d,onOnboardingSequenceAction:e}))})}},549520:(e,t,n)=>{n.d(t,{AD:()=>a,Tg:()=>s,WG:()=>l,af:()=>i,bp:()=>r,v7:()=>c});var o=n(182317);let a="codebase_suggestions.requested",c="codebase_suggestions.loaded",r="Component Browser Codebase Suggestions Item Clicked",s="Component Browser Codebase Suggestions Show More Clicked",l="codebase_suggestions.delete_all_requested",i=()=>(0,o.g)()},28101:(e,t,n)=>{n.d(t,{Pl:()=>c,tG:()=>a});let o=e=>({componentId:e.id,nodeId:e.node_id,libraryKey:e.library_key,entrypoint:"component_browser"}),a=(e,t)=>({searchSessionId:e,codebaseComponentId:t?.codebase_component_id,codebaseComponentScore:t?.score,entrypoint:"component_browser"}),c=(e,t,n=null)=>{let c=o(e);return c={...c,searchSessionId:t},n&&(c={...c,...a(t,n)}),c}},522804:(e,t,n)=>{n.d(t,{Mo:()=>w,GD:()=>v,t2:()=>h,RL:()=>C,S6:()=>N,K5:()=>k,gY:()=>y,bV:()=>I});var o=n(848318),a=n(673786),c=n(195124),r=n(19180),s=n(329228);async function l(e){await new Promise(e=>setTimeout(e,500));let t={};return e.assets.forEach((e,n)=>{n%2==0&&e&&(t[e.key]={suggestions:[{codebase_component_id:"mock-component-id-1",thumbnail_url:"https://example.com/thumbnail.png",name:"MockComponent",src_path:"src/components/MockComponent.tsx",scanned_at:new Date().toISOString(),confidence_level:"high",score:.95},{codebase_component_id:"mock-component-id-2",thumbnail_url:"https://example.com/thumbnail2.png",name:"AnotherMockComponent",src_path:"src/components/AnotherMockComponent.tsx",scanned_at:new Date().toISOString(),confidence_level:"low",score:.75}]})}),{suggestions:t}}var i=n(677334),m=n(138528),d=n(614092),_=n(720722),p=n(326252),u=n(208624),b=n(795234);let g=new class{constructor(){this.SearchCodeSuggestionsSchemaValidator=(0,b.vh)(),this.SearchBulkCodeSuggestionsSchemaValidator=(0,b.vh)()}searchCodeSuggestions(e){return this.SearchCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions",b.td.toAPIParameters(e)))}searchBulkCodeSuggestions(e){return this.SearchBulkCodeSuggestionsSchemaValidator.validate(async({xr:t})=>await t.post("/api/search/code_suggestions_bulk",b.td.toAPIParameters(e)))}};var f=n(549520);let h=i.M4.Query({fetch:async e=>(await p.Q.getLibraryPublishedComponentsWithCodeConnect({libraryKey:e})).data.meta,key:"libraryPublishedComponentsCodeConnect"}),v=i.M4.Query({fetch:async e=>(await p.Q.getInContextPublishedComponents(e)).data.meta,key:"inContextPublishedComponentsCodeConnect"}),w=i.M4.Query({fetch:async e=>(0,r.k)().dt_ccv2_dd?l(e):(await g.searchBulkCodeSuggestions(e)).data.meta,key:"bulkSuggestions"}),E=(i.M4.Query({fetch:async e=>(await p.Q.getEditAccessLibraries({orgId:e})).data.meta,key:"editAccessLibrariesCodeConnect"}),i.M4.Query({fetch:async e=>(await u.$W.getCodeSuggestions(e)).data.meta.results}));function y(e,t,n){let c=(0,m.X$)("useCodeSuggestions"),r=e.type===_.PW.COMPONENT?"component_key"in e&&e.component_key&&a.ii.toString(e.component_key):e.key,l=o.useMemo(()=>(0,f.af)(),[r]);return[l,(0,s.IT)(E({asset:{type:e.type,key:r||""},planParentType:c.data?.key.type||"",planParentId:c.data?.key.parentId||"",sessionId:n||l,queryId:n||l}),{enabled:t&&"loaded"===c.status&&!!c.data&&!!r})]}i.M4.Mutation(async e=>{await p.Q.createCodeConnectMapping(e)});let C=i.M4.Mutation(e=>p.Q.createCodeConnectMap(e)),k=i.M4.Mutation(async e=>{await p.Q.updateCodeConnectMap(e)});i.M4.Mutation(async e=>{await p.Q.deleteCodeConnectMapping(e)});let N=i.M4.Mutation(async e=>{await p.Q.deleteCodeConnectMap(e)}),S=e=>!!e&&(e.isStateGroup?e.childrenNodes.every(e=>e.isIconLikeContainer):e.isIconLikeContainer);function I(){return(0,d.Fk)(e=>{var t,n;if(!(0,r.k)().dt_component_browser_icons_flow)return new Set;let o=new Set;return t=e.getRoot(),n=e=>{("SYMBOL"===e.type||e.isStateGroup)&&S(e)&&o.add(e.guid)},t&&(0,c.hV)(t,n),o})}},763593:(e,t,n)=>{n.d(t,{o:()=>_,u:()=>m});var o=n(848318),a=n(749233),c=n(218742),r=n(266004),s=n(536384),l=n.n(s),i=n(967688);function m({count:e}){return o.createElement("div",{className:"component_browser_connected_count--countItemNumber--MBHsK"},e)}function d({open:e,count:t,icon:n,tooltip:a}){return o.createElement("div",{"data-tooltip":a,"data-tooltip-type":"text",className:l()("component_browser_connected_count--countItem--OKOTR",e&&"component_browser_connected_count--open--ryc1n")},n,o.createElement(m,{count:t}))}function _({open:e,notConnectedComponents:t,connectedComponents:n,ignoredComponents:s}){return o.createElement("div",{className:"component_browser_connected_count--container--2Qv4B"},o.createElement(d,{open:e,count:t,icon:o.createElement(a.w,{style:{"--color-icon-tertiary":"var(--color-icon)"}}),tooltip:(0,i.t)("dev_handoff.component_browser.not_connected_to_code")}),o.createElement(d,{open:e,count:n,icon:o.createElement(c.W,null),tooltip:(0,i.t)("dev_handoff.component_browser.connected_to_code")}),o.createElement(d,{open:e,count:s,icon:o.createElement(r.M,null),tooltip:(0,i.t)("dev_handoff.component_browser.no_code_equivalent")}))}},156596:(e,t,n)=>{n.d(t,{ComponentBrowserLibraryView:()=>tG,T_:()=>tJ});var o=n(848318),a=n(891627),c=n(193675),r=n(658029),s=n(773511),l=n(523152),i=n(877770),m=n(282631),d=n(562027),_=n(19180),p=n(382902),u=n(410725),b=n(439382),g=n(967688),f=n(817068),h=n(993999),v=n(777905),w=n(361964),E=n(388831);n(822879);var y=n(55116),C=n(17753),k=n(884286),N=n(168323),S=n(353317),I=n(143823),x=n(408193),L=n(232167),M=n(124810),R=n(261486),P=n(218029),T=n(813321),D=n(329228),A=n(422482),F=n(696483),O=n(536384),K=n.n(O),B=n(345964);function q({id:e,isVisible:t,position:n,containerRef:c,isLoading:r,loadingMessage:s,items:l,noItemsView:i,renderItem:m,selectedIndex:d=0}){let _=(0,o.useRef)(null);return((0,o.useEffect)(()=>{if(t&&!r&&l.length>0&&_.current){let e=_.current.children[d];e&&e.scrollIntoView({block:"nearest"})}},[t,r,l.length,d]),t&&n)?(0,a.createPortal)(o.createElement("div",{ref:c,id:e,className:"component_browser_chip_search_dropdown--componentBrowserChipSearchDropdownContainer--3WPEW",style:{top:`${n.top}px`,left:`${n.left}px`,width:`${n.width}px`}},o.createElement("ul",{ref:_,className:"component_browser_chip_search_dropdown--resultsList--J1-7i"},r?o.createElement("li",{className:"component_browser_chip_search_dropdown--loadingState--BfIlh"},o.createElement(B.kt,null),s):l.length>0?l.map((e,t)=>o.createElement(o.Fragment,{key:t},m(e,t))):o.createElement("li",null,i))),document.body):null}var V=n(430335);function W({labels:e,onClick:t,onBackspace:n,isClearable:a}){return o.createElement("button",{onKeyDown:e=>{"Backspace"===e.key&&n?.()},onClick:t,className:"component_browser_chip_search_input--pillBase--HlS0p","aria-label":(0,g.t)("dev_handoff.component_browser.clear_input")},e.map((t,c)=>o.createElement(o.Fragment,{key:`${t.value}-${c}`},o.createElement("span",{"data-tooltip":t.tooltip,"data-tooltip-type":"text",className:"component_browser_chip_search_input--pillLabel--qzAew utilities--bodyMedium--7-YGK"},t.value),c<e.length-1&&o.createElement(A.R,null),a&&o.createElement(F.f,{onClick:n,className:"component_browser_chip_search_input--pillClearIcon--QXb02"}))))}function $({title:e,subtitle:t,onClick:n,icon:a,isSelected:c}){return o.createElement("li",null,o.createElement(s.E,{className:K()("component_browser_chip_search_input--item--IGp8Y",{"component_browser_chip_search_input--selected--gg3EU":c}),onClick:e=>{e.stopPropagation(),n()}},a&&o.createElement("div",{className:"component_browser_chip_search_input--itemIcon--8ZOb3"},a),o.createElement("div",{className:"component_browser_chip_search_input--itemContent--2QfZV"},o.createElement("div",{className:"component_browser_chip_search_input--title--oGz9H"},e),t&&o.createElement("div",{className:"component_browser_chip_search_input--subtitle--5zMEl"},t))))}let Q="component-browser-chip-search-dropdown",U=o.forwardRef(function({placeholder:e,disabled:t,searchResults:n,isLoadingSearchResults:a,selectedItem:c,onChipSelect:r,onDeleteLastItem:s,onDropdownItemClick:i,onValueChanged:m,onEnterPressed:d,showDropdown:_=!0,showDropdownOnFocus:p=!1,arePillsClearable:u=!1,isClearable:b=!0,hint:f,onboardingKey:h},v){let[w,E]=(0,o.useState)({value:"",isSearchListOpen:!1,dropdownPosition:null,isConnecting:!1,selectedIndex:0}),y=(0,o.useRef)(w.value),C=(0,o.useRef)(null),k=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(w.isSearchListOpen&&C.current){let e=C.current.getBoundingClientRect();E(t=>({...t,dropdownPosition:{top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width}}))}else E(e=>({...e,dropdownPosition:null}))},[w.isSearchListOpen]),(0,o.useEffect)(()=>{function e(e){let t=e.target;C.current&&!C.current.contains(t)&&k.current&&!k.current.contains(t)&&E(e=>({...e,isSearchListOpen:!1}))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let N=()=>{E(e=>({...e,value:"",isSearchListOpen:!1}))},S=e=>{E(e=>({...e,isSearchListOpen:!1,value:"",selectedIndex:0})),i(e)},I=e=>{""!==e&&e!==y.current&&(y.current=e,d?.(e)&&N())};return o.createElement("div",{className:"component_browser_chip_search_input--inlineSearchContainer--8CJzi",ref:C},o.createElement("div",{className:"component_browser_chip_search_input--inputWrapper--aiWWZ"},o.createElement("div",{className:K()(V.KF,{[V.r9]:t})},c&&o.createElement(W,{onBackspace:()=>{s(),v.current?.focus()},labels:c.value,onClick:()=>r?.(c),isClearable:u}),o.createElement("input",{ref:v,className:"component_browser_chip_search_input--input--KG-iT faceted_search_bar--input--V5ksZ","data-onboarding-key":h,onBlur:e=>{I(w.value);let t=e.relatedTarget;t?.closest(`#${Q}`)||E(e=>({...e,isSearchListOpen:!1,selectedIndex:0}))},onChange:e=>{if(t||c)return;let n=e.target.value;E(e=>({...e,value:n,isSearchListOpen:n.length>0,selectedIndex:0})),m(n)},onFocus:()=>{p&&E(e=>({...e,isSearchListOpen:!0,selectedIndex:0}))},onKeyDown:e=>{if(!t){if("Backspace"===e.key&&""===w.value&&s(),"Enter"===e.key){if(n&&n.length>0){let t=n[w.selectedIndex];if(t){e.preventDefault(),S(t);return}}I(w.value)}"ArrowDown"===e.key&&n&&n.length>0&&(e.preventDefault(),E(e=>({...e,selectedIndex:(e.selectedIndex+1)%n.length}))),"ArrowUp"===e.key&&n&&n.length>0&&(e.preventDefault(),E(e=>({...e,selectedIndex:0===e.selectedIndex?n.length-1:e.selectedIndex-1})))}},placeholder:e,type:"search",value:w.value}),c&&b&&o.createElement("div",{className:"component_browser_chip_search_input--clearIconContainer--lm-6s"},o.createElement(l.L,{className:"component_browser_chip_search_input--clearIcon--1KMS0",onClick:s})))),_&&o.createElement(q,{id:Q,isVisible:!!w.isSearchListOpen,position:w.dropdownPosition,containerRef:k,isLoading:a||!1,items:n||[],selectedIndex:w.selectedIndex,noItemsView:o.createElement("div",{className:"component_browser_chip_search_input--noItemsView--dmc-y"},o.createElement("span",{className:"component_browser_chip_search_input--noItemsTitle--MF48d"},(0,g.t)("dev_handoff.component_browser.no_results_found")),f&&o.createElement("div",{className:"component_browser_chip_search_input--hint--W3h7w"},o.createElement("span",null,f))),renderItem:(e,t)=>o.createElement($,{icon:e.icon,title:e.title,subtitle:e.subtitle,onClick:()=>S(e),isSelected:t===w.selectedIndex})}))});var G=n(893613),Y=n(493111);let z=({searchTerm:e,libraryKey:t,selectedRepositories:n})=>{let a=(n?.length??0)>0,c=n[0],[r]=(0,D.IT)((0,G.Tp)({libraryKey:t,repository:c?.id??""}),{enabled:!!t&&a&&!!c,key:"repositorySourceFilesQuery"}),s=(0,o.useMemo)(()=>{let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e}let n=e.replace(/^https?:\/\//,"");if(/^[a-zA-Z0-9\-_./\\]+$/.test(n))return n},[e]);return{result:(0,o.useMemo)(()=>r.data&&s?(0,P.$P)(s,r.data,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:e})):[],[r.data,s]),isLoading:"loading"===r.status||"disabled"===r.status}},J=(0,o.forwardRef)(function(e,t){let{sourceIndex:n,currentRowIndex:a,component:c,libraryKey:r,disabled:s,onFileChanged:l,selectedFile:i,selectedRepositories:m,onboardingKey:d}=e,[_,p]=(0,o.useState)(""),[u]=(0,T.A)(_,300),b=(m?.length??0)>0,f=c?.code_connect_info.v1.state==="ignored",{result:h,isLoading:v}=z({searchTerm:u,libraryKey:r,selectedRepositories:m});if(f)return o.createElement("span",null,"--");let w=c?.node_id;if(c&&!w)return null;let E=i?.title?{value:[{value:i.title,tooltip:i.metadata?.path}]}:void 0;return o.createElement(U,{ref:t,arePillsClearable:!0,disabled:s,hint:(0,g.t)("dev_handoff.component_browser.file_search_hint"),isClearable:!1,isLoadingSearchResults:v,onDeleteLastItem:()=>{l({sourceIndex:n,selectedFile:null,currentRowIndex:a,trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{l({sourceIndex:n,selectedFile:t,currentRowIndex:a,trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>{if(""===t.trim())return!1;if(0===h.length){let o=t.split("/"),c=(0,Y.Wq)(o,t);return l({sourceIndex:n,currentRowIndex:a,selectedFile:{title:c??t,subtitle:t,metadata:{isCustomLink:!0,repository:{id:"",name:""},path:t,name:c??t,sha:"",type:"file"}},trackingProps:{location:e.location,source:"manual"}}),!0}return p(t),!1},onValueChanged:e=>{p(e)},onboardingKey:d,placeholder:i?"":(0,g.t)("dev_handoff.component_browser.paste_code_link"),searchResults:h,selectedItem:E,showDropdown:b})}),X="component_browser_bulk_icon_connect--container--j5G1s",H="component_browser_bulk_icon_connect--content--6ciQR",j="component_browser_bulk_icon_connect--connectStateText--y18Lf",Z="component_browser_bulk_icon_connect--spinnerContainer--zuPn7",ee="component_browser_bulk_icon_connect--progressText--5HqXg",et="component_browser_bulk_icon_connect--connectStateContainer--i7RgN",en="component_browser_bulk_icon_connect--connectStateRightContent--5AW1y";var eo=(e=>(e.INITIAL="initial",e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e))(eo||{});function ea({connectedComponents:e,onDeleteMapping:t}){let{getTriggerProps:n,manager:a}=N.b();return o.createElement(N.bL,{manager:a},o.createElement(S.d,{"aria-label":(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),htmlAttributes:{"data-tooltip":(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),"data-tooltip-type":C.Ib.TEXT},...n()},o.createElement(x.J,null)),o.createElement(N.mc,null,o.createElement(N.q7,{onClick:function(){for(let n of e)n.component.isIcon&&t({codeConnectId:n.component.code_connect_info.v1.id,row:{...n,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}})},disabled:0===e.length},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.disconnect_all"))))}function ec({connectedComponents:e,notConnectedComponents:t,onConnectMapping:n,libraryKey:a}){let[c,l]=(0,o.useState)(null),[i,d]=(0,o.useState)("initial"),[_,p]=(0,o.useState)(0),[u,b]=(0,o.useState)(0),f=o.useRef(null),h=(0,R.OG)(a);o.useEffect(()=>{0===e.length&&"connected"===i&&d("initial")},[e,i]);let v=(0,o.useCallback)(e=>{l(e.selectedFile)},[]),w=()=>{if(c)for(let e of(d("connecting"),p(0),b(t.length),t))n({row:{assetKey:e.assetKey,sourceIndex:e.sourceIndex,component:e.component,selectedFile:c,selectedComponent:{title:e.component.name}},trackingProps:{location:"list_view",source:"manual"},callback:e=>{if(e){d("initial");return}p(e=>e+1),_===u&&d("connected")}})};return o.createElement(m.J,null,(()=>{switch(i){case"initial":return t.length>0&&o.createElement("div",{className:X},o.createElement("div",{className:"component_browser_bulk_icon_connect--initialContent--yYbWa"},o.createElement(o.Fragment,null,o.createElement("div",{className:"component_browser_bulk_icon_connect--header--z22ji"},o.createElement("h2",{className:"component_browser_bulk_icon_connect--title--Ssiyo"},e.length>0?(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connect_remaining",{count:t.length}):(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connect_all",{count:t.length})),o.createElement("p",{className:"component_browser_bulk_icon_connect--description--fumpL"},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.description"))),o.createElement("div",{className:"component_browser_bulk_icon_connect--inputGroup--rMbmm"},o.createElement(J,{ref:f,sourceIndex:0,libraryKey:a,onFileChanged:v,selectedFile:c,selectedRepositories:h?.selectedRepositories??[],location:"list_view"}),o.createElement(s.E,{className:"component_browser_bulk_icon_connect--connectButton--QRuMQ",onClick:w,disabled:!c},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connect_button"))))));case"connecting":return o.createElement("div",{className:X},o.createElement("div",{className:H},o.createElement("div",{className:et},o.createElement("div",{className:Z},o.createElement(I.k,{size:"sm"}),o.createElement("h2",{className:j},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connecting_progress"))),o.createElement("div",{className:en},o.createElement("p",{className:ee},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connected_progress",{connected:_,total:u}))))));case"connected":return o.createElement("div",{className:X},o.createElement("div",{className:H},o.createElement("div",{className:et},o.createElement("div",{className:"component_browser_bulk_icon_connect--checkmarkContainer---3EnN"},o.createElement(L.g,{className:"component_browser_bulk_icon_connect--checkmark--l-ftB",style:{"--color-icon":"var(--color-icon-success)"}}),o.createElement("h2",{className:j},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.connected_success",{count:e.length}))),o.createElement("div",{className:en},o.createElement(r.K,{"aria-label":(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.close_notification"),onClick:()=>d("initial")},o.createElement(M.A,null))))));case"disconnecting":return o.createElement("div",{className:X},o.createElement("div",{className:H},o.createElement("div",{className:et},o.createElement("div",{className:Z},o.createElement(I.k,{size:"sm"}),o.createElement("h2",{className:j},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.disconnecting_progress"))),o.createElement("div",{className:en},o.createElement("p",{className:ee},(0,g.t)("dev_handoff.component_browser.bulk_icon_connect.disconnected_progress",{disconnected:_,total:u}))))))}})())}var er=n(531788),es=n(760893),el=n(376771),ei=n(469508),em=n(177019),ed=n(959498),e_=n(332174),ep=n(603005),eu=n(918777),eb=n(996202),eg=n(63163),ef=n(53837),eh=n(230618),ev=n(173926),ew=n(994924),eE=n(392935),ey=n(217958),eC=n(301168),ek=n(989232),eN=n(238462),eS=n(522804),eI=n(370259),ex=n(979485),eL=n(435207),eM=n(584845),eR=n(120700),eP=n(553527),eT=n(31898),eD=n(720722),eA=n(549520),eF=n(28101);let eO="component_browser_code_connect_code--suggestionsWrapper--vJt9q",eK="component_browser_code_connect_code--heading--RJJmA utilities--bodyMediumStrong--1R5cZ",eB="component_browser_code_connect_code--input--Y0rEc",eq="component_browser_code_connect_code--label--5KW2i utilities--bodyMedium--7-YGK",eV="component_browser_codebase_suggestions--container--knWRq";function eW(){return o.createElement("div",{className:eV},o.createElement(I.k,null))}function e$({items:e,itemLimit:t,selectedSuggestion:n,onSelect:a,onItemLimitChange:c,itemsPerRow:r=5,suggestionsGridRef:s}){let l=eU(),i=t<Math.min(50,e.length);return o.createElement("div",{className:eV,ref:s},o.createElement("div",{className:"component_browser_codebase_suggestions--grid--kwpAM",style:{gridTemplateColumns:`repeat(${r}, 1fr)`}},e.slice(0,t).map((e,t)=>o.createElement(ex.jO,{key:e.id,item:e,onClick:()=>a(t),onHover:eN.lQ,isSelected:n?.id===e.id,index:t}))),i&&o.createElement("div",null,o.createElement(er.$n,{variant:"link",onClick:()=>{let n=5===t?25:25===t?50:t;(0,ek.trackEvent)(eA.Tg,{itemsShownAfterClick:n,totalItems:e.length,...l}),c(n)}},(0,g.t)("dev_handoff.codebase_suggestions.more_results"))))}let eQ=o.createContext({sharedTrackingProps:()=>({})}),eU=()=>o.useContext(eQ).sharedTrackingProps();function eG(){let e=(0,eC.wA)(),t=o.useCallback(()=>{e((0,eT.to)({type:eI.d}))},[e]);return o.createElement("div",{className:eV},o.createElement("p",null,(0,g.t)("auto_suggest.suggestion_shelf_no_suggestions")),o.createElement("p",null,o.createElement(er.$n.Link,{onClick:t},(0,g.t)("dev_handoff.codebase_suggestions.have_you_connected_your_running_app"))))}function eY({component:e,onCodeChange:t,onSuggestionSelected:n,searchSessionId:a}){let c=!!(0,_.k)().dt_ccv2_dd,[r,[s]]=(0,eS.gY)(e,!c,a),[l,i]=(0,o.useState)(5),m=(0,eC.wA)(),d=(0,o.useCallback)(()=>(0,eF.Pl)(e,a),[e,a]);o.useEffect(()=>{(0,ek.trackEvent)(eA.AD,{...d()})},[d]);let p=c?eP.p6.data:s.data,u=c?"loaded":s.status,b=(0,o.useRef)(null),f=(0,eR.s)({result:p,status:u,itemLimit:l}),h=(0,o.useMemo)(()=>p?.map(e=>({id:e.codebase_component_id,thumbnail:e.thumbnail_url,srcPath:e.src_path||void 0,name:e.name,type:"suggestion"}))??[],[p]),v=(0,o.useMemo)(()=>()=>{if(!b.current)return{x:0,y:0};let e=b.current.getBoundingClientRect(),t=f.width;return{x:e.left-t-4,y:e.top}},[f.width]),w=o.useCallback(e=>{let t=h[e];t&&(f.setOpen(e,v()),n({source:t.srcPath??"",name:t.name,componentName:t.name,index:e}),(0,ek.trackEvent)(eA.bp,{...d(),indexInList:e,codebaseComponentId:t.id}))},[n,d,h,f,v]),E=()=>{f.setKeepWindowOpen(!1),m(eT.Lo())};o.useEffect(()=>{f.selectedItem&&t(function(e){let{name:t,srcPath:n}=e;return n?`import { ${t} } from '${n}'

<${t} />`:`<${t} />`}(f.selectedItem))},[f.selectedItem,t]);let y="loading"===s.status,C="loaded"===s.status&&p&&0===p.length,k="loaded"===s.status,N=(0,eb.hC)(),S=f.data.map(e=>({name:e.name,src_path:e.srcPath}));return o.useEffect(()=>{k&&(0,ek.trackEvent)(eA.v7,{...d(),numResults:p?p.length:0})},[k,p,d]),o.createElement(eQ.Provider,{value:{sharedTrackingProps:d}},o.createElement("div",{className:eO},o.createElement("div",{className:eK},(0,g.t)("dev_handoff.codebase_suggestions.inspect_panel_disconnected_header_title")),y&&o.createElement(eW,null),C&&o.createElement(eG,null),!y&&!C&&o.createElement(o.Fragment,null,o.createElement(e$,{items:h,itemLimit:l,onItemLimitChange:i,selectedSuggestion:f.selectedItem,onSelect:w,suggestionsGridRef:b}),o.createElement(eM.q_,{window:f,onPageThrough:t=>{N("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.type===eD.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(S),suggestionData:JSON.stringify(S[t]),action:"page_through"})},onReferenceClicked:(t,n)=>{N("code_connect_v2.codebase_suggestion_reference_clicked",{nodeId:e.type===eD.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(S),suggestionData:JSON.stringify(S[t]),clickedReferenceUrl:n?n.url:void 0,clickedReferenceType:n?n.type:void 0,componentNameCopied:n?n.componentName:void 0})},onZoomClicked:()=>{let{data:e,setKeepWindowOpen:t}=f;t(!0),m(eT.to({type:eL.dU,data:{data:e,onClose:E,onReferenceClicked:()=>{}},showModalsBeneath:!0}))}}))))}var ez=n(618803),eJ=n(749214);let eX=(0,o.memo)(function(e){return(0,eJ.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,eJ.jsx)("path",{fill:"var(--color-icon)",d:"M14.165 11.624A.38.38 0 0 1 14.5 12c0 1.83-.228 3.507-.608 4.743-.189.615-.425 1.149-.71 1.54-.276.38-.67.717-1.182.717-.513 0-.906-.337-1.183-.717-.284-.391-.52-.925-.71-1.54a10 10 0 0 1-.19-.715.484.484 0 0 1 .516-.585c.224.017.416.18.467.398q.076.323.163.608c.173.561.369.98.563 1.246.2.276.333.305.374.305s.173-.029.374-.305c.194-.266.39-.685.562-1.246.344-1.116.564-2.69.564-4.449 0-.236.198-.425.432-.401zM7.22 15c.345 0 .568.351.5.69l-.012.073c-.053.336.02.451.049.48.028.028.143.102.48.049l.072-.014c.338-.067.69.156.69.5a.45.45 0 0 1-.331.445 3 3 0 0 1-.275.056c-.464.073-.981.033-1.343-.329-.363-.362-.403-.88-.33-1.344a3 3 0 0 1 .057-.275A.45.45 0 0 1 7.22 15m9.559 0a.45.45 0 0 1 .443.331q.036.141.057.275c.073.465.032.982-.33 1.344-.363.362-.878.402-1.343.33a3 3 0 0 1-.276-.058.45.45 0 0 1-.331-.444c0-.344.351-.567.69-.5l.073.014c.338.053.452-.02.48-.049.028-.028.102-.142.049-.48l-.014-.073c-.067-.339.157-.69.502-.69M7.972 9.917a.484.484 0 0 1 .584.516.52.52 0 0 1-.395.466q-.324.076-.61.165c-.56.172-.979.368-1.246.562-.276.2-.304.334-.304.374s.027.172.304.374c.267.194.685.39 1.247.563 1.116.343 2.69.563 4.449.563.235 0 .423.197.4.43l-.027.237A.38.38 0 0 1 12 14.5c-1.83 0-3.508-.227-4.743-.607-.615-.19-1.15-.426-1.54-.71C5.338 12.906 5 12.513 5 12c0-.512.336-.906.717-1.183.39-.284.925-.52 1.54-.71q.337-.102.714-.19M12 9.5c1.83 0 3.507.227 4.743.607.615.19 1.149.426 1.54.71.38.277.716.67.717 1.183 0 .513-.337.906-.717 1.183-.391.284-.925.52-1.54.71q-.337.102-.715.189a.484.484 0 0 1-.585-.516.52.52 0 0 1 .396-.466q.324-.075.61-.163c.561-.173.98-.37 1.246-.563.277-.202.305-.335.305-.374 0-.04-.029-.173-.305-.374-.267-.194-.685-.39-1.246-.562-1.117-.344-2.69-.564-4.45-.564a.397.397 0 0 1-.4-.433l.026-.233A.38.38 0 0 1 12 9.5M12 5c.512 0 .906.337 1.182.717.285.39.521.925.71 1.54q.104.337.19.714a.484.484 0 0 1-.517.585.52.52 0 0 1-.466-.397 9 9 0 0 0-.163-.608c-.172-.561-.368-.98-.562-1.246C12.174 6.029 12.04 6 12 6s-.174.03-.374.305c-.194.266-.39.685-.563 1.246-.343 1.116-.563 2.69-.563 4.449a.396.396 0 0 1-.433.4l-.233-.025A.38.38 0 0 1 9.5 12c0-1.83.227-3.507.607-4.743.19-.615.426-1.15.71-1.54.277-.38.67-.717 1.183-.717M7.05 7.05c.362-.362.879-.403 1.343-.33q.134.022.274.057c.2.05.332.237.332.444 0 .344-.352.567-.69.5l-.072-.013c-.338-.053-.452.022-.48.05-.029.028-.102.142-.05.48l.013.073c.068.337-.155.689-.5.689a.45.45 0 0 1-.443-.331 3 3 0 0 1-.057-.275c-.073-.465-.033-.98.33-1.343m8.556-.33c.464-.072.98-.031 1.343.33.362.363.403.88.33 1.344a3 3 0 0 1-.057.274.45.45 0 0 1-.443.332c-.345 0-.57-.352-.502-.69l.014-.073c.053-.336-.02-.45-.05-.48-.028-.027-.142-.102-.479-.049l-.074.013c-.338.067-.689-.156-.69-.5a.45.45 0 0 1 .332-.444q.141-.035.276-.056"})})}),eH=(0,o.forwardRef)(function(e,t){let{sourceIndex:n,currentRowIndex:a,component:c,libraryKey:r,selectedFile:s,selectedComponent:l,onComponentChanged:i,disabled:m=!1,repositoriesAvailable:d,onboardingKey:_,isInline:p=!1}=e,[u,b]=(0,o.useState)(""),{searchResults:f,isLoadingFileContent:h}=function({libraryKey:e,selectedFile:t,repositoriesAvailable:n,searchTerm:a}){let c=t?.metadata?.repository?.id,r=t?.metadata?.path,[s]=(0,D.IT)((0,G.rt)({libraryKey:e,repository:c??"",path:r??""}),{enabled:!!t&&!!e&&!!c&&!!r&&!t?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${r}`}),l="loading"===s.status,i="loaded"===s.status,m=s.data,d=(0,o.useMemo)(()=>i&&m?m.components:[],[i,m]);return{searchResults:(0,o.useMemo)(()=>d.length||n?d.filter(e=>e.toLowerCase().includes(a.toLowerCase())).map(e=>({title:e,subtitle:"",icon:o.createElement(eX,null)})):[],[a,d,n]),isLoadingFileContent:l,searchTerm:a}}({libraryKey:r,selectedFile:s,repositoriesAvailable:d,searchTerm:u});if("ignored"===c.code_connect_info.v1.state)return o.createElement("span",null,"--");let v=p?(0,g.t)("dev_handoff.component_browser.component_name"):(0,g.t)("dev_handoff.component_browser.add_component_name");return o.createElement(U,{ref:t,arePillsClearable:!0,disabled:m,hint:(0,g.t)("dev_handoff.component_browser.component_search_hint"),isClearable:!1,isLoadingSearchResults:h,onDeleteLastItem:()=>{i({sourceIndex:n,currentRowIndex:a,selectedComponent:null,action:"delete",trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{i({sourceIndex:n,currentRowIndex:a,selectedComponent:t,action:"create",trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>""!==t.trim()&&(i({sourceIndex:n,currentRowIndex:a,selectedComponent:{title:t,subtitle:""},action:"create",trackingProps:{location:e.location,source:"manual"}}),!0),onValueChanged:e=>{b(e)},onboardingKey:_,placeholder:l?"":v,searchResults:f,selectedItem:l?{value:[{value:l.title}]}:void 0,showDropdown:!s?.metadata?.isCustomLink&&!l&&d,showDropdownOnFocus:!0})}),ej=(0,o.forwardRef)(function({index:e,showIcon:t,libraryKey:n,component:a,selectedFile:c,selectedComponent:r,onFileChanged:s,onComponentChanged:l,title:i},m){let d=o.useRef(null),_=o.useRef(null),p=o.useRef(null),u=(0,R.OG)(n);return(0,o.useImperativeHandle)(m,()=>({fileSearchInputRef:d,componentSearchInputRef:_})),(0,o.useEffect)(()=>{d.current?.focus()},[e,d]),o.createElement("div",{className:eO,ref:p},o.createElement("div",{className:eK},t&&o.createElement(ez.X,null),i),o.createElement("div",{className:eB},o.createElement("label",{className:eq},(0,g.t)("dev_handoff.component_browser.code_file")),o.createElement(J,{ref:d,sourceIndex:e,component:a,libraryKey:n,onFileChanged:s,selectedFile:c,selectedRepositories:u?.selectedRepositories??[],location:"side_sheet"})),o.createElement("div",{className:eB},o.createElement("label",{className:eq},(0,g.t)("dev_handoff.component_browser.code_component")),o.createElement(eH,{ref:_,sourceIndex:e,component:a,libraryKey:n,selectedFile:c,onComponentChanged:l,selectedComponent:r,repositoriesAvailable:(u?.selectedRepositories?.length??0)>0,location:"side_sheet"})))});var eZ=n(763593);let e0="component_browser_connect_dialog--footer--Pu5AO",e1="component_browser_connect_dialog--contentTitle--Zbcus utilities--bodyMediumStrong--1R5cZ",e3="component_browser_connect_dialog--contentIcon--Paond utilities--bodyMediumStrong--1R5cZ",e2="component_browser_connect_dialog--connectedComponentTable--pHSDk",e4="component_browser_connect_dialog--connectedComponentTableRow--vcP6G",e5="component_browser_connect_dialog--connectedComponentTableFirstCell--TagEo",e7="component_browser_connect_dialog--connectedComponentTableSecondCell--n97Tg",e6="component_browser_connect_dialog--connectionContent--cUifs";function e8({onRequestPreviousComponent:e,onRequestNextComponent:t}){return o.createElement("div",{className:"component_browser_connect_dialog--footerNavigationButtons--jdpAm"},o.createElement(r.K,{"aria-label":(0,g.t)("dev_handoff.component_browser.previous"),onClick:e},o.createElement(em.N,null)),o.createElement(r.K,{"aria-label":(0,g.t)("dev_handoff.component_browser.next"),onClick:t},o.createElement(ed.W,null)))}let e9=(0,o.forwardRef)(function({isConnected:e,isIgnored:t,handleDeleteMapping:n,handleConnect:a,handleIgnore:c,selectedFile:r,selectedComponent:s,isDisabled:l,onRequestPreviousComponent:i,onRequestNextComponent:m},d){return e||t?o.createElement("div",{className:e0},o.createElement(e8,{onRequestPreviousComponent:i,onRequestNextComponent:m}),o.createElement(er.$n,{onClick:n,variant:"destructive",disabled:l},t?(0,g.t)("dev_handoff.component_browser.has_code_equivalent"):(0,g.t)("dev_handoff.component_browser.disconnect"),o.createElement(er.$n.Shortcut,null,"\u232B"))):o.createElement("div",{className:e0},o.createElement(e8,{onRequestPreviousComponent:i,onRequestNextComponent:m}),o.createElement("div",{className:"component_browser_connect_dialog--footerButtons--wRhfx"},o.createElement(er.$n,{variant:"secondary",onClick:c,disabled:l},(0,g.t)("dev_handoff.component_browser.mark_as_no_code_equivalent"),o.createElement(er.$n.Shortcut,null,"\u21E7\u232B")),o.createElement(er.$n,{ref:d,onClick:a,disabled:l||!r||!s},(0,g.t)("dev_handoff.component_browser.code_connect"),o.createElement(er.$n.Shortcut,null,"\u21B5"))))});function te({data:e,sourceIndex:t,onClose:n,onRequestNextComponent:a,onRequestPreviousComponent:c,notConnectedComponents:r,connectedComponents:s,ignoredComponents:l,onDeleteMapping:i,onIgnoreMapping:m,onConnectMapping:d}){let[_,p]=(0,o.useState)(null),[u,b]=(0,o.useState)(null),[f]=(0,ef.Vc)("componentBrowserOnboardingSelection",null),h=(0,eE.A)(),v=o.useRef(null),w=o.useRef(null),E=o.useRef(null),y="connected"===e.component.code_connect_info.v1.state,C="ignored"===e.component.code_connect_info.v1.state,N=e.component.code_connect_info.v1?.type==="figmadoc";(0,o.useEffect)(()=>{p(e?.selectedFile??null),b(e?.selectedComponent??null)},[e]);let S=(0,eb.hC)();(0,eg.h)(()=>{S("component_browser.component_browser_side_sheet_viewed")});let I="key"in e.component?e.component.key:"component_key"in e.component?e.component.component_key:"",[x]=(0,T.A)(I,1e3,{leading:!0});(0,o.useEffect)(()=>{(C||y)&&w.current?.focus()},[C,y]);let[L,[M]]=(0,eS.gY)(e.component,"not_connected"===e.component.code_connect_info.v2.state&&x===I,null),[R,P]=o.useState(0),[D,A]=o.useState(!1),F=(0,ev.Ak)(e.component.updated_at),[O,K]=o.useState(""),[B,q]=o.useState(!1);(0,o.useEffect)(()=>{P(-1),A(!1)},[I,P]),(0,o.useEffect)(()=>{"loaded"===M.status&&P(0)},[I,M.status,P]);let V=()=>{let n={location:"side_sheet",source:B?"codebase_suggestions":"manual"};if(D&&"loaded"===M.status&&M.data?.length>R){let e=M.data,t=(0,eF.tG)(L,e[R]||null);n={...n,...t,source:"codebase_suggestions",indexInList:R}}d({row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:_,selectedComponent:u},trackingProps:n})},W=()=>{m({row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:_,selectedComponent:u},trackingProps:{location:"side_sheet"}})},$=()=>{let n=e.component.code_connect_info.v1.id;n&&i({codeConnectId:n,row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:null,selectedComponent:null},trackingProps:{location:"side_sheet"}})},Q="codebase_ingestion"===f&&!y&&h,U=(0,o.useCallback)(t=>{q(!1),p(t.selectedFile),A(!1),S("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_file",location:"side_sheet",value:t.selectedFile?.title}),t.selectedFile&&E.current?.componentSearchInputRef.current?.focus()},[e.component.node_id,S]),G=(0,o.useCallback)(t=>{b(t.selectedComponent),q(!1),A(!1),S("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_component",location:"side_sheet",value:t.selectedComponent?.title}),"create"===t.action&&t.selectedComponent&&_&&v.current?.focus()},[e.component.node_id,_,S]);return o.createElement(ew.n.div,{ref:w,className:"component_browser_connect_dialog--wrapper--pYy--",onKeyDown:function(e){let t=E.current?.fileSearchInputRef.current===document.activeElement,o=E.current?.componentSearchInputRef.current===document.activeElement,r=t||o;if("Backspace"===e.key&&e.shiftKey){W();return}if("Escape"===e.key&&r){E.current?.componentSearchInputRef.current?.blur(),E.current?.fileSearchInputRef.current?.blur(),w.current?.focus();return}if(!r)switch(e.key){case"ArrowUp":c();break;case"ArrowDown":a();break;case"ArrowRight":!function(){let e=M.data;e&&P(t=>t+1>=e.length?0:t+1)}();break;case"ArrowLeft":!function(){let e=M.data;e&&P(t=>t-1<0?e.length-1:t-1)}();break;case"Enter":V();break;case"Escape":n();break;case"Backspace":e.shiftKey?W():$()}},tabIndex:-1},o.createElement("div",{className:"component_browser_connect_dialog--header--5-qTG"},o.createElement("div",{className:"component_browser_connect_dialog--headerSide--EpKa2"},o.createElement(eZ.o,{open:!0,notConnectedComponents:r,connectedComponents:s,ignoredComponents:l}))),o.createElement("div",{className:"component_browser_connect_dialog--content--pfamD"},o.createElement("div",{"data-onboarding-key":k.kE.Step2,className:"component_browser_connect_dialog--designContent--f-Lg3"},o.createElement("div",{className:"component_browser_connect_dialog--title--bpt4P utilities--bodyMediumStrong--1R5cZ"},o.createElement("div",{className:"component_browser_connect_dialog--titleIcon--WvA82"},o.createElement(e_.m,null),(0,g.t)("dev_handoff.component_browser.figma_component_label")),e.component.name),o.createElement("div",{className:"component_browser_connect_dialog--imageWrapper--xsdOt"},o.createElement(eh.oW,{className:"component_browser_connect_dialog--componentThumbnail--8njGv",src:e.component.thumbnail_url,alt:e.component.name})),o.createElement("div",{className:"component_browser_connect_dialog--lastUpdated--VWubK"},(0,g.t)("dev_handoff.component_browser.last_updated",{0:F})),o.createElement("div",{className:"component_browser_connect_dialog--description--YNpNH"},o.createElement(ey.i,{description:e.component.description,description_rt:e.component.description_rt}))),C?o.createElement("div",{className:e6},o.createElement("div",{className:e1},o.createElement("div",{className:e3},o.createElement(ep.I,null)),(0,g.t)("dev_handoff.component_browser.no_code_equivalent_menu")),o.createElement("div",null,o.createElement("table",{className:e2},o.createElement("tbody",null,o.createElement("tr",{className:e4},o.createElement("td",{className:e5},(0,g.t)("dev_handoff.component_browser.marked_by")),o.createElement("td",{className:e7},e.component.code_connect_info.v1.author_name)),o.createElement("tr",{className:e4},o.createElement("td",{className:e5},(0,g.t)("dev_handoff.component_browser.date")),o.createElement("td",{className:e7},e.component.code_connect_info.v1.updated_at?(0,eu.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"):"")))))):y?o.createElement(tt,{data:e}):o.createElement(o.Fragment,null,Q?o.createElement(eY,{libraryKey:e.component.library_key,component:e.component,onCodeChange:K,onSuggestionSelected:e=>{e&&(A(!0),P(e.index)),q(!0),p(e?{title:e.source,metadata:{name:e.name,type:"file",isCustomLink:!1,repository:{id:"",name:""},path:e.source,sha:""}}:null),b(e?{title:e.componentName}:null)},searchSessionId:L}):null,o.createElement(ej,{ref:E,component:e.component,index:t,libraryKey:e.component.library_key,onComponentChanged:G,onFileChanged:U,selectedComponent:u,selectedFile:_,showIcon:"manual"===f,title:"manual"===f||"github"===f?(0,g.t)("dev_handoff.component_browser.in_your_codebase"):(0,g.t)("dev_handoff.component_browser.none_of_these_work")}))),o.createElement(e9,{ref:v,handleConnect:V,handleDeleteMapping:$,handleIgnore:W,isConnected:y,isDisabled:N,isIgnored:C,onRequestNextComponent:a,onRequestPreviousComponent:c,selectedComponent:u,selectedFile:_}))}function tt({data:e}){let t=e.component?.code_connect_info?.v1?.type==="figmadoc",n=(0,eu.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"),a=[{title:(0,g.t)("dev_handoff.component_browser.component_file"),value:e.selectedFile?.subtitle??e.selectedFile?.title},{title:(0,g.t)("dev_handoff.component_browser.component_name"),value:e.selectedComponent?.title},{title:(0,g.t)("dev_handoff.component_browser.linked_by"),value:e.component.code_connect_info.v1.author_name},{title:(0,g.t)("dev_handoff.component_browser.date_linked"),value:n}];return t?o.createElement("div",{className:"component_browser_connect_dialog--warningWrapper---Q4Ly"},o.createElement(es.Yy,{variant:"warn"},o.createElement(el.Q,{title:(0,g.t)("dev_handoff.component_browser.cli_only_title")},(0,g.t)("dev_handoff.component_browser.cli_only_message"),o.createElement(ei.N,{href:"https://www.figma.com/code-connect-docs/"},(0,g.t)("dev_handoff.component_browser.learn_more"))))):o.createElement("div",{className:e6},o.createElement("div",{className:e1},o.createElement("div",{className:e3},o.createElement(ep.I,null)),(0,g.t)("dev_handoff.component_browser.component_in_your_codebase")+" "+e.selectedComponent?.title),o.createElement("div",null,o.createElement("table",{className:e2},o.createElement("tbody",null,a.map(e=>o.createElement("tr",{key:e.title,className:e4},o.createElement("td",{className:e5},e.title),o.createElement("td",{className:e7},e.value)))))))}var tn=n(749233),to=n(218742),ta=n(266004);let tc="progress_ring--ring--QMZk8";function tr(e){let{fraction:t,stroke:n=2,size:a=16,color:c="var(--color-icon-menu-tertiary, rgba(255, 255, 255, 0.4))"}=e,r=a/2,s=(a-n)/2,l=2*s*Math.PI;return o.createElement("svg",{height:a,width:a},e.background&&o.createElement("circle",{className:tc,strokeWidth:n,strokeDasharray:`${l} ${l}`,strokeDashoffset:0,r:s,cx:r,cy:r,style:{stroke:e.background}}),o.createElement("circle",{className:tc,strokeWidth:n,strokeDasharray:`${l} ${l}`,style:{strokeDashoffset:l-t*l,stroke:c},r:s,cx:r,cy:r}))}let ts="component_browser_library_view_mapping_counts--statusRow--U5TVX",tl="component_browser_library_view_mapping_counts--statusText--EMe8n",ti="component_browser_library_view_mapping_counts--iconRingContainer--35-2h",tm="component_browser_library_view_mapping_counts--centeredIcon--9-npT";function td({notConnectedComponents:e,connectedComponents:t,ignoredComponents:n}){let a=t.length+e.length+n.length,c=e=>0===a?0:Math.round(e/a*100);return o.createElement("div",{className:"component_browser_library_view_mapping_counts--container--rjZ68"},o.createElement("div",{className:"component_browser_library_view_mapping_counts--border--M34yA"}),o.createElement("div",{className:"component_browser_library_view_mapping_counts--headerRow--dorJ-"},o.createElement("div",{className:"component_browser_library_view_mapping_counts--title--mlZdy"},(0,g.tx)("dev_handoff.component_browser_right_panel_mapping_counts.title"))),o.createElement("div",{className:"component_browser_library_view_mapping_counts--statusSection--229SS"},o.createElement("div",{className:ts},o.createElement("div",{className:ti},o.createElement(tr,{fraction:c(e.length)/100,color:"var(--color-multiplayergrey)",background:"var(--color-bg-secondary)",size:32,stroke:4}),o.createElement(tn.w,{className:tm,style:{"--color-icon":"var(--color-multiplayergrey)"}})),o.createElement("div",{className:tl},(0,g.tx)("dev_handoff.component_browser.in_context_section_percent_components_need_to_be_mapped",{num_components:c(e.length)}))),o.createElement("div",{className:ts},o.createElement("div",{className:ti},o.createElement(tr,{fraction:c(t.length)/100,color:"var(--color-bg-handoff)",background:"var(--color-bg-handoff-tertiary)",size:32,stroke:4}),o.createElement(to.W,{className:tm,style:{"--color-icon":"var(--color-bg-handoff)"}})),o.createElement("div",{className:tl},(0,g.tx)("dev_handoff.component_browser.in_context_section_percent_components_mapped",{num_components:c(t.length)}))),o.createElement("div",{className:ts},o.createElement("div",{className:ti},o.createElement(tr,{fraction:c(n.length)/100,color:"var(--color-bg-warning)",background:"var(--color-bg-warning-tertiary)",size:32,stroke:4}),o.createElement(ta.M,{className:tm,style:{"--color-icon":"var(--color-icon-warning)"}})),o.createElement("div",{className:tl},(0,g.tx)("dev_handoff.component_browser.in_context_section_percent_components_can_t_be_mapped",{num_components:c(n.length)})))))}var t_=n(672449);let tp="component_browser_library_view_suggestions_status--statusDotCircle--5M5TN";function tu({indexingState:e,componentsWithSuggestionsCount:t,totalComponentsCount:n,onViewSuggestions:a}){let c="",r="",s=tp,l=!1;switch(e){case"indexing":c=(0,g.t)("component_browser.suggestions_status.indexing_in_progress"),r=(0,g.t)("component_browser.suggestions_status.indexing_description"),s=tp+" component_browser_library_view_suggestions_status--statusDotCircleWarning--XNDIt";break;case"complete_available_components":c=(0,g.t)("component_browser.suggestions_status.suggestions_available"),r=(0,g.t)("component_browser.suggestions_status.suggestions_available_description",{suggestions_count:t??0,total_components_count:n??0}),s=tp+" component_browser_library_view_suggestions_status--statusDotCircleHandoff--Vd7wB",l=!0;break;case"complete_no_available_components":c=(0,g.t)("component_browser.suggestions_status.no_suggestions"),r=(0,g.t)("component_browser.suggestions_status.no_suggestions_description"),s=tp+" component_browser_library_view_suggestions_status--statusDotCircleTertiary--AnmEk"}return o.createElement("div",{className:"component_browser_library_view_suggestions_status--container--qSV-D"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--border--Jw79U"}),o.createElement("div",{className:"component_browser_library_view_suggestions_status--header--kBmN-"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--headerRow--QgWgT"},o.createElement(t_.N,null),o.createElement("div",{className:"component_browser_library_view_suggestions_status--title--inV3P"},o.createElement("p",null,(0,g.t)("component_browser.suggestions_status.title"))))),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusSection--BDuQ4"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusRow--BJKC5"},o.createElement("div",{className:s}),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusText--IRVPD"},o.createElement("p",null,c))),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusDescriptionRow--Iehb8"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusDescription---7S3f"},o.createElement("p",null,r))),l&&o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusButtonContainer--BkWpr"},o.createElement(er.$n,{variant:"secondary",onClick:a},(0,g.t)("component_browser.suggestions_status.view_suggestions")))))}function tb({notConnectedComponents:e,connectedComponents:t,ignoredComponents:n,suggestionsAvailableComponents:a,suggestionsReady:c,onViewSuggestions:r}){let{indexingState:s,componentsWithSuggestionsCount:l}=function(e,t){if(!e)return{indexingState:"indexing",componentsWithSuggestionsCount:0};let n=t.length;return 0===n?{indexingState:"complete_no_available_components",componentsWithSuggestionsCount:0}:{indexingState:"complete_available_components",componentsWithSuggestionsCount:n}}(c,a);return o.createElement("div",{className:"component_browser_library_view_right_panel--container--sJEeY"},(0,_.k)().dt_component_browser_bulk_mapping&&o.createElement(tu,{indexingState:s,componentsWithSuggestionsCount:l,totalComponentsCount:e.length+t.length+n.length,onViewSuggestions:r}),o.createElement(td,{notConnectedComponents:e,connectedComponents:t,ignoredComponents:n}))}var tg=n(748059),tf=n(52495),th=n(398612),tv=n(615233),tw=n(611057),tE=n(968325),ty=n(179688),tC=n(440539),tk=n(506428),tN=n(162796),tS=n(309488),tI=n(93275),tx=n(952039),tL=n(138528),tM=n(513718),tR=n(446951);let tP="confirm_deletion_modal--bodyText--OTH-f",tT=(0,tR.Ju)(function(e){let t=tN.hS(e),n=(0,tL.D6)("ConfirmDeletionModal"),a=(0,eC.wA)(),c="loaded"===n.status,[r,s]=(0,o.useState)(!1),l=n.data?.planKey,i=l?.type,m=l?.parentId,d=(0,o.useCallback)(async()=>{if(i&&m){(0,ek.trackEvent)(eA.WG),s(!0);try{await tM.w.deleteAllCodeSuggestions({planParentType:i,planParentId:m}),a(tx.F.enqueue({type:"success",message:(0,g.t)("dev_handoff.codebase_suggestions.deletion_request_received_it_may_take_a_few_minutes_to_complete")})),e.onClose()}catch(e){a(tx.F.enqueue({type:"error",message:(0,g.t)("dev_handoff.codebase_suggestions.failed_to_submit_deletion_request_please_try_again_later")})),s(!1)}}},[e,a,i,m]);return o.createElement(tS.bL,{manager:t,width:"md"},o.createElement(tI.vo,null,o.createElement(tI.Y9,null,o.createElement(tI.hE,null,(0,g.t)("dev_handoff.codebase_suggestions.delete_all_visual_codebase_suggestions"))),o.createElement(tI.nB,null,o.createElement("p",{className:tP},(0,g.t)("dev_handoff.codebase_suggestions.are_you_sure_you_want_to_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far")),o.createElement("p",{className:tP},(0,g.t)("dev_handoff.codebase_suggestions.this_will_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far_for_your_organization_you_ll_need_to_connect_your_running_app_again_if_you_change_your_mind")),o.createElement("p",{className:tP},(0,g.t)("dev_handoff.codebase_suggestions.this_will_not_delete_any_explicit_code_connect_mappings_you_have_made_with_those_suggestions"))),o.createElement(tI.wi,null,o.createElement(tI.jk,null,o.createElement(er.$n,{variant:"secondary",onClick:e.onClose},(0,g.t)("dev_handoff.codebase_suggestions.cancel")),o.createElement(er.$n,{variant:"destructive",disabled:!(c&&!r),onClick:d},(0,g.t)("dev_handoff.codebase_suggestions.delete"))))))}),tD="component_browser_settings_panel--iconContainer--xstoF",tA="component_browser_settings_panel--optionTitleText--KwUII",tF="component_browser_settings_panel--option--v7PyN",tO="component_browser_settings_panel--optionTitle--hQS7B";function tK({onChangeRepo:e,status:t,hasMultipleAvailableRepositories:n}){let{getTriggerProps:a,manager:c}=N.b(),r=(0,ty.e)(),[s,l]=o.useState(!1),i=async()=>{l(!0);try{await r()}finally{l(!1)}},m=async()=>{let e=await (0,tC.l)();(0,th.FJ)(e.manage)},d={[R.w6.Connected]:o.createElement(o.Fragment,null,n&&o.createElement(N.q7,{onClick:e},(0,g.t)("dev_handoff.component_browser.settings.change_repository")),o.createElement(N.q7,{onClick:m},(0,g.t)("dev_handoff.component_browser.settings.disconnect"))),[R.w6.NeedsInfo]:o.createElement(o.Fragment,null,o.createElement(N.q7,{onClick:e},(0,g.t)("dev_handoff.component_browser.settings.select_repository"))),[R.w6.Pending]:o.createElement(o.Fragment,null,o.createElement(N.q7,{onClick:m},(0,g.t)("dev_handoff.component_browser.settings.manage_request"))),[R.w6.NotSetup]:o.createElement(o.Fragment,null,o.createElement(N.q7,{onClick:i},s?o.createElement(I.k,{size:"sm"}):(0,g.t)("dev_handoff.component_browser.settings.setup")))};return o.createElement(N.bL,{manager:c},o.createElement(er.$n,{variant:"ghost",...a()},o.createElement(x.J,null)),o.createElement(N.mc,null,d[t]))}function tB(){let e=(0,eC.wA)(),{getTriggerProps:t,manager:n}=N.b(),a=o.useCallback(()=>{e(eT.to({type:eI.d}))},[e]),c=o.useCallback(()=>{e((0,eT.to)({type:tT}))},[e]);return o.createElement("div",{className:"component_browser_settings_panel--setupIngestionButton---keGz"},o.createElement(N.bL,{manager:n},o.createElement(er.$n,{variant:"ghost",...t()},o.createElement(x.J,null)),o.createElement(N.mc,null,o.createElement(N.q7,{onClick:a},(0,g.t)("dev_handoff.component_browser.settings.setup")),o.createElement(N.q7,{onClick:c},(0,g.t)("dev_handoff.codebase_suggestions.delete_all_codebase_suggestions")))))}function tq({status:e}){switch(e){case R.w6.Pending:return o.createElement(c.E,{variant:"warningOutline"},(0,g.t)("dev_handoff.component_browser_source_connection_status.pending"));case R.w6.NeedsInfo:return o.createElement(c.E,{variant:"warningOutline"},(0,g.t)("dev_handoff.component_browser_source_connection_status.needs_info"));case R.w6.Connected:return o.createElement(c.E,{variant:"successOutline"},(0,g.t)("dev_handoff.component_browser_source_connection_status.connected"));default:return o.createElement(c.E,{variant:"inactiveOutline"},(0,g.t)("dev_handoff.component_browser_source_connection_status.not_setup"))}}function tV({position:e,getContainerProps:t,onOpenChange:n,libraryKey:a}){let c="dark"===(0,tk.DP)(),r=(0,eE.A)(),s=c?(0,tv.ck)("87362980e1543a5db4a0044590b04d5f491a1e75"):(0,tv.ck)("a938cc4b8421dc36477282e09f83e9e6770065ed"),l=(0,w.Bt)(),i=(0,R.OG)(a),m={[R.w6.Connected]:i?.selectedRepositories?.[0]?.name??(0,g.t)("dev_handoff.component_browser.settings.change_repository"),[R.w6.NeedsInfo]:(0,g.t)("dev_handoff.component_browser.settings.connect_github"),[R.w6.Pending]:(0,g.t)("dev_handoff.component_browser.settings.connect_github"),[R.w6.NotSetup]:(0,g.t)("dev_handoff.component_browser.settings.connect_github")},d=i?.availableRepositories?.length&&i.availableRepositories.length>1;return o.createElement(tg.mc,{...t(),className:"component_browser_settings_panel--container--bNvEu",style:{top:`${e.top+24+8}px`,left:`${e.left-320+24}px`,width:"320px"}},o.createElement("div",{className:"component_browser_settings_panel--title--I250A"},(0,g.t)("dev_handoff.component_browser.settings.title")),o.createElement("div",{className:"component_browser_settings_panel--options--BisI-"},o.createElement("div",{className:tF},o.createElement("div",{className:tO},o.createElement("div",{className:tD},o.createElement(tE.f,null)),i?.queryStatus===tw.H.LOADING?o.createElement("div",{className:tA},o.createElement(I.k,{size:"sm"})):o.createElement("div",{className:tA},m[i.status])),o.createElement("div",{className:"component_browser_settings_panel--optionActions--kGJXl"},o.createElement(tq,{status:i.status}),o.createElement(tK,{onChangeRepo:()=>{l(!0),n(!1)},status:i.status,hasMultipleAvailableRepositories:!!d}))),r&&o.createElement("div",{className:tF},o.createElement("div",{className:tO},o.createElement("div",{className:tD},o.createElement(eh.oW,{src:s,alt:(0,g.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:"component_browser_settings_panel--cardImage--YKour"})),o.createElement("div",{className:tA},(0,g.t)("dev_handoff.component_browser.settings.connect_running_app"))),o.createElement("div",null,o.createElement(tB,null))),o.createElement("div",{className:"component_browser_settings_panel--footer--2OuKN"},(0,g.tx)("dev_handoff.component_browser.settings.footer_message",{learnMore:o.createElement(ei.N,{href:"https://docs.google.com/document/d/1IsJTLpqR1rRQfphfbotvWoYbtoaZExKpggeANRFmRI8/edit?tab=t.0",newTab:!0,"aria-label":(0,g.t)("dev_handoff.component_browser.settings.footer_message_link")},(0,g.t)("dev_handoff.component_browser.settings.footer_message_link"))}))))}function tW({libraryKey:e}){let t=o.useRef(null),[n,a]=o.useState(!1),{getTriggerProps:c,getContainerProps:r}=tg.fP({isOpen:n,onOpenChange:a,type:"dialog",softDismiss:!0});return o.createElement(o.Fragment,null,o.createElement(S.d,{...c(),"aria-label":(0,g.t)("dev_handoff.component_browser.settings"),htmlAttributes:{"data-tooltip":(0,g.t)("dev_handoff.codebase_suggestions.open_settings"),"data-tooltip-type":C.Ib.TEXT},"data-onboarding-key":k.cU.Step1,"aria-expanded":n,ref:t},o.createElement(tf.I,null)),o.createElement(tV,{getContainerProps:r,onOpenChange:a,position:t.current?.getBoundingClientRect()??{top:0,left:0},libraryKey:e}))}var t$=n(786209);let tQ="component_browser_library_view--componentsListLoadingOrError--JChCC";function tU({displayedComponent:e,displayedComponentIndex:t,onConnectMapping:n,onDeleteMapping:c,onDisplayNextComponent:r,onDisplayPreviousComponent:s,onDisplayedComponentChanged:l,onIgnoreMapping:i,paginationInfo:m}){return(0,a.createPortal)(o.createElement(o.Fragment,null,o.createElement(tY,{onCloseDialog:()=>l(null)}),o.createElement("div",{className:"component_browser_library_view--containerRight--zBqnJ utilities--bodyMedium--7-YGK"},o.createElement(te,{connectedComponents:m.connectedComponents,data:e,ignoredComponents:m.ignoredComponents,notConnectedComponents:m.notConnectedComponents,onClose:()=>l(null),onConnectMapping:n,onDeleteMapping:c,onIgnoreMapping:i,onRequestNextComponent:r,onRequestPreviousComponent:s,sourceIndex:t}))),document.body)}function tG(e){let t=e.componentKey,n=(0,d.l)(e.libraryKey),a=(0,E.bh)(),s=tJ(n),i=(0,p.md)(f.a),u=(0,w.xV)(),b=(0,w.Bt)(),y=(0,_.k)().dt_component_browser_icons_flow&&"icons"===i,{inputRefs:C,status:N,paginationInfo:S,displayedComponent:I,displayedComponentIndex:x,onDisplayedComponentChanged:L,onFileChanged:M,onComponentChanged:R,onValueChange:P,onConfirmConnection:T,onConfirmSuggestion:D,onMoreActionsMenuItemClick:A,filteredComponents:F,searchQuery:O,setSearchQuery:K,dropdownFilter:B,setDropdownFilter:q,onConnectMapping:V,onDeleteMapping:W,onIgnoreMapping:$,onDisplayNextComponent:Q,onDisplayPreviousComponent:U,getIndexOfComponent:G,connectedComponents:z,notConnectedComponents:J,ignoredComponents:X,suggestionsAvailableComponents:H,componentCounts:j,suggestions:Z}=(0,Y.dx)({libraryKey:n,componentKey:t,defaultFilter:e.defaultFilter}),ee="loading"===s||"loading"===N,et=(0,o.useCallback)(e=>{if(e===k.qd.OpenDialog){if(F.length>0&&!I){let e=F[0];e&&L(e.component)}}else e===k.qd.CloseDialog&&L(null)},[F,I,L]);return o.createElement(m.J,null,o.createElement(k.Mj,{canShowOnboarding:!ee,onOnboardingSequenceAction:et}),o.createElement("div",{className:"component_browser_library_view--container--sxcXn"},o.createElement("div",{className:"component_browser_library_view--containerLeft--tMnWN"},o.createElement("div",{className:"component_browser_library_view--header--pZiav"},o.createElement("div",{className:"component_browser_library_view--headerLeft--coXBP"},o.createElement("h1",{className:"component_browser_library_view--headerText--jnhLj"},y?(0,g.t)("dev_handoff.component_browser.map_icons_to_code_title"):(0,g.t)("dev_handoff.component_browser.title")),o.createElement(c.E,{variant:"defaultOutline"},(0,g.t)("dev_handoff.component_browser.alpha"))),o.createElement("div",{className:"component_browser_library_view--headerRight--iwCrG"},o.createElement(tW,{libraryKey:n}),y&&o.createElement(ea,{connectedComponents:z,onDeleteMapping:W}),"file"===e.location&&o.createElement(r.K,{"aria-label":(0,g.t)("dev_handoff.component_browser.close_component_browser"),onClick:a},o.createElement(l.L,null)))),y&&s&&o.createElement(ec,{connectedComponents:z,notConnectedComponents:J,ignoredComponents:X,onConnectMapping:V,onDeleteMapping:W,onIgnoreMapping:$,getIndexOfComponent:G,libraryKey:n}),o.createElement("div",{className:"component_browser_library_view--contentContainer--EKiHF"},o.createElement("div",{className:"component_browser_library_view--componentsToolbarAndList--o2Dlh"},ee||s?"errors"===N?o.createElement("div",{className:tQ},(0,g.t)("dev_handoff.component_browser.error_loading")):o.createElement(o.Fragment,null,o.createElement("div",{className:"component_browser_library_view--componentsListFilters--M4se4"},o.createElement("div",{className:"component_browser_library_view--componentsListFiltersInner--t95XT"},o.createElement(tz,{value:O,onChange:K}),o.createElement("div",{className:"component_browser_library_view--componentsListFiltersRight--d-PGj"},o.createElement(h.z,{componentCounts:j,dropdownFilter:B,setDropdownFilter:q})))),o.createElement(t$.g,{bulkSuggestions:Z,data:F,inputRefs:C,isLoading:ee,libraryKey:n,location:"list_view",onComponentChanged:R,onConfirmConnection:T,onConfirmSuggestion:D,onFileChanged:M,onMoreActionsMenuItemClick:A,onSelectComponent:L,onValueChange:P,searchQuery:O,selectedComponent:I?.component??null})):o.createElement("div",{className:tQ},(0,g.t)("dev_handoff.component_browser.no_permission"))),o.createElement("div",{className:"component_browser_library_view--rightPanel--bnzK-"},o.createElement(tb,{notConnectedComponents:J,connectedComponents:z,ignoredComponents:X,suggestionsAvailableComponents:H,suggestionsReady:null!=Z,onViewSuggestions:()=>q("suggestionsAvailable")})))),I&&s&&o.createElement(tU,{displayedComponent:I,displayedComponentIndex:x,onConnectMapping:V,onDeleteMapping:W,onDisplayNextComponent:Q,onDisplayPreviousComponent:U,onDisplayedComponentChanged:L,onIgnoreMapping:$,paginationInfo:S})),u&&n&&o.createElement(v.A,{libraryKey:n,onClose:()=>b(!1),onBack:()=>b(!1)}))}function tY({onCloseDialog:e}){return o.createElement(s.E,{onClick:e,className:"component_browser_library_view--dialogOverlay--lWQNK"},o.createElement("div",{className:"component_browser_library_view--dialogOverlayContent--vAFyK"}))}function tz({value:e,onChange:t}){return o.createElement("div",{className:"component_browser_library_view--searchBar--bauvr"},o.createElement(i.h,null),o.createElement(b.L,{placeholder:(0,g.t)("dev_handoff.component_browser.search_placeholder"),value:e,onChange:e=>{t(e.currentTarget.value)},className:"component_browser_library_view--searchInput--tzNk- text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&o.createElement("div",null,o.createElement(r.K,{onClick:()=>t(""),"aria-label":(0,g.t)("dev_handoff.component_browser.clear_search"),htmlAttributes:{"data-tooltip":(0,g.t)("dev_handoff.component_browser.clear_search"),"data-tooltip-type":C.Ib.TEXT}},o.createElement(l.L,null))))}function tJ(e){let t=(0,u.Rs)((0,y.iAs)({libraryKey:e??""}),{enabled:!!e});return!!e&&"errors"!==t.status&&("loading"===t.status?"loading":!!t.data?.libraryKeyToFile?.fileCanAccess)}},273372:(e,t,n)=>{function o(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}n.d(t,{I:()=>o,W:()=>a});let a={all:{value:"all"},notConnected:{value:"notConnected"},connected:{value:"connected"},ignored:{value:"ignored"},suggestionsAvailable:{value:"suggestionsAvailable"}}},786209:(e,t,n)=>{n.d(t,{g:()=>es});var o=n(848318),a=n(469508),c=n(921666),r=n(635600),s=n(19180),l=n(382902),i=n(536384),m=n.n(i),d=n(53837),_=n(230618),p=n(967688),u=n(817068),b=n(884286),g=n(273372),f=n(413020),h=n(822879),v=n(345964),w=n(741680),E=n(430335);function y({component:e,isLoading:t}){let n=(0,w.sD)(),a=(0,w.P8)(),c=e.code_connect_info.v1.state,r=(0,o.useMemo)(()=>{switch(c){case"not_connected":let e=a.notConnected;return o.createElement(e,{"data-tooltip":n.notConnected,"data-tooltip-type":"text"});case"connected":let t=a.connected;return o.createElement(t,{"data-tooltip":n.connected,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-success)"}});case"ignored":let r=a.ignored;return o.createElement(r,{"data-tooltip":n.ignored,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-warning)"}})}},[c,n,a]);return t?o.createElement("span",{className:E.i7},o.createElement(v.kt,null)):o.createElement("span",{className:E.i7},r)}var C=n(48908);function k({width:e=102,height:t=58,spacing:n="spacious"}){let a=Math.ceil((window.innerHeight-200)/49);return o.createElement("div",{className:m()(E.yO,{[E.oE]:"compact"===n})},Array.from({length:a}).map((n,a)=>o.createElement("div",{key:a,className:E.yS},o.createElement(C.Wi,{style:{width:e,height:t,borderRadius:4},animationType:C.JR.SHIMMER}),o.createElement(C.Wi,{style:{width:200},animationType:C.JR.SHIMMER}),o.createElement(C.Wi,{style:{flex:1},animationType:C.JR.SHIMMER}),o.createElement(C.Wi,{style:{width:120},animationType:C.JR.SHIMMER}))))}var N=n(168323),S=n(658029),I=n(408193),x=n(759102),L=n(899656);function M({data:e,isConnected:t,isIgnored:n,isComponentBrowserType:a,onMenuItemClick:c,showOpenInSidebar:r=!0,onPrepareForOpen:s,onCloseMenu:l}){let{manager:i,getTriggerProps:m}=N.b(),d=(0,o.useCallback)(()=>{s?.(e.component.node_id)},[s,e.component.node_id]);(0,o.useEffect)(()=>{i.isOpen||l?.()},[i.isOpen,l]);let _={label:(0,p.t)("dev_handoff.component_browser.open_in_sidebar"),onClick:()=>c({event:L.d.OpenInSidebar,row:e})},u=[[{label:(0,p.t)("dev_handoff.component_browser.no_code_equivalent_menu"),onClick:()=>c({event:L.d.Ignore,row:e}),disabled:!a}]];r&&u.push([_]);let b=[[{label:(0,p.t)("dev_handoff.component_browser.disconnect_menu"),onClick:()=>c({event:L.d.Disconnect,row:e}),disabled:!a}]];r&&b.push([_]);let g=[[{label:(0,p.t)("dev_handoff.component_browser.has_code_equivalent"),onClick:()=>c({event:L.d.HasCodeEquivalent,row:e})}]];r&&g.push([_]);let f=[];if(0===(f=t?b:n?g:u).length)return null;let h=m({onClick:d,onMouseDown:d});return o.createElement(N.bL,{manager:i},o.createElement(S.K,{...h,"aria-label":(0,p.t)("dev_handoff.component_browser.more_actions")},o.createElement(I.J,null)),o.createElement(N.mc,null,f.map((e,t)=>o.createElement(N.YJ,{key:t},e.map(e=>o.createElement(N.q7,{disabled:e.disabled,key:e.label,onClick:e.onClick},e.label)))),!a&&o.createElement("div",{className:"component_browser_more_actions_menu--info--4QHeV"},o.createElement(x.b,null),o.createElement("div",{className:"component_browser_more_actions_menu--infoText--4rpGc"},(0,p.t)("dev_handoff.component_browser.code_connect_cli_only_message")))))}var R=n(773511),P=n(531788),T=n(808943),D=n(696483),A=n(424172),F=n(549699),O=n(538775),K=n(17753);function B({tooltip:e}){return o.createElement("div",{"data-tooltip":e,"data-tooltip-show-above":!0,"data-tooltip-type":K.Ib.TEXT,className:"component_browser_hotkey_indicator--hotkeyIcon---Qb3S"},"\u21B5")}function q({shortcut:e,state:t,sourceIndex:n,isInputEmpty:a,selectedFile:c}){return"not_connected"!==t||void 0===n||!c&&a?null:o.createElement("div",null,o.createElement(B,{tooltip:e}))}var V=n(329228),W=n(893613),$=n(143823);let Q=(0,o.forwardRef)(function({shouldBeVisible:e,items:t,onItemSelect:n,selectedIndex:a,isLoading:c},r){let s=(0,o.useRef)(null);return((0,o.useEffect)(()=>{s.current&&r.current&&s.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[a,r]),e&&(0!==t.length||c))?o.createElement("div",{className:"component_browser_input_dropdown--container--2FBO7"},c?o.createElement("li",{className:"component_browser_input_dropdown--loading--dViPC"},o.createElement($.k,null)):o.createElement("ul",{ref:r,className:"component_browser_input_dropdown--list--m1Kui"},t.map((e,t)=>o.createElement("li",{key:t,ref:t===a?s:null},o.createElement(R.E,{className:m()("component_browser_input_dropdown--item--7nu7x",{"component_browser_input_dropdown--selected--CWEgq":t===a}),onClick:()=>n(e,t)},e.icon&&o.createElement("div",{className:"component_browser_input_dropdown--icon--vpXIg"},e.icon),o.createElement("div",{className:"component_browser_input_dropdown--content--eGCcQ"},o.createElement("div",{className:"component_browser_input_dropdown--title--LeadU"},e.title),e.subtitle&&o.createElement("div",{className:"component_browser_input_dropdown--subtitle--8GQKQ"},e.subtitle))))))):null});var U=n(218029),G=n(261486);let Y="component_browser_input--disabled--QH8GR",z="component_browser_input--readonly--m8lWF",J="component_browser_input--chip--TzaRn",X="component_browser_input--empty--wTZBe",H="component_browser_input--max--kTrPE",j="component_browser_input--chevron--gFXeX",Z="component_browser_input--buttonContainer--nLuhN",ee=(0,o.forwardRef)(({children:e,maxItems:t=1,disabled:n=!1,onAddItem:a,onRemoveLastItem:c,onClearItems:r,onMaxItemsReached:s,items:l,value:i,onValueChange:d,onRequestPlaceholder:_,onFocus:u,onBlur:b,onKeyDown:g,maxChipWidth:f,readonly:h=!1},v)=>o.createElement("div",{className:m()("component_browser_input--wrapper--VlXZo",{[Y]:n,[z]:h})},l.length>0&&o.createElement("div",{className:m()(J,"component_browser_input--items--97pb-",{[X]:0===l.length,"component_browser_input--incomplete--sIuCz":l.length<t&&!h,[Y]:n,[z]:h})},l.map((e,n)=>{let a=n<l.length&&n<t-1&&!h||n<l.length-1&&h;return o.createElement(o.Fragment,{key:n},o.createElement("div",{className:"component_browser_input--item---g-f1","data-tooltip":e.value,"data-tooltip-type":"text",style:{maxWidth:f?`${f}px`:void 0}},e.value),a&&o.createElement(T.k,{className:j}))}),l.length===t&&!h&&o.createElement(S.K,{"aria-label":(0,p.t)("dev_handoff.component_browser.clear_input"),onClick:()=>r()},o.createElement(D.f,null))),!h&&o.createElement(o.Fragment,null,o.createElement("div",{className:m()(J,"component_browser_input--inputWrapper--4eKiy",{[X]:0===l.length,[H]:l.length>=t,[Y]:n})},o.createElement("input",{ref:v,onFocus:u,onBlur:b,placeholder:_(l.length),className:m()("component_browser_input--input--VpMqX",{[X]:0===l.length,[H]:l.length>=t||h}),type:"text",value:i,onChange:e=>{n||l.length>=t||d(e.target.value)},onKeyDown:e=>{if(!(n||g(e)))switch(e.key){case"Enter":if(l.length>=t){s?.();return}a({value:i},l.length),e.preventDefault();break;case"Backspace":0===i.length&&l.length>0&&(c(l.length-1),e.preventDefault())}}}),l.length>0&&l.length<t&&!h&&o.createElement(S.K,{"aria-label":(0,p.t)("dev_handoff.component_browser.clear_input"),onClick:()=>r()},o.createElement(D.f,null))),o.createElement("div",{className:m()(Z,{"component_browser_input--filled--3Hnhr":l.length>0})},e))));var et=(e=>(e.FILE="file",e.COMPONENT="component",e.CONFIRM="confirm",e))(et||{});function en({items:e,isSuggestion:t,onClick:n}){let a=o.createElement(o.Fragment,null,t&&o.createElement(A.V,null),e.length>0&&e.map((t,n)=>o.createElement(o.Fragment,{key:n},o.createElement("div",{className:"component_browser_input--chipLabel--4InwA"},t),n!==e.length-1&&o.createElement("div",{className:j},o.createElement(T.k,null))))),c=m()(J,z,{"component_browser_input--suggestion--RaUTH":t});return n?o.createElement(R.E,{className:c,onClick:n},a):o.createElement("div",{className:c},a)}function eo({onConfirmConnection:e,showButton:t,disabled:n,children:a}){return o.createElement("div",{className:m()(Z,{"component_browser_input--hidden--ffbn1":!t})},o.createElement(P.$n,{onClick:e,disabled:n,variant:"primary"},a??(0,p.t)("dev_handoff.component_browser.connect")))}function ea({item:e,isRowHovered:t,isLoading:n,sourceIndex:a,currentRowIndex:c,libraryKey:r,onComponentChanged:s,onFileChanged:l,onValueChange:i,onConfirmConnection:m,value:d="",selectedFile:_,selectedComponent:u,inputRefs:b,readonly:g=!1,autosave:f=!0,location:h,onBlur:v}){let w=(0,o.useCallback)(e=>{e&&void 0!==c&&(b.current[c]=e)},[c,b]),[E,y]=(0,o.useState)([]),C=(0,o.useRef)(null),{result:k,isLoading:N}=function({searchTerm:e,libraryKey:t}){let n=(0,G.OG)(t),a=n?.selectedRepositories?.[0],[c]=(0,V.IT)((0,W.Tp)({libraryKey:t,repository:a?.id??""}),{enabled:!!t&&n?.status===G.w6.Connected,key:"repositorySourceFilesQuery"}),r=(0,o.useMemo)(()=>{let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e??""}let n=e.replace(/^https?:\/\//,"");return/^[a-zA-Z0-9\-_./\\]+$/.test(n)?n:""},[e]);return{result:(0,o.useMemo)(()=>c.data?""===r?c.data.sort((e,t)=>e.name.localeCompare(t.name)).slice(0,20).map(e=>({title:e.name,subtitle:e.path,metadata:{isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}})):(0,U.$P)(r,c.data,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:{isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}})).slice(0,20):[],[c.data,r,a?.id,a?.name]),isLoading:"loading"===c.status}}({searchTerm:d,libraryKey:r}),{results:S,isLoading:I}=function({libraryKey:e,selectedFile:t,searchTerm:n}){let a=t?.metadata?.repository?.id,c=t?.metadata?.path,[r]=(0,V.IT)((0,W.rt)({libraryKey:e,repository:a??"",path:c??""}),{enabled:!!t&&!!e&&!!a&&!!c&&!t?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${c}`}),s="loading"===r.status,l="loaded"===r.status,i=r.data,m=(0,o.useMemo)(()=>l&&i?i.components:[],[l,i]);return{results:(0,o.useMemo)(()=>m.length?m.filter(e=>e.toLowerCase().includes(n.toLowerCase())).map((e,t)=>({title:e,subtitle:"",metadata:{index:t}})):[],[n,m]),isLoading:s,searchTerm:n}}({libraryKey:r,selectedFile:_,searchTerm:d}),x=function({data:e}){let{component:t,inputValue:n,selectedFile:a,selectedComponent:c,sourceIndex:r}=e,s=t.code_connect_info.v1.state,{shortcut:l}=(0,o.useMemo)(()=>a?a&&!c&&n&&0===n.length?{shortcut:(0,p.t)("dev_handoff.component_browser.confirm_connection_shortcut")}:!c&&n&&n.length>0?{shortcut:(0,p.t)("dev_handoff.component_browser.connect_component_shortcut")}:{shortcut:(0,p.t)("dev_handoff.component_browser.confirm_connection_shortcut")}:{shortcut:(0,p.t)("dev_handoff.component_browser.connect_file_shortcut")},[a,c,n]),i=(0,o.useMemo)(()=>a||n&&n.length>0||c&&a,[a,n,c]);return{selectedFile:a,selectedComponent:c,shortcut:l,state:s,sourceIndex:r,canConnect:i,isInputEmpty:n?.length===0}}({data:e}),L=(0,o.useMemo)(()=>{let e=0===E.length,t=1===E.length;return e?{results:k.map(e=>({title:e.title,subtitle:e.subtitle,icon:o.createElement(F.V,null)})),isLoading:N}:t?{results:S.map(e=>({title:e.title,subtitle:e.subtitle,icon:o.createElement(O.K,null)})),isLoading:I}:{results:[],isLoading:!1}},[k,S,E.length,N,I]),[M,R]=(0,o.useState)({shouldBeVisible:!1,selectedIndex:0});(0,o.useEffect)(()=>{let e=[];_&&e.push({value:_.subtitle??_.title}),u&&e.push({value:u.title}),y(e)},[_,u]);let P=(0,o.useCallback)(e=>{switch(e){case 0:return(0,p.t)("dev_handoff.component_browser.paste_code_link");case 1:return(0,p.t)("dev_handoff.component_browser.component_name")}},[]),T=(0,o.useCallback)(()=>{m({row:e,sourceIndex:a,currentRowIndex:c,trackingProps:{location:h,source:"manual"}})},[m,e,a,c,h]),D=()=>{R(e=>({...e,selectedIndex:0}))};function A(e,t){let n=0===E.length,o=1===E.length;if(R(e=>({...e,selectedIndex:0})),n){let e=k[t];e&&(l({save:f,sourceIndex:a,currentRowIndex:c,selectedFile:e,trackingProps:{location:h,source:"manual"}}),D())}else o&&S[t]&&(s({save:f,sourceIndex:a,currentRowIndex:c,selectedComponent:e,action:"create",trackingProps:{location:h,source:"manual"}}),D())}let K=(t||x.canConnect)&&"connected"!==x.state;return o.createElement("div",{className:"component_browser_input--container---QBDC",onBlur:v},o.createElement("div",{className:"component_browser_input--inputContainer--3wDJt"},o.createElement(ee,{ref:w,disabled:n,items:E,maxChipWidth:110,maxItems:2,onAddItem:(e,t)=>{if(0===d.length&&_){T?.();return}switch(t){case 0:l({save:f,sourceIndex:a,currentRowIndex:c,selectedFile:{title:e.value,subtitle:e.value,metadata:{isCustomLink:!1,repository:{id:"",name:""},path:e.value,name:e.value,sha:"",type:"file"}},trackingProps:{location:h,source:"manual"}});break;case 1:s({save:f,sourceIndex:a,currentRowIndex:c,selectedComponent:{title:e.value,subtitle:e.value,metadata:{index:t}},action:"create",trackingProps:{location:h,source:"manual"}})}},onBlur:e=>{let t=e.relatedTarget;t&&C.current?.contains(t)||R(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))},onClearItems:()=>{l({save:f,sourceIndex:a,currentRowIndex:c,selectedFile:null,trackingProps:{location:h,source:"manual"}}),R(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))},onFocus:()=>{R(e=>({...e,shouldBeVisible:!0,selectedIndex:0}))},onKeyDown:e=>{if("ArrowDown"===e.key){if(M.selectedIndex<L.results.length-1)return R(e=>({...e,selectedIndex:e.selectedIndex+1})),e.preventDefault(),!0}else if("ArrowUp"===e.key){if(M.selectedIndex>0)return R(e=>({...e,selectedIndex:e.selectedIndex-1})),e.preventDefault(),!0}else if("Enter"===e.key){let t=L.results[M.selectedIndex];if(t)return A(t,M.selectedIndex),e.preventDefault(),!0}else if("Escape"===e.key)return R(e=>({...e,shouldBeVisible:!1,selectedIndex:0})),e.currentTarget.blur(),e.preventDefault(),e.stopPropagation(),!0;return!1},onMaxItemsReached:T,onRemoveLastItem:e=>{switch(e){case 0:l({save:f,sourceIndex:a,currentRowIndex:c,selectedFile:null,trackingProps:{location:h,source:"manual"}});break;case 1:s({save:f,sourceIndex:a,currentRowIndex:c,selectedComponent:null,action:"delete",trackingProps:{location:h,source:"manual"}})}},onRequestPlaceholder:P,onValueChange:e=>i({sourceIndex:a,value:e}),readonly:g,value:d},o.createElement(q,{...x})),o.createElement(eo,{showButton:!!K,disabled:!x.canConnect,onConfirmConnection:()=>m({row:e,sourceIndex:a,currentRowIndex:c,trackingProps:{location:h,source:"manual"}})})),o.createElement(Q,{ref:C,shouldBeVisible:M.shouldBeVisible,isLoading:L.isLoading,items:L.results,selectedIndex:M.selectedIndex,onItemSelect:A}))}function ec({isRowHovered:e,item:t,component:n,suggestions:a,libraryKey:c,onComponentChanged:r,onConfirmConnection:s,onConfirmSuggestion:l,onFileChanged:i,onValueChange:_,sourceIndex:u,inputRefs:b,currentRowIndex:g,location:f}){let[h,v]=(0,o.useState)(!1),[w,y]=(0,d.Vc)("componentBrowserOnboardingSelection",null),C=n?.code_connect_info.v1.state==="ignored",k="figmadoc"===n.code_connect_info.v1.type;if(a&&a.length>0&&!h){let n=a[0],c=[n.src_path];return n.name&&c.push(n.name),o.createElement("td",{className:m()(E.LU,E.jU,E.wK)},o.createElement(en,{items:c,isSuggestion:!0,onClick:e=>{v(!0),e.stopPropagation()}}),o.createElement(eo,{onConfirmConnection:e=>{l({filepath:n.src_path,componentName:n.name,item:t,currentRowIndex:g,sourceIndex:u}),e.stopPropagation()},showButton:e},(0,p.t)("dev_handoff.component_browser.confirm")))}if(k||"codebase_ingestion"===w){let e=[];return t.selectedFile&&e.push(t.selectedFile.title),t.selectedComponent&&e.push(t.selectedComponent.title),o.createElement("td",{className:m()(E.LU,E.jU)},o.createElement(en,{items:e}))}if(C)return o.createElement("td",{className:m()(E.LU,E.jU)},"--");let N=a?.[0];return o.createElement("td",{className:m()(E.LU,E.jU),onClick:e=>{C||e.stopPropagation()}},o.createElement(ea,{autosave:!1,currentRowIndex:g,inputRefs:b,isLoading:t.isLoading??!1,isRowHovered:e,item:t,libraryKey:c,location:f,onBlur:N?()=>v(!1):void 0,onComponentChanged:r,onConfirmConnection:s,onFileChanged:i,onValueChange:_,readonly:t?.component?.code_connect_info?.v1?.state==="connected",selectedComponent:t.selectedComponent,selectedFile:t.selectedFile,sourceIndex:u,value:t.inputValue??""}))}function er({item:e,currentRowIndex:t,onSelectComponent:n,onMoreActionsMenuItemClick:s,columns:l,spacing:i,onlyShowActionsOnHover:d,openMenuRowId:p,onPrepareForOpen:u,onConfirmConnection:v,onConfirmSuggestion:w,suggestions:C,onCloseMenu:k,selectedComponent:N,isIconsFlow:S,inputRefs:I,onComponentChanged:x,onFileChanged:L,onValueChange:R,showExpandChevron:P,showLibraryNames:T,location:D}){let[A,F]=(0,o.useState)(!1),O=e.sourceIndex,K=e.component,B="connected"===K.code_connect_info.v1.state,q="ignored"===K.code_connect_info.v1.state,{isSelected:V}=(e=>{let t=null;if("connected"===e.code_connect_info.v1.state)try{let n=JSON.parse(e.code_connect_info.v1.figmadoc??"");t=Array.isArray(n)?n[0]:n}catch(e){}let n=N&&(0,g.I)(e)===(0,g.I)(N),o=null,a=null;if("connected"===e.code_connect_info.v1.state&&t){let e=t.source;e&&(o=e.substring(e.lastIndexOf("/")+1)),a=t.component}return{isSelected:n,fileName:o,componentName:a}})(K),W=!K.code_connect_info.v1.type||"component_browser"===K.code_connect_info.v1.type,$=0===t,Q=(0,h.B)(K.library_key).unwrapOr(null),U=(0,f.b)({libraryKey:K.library_key,nodeId:K.node_id}),G=Q&&T,Y=U.data?.link;return o.createElement("tr",{onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),key:K.node_id,className:m()(E.T$,{[E.sp]:V,"js-is-selected":V}),onClick:()=>n(K)},l.includes("design")&&o.createElement("td",{className:m()(E.LU,E.f_)},K.thumbnail_url&&o.createElement("div",{className:m()(E.v6,{[E.Kk]:S}),"data-onboarding-key":$?b.k1.Step3:void 0},o.createElement(_.oW,{"data-onboarding-key":$?b.kE.Step1:void 0,className:E.I$,src:K.thumbnail_url,alt:K.name})),o.createElement("div",{className:E.V3},o.createElement("div",{className:E.TQ},K.name),G&&Y&&o.createElement(a.N,{newTab:!0,href:Y},o.createElement("div",{className:E.b0},Q)))),l.includes("decorator")&&o.createElement("td",{className:m()(E.LU,E.IO)},o.createElement(c.o,{className:E.fI})),l.includes("file")&&o.createElement(ec,{component:K,currentRowIndex:t,inputRefs:I,isRowHovered:A,item:e,libraryKey:K.library_key,location:D,onComponentChanged:x,onConfirmConnection:v,onConfirmSuggestion:w,onFileChanged:L,onValueChange:R,sourceIndex:O,suggestions:C}),l.includes("variants")&&o.createElement("td",{className:m()(E.LU,E.$M)},"variants"in K?o.createElement("div",{className:E.WD},K.variants.length):"--"),l.includes("status")&&o.createElement("td",{className:m()(E.LU,E.fo)},o.createElement(y,{component:K,isLoading:e.isLoading??!1})),l.includes("actions")&&o.createElement("td",{className:m()(E.LU,E.AT,{[E.YS]:d,[E.MO]:p===K.node_id})},o.createElement(M,{data:e,isConnected:B,isIgnored:q,isComponentBrowserType:W,onMenuItemClick:s,showOpenInSidebar:"spacious"===i,onPrepareForOpen:u,onCloseMenu:k}),P&&o.createElement("div",{className:E.K4},o.createElement(r.a,null))))}function es({libraryKey:e,data:t,selectedComponent:n,onSelectComponent:a,onFileChanged:c,onComponentChanged:r,onConfirmConnection:i,onConfirmSuggestion:d,onValueChange:_,isLoading:b,onMoreActionsMenuItemClick:f,inputRefs:h,searchQuery:v,columns:w=["design","decorator","file","variants","status","actions"],spacing:y="spacious",showExpandChevron:C=!1,showTableHeader:N=!0,showLibraryNames:S=!1,onlyShowActionsOnHover:I=!1,bulkSuggestions:x,location:L}){let M=0===t.length,R=(0,o.useRef)(null),P=(0,l.md)(u.a),T=(0,s.k)().dt_component_browser_icons_flow&&"icons"===P,[D,A]=(0,o.useState)(null),F=n?(0,g.I)(n):null;(0,o.useEffect)(()=>{F&&R.current?.querySelector(".js-is-selected")?.scrollIntoView({block:"nearest"})},[F]);let O=(0,o.useCallback)(e=>{A(e)},[]),K=(0,o.useCallback)(()=>{A(null)},[]);return b?o.createElement("div",{className:E.WX},o.createElement(k,{spacing:y})):M?o.createElement("div",{className:E.dg},o.createElement("span",null,v.length>0?(0,p.t)("dev_handoff.component_browser.no_components_search_result",{searchQuery:v}):(0,p.t)("dev_handoff.component_browser.no_results_found"))):o.createElement("div",{ref:R,className:E.L3},o.createElement("table",{className:m()(E.hP,{[E.YQ]:"spacious"===y,[E.oE]:"compact"===y})},N&&o.createElement("thead",{className:m()(E.Gd,{[E.YQ]:"spacious"===y,[E.oE]:"compact"===y})},o.createElement("tr",{className:E.SR},w.includes("design")&&o.createElement("th",{className:m()(E.LU,E.f_)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.design_component"))),w.includes("decorator")&&o.createElement("th",{className:m()(E.LU,E.IO)}),w.includes("file")&&o.createElement("th",{className:m()(E.LU,E.jU)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.code_file_column"))),w.includes("variants")&&o.createElement("th",{className:m()(E.LU,E.$M)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.variants"))),w.includes("status")&&o.createElement("th",{className:m()(E.LU,E.fo)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.status"))),w.includes("actions")&&o.createElement("th",{className:m()(E.LU,E.AT)}))),o.createElement("tbody",{className:m()(E.dl,{[E.YQ]:"spacious"===y,[E.oE]:"compact"===y})},t.map((t,s)=>{let l="not_connected"===t.component.code_connect_info.v1.state&&x[t.assetKey]?.suggestions||[];return o.createElement(er,{key:t.component.node_id,columns:w,currentRowIndex:s,inputRefs:h,isIconsFlow:T??!1,item:t,libraryKey:e,location:L,onCloseMenu:K,onComponentChanged:r,onConfirmConnection:i,onConfirmSuggestion:d,onFileChanged:c,onMoreActionsMenuItemClick:f,onPrepareForOpen:O,onSelectComponent:a,onValueChange:_,onlyShowActionsOnHover:I,openMenuRowId:D,selectedComponent:n,showExpandChevron:C,showLibraryNames:S,spacing:y,suggestions:l})}))))}},493111:(e,t,n)=>{n.d(t,{rI:()=>N,Wq:()=>S,IN:()=>y,Hf:()=>C,dx:()=>k});var o=n(848318),a=n(301168),c=n(150583),r=n(19180),s=n(382902),l=n(996202),i=n(329228),m=n(967688),d=n(952039),_=n(817068),p=n(522804),u=n(741680),b=n(273372),g=n(740848),f=n(453370),h=n(209595),v=n(125761),w=n(206142),E=n(899656);function y({displayedComponent:e,filteredComponents:t,componentBrowserListRowData:n,setComponentBrowserListRowData:r}){let _=(0,v.iZ)(),[u,g]=(0,o.useState)(-1),y=(0,o.useRef)([]);(0,o.useEffect)(()=>{y.current=y.current.slice(0,n.length)},[n.length]);let C=(0,h._6)(),k=(0,a.wA)(),N=(0,i.gY)(p.RL),S=(0,i.gY)(p.S6),I=(0,i.gY)(p.K5),x=(0,s.Xr)(w.mO),L=(0,l.hC)(),M=(0,o.useCallback)(e=>{if(void 0!==e)for(let n=e+1;n<y.current.length;n++){let e=t[n],o=e?.component.code_connect_info.v1.state==="ignored";if(e&&!o&&(!e.selectedFile||!e.selectedComponent)){let e=y.current[n];if(e){e.focus();break}}}},[y,t]),R=(0,o.useCallback)(e=>{let{codeConnectId:t,row:n}=e,o=n?.sourceIndex;if(n&&void 0!==o){let a={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,state:"not_connected",id:void 0}}}};t?(r(e=>{let t=[...e];return t[o]={...a,isLoading:!0},t}),S({codeConnectId:t}).then(()=>{let t="connected"!==n.component.code_connect_info.v1.state,c=t?(0,m.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:n.component.name}):(0,m.t)("dev_handoff.component_browser.disconnected_message",{componentName:n.component.name}),s=(0,b.I)(n.component);s&&x(e=>{if(!e)return{status:{}};let{[s]:t,...n}=e.status;return{...e,status:n}}),L(t?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:n.component.node_id,location:e.trackingProps.location}),r(e=>{let t=[...e];return t[o]={...a,isLoading:!1},t}),k(d.F.enqueue({message:c,type:"Disconnect component"})),e.callback?.()}).catch(t=>{c.vF.error("Error deleting code connect map",t),r(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),k(d.F.enqueue({message:t.message,type:"Disconnect component error",error:!0})),e.callback?.(t)})):r(e=>{let t=[...e];return t[o]={...a,isLoading:!1},t})}},[S,k,r,L,x]),P=(0,o.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:o}=e,a=t.selectedFile,s=t.selectedComponent,l=a?.metadata?.path??"",i=t.component.node_id,p=(0,b.I)(t.component);if(p&&x(e=>e?{...e,status:{...e.status,[p]:"connected"}}:{status:{[p]:"connected"}}),!a||!l)return;let u={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:_?.name,author_id:_?.id,state:"connected",type:"component_browser"}}},inputValue:""};r(e=>{let t=[...e];return t[n]={...u,isLoading:!0},t}),N({library_key:t.component.library_key,node_id:i,template:"",component_name:s?.title,source_path:l,status:"connected"}).then(e=>{let a=e.data.meta.code_connect_id;r(e=>{let t=[...e];return t[n]={...u,isLoading:!1,component:{...u.component,code_connect_info:{...u.component.code_connect_info,v1:{...u.component.code_connect_info.v1,id:a,type:"component_browser"}}}},t}),k(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.connected_message",{componentName:t.component.name}),type:"Connected component"})),L("component_browser.code_connect_component_connected",{componentName:s?.title??"",sourcePath:l,location:o.location,source:o.source})}).catch(e=>{c.vF.error("Error creating code connect map",e),r(e=>{let o=[...e];return o[n]={...t,isLoading:!1},o}),k(d.F.enqueue({message:e.message,type:"Connect component error",error:!0}))})},[N,k,r,L,_,x]),T=(0,o.useCallback)(e=>{let{sourceIndex:t,value:o}=e,a=n[t];a&&r(e=>{let n=[...e];return n[t]={...a,inputValue:o},n})},[n,r]),D=(0,o.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:o,save:a=!0}=e,s=t.selectedFile,l=t.selectedComponent,i=s?.metadata?.path??"",p=t.component.node_id,u=t.component.code_connect_info.v1.id;if(!s||!i||(r(e=>{let o=[...e];return o[n]={...t,inputValue:""},o}),!a||!u))return;let b={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:_?.name,author_id:_?.id,state:"connected",type:"component_browser"}}},isLoading:!0,inputValue:""};r(e=>{let t=[...e];return t[n]={...b},t}),I({code_connect_id:u,library_key:t.component.library_key,node_id:p,template:"",component_name:l?.title,source_path:i,status:"connected"}).then(()=>{r(e=>{let t=[...e];return t[n]={...b,isLoading:!1,component:{...b.component,code_connect_info:{...b.component.code_connect_info,v1:{...b.component.code_connect_info.v1,id:u,type:"component_browser"}}}},t}),k(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.updated_message",{componentName:t.component.name}),type:"Updated component"})),L("component_browser.code_connect_component_updated",{componentName:l?.title??"",sourcePath:i,location:o.location,source:o.source})}).catch(e=>{c.vF.error("Error updating code connect map",e),r(e=>{let o=[...e];return o[n]={...t,isLoading:!1},o}),k(d.F.enqueue({message:e.message,type:"Update component error",error:!0}))})},[I,k,r,L,_]),A=(0,o.useCallback)(e=>{let{currentRowIndex:t,sourceIndex:o,selectedComponent:a,action:c,save:s=!0}=e,l=n[o];if(l){if("create"===c){let n={...l,selectedComponent:a,inputValue:""};L("component_browser.code_component_manual_connection_data_entered",{nodeId:l?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedComponent?.title}),r(e=>{let t=[...e];return t[o]=n,t}),l.selectedFile&&s&&(l.component.code_connect_info.v1.id?D({row:{...l,selectedComponent:a},sourceIndex:o,trackingProps:e.trackingProps}):P({row:{...l,selectedComponent:a},sourceIndex:o,trackingProps:e.trackingProps}),void 0!==t&&M(t))}else"delete"===c&&l&&D({save:s,sourceIndex:o,row:{...l,selectedComponent:null,inputValue:""},trackingProps:e.trackingProps})}},[n,P,D,r,L,M]),F=(0,o.useCallback)(e=>{let{sourceIndex:t,selectedFile:o,currentRowIndex:a,save:c=!0}=e,s=n[t];if(L("component_browser.code_component_manual_connection_data_entered",{nodeId:s?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedFile?.title}),s){if(o){if(r(e=>{let n=[...e];return n[t]={...s,inputValue:"",selectedFile:o,isLoading:!1},n}),!c)return;P({row:{...s,selectedFile:o},sourceIndex:t,trackingProps:e.trackingProps})}else R({currentRowIndex:a,codeConnectId:s.component.code_connect_info.v1.id,row:{...s,inputValue:"",selectedFile:null,selectedComponent:null},trackingProps:e.trackingProps})}},[n,P,R,L,r]),O=(0,o.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:o,currentRowIndex:a}=e;t.selectedFile||t.selectedComponent?t.selectedFile&&!t.selectedComponent?A({sourceIndex:n,selectedComponent:t.inputValue?{title:t.inputValue??""}:null,action:"create",trackingProps:o}):P({row:t,sourceIndex:n,trackingProps:o}):(F({sourceIndex:n,selectedFile:{title:t.inputValue??"",metadata:{path:t.inputValue??"",isCustomLink:!1,repository:{id:"",name:""},name:"",sha:"",type:"file"}},trackingProps:o}),M(a)),M(a)},[P,A,F,M]),K=e=>{let{row:t}=e,n=t.sourceIndex,o=t.component.node_id,a={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null,inputValue:""};r(e=>{let t=[...e];return t[n]=a,t}),N({library_key:t.component.library_key,node_id:o,status:"ignored"}).then(o=>{let c=o.data.meta.code_connect_id,s=(0,b.I)(t.component);s&&x(e=>e?{...e,status:{...e.status,[s]:"ignored"}}:{status:{[s]:"ignored"}}),r(e=>{let t=[...e];return t[n]={...a,component:{...a.component,code_connect_info:{...a.component.code_connect_info,v1:{...a.component.code_connect_info.v1,id:c,author_name:_?.name,author_id:_?.id}}}},t}),L("component_browser.code_connect_component_ignored",{nodeId:t.component.node_id,location:e.trackingProps.location}),k(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.ignored_message",{componentName:t.component.name}),type:"Ignored component"})),e.callback?.()}).catch(o=>{c.vF.error("Error ignoring code connect map",o),r(e=>{let o=[...e];return o[n]=t,o}),k(d.F.enqueue({message:o.message,type:"Ignore component error",error:!0})),e.callback?.(o)})},B=(0,o.useCallback)(e=>{if(g(-1),"componentBrowserLibrary"===C.view){let t={...C,componentKey:e&&(0,b.I)(e)||void 0};k(f.$T(t))}else if("fullscreen"===C.view){let t={...C,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:e?.node_id,componentKey:e&&(0,b.I)(e)||void 0};k(f.$T(t))}},[C,k]),q=(0,o.useCallback)(()=>{if(!e){t[0]&&B(t[0].component);return}let n=t.findIndex(t=>(0,b.I)(t.component)===(0,b.I)(e.component));if(-1===n){-1!==u&&t[u]?B(t[u].component):t[0]&&B(t[0].component);return}let o=t[n+1];o&&B(o.component)},[e,t,B,u]),V=(0,o.useCallback)(()=>{if(!e){let e=t[t.length-1];e&&B(e.component);return}let n=t.findIndex(t=>(0,b.I)(t.component)===(0,b.I)(e.component));if(-1===n){let e=t[u-1];-1!==u&&e?B(e.component):t[0]&&B(t[0].component);return}let o=t[n-1];o&&B(o.component)},[e,t,B,u]),W=(0,o.useCallback)(({filepath:e,componentName:t,item:n,currentRowIndex:o,sourceIndex:a})=>{O({row:{...n,selectedFile:{title:e,metadata:{path:e,isCustomLink:!1,repository:{id:"",name:""},name:"",sha:"",type:"file"}},selectedComponent:t?{title:t}:null},currentRowIndex:o,sourceIndex:a,trackingProps:{location:"list_view",source:"codebase_suggestions"}})},[O]);return{onDeleteMapping:R,onMoreActionsMenuItemClick:e=>{let{event:t,currentRowIndex:n,row:o}=e;switch(t){case E.d.OpenInSidebar:B(o.component);break;case E.d.HasCodeEquivalent:case E.d.Disconnect:R({currentRowIndex:n,codeConnectId:o.component.code_connect_info.v1.id,row:{...o,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}});break;case E.d.Ignore:K({currentRowIndex:n,row:o,trackingProps:{location:"list_view"}})}},onFileChanged:F,onComponentChanged:A,onConnectMapping:e=>{let{currentRowIndex:t,row:n}=e,o=n.sourceIndex,a=n.component,s=n.selectedFile,l=s?.metadata?.path??"",i=n.selectedComponent,p=n.component.node_id;if(s&&l){let u={...n,component:{...a,code_connect_info:{...a.code_connect_info,v1:{...a.code_connect_info.v1,state:"connected",author_name:_?.name,author_id:_?.id}}},selectedFile:s,selectedComponent:i,inputValue:""};r(e=>{let t=[...e];return t[o]={...u,isLoading:!0},t}),N({library_key:n.component.library_key,node_id:p,template:"",component_name:i?.title,source_path:l,status:"connected"}).then(a=>{let c=a.data.meta.code_connect_id;r(e=>{let t=[...e];return t[o]={...u,isLoading:!1,component:{...u.component,code_connect_info:{...u.component.code_connect_info,v1:{...u.component.code_connect_info.v1,id:c}}}},t}),k(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:"Connected component"})),L("component_browser.code_connect_component_connected",{componentName:i?.title??"",sourcePath:l,location:e.trackingProps.location,source:e.trackingProps.source}),M(t),e.callback?.()}).catch(t=>{c.vF.error("Error creating code connect map",t),r(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),k(d.F.enqueue({message:t.message,type:"Connect component error",error:!0})),e.callback?.(t)})}},onIgnoreMapping:K,onDisplayedComponentChanged:B,onDisplayNextComponent:q,onDisplayPreviousComponent:V,updateConnection:D,onConfirmConnection:O,onConfirmSuggestion:W,onValueChange:T,inputRefs:y}}function C({componentKey:e,componentsAndStateGroups:t,defaultFilter:n,filterIcons:a=!0}){let[l,m]=(0,o.useState)([]),[d,f]=(0,o.useState)(""),[h,v]=(0,o.useState)(n),w=(0,o.useMemo)(()=>l.findIndex(t=>(0,b.I)(t.component)===e),[l,e]),E=(0,o.useMemo)(()=>l[w]??null,[l,w]),y=(0,p.bV)(),C=(0,s.md)(_.a),k=function(e){let{planType:t,planId:n}=(0,u.jb)(),a=(0,o.useMemo)(()=>e.map(({component:e,assetKey:t})=>({type:e.type,key:t,library_key:e.library_key})),[e]),[c]=(0,i.IT)((0,p.Mo)({assets:a,plan_parent_id:n,plan_parent_type:t}),{enabled:a.length>0&&(0,r.k)().dt_component_browser_bulk_mapping});return c.data?.suggestions??{}}(l),[N,S,x,L]=(0,o.useMemo)(()=>{let e=[],t=[],n=[],o=[];return l.forEach(c=>{(0,r.k)().dt_component_browser_icons_flow&&a&&("icons"===C&&!c.component.isIcon||"icons"!==C&&c.component.isIcon)||(e.push(c),"connected"===c.component.code_connect_info.v1.state&&t.push(c),"not_connected"===c.component.code_connect_info.v1.state&&n.push(c),"ignored"===c.component.code_connect_info.v1.state&&o.push(c))}),[e,t,n,o]},[l,C,a]),M=(0,o.useMemo)(()=>x.filter(e=>e.assetKey in k),[k,x]),R=(0,o.useMemo)(()=>({all:N.length,connected:S.length,notConnected:x.length,ignored:L.length,suggestionsAvailable:M.length}),[N.length,S.length,x.length,L.length,M.length]),P=(0,o.useMemo)(()=>{let e=[];return"all"===h?e=N:"connected"===h?e=S:"notConnected"===h?e=x:"ignored"===h?e=L:"suggestionsAvailable"===h&&(e=M),d&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(d.toLocaleLowerCase()))),[...e].sort((e,t)=>e.component.name<t.component.name?-1:e.component.name>t.component.name?1:0).map((e,t)=>({...e,currentRowIndex:t}))},[h,d,N,S,x,L,M]);(0,o.useEffect)(()=>{if(!t)return;let{components:e}=t;m(function(e){let t=[];return e.forEach((e,n)=>{let o=e.code_connect_info.v1.figmadoc;if(!o){t.push(I(e,n));return}try{let a=JSON.parse(o)[0];t.push({component:e,assetKey:(0,g.A)(e),sourceIndex:n,isLoading:!1,selectedFile:a?.source?{title:a.source,metadata:{path:a.source,isCustomLink:!1,repository:{id:"",name:""},name:"",sha:"",type:"file"}}:null,selectedComponent:a?.component?{title:a.component}:null,inputValue:""})}catch(o){c.vF.error("Error parsing figmadoc",o),t.push(I(e,n))}}),t}(e.map(e=>({...e,isIcon:y.has(e.node_id)}))))},[t,y,m]);let T=(0,o.useCallback)(e=>l.findIndex(t=>(0,b.I)(t.component)===(0,b.I)(e)),[l]);return{paginationInfo:{notConnectedComponents:x.length,connectedComponents:S.length,ignoredComponents:L.length,suggestionsAvailableComponents:M.length},connectedComponents:S,notConnectedComponents:x,ignoredComponents:L,suggestionsAvailableComponents:M,searchQuery:d,setSearchQuery:f,dropdownFilter:h,setDropdownFilter:v,displayedComponent:E,displayedComponentIndex:w,filteredComponents:P,componentBrowserListRowData:l??[],setComponentBrowserListRowData:m,getIndexOfComponent:T,suggestions:k,componentCounts:R}}function k({libraryKey:e,componentKey:t,defaultFilter:n}){let a=function({libraryKey:e,componentKey:t,defaultFilter:n}){let[a,c]=(0,i.IT)((0,p.t2)(e),{enabled:!0});return{...C({componentKey:t,componentsAndStateGroups:(0,o.useMemo)(()=>{var e;return a.data?N((e=a.data).components||[],e.state_groups||[]):null},[a.data]),defaultFilter:n}),status:a.status,refetch:c.refetch}}({libraryKey:e,componentKey:t,defaultFilter:n});return{...y({displayedComponent:a.displayedComponent,filteredComponents:a.filteredComponents,componentBrowserListRowData:a.componentBrowserListRowData,setComponentBrowserListRowData:a.setComponentBrowserListRowData}),...a}}function N(e,t){let n=[],o={},a={};return t.forEach(e=>{a[e.node_id]={...e,updated_at:e.updated_at||"",variants:[]},o[e.key]={...e,updated_at:e.updated_at||"",variants:[]}}),e.forEach(e=>{let t=e.containing_frame?.containingStateGroup?.nodeId,c=t&&a[t]?.key;c&&o[c]?o[c].variants.push(e):n.push(e)}),Object.values(o).forEach(e=>{n.push(e)}),{components:n}}function S(e,t){if(1===e.length)return e[0]??"";let n=e.pop();if(n){if(n.length>=20)return n;let e=20-(n?.length??0);return t.slice(0,e)+".../"+n}return""}function I(e,t){return{component:e,assetKey:(0,g.A)(e),sourceIndex:t,isLoading:!1,selectedFile:null,selectedComponent:null,inputValue:""}}},899656:(e,t,n)=>{n.d(t,{d:()=>o});var o=(e=>(e.OpenInSidebar="open-in-sidebar",e.Disconnect="disconnect",e.HasCodeEquivalent="has-code-equivalent",e.Ignore="ignore",e))(o||{})},740848:(e,t,n)=>{n.d(t,{A:()=>c,k:()=>a});var o=n(720722);function a(e,t){let n=new Set;for(let o of e)t.has(o)&&n.add(o);return Array.from(n)}function c(e){return e.type===o.PW.COMPONENT?e.component_key:e.key}}}]);

//# debugId=e5c2c750-16e1-54c6-a873-b7c482bd7df7

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/6596-07f08744d0d42d6c.min.js.map