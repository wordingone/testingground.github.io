"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="91bf604f-9e02-56c9-bf00-817bf6902ee9")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6803],{870879:(e,r,n)=>{r.D0=r.Xd=void 0,n(965722),n(261417);var a=n(207554);Object.defineProperty(r,"Xd",{enumerable:!0,get:function(){return a.createKiwiCodec}}),n(582913),n(632081),n(528811),n(589751);var i=n(864205);Object.defineProperty(r,"D0",{enumerable:!0,get:function(){return i.parseSchema}}),n(684156)},889438:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="11" height="12" viewBox="0 0 11 12"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m5.497 11.66-.324-.274-4.5-3.817.647-.762 3.677 3.118V.005h1v9.92l3.676-3.118.647.762-4.5 3.817z"/></svg>'},626467:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M4.125 3.25h1V1.875C5.125 1.392 5.517 1 6 1c.483 0 .875.392.875.875V3.25H11V14H1V3.25zm3.75-1H12V15H0V2.25h4.125v-.375C4.125.839 4.965 0 6 0c1.036 0 1.875.84 1.875 1.875zM6 5.75c-.76 0-1.375.616-1.375 1.375 0 .76.616 1.375 1.375 1.375.76 0 1.375-.616 1.375-1.375 0-.76-.616-1.375-1.375-1.375M3.625 7.125C3.625 5.813 4.688 4.75 6 4.75c1.312 0 2.375 1.063 2.375 2.375 0 .914-.516 1.708-1.273 2.105.97.424 1.648 1.393 1.648 2.52V12h-1v-.25C7.75 10.784 6.966 10 6 10c-.966 0-1.75.784-1.75 1.75V12h-1v-.25c0-1.127.678-2.096 1.648-2.52-.757-.397-1.273-1.19-1.273-2.105"/></svg>'},204638:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M21.5 16.5h-11v-1h11z"/></svg>'},910223:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M19 24v5l8.294-5.806c1.07-.748 1.706-1.971 1.706-3.277V15c0-2.21-1.792-4-4.002-4h-9.997C12.793 11 11 12.79 11 15v5c0 2.21 1.79 4 4 4zm1 3.08 6.72-4.705c.802-.561 1.28-1.479 1.28-2.458V15c0-1.656-1.344-3-3.002-3h-9.997C13.345 12 12 13.344 12 15v5c0 1.657 1.343 3 3 3h5z"/></svg>'},628015:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M21 12v8c0 .552-.448 1-1 1h-5.3V11H20c.552 0 1 .448 1 1m-7.3-1H12c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h1.7zm6.3-1c1.105 0 2 .895 2 2v8c0 1.105-.895 2-2 2h-8c-1.105 0-2-.895-2-2v-8c0-1.105.895-2 2-2z"/></svg>'},452:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M0 1.5C0 .672.672 0 1.5 0h7c.828 0 1.5.672 1.5 1.5v7c0 .828-.672 1.5-1.5 1.5h-7C.672 10 0 9.328 0 8.5zM1.5 1c-.276 0-.5.224-.5.5v7c0 .276.224.5.5.5h7c.276 0 .5-.224.5-.5v-7c0-.276-.224-.5-.5-.5zm9 2h-1V2h1c.828 0 1.5.672 1.5 1.5v7c0 .828-.672 1.5-1.5 1.5h-7c-.828 0-1.5-.672-1.5-1.5v-1h1v1c0 .276.224.5.5.5h7c.276 0 .5-.224.5-.5v-7c0-.276-.224-.5-.5-.5"/></svg>'},728349:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m1.354.646-.708.708L4.293 5 .646 8.646l.708.708L5.707 5z"/></svg>'},796914:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" d="m24.003 14.104-3.76 2.603-2.025 4.34-.45.963-.753-.752-2.783-2.783-4.378 4.378-.354.354-.707-.707.353-.354 4.379-4.378-2.783-2.783-.753-.753.965-.45 4.339-2.024 2.603-3.761.579-.836.718.719 4.927 4.926.719.72zm-4.667 2.18-1.87 4.01-5.76-5.76 4.01-1.87.245-.115.154-.222 2.5-3.611 4.67 4.669-3.612 2.5-.222.154z" clip-rule="evenodd"/></svg>'},404778:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><path fill="#007BE5" fill-rule="evenodd" d="m18.475 7.161 6.364 6.364-4.597 3.182-2.475 5.303-3.535-3.535-4.379 4.378-.353.354-.707-.707.353-.354 4.379-4.378-3.536-3.536 5.303-2.474z" clip-rule="evenodd"/></svg>'},1757:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},241789:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#fff" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M6 2h16v20H2V2z"/><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M4 0C1.79 0 0 1.79 0 4v16c0 2.21 1.79 4 4 4h16c2.21 0 4-1.79 4-4V4c0-2.21-1.79-4-4-4zm5.772 17.818 3-12 1.456.364-3 12zM6.97 8.47l-3 3-.53.53.53.53 3 3 1.06-1.06L5.56 12l2.47-2.47zm10.06 0 3 3 .53.53-.53.53-3 3-1.06-1.06L18.44 12l-2.47-2.47z"/></svg>'},265897:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m4.646.646.708.708L1.707 5l3.647 3.646-.708.708L.293 5z"/></svg>'},35715:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m6.293 11.5 3.354-3.354.707.708L8.207 11H14c1.657 0 3 1.343 3 3v1h-1v-1c0-1.105-.895-2-2-2H8.207l2.147 2.146-.707.708z"/></svg>'},214487:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 16c4.418 0 8-3.582 8-8 0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8 0 4.418 3.582 8 8 8M5.307 7.693 4.6 8.4l2.475 2.475 4.596-4.596-.707-.707-3.89 3.889z"/></svg>'},343167:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 15c-3.866 0-7-3.134-7-7 0-3.866 3.134-7 7-7 3.866 0 7 3.134 7 7 0 3.866-3.134 7-7 7M0 8c0-4.418 3.582-8 8-8 4.418 0 8 3.582 8 8 0 4.418-3.582 8-8 8-4.418 0-8-3.582-8-8m6 3v-1h4v1zM4 5v1h8V5zm1 3.5h6v-1H5z"/></svg>'},383262:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#0d99ff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 0C3.582 0 0 3.582 0 8c0 4.418 3.582 8 8 8 4.418 0 8-3.582 8-8 0-4.418-3.582-8-8-8M6 11v-1h4v1zM4 5v1h8V5zm1 3.5h6v-1H5z"/></svg>'},643112:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M1.872 8.396c0 3.725 3.02 6.745 6.745 6.745 3.725 0 6.745-3.02 6.745-6.745 0-3.725-3.02-6.745-6.745-6.745-3.725 0-6.745 3.02-6.745 6.745M8.617.651C4.339.651.872 4.12.872 8.396c0 4.277 3.467 7.745 7.745 7.745 4.277 0 7.745-3.467 7.745-7.745 0-4.277-3.468-7.745-7.745-7.745"/><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M5.617 6.396c0-.552.448-1 1-1h4c.552 0 1 .448 1 1v4c0 .552-.448 1-1 1h-4c-.552 0-1-.448-1-1z"/></svg>'},57544:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25"><path fill="#191919" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M10.143 7.661H7v4.857h3.143zM7 6.661c-.552 0-1 .448-1 1v4.857c0 .553.448 1 1 1h3.143c.552 0 1-.447 1-1V7.661c0-.552-.448-1-1-1zm10 6.143h-3.143v4.857H17zm-3.143-1c-.552 0-1 .448-1 1v4.857c0 .552.448 1 1 1H17c.553 0 1-.448 1-1v-4.857c0-.552-.447-1-1-1zM17 7.661h-3.143V9.09H17zm-3.143-1c-.552 0-1 .448-1 1V9.09c0 .552.448 1 1 1H17c.553 0 1-.448 1-1V7.66c0-.552-.447-1-1-1zm-3.714 9.572H7v1.428h3.143zm-3.143-1c-.552 0-1 .447-1 1v1.428c0 .552.448 1 1 1h3.143c.552 0 1-.448 1-1v-1.428c0-.553-.448-1-1-1z"/></svg>'},391205:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="17" height="13" viewBox="0 0 17 13"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M7.107 3.714c0 1.282-1.04 2.322-2.321 2.322-1.282 0-2.322-1.04-2.322-2.322 0-1.282 1.04-2.321 2.322-2.321 1.282 0 2.321 1.04 2.321 2.321m7.429 0c0 1.282-1.04 2.322-2.322 2.322-1.282 0-2.321-1.04-2.321-2.322 0-1.282 1.04-2.321 2.321-2.321 1.282 0 2.322 1.04 2.322 2.321m-5.572 6.964c0-1.794 1.455-3.25 3.25-3.25 1.795 0 3.25 1.456 3.25 3.25v.465h-6.5zM8.5 8.762c-.502-.971-1.375-1.72-2.43-2.061 1.156-.498 1.966-1.648 1.966-2.987 0-1.795-1.455-3.25-3.25-3.25-1.795 0-3.25 1.455-3.25 3.25 0 1.34.81 2.49 1.966 2.987-1.68.542-2.895 2.118-2.895 3.978v1.391h15.786v-1.39c0-1.86-1.215-3.436-2.895-3.978 1.157-.498 1.966-1.648 1.966-2.987 0-1.795-1.455-3.25-3.25-3.25-1.795 0-3.25 1.455-3.25 3.25 0 1.34.81 2.49 1.966 2.987-1.055.34-1.928 1.09-2.43 2.061zm-.464 2.38h-6.5v-.463c0-1.795 1.455-3.25 3.25-3.25 1.795 0 3.25 1.455 3.25 3.25v.464z"/></svg>'},688699:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="51" height="18" viewBox="0 0 51 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M0 0v14.048l1.807.006v-6.69h4.358V5.596H1.807V1.768h5.676V0zm10.736 2.852c.651 0 1.18-.527 1.18-1.178 0-.651-.529-1.18-1.18-1.18-.65 0-1.178.529-1.178 1.18 0 .65.527 1.178 1.178 1.178m-.919 1.769v9.43h1.807v-9.43z"/><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M18.328 4.346c-2.4 0-4.075 2.03-4.075 4.44 0 2.41 1.675 4.44 4.075 4.44 1.1 0 2.005-.426 2.664-1.118v1.255c0 1.563-1.227 2.869-2.829 2.869-.576 0-1.148-.223-1.604-.537l-.905 1.568c.723.466 1.584.737 2.509.737 2.56 0 4.637-2.076 4.637-4.637V4.621h-1.808v.843c-.659-.693-1.565-1.118-2.664-1.118m-2.267 4.44c0-1.496 1.144-2.672 2.464-2.672 1.32 0 2.464 1.176 2.464 2.672 0 1.496-1.144 2.672-2.464 2.672-1.32 0-2.464-1.176-2.464-2.672"/><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M29.312 6.114c-1.068 0-1.935.905-1.935 1.974v5.963H25.57v-9.43h1.807v.864c.53-.685 1.31-1.14 2.328-1.14 1.267 0 2.239.63 2.802 1.592.626-.93 1.647-1.591 2.876-1.591 2.057 0 3.338 1.66 3.35 3.713v5.992h-1.807V8.088c0-1.069-.867-1.974-1.936-1.974-1.069 0-1.935.905-1.935 1.974v5.963h-1.807V8.088c0-1.069-.867-1.974-1.936-1.974"/><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M48.36 5.69c-.804-.83-1.905-1.344-3.183-1.344-2.689 0-4.597 2.276-4.597 4.99 0 2.713 1.908 4.99 4.597 4.99 1.278 0 2.379-.514 3.183-1.344v1.069h1.807v-9.43H48.36zm-5.973 3.646c0-1.8 1.379-3.222 2.987-3.222 1.607 0 2.986 1.422 2.986 3.222 0 1.8-1.379 3.222-2.986 3.222-1.608 0-2.987-1.422-2.987-3.222"/></svg>'},45121:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M6 5.293 10.646.646l.707.708L6.708 6l4.647 4.646-.708.708L6 6.707l-4.646 4.647-.708-.707L5.293 6 .646 1.354l.708-.707z"/></svg>'},25493:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path fill="#000" d="M1 0c2.5 0 5 2.5 5 5V0H1"/></svg>'},194200:(e,r,n)=>{n.d(r,{A:()=>a});let a='<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path fill="#000" d="M5 0C2.5 0 0 2.5 0 5V0h5"/></svg>'},81441:(e,r,n)=>{},397283:(e,r,n)=>{n.d(r,{C2:()=>f,CE:()=>d,Cr:()=>c,Ec:()=>b,FJ:()=>p,Gu:()=>o,Kk:()=>i,Pv:()=>a,QL:()=>h,Qu:()=>s,T:()=>l,Vr:()=>E,XK:()=>w,Xu:()=>g,YM:()=>v,ed:()=>S,g2:()=>y,iU:()=>_,kA:()=>u,lK:()=>T,oA:()=>m,q3:()=>A,zc:()=>I});let a="resource_connect_modal--urlValidation--CSB3V",i="resource_connect_modal--icon--L6BIW",o="resource_connect_modal--urlValidationLeft--0SSFc",s="resource_connect_modal--urlValidationText--J5OBw",l="resource_connect_modal--urlErrorText--a0oW-",c="resource_connect_modal--bold--9RS7P",d="resource_connect_modal--connectImg--GhuBU",u="resource_connect_modal--connectionIntroFooter--XOIRL",p="resource_connect_modal--connectIntroFooterButtons--cDSf8",m="resource_connect_modal--connectIntroText--Nm3IA",_="resource_connect_modal--message--ICAf8",h="resource_connect_modal--inputs---DKiP",g="resource_connect_modal--inputError--aiMql resource_connect_modal--inputs---DKiP",f="resource_connect_modal--learnMore--4VxkZ modal--blueLink--9GcJu blue_link--blueLink--9rlnd",E="resource_connect_modal--actionStrip--Iy3mR",y="resource_connect_modal--titleWithArrow--wTLNS",b="resource_connect_modal--planRow--usTcI",v="resource_connect_modal--timestampInfoContainer--S5Sbh",T="resource_connect_modal--settingsOption--MadGc",I="resource_connect_modal--iconContainer--eFuiE",S="resource_connect_modal--optionLabel--t4Y1C",A="resource_connect_modal--optionDescription--FzyId",w="resource_connect_modal--stepDescription--PoJa1"},93911:(e,r,n)=>{},697906:(e,r,n)=>{n.d(r,{Ys:()=>o,_U:()=>i,p$:()=>a});let a="team_tile--emptyState--V-Q4V tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",i="team_tile--emptyTitle--eXex6 tiles_view--emptyTitle--3Vwmu",o="team_tile--joinSpinner--w04qe"},32844:(e,r,n)=>{n.d(r,{IE:()=>i,UU:()=>l,h_:()=>c,kL:()=>a,m:()=>o,nP:()=>s,qr:()=>p,qw:()=>d,wx:()=>u});let a="generic_grid_tile--container--TutVC",i="generic_grid_tile--headerRight--tRkwL",o="generic_grid_tile--standaloneBorder--gjlpF",s="generic_grid_tile--containerSelected--v-UwH",l="generic_grid_tile--name--Dhl8P ellipsis--_ellipsisAfterNLines--LzI7k",c="generic_grid_tile--description--yB2jn text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--_ellipsisAfterNLines--LzI7k",d="generic_grid_tile--descriptionColor--MIHr2",u="generic_grid_tile--header--eF6sy",p="generic_grid_tile--footer--NiUlV text--fontPos11--2LvXf text--_fontBase--QdLsd"},410936:(e,r,n)=>{n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>i,RL:()=>m,hv:()=>a,kz:()=>_,nv:()=>p,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let a="base_badge--backgroundLight--agxeS",i="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",p="base_badge--badgeContentContainerWithIcon--ECslI",m="base_badge--badgeTooltip--Qz3RM",_="base_badge--tooltipLink--KpcPS"},583284:(e,r,n)=>{n.d(r,{$c:()=>p,BQ:()=>o,JM:()=>s,Sl:()=>a,XO:()=>c,ZW:()=>d,nJ:()=>l,wr:()=>i,zA:()=>u});let a="shared--hubFile--VlJK-",i="shared--prototypeIcon--hCqI3",o="shared--tileUpperLeftWrapper--7zZDB",s="shared--tileEditorIcon--132cE",l="shared--redesignedResourcePreview--4SutZ",c="shared--resourcePreviewContentWrapper--33wSZ",d="shared--resourcePreviewContentWrapperFigJamDots--A924T shared--resourcePreviewContentWrapper--33wSZ",u="shared--resourcePreviewContentWrapperThumbnailSet--Avuol shared--resourcePreviewContentWrapper--33wSZ",p="shared--resourcePreviewContentWrapperRadiusCursorOverride--QuPZa"},727769:(e,r,n)=>{n.d(r,{avatar:()=>p,genericSelectorExternalTeamsIcon:()=>d,genericSelectorInner:()=>l,genericSelectorModal:()=>s,genericSelectorModalCancel:()=>c,modal:()=>a,modalBackdrop:()=>i,planPickerModalBody:()=>o,workspaceSelectorModal:()=>m,workspaceSelectorModalInner:()=>_,workspaceTitleWrapper:()=>u});let a="index--modal--vmXNN",i="index--modalBackdrop--VqLCO",o="index--planPickerModalBody--XtlGE",s="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",l="index--genericSelectorInner--HBJH2",c="index--genericSelectorModalCancel--WOjxG",d="index--genericSelectorExternalTeamsIcon--KL8jt",u="index--workspaceTitleWrapper--e9YT2",p="index--avatar--nIkKj",m="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",_="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},950781:(e,r,n)=>{},722541:(e,r,n)=>{},357202:(e,r,n)=>{n.d(r,{$J:()=>m,Az:()=>d,Hx:()=>i,Pl:()=>f,Wy:()=>a,Yg:()=>s,_D:()=>_,au:()=>h,bO:()=>g,ce:()=>l,fe:()=>p,ik:()=>o,oK:()=>c,y3:()=>u});let a="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",i="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},79979:(e,r,n)=>{n.d(r,{v:()=>a});let a="jsvm_ui--pluginTitleIcon--1GEI-"},600310:(e,r,n)=>{},957552:(e,r,n)=>{n.d(r,{$M:()=>i,Bi:()=>T,Fb:()=>h,Fl:()=>d,J7:()=>A,JQ:()=>D,KR:()=>l,Kb:()=>E,MP:()=>C,Nv:()=>L,Q3:()=>k,RR:()=>m,Sp:()=>N,Tz:()=>p,Vl:()=>s,ai:()=>c,cO:()=>o,cf:()=>U,cu:()=>f,dL:()=>v,g:()=>R,gW:()=>B,gf:()=>M,h1:()=>V,hI:()=>F,i2:()=>P,ii:()=>a,iz:()=>u,kU:()=>S,o6:()=>b,pB:()=>I,vG:()=>y,wH:()=>G,wp:()=>_,xB:()=>x,xc:()=>g,xm:()=>O,yZ:()=>w});let a="community_cards--cardLayoutContainer--nPcgb",i="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRowButton--K6Y0Y",d="community_cards--cardBottomRow_MetadataContainer--QLUfh",u="community_cards--cardBottomRow_Metadata_HoverText--McZzP",p="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",m="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",_="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",g="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",f="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",y="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",b="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",v="community_cards--cardBottomRow_ResourceActionButton--v146M",T="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",I="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",A="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",C="community_cards--publisherDropdownContent_Row--iIBB3",N="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",L="community_cards--creatorPreviewDummySpace_Name--fb75z",O="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",R="community_cards--figjamTileMeta--Sh90c",P="community_cards--figjamTextMetadataCaret--bqK8s",D="community_cards--figjamMetadataContainer--4kXQt",k="community_cards--defaultCursor--K5TUO",M="community_cards--figjamTextMetadataContainer--LBupv",F="community_cards--figjamTextMetadataContainerFull--VPsvv",x="community_cards--figjamTextMetadataLockIcon--yazii",U="community_cards--figjamTextMetadataErrorContainer--XDHyT",B="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",G="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},312949:(e,r,n)=>{n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>v,SL:()=>g,Tm:()=>E,Uz:()=>h,Vg:()=>s,Yk:()=>m,ZF:()=>f,aq:()=>l,bx:()=>_,g4:()=>a,g8:()=>i,i3:()=>y,jG:()=>p,qc:()=>b,qr:()=>c,vu:()=>o});let a="universal_posting_modal--loadingContainer--5giX-",i="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",p="universal_posting_modal--scrollContainer--YtNZ-",m="universal_posting_modal--workspaceBarContainer--VHcn1",_="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",h="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",v="universal_posting_modal--searchInput--fTx57 search--searchInput__OLD_noSize--UpXKH text--fontPos12--YsUAh text--_fontBase--QdLsd"},527659:(e,r,n)=>{n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>T,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>_,label:()=>a,learnMore:()=>i,listContainer:()=>m,listItemContainer:()=>h,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>w,scrollContainer_grid:()=>p,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>O,skeletonThumbnailList:()=>L,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>v,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>k,warning:()=>I,warningIcon:()=>C,warningIconList:()=>N,warningOfflineContainer:()=>S,warningPublish:()=>A});let a="preferred_values_instance_picker--label--to5M3",i="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",p="preferred_values_instance_picker--scrollContainer_grid--8kvKL",m="preferred_values_instance_picker--listContainer--BPie-",_="preferred_values_instance_picker--gridContainer--2LTF6",h="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",v="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",T="preferred_values_instance_picker--contextMenu--qSN6X",I="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",A="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",w="preferred_values_instance_picker--publishCTA--FlNCB",C="preferred_values_instance_picker--warningIcon--2TXXz",N="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",L="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",O="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},631970:(e,r,n)=>{n.d(r,{Dt:()=>i,Zh:()=>a,c6:()=>o,e:()=>s});let a="prop_assignment_row--bindingIcon--EAEMs",i="prop_assignment_row--selectedIcon--8fypm",o="prop_assignment_row--ui3ShowOnRowHover---TwLe",s="prop_assignment_row--ui3SelectedIcon--Opfq2"},779179:(e,r,n)=>{n.d(r,{Gp:()=>g,NJ:()=>l,QK:()=>m,UV:()=>i,V:()=>d,WC:()=>u,Ww:()=>p,_o:()=>a,dc:()=>h,kL:()=>s,mh:()=>o,r9:()=>_,sC:()=>f,xn:()=>c});let a="scrubbable_control--scrubCursorSvg--pav0z",i="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--noIconInputSpacer--IE5yD",u="scrubbable_control--flushLeft--3jk-p",p="scrubbable_control--inputNarrow--BHcl-",m="scrubbable_control--inactiveLabel--qI8ZV",_="scrubbable_control--disabled--vp-59",h="scrubbable_control--disableHoverBorder--y5AhV",g="scrubbable_control--variableControl--DqEyP",f="scrubbable_control--scrubbableInput--Sv3BW"},546366:(e,r,n)=>{n.d(r,{P:()=>a,h:()=>i});let a="feature_callout--featureCallout---qPZ7",i="feature_callout--zIndexNotificationModal--xlAoe"},440046:(e,r,n)=>{n.d(r,{Pd:()=>i,S3:()=>c,_H:()=>s,_t:()=>l,io:()=>o,xK:()=>d,zr:()=>a});let a="main_view--root--uFXxy",i="main_view--leftHalf--D2ctr",o="main_view--rightHalf--t2aqF",s="main_view--leftPanel--wD96C",l="main_view--rightPanels--Id6Dj",c="main_view--centerPanel--5lkgL",d="main_view--rightPanel---MhPC"},624600:(e,r,n)=>{n.d(r,{kL:()=>a});let a="footer_banner--container--HxFNE"},404319:(e,r,n)=>{n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>a,_K:()=>i,rH:()=>d,u$:()=>o,uu:()=>l});let a="fullscreen_accessibility_tree--debugModeNode--aGne7",i="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},493834:(e,r,n)=>{n.d(r,{Kt:()=>c,LE:()=>s,NV:()=>l,Qq:()=>d,l8:()=>i,ro:()=>o,zc:()=>a});let a="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",i="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--rightIconContainer--rTqI4",s="action_option--shortcut--w0R75 action_option--rightIconContainer--rTqI4",l="action_option--optionContainer--ru4UN",c="action_option--optionContainerLimitWidth--aaElZ",d="action_option--text--fSMIm"},404712:(e,r,n)=>{},957070:(e,r,n)=>{n.d(r,{sx:()=>a});let a="fullscreen_view--fontsIcon--a4W8y"},12182:(e,r,n)=>{n.d(r,{Ae:()=>s,Ef:()=>g,FI:()=>d,Kk:()=>a,Qq:()=>l,Yg:()=>c,bl:()=>o,hc:()=>h,ho:()=>_,i1:()=>f,lY:()=>u,ln:()=>i,vk:()=>p,yF:()=>m});let a="hyperlink_popup--icon--7YW8G",i="hyperlink_popup--inlineText--U1QY9",o="hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",s="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",l="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",c="hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",d="hyperlink_popup--pageSeparator--SAx-p",u="hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",p="hyperlink_popup--clickable--VAzTE",m="hyperlink_popup--divider--NSUKF",_="hyperlink_popup--open--EsmHi",h="hyperlink_popup--edit--Q80cZ",g="hyperlink_popup--editContainer--W1EMp",f="hyperlink_popup--editText--IGsdw"},645801:(e,r,n)=>{n.d(r,{QT:()=>a});let a="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},527603:(e,r,n)=>{n.d(r,{FF:()=>_,GR:()=>p,Ib:()=>h,Ms:()=>l,N4:()=>g,NK:()=>f,OD:()=>y,Ol:()=>C,Tq:()=>S,UA:()=>E,Vk:()=>m,Vs:()=>a,XK:()=>O,Yc:()=>T,aC:()=>w,aS:()=>s,bF:()=>A,bo:()=>i,fh:()=>o,hs:()=>L,nl:()=>c,oV:()=>u,v:()=>I,vZ:()=>b,wi:()=>v,xC:()=>N,yg:()=>d});let a="library_item_tile--tile--okxBn",i="library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn",o="library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",s="library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",l="library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",c="library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",d="library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",u="library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",p="library_item_tile--thumbAndNameWrapper--FT1HH",m="library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH",_="library_item_tile--thumb--MNoWO",h="library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO",g="library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",f="library_item_tile--thumbFullPage--ox1s1",E="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",y="library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",b="library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",v="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",T="library_item_tile--thumbWrapperNoBg--dq7A6",I="library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",S="library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",A="library_item_tile--variableSetThumb--cCo2-",w="library_item_tile--variableTypeIcon--58dL0",C="library_item_tile--thumbContainer--7rKmQ",N="library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu",L="library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu",O="library_item_tile--tileBorder--clelb"},547952:(e,r,n)=>{},540964:(e,r,n)=>{n.d(r,{g_:()=>i,j3:()=>a});let a="inset 0px 0px 0px 0.5px var(--color-border)",i="5px"},234505:(e,r,n)=>{},938674:(e,r,n)=>{n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>a,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>_,hD:()=>E,iU:()=>d,iY:()=>m,or:()=>i,p:()=>h,u0:()=>o,vD:()=>p,z8:()=>c});let a="multiplayer_cursors--cursor--n8aPY",i="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",p="multiplayer_cursors--topMessageLine--uwXou",m="multiplayer_cursors--cursorName--i776D",_="multiplayer_cursors--cursorNameSmall--Cy-9n",h="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},622978:(e,r,n)=>{n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>a,W5:()=>i,aN:()=>s});let a="object_row--layerIcon--dTOdu",i="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},214758:(e,r,n)=>{},50742:(e,r,n)=>{},492929:(e,r,n)=>{n.d(r,{X3:()=>a,f$:()=>i,lo:()=>s,x7:()=>o});let a="chit--chitThumbnail--KxCGp",i="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm"},651425:(e,r,n)=>{n.d(r,{$:()=>b,$f:()=>s,As:()=>f,Bx:()=>v,DQ:()=>C,Gz:()=>u,K5:()=>o,LK:()=>A,Om:()=>l,UU:()=>h,Ul:()=>w,VB:()=>d,ZM:()=>y,ab:()=>i,bE:()=>S,cZ:()=>c,fz:()=>g,it:()=>I,lF:()=>E,mL:()=>T,n:()=>a,vQ:()=>_,y4:()=>m,yW:()=>p,zz:()=>N});let a="colors_inspect_panel--colorContainer--uDe3T",i="colors_inspect_panel--colorContainerUI3--JoJy0 colors_inspect_panel--colorContainer--uDe3T",o="colors_inspect_panel--propertyColorRowTall--5z3CC colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",s="colors_inspect_panel--propertyColorRowTallUI3--UBAV1 colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",l="colors_inspect_panel--propertyColorRowShortUI3--KuuY- colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE",c="colors_inspect_panel--propertyRowTwoColumn--opscx",d="colors_inspect_panel--styleNameRow--RknQ9 inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",u="colors_inspect_panel--paintIcon--MVzOV",p="colors_inspect_panel--paintName--t-J8u text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="colors_inspect_panel--styleNameContainer--HbhgI text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni",_="colors_inspect_panel--styleNameContainerUI3--98G0T",h="colors_inspect_panel--stylePaintRow--5EqOv",g="colors_inspect_panel--gradientPaintRow--CYk-v",f="colors_inspect_panel--paintColor--3DbXu text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa ellipsis--ellipsis--Tjyfa",E="colors_inspect_panel--gradientSingleRow--OZZVn",y="colors_inspect_panel--rowInStyle--DcVuq",b="colors_inspect_panel--gradientVariableSingleRow--Hse0d",v="colors_inspect_panel--deletedIcon--mbkH9",T="colors_inspect_panel--blendModeUI3--NIfqt ellipsis--ellipsis--Tjyfa",I="colors_inspect_panel--variableIndentUI3--xVkgJ",S="colors_inspect_panel--rawColorUI3--1jNdn",A="colors_inspect_panel--rawColorUI3Label--kkgH1 ellipsis--ellipsis--Tjyfa",w="colors_inspect_panel--rawColorUIGradientLabel--dUAE- ellipsis--ellipsis--Tjyfa",C="colors_inspect_panel--rawColorUI3Hoverable--iWU5n",N="colors_inspect_panel--rawColorIndentUI3--BIVFU"},892299:(e,r,n)=>{n.d(r,{DV:()=>_,Dn:()=>p,FL:()=>y,KQ:()=>g,LG:()=>A,MC:()=>v,N4:()=>m,Om:()=>E,PD:()=>o,VM:()=>I,Y7:()=>h,cL:()=>u,ed:()=>i,gn:()=>s,ko:()=>C,lN:()=>f,lS:()=>d,l_:()=>S,lo:()=>l,v9:()=>a,wr:()=>c,x0:()=>T,yr:()=>b,zi:()=>w});let a="collapsible_property_panel--showOnTitleHover--yqPoD",i="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--largePreviewRow--0k3Kr",d="collapsible_property_panel--ui3RowButtons--xHUX3",u="collapsible_property_panel--styleTitle--a7BMw",p="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",m="collapsible_property_panel--titleButton--7yILK",_="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",h="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",g="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",f="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",E="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",y="collapsible_property_panel--panelMixedMessage--UuCKj",b="collapsible_property_panel--panelTitleText--vFGYT",v="collapsible_property_panel--titleButtons--k6Lxk",T="collapsible_property_panel--styleTitleButtons--9ou7z",I="collapsible_property_panel--dropdownOption--cy1JZ",S="collapsible_property_panel--updateIcon--0YXMO",A="collapsible_property_panel--addButtonContainer--KbnzE",w="collapsible_property_panel--entrypointMenuContainer--j3RuX",C="collapsible_property_panel--strong--bhEir"},433906:(e,r,n)=>{n.d(r,{A:()=>a,BI:()=>m,C_:()=>g,Hs:()=>f,Rb:()=>u,Tu:()=>i,W1:()=>p,gE:()=>s,hg:()=>c,lG:()=>l,p3:()=>d,p5:()=>o,t7:()=>_,wH:()=>h});let a="style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",i="style_title--readOnly--6RqsN",o="style_title--selectedCollapsedPanelPreviewTitle--x1waj style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",s="style_title--numTextStyleOverrides--VcFQr",l="style_title--narrowCollapsedPanelPreviewTitle---OnQ7",c="style_title--collapsedPanelPreviewIcon--TYMgV",d="style_title--styleTitleName--lJDZI ellipsis--ellipsis--Tjyfa",u="style_title--customTitleName--Y--0d",p="style_title--ui3SelectionStyleItemTitle--bYnM2",m="style_title--hoverable--V2b9S",_="style_title--ui3SelectionStyleItemTitleStretch--h-OHJ",h="style_title--selected--9K15m",g="style_title--secondarySelected--gqSFt",f="style_title--pointerEvents--9-qzp"},18327:(e,r,n)=>{n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>a,be:()=>d,d_:()=>m,f0:()=>p,hF:()=>u,hL:()=>_,in:()=>i,kL:()=>s,t_:()=>l});let a="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",i="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",m="combo_box--withSvg--BjUJI",_="combo_box--noBorderOnFocus--7Ago-"},367995:(e,r,n)=>{n.d(r,{TQ:()=>a});let a="containing_assets_panel--componentName--Lwkmx"},228217:(e,r,n)=>{n.d(r,{$r:()=>M,BT:()=>R,Bx:()=>Y,Cv:()=>P,EC:()=>d,EX:()=>o,FV:()=>N,GB:()=>I,GI:()=>l,H:()=>p,IX:()=>E,I_:()=>h,Is:()=>S,Kx:()=>j,L3:()=>k,MX:()=>w,NI:()=>D,O1:()=>A,QK:()=>B,Qh:()=>H,RK:()=>F,TL:()=>m,Tp:()=>G,Xd:()=>b,YJ:()=>g,Z6:()=>C,cD:()=>i,eV:()=>a,hj:()=>$,kA:()=>y,kv:()=>K,mH:()=>W,mK:()=>s,n1:()=>u,np:()=>O,os:()=>f,p:()=>V,py:()=>_,ug:()=>T,vc:()=>v,wM:()=>L,wh:()=>c,x7:()=>x,zc:()=>U,zm:()=>z});let a="paint_panels--variableValue--2xpUO ellipsis--ellipsis--Tjyfa",i="paint_panels--typeContainer--e-3I2",o="paint_panels--colorInput--nSz13",s="paint_panels--noMargin--qdWOe",l="paint_panels--typeContainerHidden--5zTrp paint_panels--typeContainer--e-3I2",c="paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",d="paint_panels--opacityInputHidden--I2GEk",u="paint_panels--opacityInputContainer--oqlsk",p="paint_panels--strokeInput--Zg8DO raw_components--flushLeft--YH-5P",m="paint_panels--strokeWeight---jmn2 raw_components--borderFocusWithin--BaipZ",_="paint_panels--strokeWeightNew--HHR3i raw_components--borderFocusWithin--BaipZ",h="paint_panels--strokeWeightVar--gxKxA",g="paint_panels--strokeWeightVarNew--CkN1w",f="paint_panels--strokeAlign--UKGAx",E="paint_panels--strokeAlignNew--6VVfv",y="paint_panels--strokeAlignInput--P3fhz",b="paint_panels--strokeAlignChevron--9p1Hk",v="paint_panels--leftEndCap--tHF9y",T="paint_panels--endpointRow--k5uAa",I="paint_panels--swapCap--eAzkX",S="paint_panels--rightEndCap--Oy9SG",A="paint_panels--endPointSvg--E5Qlh",w="paint_panels--endPointSvgShort--YHOkF",C="paint_panels--endPointOption--NrunB",N="paint_panels--advancedStroke--653Nf",L="paint_panels--paintPanelColorValueContainer--squRD paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",O="paint_panels--fitToSizePaintPanelColorValueContainer--XMkEF paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",R="paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",P="paint_panels--fitToSizePaintPanelVariableValueContainer---k9XP paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",D="paint_panels--paintPanelValueSelected--QHJsV",k="paint_panels--paintPanelValueSelectedSecondary--6uSZ2",M="paint_panels--paintPanelIconContainer--l4u-f",F="paint_panels--paintPanelRow--NZUf3",x="paint_panels--chit--twQEy",U="paint_panels--iconContainer--1gum-",B="paint_panels--inactiveLabel--gsLwE transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",G="paint_panels--onDrop--Va3gz",V="paint_panels--paintRowIcons--5b-UG",H="paint_panels--enableIconVisibleOnHover--ou2Fb",z="paint_panels--iconVisibleOnHover--1rweo",K="paint_panels--checkbox--1acob",W="paint_panels--checkboxLabel--q0GyI",j="paint_panels--checkboxLabelRow--ZNgFg",Y="paint_panels--deletedIcon--nXIQH",$="paint_panels--ui3EndpointFlipped--JAuAi"},210983:(e,r,n)=>{n.d(r,{Rh:()=>o,Tw:()=>a,iw:()=>i});let a="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",i="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},973219:(e,r,n)=>{n.d(r,{Ah:()=>y,Bg:()=>I,CZ:()=>L,DS:()=>R,EA:()=>u,LE:()=>w,LJ:()=>p,No:()=>E,O1:()=>h,PB:()=>v,PQ:()=>a,Pf:()=>s,U:()=>f,WC:()=>O,X0:()=>A,Z4:()=>_,Zz:()=>N,_Z:()=>d,a2:()=>T,ai:()=>g,fR:()=>l,ht:()=>C,kR:()=>i,l$:()=>S,pc:()=>m,pq:()=>o,vR:()=>b,wh:()=>c});let a="raw_components--border--SKh2u",i="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelDisabled--PiPuu raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",d="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="raw_components--textInputSoftDisabled--M5O7I",p="raw_components--noPlaceholderLine--KBoD7",m="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",_="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",g="raw_components--chevron--nJiSt",f="raw_components--wide--F33jp",E="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",y="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",b="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",v="raw_components--outlineButton--FyUoF",T="raw_components--modalPanel--wmDfl",I="raw_components--propertiesPanelErrorBox--N2p6o",S="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",A="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",C="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",N="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",L="raw_components--rowSelected--M2Eip",O="raw_components--flushLeft--YH-5P",R="raw_components--panelIconContainer--V9E3Z"},960598:(e,r,n)=>{n.d(r,{Kk:()=>s,be:()=>a,j1:()=>o,kk:()=>i});let a="stack_panel_v4--selectInput--DdAPZ",i="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},689119:(e,r,n)=>{n.d(r,{Ev:()=>d,Ii:()=>s,Qb:()=>c,Vf:()=>a,Z7:()=>l,jO:()=>i,lG:()=>o,t:()=>u});let a="states_panel--errorStateWithCloseButtonBox--jayB0 states_panel--errorStateBoxBase--NGwjK",i="states_panel--errorStateBoxFlush--LYAGK states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",o="states_panel--errorStateBoxRegular--nhPoJ states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",s="states_panel--errorStateBoxHeader--zgSnc",l="states_panel--errorStateBoxTitle--pZ8tj",c="states_panel--errorStateBoxTitleText--VY8En",d="states_panel--errorStateBoxWarningIcon--5BPCj",u="states_panel--ui3ErrorStateBoxContent--07s-y"},412796:(e,r,n)=>{n.d(r,{Dq:()=>h,FH:()=>m,Gy:()=>p,RW:()=>_,Tg:()=>i,_J:()=>d,g5:()=>c,gW:()=>l,iT:()=>g,mc:()=>s,nO:()=>f,pe:()=>E,pi:()=>o,vs:()=>y,wH:()=>b,xT:()=>a,zH:()=>u});let a="68px",i="brush_dropdown--brushLabel--IMgwP",o="brush_dropdown--spacerForBrushHeader--e4V-l",s="brush_dropdown--brushName--AcJEt",l="brush_dropdown--darkMode--o-MK8",c="brush_dropdown--brushModal--8q2R9",d="brush_dropdown--modalBodyInner--Sd2UK",u="brush_dropdown--brushInputButton--1t1ot",p="brush_dropdown--dropdownOpen--7rKr1",m="brush_dropdown--chevronContainer--HzfZP",_="brush_dropdown--brushRow--gp5hJ",h="brush_dropdown--labelAndCheckMark--8lMBJ",g="brush_dropdown--checkContainer---fOK0",f="brush_dropdown--brushImageContainer--A1oXb",E="brush_dropdown--brushRowButton--0bMvU",y="brush_dropdown--brushRowInner--UMCL-",b="brush_dropdown--selected--QxEb-"},100987:(e,r,n)=>{n.d(r,{QK:()=>i,hF:()=>a});let a="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",i="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO"},483189:(e,r,n)=>{n.d(r,{H5:()=>u,Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>a,Y7:()=>p,by:()=>_,hF:()=>d,ig:()=>m,kb:()=>i,pG:()=>o});let a="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",i="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelOneInputDoubleRow--8P9kp ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",p="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_modal_rows--leftInput--pkjk8",_="ui3_modal_rows--rightInput--mOj6z"},627977:(e,r,n)=>{n.d(r,{nW:()=>a,zF:()=>i});let a="plugin_parameter_entry--pillIcon--y5eMK",i="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},575164:(e,r,n)=>{n.d(r,{Tk:()=>a,ZR:()=>i});let a="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",i="quick_actions--pluginIcon--d9b13"},708115:(e,r,n)=>{n.d(r,{kv:()=>i,wn:()=>a});let a="quick_actions--resultDisabled--tjdlc",i="quick_actions--checkbox--jhzha"},574786:(e,r,n)=>{n.d(r,{BK:()=>N,C7:()=>c,EI:()=>l,Ge:()=>h,K$:()=>p,Km:()=>w,MT:()=>M,O5:()=>y,QD:()=>O,Rt:()=>B,VV:()=>s,Vr:()=>C,WY:()=>x,Wh:()=>a,XE:()=>_,_L:()=>d,a1:()=>I,aK:()=>P,ai:()=>D,cu:()=>R,hg:()=>A,i3:()=>U,me:()=>v,qN:()=>L,qb:()=>m,qc:()=>F,r9:()=>o,rR:()=>i,ro:()=>G,wH:()=>f,ws:()=>u,yo:()=>E,yx:()=>g,zK:()=>k,zW:()=>T,zb:()=>b,zk:()=>S});let a="multiplayer_view--multiplayerView---Lf04",i="multiplayer_view--onboardingTarget--Ja9Ak",o="multiplayer_view--disabled--K9QcN",s="multiplayer_view--users--DcWtM",l="multiplayer_view--usersContainer--bzaNI",c="multiplayer_view--userIconView--XlLWC",d="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",u="multiplayer_view--userIconAvatar--qt4Vz",p="multiplayer_view--userIconAvatarLoading--s5PPI",m="multiplayer_view--normal--xHQOT",_="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",h="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",g="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",f="multiplayer_view--selected--PrEy3",E="multiplayer_view--hovered--X1V8M",y="multiplayer_view--textAvatarContainer--SwGAW",b="multiplayer_view--overflowTextAvatar--ouAgh multiplayer_view--textAvatar--P-4wz",v="multiplayer_view--separator--d7XC2",T="multiplayer_view--separatorContainer--3NXhc",I="multiplayer_view--overflowDropdown--5PCUX",S="multiplayer_view--multiplayerUserCount--VN79F",A="multiplayer_view--fileSeenStateSubtitle--xTYdr",w="multiplayer_view--avatarWithGroupActionsTightened---blv6",C="multiplayer_view--groupActions--C2jLX",N="multiplayer_view--presenterButtonAction--7CCnt",L="multiplayer_view--pointingDropdown--4CD2d",O="multiplayer_view--pointingDropdownAdditionalPaddingUI2--zc-aF",R="multiplayer_view--listBox--9RJ5F",P="multiplayer_view--listBoxNew--z88cs",D="multiplayer_view--chevron--Vn-C1",k="multiplayer_view--ui3SearchContainerNew--brZ7S",M="multiplayer_view--searchContainer--q6zE8",F="multiplayer_view--searchIcon--C9Aoz",x="multiplayer_view--xIconButtonContainerWrapper--wSUus",U="multiplayer_view--xIcon--Oq2hB",B="multiplayer_view--searchInput--f43Gp text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",G="multiplayer_view--withOverflow---4XmW"},875495:(e,r,n)=>{n.d(r,{Bx:()=>u,EE:()=>s,Gq:()=>c,Hw:()=>d,Io:()=>i,Mk:()=>o,Qq:()=>l,yQ:()=>p,zr:()=>a});let a="variable_pill--root--0ibUT",i="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--useHover--S6o02",s="variable_pill--forceHover--EDu9s",l="variable_pill--text--Fm5k5",c="variable_pill--invalid--dxyCJ",d="variable_pill--nameAndIcons--Cyvcc",u="variable_pill--deletedIcon--QaRlG",p="variable_pill--ui3PillHeight--rEy4E"},134671:(e,r,n)=>{n.d(r,{Er:()=>s,Fi:()=>_,JJ:()=>i,N:()=>p,Q_:()=>d,RH:()=>o,Uq:()=>c,Wj:()=>m,eK:()=>u,pv:()=>a,xH:()=>l});let a="variable_pill_base--pillBase--HIf9B",i="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDefault--5YSwx",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",p="variable_pill_base--pillInSelection--HupPT",m="variable_pill_base--pillOverridden--bSHBf",_="variable_pill_base--pillNarrow--Oai69"},581520:(e,r,n)=>{n.d(r,{Qs:()=>i,yA:()=>a});let a="in_app_page--app--U0Lrj in_app_page--appFont--W2-9p",i="in_app_page--content--n-h-S"},522242:(e,r,n)=>{n.d(r,{QW:()=>a});let a="go_to_stripe_button--warningIcon--eeAU7"},515640:(e,r,n)=>{n.d(r,{k:()=>a});let a="dock--dockDesign--kbym5"},269100:(e,r,n)=>{},968638:(e,r,n)=>{},634218:(e,r,n)=>{n.d(r,{CY:()=>y,EJ:()=>A,EO:()=>N,JF:()=>m,Jg:()=>u,K1:()=>a,P9:()=>d,R2:()=>f,Rh:()=>p,SM:()=>c,TX:()=>E,UR:()=>T,Vw:()=>i,Wc:()=>_,Y5:()=>v,eo:()=>h,fp:()=>g,hS:()=>C,jT:()=>o,nd:()=>s,qG:()=>S,x7:()=>w,xR:()=>I,yl:()=>l,zB:()=>b});let a="header_modal--modalBackground--bcAoR",i="header_modal--transparentBackground--pG9jD",o="header_modal--modalContainer--yIJSk",s="header_modal--bottomSection--qH4em",l="header_modal--modal--2JYEN modal--modalShadow--d-rJf",c="header_modal--upperModal--guwaL header_modal--modal--2JYEN modal--modalShadow--d-rJf",d="header_modal--modal__scroll--T2IVi",u="header_modal--headerWithBottomBorder--O1ODQ",p="header_modal--headerSmall--WlWbO header_modal--header--M56yS",m="header_modal--headerLarge--JMHqT header_modal--header--M56yS",_="header_modal--headerHidden--JWFxb",h="header_modal--headerIconImg--OHQqh plugin--pluginIconBase--yAG5F",g="header_modal--headerIconSvg--dgaEs",f="header_modal--headerModalTitle--32hFx",E="header_modal--headerModalTitleWithoutOverflow--eQPzZ header_modal--headerModalTitle--32hFx ellipsis--ellipsis--Tjyfa",y="header_modal--fixedTop--eHgXF",b="header_modal--fixedTopDynamic--u-Gin",v="header_modal--fixedCenter--wSN6F",T="header_modal--confirmationBody--ViOqF text--fontPos11--2LvXf text--_fontBase--QdLsd",I="header_modal--confirmationText--76-iq text--fontPos11--2LvXf text--_fontBase--QdLsd",S="header_modal--confirmButtonBox--FEPg6",A="header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",w="header_modal--cancelButton--3zDCc header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",C="header_modal--rightButtonsClassName--plY48",N="header_modal--modalBorderRadiusOverride--mLoQR"},639088:(e,r,n)=>{n.d(r,{Be:()=>s,DD:()=>h,Do:()=>w,F4:()=>b,G6:()=>l,Hx:()=>c,KA:()=>f,Lt:()=>A,Lu:()=>i,N4:()=>S,Rt:()=>I,Vq:()=>_,_Z:()=>g,aY:()=>y,bE:()=>u,iZ:()=>T,jE:()=>m,kL:()=>v,pL:()=>a,p_:()=>o,v0:()=>d,yl:()=>p,z3:()=>E});let a="modal--confirmButton--SNUDv",i="modal--cancelLink--gmgMU modal--button--ZJmGG",o="modal--list--AYXsM",s="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--modalFooterButtonGroup--G-glC",c="modal--modalFooter--doArv",d="modal--buttonRow--o2A0S",u="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",p="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",m="modal--modalContent--P643j",_="modal--important--qfd6R",h="modal--title--sEkWg",g="modal--textInput---r1fJ",f="modal--tfaQrCode--Xy6Qb",E="modal--error--Kk49K",y="modal--code--zhp08",b="modal--codes--U1NYW",v="modal--container--LVq8G",T="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",I="modal--blockQuoteHeader--IKpaG",S="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",A="modal--select--a5n-Q",w="modal--loadingSpinnerContainer--u3V2x"},809086:(e,r,n)=>{n.d(r,{$T:()=>l,Ar:()=>w,B9:()=>u,FQ:()=>T,Hn:()=>N,IL:()=>s,Lq:()=>c,Ny:()=>A,OQ:()=>y,P1:()=>h,TI:()=>m,ZA:()=>E,ZO:()=>_,_S:()=>o,a5:()=>I,b:()=>i,dC:()=>f,gF:()=>C,gh:()=>b,jS:()=>g,nW:()=>S,oX:()=>v,uS:()=>p,w0:()=>d,wV:()=>a});let a="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",i="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--noPaddingPointerModal--avTDn pointer_modal--pointerModal--wrpFz",c="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",p="pointer_modal--closeButtonWhite--nj2uk",m="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",_="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--secondaryCtaLinkButton--aoJ64",g="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",f="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",E="pointer_modal--footerDiv--JtCDN",y="pointer_modal--ctaContainer--luZLz",b="pointer_modal--noMotion--YIicU",v="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",T="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",I="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",S="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",A="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",w="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",C="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",N="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},595107:(e,r,n)=>{n.d(r,{Fb:()=>o,Qw:()=>i,e8:()=>c,hQ:()=>a,jo:()=>u,oE:()=>s,pL:()=>d,s$:()=>l});let a="request_upgrade_modal--contentContainer--Hqp0B",i="request_upgrade_modal--titleText--a21HW",o="request_upgrade_modal--stepTitle--HEFYi",s="request_upgrade_modal--optionalSecondaryText--pv0lf",l="request_upgrade_modal--importantInstructions--6ke2E",c="request_upgrade_modal--messageInBillingRemodel--3LSNu request_upgrade_modal--message--igR-K",d="request_upgrade_modal--confirmButton--IP-Y6",u="request_upgrade_modal--lgModalButtonRow--TwgPl"},538002:(e,r,n)=>{n.d(r,{$2:()=>d,Ac:()=>L,BA:()=>h,Bd:()=>Y,Cr:()=>o,DA:()=>v,ER:()=>er,E_:()=>u,Ed:()=>A,Fk:()=>Z,G:()=>J,HL:()=>X,HO:()=>D,IE:()=>y,IH:()=>F,KN:()=>eu,Kz:()=>G,Lq:()=>c,N1:()=>x,O6:()=>m,Ph:()=>et,QA:()=>f,QU:()=>i,QW:()=>w,Sc:()=>T,TK:()=>U,U5:()=>ea,UB:()=>B,Uo:()=>O,VA:()=>l,Vq:()=>K,WZ:()=>$,YQ:()=>I,ZD:()=>R,Zk:()=>p,Zq:()=>N,_4:()=>z,bV:()=>s,d3:()=>g,dF:()=>ep,dG:()=>ed,eF:()=>eo,fA:()=>ei,fS:()=>W,hC:()=>V,hO:()=>el,hz:()=>C,i1:()=>k,iA:()=>M,ix:()=>q,l2:()=>a,mq:()=>P,oT:()=>H,p3:()=>en,pi:()=>Q,st:()=>_,tb:()=>es,tl:()=>ee,ts:()=>E,v7:()=>j,v_:()=>S,vv:()=>b,w3:()=>ec,zY:()=>em});let a="permissions_modal--teamAccessContainer--g01nc",i="permissions_modal--fileShareSettingsContainer--Ryd-I",o="permissions_modal--bold--pQxD0",s="permissions_modal--sectionHeader--6AW4h text--fontPos11--2LvXf text--_fontBase--QdLsd",l="permissions_modal--subtitle--GxcXl text--fontPos11--2LvXf text--_fontBase--QdLsd",c="permissions_modal--loading--jvhU0",d="permissions_modal--teamDiscoverabilityOptions--pEYOk",u="permissions_modal--bottomRow--S813o",p="permissions_modal--inviteBar--8XkkP",m="permissions_modal--removeButtonContainer--bHzg6",_="permissions_modal--roleRows--tqVZr overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",h="permissions_modal--expRoleRows--A4fmS permissions_modal--roleRows--tqVZr overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",g="permissions_modal--nestedRoleRows--BW-m6",f="permissions_modal--expNestedRoleRows--IZF9e",E="permissions_modal--sectionDivider--HDnMd permissions_modal--divider--NnzX3",y="permissions_modal--headerRight--xhf8i",b="permissions_modal--headerCopyLink--TLJnr blue_link--blueLinkDefaultPointer--ozEG5 blue_link--blueLink--9rlnd",v="permissions_modal--fileTitle--487xP",T="permissions_modal--copyIconBase--JLrbE role_row--roleRowIcon--BatSn",I="permissions_modal--orgGuestEmails--67DIG",S="permissions_modal--orgGuestLink--uf5Ps blue_link--blueLink--9rlnd",A="permissions_modal--longToken--jfdAa",w="permissions_modal--warningIcon--X3ziL",C="permissions_modal--lockIcon--6a5M2",N="permissions_modal--worldIconContainer--a1gzK",L="permissions_modal--worldIcon--Y-MMG",O="permissions_modal--buttons--sCeux",R="permissions_modal--publishInfoContainer--d8NE2",P="permissions_modal--publishInfo--yUZou text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",D="permissions_modal--publishFooter--1XH5F",k="permissions_modal--previewContainer--MFUFd",M="permissions_modal--tileContainer--wwuF7",F="permissions_modal--tileContainer16x9--DzA8m",x="permissions_modal--headerContainer--xBljF",U="permissions_modal--headerText--U8V-r text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",B="permissions_modal--remixHeaderText--OiGup text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",G="permissions_modal--remixMetaDataContainer--KT9TI",V="permissions_modal--remixTileAuthor--HYMI0 ellipsis--ellipsis--Tjyfa text--fontPos12--YsUAh text--_fontBase--QdLsd",H="permissions_modal--remixTileTitle--qMSC7 ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k text--fontPos18--rYXJb text--_fontBase--QdLsd",z="permissions_modal--publishButton--E2RDi",K="permissions_modal--inviteHeader--mTkIA",W="permissions_modal--shareAsSection--MI1Wp",j="permissions_modal--fullWidthHeader--KSYkf",Y="permissions_modal--flexWidthHeader--n1Smx ellipsis--ellipsis--Tjyfa",$="permissions_modal--shareSettingsBottomRow--cST-d",q="permissions_modal--shareSettingsButtons--LvLDe",X="permissions_modal--permissionsBanner--TJDeP",J="permissions_modal--infoIcon--RIBFx",Z="permissions_modal--additionalSecurityContainer--7kYll",Q="permissions_modal--passwordGenerateRow--S72ZY",ee="permissions_modal--passwordGenerateButton--RWdjy",et="permissions_modal--rotatePasswordGenerateIcon--Wytv0",er="permissions_modal--passwordInfoRow--R26d-",en="permissions_modal--passwordInputContainer--w3cmR",ea="permissions_modal--passwordInput--TiKC4",ei="permissions_modal--autogenPasswordInput---iEAL permissions_modal--passwordInput--TiKC4",eo="permissions_modal--accessHeader---6TFX",es="permissions_modal--radioText--mNf3d",el="permissions_modal--radioOption--0IkNg",ec="permissions_modal--radioSubtitle--ZLzrC",ed="permissions_modal--selectDropdownDivider--prQTj",eu="permissions_modal--connectedProjectBannerContainer--VKEJS",ep="permissions_modal--modalTitleContainer--aOyjF",em="permissions_modal--arrowTitleContainer--GB2zp"},105100:(e,r,n)=>{n.d(r,{C:()=>i,h:()=>a});let a="offline_prototype--progressIcon--Ye9zS",i="offline_prototype--learnMoreLink--SXs6g"},784500:(e,r,n)=>{n.d(r,{Fp:()=>d,HF:()=>i,UT:()=>s,g7:()=>c,kv:()=>l,v6:()=>a,zG:()=>o});let a="options_menu--optionMenuResponsiveViewer--nakUc options_menu--optionMenu--9fG9u",i="options_menu--optionMenuForFooter--HiOGO options_menu--optionMenu--9fG9u",o="options_menu--optionMenuButton--9sq9i",s="options_menu--buttonChevron--N2JHA",l="options_menu--dropdownButtonForFooter--UIPTM",c="options_menu--deviceName--qS44h",d="options_menu--optionsMenuIconFixed--zXwsG"},201140:(e,r,n)=>{n.d(r,{$7:()=>s,Jf:()=>p,KK:()=>o,Qs:()=>l,S4:()=>h,Tp:()=>a,Xw:()=>c,h2:()=>g,lJ:()=>m,q9:()=>u,t0:()=>i,wc:()=>d,xQ:()=>_});let a="prototype--background--C7T7U",i="prototype--backgroundTransparent--g5yZq",o="prototype--documentationContainer---zYeR",s="prototype--noScrollBars--Hz0hJ",l="prototype--content--9zE6J",c="prototype--contentMiddle--sqEVr",d="prototype--contentMiddleWithHeader--Qr1mu",u="prototype--viewerContainer--8C5YF",p="prototype--viewerContainerFullScale--bf-Sp prototype--viewerContainer--8C5YF",m="prototype--viewer--uYMkg",_="prototype--footerContainer--AikxI",h="prototype--commentsNextCursor--uIXBd",g="prototype--suppressFocusRings--uoAQT"},169752:(e,r,n)=>{n.d(r,{Dg:()=>o,Qs:()=>a,S:()=>l,qg:()=>d,qr:()=>s,v0:()=>c,xC:()=>i,zP:()=>u});let a="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",i="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--fullscreenBackground--tIex6",u="rcs_components--loadingSpinner--rOHo1"},336229:(e,r,n)=>{n.d(r,{Hj:()=>a,pO:()=>i});let a="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",i="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},464758:(e,r,n)=>{n.d(r,{$9:()=>a,Gv:()=>c,Lq:()=>_,SI:()=>p,gH:()=>u,hj:()=>m,ig:()=>i,lD:()=>l,mj:()=>o,mm:()=>d,s1:()=>h,vL:()=>s});let a="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",i="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--snugContainer--qWeTK",c="styles_properties_form--stylePreview--tJF78",d="styles_properties_form--fullWidthPreview--52YjR",u="styles_properties_form--textStylePreview--Jp6WQ",p="styles_properties_form--textStylePreviewInverted--GeC3b",m="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",_="styles_properties_form--loading--0A0hy",h="styles_properties_form--isLoaded--2czdf"},527041:(e,r,n)=>{n.d(r,{BA:()=>I,D:()=>S,E0:()=>E,I6:()=>R,KY:()=>a,NM:()=>l,SB:()=>p,SM:()=>w,T3:()=>h,TH:()=>d,U1:()=>g,UE:()=>o,Ym:()=>C,_Z:()=>i,cr:()=>u,eO:()=>f,hP:()=>N,hw:()=>y,jG:()=>s,jm:()=>L,ln:()=>_,nM:()=>b,p$:()=>A,ry:()=>O,sI:()=>m,sM:()=>v,uH:()=>T,wY:()=>c});let a="multi_select_list--actionBar--T9qpZ",i="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--menuBarDropdown--Lf9-4",_="multi_select_list--stickyHeader--FkV5r",h="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",g="multi_select_list--headerRow--22Lao",f="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",E="multi_select_list--checkboxColumn--SgkHV",y="multi_select_list--hiddenRightActionColumn--8pCNs",b="multi_select_list--row--nfio-",v="multi_select_list--unselectedCheckbox--KAaaj",T="multi_select_list--rowWithRoundedBorder--im1TP",I="multi_select_list--notFirstRowInSelectedGroup--3m6oH",S="multi_select_list--notLastRowInSelectedGroup--N4myp",A="multi_select_list--emptyState--QQcOE",w="multi_select_list--batchActionCount--R41SC",C="multi_select_list--batchActionClear--7q1Vl",N="multi_select_list--actionButton--D2K4w",L="multi_select_list--longList--Oz-Pp",O="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",R="multi_select_list--highlightedRow--W4ZZn"},232922:(e,r,n)=>{n.d(r,{AL:()=>A,BI:()=>f,Cu:()=>b,DL:()=>p,FH:()=>S,Fp:()=>o,G7:()=>i,Hl:()=>s,L8:()=>C,LH:()=>I,Lk:()=>L,MO:()=>g,Nn:()=>w,TV:()=>m,UD:()=>y,VQ:()=>T,Vs:()=>h,Xg:()=>R,e6:()=>_,fJ:()=>P,hv:()=>v,j7:()=>l,ko:()=>d,nP:()=>c,nr:()=>a,tE:()=>O,vO:()=>u,yH:()=>E,zO:()=>N});let a="voice_users--participantRowHideMenuButton--i7IiO",i="voice_users--secondaryMenuIconButtonContainer--aAh8o",o="voice_users--voiceParticipantAvatar--7mhMG",s="voice_users--overflowRow--dyDR2",l="voice_users--nameAndSuffixContainer--GGoKj",c="voice_users--flexContainer--bWLmT",d="voice_users--flexLeftContainer--EVDRS",u="voice_users--flexRightContainer--Su6EL",p="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",_="voice_users--participantStatus--cnVtZ",h="voice_users--participantRowNewPadding--b0v2c",g="voice_users--participantRow--D4Yar",f="voice_users--hoverable--tq5aE",E="voice_users--containsCursor--Wx6C4",y="voice_users--showSecondaryDropdownOnHover--AWGE6",b="voice_users--currentUserHeaderRow--Jiv6z",v="voice_users--secondaryActionsMenuButton--2emFq",T="voice_users--secondaryActionsMenuButtonActive--QoLJK",I="voice_users--multiplayerUserView--7nAcD",S="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",A="voice_users--voiceUserHeadphonesIcon--wLuPW",w="voice_users--mutedContainer--JL7uZ",C="voice_users--cardButton--xv6Tg",N="voice_users--userSuffixNewShowOnHover--awrl4",L="voice_users--cardRootWithHover--EMdKA text--fontPos11--2LvXf text--_fontBase--QdLsd",O="voice_users--cardRootActive--Jw4N- text--fontPos11--2LvXf text--_fontBase--QdLsd",R="voice_users--secondaryActionsMenuButtonNew--M2k36",P="voice_users--showSecondaryMenuButton--W3cqq"},227510:(e,r,n)=>{n.r(r),n.d(r,{_content:()=>f,codeBlock:()=>o,heading:()=>i,inlineCode:()=>s,lexicalHtmlOnly:()=>a,link:()=>p,linkReadOnly:()=>m,listItem:()=>g,listOl:()=>_,listUl:()=>h,paragraph:()=>l,textBold:()=>c,textItalic:()=>d,textStrikethrough:()=>u});let a="lexical_editor_theme--lexicalHtmlOnly--fR--q",i="lexical_editor_theme--heading--SosJn",o="lexical_editor_theme--codeBlock--TJ-Fu",s="lexical_editor_theme--inlineCode--jE754",l="lexical_editor_theme--paragraph--GBDXU",c="lexical_editor_theme--textBold--tWO8-",d="lexical_editor_theme--textItalic--vqDDt",u="lexical_editor_theme--textStrikethrough--CHepi",p="lexical_editor_theme--link--IC2wz",m="lexical_editor_theme--linkReadOnly--h-PyL",_="lexical_editor_theme--listOl--Ae2L-",h="lexical_editor_theme--listUl--EMQyv",g="lexical_editor_theme--listItem--tt5uP",f="@layer css-modules {\n/** @postcss-export-raw */\n\n.lexical_editor_theme--lexicalHtmlOnly--fR--q {\n  -webkit-user-select: text;\n          user-select: text;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.lexical_editor_theme--heading--SosJn {\n  font-size: 14px;\n  font-weight: bold;\n  margin: 0;\n}\n\n.lexical_editor_theme--codeBlock--TJ-Fu {\n  display: block;\n  background-color: var(--color-bg-secondary);\n  border-radius: 3px;\n  padding: 2px 4px;\n  margin: 0;\n  font-family: 'Roboto Mono';\n  line-height: 1.7;\n  white-space: break-spaces;\n}\n\n.lexical_editor_theme--inlineCode--jE754 {\n  background-color: var(--color-bg-secondary);\n  border-radius: 3px;\n  padding: 0px 4px;\n  margin: 0;\n  font-family: 'Roboto Mono';\n  line-height: 1.7;\n}\n\n.lexical_editor_theme--paragraph--GBDXU {\n  margin: 0;\n}\n\n.lexical_editor_theme--textBold--tWO8- {\n  font-weight: bold;\n}\n\n.lexical_editor_theme--textItalic--vqDDt {\n  font-style: italic;\n}\n\n.lexical_editor_theme--textStrikethrough--CHepi {\n  -webkit-text-decoration: line-through;\n  text-decoration: line-through;\n}\n\n.lexical_editor_theme--link--IC2wz,\n.lexical_editor_theme--linkReadOnly--h-PyL {\n  color: var(--color-text-brand);\n  cursor: pointer;\n  -webkit-text-decoration: none;\n  text-decoration: none;\n}\n\n.lexical_editor_theme--link--IC2wz:hover {\n  -webkit-text-decoration: underline;\n  text-decoration: underline;\n}\n\n.lexical_editor_theme--listOl--Ae2L- {\n  padding: 0;\n  margin: 0;\n  list-style-position: outside;\n  list-style-type: decimal;\n}\n\n.lexical_editor_theme--listUl--EMQyv {\n  padding: 0;\n  margin: 0;\n  list-style-position: outside;\n  list-style-type: disc;\n}\n\n.lexical_editor_theme--listItem--tt5uP {\n  margin-left: 20px;\n}\n}"},240854:(e,r,n)=>{},333571:(e,r,n)=>{n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>i,_J:()=>a,ky:()=>l,lx:()=>d});let a="loading_content--shimmerAnimation--qZjRw",i="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},498055:(e,r,n)=>{n.d(r,{$g:()=>o,F:()=>p,K_:()=>m,Mn:()=>c,OZ:()=>d,PG:()=>i,Pu:()=>s,WL:()=>g,h:()=>_,q5:()=>l,uz:()=>h,yM:()=>u,zr:()=>a});let a="loading_spinner--root--vwYfu",i="loading_spinner--sizeSmall--CN0gS",o="loading_spinner--sizeMedium--J1-SL",s="loading_spinner--sizeLarge--MeIU0",l="loading_spinner--cssBackedSizeSmall--5-Rgv",c="loading_spinner--cssBackedSizeMedium--8gATq",d="loading_spinner--cssBackedSizeLarge--18-ZE",u="loading_spinner--svgContainer--KOY5x",p="loading_spinner--centered--pql-M",m="loading_spinner--matchTextColor--BmEuU",_="loading_spinner--grayColor--GhzPN",h="loading_spinner--blueSpinner--trQsm loading_spinner--root--vwYfu",g="loading_spinner--cssBacked--oIWj-"},29814:(e,r,n)=>{n.d(r,{Ak:()=>_,K5:()=>m,OH:()=>i,Pj:()=>d,c0:()=>c,cQ:()=>l,d6:()=>p,lE:()=>o,m8:()=>u,nf:()=>s,qr:()=>a});let a="footer--footer--JB9iL",i="footer--footerHidden--U2SCb footer--footer--JB9iL",o="footer--replayKeyboardShortcut--Lqop8",s="footer--replayButtonContainer--XR1gy",l="footer--replayButton--fKqPi footer--pill--a9ne7",c="footer--debugToolsContainer--WeB-G",d="footer--frameCounterContainer--oMKsY",u="footer--frameCounterResponsive--XW-b7 footer--frameCounter--5AU-l footer--pill--a9ne7",p="footer--frameCounterText--hv93-",m="footer--footerOptionsMenuSeparator--5rW7E",_="footer--embedFrameCounterText--OS77U"},603826:(e,r,n)=>{n.d(r,{CK:()=>l,Cu:()=>T,Dv:()=>p,FR:()=>a,SC:()=>d,Tr:()=>f,VA:()=>u,Vj:()=>g,W0:()=>m,WM:()=>b,XK:()=>i,ag:()=>h,gO:()=>_,m2:()=>o,m4:()=>c,ol:()=>v,q6:()=>y,vS:()=>E,yl:()=>s});let a="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",i="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--gridView--ICika",c="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",d="generic_tile_DEPRECATED--subtitleContainer--y18L5",u="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",p="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",m="generic_tile_DEPRECATED--settings--cInfj",_="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",h="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",g="generic_tile_DEPRECATED--modifiedMetadata--AphD2",f="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",E="generic_tile_DEPRECATED--topLeftControls--hrfPC",y="generic_tile_DEPRECATED--bottomControls--Ro4JX",b="generic_tile_DEPRECATED--facepile--MZY4B",v="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",T="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},755571:(e,r,n)=>{n.d(r,{Pf:()=>o,bb:()=>i,zr:()=>a});let a="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",i="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},99436:(e,r,n)=>{n.d(r,{al:()=>i,pk:()=>o,zr:()=>a});let a="secondary_toolbelt--root--G3eFJ",i="secondary_toolbelt--rootPositioning--2vJj8",o="secondary_toolbelt--secondaryToolbeltContainer--mkKf6"},728075:(e,r,n)=>{n.d(r,{$C:()=>g,$b:()=>ek,$r:()=>m,A4:()=>ed,AN:()=>ee,Af:()=>eu,Ah:()=>$,B8:()=>eH,B9:()=>B,DE:()=>en,DN:()=>eO,Dd:()=>x,De:()=>d,Dr:()=>l,FQ:()=>eP,JI:()=>H,JT:()=>_,K4:()=>eF,L5:()=>ej,LL:()=>e_,Me:()=>h,N0:()=>I,OF:()=>eK,PN:()=>i,PQ:()=>eV,Po:()=>S,Pp:()=>G,Py:()=>k,Q1:()=>eG,Q2:()=>ew,QE:()=>eY,QQ:()=>s,Qw:()=>N,R2:()=>ef,R3:()=>c,RO:()=>L,Rv:()=>e$,SW:()=>U,Sb:()=>C,T2:()=>eD,Td:()=>X,Tn:()=>ez,U8:()=>T,Uw:()=>W,Vm:()=>o,Wn:()=>f,Ws:()=>el,X8:()=>eb,Z6:()=>b,Zv:()=>eW,Zz:()=>eB,_M:()=>ec,_P:()=>ep,_x:()=>z,a6:()=>K,aT:()=>eM,az:()=>eI,bu:()=>O,c6:()=>eE,dV:()=>p,eN:()=>eT,eg:()=>a,ev:()=>ea,fU:()=>eg,fV:()=>Z,fh:()=>eS,g$:()=>j,gn:()=>eo,h3:()=>eN,i4:()=>eR,iU:()=>eC,is:()=>w,jR:()=>E,jc:()=>ey,k0:()=>R,k7:()=>V,mO:()=>ev,n7:()=>em,nG:()=>Q,nL:()=>ex,o$:()=>eU,oK:()=>F,oW:()=>P,p5:()=>eh,pZ:()=>eA,qH:()=>J,qm:()=>A,qt:()=>et,t1:()=>M,vD:()=>Y,vY:()=>ei,vh:()=>y,w3:()=>u,wO:()=>q,wl:()=>es,xr:()=>v,xu:()=>er,yG:()=>eL,zt:()=>D});let a="#e5e5e5",i="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",p="#007be5",m="#9747ff",_="#ff24bd",h="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(179, 179, 179, 1)",v="rgba(230, 230, 230, 1)",T="rgba(217, 217, 217, 1)",I="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",A="rgba(255, 166, 41, 1)",w="rgba(252, 209, 156, 1)",C="rgba(255, 205, 41, 1)",N="rgba(255, 232, 163, 1)",L="rgba(20, 174, 92, 1)",O="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",k="rgba(228, 204, 255, 1)",M="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(230, 230, 230, 1)",U="rgba(255, 175, 163, 1)",B="rgba(255, 196, 112, 1)",G="rgba(255, 217, 102, 1)",V="rgba(133, 224, 163, 1)",H="rgba(128, 202, 255, 1)",z="rgba(217, 184, 255, 1)",K="rgba(255, 189, 242, 1)",W="rgba(230, 230, 230, 1)",j="rgba(151, 151, 151, 1)",Y="rgba(255, 153, 248, 1)",$="rgba(255, 174, 79, 1)",q="rgba(255, 238, 0, 1)",X="rgba(134, 250, 22, 1)",J="rgba(111, 255, 246, 1)",Z="rgba(179, 143, 255, 1)",Q="rgba(255, 255, 255, 1)",ee="rgba(175, 175, 175, 1)",et="rgba(255, 160, 249, 1)",er="rgba(255, 184, 104, 1)",en="rgba(255, 242, 52, 1)",ea="rgba(174, 255, 97, 1)",ei="rgba(126, 255, 247, 1)",eo="rgba(188, 155, 255, 1)",es="rgba(255, 255, 255, 1)",el="rgba(17, 17, 17, 1)",ec="rgba(117, 117, 117, 1)",ed="rgba(217, 217, 217, 1)",eu="rgba(224, 62, 26, 1)",ep="rgba(251, 188, 182, 1)",em="rgba(247, 151, 34, 1)",e_="rgba(255, 196, 112, 1)",eh="rgba(243, 193, 27, 1)",eg="rgba(249, 223, 144, 1)",ef="rgba(25, 143, 81, 1)",eE="rgba(161, 232, 185, 1)",ey="rgba(12, 140, 233, 1)",eb="rgba(168, 215, 250, 1)",ev="rgba(138, 56, 245, 1)",eT="rgba(214, 182, 251, 1)",eI="rgba(255, 255, 255, 1)",eS="rgba(102, 119, 153, 1)",eA="rgba(242, 72, 34, 1)",ew="rgba(255, 166, 41, 1)",eC="rgba(255, 205, 41, 1)",eN="rgba(20, 174, 92, 1)",eL="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eR="rgba(255, 36, 189, 1)",eP="rgba(230, 230, 230, 1)",eD="rgba(175, 188, 207, 1)",ek="rgba(252, 163, 151, 1)",eM="rgba(255, 196, 112, 1)",eF="rgba(247, 209, 95, 1)",ex="rgba(121, 210, 151, 1)",eU="rgba(124, 196, 248, 1)",eB="rgba(209, 168, 255, 1)",eG="rgba(253, 156, 224, 1)",eV="rgba(230, 230, 230, 1)",eH="rgba(41, 39, 52, 1)",ez="rgba(250, 248, 245, 1)",eK="rgba(63, 201, 156, 1)",eW="rgba(200, 115, 74, 1)",ej="rgba(241, 188, 62, 1)",eY="rgba(196, 213, 106, 1)",e$="#f8f8f8"},479760:(e,r,n)=>{n.d(r,{ss:()=>a});let a=11},786175:(e,r,n)=>{n.d(r,{compareChangesModalPadding:()=>p,curatorTertiaryModalZ:()=>h,defaultCornerRadius:()=>u,designToolbarHeight:()=>l,helpWidgetSizePlusMargin:()=>s,modalZ:()=>f,rulerThickness:()=>d,scrollBarXHeight:()=>a,scrollBarYWidth:()=>i,secondaryModalZ:()=>g,stylePickerMaxHeight:()=>c,templateModalTeamName:()=>_,topBarZ:()=>m,trackPadding:()=>o});let a="6px",i="6px",o="2px",s="64px",l="48px",c="300px",d="20px",u="2px",p="48px",m=3,_=2,h=7,g=9,f=10},475869:(e,r,n)=>{n.d(r,{FX:()=>s,QU:()=>i,Us:()=>a,ZV:()=>l,rz:()=>o});let a="40px",i="12px",o="16px",s="16px",l="40px"},143628:(e,r,n)=>{n.d(r,{B7:()=>m,E3:()=>a,H0:()=>d,Kk:()=>o,My:()=>p,Nl:()=>c,Oy:()=>i,Xy:()=>l,hR:()=>u,m$:()=>s});let a="visual_bell--base--Q4n07",i="visual_bell--fplBase--oYGmj",o="visual_bell--icon--rn9Ns",s="visual_bell--iconUI3Color--1jcVh",l="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",c="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",d="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",u="visual_bell--progressIcon--RYZye",p="visual_bell--slidesVisualBell--arXfI",m="visual_bell--slidesVisualBellIcon--LAt8o"},887835:(e,r,n)=>{n.d(r,{Kv:()=>p,Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>a,Xr:()=>m,f$:()=>l,k8:()=>o,wH:()=>i});let a="slides_color_controls--panelToggle--kL4qJ",i="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM",p="slides_color_controls--renameColorInput--7gA0L raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",m="slides_color_controls--gradientControlContainer--1GsYu"},639798:(e,r,n)=>{n.d(r,{D9:()=>a,ZS:()=>o,oO:()=>i});let a="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",i="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},599095:(e,r,n)=>{n.d(r,{Wh:()=>i,ec:()=>a});let a="menu_selector--flexColumn--KvuRu",i="menu_selector--flexRow--j-QSP"},787735:(e,r,n)=>{},731560:(e,r,n)=>{n.d(r,{$d:()=>I,$y:()=>p,B4:()=>F,BE:()=>B,BN:()=>P,Bx:()=>y,F0:()=>h,FK:()=>g,ID:()=>G,Lt:()=>i,SN:()=>D,Sk:()=>C,WX:()=>v,Wq:()=>U,ZJ:()=>S,Zh:()=>_,ac:()=>b,cP:()=>k,cq:()=>T,dP:()=>M,dR:()=>a,eB:()=>A,gz:()=>w,i0:()=>l,iD:()=>O,ll:()=>f,pN:()=>d,qs:()=>c,rh:()=>x,sD:()=>s,t3:()=>L,uh:()=>R,vu:()=>o,vy:()=>u,xI:()=>N,yG:()=>m,z6:()=>E});let a="toolbar--focusVisibleHover--yhCHK",i="toolbar--select--nPSf7",o="toolbar--active--gPMV7",s="toolbar--hand--aTLiK",l="toolbar--animate--Ykugz",c="toolbar--universalInsertCollage--8Mfz2",d="toolbar--universalInsert--zBZ5L",u="toolbar--universalInsertGoogleClassroom--lmwPr",p="toolbar--fakeButtonContainer--6x-IE",m="toolbar--toolbarFakeButtonTarget--ezcU0",_="toolbar--passthruLayout--fN4I1",h="toolbar--horizontalButton--fku14",g="toolbar--horizontalButtonDisabled--dTdTJ",f="toolbar--pointerEventsDisabled--O-23A",E="toolbar--tool--gLSDg",y="toolbar--toolIconIsDragging--I05Ql",b="toolbar--shapeAndStickyShadow--fBa-X",v="toolbar--hasDropShadow--Jng2W",T="toolbar--easeInDltItemFill--hEoHS",I="toolbar--shapeSpawnAnimation--l7z9o",S="toolbar--customAnimatedStickyV3--nF1jr",A="toolbar--bottomStickyV3--9S3Np toolbar--stickyAnimationPropertiesV3--kAjJ1",w="toolbar--middleStickyV3--3UJRP toolbar--stickyAnimationPropertiesV3--kAjJ1",C="toolbar--topStickyV3--AcNdy toolbar--stickyAnimationPropertiesV3--kAjJ1",N="toolbar--middleStickyContainerV3--qT3ep toolbar--backgroundStickyV3--HKPKb",L="toolbar--bottomStickyContainerV3--NYDOa toolbar--backgroundStickyV3--HKPKb",O="toolbar--fakeStickyContainer--AK9jp toolbar--backgroundStickyV3--HKPKb",R="toolbar--stickyOuterV3--ooJsb",P="toolbar--stickyCurlV3--hoyCr",D="toolbar--stickyMaskContainerV3--f2inx",k="toolbar--stickyMaskDynamicV3--LlmXc",M="toolbar--stickyMaskStaticV3--7ThBF",F="toolbar--showCurlV3--enAx7",x="toolbar--noTransition---ULgx",U="toolbar--stickyBaseV3--c-nvN",B="toolbar--reverse--spDLs",G="toolbar--fakeStickyV3--j8iUl toolbar--stickyAnimationPropertiesV3--kAjJ1"},931862:(e,r,n)=>{n.d(r,{Ay:()=>h});var a=n(196008),i=n(571304),o=n(52813),s=n(742308),l=n(231081),c=n(682394),d=n(665819),u=n(530396),p=n(579291),m=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(m||{}),_=(e=>(e.SHED_LOAD="shed-load",e.VIEW_ERRORS="view-errors",e))(_||{});class h{constructor(e,r,n,a,o={},s,c,d,u){this.viewRegistry=r,this.uriParams=n,this.clientOptions=o,this.allowedPreloadedViews=d,this.authArgs={userId:n.userId,anonymousUserId:n.anonUserId},this.connection=new l.A(n,a,this.authArgs,this.emitter,o,s,c),this.connection.addObserver(this),this.session=new i.A(this.authArgs,e,r,this.emitter,(e,r,n)=>{this.requestPaginationChange(e,r,n)},()=>this.connection.isInitial(),e=>{this.clientOptions.retryErroredViewSubscriptions&&this.retrySubscription(e,"view-errors")},e=>{let r=this.subscriptionRetries.get(e);return r?(clearTimeout(r.retryTimer),this.subscriptionRetries.delete(e),r.backoff.attemptsSoFar()):0},u,o.shouldBubbleUpNonNullableResultErrors,o.errorsLoggedForAnalyticsFraction,o.useUnitTestObjectStore),this.addEventListener(this.healthListener.bind(this)),this.registerPreloadedViews()}authArgs;transactionId=1;syncDelayForDebugging=0;syncRequests=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];lastCloseEvent=void 0;lastCloseTs=void 0;preloadedViews=[];preloadedViewArgs=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];subscriptionRetries=new Map;resubscribeTimeouts=new Map;cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}get userId(){return this.authArgs.userId}addEventListener(e){return this.emitter.addListener(e)}removeEventListener(e){return this.emitter.removeListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}registerPreloadedViews(){for(let[e,r]of Object.entries(this.uriParams.preloadedViews)){if(!this.viewRegistry.get(e))continue;let n=this.allowedPreloadedViews?.find(r=>r._name===e);n&&(r.hash===n._hash||"development"===r.hash)?(this.preloadedViews.push(n),this.preloadedViewArgs.push(r.args),this.session.subscribe(n,r.args,()=>{}),this.preloadViewKeys.add((0,d.J)(e,r.args))):this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:e,args:r.args})}}emitInitialEvents(){for(let e=0;e<this.preloadedViews.length;e++){let r=this.preloadedViews[e],n=this.preloadedViewArgs[e],i=this.getViewPriority(r,a.ty.Initial);this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:r,args:n,priority:i,loadType:a.ty.Initial}),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:r,args:n,priority:i,loadType:a.ty.Initial})}}sendExistingSubscriptions(){for(let[e,r]of this.resubscribeTimeouts)clearTimeout(r);if(this.resubscribeTimeouts.clear(),this.connection.isInitial())for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n,status:i,viewDef:o}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions())){let s=(0,d.J)(o.name,r);if(this.connection.isInitial()&&this.preloadViewKeys.has(s))continue;let l=this.session.getViewLoadType(s);if(this.clientOptions.shouldSplayLoadedViews&&!this.connection.isInitial()&&this.lastCloseTs&&performance.now()-this.lastCloseTs<3e4){let s=(0,d.J)(o.name,r),c=()=>{if(!this.connection.isConnected()||!this.session.hasActiveSubscriptions(o.name,r))return;let a=this.subscriptionRetries.get(s);a?.retryTimer||this.requestSubscription(e,r,l,n)};if("loaded"!==i)c();else{let e=function(e){switch(e){case a.aG.P0:return 0;case a.aG.P1:return 5e3*Math.random();case a.aG.P2:return 2e4*Math.random()+1e3;default:return 6e4*Math.random()+1e3}}(o.getPriority(a.ty.Initial));0===e?c():this.resubscribeTimeouts.set(s,setTimeout(c,e))}}else this.requestSubscription(e,r,l,n)}}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.authArgs.sessionId=e.sessionId,this.authArgs.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncRequests.values())this.requestSync(e);break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"syncFail":let r=this.syncRequests.get(e.transactionId);if(r){let n=r?.getRetryAfterMs();if(!n){this.handleAfterOptimisticUpdateResolved(e.transactionId);return}(0,o.QI)(!r.retryTimeout,"Already scheduled retry for sync request."),r.retryNumber++,r.retryTimeout=setTimeout(()=>{r.retryTimeout=null,this.requestSync(r)},n)}else(0,o.QI)(!1,"Received syncFail for unknown sync request"),this.handleAfterOptimisticUpdateResolved(e.transactionId);break;case"synced":let n=this.syncRequests.get(e.transactionId);n&&(n.successCallback(),(0,o.QI)(!n.retryTimeout,"Sync request completed successfully while having a retry scheduled. This should never happen."));break;case"viewLoaded":let i=this.getViewResultByViewNameAndArgs(e.viewName,e.args);this.emitEvent({type:"DONE",viewName:e.viewName,args:e.args,clientStatus:i?.status});break;case"viewSubscriptionFailed":"shed-load"===e.errorCode?(this.subscriptionRetries.has(e.liveViewKey)||this.reportSubscriptionError(e.liveViewKey,e.errorCode),this.retrySubscription(e.liveViewKey,"shed-load")):(this.emitter.emit({type:"ERROR",error:new a.rT(e.errorCode)}),this.reportSubscriptionError(e.liveViewKey,e.errorCode),this.session.cleanupFailedSubscription(e.liveViewKey))}}onConnectionOpen(){this.sendExistingSubscriptions()}onConnectionClose(e){this.lastCloseEvent=e,this.lastCloseTs=performance.now(),this.clearSubscriptionRetries()}requestSubscription(e,r,n,a){let i={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:a},o=this.getViewPriority(e,n);this.connection.isConnected()&&(this.connection.send(i),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,priority:o,loadType:n,traceId:a}))}requestPaginationChange(e,r,n){let a={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:r,count:n.count,paginationArgs:n,viewKey:e};this.connection.isConnected()&&this.connection.send(a)}subscribeBase(e,r,n,i){let o=this.session.hasActiveSubscriptions(e._name,r),s=this.session.subscribe(e,r,n,i);return o||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,priority:this.getViewPriority(e,a.ty.Initial),args:r,traceId:i,loadType:a.ty.Initial}),this.requestSubscription(e,r,a.ty.Initial,i)),s}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{if(e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()){this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args});let r=(0,d.J)(e.view._name,e.args);clearTimeout(this.subscriptionRetries.get(r)?.retryTimer),this.subscriptionRetries.delete(r),this.resubscribeTimeouts.has(r)&&(clearTimeout(this.resubscribeTimeouts.get(r)),this.resubscribeTimeouts.delete(r))}},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}getViewResultByViewNameAndArgs(e,r){return this.session.getViewResultByViewNameAndArgs(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}getViewPriority(e,r){return this.viewRegistry.get(e._name)?.getPriority(r)??a.$M}subscribe(e,r,n,a){let i=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(i={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,i,n,a);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if(this.clientOptions.checkPotentiallyMissingOptimisticMutations){if("create"===e||"update"===e)for(let[n,a]of Object.entries(r))for(let i in a){let o=a[i];if("create"===e&&!o.uuid)continue;let s=!1;for(let e of this.pendingMutationList)for(let[r,a]of Object.entries(e))if(n===r)for(let e of Object.values(a.instances))e.uuid&&o.uuid&&e.uuid===o.uuid?s=!0:e.id===i&&(s=!0);if(!s&&"update"===e){let e=o.uuid?this.session.stores[n]?.queries.instanceStatesByUuid.get(o.uuid):this.session.stores[n]?.queries.instanceStates.get(i);e&&(s=Object.keys(o).every(r=>JSON.stringify(o[r])===JSON.stringify(e.serverFields[r])))}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:s,objectName:n,optimisticInstance:o,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}else if("delete"===e)for(let[n,a]of Object.entries(r))for(let i of Object.keys(a)){let a=!1;for(let e of this.pendingMutationList)for(let[r,o]of Object.entries(e))if(n===r)for(let e of Object.values(o.queries))"error"in e||!1!==e.results[i]||(a=!0);this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:a,objectName:n,optimisticInstance:null,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}}}async applyMutations(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutations(i,e,n),d=new Set;for(let e of c)e instanceof p.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");this.handleBeforeOptimisticUpdateApplied(i);try{a=await r}catch(r){throw this.session.removeShadowMutations(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let u=!1;try{this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:i}),await this.sync(i,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:i,mutationType:n}),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.clientOptions.shouldChangeOptimisticMutationRevertOrder?this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutations(i,e,u)}):this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(i,e,u)}),u&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(i)}return a}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let[n,a]of Object.entries(e))for(let e of Object.keys(a))r.push(this.getIdFromUuid(n,e));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let a;let i=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutationsWithUUID(i,e,n);this.handleBeforeOptimisticUpdateApplied(i);let d=new Set;for(let e of c)e instanceof p.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");try{a=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(i,e,!1),this.handleAfterOptimisticUpdateResolved(i),r}let u=!1;try{"create"===n&&0===Object.keys(l).length?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):(this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:i}),await this.sync(i,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:i,mutationType:"update"===n?"uuid_update":"delete"===n?"uuid_delete":"uuid_computed_create"})),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(i,e,u)}),u&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(i)}return a}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e){this.connection.isConnected()&&(this.connection.send(e.toPayload()),this.emitter.emit({type:"SYNC_STARTED",transactionId:e.transactionId,mutatedObjects:e.objectNameToQueryIds?[...e.objectNameToQueryIds.keys()]:[]}))}async sync(e=this.transactionId++,r,n,a){let[i,s]=(0,o.dS)(),l=new u.Q(e,s,r,n,a);this.syncRequests.set(e,l),this.requestSync(l),await i,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),this.syncRequests.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}retrySubscription(e,r){let n=this.session.getActiveSubscription(e);if(!n)return;this.subscriptionRetries.has(e)||this.subscriptionRetries.set(e,{backoff:this.getBackoff(this.getViewPriority(n.viewRef,a.ty.Initial))});let i=this.subscriptionRetries.get(e);if(!i.retryTimer){if(i.backoff.shouldAttempt()){let n=i.backoff.nextBackoffMs();i.retryTimer=setTimeout(()=>{i.retryTimer=void 0;let n=this.session.getActiveSubscription(e);if(!n)return;"view-errors"===r&&this.connection.send({messageType:"unsubscribe",viewName:n.viewRef._name,args:n.args});let o="view-errors"===r?a.aG.P3:this.getViewPriority(n.viewRef,a.ty.Retry);this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:n.viewRef,priority:o,loadType:a.ty.Retry,args:n.args,traceId:n.traceId}),this.requestSubscription(n.viewRef,n.args,a.ty.Retry,n.traceId)},n)}else this.subscriptionRetries.delete(e)}}getBackoff(e){let r;let n=this.clientOptions.subscriptionRetryBackoffConfigByPriority;return r=n[e]?n[e]:n.default,new o._c(r)}clearSubscriptionRetries(){for(let e of this.subscriptionRetries.values())clearTimeout(e.retryTimer);this.subscriptionRetries.clear()}reportSubscriptionError(e,r){this.emitter.emit({type:"SUBSCRIPTION_ERROR",errorCode:r,liveViewKey:e})}emitEvent(e){this.emitter.emit(e)}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let[a,i]of Object.entries(e))"loading"===i.status&&(r[a]=i),"errors"===i.status&&(n[a]=i);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),setViewResultForDebugging:this.session.setViewResultForDebugging.bind(this.session),unsetViewResultForDebugging:this.session.unsetViewResultForDebugging.bind(this.session),...this.connection.debug}}}},860676:(e,r,n)=>{n.d(r,{Agb:()=>a.Agb,Go1:()=>a.Go1,QKp:()=>a.QKp,TOI:()=>a.TOI,_YF:()=>a._YF,bUL:()=>a.bUL,q42:()=>a.q42,y4I:()=>a.y4I,zRx:()=>a.zRx});var a=n(743168)},743168:(e,r,n)=>{n.d(r,{Agb:()=>a.Agb,Go1:()=>a.Go1,QKp:()=>a.QKp,TOI:()=>a.TOI,_YF:()=>a._YF,bUL:()=>a.bUL,q42:()=>a.q42,y4I:()=>a.y4I,zRx:()=>i.zRx}),n(95331),n(421470),n(74729),n(112535),n(893171);var a=n(252066),i=n(773633)},191531:(e,r,n)=>{n.d(r,{$U:()=>R,C7:()=>o,Fh:()=>i,Jj:()=>A,KC:()=>I,OL:()=>g,QK:()=>P,QR:()=>l,Sh:()=>E,TO:()=>w,X5:()=>u,Xn:()=>h,_D:()=>a,aL:()=>s,bp:()=>_,gR:()=>v,lc:()=>d,nf:()=>m,nr:()=>f,qT:()=>O,qm:()=>p,rD:()=>c,s$:()=>D,w_:()=>C,xX:()=>L,yo:()=>S,zx:()=>T});var a=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_USE_FIGMA_AI="ORG::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="ORG::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.CAN_USE_FIGMA_COLLAB_AI="ORG::CAN_USE_FIGMA_COLLAB_AI",e.CAN_USE_FIGMA_COLLAB_AI_IGNORE_AI_TOGGLE="ORG::CAN_USE_FIGMA_COLLAB_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="ORG::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(a||{}),i=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_DELETE="TEAM::CAN_DELETE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_USE_FIGMA_AI="TEAM::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="TEAM::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.CAN_USE_FIGMA_COLLAB_AI="TEAM::CAN_USE_FIGMA_COLLAB_AI",e.CAN_USE_FIGMA_COLLAB_AI_IGNORE_AI_TOGGLE="TEAM::CAN_USE_FIGMA_COLLAB_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="TEAM::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(i||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_COOPER_FILE="FOLDER::CAN_CREATE_COOPER_FILE",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SITES_FILE="FOLDER::CAN_CREATE_SITES_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_CREATE_FIGMAKE_FILE="FOLDER::CAN_CREATE_FIGMAKE_FILE",e.CAN_MODIFY_ROLES="FOLDER::CAN_MODIFY_ROLES",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRANSFER_COPY="FOLDER::CAN_TRANSFER_COPY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e.SHOULD_USE_CONNECTED_PLAN_USER_DESIGN="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DESIGN",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM",e.SHOULD_USE_CONNECTED_PLAN_USER_SLIDES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SLIDES",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER_SITES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SITES",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGMAKE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGMAKE",e.SHOULD_USE_CONNECTED_PLAN_USER="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER",e.CAN_CONNECT="FOLDER::CAN_CONNECT",e.CAN_VIEW_LIMITED_INFO="FOLDER::CAN_VIEW_LIMITED_INFO",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e.SHOULD_USE_CONNECTED_PLAN_USER="REPO::SHOULD_USE_CONNECTED_PLAN_USER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_EXPORT="FILE::CAN_EXPORT",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_RESTORE_TO_OTHER_FOLDERS="FILE::CAN_RESTORE_TO_OTHER_FOLDERS",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_DEV_MODE_DEMO_FILE="FILE::CAN_USE_DEV_MODE_DEMO_FILE",e.CAN_VIEW_COMPONENT_BROWSER="FILE::CAN_VIEW_COMPONENT_BROWSER",e.CAN_CREATE_CODE_CONNECT="FILE::CAN_CREATE_CODE_CONNECT",e.CAN_CONSUME_CODE_CONNECT="FILE::CAN_CONSUME_CODE_CONNECT",e.CAN_VIEW_ANNOTATIONS="FILE::CAN_VIEW_ANNOTATIONS",e.CAN_VIEW_ANNOTATIONS_MEGADOT="FILE::CAN_VIEW_ANNOTATIONS_MEGADOT",e.CAN_EDIT_ANNOTATIONS="FILE::CAN_EDIT_ANNOTATIONS",e.CAN_ACCESS_TEXTURE_MODE="FILE::CAN_ACCESS_TEXTURE_MODE",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_BASE="FILE::CAN_USE_FIGMA_AI_BASE",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="FILE::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FIGMAKE_AI="FILE::CAN_USE_FIGMAKE_AI",e.CAN_USE_FIGMAKE_AI_BASE="FILE::CAN_USE_FIGMAKE_AI_BASE",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_USE_SLIDES_DESIGN_TOGGLE="FILE::CAN_USE_SLIDES_DESIGN_TOGGLE",e.CANNOT_PUBLISH_TO_COMMUNITY="FILE::CANNOT_PUBLISH_TO_COMMUNITY",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e.CAN_CREATE_BRANCH="FILE::CAN_CREATE_BRANCH",e.CAN_EDIT_OR_ACCESS_FULL_DEV_MODE="FILE::CAN_EDIT_OR_ACCESS_FULL_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER="FILE::SHOULD_USE_CONNECTED_PLAN_USER",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FILE::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS="FILE::MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS",e.CAN_RUN_EXTENSIONS="FILE::CAN_RUN_EXTENSIONS",e.CAN_EDIT_CMS_STRUCTURE="FILE::CAN_EDIT_CMS_STRUCTURE",e.CAN_PUBLISH_SITE="FILE::CAN_PUBLISH_SITE",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),p=(e=>(e.CAN_MANAGE="OAUTH_APP::CAN_MANAGE",e.CAN_USE="OAUTH_APP::CAN_USE",e))(p||{}),m=(e=>(e.CAN_VIEW="LITMUS_PROJECT::CAN_VIEW",e))(m||{}),_=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(_||{}),h=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="PLAN::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="PLAN::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_UPGRADE_AUTO_PATHWAY_CONTENT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_CONTENT",e.CAN_UPGRADE_COLLABORATOR="PLAN::CAN_UPGRADE_COLLABORATOR",e.CAN_UPGRADE_DEVELOPER="PLAN::CAN_UPGRADE_DEVELOPER",e.CAN_UPGRADE_EXPERT="PLAN::CAN_UPGRADE_EXPERT",e.CAN_UPGRADE_CONTENT="PLAN::CAN_UPGRADE_CONTENT",e.CAN_USE_FILE_VIEW_HISTORY="PLAN::CAN_USE_FILE_VIEW_HISTORY",e.NEED_UPGRADE_COLLABORATOR="PLAN::NEED_UPGRADE_COLLABORATOR",e.NEED_UPGRADE_DEVELOPER="PLAN::NEED_UPGRADE_DEVELOPER",e.NEED_UPGRADE_EXPERT="PLAN::NEED_UPGRADE_EXPERT",e.NEED_UPGRADE_CONTENT="PLAN::NEED_UPGRADE_CONTENT",e.CAN_CONNECT="PLAN::CAN_CONNECT",e.CAN_VIEW_INVOICES="PLAN::CAN_VIEW_INVOICES",e.IS_ELIGIBLE_PROVISIONAL_ACCESS_COLLABORATOR="PLAN::IS_ELIGIBLE_PROVISIONAL_ACCESS_COLLABORATOR",e.IS_ELIGIBLE_PROVISIONAL_ACCESS_DEVELOPER="PLAN::IS_ELIGIBLE_PROVISIONAL_ACCESS_DEVELOPER",e.IS_ELIGIBLE_PROVISIONAL_ACCESS_EXPERT="PLAN::IS_ELIGIBLE_PROVISIONAL_ACCESS_EXPERT",e.IS_ELIGIBLE_PROVISIONAL_ACCESS_CONTENT="PLAN::IS_ELIGIBLE_PROVISIONAL_ACCESS_CONTENT",e.CAN_SETUP_GITHUB_APP="PLAN::CAN_SETUP_GITHUB_APP",e.CAN_CONSUME_GITHUB_APP="PLAN::CAN_CONSUME_GITHUB_APP",e))(h||{}),g=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(g||{}),f=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e.CAN_SELL_RESOURCES_ON_COMMUNITY="PROFILE::CAN_SELL_RESOURCES_ON_COMMUNITY",e))(f||{}),E=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(E||{});let y=["FOLDER::CAN_VIEW","FOLDER::CAN_DISCOVER","FOLDER::CAN_EDIT","FOLDER::CAN_MODIFY_ROLES","FOLDER::CAN_CREATE_DESIGN_FILE","FOLDER::CAN_CREATE_FIGJAM_FILE","FOLDER::CAN_CREATE_SLIDES_FILE"];[...y],[...y];var b=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(b||{});let v=100,T=300,I=900,S=999;var A=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.OAUTH_APP="OAUTH_APP",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.LITMUS_PROJECT="LITMUS_PROJECT",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(A||{}),w=(e=>(e.TEST_FLAG="test_flag",e.CAMPFIRE="campfire",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.FC_GENERAL="fc_general",e.PV2_LOADABLE_EDITOR_LICENSE_TYPE_MAPPING="pv2_loadable_editor_license_type_mapping",e.FILE_CANVAS_MENTION_CAN_ACCESS="file_canvas_mentions_can_access",e.COMMENT_MENTIONS_CAN_ACCESS="comment_mentions_can_access",e.SITES="sites",e.SITES_K12_GOOGLE_ORG_ENABLED="sts_k12_google_org_enabled",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.ORG_FILE_EXPORT_SETTING="org_file_export_setting",e.FC_PLAN_ENABLED="fc_plan_enabled",e.COOPER="cooper",e.LITMUS="dt_litmus",e.DEV_MODE_DEMO_FILE="dev_mode_demo_file",e.PRODUCT_TRIALS_LG="product_trials_lg",e.PV2_DEPRECATE_SHOULD_USE_CONNECTED_PLAN_DEV_MODE="pv2_deprecate_should_use_connected_plan_dev_mode",e.PRODUCT_TRIALS_FIGMAKE="product_trials_figmake",e.SLIDES_STARTER_TEAM_DESIGN_TOGGLE="slides_starter_team_design_toggle",e.LITMUS_GUEST_ACCESS="litmus_guest_access",e.BAKE="bake",e.BAKE_CHECK_PLAN="bake_check_plan",e.BAKE_PLAN_ENABLED="bake_plan_enabled",e.CMTY_MAKE_DISCOVERY="cmty_make_discovery",e.BAKE_STARTER_LIMIT="bake_starter_limit",e.BAKE_STARTER_PAYWALL="bake_starter_paywall",e.BAKE_MONETIZATION_PLAN="bake_monetization_plan",e.CE_IL_ROOT="ce_il_root",e.STS_STARTER_ENABLED="sts_starter_enabled",e.DENY_COLLAB_WITHOUT_PRODUCTS_ENABLED="deny_collab_without_products_enabled",e))(w||{}),C=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(C||{}),N=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.BILLING_EXPERIENCE="billing_experience",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e.DS_ECOSYSTEMS="ds_ecosystems",e.BUZZ="buzz",e.SITES="sites",e.ACTIVATION="activation",e.AI_FOR_PRODUCTION="ai_for_production",e.TEXT_AND_VECTOR="text_and_vector",e.CMS="cms",e))(N||{});let L=3,O=6,R=15;var P=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e.PLAN_DENY_CAN_CONNECT_IF_AT_CONNECTION_LIMIT="plan_deny_can_connect_if_at_connection_limit",e.FOLDER_CREATE_FILE_DENY_FOR_TRASHED_FOLDER="folder_create_file_deny_for_trashed_folder",e.FOLDER_CREATE_FILE_DENY_PRODUCT_DISABLED_BY_ORG="folder_create_file_deny_product_disabled_by_org",e.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS="folder_create_file_deny_unlicensed_users",e.FOLDER_CREATE_SITE_FILE_DENY_K12_ORG="folder_create_site_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_PLAN_NOT_ENABLED="folder_create_figmake_file_deny_plan_not_enabled",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_K12_ORG="folder_create_figmake_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STARTER_TEAM="folder_create_figmake_file_deny_starter_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STUDENT_TEAM="folder_create_figmake_file_deny_student_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_AI_DISABLED="folder_create_figmake_file_deny_ai_disabled",e.FOLDER_EDIT_DENY_EXTERNAL_RESTRICTED_USERS="folder_edit_deny_external_restricted_users",e.FOLDER_VIEW_DENY_ANOTHER_USERS_DRAFTS="folder_view_deny_another_users_drafts",e.FOLDER_DENY_DELETED="folder_deny_deleted",e.FOLDER_DENY_ORG_MFA_RESTRICTED_GUESTS="folder_deny_org_mfa_restricted_guests",e.FOLDER_DENY_UNVALIDATED_USER_EMAIL="folder_deny_unvalidated_user_email",e.FILE_DENY_EDIT_SITE_FILE_K12_ORG="file_deny_edit_site_file_k12_org",e.FILE_DENY_EDIT_FIGMAKE_FILE_K12_ORG="file_deny_edit_figmake_file_k12_org",e.FILE_DENY_EDIT_SITE_FILE_SITES_DISABLED="file_deny_edit_site_file_sites_disabled",e.FILE_DENY_EDIT_FIGMAKE_FILE_FIGMAKE_DISABLED="file_deny_edit_figmake_file_figmake_disabled",e.FILE_DENY_EDIT_COOPER_FILE_COOPER_DISABLED="file_deny_edit_cooper_file_cooper_disabled",e.FILE_DENY_EDIT_FIGMAKE_FILE_STARTER="file_deny_edit_figmake_file_starter",e.FILE_DENY_EDIT_FIGMAKE_FILE_STUDENT="file_deny_edit_figmake_file_student",e.FILE_DENY_EDIT_SITE_FILE_STARTER="file_deny_edit_site_file_starter",e.FILE_DENY_EDIT_SITE_FILE_STUDENT="file_deny_edit_site_file_student",e.FILE_DENY_PUBLISH_SITE_LACKS_LICENSE="file_deny_publish_site_lacks_license",e.FILE_DENY_EDIT_NIL_PLAN_USER="file_deny_edit_nil_plan_user",e.FILE_DENY_EDIT_SITE_FILE_DRAFTS_TO_MOVE="file_deny_edit_site_file_drafts_to_move",e.FILE_DENY_PUBLISH_SITE_ORG_DISABLED_PUBLISHING="file_deny_publish_site_org_disabled_publishing",e.FILE_DENY_PUBLISH_SITE_USER_RESTRICTED="file_deny_publish_site_user_restricted",e.FILE_DENY_PUBLISH_STARTER_TEAM="file_deny_publish_starter_team",e.FILE_DENY_EDIT_NIL_PLAN_USER_VR_BY_DEFAULT="file_deny_edit_nil_plan_user_vr_by_default",e.FILE_DENY_EDIT_DRAFTS_OWNER_RESTRICTED="file_deny_edit_drafts_owner_restricted",e.FILE_DENY_EDIT_RESTRICTED_PLAN_USER="file_deny_edit_restricted_plan_user",e.FILE_DENY_DELETED_FILE="file_deny_deleted_file",e.FILE_DENY_IN_DELETED_FOLDER="file_deny_in_deleted_folder",e.FILE_DENY_EDIT_ARCHIVED_FILE="file_deny_edit_archived_file",e.FILE_DENY_EDIT_TRASHED_BRANCH="file_deny_edit_trashed_branch",e.FILE_DENY_EDIT_EXTERNAL_RESTRICTED_USER="file_deny_edit_external_restricted_user",e.FILE_DENY_EDIT_EXPIRED_EDU_GRACE_PERIOD="file_deny_edit_expired_edu_grace_period",e.FILE_DENY_EDIT_LOCKED_TEAM="file_deny_edit_locked_team",e.FILE_DENY_EDIT_SLIDES_DISABLED_ORG="file_deny_edit_slides_disabled_org",e.FILE_DENY_ORG_MFA_RESTRICTED_GUEST="file_deny_org_mfa_restricted_guest",e.FILE_PROTO_DENY_ORG_MFA_RESTRICTED_GUEST="file_proto_deny_org_mfa_restricted_guest",e.FILE_DENY_SITES_NON_SITES_USER="file_deny_sites_non_sites_user",e.FILE_DENY_FIGMAKE_NON_FIGMAKE_USER="file_deny_figmake_non_figmake_user",e.FILE_DENY_SANCTIONED_TEAM_ACCESS="file_deny_sanctioned_team_access",e.FILE_DENY_UNVALIDATED_USER_EMAIL="file_deny_unvalidated_user_email",e.FILE_DENY_FIGMA_AI_USAGE_NOT_ALLOWED="file_deny_figma_ai_usage_not_allowed",e.FILE_DENY_FIGMA_AI_FOR_NO_TEAM_OR_ORG="file_deny_figma_ai_for_no_team_or_org",e.FILE_DENY_AI_FOR_AI_DISABLED_TEAM_OR_ORG="file_deny_ai_for_ai_disabled_team_or_org",e.FILE_DENY_AI_IN_K12_ORG="file_deny_ai_in_k12_org",e.FILE_DENY_FIGMA_AI_FOR_NON_PAID_PLAN_USER_V2="file_deny_figma_ai_for_non_paid_plan_user_v2",e.FILE_DENY_FIGMA_AI_FOR_NON_PAID_PLAN_USER="file_deny_figma_ai_for_non_paid_plan_user",e.FILE_DENY_FIGMAKE_AI_USAGE_NOT_ALLOWED="file_deny_figmake_ai_usage_not_allowed",e))(P||{});let D=2;var k=(e=>(e.LINK_ACCESS_FILE_KEY="link_access_file_key",e.BILLABLE_PRODUCT="billable_product",e.LICENSE_TYPE="license_type",e))(k||{})},252066:(e,r,n)=>{n.d(r,{Agb:()=>o.Ag,Go1:()=>o.Go,QKp:()=>a.QK,TOI:()=>a.TO,_YF:()=>o._Y,bUL:()=>o.bU,q42:()=>i.q4,y4I:()=>o.y4});var a=n(191531),i=n(444842),o=n(509168);n(678179),[...Object.values(a.Fh),...Object.values(a.C7),...Object.values(a.aL),...Object.values(a.QR),...Object.values(a._D),...Object.values(a.lc),...Object.values(a.nf),...Object.values(a.X5),...Object.values(a.bp),...Object.values(a.Xn),...Object.values(a.rD),...Object.values(a.nr),...Object.values(a.Sh),...Object.values(a.qm)]},300933:(e,r,n)=>{n.d(r,{u:()=>f});var a=n(848318),i=n(637640),o=n(615233),s=n(631541),l=n(601119),c=n(911947),d=n(822865),u=n(353806),p=n(209595),m=n(181630),_=n(411910),h=n(7905),g=n(395910);function f(){(0,u.F$)("prototype-lib").then(()=>{async function e(e){if(window.androidProtoPreloadedTabStart=performance.now(),!(0,o.Ay)().user_data){i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab not logged in");return}try{let{data:{meta:r}}=await h.S.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}),n=r.parent_org_id;(0,o.Hk)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,o.Ay)().org_id=n,(0,_.Ri)(),window.startUserStateXHR(),i.Ay.replace(e.path,null),await (0,s.n)(E,()=>d.t)}catch(r){console.error("Reloading because of",r),i.Ay.replace(e.path,null),i.Ay.reload("preloaded tab error")}}window.androidProtoFsPreloaded=performance.now(),c.xK.start("androidProtoEditorPreloaded"),window.startPreloadedTab=e})}function E(){let e=(0,l.s)();return"prototype"!==(0,p.z3)()?null:a.createElement(m.uW.Provider,{value:e},a.createElement(g.V,null))}},521885:(e,r,n)=>{n.d(r,{wZ:()=>d,xv:()=>s});var a=n(446951),i=n(501611);let o=i.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,446697)).then(e=>e.AutosaveLogOutModal),(0,a.Ij)("AutosaveLogOutModal")),s=(0,a.Ju)(o),l=i.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,446697)).then(e=>e.HasAutosaveChangesModal),(0,a.Ij)("HasAutosaveChangesModal"));(0,a.Ju)(l);let c=i.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,28790)).then(e=>e.AutosaveLearnMoreModal),(0,a.Ij)("AutosaveLearnMoreModal")),d=(0,a.Ju)(c)},631177:(e,r,n)=>{n.d(r,{dR:()=>u,lk:()=>m,u3:()=>h});var a=n(446951),i=n(642547),o=n(913065),s=n(774037),l=n(737250),c=n(363779);n(909633),n(765262);let d=i.A.createLazyComponent(()=>Promise.all([n.e(8254),n.e(7900),n.e(2677)]).then(n.bind(n,476669)).then(e=>e.UniversalUpgradeSequence),(0,a.Ij)("UniversalUpgradeSequence")),u=(0,a.Ju)(d,"UniversalUpgradeSequence"),p=i.A.createLazyComponent(()=>Promise.all([n.e(8254),n.e(7900),n.e(2677)]).then(n.bind(n,80988)).then(e=>e.UpgradeContactSalesModal),(0,a.Ij)("UpgradeContactSalesModal")),m=(0,a.Ju)(p,"UpgradeContactSalesModal"),_=i.A.createLazyComponent(()=>Promise.all([n.e(8254),n.e(7900),n.e(2677)]).then(n.bind(n,121012)).then(e=>e.OrgUpgradeMultiTeamModal),(0,a.Ij)("OrgUpgradeMultiTeamModal")),h=(0,a.Ju)(_,"OrgUpgradeMultiTeamModal"),g=i.A.createLazyComponent(()=>Promise.all([n.e(8254),n.e(7900),n.e(2677)]).then(n.bind(n,60030)).then(e=>e.OrgUpgradeSingleTeamModal),(0,a.Ij)("OrgUpgradeSingleTeamModal"));(0,a.Ju)(g,"OrgUpgradeSingleTeamModal"),(0,a.Ju)(l.Y,"OrgRenewalModal"),(0,a.Ju)(c.T,"TeamRenewalModal"),(0,a.Ju)(o.T,"TeamAddAnnualSeatsModal"),(0,a.Ju)(s.D,"TeamStartAnnualPlanModal")},115971:(e,r,n)=>{n.d(r,{w:()=>D});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(813009),d=n(264478),u=n(297638),p=n(967688),m=n(744577),_=n(631177),h=n(909633),g=n(902947),f=n(845037),E=n(453370),y=n(31898),b=n(679617),v=n(863270),T=n(162299),I=n(318147),S=n(834612),A=n(253332),w=n(138528),C=n(912534),N=n(872240),L=n(832278),O=n(582309),R=n(158950),P=n(215090);function D(e){let{open:r,onClose:n}=e,i=o.hS({open:r,onClose:n});return a.createElement(s.bL,{manager:i,width:"fit-content"},a.createElement(l.vo,null,a.createElement(l.nB,null,a.createElement(k,{...e}))))}function k({upsellSource:e,isProCurrent:r,onClose:n,onDone:o,teamId:s,openCheckoutInNewTab:l,chooseStarterPlan:d,chooseProPlan:A,chooseOrgPlan:D,chooseEduPlan:k,currency:F,updateCurrency:x,planComparisonModalHeaderOverride:U,planComparisonChartOverride:B,seatComparisonChartOverride:G}){let V=(0,i.wA)(),[H,z]=(0,a.useState)((0,S.LN)()),K=(0,c.R)(e=>(0,T.vp)(e.user,e.currentUserOrgId,e.currentTeamId)),W=(0,w.X$)("PlanComparisonModalContent"),j=W.unwrapOr(null)?.tier||null,Y=function(e){let r=(0,g.GC)({currency:e,tier:C.Ju.PRO,renewalTerm:C.IX.YEAR,showCents:!1}),n=(0,g.GC)({currency:e,tier:C.Ju.PRO,renewalTerm:C.IX.MONTH,showCents:!1}),a=(0,g.GC)({currency:e,tier:C.Ju.ORG,renewalTerm:C.IX.YEAR,showCents:!1});return"loading"===r.status||"loading"===n.status||"loading"===a.status?{[I.Ag.STARTER]:null,[I.Ag.STUDENT]:null,[I.Ag.PRO]:null,[I.Ag.ORG]:null}:{[I.Ag.STARTER]:null,[I.Ag.STUDENT]:null,[I.Ag.PRO]:{monthly:n.data,annual:r.data},[I.Ag.ORG]:{monthly:null,annual:a.data}}}(F??H),$=j===I.Ag.PRO?"807px":"945px";return a.createElement(v.fu,{name:O.QO,properties:{upsellSource:e,teamId:s||K?.teamId}},a.createElement("div",{className:u.s.grid.gap16.p36.pb24.selectNone.$,style:m.sx.add({width:$}).$},U??(null!==U&&a.createElement(M,null)),B??a.createElement(R.f,{currency:F??H,updateCurrency:x??(e=>{z(e),V(E.oB())}),chooseStarterPlan:d,chooseProPlan:A??(r=>{let a=s||K?.teamId;n?.(),a?(V(b.WX({teamId:a,billingPeriod:r,currency:F??H,openInNewTab:l,entryPoint:N.TN.PLAN_COMPARISON_MODAL,upsellSource:e})),o?.()):V((0,y.to)({type:_.dR,data:{plan:h.I.PRO,upsellSource:e,billingPeriod:r,openInNewTab:l,onDone:o}}))}),chooseOrgPlan:D??(()=>{n?.(),V(b.Bq({currency:F??H,upsellSource:e,openInNewTab:l,entryPoint:N.TN.PLAN_COMPARISON_MODAL})),o?.()}),chooseEduPlan:k??(()=>{n?.();let e=s||K?.teamId;e?(V(b.Vm({teamId:e})),o?.()):V((0,y.to)({type:f.q}))}),isProCurrent:r,prices:Y,teamPlan:j}),a.createElement(L.hK,{height:8}),G??a.createElement(P.L,null),a.createElement("p",{className:u.s.colorTextSecondary.$},(0,p.tx)("plan_comparison.campfire.applicable_taxes"))))}function M(){return a.createElement(a.Fragment,null,a.createElement("div",{className:u.s.textHeadingLarge.$},(0,p.tx)("plan_comparison.campfire.title")),a.createElement("div",{className:u.s.textHeadingMedium.fontNormal.$},(0,p.tx)("plan_comparison.campfire.description",{plan:a.createElement("span",{className:u.s.textHeadingMedium.fontMedium.$},(0,p.tx)("plan_comparison.campfire.description.plan")),seat:a.createElement("span",{className:u.s.textHeadingMedium.fontMedium.$},(0,p.tx)("plan_comparison.campfire.description.seat")),learnMoreLink:a.createElement(d.Us,{className:u.s.textHeadingMedium.fontNormal.$,href:A.zZ,target:"_blank",trusted:!0},(0,p.tx)("plan_comparison.campfire.description.learn_more"))})))}},902947:(e,r,n)=>{n.d(r,{GC:()=>m,Jh:()=>_});var a=n(871043);n(128080),n(989232);var i=n(967688),o=n(179040),s=n(188279),l=n(594950),c=n(501104),d=n(859172),u=n(834612),p=n(912534);function m({currency:e,tier:r,renewalTerm:n,showCents:m}){let _=(0,s.jv)({billableProductKeys:c.N_,baseQuery:{currency:e,tier:r,renewalTerm:n,unit:p.IX.MONTH}}),h=(0,d._w)({overridePlanTier:r});return _.transform(r=>{var n;let s=(n=c.N_.dict(e=>r[e]?.amount??0),c.N_.dict(r=>{var a;return a=n[r]||0,new u.vr(e).formatMoney(a,{showCents:m})})),d=c.N_.dict(e=>r[e]?.key);return c.Ye.dict(e=>{let r=e===l.Gu.VIEW?(0,i.t)("checkout.free"):s[e],n=e===l.Gu.VIEW?"":d[e];if(!((0,a.uy)(n)||(0,a.uy)(r)))return{id:e,displayName:(0,o.JT)(e),displayPrice:r,description:h(e),priceKey:n}})})}function _(e){let r=c.N_.dict(r=>e[r]?.key);return JSON.stringify(Object.keys(r).sort().reduce((e,n)=>({...e,[n]:r[n]}),{}))}},593355:(e,r,n)=>{function a({isAnnual:e,numEditors:r,noCents:n,unitCost:a,monthlyUnitCostForStrikethrough:i,currency:o}){let s=new LocalizeCurrency(o),l=s.formatMoney(a,{showCents:!n}),c=t("all_carts.num_editors.seat_rename",{numEditors:r}),d=t("all_carts.plural_months",{months:e?12:1});return"number"==typeof i&&e?tx("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:React.createElement("span",{className:styles.strikethrough},s.formatMoney(i,{showCents:!n})),money:l,editors:c,billingTime:d}):tx("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function i({currentBillingPeriod:e,numEditors:r,noCents:n,shouldStrikethroughMonthlyUnitCostIfAnnual:i,currency:o}){let{getWhiteboardUnitCost:s}=useTeamUpgradeBillingPrices({currency:o});return React.createElement(a,{isAnnual:e===BillingPeriod.ANNUAL,numEditors:r,unitCost:s(e),noCents:n,currency:o,monthlyUnitCostForStrikethrough:i?s(BillingPeriod.MONTHLY):void 0})}function o(e,r){return Math.ceil((1-12*e/(12*r))*100)}n.d(r,{U1:()=>o}),n(848318),n(301168),n(536384),n(129170),n(682524),n(264478),n(967688),n(957872),n(126527),n(318147),n(834612),n(872240),n(81441)},695920:(e,r,n)=>{n.d(r,{RR:()=>c,sx:()=>d});var a=n(19180),i=n(918777),o=n(615233),s=n(730143),l=n(138528);function c(e){let r=(0,l.T5)("useCampfireModelEnabled").unwrapOr(null),n=(0,s.q5)();return!!(0,a.k)().campfire||(e?.preferOpenFilePlan&&n?.plan?!!n.plan.campfireModelEnabledAt:r?!!r.campfireModelEnabledAt:!!(0,o.tl)().campfire_model_enabled)}function d(){let e=c();return!(0,a.k)().campfire_cart_kill_switch&&!!(function(e){let r=(0,i.A)(),n=(0,o.tl)().analyze_data_flow_v2_until;return!!n&&(0,i.A)(n).isBefore(r)}()||e||(0,a.k)().campfire_cart||(0,a.k)().campfire_cart_early_rollout)}},640724:(e,r,n)=>{n.d(r,{k:()=>s});var a=n(870567),i=n(918777),o=n(138528);function s(){return function(e){let r=(0,a.oA)(e?.prorationBillingEnabledAt);return!!r&&(0,i.A)().utc(!0).isSameOrAfter((0,i.A)(r).utc(!0))}((0,o.T5)("useProrationEnabledForCurrentPlan").unwrapOr(null))}},794919:(e,r,n)=>{n.d(r,{IM:()=>T,Ji:()=>f,PS:()=>I,TF:()=>b,b_:()=>g,iA:()=>v,iO:()=>y,sH:()=>E});var a=n(848318),i=n(871043),o=n(938982),s=n(998568),l=n(890134),c=n(967688),d=n(179040),u=n(594950),p=n(501104),m=n(859172),_=n(318147);function h(e){let{isPendingSeat:r,seatTypeKey:n}=function(e){let{team_role:r,team_user:n}=e,a=n?.active_seat_type?.key??null,i=r?.pending?r?.invite:null,o=i?.billableProductKey?(0,m.f2)(i.billableProductKey):null;return n?a?{seatTypeKey:a,isPendingSeat:!1}:o?{seatTypeKey:o,isPendingSeat:!0}:{seatTypeKey:null,isPendingSeat:!1}:{seatTypeKey:o??null,isPendingSeat:!0}}(e);return r?null:n||u.Gu.VIEW}function g(e,r){return!r||r===h(e)}function f(e,r){if(!r.seatTypeKey){(0,s.$D)(o.e.BILLING_EXPERIENCE,Error("tried to update seat filter counts but they were not initialized"));return}let n=h(e);n&&(0,i.Vq)(r.seatTypeKey[n])&&(r.seatTypeKey[n]+=1)}function E(){return{seatTypeKey:p.Ye.dict(()=>0)}}function y(e,r){let n=p.N_.dict(r=>e[r]);Object.values(n).some(e=>e===_.dQ.RESTRICTED)&&(0,s.$D)(o.e.BILLING_EXPERIENCE,Error("tried to set restricted paid status for seat type"),{extra:{paidStatuses:e}});let a=Object.fromEntries(Object.entries(n).filter(([e,r])=>r===_.dQ.FULL)),i=Object.keys(a).length,l=i>0,c=Object.keys(Object.fromEntries(Object.entries(n).filter(([e,r])=>r===_.dQ.STARTER))).length>0;if(i>1)return(0,s.$D)(o.e.BILLING_EXPERIENCE,Error("we tried to upgrade multiple seat types at once, this is unsupported."),{extra:{paidStatuses:e}}),{};if(l&&c)return(0,s.$D)(o.e.BILLING_EXPERIENCE,Error("we tried to upgrade and downgrade seat types at the same time, this is unsupported."),{extra:{paidStatuses:e}}),{};if(l){let e=r[Object.keys(a)[0]];return e?{active_seat_type:e}:{}}return c?{active_seat_type:null}:{}}let b=[u.ud.EXPERT,u.ud.DEVELOPER,u.ud.COLLABORATOR,u.Gu.VIEW],v=[_.Uu.SCIM];function T(e){return a.createElement(l.bv,{label:(0,c.t)("members_table.menu_bar_filter.role.seat_rename"),dispatch:e.dispatch,dropdownShown:e.dropdownShown,dropdownType:"FILTER_SEAT_TYPE_DROPDOWN",values:b,selectedValue:e.selectedValue,getCount:e.getCount,getDisplayText:d.JT,updateFilter:e.updateFilter})}function I(e){return a.createElement(l.bv,{label:d.nf,dispatch:e.dispatch,dropdownShown:e.dropdownShown,dropdownType:"FILTER_SEAT_CHANGES_DROPDOWN",values:v,selectedValue:e.selectedValue,getDisplayText:d.V5,updateFilter:e.updateFilter})}},903935:(e,r,n)=>{n.d(r,{N:()=>g});var a=n(848318),i=n(301168),o=n(660376),s=n(700562),l=n(861119),c=n(594950),d=n(501104),u=n(859172),p=n(353379),m=n(318147),_=n(709884),h=n(955393);function g(e){let r=(0,i.wA)(),n=(0,u.Hl)({visibility:u.YT.ALL}),g=(0,a.useCallback)(({users:a,seatTypeOption:i,seatIncreaseAuthorized:l,seatSwapIntended:d,upgradeReason:u,upgradeMethod:p,assignedAt:m,upgradeActorName:h})=>{let g={};i!==c.Gu.VIEW&&(g[i]={key:i,license_types:n(i)}),(0,o.vA)(e.planType===_.OL.TEAM),r((0,s.P)({teamId:e.planId,deltas:a.map(({userId:e})=>({userId:e,seatTypeOption:i,seatIncreaseAuthorized:l,seatSwapIntended:d})),entryPoint:e.entryPoint,seatTypeProducts:g,upgradeReason:u,upgradeMethod:p,assignedAt:m,upgradeActorName:h,onSuccess:e.onSuccess,onFailure:e.onFailure}))},[r,e.entryPoint,e.planId,e.planType,e.onSuccess,e.onFailure,n]),{onFailure:f,onSuccess:E,queueFilterCountsRefetch:y}=e,b=(0,a.useCallback)(({users:n,seatTypeOption:a,lastUpdateTimestampOverride:i,seatIncreaseAuthorized:s,seatSwapIntended:u})=>{(0,o.vA)(e.planType===_.OL.ORG),r(l.uo({orgId:e.planId,lastUpdateTimestampOverride:i,seatTypeProducts:{},params:{org_user_ids:n.map(e=>e.planUserId),paid_statuses:a===c.Gu.VIEW?d.N_.dict(()=>m.dQ.STARTER):{[a]:m.dQ.FULL},entry_point:e.entryPoint,...null!=s&&null!=u?{seat_increase_authorized:s,seat_swap_intended:u}:null},successCallback:()=>{E?.(),(0,p.jL)({planType:_.OL.ORG,planId:e.planId})},errorCallback:()=>{f?.()}})),y?.()},[r,e.planId,e.entryPoint,e.planType,E,y,f]);return(0,h.RB)(e.planType,{team:g,org:b})}},618542:(e,r,n)=>{n.d(r,{jz:()=>g,kI:()=>_,un:()=>h});var a=n(848318),i=n(871043),o=n(317720),s=n(329228),l=n(188279),c=n(594950),d=n(501104),u=n(744525),p=n(55116),m=n(912534);function _({prices:e,currentSeatType:r,nextSeatType:n,nextSeatAvailable:a,failedToLoadPrices:o}){if(!n||a||r===c.Gu.VIEW||n===c.Gu.VIEW)return!1;if(o||!e)return!0;let s=e[n],l=e[r];return!!((0,i.uy)(s)||(0,i.uy)(l))||s.amount>l.amount}function h({planKey:e,currentSeatType:r,currentSeatBillingInterval:n,enabled:i}){let[s,c]=a.useMemo(()=>{let r=u.c[e.type],a=r.includes(m.IX.MONTH),i=(!a||n===m.IX.YEAR)&&r.includes(m.IX.YEAR);return[a,i]},[e.type,n]),p=(0,l.Ln)(e,d.N_,{renewalTerm:m.IX.MONTH,unit:m.IX.MONTH},{enabled:i&&s}),h=(0,l.Ln)(e,d.N_,{renewalTerm:m.IX.YEAR,unit:m.IX.MONTH},{enabled:i&&c});return a.useMemo(()=>{if(!i||!c)return p;if(!s)return h;let e=[p,h].find(e=>"loaded"!==e.status);if(e)return e;let n=p.data,a=h.data;return n?a?o.Qw.loadedSuspendable(d.N_.dict(e=>r===e||_({prices:n,currentSeatType:r,nextSeatType:e})?a[e]:n[e]),[],{release:()=>{}}):h:p},[i,r,s,p,c,h])}function g(e){let[r]=(0,s.IT)((0,p.oe)(e)),[n]=(0,s.mI)(r);return n}},479009:(e,r,n)=>{n.d(r,{Z:()=>W,bo:()=>J});var a=n(848318),i=n(301168),o=n(871043),s=n(938982),l=n(162796),c=n(309488),d=n(93275),u=n(989232),p=n(329228),m=n(998568),_=n(146968),h=n(297638),g=n(178806),f=n(967688),E=n(952039),y=n(113752),b=n(925085),v=n(87463),T=n(720987),I=n(165617),S=n(179040),A=n(640724),w=n(903935),C=n(880158),N=n(987994),L=n(957872),O=n(863270),R=n(594950),P=n(501104),D=n(461978),k=n(694930),M=n(125761),F=n(318147),x=n(834612),U=n(138528),B=n(955393),G=n(941244),V=n(853535),H=n(446951),z=n(523048),K=n(618542);let W="https://help.figma.com/hc/articles/360039960434-Manage-seats-in-Figma",j=P.Ye.dict(()=>0);function Y(e){let r=l.hS(e),n=(e.planUser.handle||e.planUser.name)??"",[i,u]=a.useState(e.nextSeatType??null),_=(0,k.d)({reportErrorsToTeam:s.e.SCALE}),g=(0,U.T5)("ModifyPlanUserSeatModalInner"),[E]=(0,p.mI)(g);if("loaded"!==E.status){let e=Error("disabled"===E.status?"Plan fetching disabled":"Error fetching plan");throw(0,m.$D)(s.e.SCALE,e),e}let y=E.data;if(!y){let e=Error("No Plan found");throw(0,m.$D)(s.e.SCALE,e),e}let v=(0,A.k)(),I=(0,D.I)(y),w=(0,K.jz)({planType:y.key.type,targetPlanUserId:e.planUser.id,targetUserId:e.planUser.userId}),N=w.data?.planUserById??{currentSeat:null},L=!!N.currentSeat,M=N.currentSeat?.billingInterval??null,B=(0,K.un)({planKey:y.key,currentSeatType:e.planUser.currentSeatType,enabled:v&&!_&&!!I.data,currentSeatBillingInterval:M}),[G]=(0,p.mI)(B),V=(0,C.Qf)(y.key.parentId,y.key.type),H="loaded"===V.status?P.Ye.dict(e=>V.data[e]?.available??0):j,z=new x.vr(e.currency),W=P.N_.dict(e=>{let r=G.data?.[e]?.amount??0;return{amount:r,display:z.formatMoney(r,{showCents:!1})}}),Y="errors"===V.status,J="disabled"!==G.status&&("errors"===G.status||!e.currency||!G.data),Z=!!i&&(i===R.Gu.VIEW||(0,o.Vq)(H[i])&&H[i]>0),Q=(0,K.kI)({prices:G.data,currentSeatType:e.planUser.currentSeatType,nextSeatType:i,nextSeatAvailable:Z,failedToLoadPrices:J}),ee=y.key.type===F.OL.TEAM&&!v&&M===F.NW.YEAR&&e.planUser.currentSeatType===R.ud.EXPERT&&i===R.ud.DEVELOPER&&H[R.ud.DEVELOPER]<1;return a.createElement(O.fu,{name:"Modify Plan User Seat Modal"},a.createElement(c.bL,{height:"dynamic",manager:r,width:"lg"},a.createElement(d.vo,null,a.createElement(d.nB,null,a.createElement(b.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16}},a.createElement(T.j,{user:e.planUser,text:null===i?(0,f.t)("modify_plan_user_seat_modal.choose_seat",{name:n}):i!==R.Gu.VIEW&&Z?(0,f.t)("modify_plan_user_seat_modal.move_to_available_seat",{name:n,seatType:(0,S.JT)(i)}):(0,f.t)("modify_plan_user_seat_modal.move_to_unavailable_seat",{name:n,seatType:(0,S.JT)(i)})}),a.createElement("div",{className:h.s.mb24.$}),a.createElement($,{billableProductKeyContractPrices:W,currentSeatPaidFor:L,currentSeatType:e.planUser.currentSeatType,displayPricing:v&&!!e.currency&&null!==G.data&&!_&&"loading"!==V.status,isDiscouragedAnnualSeatSwap:ee,nextSeatType:i,plan:y,prorationEnabled:v,seatAvailability:_?j:H,setNextSeatType:u}),a.createElement(X,{failedToLoadAvailability:Y,failedToLoadPrices:J}))),!!i&&!e.hideFooter&&a.createElement(q,{isDiscouragedAnnualSeatSwap:ee,nextSeatType:i,onClose:e.onClose,plan:y,planUserId:e.planUser.id,previousSeatType:e.planUser.currentSeatType,previousSeatWillBecomeAvailable:!_&&(L&&!v||v&&!Q),queueFilterCountsRefetch:e.queueFilterCountsRefetch,refetchSeatCounts:V.refetch,seatIncreaseAuthorized:!v||i===R.Gu.VIEW||(0,o.Vq)(H[i])&&H[i]<1,seatSwapIntended:v&&Q,setNextSeatType:u,userId:e.planUser.userId,userName:n}))))}function $({currentSeatType:e,nextSeatType:r,setNextSeatType:n,billableProductKeyContractPrices:i,seatAvailability:o,displayPricing:s,prorationEnabled:l,currentSeatPaidFor:c,isDiscouragedAnnualSeatSwap:d,plan:u}){return r?a.createElement(I.l,{fromSeatType:e,toSeatType:r,availableSeats:o[r]??0,pricing:i,displayPricing:s,prorationEnabled:l,currentSeatPaidFor:c,isDiscouragedAnnualSeatSwap:d,plan:u}):a.createElement(I.m,{currentSeatType:e,setNextSeatType:n,availableSeatCounts:o,displayPricing:s,pricing:i,learnMoreLinkHref:W})}function q({nextSeatType:e,onClose:r,plan:n,planUserId:o,seatIncreaseAuthorized:s,seatSwapIntended:l,setNextSeatType:c,userId:u,userName:p,previousSeatType:m,queueFilterCountsRefetch:_,previousSeatWillBecomeAvailable:h,isDiscouragedAnnualSeatSwap:b,refetchSeatCounts:v}){let T=n.key.parentId,I=n.key.type,S=(0,i.wA)(),[A,C]=a.useState(!1),O=a.useCallback(()=>{v(),C(!1)},[v]),P=a.useCallback(()=>{let e=h?function(e,r){switch(r){case R.ud.EXPERT:return(0,f.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_full",{userName:e});case R.ud.DEVELOPER:return(0,f.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_dev",{userName:e});case R.ud.COLLABORATOR:return(0,f.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_collab",{userName:e});case R.Gu.VIEW:default:return(0,f.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_view",{userName:e})}}(p,m):(0,f.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_view",{userName:p});r(),S(E.F.enqueue({message:e,type:"plan-user-seat-change",icon:y.zX.CHECK_WITH_CIRCLE}))},[S,r,p,m,h]),D=(0,w.N)({planId:T,...(0,B.Ef)(I,{team:{entryPoint:V.B.MEMBERS_TAB},org:{entryPoint:G.h.MEMBERS_TAB}}),queueFilterCountsRefetch:_,onSuccess:P,onFailure:O}),k=(0,M.iZ)(),x=(0,N.u)();return a.createElement(d.wi,null,a.createElement(d.jk,null,a.createElement(g.$z,{disabled:A,onClick:()=>c(null),variant:"secondary",trackingProperties:{trackingDescriptor:L.c.BACK}},(0,f.t)("modify_plan_user_seat_modal.button.back")),a.createElement(g.$z,{disabled:A,onClick:()=>{C(!0),D({users:[{userId:u,planUserId:o}],seatTypeOption:e,seatIncreaseAuthorized:s,seatSwapIntended:l,upgradeReason:I===F.OL.TEAM?F.$n.ADMIN_UPGRADE:F.Uu.ADMIN_UPGRADE,upgradeMethod:F.XI.ADMIN_INITIATED,assignedAt:new Date,upgradeActorName:k?.name||k?.handle||void 0})},variant:"primary",trackingProperties:{trackingDescriptor:L.c.CONFIRM,isDiscouragedAnnualSeatSwap:b,previousSeatType:m,nextSeatType:e},trackingOptions:x},b?(0,f.t)("modify_plan_user_seat_modal.button.add_seat"):(0,f.t)("modify_plan_user_seat_modal.button.confirm"))))}function X({failedToLoadAvailability:e,failedToLoadPrices:r}){a.useEffect(()=>{(e||r)&&(0,u.trackEvent)("seat_purchasing.non_blocking_fetch_error",{seat_counts_fetch_error:e,price_fetch_error:r,view:"modify_plan_user_seat_modal"},{forwardToDatadog:!0})},[e,r]);let n=null;return(e&&r?n=(0,f.t)("modify_plan_user_seat_modal.error.missing_pricing_and_seat_avability"):e?n=(0,f.t)("modify_plan_user_seat_modal.error.missing_seat_availability"):r&&(n=(0,f.t)("modify_plan_user_seat_modal.error.missing_pricing")),n)?a.createElement("div",{"data-testid":"modify-seat-modal-error-message"},a.createElement(v.E,{color:"danger"},n)):null}let J=(0,H.Ju)(function(e){return a.createElement(_.tH,{boundaryKey:"ModifyPlanUserSeatModal",fallback:_.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:!1},a.createElement(a.Suspense,{fallback:a.createElement(z.N,{hiddenTitle:"Modify Seat Modal",estimatedWidth:480,estimatedHeight:504,height:"dynamic"})},a.createElement(Y,{...e})))})},700562:(e,r,n)=>{n.d(r,{P:()=>u,Z:()=>p});var a=n(167920),i=n(314979),o=n(967688),s=n(151223),l=n(931078),c=n(594950),d=n(853535);let u=(0,s.MM)("TEAM_USER_UPDATE_SEAT_TYPE",async(e,{teamId:r,deltas:n,entryPoint:s,onSuccess:u,onFailure:p},{optimistId:m})=>{await d.H.updateTeamUsers({team_id:r,team_user_deltas:n.map(({userId:e,seatTypeOption:r,seatIncreaseAuthorized:n,seatSwapIntended:a})=>{let i={user_id:e,seat_type:r===c.Gu.VIEW?"":r};return null!=n&&(i.seat_increase_authorized=n),null!=a&&(i.seat_swap_intended=a),i}),entry_point:s}).then(function({data:n}){e.dispatch(a.c(m)),e.dispatch((0,l.yJ)({teamUsers:n.meta,teamId:r})),u?.()}).catch(function(r){e.dispatch(a.r(m)),e.dispatch(i.s.error(function(e){let{reason:r}=e,{message:n}=e;switch(r){case"seat_increase_unauthorized":return(0,o.t)("modify_plan_user_seat_modal.error.seat_increase_unauthorized");case"upgrade_on_suspended_plan":if(n)return(0,o.t)("modify_plan_user_seat_modal.error.upgrade_on_suspended_plan")}return(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status")}(r.data))),p?.(),console.error(r)})});function p(e,r){let{teamId:n,deltas:a,seatTypeProducts:i,upgradeMethod:o,upgradeReason:s,assignedAt:l,upgradeActorName:d}=r.payload,u=e[n];if(!u)return e;let p={...u},m={};return Object.entries(u).forEach(([e,r])=>{let n=r.team_user?.user_id;e&&n&&(m[n]={originalKey:e,originalMember:r})}),a.forEach(({userId:e,seatTypeOption:r})=>{let{originalKey:n,originalMember:a}=m[e]||{},u=r===c.Gu.VIEW?null:r,_=(u&&i[u])??null;if(!n||!a||!a.team_user||u&&!_)return;let h={...a.team_user,active_seat_type:_},g={...a,upgrade_reason:s,upgrade_method:o,assigned_at:l,upgrade_actor_name:d,team_user:h};p[n]=g}),{...e,[n]:p}}},72464:(e,r,n)=>{n.d(r,{JT:()=>a,tI:()=>i}),n(179040).r3,n(179040).CM,n(179040).SI,n(179040).kj,n(179040).NU,n(179040).Tm;let a=n(179040).JT;n(179040).nf,n(179040).V5;let i=n(179040).tI;n(179040).mb,n(179040).Qi},909834:(e,r,n)=>{n.d(r,{BC:()=>i,iO:()=>a}),n(794919).b_,n(794919).Ji,n(794919).sH;let a=n(794919).iO;n(645973).E;let i=n(418534).B;n(794919).TF,n(794919).iA,n(794919).PS,n(794919).IM},246508:(e,r,n)=>{n.d(r,{$X:()=>s,BZ:()=>l,cF:()=>o,fF:()=>i});var a=n(850768);let i="Org admin settings onboarding - - billing tab";a.J7.DASHBOARD,a.J7.WORKSPACES,a.J7.TEAMS,a.J7.MEMBERS,a.J7.ACTIVITY,a.J7.BILLING,a.J7.RESOURCES,a.J7.SETTINGS,a.J7.CONTENT;let o="org_admin_settings_billing_groups_secondary_tab_onboarding_key",s="org_admin_settings_billing_overview_secondary_tab_onboarding_key",l={[a.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[a.SN.TEAMS]:"org_admin_settings_teams_tab_onboarding_key",[a.SN.FILE_LIST_BETA]:"",[a.SN.ACCESS_INSIGHT]:"",[a.SN.WORKSPACES]:"",[a._d.APPROVED_PLUGINS]:"",[a._d.APPROVED_WIDGETS]:"",[a._d.LIBRARIES]:"",[a._d.SHARED_FONTS]:"",[a.G_.BILLING_GROUPS]:o,[a.G_.INVOICES]:"",[a.G_.OVERVIEW]:s,[a.SN.CONNECTED_PROJECTS]:"org_admin_connected_projects_tab_onboarding_key"}},122958:(e,r,n)=>{n.d(r,{nj:()=>a});let a="admin_view_resource_tab"},400087:(e,r,n)=>{n.d(r,{Ki:()=>T,f9:()=>A});var a=n(848318),i=n(860676),o=n(19180);n(865114);var s=n(410725),l=n(72462),c=n(287105),d=n(977385),u=n(180294),p=n(318147),m=n(55116),_=n(193743),h=n(360860),g=n(560265),f=n(386252),E=n(213374),y=n(345644),b=n(763454);let v=new _.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,membersMap:c,firstPageSize:p,isEndUserSurface:_,orgId:h}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,d.K)(),{subscription:b,status:T}=function({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,firstPageSize:i,extraTeamIds:c=[],isEndUserSurface:d,orgId:p}){let _=!d&&(0,o.k)().org_teams_in_admin_lg_view,h=(0,u.dq)(),g=(0,s.Rs)(_?m.Qxm:m.jl4,{orgId:p??h,firstPageSize:i||25,queryParams:A(e,r,n,d),extraTeamIds:c},{enabled:a}),f=l.r.LOADING;return"loaded"===g.status?f=l.r.SUCCESS:"errors"===g.status&&(f=l.r.FAILURE),{subscription:g,status:f}}({searchQuery:e,filters:r,sortConfig:n,enabled:i,firstPageSize:p,extraTeamIds:g,isEndUserSurface:_,orgId:h}),w=T===l.r.SUCCESS&&!b.data?.orgTeams?.isLoadingNextPage,C=w&&b.data?.orgTeams&&b.data.orgTeams.hasNextPage()?()=>{b.data.orgTeams.loadNext(p||25)}:void 0;a.useEffect(()=>{T===l.r.SUCCESS&&E((b.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[T,b.data,E]);let N=a.useMemo(()=>{var e,n,a;return b.data?(e=b.data,n=c,a=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>S(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>I(e,a))):[]},[b.data,c,r]),L=a.useMemo(()=>b.data?function(e,r,n,a){let i=e.org,o=(i&&i.teamsByIdInAdmin?(i.teamsByIdInAdmin||[]).map(e=>e.team):e.org?.teamsById||[]).map(e=>S(e,r)).filter(e=>I(e,n));return a?(v.set(o),v.search(a)):o}(b.data,c,r,e):[],[b.data,c,r,e]),{trackPerformanceEvent:O}=(0,y.S)("teams_table_fetch_performance","livegraph");return(0,a.useEffect)(()=>{O("fetch_end")},[O,N.length]),(0,a.useEffect)(()=>{T===l.r.FAILURE&&O("fetch_error")},[O,T]),(0,a.useEffect)(()=>{O("fetch_start")},[O]),{status:T,teams:N,optimisticTeams:L,fetchMore:C,allTeamsFetched:w&&!C,addOptimisticIds:f}}function I(e,r){return!(r?.orphanedTeamFilter&&e.owner||r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||r?.discoverabilityFilter&&(r.discoverabilityFilter===f.Fb.ORG_BROWSABLE&&e.org_access!==i.bUL.PRIVATE||r.discoverabilityFilter===f.Fb.HIDDEN&&e.org_access!==i.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===E.O&&null!==e.workspace_id||r.workspaceFilter!==E.O&&r.workspaceFilter!==e.workspace_id))}function S(e,r,n){let a=r[e.id]??0,i=e.ownerRole?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||p.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!i,member_count:"number"==typeof n?Math.max(n+a,0):void 0,owner:i&&{id:i.id,name:i.name||void 0,handle:i.handle||"",img_url:i.imgUrl||"",email:i.email||void 0,description:i.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?g.ig.NOT_JOINED:g.ig.JOINED,sanctioned_at:e.sanctionedAt?.toISOString()||null}}function A(e,r,n,a){let i=(0,b.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,c.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?h.dy.DESC:h.dy.ASC},...e&&{search_query:e},...i&&{org_access:i},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===g.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...a&&{is_end_user_surface:a}}))}},288661:(e,r,n)=>{n.d(r,{I:()=>d}),n(848318),n(301168),n(536384),n(297638),n(967688),n(925085);var a=n(742379);n(956494),n(453370);var i=n(209595),o=n(138528),s=n(359052),l=n(860145);n(196034),n(850768),n(129723),n(773293);var c=n(28351);function d(){var e,r;let n=(0,i._6)(),d=(0,a.E)(),u=(0,o.px)(),p=(0,o.j_)(u).unwrapOr(!1);return d||(e=n,r=p,"teamAdminConsole"!==e.view&&"orgAdminSettings"!==e.view&&("licenseGroup"===e.view&&e.subView===l.GN.ADMIN&&!!r||"billingGroupDashboard"===e.view&&e.selectedTab===s.D.ALL_REQUESTS||"workspace"===e.view&&e.subView===c.V0.ADMIN&&!!r||"orgDomainManagement"===e.view||"orgIdpManagement"===e.view||"abandonedDraftFiles"===e.view||"seatRequests"===e.view))}},880158:(e,r,n)=>{n.d(r,{Qf:()=>h,hY:()=>f,zz:()=>E});var a=n(848318),i=n(938982),o=n(317720),s=n(63163),l=n(458608);n(410725);var c=n(329228),d=n(998568);n(640724);var u=n(501104),p=n(859172);n(318147);var m=n(55116);let _=u.Ye.dict(()=>({assigned:0,available:0,total:0}));function h(e,r){let[n,i]=a.useState({status:"loading",data:_}),o=a.useCallback(()=>{(0,l.Ek)(m.rRb,{planParentId:e,planType:r}).then(e=>{i({status:"loaded",data:g(e)})}).catch(()=>{i({status:"errors",data:_})})},[e,r]);return(0,s.h)(()=>{o()}),{...n,refetch:o}}function g(e){let r=e.plan;if(!r)throw Error("received no plan while loading seat counts");let n=r.availableSeatCountsV2,a=r.assignedSeatCountsV2;return u.Ye.dict(e=>{let r=a.find(({billableProductKey:r})=>(0,p.Zx)(r)===e),i=n.find(({billableProductKey:r})=>(0,p.Zx)(r)===e),o=y(r?.count),s=y(i?.count);return{assigned:o,available:s,total:o+s}})}function f(e,r,n){let[a]=(0,c.IT)((0,m.rRb)({planParentId:e,planType:r}),n);try{return a.transform(g)}catch(n){return(0,d.$D)(i.e.SCALE,n,{extra:{planType:r,planParentId:e}}),o.Qw.errorSuspendable(n,{release:()=>{}})}}function E(e,r,n){let a=f(e,r,n),[i]=(0,c.mI)(a);if("loaded"===i.status)return i.data;if("errors"===i.status){let e=[i.errors].flat()[0];if(e)throw e}throw Error("Error fetching seat counts")}function y(e){return parseInt(e??"0",10)}},512907:(e,r,n)=>{let a;n.d(r,{Lg:()=>G,Lq:()=>U});var i=n(848318),o=n(301168),s=n(660376),l=n(162796),c=n(531788),d=n(309488),u=n(93275),p=n(870567),m=n(238444),_=n(615233),h=n(410725),g=n(304756),f=n(264478),E=n(136126),y=n(345964),b=n(720522),v=n(297638),T=n(967688),I=n(952039),S=n(31898),A=n(863270),w=n(353231),C=n(735131),N=n(55116),L=n(474132),O=n(361053),R=n(683703),P=n(583940),D=n(446951),k=n(254028),M=n(596224),F=n(566e3),x=n(7452),U=(e=>(e.ORG_TEAM_SETTINGS="org_team_settings",e.PRO_TEAM_SETTINGS="pro_team_settings",e.ORG_ADMIN_TEAMS_TABLE="org_admin_teams_table",e.PROJECT_SETTINGS="project_settings",e.RESOURCE_DISCONNECT_SUCCESS_MODAL="resource_disconnect_success_modal",e.CONNECTED_PROJECT_ADMIN_UI_FLYOUT="connected_project_admin_ui_flyout",e))(U||{});function B(e){var r;let n;let a=(0,o.wA)(),D=(0,o.Pj)(),U=(0,o.d4)(e=>e.currentUserOrgId),B=(0,o.d4)(e=>U&&e.orgById[U]),G=B&&B.shared_org_license_group_settings?.external_collaboration_controls,[V,H]=i.useState(1),[z,K]=i.useState(""),[W,j]=i.useState(""),[Y,$]=i.useState(""),[q,X]=i.useState(),[J,Z]=i.useState(null),[Q,ee]=i.useState(null),[et,er]=i.useState(null),[en,ea]=i.useState(),[ei,eo]=i.useState(!1),[es,el]=i.useState(!1),ec=l.hS(e),ed=(0,h.Rs)(N.NqM,{teamId:e.teamId}),eu=(0,C.N)(e.folderId??"");(r=n||(n={})).URL_FORMAT="url_format",r.SAME_ORG="same_org",r.EMAIL_FORMAT="email_format",r.EMAIL_MATCH="email_match",r.TRANSFER_ALREADY_INITIATED="transfer_already_initiated",r.NETWORK_OR_OTHER_ERROR="network_or_other_error",r.SAME_TEAM="same_team",r.NON_ORG_DEST_TEAM="non_org_dest_team",r.VIEW_OR_INVITE_ONLY_FOLDER="view_or_invite_only_folder";let ep=function(e){switch(e){case"org_team_settings":case"pro_team_settings":case"org_admin_teams_table":return!1;case"project_settings":case"resource_disconnect_success_modal":case"connected_project_admin_ui_flyout":return!0;default:(0,s.xb)(e)}}(e.entryPoint),em=ep?"project":"team";if(ep&&!e.folderId)throw Error("transferring project, but the project was not present");let e_=e.teamId,eh=e.folderId,eg=e=>i.createElement("a",{className:F.C2,href:"https://help.figma.com/hc/articles/10250387712407",target:"_blank"},e||(0,T.tx)("asset_transfers.request_modal.learn_more")),ef=e.shouldTransferCopy?(0,T.tx)("asset_transfers.request_modal.you_can_transfer_a_copy_of_this_project_and_its_content_to_another_plan"):(0,T.tx)("asset_transfers.request_modal.you_can_transfer_this_project_and_its_content_to_another_team"),eE=(0,T.tx)("asset_transfers.request_modal.only_those_on_the_receiving_team_will_have_access",{learnMore:eg()}),ey=ep?e.shouldTransferCopy?(0,T.tx)("asset_transfers.request_modal.you_ll_need_the_email_address_of_a_contact_person_on_that_team_as_well_as_a_link_to_the_team",{learnMore:eg()}):(0,T.tx)("asset_transfers.request_modal.you_ll_need_the_email_address_of_a_contact_person_on_that_other_team",{strongPlan:i.createElement("span",{className:F.Cr},(0,_.sL)()?(0,T.tx)("asset_transfers.request_modal.figma_gov"):(0,T.tx)("asset_transfers.request_modal.pro_enterprise_or_organization_plan")),learnMore:eg()}):(0,T.tx)("asset_transfers.request_modal.you_ll_need_the_email_address_of_a_contact_person",{strongPlan:i.createElement("span",{className:F.Cr},(0,T.tx)("asset_transfers.request_modal.enterprise_or_organization_plan")),learnMore:eg()}),eb=ep?(0,T.tx)("asset_transfers.destination_type.team"):(0,T.tx)("asset_transfers.destination_type.organization"),ev=()=>{a(S.Lo())};i.useEffect(()=>{en&&(eh?(0,w.xr)("Project transfer error",eh,e_,D.getState(),{error:en}):(0,w._J)("Team transfer error",e_,D.getState(),{error:en}))},[en,e_,D,eh]);let eT=()=>{if(ea(null),1===V){H(2);return}if(z&&!(0,m.xf)(z)){ea("email_format");return}2===V&&eo(!0);let r={transfer_type:em,folder_id:eh,team_id:e_,destination_user_email:z,destination_team_id:Q,destination_org_id:q,message:""===W?null:W,is_transfer_copy:!!e.shouldTransferCopy};g.Ay.post("/api/asset_transfer/create_request",r).then(()=>{e.onRequestClose&&e.onRequestClose(),ev(),a(I.F.enqueue({message:"Transfer request sent"}))},e=>{"Destination user not found"===e.message||"Destination user is not part of the provided destination org"===e.message||"Destination user is not part of the provided destination team"===e.message?(ea("email_match"),eo(!1)):"This team already has a transfer initiated"===e.message?(ea("transfer_already_initiated"),ev(),a(I.F.enqueue({message:"A team transfer was already initiated for this team.",error:!0})),eo(!1)):"This project already has a transfer initiated"===e.message?(ea("transfer_already_initiated"),ev(),a(I.F.enqueue({message:"A project transfer was already initiated for this team.",error:!0}))):"Folder is invite-only"===e.message||"Folder is view-only"===e.message?(ea("view_or_invite_only_folder"),ev(),a(I.F.enqueue({message:"Projects that are view-only or invite-only can't be transferred.",error:!0}))):(ea("network_or_other_error"),ev(),a(I.F.enqueue({message:e.message||"Something went wrong - check your connection and try again",error:!0})),eo(!1))})},eI=()=>{switch(en){case"url_format":return(0,T.tx)("asset_transfers.request_modal.errors.this_link_isn_t_valid");case"same_org":return ep?(0,T.tx)("asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_projects_within_your_own_organization"):(0,T.tx)("asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_teams_within_your_own_organization");case"email_format":return(0,T.tx)("asset_transfers.request_modal.errors.please_use_a_valid_email_format");case"email_match":return(0,T.tx)("asset_transfers.request_modal.errors.this_email_isn_t_associated_with_the_destination_linked_above",{destinationType:eb});case"same_team":return(0,T.tx)("asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_projects_within_your_own_team");case"non_org_dest_team":return(0,T.tx)("asset_transfers.request_modal.errors.this_links_to_a_team_that_isn't_able_to_receive_transfers")}},eS=ei?i.createElement(c.$n,{disabled:!0},i.createElement(y.qc,null)):e.shouldTransferCopy?i.createElement(c.$n,{disabled:2===V&&(!(Y&&z)||!es)||ei,onClick:eT},1===V?(0,T.tx)("asset_transfers.request_modal.next"):(0,T.tx)("asset_transfers.request_modal.send")):i.createElement(c.$n,{disabled:2===V&&(!(Y&&z)||!es)||ei,onClick:eT},1===V?(0,T.tx)("asset_transfers.request_modal.next"):(0,T.tx)("asset_transfers.request_modal.request_transfer")),eA=e.shouldTransferCopy?(0,T.tx)("asset_transfers.request_modal.transfer_a_copy"):(0,T.tx)("asset_transfers.request_modal.start_this_transfer");return i.createElement(A.fu,{name:ep?"Project Transfer Request Modal":"Team Transfer Request Modal",properties:{folderId:ep?eh:"",teamId:e_,entryPoint:e.entryPoint}},i.createElement(d.bL,{manager:ec,width:"lg"},i.createElement(u.vo,null,i.createElement(u.Y9,null,i.createElement(u.hE,null,eA)),i.createElement(u.nB,null,(()=>{if(ep&&"loading"===eu.status||!ep&&"loading"===ed.status)return null;let r=e.shouldTransferCopy?"":ep?(0,T.t)("asset_transfers.request_modal.once_a_transfer_is_accepted_by_an_external_team_it_can_t_be_undone"):(0,T.t)("asset_transfers.request_modal.once_a_transfer_is_accepted_by_an_external_organization_it_can_t_be_undone");if((0,M.oz)()||(0,k.aI)()){if(ep){let e=p.oA(eu.data)?.publishedSiteCount;e&&e>0&&(r+=(0,T.t)("asset_transfers.request_modal.sites_unpublished_on_project_transfer"))}else p.oA(ed.data?.team)?.hasPublishedSite&&(r+=(0,T.t)("asset_transfers.request_modal.sites_unpublished_on_team_transfer"))}return""===r?null:i.createElement(E._,{dataTestId:"asset-transfer-warning-banner",color:E.S.ERROR,text:i.createElement("div",null,r)})})(),1===V?i.createElement("div",{className:v.s.flex.flexColumn.$},i.createElement("p",{className:v.s.pt16.$},ep?ef:(0,T.tx)("asset_transfers.request_modal.you_can_transfer_this_team_and_its_content_to_another_organization")),i.createElement("p",{className:v.s.pt16.fontSemiBold.$},(0,T.tx)("asset_transfers.request_modal.next_steps")),i.createElement("ul",{className:F.p_},i.createElement("li",{className:F.Aw},ey),!e.shouldTransferCopy&&i.createElement("li",{className:F.Aw},ep?(0,T.tx)("asset_transfers.request_modal.ask_them_for_a_link_to_their_team",{learnMore:eg()}):(0,T.tx)("asset_transfers.request_modal.ask_your_contact_person_for_a_link_to_their_figma_organization_so_the_team_transfers_to_the_right_place",{learnMore:eg()})),e.shouldTransferCopy&&i.createElement("li",{className:F.Aw},(0,T.tx)("asset_transfers.request_modal.when_you_send_your_request_the_contact_person_and_their_admins_will_be_notified")),e.shouldTransferCopy&&i.createElement("li",{className:F.Aw},(0,T.tx)("asset_transfers.request_modal.once_an_admin_accepts_a_copy_of_the_project_will_be_transferred")),G?i.createElement("li",{className:F.Aw},ep?e.shouldTransferCopy?eE:(0,T.tx)("asset_transfers.request_modal.once_an_admin_accepts_the_project_will_be_transferred"):(0,T.tx)("asset_transfers.request_modal.once_an_admin_accepts_the_team_will_be_transferred")):i.createElement("li",{className:F.Aw},ep?e.shouldTransferCopy?eE:(0,T.tx)("asset_transfers.request_modal.once_an_admin_accepts_the_project_will_be_transferred_some_of_your_team_may_still_have_access_to_the_project",{learnMore:eg()}):(0,T.tx)("asset_transfers.request_modal.once_an_admin_accepts_the_team_will_be_transferred_some_of_your_members_may_still_have_access_to_the_team",{learnMore:eg()})),G&&i.createElement("li",{className:F.Aw},ep?(0,T.tx)("asset_transfers.request_modal.ask_the_other_organization_to_invite_back_members_due_to_external_collaboration_controls_for_project_v2"):(0,T.tx)("asset_transfers.request_modal.ask_the_other_organization_to_invite_back_members_due_to_external_collaboration_controls_for_team")))):i.createElement("div",null,i.createElement("div",{className:F.cx},i.createElement("p",{className:v.s.pt16.fontSemiBold.$},(0,T.tx)("asset_transfers.request_modal.add_a_link")),i.createElement("p",{className:v.s.pt12.$},(0,T.tx)("asset_transfers.request_modal.add_link_here_description",{destinationType:eb,learnMore:eg((0,T.tx)("asset_transfers.request_modal.learn_how_to_find_the_link"))})),i.createElement(f.ks,{onChange:e=>$(e.currentTarget.value),onBlur:e=>{X(null),Z(null),ee(null),el(!1),ea(null);let r=(0,O.HE)(Y),n=(0,O.Cl)(Y),a=(0,L.mg)(Y);if(ep&&!n&&!r||!a&&!ep){ea("url_format");return}if(a&&(0,L.nX)(Y)===U){ea("same_org");return}if(ep?r&&a||n:a){let e=(0,L.nX)(Y);if(e&&R.Eh.getOrgName({orgId:e}).then(({data:r})=>{("url_format"===en||"same_org"===en)&&ea(null),X(e),e===U||ep||(Z(r.meta),el(!0))}),ep){let e=(0,O.Eq)(Y);P.$.getTeamName({teamId:e}).then(({data:r})=>{("url_format"===en||"non_org_dest_team"===en)&&ea(null),ee(e),e!==e_&&(er(r.meta),el(!0))})}}},className:"url_format"===en||"same_org"===en||"same_team"===en||"non_org_dest_team"===en?F.Xu:F.QL,value:Y,placeholder:(0,T.t)("asset_transfers.request_modal.web_link")}),("url_format"===en||"same_org"===en||"same_team"===en||"non_org_dest_team"===en)&&i.createElement("span",{className:F.T},eI()),es&&i.createElement("div",{className:F.Pv},i.createElement("div",{className:F.Gu},i.createElement(b.B,{className:F.Kk,svg:x.A}),i.createElement("div",{className:F.Qu},ep?""===et?(0,T.tx)("asset_transfers.request_modal.team_verified"):(0,T.tx)("asset_transfers.request_modal.data_meta_verified",{assetName:et}):(0,T.tx)("asset_transfers.request_modal.data_meta_verified",{assetName:J}))))),i.createElement("span",{className:v.s.pt8.$,style:{fontWeight:600}},(0,T.tx)("asset_transfers.request_modal.who_to_notify")),i.createElement(f.ks,{onChange:e=>K(e.currentTarget.value),className:"email_format"===en||"email_match"===en?F.Xu:F.QL,value:z,placeholder:(0,T.t)("asset_transfers.request_modal.email_address")}),("email_format"===en||"email_match"===en)&&i.createElement("span",{className:v.s.colorTextDanger.$}," ",eI()," "),i.createElement(f.ks,{onChange:e=>j(e.currentTarget.value),className:F.iU,value:W,type:"textarea",placeholder:(0,T.t)("asset_transfers.request_modal.add_a_message_if_you_d_like")}))),i.createElement(u.wi,null,i.createElement("div",{className:v.s.flex.justifyBetween.itemsCenter.wFull.pl2.$},i.createElement("span",null,(0,T.tx)("asset_transfers.request_modal.step_1_of_2",{stepNumber:V})," "),i.createElement("div",{className:v.s.flex.gap8.itemsCenter.$},i.createElement(c.$n,{variant:"secondary",onClick:1===V?ev:()=>{H(1)}},1===V?(0,T.tx)("asset_transfers.request_modal.cancel"):(0,T.tx)("asset_transfers.request_modal.back")),eS))))))}function G(){return a??=(0,D.Ju)(B,"AssetTransferRequestModal")}},460396:(e,r,n)=>{n.d(r,{l4:()=>i,l_:()=>a});let a="Team admin settings onboarding - billing",i="team_admin_settings_billing_overview_secondary_tab_onboarding_key"},498808:(e,r,n)=>{n.d(r,{RQ:()=>i,cm:()=>o,jU:()=>a}),n(989833),n(506470);let a="organize-favorite-menu",i="team-link-context-menu";var o=(e=>(e.PENDING_ASSET_TRANSFER="pending_asset_transfer",e.PENDING_RESOURCE_CONNECTION="pending_resource_connection",e.ACTIVE_RESOURCE_CONNECTION="active_resource_connection",e))(o||{})},845037:(e,r,n)=>{n.d(r,{q:()=>s});var a=n(878724),i=n(446951);let o=a.A.createLazyComponent(()=>Promise.all([n.e(570),n.e(8029),n.e(8658),n.e(9616),n.e(4372),n.e(2481),n.e(2104),n.e(8254),n.e(6605),n.e(6596),n.e(4878),n.e(8920),n.e(2639),n.e(3923),n.e(2790),n.e(7900),n.e(8717)]).then(n.bind(n,467452)).then(e=>e.EduUpgradeModal),(0,i.Ij)("EduUpgradeModal")),s=(0,i.Ju)(o,"EDU_UPGRADE_MODAL")},767339:(e,r,n)=>{n.d(r,{$T:()=>Y,g5:()=>z,nw:()=>K});var a=n(660376),i=n(907031),o=n(938982),s=n(19180),l=n(128080),c=n.n(l),d=n(548530),u=n(637640),p=n(287105),m=n(998568),_=n(461979),h=n(967688),g=n(434290),f=n(613733),E=n(249726),y=n(34780),b=n(980334),v=n(318147),T=n(523443),I=n(131413),S=n(403014),A=n(474132),w=n(253332),C=n(407638),N=n(587686),L=n(359052),O=n(860145),R=n(850768),P=n(360860),D=n(872240),k=n(129723),M=n(26435),F=n(603592),x=n(175957),U=n(773293),B=n(493571),G=n(28351),V=n(213374);let H={feed:{slug:"feed",i18nName:()=>(0,h.t)("view_selectors.file_browser.feed"),hasMissingResource:()=>!1},resourceUnavailable:{slug:"resourceUnavailable",i18nName:()=>(0,h.t)("view_selectors.file_browser.resource_unavailable"),hasMissingResource:()=>!1,isNonUrlAddressable:!0},deletedFiles:{slug:"trashed",i18nName:()=>(0,h.t)("view_selectors.file_browser.trash"),hasMissingResource:()=>!1},trashedFolders:{slug:"trashed-projects",i18nName:()=>(0,h.t)("view_selectors.file_browser.trash"),hasMissingResource:()=>!1},teamCreation:{slug:"create-team",i18nName:()=>(0,h.t)("view_selectors.file_browser.create_new_team"),hasMissingResource:()=>!1,skipBrowserHistory:()=>!0},folder:{slug:"project",hasMissingResource:()=>!1},team:{slug:"team",hasMissingResource:(e,r)=>{let{teamId:n}=r,a=r.teamViewTab===U.A$.BILLING&&(!(0,C.canAdminTeam)(n,e)||!e.teams[n]||!e.teams[n].pro_team);return(0,f.HZ)({label:f.A5.fileBrowserConfig.teamHasMissingResource,oldValue:a,newValue:!1,maxReports:5})},missingResourceType:x.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId},allProjects:{slug:"all-projects",hasMissingResource:(e,r)=>!(e.currentTeamId&&e.teams[e.currentTeamId]),missingResourceType:x.Ft.TEAM},limitedTeamSharedProjects:{slug:"shared-projects",i18nName:()=>(0,h.t)("sidebar.all_shared_projects"),hasMissingResource:()=>!1,missingResourceType:x.Ft.TEAM},teamAdminConsole:{slug:"team-admin-console",hasMissingResource:(e,r)=>{let{teamId:n,teamAdminConsoleViewTab:a}=r;return function({isAdminTeam:e,teamAdminConsoleViewTab:r,teamId:n,teams:a}){return(r===U.Iv.BILLING||r===U.Iv.DASHBOARD)&&(!e||!a[n]||a[n].student_team||!(0,w.w5)(a[n]))}({isAdminTeam:(0,C.canAdminTeam)(n,e),teamAdminConsoleViewTab:a,teamId:n,teams:e.teams})},missingResourceType:x.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId||e.teamAdminConsoleViewTab!==r.teamAdminConsoleViewTab||e.teamAdminConsoleViewSecondaryTab!==r.teamAdminConsoleViewSecondaryTab},addCollaborators:{slug:"add-collaborators",i18nName:()=>(0,h.t)("view_selectors.file_browser.add_collaborators"),hasMissingResource:()=>!1},teamUpgrade:{slug:"upgrade-team",hasMissingResource:(e,r)=>!(0,s.k)().redirect_starter_team_loophole&&null===r.teamId&&(0,x.jX)(r.teamFlowType)||!!r.teamId&&!(r.teamId in e.teams),missingResourceType:x.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId||e.paymentStep!==r.paymentStep,skipBrowserHistory:e=>e.paymentStep===D.tn.CONFIRM_PAY},promoReview:{slug:"promo-review",hasMissingResource:(e,r)=>!(r.teamId in e.teams),missingResourceType:x.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId,skipBrowserHistory:()=>!0},eduReview:{slug:"edu-review",hasMissingResource:(e,r)=>!(r.teamId in e.teams),missingResourceType:x.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId,skipBrowserHistory:()=>!0},teamFeed:{slug:"feed-posts",i18nName:()=>(0,h.t)("view_selectors.file_browser.feed"),hasMissingResource:()=>!1,areDifferent:(e,r)=>e.postUuid!==r.postUuid},litmus:{slug:"litmus",hasMissingResource:()=>!1},componentBrowserLibrary:{slug:"library",hasMissingResource:()=>!1},seatRequests:{slug:"seat-requests",i18nName:()=>(0,h.t)("admin_dashboard.requests.seat_title"),hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e);return function({isAdminOrg:e,permissions:r,teams:n,view:a}){if(a.adminPlanType!==k.O.ORG)return!(a.planId in n);{let n=(0,A.wA)(r),a=(0,S.xw)(r);return!n||!a||!e}}({isAdminOrg:(0,C.canAdminOrg)(e.currentUserOrgId,n),permissions:n,teams:e.teams,view:r})}},workspace:{slug:"workspace",missingResourceType:x.Ft.WORKSPACE,hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e),a=(0,A.wA)(n),i=(0,S.xw)(n);if(!a||!i||!a.bigma_enabled)return!0;switch(r.subView){case G.V0.DIRECTORY:case G.V0.ADMIN:default:return!1}},areDifferent:(e,r)=>e.subView!==r.subView||e.workspaceId!==r.workspaceId||e.selectedTab!==r.selectedTab},licenseGroup:{slug:"billing-group",missingResourceType:x.Ft.LICENSE_GROUP,hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e);return function({isAdminOrg:e,permissions:r,view:n}){let a=(0,A.wA)(r),i=(0,S.xw)(r);return!a||!i||!a.bigma_enabled||n.subView===O.GN.ADMIN&&!e&&!i.license_admin}({isAdminOrg:(0,C.canAdminOrg)(e.currentUserOrgId,n),permissions:n,view:r})},areDifferent:(e,r)=>e.subView!==r.subView||e.licenseGroupId!==r.licenseGroupId||e.selectedTab!==r.selectedTab},billingGroupDashboard:{slug:"billing-group-dashboard",hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e),a=(0,A.wA)(n),i=(0,S.xw)(n);return!a||!i||!a.bigma_enabled},areDifferent:(e,r)=>e!==r},orgDomainManagement:{slug:"domains",i18nName:()=>(0,h.t)("view_selectors.file_browser.org_domain_management"),hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e),a=(0,A.wA)(n),i=(0,S.xw)(n);return!a||!i||!(0,C.canAdminOrg)(e.currentUserOrgId,n)}},orgIdpManagement:{slug:"idps",i18nName:()=>(0,h.t)("view_selectors.file_browser.org_idp_management"),hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e),a=(0,A.wA)(n),i=(0,S.xw)(n);return!a||!i||!(0,C.canAdminOrg)(e.currentUserOrgId,n)}},abandonedDraftFiles:{slug:"abandoned_draft_files",i18nName:()=>(0,h.t)("org_admin_tab.abandoned_drafts"),hasMissingResource:()=>!1},orgAdminSettings:{slug:"admin",i18nName:()=>(0,h.t)("view_selectors.file_browser.org_admin"),hasMissingResource:(e,r)=>{let n=(0,C.getPermissionsStateMemoized)(e);return function({isAdminOrg:e,permissions:r,orgAdminSettingsViewTab:n,orgAdminSettingsViewSecondaryTab:a}){let i=(0,A.wA)(r),o=(0,S.xw)(r),s=r.currentUserOrgId&&(0,A.kA)(r.orgById[r.currentUserOrgId]);return!(i&&o&&(n!==R.J7.WORKSPACES&&a!==R.SN.WORKSPACES||!r.currentUserOrgId||s)&&(e||o.license_admin||o.workspace_users?.some(e=>"admin"===e.permission)))||n===R.J7.BILLING&&a===R.G_.BILLING_GROUPS&&!s}({isAdminOrg:(0,C.canAdminOrg)(e.currentUserOrgId,n),permissions:n,orgAdminSettingsViewTab:r.orgAdminSettingsViewTab,orgAdminSettingsViewSecondaryTab:r.orgAdminSettingsViewSecondaryTab})},areDifferent:(e,r)=>e.orgAdminSettingsViewTab!==r.orgAdminSettingsViewTab||e.orgAdminSettingsViewSecondaryTab!==r.orgAdminSettingsViewSecondaryTab||!c()(e.orgAdminMembersTabFilters,r.orgAdminMembersTabFilters)||!c()(e.orgAdminMembersTabSort,r.orgAdminMembersTabSort)},search:{slug:"search",hasMissingResource:()=>!1,areDifferent:(e,r)=>e.entryPoint!==r.entryPoint,stripFuidParam:e=>"community"===e.entryPoint},user:{slug:"user",i18nName:()=>(0,h.t)("view_selectors.file_browser.user"),hasMissingResource:()=>!1,areDifferent:(e,r)=>e.userViewTab!==r.userViewTab||e.userId!==r.userId},recentsAndSharing:{slug:"recents-and-sharing",i18nName:()=>(0,h.t)("view_selectors.file_browser.recents_and_sharing"),hasMissingResource:()=>!1},draftsToMove:{slug:"drafts-to-move",i18nName:()=>(0,h.t)("view_selectors.file_browser.drafts_to_move"),hasMissingResource:()=>!1},resourceHub:{slug:"resources",i18nName:()=>(0,h.t)("view_selectors.file_browser.templates_and_tools"),hasMissingResource:()=>!1}},z=Object.keys(H),K=Object.values(H).map(e=>e.slug),W=e=>!!e&&/^[0-9]+$/.test(e);function j({resourceType:e,matchingViewName:r,extra:n}){(0,m.$D)(o.e.EXPLORE,Error(`Invalid ${e} ID while parsing selected view ${r} from path`),{extra:{matchingViewName:r,...n}})}class Y{pathToSelectedView(e,r,n,a){if("my_plugins"===r[1]&&e.user)return{view:"user",userId:e.user.id,userViewTab:B.o.PLUGINS};if("files"!==r[1])return null;if("drafts"===r[2])return{view:"folder",folderId:e.user?.drafts_folder_id};if("recent"===r[2])return{view:"recentsAndSharing"};let l=z.find(e=>H[e].slug===r[2]);if(!l)return null;switch(l){case"folder":{let e=r[3];if(!W(e))return j({resourceType:"folder",matchingViewName:l,extra:{folderId:e}}),null;if(!e)return{view:"resourceUnavailable",resourceType:x.Ft.PROJECT};let a=!1;return n&&null!=(0,p.qg)(n).renameProject&&(a="true"===(0,p.qg)(n).renameProject),{view:l,folderId:e,shouldShowRenameModal:a}}case"allProjects":case"team":{let a,o,s,c,d,u=U.A$.HOME;if(4===r.length){let e=(0,i.K)(U.A$,r[r.length-1]);e&&e!==U.A$.PROFILE&&(u=e)}if(5===r.length||6===r.length){if("restore"===r[5])return null;let e=(0,i.K)(U.A$,r[r.length-1]);e&&e!==U.A$.PROFILE&&(u=e)}if(!W(d=e.currentTeamId?e.currentTeamId:r[3]))return void 0!==d&&j({resourceType:"team",matchingViewName:l,extra:{teamId:d,"!!state.currentTeamId":!!e.currentTeamId,"!!state.currentUserOrgId":!!e.currentUserOrgId,"parts.length":r.length}}),null;let m=d&&e.teams[d];if(m&&n){let e=new URLSearchParams(n).get("upgrade_type");e&&(c=(0,i.K)(v.G_,e))}return n&&null!=(0,p.xL)(n).rciid&&(a=(0,p.xL)(n).rciid),m&&n&&null!=(0,p.qg)(n).proUpgrade&&(o="true"===(0,p.qg)(n).proUpgrade),n&&null!=(0,p.qg)(n).assetTransferRequest&&(s=(0,p.qg)(n).assetTransferRequest),{view:"team",teamId:d,teamViewTab:u,upgradeModalType:c,isProUpgrade:o,assetTransferRequestId:s,showResourceConnectionInviteModal:a}}case"teamAdminConsole":{let a,o;if(!e.currentTeamId)return null;let s=null,c=null;if(r.length>=4){let e=(0,i.K)(U.Iv,r[3]);if(e&&(s=e),e&&r.length>=5){let n=r[4];switch(e){case U.Iv.CONTENT:a=(0,i.K)(U.F9,n);break;case U.Iv.BILLING:a=(0,i.K)(U.pu,n)}}}if(!W(c=e.currentTeamId))return j({resourceType:"team",matchingViewName:l,extra:{currentTeamId:c}}),null;let d=!!e.teams[c]?.pro_team;s||(s=d?U.Iv.DASHBOARD:U.Iv.MEMBERS);let u="";return d&&n&&(0,p.qg)(n).dashEntryPoint&&(s=U.Iv.DASHBOARD,u=(0,p.qg)(n).dashEntryPoint),s===U.Iv.CONTENT&&a===U.F9.CONNECTED_PROJECTS&&n&&null!=(0,p.xL)(n).rciid&&(o=(0,p.xL)(n).rciid),{view:l,teamId:c,teamAdminConsoleViewTab:s,teamAdminConsoleViewSecondaryTab:a,isProTeam:d,dashDeepLinkEntryPoint:u,showResourceConnectionInviteModal:o}}case"limitedTeamSharedProjects":{let r;if((0,s.k)().limited_plan_spaces&&e.currentTeamId&&(r=e.currentTeamId),!r)return null;return{view:"limitedTeamSharedProjects"}}case"addCollaborators":return{view:l,teamId:r[3]};case"teamUpgrade":{let e=new URLSearchParams(n),a=!!(0,s.k)().redirect_starter_team_loophole&&!(0,s.k)().close_starter_team_loophole,i=Object.values(x.SC).includes(r[4])?r[4]:x.SC.UPGRADE_EXISTING_TEAM;if(a&&i!==x.SC.UPGRADE_EXISTING_TEAM)return(0,m.$D)(o.e.MONETIZATION_UPGRADES,Error("Invalid team flow type while parsing selected view from path"),{extra:{matchingViewName:l,parts:r}}),{view:"teamCreation",fromNewTab:!0};let c=Object.values(D.tn).includes(r[4])?r[4]:D.tn.CHOOSE_PLAN,d=r[5]||c,u=e.get("planType")?parseInt(e.get("planType")):i===x.SC.UPGRADE_EXISTING_TEAM?x.Sc.TEAM:void 0,p=(0,x.ck)(i,d)?void 0:u,_=r[3];if("n"===_){if(_=null,a)return(0,m.$D)(o.e.MONETIZATION_UPGRADES,Error("Null team ID while parsing selected view from path"),{extra:{matchingViewName:l,parts:r}}),{view:"teamCreation",fromNewTab:!0}}else if(!W(_))return j({resourceType:"team",matchingViewName:l,extra:{teamId:_}}),null;return{view:l,teamFlowType:i,teamId:_,paymentStep:d,...e.get("entryPoint")?{entryPoint:parseInt(e.get("entryPoint"))}:{},...e.get("billingPeriod")?{billingPeriod:parseInt(e.get("billingPeriod"))}:{},...e.get("onCompleteRedirectFileKey")?{searchParams:{onCompleteRedirectFileKey:e.get("onCompleteRedirectFileKey"),onCompleteRedirectNodeId:e.get("onCompleteRedirectNodeId")}}:{},...p?{planType:p}:{}}}case"promoReview":{let e=r[3];if(!W(e))return j({resourceType:"team",matchingViewName:l,extra:{teamId:e}}),null;return{view:l,teamId:r[3],teamName:r[4]}}case"eduReview":{let e=r[3];if(!W(e))return j({resourceType:"team",matchingViewName:l,extra:{teamId:e}}),null;return{view:l,teamId:e}}case"licenseGroup":{let e;let a=(0,b.g)(r[5]),i=(0,I.E)(n);a===O.RM.MEMBERS&&(e=i??P.oU);let o=new URLSearchParams(u.Ay.location.search).get(y.u5),s=o?(0,y.vQ)(o):void 0,c=r[3];if(!W(c))return j({resourceType:"license group",matchingViewName:l,extra:{licenseGroupId:c}}),null;return{view:l,subView:O.GN.ADMIN,licenseGroupId:c,selectedTab:a,orgAdminMembersTabSort:e,orgAdminOriginTab:s}}case"billingGroupDashboard":return{view:l,selectedTab:(0,i.K)(L.D,r[3]??"")??L.D.REQUESTS};case"seatRequests":if(null===e.currentUserOrgId)return{view:l,adminPlanType:k.O.TEAM,planId:e.currentTeamId??""};return{view:l,adminPlanType:k.O.ORG,planId:e.currentUserOrgId};case"workspace":{let e=r[3];if(((0,i.K)(G.V0,r[4])||G.V0.DIRECTORY)===G.V0.ADMIN){let a;let o=(0,i.K)(G.m2,r[5])||G.rj[0],s=(0,I.E)(n);if(o===G.m2.MEMBERS&&(a=s??P.oU),!W(e))return j({resourceType:"workspace",matchingViewName:l,extra:{workspaceId:e}}),null;return{view:l,subView:G.V0.ADMIN,workspaceId:e,selectedTab:o,orgAdminMembersTabSort:a}}{let n=e;if(e===V.O)n=null;else if(!W(e))return j({resourceType:"workspace",matchingViewName:l,extra:{workspaceId:e}}),null;return{view:l,subView:G.V0.DIRECTORY,workspaceId:n,selectedTab:(0,i.K)(G.dN,r[5])||G.Fi[0]}}}case"orgAdminSettings":{let a,o;if(r.length>=4&&(a=(0,i.K)(R.J7,r[3]))&&r.length>=5){let e=r[4];switch(a){case R.J7.RESOURCES:o=(0,i.K)(R._d,e);break;case R.J7.CONTENT:o=(0,i.K)(R.SN,e);break;case R.J7.BILLING:o=(0,i.K)(R.G_,e??"")}}a===R.J7.WORKSPACES?(a=R.J7.CONTENT,o=R.SN.WORKSPACES):a===R.J7.TEAMS&&(a=R.J7.CONTENT,o=R.SN.TEAMS);let s={view:"orgAdminSettings",orgAdminSettingsViewTab:a=a??R.J7.DASHBOARD,orgAdminSettingsViewSecondaryTab:o,orgAdminMembersTabFilters:P.J0,orgAdminMembersTabSort:P.oU};a===R.J7.DASHBOARD&&n&&null!=(0,p.qg)(n).dashEntryPoint&&(s.dashDeepLinkEntryPoint=(0,p.qg)(n).dashEntryPoint);let l=(0,T.rT)(n,e.licenseGroups);a===R.J7.MEMBERS&&l&&(s.orgAdminMembersTabFilters=l);let c=(0,I.E)(n);if(a===R.J7.MEMBERS&&n&&"date-upgraded"===(0,p.qg)(n).initialSort?s.orgAdminMembersTabSort={columnName:P.Od.DESIGN_ROLE,isReversed:!0}:a===R.J7.MEMBERS&&c&&(s.orgAdminMembersTabSort=c),a===R.J7.MEMBERS&&n&&null!=(0,p.qg)(n).orgJoinRequest&&(s.membersTabOrgJoinRequest=(0,p.qg)(n).orgJoinRequest),n&&null!=(0,p.qg)(n).assetTransferRequest&&(s.teamsTabAssetTransferRequest=(0,p.qg)(n).assetTransferRequest),a===R.J7.RESOURCES&&n&&(o===R._d.APPROVED_PLUGINS||o===R._d.APPROVED_WIDGETS)){let e=(0,p.qg)(n).eid;s.selectedExtensionId=e}return a===R.J7.CONTENT&&o===R.SN.CONNECTED_PROJECTS&&n&&null!=(0,p.xL)(n).rciid&&(s.showResourceConnectionInviteModal=(0,p.xL)(n).rciid),s}case"search":return{view:"search",entryPoint:"url:internal",previousView:{view:"recentsAndSharing"}};case"user":{if(r.length<4||!e.user)return null;let i=r[3],o=B.o.INTERNAL_PROFILE;if("settings"===r[r.length-1]&&i===e.user.id){let e=n&&(0,p.qg)(n).tab,r=a?a.slice(1):void 0;return{view:"recentsAndSharing",accountModalTab:e||x.bb.ACCOUNT,accountModalTabSection:r}}if("plugins"===r[r.length-1])return{view:"recentsAndSharing",accountModalTab:x.bb.PLUGINS};if("email_unsubscribe"===r[r.length-1]&&i===e.user.id){let e=n&&(0,p.qg)(n).policy;if(e)return{view:"recentsAndSharing",emailPolicyToUnsubscribeFrom:e};return{view:"recentsAndSharing",accountModalTab:x.bb.NOTIFICATIONS}}return(0,s.k)().xr_debounce_threshold&&"posts"===r[r.length-1]&&(o=B.o.INTERNAL_PROFILE_POSTS),{view:"user",userId:i,userViewTab:o}}case"feed":if(n){let e=(0,p.qg)(n);if(e.quickReplyFileKey&&e.quickReplyThreadId)return{view:"feed",quickReplyInfo:{fileKey:e.quickReplyFileKey,threadId:e.quickReplyThreadId}}}return{view:"feed"};case"teamFeed":{if(null===e.currentUserOrgId||!(0,s.k)().xr_debounce_threshold)return null;let n=new URLSearchParams(u.Ay.location.search);return{view:"teamFeed",postUuid:r[3],creatorId:n.get("creator_id")??void 0}}case"recentsAndSharing":{let e;if(r.length>=4&&(e=(0,i.K)(M.G,r[r.length-1])),!e)return{view:"recentsAndSharing"};return{view:"recentsAndSharing",tab:e}}case"teamCreation":return{view:l,fromNewTab:!0};case"abandonedDraftFiles":if(null===e.currentUserOrgId)return{view:l,abandonedDraftFolderId:r[r.length-1],adminPlanType:k.O.TEAM,planId:e.currentTeamId??""};return{view:l,abandonedDraftFolderId:r[r.length-1],adminPlanType:k.O.ORG,planId:e.currentUserOrgId};case"componentBrowserLibrary":{if(!(0,s.k)().dt_component_browser_file_browser)return null;let e=r[3];if(!e)return null;return{view:"componentBrowserLibrary",libraryKey:e,componentKey:r[5]}}case"litmus":return null;case"resourceHub":if(!(0,s.k)().cmty_resource_hub)return null;return{view:"resourceHub"};default:return{view:l}}}requireHistoryChange(e,r){let n=z.find(r=>r===e.view),i=z.find(e=>e===r.view);if(!n&&!i)return!1;let o=n&&H[n].skipBrowserHistory;if(o&&o(e))return!1;if(n!==i)return!0;if(n&&n===i){let a=H[n].areDifferent;return!!a&&a(e,r)}(0,a.KF)(!1,"view selector code which should be unreachable was reached")}selectedViewToPath(e,r){let n=z.find(r=>r===e.view);if(!n)return null;let i=H[n];if(i.isNonUrlAddressable)return null;let o={},l=i.slug;"folder"===e.view&&r.user?.drafts_folder_id===e.folderId&&(l="drafts");let c="";c=(0,N.i)(r);let m=`/files${c}/${l}`;switch(e.view){case"folder":if("drafts"===l)break;m+=`/${e.folderId}`;let h=this.selectedViewName(e,r);h&&(m+=`/${(0,_.sy)(h)}`);break;case"team":let f=this.selectedViewName(e,r)||"Team";r.currentTeamId?m=`/files${c}/all-projects`:(m+=`/${e.teamId}/${(0,_.sy)(f)}`,e.teamViewTab&&(m+=`/${e.teamViewTab}`));break;case"allProjects":e.isProUpgrade&&(o={...o,proUpgrade:e.isProUpgrade});break;case"componentBrowserLibrary":if(!(0,s.k)().dt_component_browser)break;m+=`/${e.libraryKey}`,e.componentKey?m+=`/component/${e.componentKey}/Component`:m+="/Library";break;case"teamAdminConsole":e.teamAdminConsoleViewTab&&(m+=`/${e.teamAdminConsoleViewTab}`),e.teamAdminConsoleViewSecondaryTab&&(m+=`/${e.teamAdminConsoleViewSecondaryTab}`),this.appendQueryParams(o,[g.mL,g.UC]);break;case"addCollaborators":case"eduReview":m+=`/${e.teamId}`;break;case"teamUpgrade":null===e.teamId?m+="/n":m+=`/${e.teamId}`,e.teamFlowType&&(m+=`/${e.teamFlowType}`),e.paymentStep&&(m+=`/${e.paymentStep}`);let E=new URLSearchParams(u.Ay.location.search);(e.searchParams||E)&&(o={...o,...E.get("onCompleteRedirectFileKey")?{onCompleteRedirectFileKey:E.get("onCompleteRedirectFileKey")}:{},...E.get("onCompleteRedirectNodeId")?{onCompleteRedirectNodeId:E.get("onCompleteRedirectNodeId")}:{},...e.searchParams}),e.billingPeriod&&(o={...o,billingPeriod:e.billingPeriod}),e.entryPoint&&(o={...o,entryPoint:e.entryPoint});let b=e.planType||x.Sc.UNDETERMINED;b&&(o={...o,planType:b});break;case"promoReview":m+=`/${e.teamId}/${e.teamName}`;break;case"abandonedDraftFiles":m+=`/${e.abandonedDraftFolderId}`;break;case"orgAdminSettings":e.orgAdminSettingsViewTab&&(m+=`/${e.orgAdminSettingsViewTab}`,"members"===e.orgAdminSettingsViewTab&&(e.orgAdminMembersTabFilters&&(o={...o,...(0,T.OA)(e.orgAdminMembersTabFilters,r.licenseGroups)}),e.orgAdminMembersTabSort&&(o={...o,...(0,I.n)(e.orgAdminMembersTabSort)})),e.orgAdminSettingsViewSecondaryTab&&(m+=`/${e.orgAdminSettingsViewSecondaryTab}`),this.appendQueryParams(o,[g.mL,g.UC]));break;case"licenseGroup":m+=`/${e.licenseGroupId}/${e.subView}/${e.selectedTab}`,e.selectedTab===O.RM.MEMBERS&&e.orgAdminMembersTabSort&&(o={...o,...(0,I.n)(e.orgAdminMembersTabSort)}),e.orgAdminOriginTab&&(o={...o,[y.u5]:e.orgAdminOriginTab});break;case"billingGroupDashboard":e.selectedTab===L.D.ALL_REQUESTS&&(m+=`/${e.selectedTab}`);break;case"workspace":switch(e.subView){case G.V0.ADMIN:m+=`/${e.workspaceId}/${e.subView}/${e.selectedTab}`,e.selectedTab===G.m2.MEMBERS&&e.orgAdminMembersTabSort&&(o={...o,...(0,I.n)(e.orgAdminMembersTabSort)});break;case G.V0.DIRECTORY:m+=`/${e.workspaceId??V.O}/${e.subView}/${e.selectedTab}`}break;case"search":let v=r.search.parameters;switch(o={model_type:v.searchModelType,...v.query&&{q:v.query},...v.fileTypeFilter&&{file_type:v.fileTypeFilter}},v.searchScope){case F.Rx.ORG:case F.Rx.ORG_GUEST:case F.Rx.PERSONAL:break;case F.Rx.COMMUNITY:m="/community/search";break;default:(0,a.xb)(v.searchScope)}break;case"user":let S=this.selectedViewName(e,r),A=S?`/${(0,_.sy)(S)}`:"";e.userViewTab===B.o.INTERNAL_PROFILE?m+=`/${e.userId}${A}`:e.userViewTab===B.o.INTERNAL_PROFILE_POSTS?m+=`/${e.userId}/posts`:e.userViewTab===B.o.PLUGINS&&(m+=`/${e.userId}/plugins`);break;case"teamFeed":e.postUuid&&(m+=`/${e.postUuid}`),e.creatorId&&(o={...o,creator_id:e.creatorId});break;case"recentsAndSharing":e.tab&&(m+=`/${e.tab}`);break;case"resourceHub":m=u.Ay.location.pathname,new URLSearchParams(u.Ay.location.search).forEach((e,r)=>{"fuid"!==r&&(o[r]=e)});break;case"litmus":"feed"===e.subView&&(m+=`/${e.projectId}`)}let w=!i.stripFuidParam||!i.stripFuidParam(e);return(r.user&&w&&(o.fuid=r.user.id),(0,d.O)()&&(o._app_shell="1"),0!==Object.keys(o).length)?`${m}?${(0,p.lF)(o)}`:m}selectedViewName(e,r){let n=z.find(r=>r===e.view);if(!n)return null;switch(e.view){case"folder":let a=r.folders[e.folderId];if(!a)return null;return(0,E.CI)(a);case"team":return r.teams[e.teamId]?.name??(0,h.t)("view_selectors.file_browser.team");case"teamAdminConsole":let i=r.teams[e.teamId]?.name;return(0,h.t)("view_selectors.file_browser.team_admin_console_with_name",{adminTeamName:i})??(0,h.t)("view_selectors.file_browser.team_admin_console_generic");case"teamUpgrade":if(e.teamFlowType===x.SC.CREATE_AND_UPGRADE||null===e.teamId)return(0,h.t)("view_selectors.file_browser.create_new_team");let o=r.teams[e.teamId]?.name;if(o)return(0,h.t)("view_selectors.file_browser.team_upgrade_with_name",{teamName:o});return(0,h.t)("view_selectors.file_browser.team_upgrade_generic");case"search":let{query:s}=r.search.parameters;return s?(0,h.t)("view_selectors.file_browser.search_results_with_query",{query:s}):(0,h.t)("view_selectors.file_browser.search_results_generic");case"user":let{orgUsersByOrgId:l,currentUserOrgId:c}=r,d=c&&l[c]||{};if(e.userViewTab===B.o.INTERNAL_PROFILE||e.userViewTab===B.o.INTERNAL_PROFILE_POSTS){let r=d[e.userId];return r?r.user.handle:""}if(e.userViewTab===B.o.PLUGINS)return(0,h.t)("view_selectors.file_browser.plugins");return"User";case"licenseGroup":return(0,h.t)("view_selectors.file_browser.billing_admin");case"workspace":if(e.subView===G.V0.ADMIN)return(0,h.t)("view_selectors.file_browser.workspace_admin");if(!e.workspaceId)return(0,h.t)("view_selectors.file_browser.other_teams");return(0,h.t)("view_selectors.file_browser.workspace");default:if(H[n].i18nName)return H[n].i18nName();return null}}selectedViewHasMissingResources(e,r){let n=z.find(e=>e===r.view);return!!n&&H[n].hasMissingResource(e,r)}selectedViewMissingResourceType(e){let r=z.find(r=>r===e.view);if(r)return H[r].missingResourceType}appendQueryParams(e,r){let n=new URLSearchParams(u.Ay.location.search);r.forEach(r=>{n.has(r)&&(e[r]=n.get(r))})}}},193544:(e,r,n)=>{n.d(r,{q_:()=>o});var a=n(382902),i=n(791368);let o=(0,i.QH)(a.zl,"FileBrowser");(0,i.h8)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")},e=>{let r=e.querySelector("#filebrowser-loading-progress-bar");if(!r)return;let n=r.getAnimations()[0],a=n?.effect?.getComputedTiming().duration;n&&"number"==typeof a&&(n.currentTime=a)})},544907:(e,r,n)=>{n(848318).createContext({canGoBack:!1,canGoForward:!1,goBack:()=>{},goForward:()=>{}})},742379:(e,r,n)=>{n.d(r,{E:()=>o}),n(848318);var a=n(311129),i=n(29188);function o(){return!!i.eD||(0,a.ce)()}n(73194),n(544907)},785992:(e,r,n)=>{n.d(r,{y:()=>y});var a=n(848318),i=n(301168);n(82433),n(63163),n(967688);var o=n(409612),s=n(244417),l=n(212885),c=n(31898),d=n(863270);n(481406);var u=n(353231),p=n(20687),m=n(970320),_=n(990652),h=n(892576),g=n(375006),f=n(880785);n(306886);var E=n(417669);function y({plugins:e,renderPluginDropdownButton:r}){return a.createElement(d.QE.Consumer,null,n=>a.createElement(b,{plugins:e,trackingContext:n.name,renderPluginDropdownButton:r}))}function b({plugins:e,trackingContext:r,renderPluginDropdownButton:n}){let d=(0,i.wA)(),h=(0,f.j_)(),g=(0,o.B)(),{showing:y,show:b,data:S}=(0,f.Di)();a.useEffect(()=>{d(l.Xt())},[d]);let A=a.useMemo(()=>e.map(e=>({plugin:e,version:(0,p.uF)(e)})),[e]),w=a.useCallback(({version:e})=>e.name??"",[]),C=a.useCallback(({plugin:e},n)=>{(0,u.Cu)({context:r,text:"Plugin Tile",pluginId:e.id}),g(e,n)},[g,r]),N=a.useCallback(e=>{if(1!==e.length)return;let r=e[0].plugin;d((0,c.to)({type:_.H,data:{plugin:r},showModalsBeneath:!0}))},[d]),L=a.useCallback((e,r,n)=>{1===e.length&&b({data:{publishedResource:e[0].plugin,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[b]),O=a.useCallback(({plugin:e})=>a.createElement(T,{plugin:e,renderPluginDropdownButton:n}),[n]);return a.createElement(a.Fragment,null,a.createElement(s.A,{items:A,getAriaLabel:w,viewType:m.XU.GRID,handleOpenItem:C,handleContextMenu:L,handleDeleteKey:h.unwrapOr(!1)?N:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{tileClassName:E.i1,containerStyle:I.grid,renderTile:v,renderTileFooter:O}}),y&&S&&a.createElement(f.ii,{dropdownData:S}))}function v({plugin:e}){return a.createElement(h.Ce,{plugin:e,isPublishing:!1,showNewBadge:!1,isPublicOverride:!1})}function T({plugin:e,renderPluginDropdownButton:r}){return a.createElement(h.Xg,{showInstallCount:!0,plugin:e,isPublicOverride:!1,dropdown:r?a.createElement(g.r,{resource:e}):void 0})}n(93911);let I={grid:{padding:"x15fnm84",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0}}},301869:(e,r,n)=>{n.d(r,{N:()=>h});var a=n(848318),i=n(301168);n(82433),n(967688);var o=n(777749),s=n(244417),l=n(212885),c=n(31898);n(913026);var d=n(20687),u=n(970320),p=n(688934),m=n(990652),_=n(880785);function h({widgets:e}){let r=(0,i.wA)(),n=(0,_.j_)();a.useEffect(()=>{r(l.gI())},[r]);let p=(0,o.s)(),{showing:h,show:y,data:b}=(0,_.Di)(),v=a.useMemo(()=>e.map(e=>({widget:e,version:(0,d.uF)(e)})),[e]),T=a.useCallback(({version:e})=>e.name??"",[]),I=a.useCallback(({widget:e},r)=>p(e,r),[p]),S=a.useCallback(e=>{if(1!==e.length)return;let n=e[0].widget;r((0,c.to)({type:m.H,data:{plugin:n},showModalsBeneath:!0}))},[r]),A=a.useCallback((e,r,n)=>{1===e.length&&y({data:{publishedResource:e[0].widget,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[y]);return a.createElement(a.Fragment,null,a.createElement(s.A,{items:v,getAriaLabel:T,viewType:u.XU.GRID,handleOpenItem:I,handleContextMenu:A,handleDeleteKey:n.unwrapOr(!1)?S:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{containerStyle:E.grid,renderTile:f,renderTileFooter:g}}),h&&b&&a.createElement(_.ii,{dropdownData:b}))}function g({widget:e,version:r}){return a.createElement("div",{className:"x78zum5 x1q0g3np xsdox4t x87ps6o"},a.createElement(p.aA,{widget:e,version:r,viewContext:"OrgWidgetsView"}))}function f({widget:e,version:r}){return a.createElement(p.Ke,{widget:e,version:r,isInItemsView:!0})}n(306886),n(93911);let E={grid:{padding:"x15fnm84",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0}}},306886:(e,r,n)=>{n(848318),n(20687)},506470:(e,r,n)=>{n.d(r,{x:()=>a}),n(848318),n(863270),n(991675),n(642204);let a="FILE_CREATION_OMNICREATE_DROPDOWN"},642204:(e,r,n)=>{n(848318),n(82433),n(967688),n(129170);var a=(e=>(e.REQUEST_UPGRADE="REQUEST_UPGRADE",e.REQUEST_SENT="REQUEST_SENT",e.ALPHA="ALPHA",e.BETA="BETA",e))(a||{})},769642:(e,r,n)=>{n.d(r,{AH:()=>h,GI:()=>E,pH:()=>f});var a=n(848318),i=n(301168),o=n(317720);n(870567);var s=n(410725),l=n(314979),c=n(967688),d=n(810505),u=n(31898);n(403253);var p=n(125761),m=n(819624),_=n(55116);let h="workspace";function g(e,r){let n=Array.from(e.keys()),a=Array.from(r.keys());return n.length===a.length&&n.every(n=>(0,i.bN)(e.get(n),r.get(n)))}function f(e,r={}){let n=function(e,r={}){let n=(0,p.TA)(),l=(0,i.d4)(e=>e.currentUserOrgId),c=a.useMemo(()=>e.map(e=>({fileKey:e,orgId:l})),[e,l]),d=(0,s.p)(_.PG0,c,r),u=(0,m.Au)(l),h=o.Qw.all([u,...d.map(e=>e.result)]);return o.Qw.useTransform(h,([r,...a])=>{let i=new Map;return a.forEach((a,o)=>{let{file:s}=a,c=e[o],d=s?.computedWorkspace?.workspace??null;if(!l||!s||!d){i.set(c,null);return}let u=d.pinnedFiles,p=u?.find(e=>e.file?.key===c),m=!!u&&u.length>=y,_=!!r&&r===d.id,h=d.canAdmin,g=p?.creator?.id===n,f=!p&&(_||h)&&(s.canPinToWorkspace||s.canEdit),E=f&&!m,b=p&&(g||h);if(f){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m});return}if(b){i.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:p.id,workspaceHasMaxPins:m});return}i.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m})}),i},g)}(a.useMemo(()=>e?[e]:[],[e]),r);return o.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function E(e){let r=(0,i.wA)();return a.useCallback((n,a)=>{if(a){r(l.s.error((0,c.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:y})));return}r(u.to({type:(0,d.a)(),data:{fileKey:n,source:e}}))},[r,e])}let y=8},956494:(e,r,n)=>{n(848318),n(82433),n(536384),n(87463),n(206639)},867499:(e,r,n)=>{n.d(r,{De:()=>u.D,G4:()=>M.G,v2:()=>E,U2:()=>D.U2,T1:()=>A,LK:()=>p.L,Hl:()=>N,hO:()=>a.h,d3:()=>y,eQ:()=>b,SW:()=>w,ni:()=>P,G1:()=>a.G,uZ:()=>T,yt:()=>C,m1:()=>I,cN:()=>D.cN,vz:()=>k.v});var a=n(809934),i=n(660376),o=n(382902),s=n(989232),l=n(182317),c=n(454805),d=n(803107),u=n(465700),p=n(634186),m=n(552807),_=n(274466),h=n(603592),g=n(775030),f=n(312495);let E="FRAGMENT_SEARCH_PEEK_MODAL";function y(e,r,n,a,o,s,l){return a?{entry_point:e,session_id:r,search_id:n,componentSuggestionSessionId:(0,g.r6)(),query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,i.xb)(e)}}(a),query_text:"input-text"===a.type?a.value:void 0,query_node_id:"input-selection"===a.type?a.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,_.A)(e.node)||1===e.node.childCount&&(0,_.A)(e.node.childrenNodes[0]);default:(0,i.xb)(e)}}(a),query_file_key:a.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(a),...v(s),is_in_preview:o,is_community_fragment_search:!!l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,componentSuggestionSessionId:(0,g.r6)(),...v(s),is_community_fragment_search:!!l}}function b(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,i.xb)(e)}}function v(e){return e&&e.searchModelType===h.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function T(e){return e?.type===E}function I(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let a=r/n;return new c.Mi(e.x*a,e.y*a)}return e}var S=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(S||{});function A(e,r="fragment-search"){let n;n="fragment-search"===r?I(new c.Mi(e.size.x,e.size.y)):I(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let a=(0,m._G)(n,e.guid,!1,void 0,!1,!0);return a&&a.pixels&&a.pixelSize&&a.displaySize&&(0,m.Pv)(a.pixels,a.pixelSize).split(";base64,").pop()||null}async function w(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),a=n.getContext("2d");n.width=r.x,n.height=r.y,a?.drawImage(e,0,0,r.x,r.y);let i=n.toDataURL("image/png").split(",");if(i.length>=2)return i[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,f.t)(n)}}function C(e){return new Promise((r,n)=>{let a=document.createElement("img"),i=URL.createObjectURL(e);a.onload=()=>{r(a),URL.revokeObjectURL(i)},a.onerror=e=>{n(e),URL.revokeObjectURL(i)},a.src=i})}async function N(e,r,n,c,u,p,m,_){let h=(0,l.g)(),g=Date.now(),f=o.zl.get(d.dd),E=y(r,f,h,e,!1,n,p),b="input-selection"===e.type?function(e){let r=e.editInfo;return{query_is_top_level_node:e.isTopLevelFrame(),query_num_descendant_nodes:e.getVisibleDescendantIds().length,query_is_component:e.isComponentish,query_depth_from_top_level_frame:e.depthFromTopLevelFrame,query_created_at:r?.createdAt,query_last_edited_at:r?.lastEditedAt,query_last_edited_by:r?.userId,query_edit_info_valid:!!r,query_node_type:e.type}}(e.node):{};a.h.setFragmentSearchLoading(h,e,c,p,u),(0,s.trackEvent)("Fragment search query",{...b,...E},{forwardToDatadog:!0});let v={session_id:f,search_id:h,node_id:"input-selection"===e.type?e.node.guid:""};try{let o=[];switch(e.type){case"input-image":o=await O(e,v,n,u,p);break;case"input-text":o=await R(e,v,n,u,p,_);break;case"input-selection":o=await L(e,v,n,u,p);break;default:(0,i.xb)(e)}let l=[];if(l=p?o.map(e=>({...e,type:"hub-file-fragment"})):o.map(e=>({...e,type:"fig-file-fragment"})),a.h.getSearchId(p)!==h)return;(0,s.trackEvent)("Fragment search time to load",{...E,elapsed_time:Date.now()-g}),(0,s.trackEvent)("Fragment search result",{...E,count:o.length}),a.h.setFragmentSearchResults(h,l,r,p),m&&m()}catch(e){if(a.h.getSearchId(p)!==h)return;a.h.setFragmentSearchError(h,e,p)}}async function L(e,r,n,a,i){let{node:o,file_key:s}=e,l=A(o);if(!l)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:l},s,r,n,a,i)).data.meta.results}async function O(e,r,n,a,i){let o=await C(e.imageFile),s=I(new c.Mi(o.width,o.height)),l=await w(o,s,e.imageFile);return(await u.D.postFragmentSearch(l,e.file_key,r,n,a,i)).data.meta.results}async function R(e,r,n,a,i,o){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,a,i,o)).data.meta.results}async function P(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;p.L.setIndexedFragmentData(n)}var D=n(125864),k=n(144081),M=n(182284)},706610:(e,r,n)=>{n.d(r,{l1:()=>eu.l}),n(829084);var a=n(848318),i=n(301168),o=n(660376),s=n(354427),l=n(656329),c=n(746571),d=n(858839),u=n(922484),p=n(603592),m=n(970320),_=n(829647),h=n(773511),g=n(410725),f=n(50429),E=n(720522),y=n(967688),b=n(629117),v=n(376613),T=n(983178),I=n(55116),S=n(98449),A=n(660744),w=n(32909),C=n(295933),N=n(136254),L=n(815599),O=n(649167),R=n(150269),P=n(505145),D=n(44395),k=n(625002),M=n(727585),F=n(559361);let x={[p.uH.HUB_FILES]:D.A,[p.uH.PUBLIC_PLUGINS]:k.A,[p.uH.PRIVATE_PLUGINS]:null,[p.uH.PUBLIC_PROFILES]:P.A,[p.uH.FILES]:null,[p.uH.PROJECTS]:null,[p.uH.TEAMS]:null,[p.uH.USERS]:null,[p.uH.PUBLIC_WIDGETS]:M.A,[p.uH.PRIVATE_WIDGETS]:null},U={[p.uH.PUBLIC_PLUGINS]:C.Of,[p.uH.PRIVATE_PLUGINS]:w.Of,[p.uH.PUBLIC_PROFILES]:R.hP,[p.uH.PUBLIC_WIDGETS]:N.nD.listStyle,[p.uH.PRIVATE_WIDGETS]:N.uB.listStyle};class B extends a.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),S.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),S.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e;if(this.props.viewMode===m.XU.LIST)e=U[this.props.searchModelType]??R.p_;else if(this.props.viewMode===m.XU.GRID)switch(this.props.searchModelType){case p.uH.FILES:case p.uH.TEAMS:case p.uH.PROJECTS:case p.uH.PUBLIC_PLUGINS:case p.uH.PRIVATE_PLUGINS:case p.uH.PUBLIC_WIDGETS:case p.uH.PRIVATE_WIDGETS:case p.uH.USERS:break;case p.uH.PUBLIC_PROFILES:case p.uH.HUB_FILES:case p.uH.PUBLIC_PROFILES:e=R.Vg;break;default:(0,o.xb)(this.props.searchModelType)}else(0,o.xb)(this.props.viewMode);e+=this.props.isLoggedIn?` ${R.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return a.createElement(f.x,{isLoading:this.props.isLoading,className:R.g4},()=>this.props.didFail?a.createElement(V,{illustration:F.A,resourceTypeDisplayString:this.props.failureMessage||(0,y.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?a.createElement(V,{illustration:x[this.props.searchModelType],resourceTypeDisplayString:(0,p.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):a.createElement("div",{className:R.sb},a.createElement("div",{className:e},a.createElement(L.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode:this.props.viewMode,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,b.H)(this.props.dropdownShown);return(0,T.D6)(this.props.currentOrgId)&&e&&a.createElement(v.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===p.uH.FILES?void 0:this.props.viewMode===m.XU.LIST?R.UL:R.G2;return a.createElement(A.Q0,{isDropdown:!1,...this.props},a.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===p.uH.PROJECTS&&this.renderProjectContextMenu())}}B.displayName="SearchResultView";let G=(0,i.Ng)((e,r)=>({viewMode:(0,O.zQ[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView).viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}),(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,a)=>{e(d.w2({sessionId:r,query:n,queryId:a}))}}))(B);function V(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,i.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,g.Rs)(I.N63,{orgId:s??null}),c=a.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,p=a.useMemo(()=>a.createElement(a.Fragment,null,n,null!==r?a.createElement(a.Fragment,null,"\xa0",a.createElement("span",{className:R.xV},r)):null,null!=d&&a.createElement(a.Fragment,null," in the ",a.createElement("span",{className:R.xV},d.name)," workspace",a.createElement("br",null),a.createElement(h.E,{className:R.YF,onClick:()=>{u&&u()},"aria-label":(0,y.t)("search.empty_state.try_searching_whole_org")},(0,y.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return a.createElement("div",{className:R.p$},e.illustration&&a.createElement(E.B,{className:R.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:R.jI},a.createElement("span",{className:R.q6},p)),e.cta?a.createElement("div",{className:R.Ki},e.cta):null)}V.displayName="SearchResultEmptyState";class H extends a.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===p.uH.FILES){let r=e.searchResults??z,n=this.props.searchResults??z,a=r.length!==n.length;if(!a)for(let e=0;e<r.length;e++)(0,s.c2)(r[e],n[e])||(a=!0);if(a){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===p.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case m.t2.ANY:return!0;case m.t2.DESIGN:return"design"===n.editor_type;case m.t2.FIGJAM:return"whiteboard"===n.editor_type;case m.t2.SITES:return"sites"===n.editor_type;case m.t2.SLIDES:return"slides"===n.editor_type;case m.t2.COOPER:return"cooper"===n.editor_type;case m.t2.MAKE:return"figmake"===n.editor_type;case m.t2.PROTOTYPE:return!1;default:(0,o.xb)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??z,r=this.getFilteredResults(e,this.props.sortFilterConfig);return a.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?a.createElement(_.o,null):void 0,viewbar:a.createElement(O.ZG,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:a.createElement(G,{didFail:this.didFail(),didSucceed:this.didSucceed(),failureMessage:this.getFailedReason(),isLoading:this.isLoading(),onChangeSortState:this.props.onChangeSortState,planFilter:this.props.parameters.planFilter,query:this.props.completedQuery,searchModelType:this.props.searchModelType,searchResults:r,searchScope:this.props.parameters.searchScope,sortState:this.props.parameters.sortState})})}}H.displayName="SearchPageView";let z=[];(0,i.Ng)((e,r)=>{let n=e.search.parameters,a=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:a?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))(H),n(536384),n(63163),n(173926),n(279144);var K=n(561258);n(439382),n(847240),n(645778),n(284902),n(807949),n(72462),n(633468),n(841758).uQ;n(19180);var W=n(382902),j=n(410441);n(867499),n(31898),n(209595);var Y=n(213906);n(523141);var $=n(517585),q=n(755534),X=n(843117),J=n(446951),Z=n(414607),Q=n(558358),ee=n(18757),et=n(150143),er=n(412590),en=n(52493),ea=n(223514),ei=n(864768),eo=n(564779),es=n(27776),el=n(981129);let ec=(0,j.jz)(es.RAo),ed=(0,j.jz)(es.aIx);(0,J.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.modalShown),n=(0,i.d4)(e=>e.search.sessionId),o=(0,W.md)(ei.Q),[s,l]=(0,W.fp)(Y.z5),c=(0,W.md)(Y.L8),d=(0,ea.A)();a.useEffect(()=>()=>{n&&S.vj.Session.searchModalExit(n)},[n]);let u=a.useCallback(()=>{e(X.ky()),s&&(l(null),d(p.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let m=r.data.width?{width:`${r.data.width-2*ec}px`}:void 0;return a.createElement(Z.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${ec}px 0`,size:r.data.width??ed,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},a.createElement(K.dP,null,a.createElement(er.a3.Provider,{value:er.Vm.PREVIEW},a.createElement("div",{className:el.PP,style:m},a.createElement($.Y,{hideSearchPreview:r.data?.hideSearchPreview})),a.createElement(q.P,{className:el.xx},s&&a.createElement("div",{className:el.v$},a.createElement(Q.s,{facetType:s,id:"facet-panel",path:[3]})),a.createElement(en.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?a.createElement(et.j,{id:"search-results",path:[5]}):a.createElement(ee.n,{id:"recents",path:[5]})))))},eo.r),n(938982),n(998568),n(913026),n(302395),n(318147),n(407638),n(693246),n(138528),(0,j.jz)(es.RAo),n(156974),n(297638),n(453370),n(594602),n(125761),n(335744),n(786343),n(20513),n(482138);var eu=n(665599)},665599:(e,r,n)=>{n.d(r,{l:()=>T});var a=n(848318),i=n(301168),o=n(382902),s=n(720522),l=n(297638),c=n(967688),d=n(213906),u=n(13388),p=n(558358),m=n(1749),_=n(223514),h=n(907902),g=n(453370),f=n(594602),E=n(511067),y=n(603592),b=n(154709);let v=e=>{switch(e){case y.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case y.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case y.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function T({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:T,contentTargetRef:I}){let S=(0,i.wA)(),A=a.useRef(null),w=I||A,C=(0,E.Um)(),N=C?.type===e,L=(0,o.md)((0,d.l4)(r??null)),O=(0,m.f)(),R=(0,_.A)(),P=y.uR.DROPDOWN,D=a.useMemo(()=>{switch(r){case y.WY.RESOURCE:return(0,c.t)("search.facets.filter_by_resource");case y.WY.CREATOR:return(0,c.t)("search.facets.filter_by_creator");case y.WY.SPACE:return(0,c.t)("search.facets.filter_by_space");default:return"Filter"}},[r]),k=T?l.s.relative.lhNormal.flex.itemsCenter.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:"facet_dropdown_entry--dropdownContainer--VoPFx tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",M=T?l.s.ml8.flex.itemsCenter.$:"facet_dropdown_entry--caretContainer--4agJ1 tile_sort_filter--caretContainer--kkZQq",F=n&&n.current?n.current.getBoundingClientRect().right:void 0;return a.createElement("div",{className:k,onMouseDown:n=>{n.stopPropagation(),S(f.an()),N?(S(g.oB()),R(P,r)):w.current&&(n.preventDefault(),S(g.j7({type:e,data:{facetType:r,targetRect:w.current.getBoundingClientRect()}})),O(P,r))},onClick:e=>e.stopPropagation(),role:"combobox","aria-expanded":N,"aria-haspopup":"listbox","aria-controls":e,"aria-label":D,tabIndex:-1},a.createElement("span",{ref:w,className:l.s.noWrap.$},!L||(0,u.II)(L)?v(r):(0,u.yA)(L)),a.createElement("div",{className:M},a.createElement(s.B,{svg:b.A,className:`facet_dropdown_entry--caret--XFove tile_sort_filter--caret--AJHA9 ${N?"facet_dropdown_entry--caretDown--ez1jh tile_sort_filter--caretDown--hIOid":""}`})),N&&a.createElement(h.G,{dropdownId:e,dropdownChild:a.createElement(p.s,{facetType:r,id:"",path:[]}),containerRefRight:F,limitHeight:T}))}},558358:(e,r,n)=>{n.d(r,{s:()=>g});var a=n(848318),i=n(301168),o=n(382902),s=n(867499),l=n(213906),c=n(390988),d=n(864768),u=n(453370),p=n(603592),m=n(877643),_=n(419361),h=n(428113);function g({facetType:e,id:r,path:n}){let g=(0,i.wA)(),f=(0,o.md)(d.Q8),E=(0,o.md)(d.sC),y=(0,i.d4)(e=>"search"===e.selectedView.view),b=(0,o.Xr)((0,l.l4)(e)),v=(0,o.Xr)(d.R9),T=(0,o.md)(s.hO.isFragmentSearchAtom),I=(0,c.L)(T?"fragment_search_modal":"file_browser",E,!0),S=a.useCallback((e,r,n)=>{e.preventDefault(),g(u.oB()),b(r),v(n?.searchModelType??null),I(f,p.uH.FILES,n,y,!1,!1)},[b,g,y,I,f,v]);return e===p.WY.RESOURCE?a.createElement(_.m,{id:`${r}-resource-panel`,path:[...n,0],setFacetValue:S}):e===p.WY.CREATOR?a.createElement(m.q,{id:`${r}-creator-panel`,path:[...n,1],setFacetValue:S}):e===p.WY.SPACE?a.createElement(h.i,{id:`${r}-space-panel`,path:[...n,2],setFacetValue:S}):null}},1749:(e,r,n)=>{n.d(r,{f:()=>u});var a=n(301168),i=n(382902),o=n(989232),s=n(843117),l=n(213906),c=n(291291),d=n(803107);function u(){let e=(0,i.Xr)(l.OM),r=(0,i.md)(d.dd),n=(0,a.d4)(e=>e.search.sessionId),u=(0,a.d4)(e=>e.search.queryId),p=(0,a.d4)(e=>e.search.parameters.query),m=(0,c.li)();return(a,i)=>{let l=(0,s.MZ)();(0,o.trackEvent)("facet_type_selected",{facetSessionId:l,fragmentSearchSessionId:r,sessionId:n,queryId:u,query:p,facet_entrypoint:a,facet_type:i,file_browser_entrypoint:m}),e(l)}}},907902:(e,r,n)=>{n.d(r,{G:()=>d});var a=n(848318),i=n(301168),o=n(561258),s=n(755534),l=n(412590),c=n(697409);function d({dropdownId:e,dropdownChild:r,containerRefRight:n,limitHeight:d}){let u=(0,i.d4)(e=>e.dropdownShown),p=!!u&&u.type===e,m=a.useRef(null);return(a.useLayoutEffect(()=>{if(!m.current||!p)return;let e=u.data.targetRect,{width:r}=m.current.getBoundingClientRect(),a=e.left+r+30,i=n||window.innerWidth;a>i&&(m.current.style.left=`${i-a}px`)}),p)?a.createElement("div",{className:c.Wm,ref:m},a.createElement(s.P,{className:d?c._o:c.T$},a.createElement(o.dP,null,a.createElement(l.a3.Provider,{value:l.Vm.DROPDOWN},r)))):null}},829084:(e,r,n)=>{n.d(r,{D$:()=>b,lV:()=>y});var a=n(848318),i=n(301168),o=n(660376),s=n(773511),l=n(347701),c=n(989232),d=n(297638),u=n(967688);n(912873);var p=n(453370);n(353231),n(636524),n(26435);var m=n(970320),_=n(442022),h=n(347104),g=n(776412),f=n(438690),E=n(464811);function y(e){let r=(0,i.d4)(e=>e.teams),n=(0,i.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return a.createElement("div",{className:d.s.flex.itemsCenter.$},a.createElement(g.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}let b={values:[m.ue.ASC,m.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case m.ue.ASC:switch(r){case m.rR.TIME:return(0,u.t)("tile.sort_filter.sort_direction_oldest_first");case m.rR.ALPHABETICAL:return(0,u.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,u.t)("tile.sort_filter.sort_direction_ascending")}case m.ue.DESC:switch(r){case m.rR.TIME:return(0,u.t)("tile.sort_filter.sort_direction_newest_first");case m.rR.ALPHABETICAL:return(0,u.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,u.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.xb)(e)}}};function v(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o=(0,i.d4)(e=>e.dropdownShown),g=o?.type===e.dropdownId,y=a=>{a.stopPropagation(),g?r(p.oB()):n.current&&r(p.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}}))},v=r=>e.includeSortDirection,T=e.disabled?E.b6:E.P2,I=(r,n)=>{(0,c.trackEvent)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,dir:n===m.ue.ASC?"asc":n===m.ue.DESC?"desc":void 0}),e.onChange(r,n)},S=[];e.values.length>1&&(e.hideSortOptionLabel||S.push({isChecked:!1,disabled:!0,displayText:(0,u.t)("tile.sort_filter.sort_by_label")}),e.values.forEach(r=>{let n=r===e.checkedValue;S.push({callback:()=>{I(r)},className:E.uK,isChecked:n,render:()=>a.createElement(h.S,{checked:n,text:e.valuesToDisplayText[r]}),highlightWhenActive:!0,displayText:""})}),e.includeSortDirection&&S.push({displayText:"",separator:!0})),e.includeSortDirection&&(S.push({isChecked:!1,disabled:!0,displayText:(0,u.t)("tile.sort_filter.order_label")}),e.tileSortValues.forEach(r=>{if(v(e.checkedValue)){let n=e.currentDirection===r;S.push({callback:()=>{I(e.checkedValue,r)},className:E.uK,isChecked:n,render:()=>a.createElement(h.S,{checked:n,text:b.valuesToDisplayText(r,(0,f.E)(e.checkedValue))}),highlightWhenActive:!0,displayText:""})}}));let A=g?a.createElement(_.j,{parentRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile??!0,lean:"right",leanPadding:0,items:S,onSelectItem:function(e){e.callback&&e.callback("",null,r)},dispatch:r}):null;return e.isMobile?A:a.createElement("div",{className:`${T} ${e.className||""} ${d.s.m0.$}`},a.createElement(s.E,{onClick:e=>{y(e)},"aria-expanded":g},a.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),a.createElement(l.O,null)),g?A:null)}let T={dropdownId:"tile-filter-creator-dropdown",values:[m.rJ.ANY,m.rJ.SELF,m.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[m.rJ.ANY]:(0,u.tx)("tile.sort_filter.created_by_anyone"),[m.rJ.SELF]:(0,u.tx)("tile.sort_filter.created_by_you"),[m.rJ.OTHER]:(0,u.tx)("tile.sort_filter.created_by_others")}};class I extends a.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(p.JF({selectedView:this.props.selectedView,config:n}))}}render(){return a.createElement(v,{dropdownId:T.dropdownId,values:T.values,textWhenClosedPrefix:T.textWhenClosedPrefix,valuesToDisplayText:T.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}I.displayName="TileFilterCreatorDropdown",m.Jh.CAN_BE_RESTORED_DELETED,m.Jh.CAN_BE_VIEWED,m.Jh.CAN_BE_RESTORED_DELETED,(0,u.tx)("tile.sort_filter.can_be_restored_permanently_deleted"),m.Jh.CAN_BE_VIEWED,(0,u.tx)("tile.sort_filter.can_be_viewed"),m.t2.ANY,m.t2.DESIGN,m.t2.FIGJAM,m.t2.SLIDES,m.t2.ANY,(0,u.tx)("tile.sort_filter.filter_by_all_files"),m.t2.DESIGN,(0,u.tx)("tile.sort_filter.filter_by_design_files"),m.t2.FIGJAM,(0,u.tx)("tile.sort_filter.filter_by_figjam_files"),m.t2.PROTOTYPE,(0,u.tx)("tile.sort_filter.filter_by_prototype_files"),m.t2.SITES,(0,u.tx)("tile.sort_filter.filter_by_sites_files"),m.t2.SLIDES,(0,u.tx)("tile.sort_filter.filter_by_slides_files"),m.t2.COOPER,(0,u.tx)("tile.sort_filter.filter_by_buzz_files"),m.t2.MAKE,(0,u.tx)("tile.sort_filter.filter_by_make_files");class S extends a.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[m.C0.NAME]:m.ue.ASC,[m.C0.CREATED_AT]:m.ue.DESC,[m.C0.TOUCHED_AT]:m.ue.DESC,[m.C0.TRASHED_AT]:m.ue.DESC,[m.C0.PROJECT_NAME]:m.ue.ASC,[m.C0.ACCESSED_AT]:m.ue.DESC,[m.C0.SHARED_AT]:m.ue.DESC,[m.C0.OWNER]:m.ue.DESC,[m.C0.SEARCH_RELEVANCE]:m.ue.DESC})[e]||m.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,a=void 0===r?this.getDefaultSortOrder(e):r,i={...n,sort:{key:e,dir:a}};this.props.dispatch(p.JF({selectedView:this.props.selectedView,config:i,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return a.createElement(v,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[m.C0.CREATED_AT]:(0,u.tx)("tile.sort_filter.sort_date_created"),[m.C0.TOUCHED_AT]:(0,u.tx)("tile.sort_filter.sort_last_modified"),[m.C0.ACCESSED_AT]:(0,u.tx)("tile.sort_filter.sort_last_viewed"),[m.C0.NAME]:(0,u.tx)("tile.sort_filter.sort_alphabetical"),[m.C0.TRASHED_AT]:(0,u.tx)("tile.sort_filter.sort_date_trashed"),[m.C0.SHARED_AT]:(0,u.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:b.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile})}}S.displayName="TileSortDropdown"},20513:(e,r,n)=>{n.d(r,{Kc:()=>h});var a=n(848318),i=n(301168),o=n(779492),s=n(250838),l=n(356572),c=n(518016),d=n(989232),u=n(967688),p=n(453370),m=n(970320);function _({viewMode:e,onViewModeChange:r,disabled:n}){let i=()=>{(0,d.trackEvent)("file_browser_view_mode_toggle",{newViewMode:m.XU.GRID}),r(m.XU.GRID)},p=()=>{(0,d.trackEvent)("file_browser_view_mode_toggle",{newViewMode:m.XU.LIST}),r(m.XU.LIST)};return a.createElement("form",null,a.createElement(o.bL,{value:e?.toString(),legend:a.createElement(s.q,null,(0,u.t)("fullscreen.view_mode.view_mode")),readonly:n,onChange:e=>{e===m.XU.GRID.toString()?i():p()}},a.createElement(o.c$,{value:m.XU.GRID.toString(),icon:a.createElement(l.t,null),"aria-label":(0,u.t)("fullscreen.view_mode.show_as_grid")}),a.createElement(o.c$,{value:m.XU.LIST.toString(),icon:a.createElement(c.Z,null),"aria-label":(0,u.t)("fullscreen.view_mode.show_as_list")})))}function h(e){let r=(0,i.wA)(),n=(0,i.d4)(r=>r.viewBarViewModeOptionByView[e.viewId])??e.defaultOptions.viewMode;return a.createElement(_,{viewMode:n,onViewModeChange:n=>{r(p.uV({viewId:e.viewId,viewMode:n}))},disabled:e.disabled})}},376613:(e,r,n)=>{n.d(r,{p:()=>R});var a=n(848318),i=n(301168),o=n(989232),s=n(410441),l=n(900552),c=n(329228),d=n(314979),u=n(967688),p=n(354643),m=n(738399),_=n(511783),h=n(792533),g=n(679111),f=n(31898),E=n(863270),y=n(353231),b=n(381673),v=n(5990),T=n(361053),I=n(520779),S=n(190731),A=n(386252),w=n(858541),C=n(442022),N=n(274016),L=n(111777),O=n(27776);function R({className:e,folder:r,useLGPerms:n}){let R=(0,i.d4)(e=>e.dropdownShown),P=(0,i.wA)(),D=(0,E.j6)(),k=function(e){let r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,i.d4)(e=>e.currentTeamId),a=(0,i.d4)(e=>e.loadedFolders),E=(0,w.S)(),y=(0,c.gY)(v.k4),C=r||n,R=(0,i.d4)(e=>e.teams),P=(0,l.YO)(e),D=(0,i.wA)();return({folder:e,shouldShowJoinButton:n})=>{let i=e.teamId,l=e&&i?R[i]:void 0,c=l?l.org_id:e.orgId;if("loaded"!==P.status)return[];let w=!!P.data?.canShare,k=!!P.data?.canMove,M=!!P.data?.canRestore,F=!!P.data?.canPermanentlyDelete,x=window.innerWidth<=(0,s.hG)(O.tgj),U=[];return e.trashedAt?(M&&U.push({displayText:(0,u.t)("project_menu.restore"),callback:()=>{(0,o.trackEvent)("Folder Restore Click",{folderId:e.id,teamId:i,orgId:c}),l&&!(0,T.rR)(l,{type:T.sK.ADD_PROJECT})?D(f.to({type:N.DV,data:{team:l,resource:I.vL.FOLDER,action:A.ZN.CREATE_FOLDER,currentPlan:b.F.Plan.STARTER,upsellPlan:b.F.Plan.PRO,editorType:null}})):y({folderId:e.id,team:l}).catch(()=>{D(d.s.error((0,u.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!M}),F&&U.push({displayText:(0,u.t)("project_menu.permanently_delete"),callback:()=>{(0,o.trackEvent)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:c}),D(f.to({type:(0,p.U)(),data:{folder:e,folderOrgId:c}}))},disabled:!F})):(U.push({displayText:(0,u.t)("file_browser.copy_link"),callback:()=>{let n=(0,S.EE)(e.id,r);D(h.S({url:n}))}}),n||(w&&x&&U.push({displayText:(0,u.t)("sidebar.share"),callback:()=>{D((0,v.jl)({folderId:e.id,loadedFolders:a})),D(f.to({type:L.W,data:{folderId:e.id}}))}}),(c===C||i===C)&&U.push({displayText:(0,u.t)("sidebar.move_project"),callback:()=>{D((0,v.jl)({folderId:e.id,loadedFolders:a})),D(f.to({type:m.J,data:{folderId:e.id}}))},disabled:!k}),E||U.push({displayText:e.isSubscribed?(0,u.t)("sidebar.remove_from_favorites"):(0,u.t)("sidebar.add_to_favorites"),callback:()=>{D(g.ZJ({folderId:e.id,teamId:e.teamId,isSubscribed:!e.isSubscribed}))}}),U.push({displayText:"",separator:!0}),U.push({displayText:(0,u.t)("project_menu.settings"),callback:()=>{D(f.to({type:_.l,data:{folderId:e.id}}))},trackingEventName:"Folder Settings Click",trackingProperties:{folderId:e.id,entryPoint:"Folder Context Menu"}}))),U}}(r.id),M=R?.data?.targetRect;if(!M)return null;let F=k({folder:r,useLGPerms:n});return a.createElement(E.fu,{name:"Folder Context Menu"},a.createElement(C.j,{className:e,items:F,parentRect:M,showPoint:!1,lean:"right",dispatch:P,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},P,r),e.trackingProperties&&(0,y.Cu)({...D.properties,trackingContext:e.trackingEventName||D.name,...e.trackingProperties})},shouldUsePortal:!0,autofocusPrevOnDismount:!0}))}},328797:(e,r,n)=>{n.d(r,{W:()=>N});var a=n(848318),i=n(301168),o=n(410441),s=n(314979),l=n(967688),c=n(896595),d=n(76e4),u=n(792533),p=n(453370),m=n(31898),_=n(524637),h=n(499668),g=n(472520),f=n(613733),E=n(318147),y=n(610345),b=n(407638),v=n(94831),T=n(386252),I=n(583940),S=n(442022),A=n(224376),w=n(38217),C=n(27776);function N({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:N,selectedTeamPermissions:L}){let O=(0,i.d4)(e=>e.dropdownShown),R=(0,i.wA)(),P=function(){let e=(0,i.d4)(e=>(0,b.getPermissionsState)(e)),r=(0,i.d4)(e=>e.selectedView),n=(0,i.d4)(e=>e.teamRoleRequests),a=(0,i.wA)(),S=(0,c.s)();return({onRenameClick:i,onChangeTeamIconClick:c,selectedTeamPermissions:N,team:L})=>{let O=()=>{a(p.oB()),a(m.to({type:w.p,data:{teamId:L.id}}))},R=(0,_.GR)(a,L.id),P=(0,_.GR)(a,L.id,v.e6.ADMIN),D=e=>{a(m.to({type:w.p,data:{teamId:e.id}}))},k=()=>{a(p.oB());let e=!!L.org_id,r=e=>{a(m.to({type:A.H,data:{team:L,subscriptionStatus:e}}))};e?r(!0):I.$.getSubscriptionStatus({teamId:L.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&a(s.s.error(e.data.message))})},M=e.roles.byTeamId[L.id]||{},F=Object.keys(M).filter(e=>!M[e].pending).length,x=(0,f.HZ)({oldValue:(0,b.canAdminOrg)(L.org_id,e),newValue:N.canAdminOrg,label:g.A.TeamContextMenuInTeamTiles.canAdminOrg,enableFullRead:(0,h.DQ)(h.Pw.GROUP_7),contextArgs:{currentTeamId:e.currentTeamId,currentUserOrgId:e.currentUserOrgId,selectedView:r?.view??null,teamOrgId:L.org_id},maxReports:5}),U=L?.org_access===E.bU.PUBLIC||F>1,B=window.innerWidth<=(0,o.hG)(C.tgj),G=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,T.bL)(L.id,L.org_id);a(u.S({url:e}))}}];return"search"===r.view&&L.org_id!==e.currentUserOrgId||(B&&G.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{S({teamId:L.id,canAdmin:N.canAdmin})}}),N.canAdmin&&G.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{a(p.oB()),i&&i(L)}}),N.canAdmin&&c&&G.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{a(p.oB()),c&&c(L)}}),G.push(...(()=>{let r=[];if(N.isInTeam)U&&r.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:O});else if(L.org_id){let i=(0,y.YP)(L,n[L.id],e,x);null!=i&&i!==y.gO.CLICK_JOIN&&r.push({displayText:(0,d.RI)({type:i,overrideLeaveText:(0,l.t)("teams_table.leave_team")}),callback:()=>{(0,d._S)({type:i,team:L,teamRoleRequest:n[L.id],onLeave:D,onJoin:R,onJoinAsAdmin:P,dispatch:a})}})}return(N.canDelete&&r.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:k}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),G}}();if(!L)return null;let D=P({team:r,onRenameClick:n,onChangeTeamIconClick:N,selectedTeamPermissions:L});return a.createElement(S.j,{className:e,items:D,parentRect:O?.data?.targetRect,showPoint:!1,lean:"right",dispatch:R,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},R,r)},autofocusPrevOnDismount:!0})}},106040:(e,r,n)=>{n.d(r,{BT:()=>l,Un:()=>u});var a=n(871043),i=n(186606),o=n(768618),s=n(382902);let l=(0,n(10082).vv)(()=>i.Ez5?.canvasGrid().canvasGridArray,[]),c=(0,s.eU)(e=>{let r=e(l),n=[];return r.forEach((e,r)=>{e.forEach((e,a)=>{let i=(0,o.UN)().get(e);i&&n.push({id:e,coord:{row:r,col:a},node:i})})}),n}),d=(0,s.eU)(e=>{let r=e(c),n=new Map;return r.forEach(e=>n.set(e.id,e)),n}),u=(0,s.eU)(e=>{let r=e(l),n=e(d);return r.reduce((e,r,i)=>(e[i]=r.map(e=>n.get(e)).filter(a.Vq),e),{})})},330383:(e,r,n)=>{n.d(r,{$j:()=>s});var a=n(382902),i=n(106040);function o(e,r,n){e&&(e.overlayTransform.m02!==r||e.overlayTransform.m12!==n)&&(e.overlayTransform={...e.overlayTransform,m02:r,m12:n})}function s({row:e,x:r=0,y:n=0}){let s=a.zl.get(i.Un)[e];if(s&&s.length>0){let e=s[0]?.node?.parentNode;e?.type==="SLIDE_ROW"&&o(e,r,n),s.forEach(e=>{e.node?.parentNode?.type==="MODULE"&&o(e.node.parentNode,r,n)})}}},35949:(e,r,n)=>{n.d(r,{cH:()=>u,qZ:()=>m}),n(848318);var a=n(82672),i=n(938982);n(186606),n(19180);var o=n(382902),s=n(998568);n(324762),n(355755),n(730143);var l=n(403425),c=n(700890);let d=n(403948),u=(0,o.eU)(!1);function p(e,r,n){let a;let o=n.get(r.symbolId);if(!o){(0,s.$D)(i.e.DEVELOPER_TOOLS,Error("Cant find backing component of parent node "+r.symbolId));return}let c=n.developerFriendlyIdFromGuid(e.guid);return(0,l.ph)(o,n,r=>{if(r.type===e.type&&c.endsWith(`;${r.guid}`))return a=r.name,l.Bn.Stop},!0),a}function m({node:e,instanceFigmadocs:r,template:n,openLibraryKey:i,scene:o,fileKey:s}){var u;let m=function({node:e,scene:r,fileKey:n,openLibraryKey:a}){if(!e||!n)return null;let i="SYMBOL"===e.type?e.guid:e.symbolId,o={key:(0,l.Gl)(e,r,a)??void 0,type:"INSTANCE",name:e.name,guid:e.guid,symbolId:i,properties:(0,l.Ji)(e),children:[]};for(let i of e.visibleChildren){let e=r.get(i);e&&function e(r,n,a,i,o,s){let c=n;if("INSTANCE"===r.type){let e=p(r,n,a),i=(0,l.Gl)(r,a,o),d=(0,l.Ji)(r),u=n.children.push({key:i??void 0,type:"INSTANCE",name:e??r.name,guid:r.guid,symbolId:r.symbolId,properties:d,children:[],path:s});c=n.children[u-1]}else if("TEXT"===r.type){let e=p(r,n,a);n.children.push({type:"TEXT",guid:r.guid,name:e??r.name,textContent:r.characters,path:s})}let d=s.concat([r.name]);for(let n of r.visibleChildren){let r=a.get(n);r&&e(r,c,a,i,o,d)}}(e,o,r,n,a,[])}return o}({node:e,scene:o,fileKey:s,openLibraryKey:i});if(!n||!e||!m)return Promise.resolve(void 0);let _=(0,a.w)({apiSource:d,template:n,nodeTreeToInject:m,instanceFigmadocs:r,inlineInstancesEnabled:!0,breakInTemplateExecution:!1,getInstanceFigmadocFromJSON:(u=o,function(e,r){let n=u.get(r);return n&&e?(0,l.kN)(e,n):null})});return(0,c.Nv)(_)}},700890:(e,r,n)=>{n.d(r,{Nv:()=>c,Oq:()=>l}),n(848318);var a=n(19180),i=n(382902),o=n(615233),s=n(810829);let l=(0,i.eU)(!1);function c(e,r=!1){let n=function(e,r=!1){if(!(0,a.k)().dt_code_connect_js_iframe||!e)return;r&&console.log("Code Connect Debug: iframe JS to be evaluated:",{js:e});let n=document.createElement("iframe");return n.style.cssText="display: none",n.setAttribute("sandbox","allow-scripts"),n.srcdoc=(0,s.D)((0,o.Ay)().csp_nonce,window.location.origin,!(0,a.k)().dt_code_connect_without_eval),document.body.appendChild(n),n}(e,r);return new Promise(r=>{window.addEventListener("message",function a(i){var o;o=e=>{window.removeEventListener("message",a),r(e)},n&&"null"===i.origin&&i.source===n.contentWindow&&("IFRAME_READY"===i.data.type?n.contentWindow?.postMessage({type:"EVAL",data:e},"*"):"EVAL_RESPONSE"===i.data.type&&(document.body.removeChild(n),o(i.data.data)))},!1)})}},652840:(e,r,n)=>{n.d(r,{_:()=>l});var a=n(848318),i=n(720522),o=n(754617),s=n(214912);function l({is24x24:e}){return a.createElement(i.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},869439:(e,r,n)=>{n.d(r,{C2:()=>d,Gx:()=>u});var a=n(848318),i=n(967688),o=n(530011),s=n(382153),l=n(49984),c=n(410936);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?a.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=a.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,i.tx)("community.detail_view.figma_partner_this_creator_is"),a.createElement("span",{className:c.kz},(0,i.tx)("community.learn_more")));return a.createElement(s.m_,{preview:r},e.children)}},118937:(e,r,n)=>{n.d(r,{QP:()=>E,V6:()=>m});var a=n(848318),i=n(301168),o=n(193675),s=n(967688);n(163472);var l=n(900003),c=n(913026),d=n(324747),u=n(987076);function p(e){let r=(0,l.bV)(e.resource.monetized_resource_metadata);return a.createElement(o.E,{size:e.size},r)}function m({size:e="md"}){return a.createElement(o.E,{size:e},(0,s.tx)("community.buyer.purchased"))}function _({size:e="md"}){return a.createElement(o.E,{size:e},(0,s.tx)("community.resource_tiles.paid"))}function h({size:e="md"}){return a.createElement(o.E,{size:e},(0,s.tx)("community.resource_tiles.paid"))}function g({size:e="md"}){return a.createElement(o.E,{size:e},(0,s.tx)("community.resource_tiles.free"))}var f=(e=>(e.PURCHASED="purchased",e.OFF_PLATFORM="off_platform",e.FREEMIUM="freemium",e.PRICE="price",e.FREE="free",e))(f||{});function E({resource:e,validBadges:r=Object.values(f)}){return function({resource:e,size:r="md",validBadges:n=Object.values(f),authedActiveCommunityProfile:i}){return e?!(i&&(0,c.cs)(i))&&(0,u.t)(e)&&e.community_resource_payment&&(0,l.QQ)(e.community_resource_payment)?n.includes("purchased")?a.createElement(m,{size:r}):null:(0,d.PM)(e)?n.includes("freemium")?a.createElement(h,{size:r}):null:(0,d.m3)(e)?n.includes("price")?a.createElement(p,{resource:e,size:r}):null:(0,d.zF)(e)?n.includes("off_platform")?a.createElement(_,{size:r}):null:n.includes("free")?a.createElement(g,{size:r}):null:null}({resource:e,validBadges:r,authedActiveCommunityProfile:(0,i.d4)(e=>"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile:null)})}},352185:(e,r,n)=>{n.d(r,{AG:()=>s});var a=n(848318),i=(e=>(e.DOT_COM_COMMUNITY="dot_com_community",e.RESOURCE_HUB="resource_hub",e))(i||{});let o=a.createContext("dot_com_community");function s(){return"resource_hub"===a.useContext(o)}},511806:(e,r,n)=>{n.d(r,{mG:()=>o}),n(848318),n(536384);var a=n(989232);n(345964),n(297638),n(178806),n(967688);var i=n(809543);function o(e,r,n,o){(0,a.trackEvent)("cmty_purchase_button_click",{context:r,resource_type:(0,i.Dl)(e),resource_id:e.id,user_id:n,profile_id:o})}n(900003),n(318147),n(324747),n(261354),n(764474),n(17753),n(991675)},187387:(e,r,n)=>{n.d(r,{r5:()=>d});var a=n(848318);n(301168);var i=n(911734);n(989232),n(304756);var o=n(297638);n(967688);var s=n(806362),l=n(366766),c=n(295594);function d({authors:e}){return a.createElement("div",null,e.map(e=>a.createElement(u,{key:e.id,author:e})))}function u({author:e}){let r=(0,c.y)(e.profile_handle);return a.createElement(i.N_,{className:"author_dropdown_preview--authorPreviewListRow--XiWec text--fontPos12--YsUAh text--_fontBase--QdLsd",to:r.to},a.createElement(s.e,{entity:e}),a.createElement("div",{className:"author_dropdown_preview--authorPreviewListName--sVzBY"},a.createElement("span",{className:o.s.ellipsis.noWrap.overflowHidden.$},e.name),a.createElement(l.l,{profile:e})))}n(775204),n(809543),n(542950),n(863270),n(178240)},382153:(e,r,n)=>{n.d(r,{So:()=>c,m_:()=>d});var a=n(848318),i=n(536384),o=n.n(i);n(998568);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,a)=>{e.push({el:r,initialHPosition:n,initialVPosition:a})}}})(),l=(e,r=!1,n,a)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=a||"below",e.dataset.hPosition="";let i=e.getBoundingClientRect();return i.bottom>window.innerHeight-20?e.dataset.vPosition="above":i.top<20&&(e.dataset.vPosition="below"),i.right>window.innerWidth-100?e.dataset.hPosition="right":i.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:i,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:p,allowHoverOnDropdownContents:m=!0}){let _=a.useRef(null),[h,g]=a.useState(!1),[f,E]=a.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=_.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return a.useLayoutEffect(()=>{h&&!u&&l(_.current,!0,c,d)},[h]),a.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},a.createElement("div",{onMouseLeave:m?void 0:()=>y(!1)},e),a.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",i),style:p?{borderRadius:`${p}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:_,"data-dropdown-contents":!0},h&&r))}function d({preview:e,children:r}){return a.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},792001:(e,r,n)=>{n.d(r,{O7:()=>l,Xy:()=>c});var a=n(848318),i=n(994378),o=n(959638),s=n(322787),l=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(l||{});function c(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return a.createElement(i.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,a){let i;if(!e||!r)return"";let o=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);o=Object.keys(s.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(o.push(["1600",r]),"universal_insert"===a?o.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):o.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:o.y.COMMUNITY_HUB_FILE_THUMBNAIL,alt:e.alt,className:e.className,imageProps:r})}},143943:(e,r,n)=>{n.d(r,{Cv:()=>I,Mr:()=>T});var a=n(848318),i=n(536384),o=n.n(i);n(461979);var s=n(149841),l=n(642014);n(297638),n(967688);var c=n(278727),d=n(118937);n(366766);var u=n(792001),p=n(579495),m=n(775204),_=n(809543),h=n(823898);n(577888),n(863270);var g=n(318147),f=n(324747);n(770686);var E=n(575378);n(187387);var y=n(906239),b=n(583284),v=n(424579);function T({resource:e,showMonetizationBadge:r}){let n=(0,d.QP)({resource:e,size:"lg"});if(r&&n)return a.createElement("div",{className:b.BQ},n);let i=(0,c.n)({badges:e.badges});return i?a.createElement("div",{className:b.BQ},a.createElement(c.v,null,i)):null}function I({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:i,index:c,subView:d}){let I=(0,m.Jm)(),S=(0,_.qD)(e),A=e.client_meta&&JSON.parse(e.client_meta)?.background_color,w=e.thumbnail_is_set;e.viewer_mode===g.y4.WHITEBOARD&&(A={r:1,g:1,b:1});let C=a.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:S.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),N=w?b.zA:e.viewer_mode===g.y4.WHITEBOARD?b.ZW:b.XO;return a.createElement("div",{className:b.Sl,"data-testid":"hub-file-tile"},a.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),a.createElement(p.A6,{to:(0,_._t)({resource:e}),onClick:r=>{(0,h.cB)("hub_file",e.id,c,I,d)},onClickOverride:i,className:b.nJ},a.createElement("div",{className:o()(N,b.$c),style:{backgroundColor:A&&`rgb(${255*A.r}, ${255*A.g}, ${255*A.b})`}},C,e.viewer_mode===g.y4.PROTOTYPE&&a.createElement(l.t,{svg:v.A,className:b.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:v.A}),a.createElement("div",{className:b.JM},a.createElement(E.dn,{editorType:(0,_.JJ)(e.viewer_mode)})),!r&&a.createElement(T,{resource:e,showMonetizationBadge:!1}))),!r&&a.createElement(y.my,{resource:e,type:f.vt.HUB_FILE}))}},622505:(e,r,n)=>{n(848318),n(387131);var a=n(382902);n(989232);var i=n(630677);n(637640),n(946778),n(697885),n(727769);var o=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(o||{});let s=`/login_iframe?with_community_header=true&type=fixedmodal&one_tap_origin=${i.DT.COMMUNITY}`;(0,a.eU)({state:0,url:s,mounted:!1}),(0,a.eU)(!1)},387131:(e,r,n)=>{n(848318);var a=n(382902);n(946778),n(720522),n(863270),n(788523),n(622505),n(697885),n(727769),(0,a.eU)(null)},697885:(e,r,n)=>{n.d(r,{A:()=>o});var a=n(848318),i=n(727769);function o({children:e,className:r,style:n,onClick:o,showInnerModal:s,onCloseModal:l}){let[c,d]=a.useState(null),[u,p]=a.useState(!1);a.useEffect(()=>{},[]);let m=!u&&!1!==s;return a.createElement("div",{ref:e=>d(e),className:r||i.modalBackdrop,role:"button",tabIndex:0,style:n,onClick:e=>{o?.(),e.target.isSameNode(c)&&(l?.(),p(!0),setTimeout(()=>p(!1),400))}},a.createElement("div",{className:i.modal,style:{opacity:m?1:0,transform:m?"scale(1)":"scale(0.95)"}},e))}},67257:(e,r,n)=>{n(848318),n(536384),n(656329),n(720522),n(297638),n(967688),n(900003),n(17753),n(382153)},744538:(e,r,n)=>{n.d(r,{p:()=>V});var a=n(848318),i=n(376852),o=n(773511),s=n(658029),l=n(886911),c=n(668272),d=n(80843),u=n(717865),p=n(536384),m=n.n(p),_=n(398612),h=n(621464),g=n(656329),f=n(627503),E=n(960565),y=n(345964),b=n(401970),v=n(297638),T=n(967688),I=n(17753),S=n(765801),A=n(621897),w=n(871455),C=n(570206),N=n(593048);let L={BUTTON_SHAPE_FILL:"#FFFFFF",BUTTON_BG_FILL:"#000000",BUTTON_STROKE_OPACITY:.2,BUTTON_BG_FILL_OPACITY:.7,BUTTON_BG_FILL_HOVER_OPACITY:.9};function O(e){if(null==e||Number.isNaN(e))return"";let{seconds:r,minutes:n}=(0,f._d)(e);return`${n}:${String(r).padStart(2,"0")}`}function R(e,r){e&&(r?(e.play(),g.Ay.safari&&e.currentTime(.1)):P(e)?e.pause():(g.Ay.safari&&e.currentTime()>.1&&e.currentTime(e.currentTime()-.1),e.play()))}function P(e){return!!e&&!e.ended()&&!e.paused()&&e.currentTime()>0&&e.readyState()>2}function D({videoJsPlayer:e,isFullscreen:r,toggleFullscreen:n,isActive:i,hasEnded:o,setHasEnded:d}){let[u,p]=a.useState(0),_=a.useRef(!1),[h,f]=a.useState(null),[E,v]=a.useState(!1),[A,w]=a.useState(!1),L=a.useRef(!1),D=a.useRef(!1),M=h||e?.currentTime(),U=e?.duration(),B=P(e),G=a.useRef(void 0);a.useEffect(()=>{w(i||!B||o||L.current)},[o,i,B]);let V=(0,a.useCallback)(()=>{p(e=>e+1)},[]);a.useEffect(()=>{if(e)return e.on("playing",i),e.on("canplay",r),e.on("ended",s),e.on("timeupdate",r),e.on("seeking",o),e.on("seeked",a),e.on("stalled",n),()=>{e.off("playing",i),e.off("canplay",r),e.off("ended",s),e.off("timeupdate",r),e.off("seeking",o),e.off("seeked",a),e.off("stalled",n)};function r(){V()}function n(){L.current=!1}function a(){L.current=!1,d(!1)}function i(){d(!1),V()}function o(){L.current=!0}function s(){E||d(!0),V()}},[E,V,d,e]);let H=(0,a.useCallback)(()=>{e&&(R(e,o),V())},[o,V,e]),z=(0,a.useCallback)(()=>{e&&(_.current=P(e)||o,e.pause())},[o,e]),K=(0,a.useCallback)(()=>{e&&(_.current&&e.play(),G.current&&e.currentTime(G.current),f(null),G.current=void 0)},[e]),W=(0,a.useCallback)(r=>{if(e){if(L.current){G.current=r;return}e.currentTime(r)}},[e]),j=a.createElement(x,{togglePlay:H,hasEnded:o,isPlaying:B,shouldShowVideoControls:A,isFullscreen:r});if((e?.readyState()??0)<2&&!D.current)return a.createElement("div",{className:S.bb},a.createElement(y.kt,{size:"large"}));if(D.current=!0,g.Ay.isIpad&&r)return null;let Y=r?(0,T.t)("whiteboard.video.minimize_tooltip"):(0,T.t)("whiteboard.video.fullscreen_tooltip");return a.createElement(a.Fragment,null,h?null:j,a.createElement("div",{className:m()(S._v,!A&&S.YC)},a.createElement("div",{className:S.TN},O(M)," / ",O(U)),a.createElement(F,{currentTime:M||0,totalTime:U||0,onScrubStart:z,onScrub:f,onScrubEnd:K,onVideoPositionUpdated:W,hasEnded:o,isScrubbing:E,setIsScrubbing:v}),a.createElement("div",{className:S.yG},a.createElement(s.K,{onClick:n,"aria-label":Y,htmlAttributes:{"data-tooltip-type":I.Ib.TEXT,"data-tooltip":Y}},a.createElement(b.U,{className:S.TJ,svg:r?N.A:C.A},r?a.createElement(l.p,null):a.createElement(c.O,null))),a.createElement(k,{rerender:V,videoJsPlayer:e}))))}function k({rerender:e,videoJsPlayer:r}){let[n,i]=a.useState(!1),o=(0,a.useCallback)(()=>{r&&(r.muted(!r.muted()),e())},[e,r]),l=(0,a.useCallback)(n=>{let a=n.target.valueAsNumber;r&&(r.volume(a),r.muted(0===a),e())},[e,r]),c=r?.muted()?(0,T.t)("whiteboard.video.unmute_tooltip"):(0,T.t)("whiteboard.video.mute_tooltip"),p=r?.muted()?a.createElement(d.P,null):a.createElement(u.L,null),_=m()(S.TJ,S.z9,{[S.BT]:!g.Ay.isIpad&&n});return a.createElement("div",{onPointerMove:(0,a.useCallback)(()=>i(!0),[]),onPointerOut:(0,a.useCallback)(()=>i(!1),[])},a.createElement(s.K,{onClick:o,"aria-label":c,htmlAttributes:{"data-tooltip-type":I.Ib.TEXT,"data-tooltip":c}},a.createElement(b.U,{className:_,svg:r?.muted()?w.A:A.A},p)),!g.Ay.isIpad&&n?a.createElement(M,{volume:r?.volume()??1,muted:r?.muted()??!1,handleChange:l}):null)}function M({handleChange:e,volume:r,muted:n}){let i=n?0:r,o=100*i,s=a.useRef(null);return a.createElement("div",{className:S.qD},a.createElement("div",{className:S.sf},a.createElement("input",{className:S.Ct,style:{background:`linear-gradient(to right,var(--active-slider-color) 0%,var(--active-slider-color) ${o}%,var(--inactive-slider-color) ${o}%,var(--inactive-slider-color) 100%)`},type:"range",min:0,max:1,step:.02,value:i,onChange:e,ref:s})))}function F({currentTime:e,totalTime:r,hasEnded:n,onVideoPositionUpdated:o,onScrubStart:s,onScrub:l,onScrubEnd:c,isScrubbing:d,setIsScrubbing:u}){let[p,m]=a.useState(!1),_=a.useRef(null),h=a.useRef(null),f=(0,a.useCallback)(r=>{if(!_.current)return;r.stopPropagation(),u(!0),s();let n=_.current.getBoundingClientRect();h.current={minX:n.x,maxX:n.x+n.width,originX:r.clientX,newTime:e}},[e,s,u]),E=(0,a.useCallback)(e=>{if(!_.current)return;e.stopPropagation(),u(!0),s();let n=_.current.getBoundingClientRect(),a=n.x,l=n.x+n.width,c=e.clientX,d=(0,i.qE)(0,(c-a)/(l-a)*r,r);o(d),h.current={minX:a,maxX:l,originX:e.clientX,newTime:d}},[s,o,u,r]),y=(0,a.useCallback)(e=>{if(!h.current)return;let n=e.clientX,{minX:a,maxX:s}=h.current,c=(0,i.qE)(0,(n-a)/(s-a)*r,r);h.current.newTime=c,l(c),o(h.current.newTime)},[l,o,r]),b=(0,a.useCallback)(()=>{h.current&&(o(h.current.newTime),u(!1),c(),h.current=null)},[c,o,u]);a.useEffect(()=>{if(d)return document.addEventListener("pointermove",y),document.addEventListener("pointerup",b),()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",b)}},[d,y,b]);let v=Math.min(e/r*100,100);g.Ay.safari&&n&&(v=100);let T=v>0?8:0;return a.createElement("div",{className:S.It,onPointerMove:(0,a.useCallback)(()=>m(!0),[]),onPointerOut:(0,a.useCallback)(()=>m(!1),[])},a.createElement("div",{role:"progressbar",tabIndex:0,className:S.tS,onPointerDown:E},a.createElement("div",{className:S.xE,ref:_}),a.createElement("div",{className:S.CN,style:{width:`${v}%`}}),(p||d)&&a.createElement("div",{className:S.Yq,style:{left:`calc(${v}% - ${T}px)`},onPointerDown:f,role:"button",tabIndex:0})))}function x({shouldShowVideoControls:e,togglePlay:r,hasEnded:n,isPlaying:i,isFullscreen:o}){let s=G;return n?s=B:i&&(s=H),a.createElement(U,{shouldShowVideoControls:e,ButtonIcon:s,togglePlay:r,isFullscreen:o})}function U({ButtonIcon:e,shouldShowVideoControls:r,togglePlay:n,isFullscreen:i}){let[o,s]=a.useState(!1),l=o?L.BUTTON_BG_FILL_HOVER_OPACITY:L.BUTTON_BG_FILL_OPACITY;return a.createElement("button",{className:m()(S.CY,{[S.ct]:!r}),onPointerMove:(0,a.useCallback)(()=>s(!0),[]),onPointerOut:(0,a.useCallback)(()=>s(!1),[]),onPointerDown:n},a.createElement(e,{fillOpacityForBackground:l,isFullscreen:i}))}function B({fillOpacityForBackground:e,isFullscreen:r}){return a.createElement("svg",{className:m()(r&&S.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},a.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z",fill:L.BUTTON_BG_FILL,fillOpacity:e}),a.createElement("path",{d:"M34 24C34 18.4772 29.7175 14 24.4348 14C20.5763 14 17.2515 16.3884 15.7391 19.8282V14H14V22.1818H21.8261V20.3636H17.4222C18.7028 17.6696 21.362 15.8182 24.4348 15.8182C28.757 15.8182 32.2609 19.4813 32.2609 24C32.2609 28.5187 28.757 32.1818 24.4348 32.1818C21.362 32.1818 18.7028 30.3304 17.4222 27.6364H15.5216C16.9131 31.3612 20.3792 34 24.4348 34C29.7175 34 34 29.5228 34 24Z",fill:L.BUTTON_SHAPE_FILL}),a.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:L.BUTTON_BG_FILL,strokeOpacity:L.BUTTON_STROKE_OPACITY}))}function G({fillOpacityForBackground:e,isFullscreen:r}){return a.createElement("svg",{className:m()(r&&S.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},a.createElement("g",{clipPath:"url(#clip0_403_4259)"},a.createElement("rect",{width:"48",height:"48",rx:"24",fill:L.BUTTON_BG_FILL,fillOpacity:e}),a.createElement("path",{d:"M19 34V14L35 24L19 34Z",fill:L.BUTTON_SHAPE_FILL})),a.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:L.BUTTON_BG_FILL,strokeOpacity:L.BUTTON_STROKE_OPACITY}),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_403_4259"},a.createElement("rect",{width:"48",height:"48",rx:"24",fill:L.BUTTON_BG_FILL}))))}function V(){return a.createElement(G,{fillOpacityForBackground:L.BUTTON_BG_FILL_OPACITY,isFullscreen:!1})}function H({fillOpacityForBackground:e,isFullscreen:r}){return a.createElement("svg",{className:m()(r&&S.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},a.createElement("g",{clipPath:"url(#clip0_1_16)"},a.createElement("rect",{width:"48",height:"48",rx:"24",fill:L.BUTTON_BG_FILL,fillOpacity:e}),a.createElement("path",{d:"M15 15H21V33H15V15Z",fill:L.BUTTON_SHAPE_FILL}),a.createElement("path",{d:"M27 15H33V33H27V15Z",fill:L.BUTTON_SHAPE_FILL})),a.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:L.BUTTON_BG_FILL,strokeOpacity:L.BUTTON_STROKE_OPACITY}),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1_16"},a.createElement("rect",{width:"48",height:"48",rx:"24",fill:L.BUTTON_BG_FILL}))))}a.memo(({src:e,fallbackSrc:r,useHLS:n=!1,autoPlay:i=!1,muted:s=!1,showControlsOnVideoLoad:l=!1,onEnded:c})=>{let[d,u]=a.useState();a.useEffect(()=>{(async()=>{window.VIDEOJS_NO_DYNAMIC_STYLE=!0,u(await (0,E.Fe)())})()},[]);let p=a.useRef(null),f=a.useRef(null),[y,b]=a.useState(null),[T,I]=a.useState(!1),[A,w]=a.useState(!1);a.useEffect(()=>{let e=p.current;if(e){let r=()=>{w(e=>!e)};return e.addEventListener(_.R7.fullscreenChangeEventName,r),()=>{e.removeEventListener(_.R7.fullscreenChangeEventName,r)}}},[]),a.useEffect(()=>{let e=f.current;e&&(e.style.height="100%",e.style.width="100%",e.style.objectFit=A?"contain":"cover")},[A]);let[C,N]=a.useState(!1);a.useEffect(()=>{C&&c?.()},[C,c]);let L=a.useRef(void 0),O=(0,a.useCallback)(()=>{I(!0),clearTimeout(L.current),L.current=setTimeout(()=>I(!1),3e3)},[]);a.useEffect(()=>{if(!f.current||!d)return;let e=!1,r=d.videoJs(f.current,{muted:s,autoplay:i&&!g.Ay.safari,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},()=>{e||b(r)});return()=>{r.dispose(),e=!0,b(null)}},[i,s,d]);let P=(0,a.useCallback)(async(e,a)=>{try{await (0,E.uz)(e,n,a)}catch{h.k.warn("Reverting to fallback video source"),await (0,E.uz)(r??null,!1,a)}l&&O()},[r,O,l,n]);a.useEffect(()=>{y&&e&&P(e,y)},[P,e,y]);let k=(0,a.useCallback)(()=>{if(A||document.fullscreenElement)_.R7.exitFullscreenFunc();else if(g.Ay.isIpad){let e=f.current;e?.webkitEnterFullscreen?.()}else{let e=p.current;e&&_.R7.requestFullscreenFunc.call(e)}},[A]);return a.createElement("div",{className:m()(S.j,{[S.Y5]:A}),ref:p,onPointerMove:O},a.createElement(o.E,{className:v.s.hFull.wFull.bgTransparent.$,onClick:(0,a.useCallback)(()=>{y&&A&&R(y,C)},[C,A,y]),actionOnPointerDown:!0},a.createElement("video",{ref:f,crossOrigin:"anonymous",controls:g.Ay.isIpad&&A})),a.createElement(D,{videoJsPlayer:y,isFullscreen:A,toggleFullscreen:k,isActive:T,hasEnded:C,setHasEnded:N}))})},343973:(e,r,n)=>{n.d(r,{X:()=>i});var a=n(848318);function i(e){let[r,n]=a.useState(!0);return a.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(809543),n(715668)},163472:(e,r,n)=>{n.d(r,{I:()=>l});var a=n(410725),i=n(900003),o=n(55116),s=n(324747);function l(e){let r=(0,a.Rs)(o.oro,{monetizedResourceMetadataId:e?.monetized_resource_metadata?.id??""},{enabled:(0,s.m3)(e)});return"loaded"===r.status&&r.data.communityResourcePayment?(0,i.xs)(r.data.communityResourcePayment):e?.community_resource_payment}},775204:(e,r,n)=>{n.d(r,{Jm:()=>m,Ux:()=>_,wr:()=>p});var a=n(301168),i=n(66325),o=n(637640),s=n(318717),l=n(627062),c=n(84257);function d(e){if(e&&"searchSessionId"in e)return e.searchSessionId}function u(e,r,n=!1){if("search"in e&&e.search.sessionId&&((0,s.sT)()||r||n))return e.search.sessionId}function p(e,r=!1){let n=!!(0,i.B6)(o.Ay.location.pathname,{path:c.bP.path});return d(o.Ay.location.state)||u(e,n,r)}function m(e=!1){let r=d((0,i.zy)().state),n=!!(0,l.ed)(c.bP),o=(0,a.d4)(r=>u(r,n,e));return r||o}function _(e){let r=!!(0,i.B6)(o.Ay.location.pathname,{path:c.bP.path}),n=!!(0,s.sT)();if("search"in e&&e.search.queryId&&(n||r))return e.search.queryId||void 0}},536549:(e,r,n)=>{n.d(r,{aZ:()=>l}),n(615233);var a=n(967688),i=n(502310),o=n(582261);let s={[o.LJ.visualAssets]:()=>(0,a.t)("categories.visual_assets"),[o.LJ.development]:()=>(0,a.t)("categories.development_plugins"),[o.LJ.accessibility]:()=>(0,a.t)("categories.accessibility_tools"),[o.LJ.bannerTemplates]:()=>(0,a.t)("categories.banner_templates"),[o.LJ.brainstorming]:()=>(0,a.t)("categories.brainstorming"),[o.LJ.cardTemplates]:()=>(0,a.t)("categories.card_templates"),[o.LJ.classroomActivities]:()=>(0,a.t)("categories.classroom_activities"),[o.LJ.dataTemplates]:()=>(0,a.t)("categories.data_templates"),[o.LJ.designInspirations]:()=>(0,a.t)("categories.design_inspirations"),[o.LJ.designTemplates]:()=>(0,a.t)("categories.design_templates"),[o.LJ.designTools]:()=>(0,a.t)("categories.design_tools"),[o.LJ.desktopAppsWebsites]:()=>(0,a.t)("categories.desktop_apps_websites"),[o.LJ.deviceMockups]:()=>(0,a.t)("categories.device_mockups"),[o.LJ.diagramming]:()=>(0,a.t)("categories.diagramming"),[o.LJ.editingEffects]:()=>(0,a.t)("categories.editing_effects"),[o.LJ.education]:()=>(0,a.t)("categories.education"),[o.LJ.facebookTemplates]:()=>(0,a.t)("categories.facebook_templates"),[o.LJ.fileOrganization]:()=>(0,a.t)("categories.file_organization"),[o.LJ.flyerTemplates]:()=>(0,a.t)("categories.flyers"),[o.LJ.fontsTypography]:()=>(0,a.t)("categories.fonts_typography"),[o.LJ.funGames]:()=>(0,a.t)("categories.fun_games"),[o.LJ.icons]:()=>(0,a.t)("categories.icons"),[o.LJ.illustrations]:()=>(0,a.t)("categories.illustrations"),[o.LJ.instagramTemplates]:()=>(0,a.t)("categories.instagram_templates"),[o.LJ.invitationTemplates]:()=>(0,a.t)("categories.invitation_templates"),[o.LJ.invoiceTemplates]:()=>(0,a.t)("categories.invoices"),[o.LJ.importExport]:()=>(0,a.t)("categories.import_export"),[o.LJ.letterheadTemplates]:()=>(0,a.t)("categories.letterhead_templates"),[o.LJ.lessonPlans]:()=>(0,a.t)("categories.lesson_plans"),[o.LJ.libraries]:()=>(0,a.t)("categories.libraries"),[o.LJ.linkedinTemplates]:()=>(0,a.t)("categories.linkedin_templates"),[o.LJ.mobileApps]:()=>(0,a.t)("categories.mobile_apps"),[o.LJ.nameTagTemplates]:()=>(0,a.t)("categories.name_tags"),[o.LJ.onePagerTemplates]:()=>(0,a.t)("categories.one_pagers"),[o.LJ.portfolios]:()=>(0,a.t)("categories.portfolio_templates"),[o.LJ.posterTemplates]:()=>(0,a.t)("categories.poster_templates"),[o.LJ.calendarTemplates]:()=>(0,a.t)("categories.calendar_templates"),[o.LJ.presentations]:()=>(0,a.t)("categories.presentations"),[o.LJ.printableTemplates]:()=>(0,a.t)("categories.printable_templates"),[o.LJ.prototypingAnimation]:()=>(0,a.t)("categories.prototyping_animation"),[o.LJ.resumes]:()=>(0,a.t)("categories.resume_templates"),[o.LJ.shapesColors]:()=>(0,a.t)("categories.shapes_colors"),[o.LJ.socialMediaTemplates]:()=>(0,a.t)("categories.social_media_templates"),[o.LJ.stockPhotography]:()=>(0,a.t)("categories.stock_photography"),[o.LJ.strategicPlanning]:()=>(0,a.t)("categories.strategic_planning"),[o.LJ.teamMeetings]:()=>(0,a.t)("categories.team_meetings"),[o.LJ.tutorials]:()=>(0,a.t)("categories.tutorials"),[o.LJ.uiKits]:()=>(0,a.t)("categories.ui_kits"),[o.LJ.webAds]:()=>(0,a.t)("categories.web_ad_templates"),[o.LJ.wireframes]:()=>(0,a.t)("categories.wireframes"),[o.LJ.workshopTemplates]:()=>(0,a.t)("categories.workshop_templates"),[o.LJ.whiteboarding]:()=>(0,a.t)("categories.whiteboarding"),[o.LJ.xTwitterTemplates]:()=>(0,a.t)("categories.x_twitter_templates"),[o.LJ.youtubeTemplates]:()=>(0,a.t)("categories.youtube_templates"),[o.LJ.zoomBackgroundTemplates]:()=>(0,a.t)("categories.zoom_background_templates")};function l(e){if(e.i18n_meta?.title)return(0,a.Yd)(e.i18n_meta.title,e.title);let r=(0,i.S)(e.url_slug,o.LJ);return r?s[r]?.()??e.title:e.title}},700574:(e,r,n)=>{n.d(r,{y$:()=>d,Lj:()=>l,EU:()=>c});var a=n(848318);n(536384),n(656329);var i=n(967688);n(187387),n(382153),n(295594),n(863270);var o=n(105487),s=n(847552);function l(e){let r=e.community_publishers.accepted;return 0===r.length?"":1===e.community_publishers.accepted.length?r[0].name:(0,i.t)("community.publisher_with_suffix",{publisherName:r[0].name,publishersSuffix:(0,i.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})})}function c(e){let r=e.community_publishers.accepted;if(0===r.length)return"";let n=r.length>1,s=a.createElement("span",{className:n?o.sA:o.cy},r[0].name),l=a.createElement("span",{className:o.Zz},(0,i.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})),c=(0,i.tx)("community.publisher_with_suffix",{publisherName:s,publishersSuffix:l});return a.createElement("span",{className:n?o.tF:o.cy},(0,i.tx)("community.resource_tiles.by_author",{author:n?c:s}))}function d(){return a.createElement("svg",{className:s.u1,viewBox:"0 0 50 50"},a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))}},809543:(e,r,n)=>{n.d(r,{Ag:()=>B,Cg:()=>V,Co:()=>T,DV:()=>x,Dl:()=>R,HD:()=>I,JJ:()=>w,KG:()=>H,KH:()=>K,N6:()=>z,Qy:()=>Y,RE:()=>$,UI:()=>F,Uu:()=>G,VJ:()=>k,_t:()=>M,cX:()=>O,iX:()=>N,lW:()=>U,nF:()=>W,qD:()=>A,r7:()=>L,rk:()=>C,ss:()=>P});var a=n(66325),i=n(660376),o=n(818995);n(19180);var s=n(128080),l=n.n(s);n(637640),n(79113);var c=n(461979),d=n(967688);n(506752),n(700660),n(221511),n(109014);var u=n(238445),p=n(577888),m=n(3649);n(373728),n(660948);var _=n(142896),h=n(318147),g=n(324747),f=n(933614);n(553709);var E=n(872240);n(764474),n(715668);var y=n(404883);n(624490);var b=n(118287),v=n(652021);n(786175);let T=new RegExp(/^[\w.]{0,30}$/),I=new RegExp(/^\w{0,15}$/);function S(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:"current_plugin_version_id"in e&&e.current_plugin_version_id?e.versions[e.current_plugin_version_id]:void 0}function A(e){return S(e)}function w(e){switch(e){case h.y4.SLIDE_TEMPLATE:return f.LE.SLIDES;case h.y4.WHITEBOARD:return f.LE.FIGJAM;case h.y4.SITE_TEMPLATE:return f.LE.SITES;case h.y4.COOPER_TEMPLATE_FILE:return f.LE.COOPER;case h.y4.FIGMAKE_TEMPLATE:return f.LE.FIGMAKE;case h.y4.CANVAS:case h.y4.PROTOTYPE:default:return f.LE.FIGMA}}function C(e){switch(e){case h._Y.DESIGN:return f.LE.FIGMA;case h._Y.WHITEBOARD:return f.LE.FIGJAM;case h._Y.SLIDES:return f.LE.SLIDES;case h._Y.SITES:return f.LE.SITES;case h._Y.COOPER:return null;case h._Y.FIGMAKE:return f.LE.FIGMAKE;default:(0,i.xb)(e)}}let N=[h.y4.CANVAS,h.y4.PROTOTYPE,h.y4.LIBRARY];function L(e){return"viewer_mode"in e&&e.viewer_mode===h.y4.LIBRARY}function O(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===h.y4.SLIDE_TEMPLATE}function R(e){return function(e){switch(e){case g.vt.HUB_FILE:return m.Uo.FILE;case g.vt.PLUGIN:return m.Uo.PLUGIN;case g.vt.WIDGET:return m.Uo.WIDGET}}((0,v.Vm)(e))}function P(e,{plural:r=!1}={}){let n=(0,v.Vm)(e);switch(n){case g.vt.HUB_FILE:return r?m.UF.FILE:m.Uo.FILE;case g.vt.PLUGIN:return r?m.UF.PLUGIN:m.Uo.PLUGIN;case g.vt.WIDGET:return r?m.UF.WIDGET:m.Uo.WIDGET;default:(0,i.xb)(n)}}var D=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(D||{});function k({resource:e}){let r=function(e){switch(e.resource_type){case u.vt.DESIGN_TEMPLATE:case u.vt.UI_KIT:case u.vt.SLIDE_TEMPLATE:case u.vt.SITE_TEMPLATE:case u.vt.PROTOTYPE:case u.vt.FIGJAM_TEMPLATE:case u.vt.COOPER_TEMPLATE_FILE:case u.vt.COOPER_TEMPLATE_ASSET:case u.vt.FIGMAKE_TEMPLATE:return m.Uo.FILE;case u.vt.PLUGIN:return m.Uo.PLUGIN;case u.vt.WIDGET:return m.Uo.WIDGET;default:(0,i.xb)(e.resource_type)}}(e),n=e.name;return function({path:e,id:r,name:n}){let a=(0,c.fs)(n)??"";return r?`/community/${e}/${r}${""===a?"":"/"}${a}`:void 0}({path:r,id:function(e){let r=(0,a.B6)(new URL(e).pathname,{path:m.ax.path});if(r)return{resourceId:r.params.resourceId,apiResourceType:r.params.apiResourceType}}(e.rdp_url)?.resourceId,name:n})}function M({resource:e}){return F({path:R(e),id:e.id,name:S(e)?.name??""})}function F({path:e,id:r,name:n}){let a=(0,c.fs)(n)??"";return`/community/${e}/${r}${""===a?"":"/"}${a}`}function x(e){return`${location.origin}${M({resource:e})}`}function U(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(_.Dm),document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),r.parentNode.removeChild(r)}function B(e){return e.query?(0,d.t)("community.search_results_tab_title",{searchQuery:e.query}):(0,d.t)("community.browser_home_tab_title")}function G(e){return e?.stripe_account_status&&e.stripe_account_status!==y.P5.NONE&&e.stripe_account_status!==y.P5.ACCEPTED}function V(e){return l()(e,(0,E.EB)())}async function H(e){try{let r=await fetch(e),n=new Uint8Array(await r.arrayBuffer());return{type:"image",url:e,sha1:(0,o.Et)(n),buffer:n}}catch{return null}}function z(e){let r={},n=(0,v.XW)(e)?e.carousel_media.images:e.carousel_media_urls,a=(0,v.XW)(e)?e.carousel_media.videos:"carousel_videos"in e&&e?.carousel_videos;return n&&Object.entries(n).forEach(([e,n])=>{r[e]={...n,type:"image"}}),a&&Object.entries(a).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function K(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return j((()=>{switch(e){case g.vt.PLUGIN:return"plugin";case g.vt.WIDGET:return"widget";case"comment":return"comment";case g.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,v.Vm)(e),{pluralized:r,capitalized:n})}function W(e,{pluralized:r,capitalized:n}={}){return e?j(g.bD.WIDGET,{pluralized:r,capitalized:n}):j(g.bD.PLUGIN,{pluralized:r,capitalized:n})}function j(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&void 0!==e[0]&&(e=e[0].toUpperCase()+e.substr(1)),e}function Y(e){let r=e.current_hub_file_version_id?e.current_hub_file_version_id:e.current_plugin_version_id||"";return e.versions[r]?.created_at||""}function $(e,r,n,a){let i=(0,b.CS)(),o={profileHandle:e};return r&&i&&n?new p.qL({...n,...o},a):new p.xn(o)}},118287:(e,r,n)=>{n.d(r,{CS:()=>_,DU:()=>u,GM:()=>d,Su:()=>p,aP:()=>m});var a=n(848318),i=n(19180),o=n(382902);n(227276);var s=n(887836),l=n(318147),c=(e=>(e.ASSET_PANEL_ONLY="asset_panel_only",e.ASSET_PANEL_AND_TOOLBAR="asset_panel_and_toolbar",e))(c||{});function d(){let e=(0,o.md)(s.UQ);return(0,a.useCallback)(()=>null,[e])}function u(e){return!!(0,i.k)().cmty_lib_admin_publish||e&&[l._Y.SLIDES,l._Y.COOPER].includes(e)}function p(){return!!(0,i.k)().cmty_sites_full_file_publishing}function m(){return!!(0,i.k)().cmty_make_publishing}function _(){return!!(0,i.k)().cmty_resource_hub_profiles}},962637:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(755595),i=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(i||{});function o(e){return a.z.object({types:a.z.array(a.z.nativeEnum(i)),content:a.z.array(e)})}},318717:(e,r,n)=>{n.d(r,{Gu:()=>T,MU:()=>m,gV:()=>I,sT:()=>h,wl:()=>p}),n(848318);var a=n(621464);n(637640);var i=n(624490),o=n(506752),s=n(417966),l=n(700660),c=n(221511),d=n(580213),u=n(373728);function p(e,r){return h(e,r)||(0,d.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let a=("/"===n[0]?n.slice(1):n).split("/"),l={resourceType:void 0,tags:[],editor_type:void 0,sort_by:(0,o.H)(),price:i.C.ALL,category:null,creators:s.Z.ALL};for(let e=0;e<b.length&&0!==a.length;e++){let r=b[e](a,l);r&&r[0]&&(a=r[1],l={...l,...r[0]})}let{editorType:c,resourceType:d}=(0,u.zs)(l.editor_type,l.resourceType);l.editor_type=c,l.resourceType=d;let p=new URLSearchParams(location.search),m=(()=>{let e=p.get("creators");return e&&e===s.Z.FOLLOWING?e:l.creators})();return{...l,creators:m}}(e)}function m(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,u.zs)(e.editor_type,e.resourceType).editorType,price:e.price,creators:e.creators&&s.Z.isSearchType(e.creators)?e.creators:s.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,d.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`);let{editorType:n,resourceType:a}=(0,u.zs)(e.editor_type,e.resourceType);e.editor_type!==n?e.resourceType=(0,u.zs)(e.editor_type).resourceType:e.resourceType!==a&&(e.resourceType=a),e.resourceType!==c.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),(0,u.zs)(e.editor_type,e.resourceType).editorType!==l.k.Editors.ALL&&(r+=`/${e.editor_type}`),e.price&&i.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===s.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),v[r]&&(r=v[r]);let d={};e.creators===s.Z.FOLLOWING&&(d.creators=e.creators);let p=Object.keys(d).length>0?new URLSearchParams(d).toString():void 0;return p&&(r+=`?${p}`),r}(e)}let _=/^\/community\/search$/;function h(e,r){if(!(e||=location.pathname).match(_))return null;let n=new URLSearchParams(r||=location.search),a=n.get("query");if(!a)return null;let l=n.get("resource_type");if(!l)return null;let c=n.get("sort_by")||o.e.Search.RELEVANCY,d=(0,u.zs)(n.get("editor_type")??void 0,l).editorType;return{resourceType:l,sort_by:c,editor_type:d,query:a,price:n.get("price")||i.C.ALL,creators:(()=>{let e=n.get("creators");return s.Z.isSearchType(e)?e:s.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(c.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(l.k.Editors).indexOf(n)>-1&&[{editor_type:(0,u.zs)(n,r.resourceType).editorType},e.slice(1)]},function(e){let r=e[0];return i.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===s.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],v={"/community/mixed":"/community"};function T(){let e=(0,u.pJ)();return{resourceType:e.resourceType,sort_by:(0,o.H)(),editor_type:e.editorType,price:i.C.ALL,tags:[],category:null,creators:s.Z.ALL}}function I(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(a.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}(()=>{let e=(0,u.pJ)();return e.resourceType,o.e.Search.RELEVANCY,e.editorType,i.C.ALL,s.Z.ALL})()},502310:(e,r,n)=>{n.d(r,{S:()=>a});function a(e,r,n){return Object.values(r).includes(e)?e:n}},900003:(e,r,n)=>{n.d(r,{F8:()=>h,Lt:()=>L,Mj:()=>f,QQ:()=>A,UO:()=>C,V4:()=>N,WD:()=>g,X2:()=>T,XR:()=>v,Yp:()=>E,ae:()=>_,bV:()=>b,mZ:()=>u,up:()=>I,vf:()=>m,vi:()=>S,wF:()=>p,xs:()=>O,zt:()=>y});var a=n(791690),i=n(967688),o=n(486266),s=n(834612),l=n(324747),c=n(342463),d=n(261354);let u=2,p=1e3;function m(e){if(e?.price){let{price:r}=e;return .01*r}}function _(e){return e?100*e:0}function h(e){return e%1!=0}function g(e,r){return r>e}function f(e,r){return r/e>1.5}function E(e){return e<u||e>=p}function y(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,i.t)("community.buyer.price_per_year",{priceString:I(n,n%100!=0)})}function b(e,r=!1){let{price:n,is_subscription:a}=e;if(!a)return I(n,!1);if(r){let r=e.annual_price||0;return(0,i.t)("community.buyer.price_per_year",{priceString:I(r,r%100!=0)})}return(0,i.t)("community.buyer.price_per_month",{priceString:I(n,n%100!=0)})}function v(e){let r=b(e),n=(0,d.Uv)(e)?(0,i.t)("community.buyer.subscribe"):(0,i.t)("community.buyer.buy");return`${n} ${r}`}function T(e){let{price:r,is_subscription:n}=e,a=I(r,r%100!=0);return n?(0,i.t)("community.buyer.price_per_month_subscription",{priceString:a}):(0,i.t)("community.buyer.price_one_time_payment",{priceString:a})}function I(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function S(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,i.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,i.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,i.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,i.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,i.t)("community.buyer.refund_reason.other")}}function A(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!w(e,c.G3.DISPUTED):w(e,c.G3.SUCCEEDED))}function w(e,r){return!!e.status&&e.status===r}function C(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function N(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),i=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(i)),{pass:s,fail:l}=(0,a.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:i,fail:s}=(0,a.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:i}}}function L({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},495084:(e,r,n)=>{n.d(r,{c:()=>i});var a=n(553709);function i(e){return!!(e&&(e.entity_type===a.o1.ORG||e.entity_type===a.o1.TEAM))}},823898:(e,r,n)=>{n.d(r,{AC:()=>y,G8:()=>f,K2:()=>_,Pg:()=>T,Ul:()=>v,X_:()=>h,Y5:()=>b,cB:()=>I,mk:()=>E});var a=n(660376),i=n(197638),o=n.n(i),s=n(989232),l=n(967688);n(700660),n(221511);var c=n(238445),d=n(318147);n(324747);var u=n(603592),p=n(809543);n(118287);var m=n(652021);function _(e){return(0,m.Gl)(e)?p.qD(e)?.name:e.name}function h(e,r){switch(e){case c.vt.WIDGET:case c.vt.PLUGIN:if(r)return(0,l.tx)("community.using.try_in");return(0,l.tx)("community.using.open_in");case c.vt.FIGJAM_TEMPLATE:return(0,l.tx)("community.duplicate.open_in_figjam");case c.vt.SLIDE_TEMPLATE:case c.vt.SITE_TEMPLATE:case c.vt.COOPER_TEMPLATE_FILE:case c.vt.COOPER_TEMPLATE_ASSET:case c.vt.FIGMAKE_TEMPLATE:return(0,l.tx)("community.duplicate.use_template");case c.vt.UI_KIT:case c.vt.DESIGN_TEMPLATE:case c.vt.PROTOTYPE:return(0,l.tx)("community.duplicate.open_in_figma");default:(0,a.xb)(e)}}function g(e){let r=document.createElement("div");return r.innerHTML=o().sanitize(e),r.innerText}function f(e,r,n){if(e.tagline)return e.tagline;if(!e.description)return"";let a=(r=r||g)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(a):a}function E(e){return"user_count"in e?e.user_count??0:"unique_run_count"in e?e.unique_run_count:"duplicate_count"in e?e.duplicate_count:0}function y(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE,d.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function b(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE].includes(e.publishing_status)}function v(e){return e.publishing_status===d.KB.APPROVED_PUBLIC}function T(e){return!!e.publishing_status&&[d.KB.DELISTED,d.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function I(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,a,i,o="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:o,scope:u.Rx.COMMUNITY,index:n,searchSessionId:a,search_query_id:i}}}(...e);(0,s.trackEvent)(r,n)}},652021:(e,r,n)=>{n.d(r,{Gl:()=>u,Vm:()=>d,XW:()=>m,qY:()=>_,ws:()=>p});var a=n(660376),i=n(938982),o=n(998568);n(238445);var s=n(3649);n(87148);var l=n(318147);n(152545);var c=n(324747);function d(e){var r;return p(e)||"resource_type"in e&&(r=e).publishing_status&&[l.KB.ORG_PRIVATE,l.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(r.publishing_status)?e.resource_type:(0,c.U)(e)?c.vt.HUB_FILE:(0,c.xQ)(e)?c.vt.WIDGET:(0,c.I0)(e)?c.vt.PLUGIN:void(0,a.xb)(e)}function u(e){return!("resource_type"in e)}function p(e){return"resource_type"in e}function m(e){return"content"in e}function _(e){return e.content.hub_file?e.content.hub_file:e.content.plugin?e.content.plugin:e.content.widget?e.content.widget:void(0,o.$D)(i.e.COMMUNITY,Error("Resource has no content"),{extra:{resourceId:e.id}})}n(933614),n(118287),c.vt.HUB_FILE,s.Uo.FILE,c.vt.PLUGIN,s.Uo.PLUGIN,c.vt.WIDGET,s.Uo.WIDGET},627062:(e,r,n)=>{n.d(r,{Ac:()=>l,aV:()=>p,ed:()=>d,nS:()=>c,pO:()=>u});var a=n(848318),i=n(66325),o=n(637640),s=n(287105);function l(e){}n(998568);class c{get params(){return this._params}get search(){return this._search}get state(){return this._state}constructor(...e){let[r,n,a]=e;this._params=r??{},this._search=n??{},this._state=a??{}}copyWith(e,r,n){return new this.constructor({...this._params,...e},{...this._search,...r},{...this._state,...n})}pushToHistory(){o.Ay.push(this.href,this.state)}replaceInHistory(){o.Ay.replace(this.href,this.state)}get pathname(){let e=this.constructor;return(0,i.tW)(e.path,"serializeParams"in e?e.serializeParams(this._params):this._params)}get queryString(){let e=Object.fromEntries(Object.entries(this._search).filter(([,e])=>void 0!==e));if(0===Object.keys(e).length)return"";let r=this.constructor,n="encodeQueryString"in r?r.encodeQueryString??s.lF:s.lF;return`?${n(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this._state}}}function d(e){let r=function(e){let r=(0,i.W5)(e.path);return(0,a.useMemo)(()=>{if(null===r)return null;try{return"deserializeParams"in e?e.deserializeParams(r.params):r.params}catch(e){return null}},[e,r])}(e),n=function(e){let r=(0,i.W5)(e.path),n=(0,i.zy)();return(0,a.useMemo)(()=>{if(null===r)return null;try{return"parseQueryString"in e?e.parseQueryString(n.search):{}}catch(e){return null}},[e,n.search,r])}(e),o=function(e){let r=(0,i.W5)(e.path),n=(0,i.zy)();return null===r?null:n.state??{}}(e);return(0,a.useMemo)(()=>null===r||null===n||null===o?null:new e(r,n,o),[e,r,n,o])}function u(e){return function(r,n={}){let a=(0,i.B6)(r,{...n,path:e.path});return a?{...a,params:"deserializeParams"in e?e.deserializeParams(a.params):a.params}:null}}function p(e,r){return`${e}${r}`}},265130:(e,r,n)=>{n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var a=n(460081);let i="8065774696727";function o(e,r){(0,a.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:i,value:"community_product_question"}])}function l(e){return o(e,[{id:i,value:"community_refund"}])}},109014:(e,r,n)=>{n.d(r,{S:()=>s,to:()=>d});var a=n(755595),i=n(324747),o=n(238445),s=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(s||{}),l=(e=>(e.hub_file="file",e.plugin="plugin",e.widget="widget",e))(l||{});let c=a.z.object({model:o.UL,score:a.z.number()}),d=a.z.object({results:a.z.array(c),total_hits:a.z.number().optional()});a.z.object({comments:a.z.array(i.KS).nullable(),total_count:a.z.number().optional()});var u=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(u||{})},582261:(e,r,n)=>{function a(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>i,OE:()=>a});var i=(e=>(e.accessibility="accessibility",e.bannerTemplates="banner-templates",e.brainstorming="brainstorming",e.cardTemplates="card-templates",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.designTutorials="design-tutorials",e.desktopAppsWebsites="website-templates",e.development="development",e.deviceMockups="device-mockups",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.facebookTemplates="facebook-templates",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.flyerTemplates="flyer-templates",e.googleAds="google-ads",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.invitationTemplates="invitation-templates",e.laptopMockups="laptop-mockups",e.lessonPlans="lesson-plans",e.libraries="libraries",e.linkedinTemplates="linkedin-templates",e.mobileApps="mobile-apps",e.nameTagTemplates="name-tag-templates",e.onePagerTemplates="one-pager-templates",e.invoiceTemplates="invoice-templates",e.letterheadTemplates="letterhead-templates",e.portfolios="portfolio-templates",e.printableTemplates="printable-templates",e.calendarTemplates="calendar-templates",e.pinterestTemplates="pinterest-templates",e.posterTemplates="poster-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.socialMediaTemplates="social-media-templates",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.twitchTemplates="twitch-templates",e.tutorials="design-tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.webAds="web-ads",e.websiteTemplates="website-templates",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e.xTwitterTemplates="x-twitter-templates",e.youtubeTemplates="youtube-templates",e.zoomBackgroundTemplates="zoom-background-templates",e))(i||{}),o=(e=>(e.blogWebsites="blog",e.businessWebsites="business",e.landingPageTemplates="landing-pages",e.portfolioWebsiteTemplates="portfolio",e.photographyWebsites="photography",e.weddingWebsites="wedding",e.interiorDesignWebsites="interior-design",e))(o||{}),s=(e=>(e.LANDING="landing",e.NAV="nav",e))(s||{})},238445:(e,r,n)=>{n.d(r,{Bn:()=>L,Q3:()=>w,UL:()=>O,Y9:()=>R,_s:()=>C,vt:()=>y});var a=n(755595),i=n(962637),o=n(318147),s=n(49984),l=n(342463),c=n(163554),d=n(933614),u=n(553709),p=n(720722),m=n(261354),_=n(764474),h=n(715668),g=n(535194),f=n(805608),E=n(307510),y=(e=>(e.DESIGN_TEMPLATE="design_template",e.FIGJAM_TEMPLATE="figjam_template",e.PLUGIN="plugin",e.WIDGET="widget",e.SLIDE_TEMPLATE="slide_template",e.UI_KIT="ui_kit",e.PROTOTYPE="prototype",e.SITE_TEMPLATE="site_template",e.COOPER_TEMPLATE_ASSET="cooper_template_asset",e.COOPER_TEMPLATE_FILE="cooper_template_file",e.FIGMAKE_TEMPLATE="figmake_template",e))(y||{});let b=a.z.object({id:a.z.string(),resource_type:a.z.nativeEnum(y),editor_types:a.z.array(a.z.nativeEnum(f.q)),created_at:a.z.string(),rdp_url:a.z.string(),name:a.z.string(),tagline:a.z.string().nullish(),description:a.z.string().nullish(),like_count:a.z.number(),user_count:a.z.number().nullish(),saved_at:a.z.string().nullish(),category_id:a.z.string().nullable(),category_slug:a.z.string().nullish(),parent_category_slug:a.z.string().nullish(),tags:a.z.array(a.z.string()).optional().nullable(),tags_v2:a.z.record(a.z.any()).optional(),icon_url:a.z.string().nullish(),thumbnail_url:a.z.string().optional(),thumbnail_src_set:h.P1.nullish(),carousel_media:a.z.object({images:h.fE,videos:h.Fy.optional()}).optional(),unpublished_at:a.z.string().nullable(),publishing_status:a.z.nativeEnum(o.KB).nullable(),badges:a.z.array(a.z.nativeEnum(s.s)),monetized_resource_metadata:a.Ip.ignore(m.ii).optional(),community_resource_payment:l.fe.optional(),is_3rd_party_monetized:a.z.boolean(),third_party_m10n_url:a.z.string().nullable(),support_contact:a.z.string().nullable(),publish_scope:a.z.nativeEnum(E.i).optional()}).and(u.xK),v=a.z.object({id:a.z.string(),resource_type:a.z.nativeEnum(y),editor_types:a.z.array(a.z.nativeEnum(f.q)),created_at:a.z.string(),name:a.z.string(),tagline:a.z.string().nullish(),description:a.z.string().nullish(),category_id:a.z.string().nullable(),category_slug:a.z.string().nullish(),parent_category_slug:a.z.string().nullish(),tags:a.z.array(a.z.string()).optional().nullable(),tags_v2:a.z.record(a.z.any()).optional(),icon_url:a.z.string().nullish(),thumbnail_url:a.z.string().optional(),thumbnail_src_set:h.P1.nullish(),unpublished_at:a.z.string().nullable(),publishing_status:a.z.nativeEnum(o.KB).nullable(),like_count:a.z.number(),publish_scope:a.z.nativeEnum(E.i).optional()}).and(u.xK);a.z.object({id:a.z.string(),versions:a.z.record(a.z.string(),d.V_),duplicate_count:a.z.number(),created_at:a.z.string(),cover_image_carousel_media_id:a.z.string().optional(),redirect_canvas_url:a.z.string().optional(),current_hub_file_version_id:a.z.string(),viewer_mode:a.z.nativeEnum(o.y4),scaling_mode:a.Ip.ignore(),thumbnail_is_set:a.z.boolean().nullable(),saved_at:a.z.string().optional(),recently_duplicated:a.z.boolean().optional(),related_content:(0,i.M)(a.z.lazy(()=>a.Ip.ignore())),verification_status:a.z.nativeEnum(o.iS).optional(),monetization_status:a.z.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),published_site_url:a.z.string().nullish(),library_key:a.z.unknown().optional(),fig_file_metadata:a.z.object({key:a.z.string(),file:c.L,roles:a.z.array(a.Ip.ignore())}).optional()}),a.z.object({id:a.z.string(),versions:a.z.record(_.Px),current_plugin_version_id:a.z.string().nullable(),is_widget:a.z.coerce.boolean(),install_count:a.z.number(),roles:_.R2,org_id:a.z.string().nullable(),created_at:a.z.string(),current_user_has_run:a.z.boolean().optional(),current_user_first_ran_at:a.z.string().optional(),unique_run_count:a.z.number(),editor_type:a.z.nativeEnum(_.HK),saved_at:a.z.string().optional(),related_content:(0,i.M)(a.z.lazy(()=>_.Lz)),hide_related_content_by_others:a.z.boolean().optional(),install_status:a.z.nativeEnum(_.u8).optional(),profile_install_status:a.z.nativeEnum(_.u8).optional(),monetization_status:a.z.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),third_party_m10n_status:a.z.nativeEnum(m.PN).optional(),creator_policy:a.z.string(),plugin_publishers:u.I7.optional()});let T=a.z.object({id:a.z.string(),file_key:a.z.string(),node_id:a.z.string(),component_key:a.z.string(),checkpoint_id:a.z.string(),file_checkpoint_id:a.z.string(),content_hash:a.z.string(),containing_frame:a.z.object({name:a.z.string(),node_id:a.z.string(),page_id:a.z.string(),page_name:a.z.string(),background_color:a.z.string()}),min_node_height:a.z.number(),min_node_width:a.z.number(),name:a.z.string(),user_id:a.z.string(),publishing_client_version:a.z.number(),description:a.z.string(),created_at:a.z.string(),updated_at:a.z.string(),unpublished_at:a.z.string().nullable(),state_group_id:a.z.string().nullable(),last_published_by_user:a.z.boolean(),destination_key:a.z.string().nullable(),full_hierarchy_path:a.z.string().nullable(),library_hierarchy_path_id:a.z.string(),description_rt:a.z.string(),hub_file_id:a.z.string().nullable(),user_facing_version:a.z.string(),type:a.z.nativeEnum(p.PW),canvas_url:a.z.string(),thumbnail_url:a.z.string(),library_key:a.z.string()}),I=a.z.object({node_id:a.z.string(),name:a.z.string(),thumbnail_url:a.z.string().nullable(),unpublished_at:a.z.string().nullable(),canvas_url:a.z.string().nullable(),updated_at:a.z.string().nullable(),description:a.z.string().nullable(),description_rt:a.z.string().nullable(),meta:a.z.unknown().nullable(),team_id:a.z.string().nullable(),hub_file_id:a.z.string().nullable(),ai_score:a.z.number().nullable(),lexical_score:a.z.number().nullable(),fuse_score:a.z.number().nullable(),server_score:a.z.number().nullable(),containing_frame:a.z.unknown().nullable(),publishing_client_version:a.z.number().nullable(),component_key:a.z.string().nullable(),min_node_width:a.z.number().nullable(),min_node_height:a.z.number().nullable(),content_hash:a.z.string().nullable(),userFacingVersion:a.z.string().nullable(),destination_key:a.z.string().nullable(),isLocal:a.z.boolean().nullable(),_component_v2_record:T.optional()}),S=a.z.object({id:a.z.string(),file_key:a.z.string(),file_version_id:a.z.string(),name:a.z.string(),description:a.z.string().nullable(),publish_scope:a.z.nativeEnum(g.i),org_id:a.z.string().nullable(),license_group_id:a.z.string().nullable(),team_id:a.z.string().nullable(),published_by_user_id:a.z.string().nullable(),unpublished_at:a.z.string().nullable(),created_at:a.z.string(),updated_at:a.z.string(),signed_thumbnail_url:a.z.string().optional(),client_meta:a.z.string().optional(),has_custom_thumbnail:a.z.boolean().optional(),signed_canvas_url:a.z.string().optional(),thumbnail_guid:a.z.string().optional(),library_key:a.z.string()}),A=a.z.object({hub_file:a.Ip.ignore(d.NS).optional(),plugin:a.Ip.ignore(_.Lz).optional(),widget:a.Ip.ignore(_.sM).optional(),template:a.Ip.ignore(S).optional(),component_v2:a.Ip.ignore(I).optional()}),w=b.and(a.z.object({content:A,carousel_media:a.z.object({images:h.fE,videos:h.Fy.optional()})}));v.and(a.z.object({content:A}));let C=a.z.object({dimensions:a.z.object({job_title:a.z.array(a.z.string()),paid_status:a.z.array(a.z.string())}),recommendations:a.z.array(a.z.object({resources:a.z.array(b),properties:a.z.object({job_title:a.z.string(),paid_status:a.z.string()})}))}),N=b.and(a.z.object({resource_type:a.z.enum(["design_template","figjam_template","slide_template"])})),L=a.z.object({recommended_resources:a.z.array(N),internal_resources:a.z.array(N)}),O=b.and(a.z.object({content:a.z.optional(A),carousel_media:a.z.object({images:h.fE,videos:h.Fy.optional()}).optional()})),R=a.z.array(O);a.z.object({is_same_creator:a.z.boolean(),content:a.z.array(b)})},805608:(e,r,n)=>{n.d(r,{q:()=>a}),n(700660);var a=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.DEV_HANDOFF="dev_handoff",e.SITES="sites",e.COOPER="cooper",e.FIGMAKE="figmake",e))(a||{})},90290:(e,r,n)=>{n.d(r,{iB:()=>l});var a=n(677334),i=n(324747),o=n(84610),s=n(71584);let l=a.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});a.M4.Query({fetch:async({categorySlug:e,tagSlug:r})=>(await o.c.getCategoryBySlug(e,{tagSlug:r})).data.meta}),a.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:i.cS.CATEGORY_PAGE})).data.meta[0]})},580213:(e,r,n)=>{n.d(r,{J5:()=>y,iB:()=>b}),n(848318);var a=n(637640);n(329228);var i=n(287105),o=n(624490),s=n(502310),l=n(627062),c=n(506752),d=n(417966),u=n(700660),p=n(221511),m=n(582261);n(90290);var _=n(580181),h=n(373728),g=Object.getPrototypeOf,f=Reflect.get,E=(e,r,n)=>f(g(e),n,r);function y(e,r){let n;let i=decodeURIComponent(e||a.Ay.location.pathname);try{let e=(0,l.pO)(I)(i);if(!e)return null;n=e.params}catch(e){return null}let s=I.parseQueryString(r||a.Ay.location.search),u=n.categorySlug,p=n.tagSlug,{resourceType:m,editorType:_}=(0,h.zs)(s.editor_type,s.resource_type),g={category:u,resourceType:m,editor_type:_,price:s.price||o.C.ALL,creators:d.Z.ALL,sort_by:(0,c.H)(),tags:p?[p]:[]},f=s.sort_by;f&&[c.e.Browse.ALL_TIME,c.e.Browse.PUBLISHED_AT,c.e.Browse.POPULAR,c.e.Browse.RANDOM].includes(f)&&(g.sort_by=f);let E=s.creators;return E&&[d.Z.FIGMA_PARTNER,d.Z.FOLLOWING].includes(E)&&(g.creators=E),g}function b(e){let r=(0,s.S)(e.category,m.LJ);if(void 0===r)return"/community";let{resourceType:n,editorType:a}=(0,h.zs)(e.editor_type,e.resourceType);return new I({categorySlug:r,tagSlug:e.tags[0]},{resource_type:n,editor_type:a,price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class v extends l.nS{}v.deserializeParams=e=>{let r=(0,s.S)(e.categorySlug,m.LJ);if(void 0===r)throw Error(`CategoryRoute: Invalid category slug ${e.categorySlug}`);return{...e,categorySlug:r}},v.serializeParams=e=>e,v.parseQueryString=e=>{let r=(0,i.xL)(e);return{resource_type:(0,s.S)(r.resource_type,p.L.BrowseResourceTypes),editor_type:(0,s.S)(r.editor_type,u.k.Editors),price:(0,s.S)(r.price,o.C.Price),sort_by:(0,s.S)(r.sort_by,c.e.Browse),creators:(0,s.S)(r.creators,d.Z.Browse)}};let T=class extends v{};(0,l.Ac)(T),T.path="/community/:categorySlug/:tagSlug?";let I=T,S=class extends v{};(0,l.Ac)(S),S.path=(0,l.aV)(_.VR,I.path),S.serializeParams=e=>({...(0,_.FZ)(e),...E(S,S,"serializeParams").call(void 0,e)}),S.deserializeParams=e=>({...(0,_.CS)(e),...E(S,S,"deserializeParams").call(void 0,e)}),S.parseQueryString=e=>({...(0,_.p7)(e),...E(S,S,"parseQueryString").call(void 0,e)}),Array.from(Object.values(m.LJ)).map(e=>new I({categorySlug:e}).href)},3649:(e,r,n)=>{n.d(r,{Tg:()=>y,UF:()=>m,Uo:()=>p,ax:()=>g});var a=n(287105),i=n(461979),o=n(627062),s=n(175957),l=n(580181),c=Object.getPrototypeOf,d=Reflect.get,u=(e,r,n)=>d(c(e),n,r),p=(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(p||{}),m=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(m||{});class _ extends o.nS{constructor(e,r){super({...e,urlSlug:(0,i.fs)(e.urlSlug)},r)}}_.deserializeParams=e=>({...e,apiResourceType:e.apiResourceType}),_.serializeParams=e=>e,_.parseQueryString=e=>{let r=(0,a.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}};let h=class extends _{};(0,o.Ac)(h),h.path="/community/:apiResourceType(file|plugin|widget)/:resourceId/:urlSlug?";let g=h,f=class extends _{};(0,o.Ac)(f),f.path=(0,o.aV)(l.VR,g.path),f.serializeParams=e=>({...(0,l.FZ)(e),...u(f,f,"serializeParams").call(void 0,e)}),f.deserializeParams=e=>({...(0,l.CS)(e),...u(f,f,"deserializeParams").call(void 0,e)}),f.parseQueryString=e=>({...(0,l.p7)(e),...u(f,f,"parseQueryString").call(void 0,e)});let E=class extends _{constructor(e,r){super({...e,apiResourceType:"file"},r)}};(0,o.Ac)(E),E.path="/community/:apiResourceType(file)/:resourceId/:urlSlug?",E.serializeParams=e=>u(E,E,"serializeParams").call(void 0,{...e,apiResourceType:"file"}),E.deserializeParams=e=>({...u(E,E,"deserializeParams").call(void 0,e),apiResourceType:"file"}),E.parseQueryString=e=>{let r=(0,a.xL)(e);return{...u(E,E,"parseQueryString").call(void 0,e),preview:(()=>{let e=r.preview;if(void 0!==e)return parseInt(e)===s.G4.DEFAULT?s.G4.DEFAULT:e})(),freemium_preview:r.freemium_preview}};let y=E},580181:(e,r,n)=>{n.d(r,{CS:()=>m,FZ:()=>p,Om:()=>g,VR:()=>u,p7:()=>_,tv:()=>f});var a=n(848318),i=n(66325),o=n(287105),s=n(502310),l=n(627062),c=n(660948);let d="/files/:team(team)?/:id([0-9]+)",u=(0,l.aV)(d,"/resources");function p(e){return"teamId"in e?{team:"team",id:e.teamId}:{id:e.orgId}}function m(e){return"team"===e.team?{teamId:e.id}:{orgId:e.id}}function _(e){return{fuid:(0,o.xL)(e).fuid}}let h=class extends l.nS{};function g(){let e=(0,i.W5)(d);return(0,a.useMemo)(()=>null===e?null:m(e.params),[e])}function f(){let e=(0,i.W5)(d),r=(0,i.zy)();return(0,a.useMemo)(()=>null===e?null:_(r.search),[r.search,e])}(0,l.Ac)(h),h.path=(0,l.aV)(u,"/:tab(internal|community)"),h.serializeParams=e=>({...p(e),tab:e.tab}),h.deserializeParams=e=>({...m(e),tab:(0,s.S)(e.tab,c.N$,c.N$.INTERNAL)}),h.parseQueryString=_},84257:(e,r,n)=>{n.d(r,{bP:()=>g});var a=n(287105),i=n(624490),o=n(502310),s=n(627062),l=n(506752),c=n(417966),d=n(700660),u=n(221511),p=n(580181);class m extends s.nS{}let _=class extends m{constructor(e,r){super(e,{...r,resource_type:r.resource_type??u.L.SearchResourceTypes.MIXED,editor_type:r.editor_type??d.k.Editors.ALL,price:r.price??i.C.ALL,sort_by:r.sort_by??l.e.Search.RELEVANCY,creators:r.creators??c.Z.Search.ALL})}};(0,s.Ac)(_),_.path="/community/search",_.parseQueryString=e=>{let r=(0,a.xL)(e);return{query:r.query??"",resource_type:(0,o.S)(r.resource_type,u.L.SearchResourceTypes),editor_type:(0,o.S)(r.editor_type,d.k.Editors),price:(0,o.S)(r.price,i.C.Price),sort_by:(0,o.S)(r.sort_by,l.e.Search),creators:(0,o.S)(r.creators,c.Z.Search)}};let h=class extends m{constructor(e,r){super(e,{...r,resource_type:r.resource_type??u.t.FILES,editor_type:r.editor_type??d.k.Editors.ALL,price:r.price??i.C.ALL})}};(0,s.Ac)(h),h.path=(0,s.aV)(p.VR,_.path),h.serializeParams=p.FZ,h.deserializeParams=p.CS,h.parseQueryString=e=>{let r=(0,a.xL)(e);return{query:r.query??"",resource_type:(0,o.S)(r.resource_type,u.t),editor_type:(0,o.S)(r.editor_type,d.k.Editors),price:(0,o.S)(r.price,i.C.Price)}};let g=h,f=class extends m{constructor(e,r){super(e,{...r,resource_type:r.resource_type??u.t.FILES,editor_type:r.editor_type??d.k.Editors.ALL})}};(0,s.Ac)(f),f.path=(0,s.aV)(p.VR,"/internal/search"),f.serializeParams=p.FZ,f.deserializeParams=p.CS,f.parseQueryString=e=>{let r=(0,a.xL)(e);return{query:r.query??"",resource_type:(0,o.S)(r.resource_type,u.t),editor_type:(0,o.S)(r.editor_type,d.k.Editors)}}},373728:(e,r,n)=>{n.d(r,{pJ:()=>l,zs:()=>s}),n(848318);var a=n(660376);n(637640);var i=n(700660),o=n(221511);function s(e=i.k.Editors.ALL,r,n){switch(e){case i.k.Editors.ALL:case i.k.Editors.FIGJAM:switch(r){case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.MIXED};case o.L.SearchResourceTypes.PROFILES:return{editorType:i.k.Editors.ALL,resourceType:r};default:return{editorType:e,resourceType:r}}case i.k.Editors.FIGMA:switch(r){case o.L.BrowseResourceTypes.FILES:if(n)return{editorType:i.k.Editors.ALL,resourceType:r};return{editorType:e,resourceType:r};case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.MIXED};case o.L.SearchResourceTypes.PROFILES:return{editorType:i.k.Editors.ALL,resourceType:r};default:return{editorType:e,resourceType:r}}case i.k.Editors.SITES:switch(r){case o.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case o.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.FILES};default:return{editorType:i.k.Editors.ALL,resourceType:r}}case i.k.Editors.FIGMAKE:return{editorType:e,resourceType:r??o.L.BrowseResourceTypes.MIXED};case i.k.Editors.COOPER:switch(r){case o.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case o.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.FILES};default:return{editorType:i.k.Editors.ALL,resourceType:r}}case i.k.Editors.PROTOTYPE:if(n)return{editorType:i.k.Editors.ALL,resourceType:r??o.L.BrowseResourceTypes.MIXED};switch(r){case o.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case o.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.FILES};default:return{editorType:i.k.Editors.ALL,resourceType:r}}case i.k.Editors.DEV_MODE:switch(r){case o.L.BrowseResourceTypes.PLUGINS:return{editorType:e,resourceType:r};case o.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.PLUGINS};default:return{editorType:i.k.Editors.ALL,resourceType:r}}case i.k.Editors.SLIDES:switch(r){case o.L.BrowseResourceTypes.FILES:case o.L.BrowseResourceTypes.PLUGINS:return{editorType:e,resourceType:r};case o.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:o.L.BrowseResourceTypes.FILES};default:return{editorType:i.k.Editors.ALL,resourceType:r}}default:(0,a.xb)(e)}}function l(){return s()}},350808:(e,r,n)=>{n.d(r,{e:()=>l});var a=n(848318),i=n(833420),o=n(430266);let s="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",l=(0,o.IY)(function(e){return a.createElement(i.Yf,{name:"Avatar"},a.createElement(i.uA,{name:"type=Letter,size=Large",fill:"#FFC700",stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:32,height:32,verticalAlignItems:"center",horizontalAlignItems:"center"},a.createElement(i.EY,{name:"letter",fill:"#FFF",verticalAlignText:"center",horizontalAlignText:"center",lineHeight:24,fontFamily:"Inter",letterSpacing:-.14399999618530274},e.letter??"A")),a.createElement(i.uA,{name:"type=Letter,size=Small",fill:"#FFC700",stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:26,height:26,verticalAlignItems:"center",horizontalAlignItems:"center"},a.createElement(i.EY,{name:"letter",fill:"#FFF",verticalAlignText:"center",horizontalAlignText:"center",lineHeight:24,fontFamily:"Inter",fontSize:14,letterSpacing:-.014000000208616257},e.letter??"A")),a.createElement(i.uA,{name:"type=Image,size=Large",effect:{spread:1,color:"#FFF",offset:{x:0,y:0},blur:0,type:"drop-shadow"},fill:{type:"image",src:s,imageRef:"efe98099a0aa97c1aa64e286bc82e633cc9aed22",scalingFactor:.5},stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:32,height:32,verticalAlignItems:"center",horizontalAlignItems:"center"}),a.createElement(i.uA,{name:"type=Image,size=Small",fill:{type:"image",src:s,imageRef:"efe98099a0aa97c1aa64e286bc82e633cc9aed22",scalingFactor:.5},stroke:"#0000001A",cornerRadius:13,direction:"vertical",spacing:8,padding:8,width:26,height:26,verticalAlignItems:"center",horizontalAlignItems:"center"}))})},734235:(e,r,n)=>{n.d(r,{k:()=>i}),n(848318);var a=n(782073);n(82433),n(536384);var i=(e=>(e.DIVIDER="divider",e.TEXT="text",e.SECTION_HEADER="section-header",e))(i||{});a.g.textBodyLarge,a.g.textBodyLargeStrong},127389:(e,r,n)=>{n.d(r,{LU:()=>l,kG:()=>s});var a=n(186606),i=n(640483),o=n(554326);function s(){let e=(0,i.to)(),r=(0,o.ut)(a.Ez5?.cooperFocusView().isInFocusedNodeView,!0);return e&&r}function l(){return(0,o.ut)(a.Ez5?.cooperFocusView().focusedNodeId,"")}},564532:(e,r,n)=>{n.d(r,{lW:()=>s});var a=n(677334),i=n(180495);a.M4.Query({fetch:async()=>(await i.Z.getDefaultLibraries({editorType:"cooper_shapes"})).data.meta}),a.M4.Query({fetch:async()=>(await i.Z.getDefaultLibraries({editorType:"cooper_text"})).data.meta});let o=a.M4.Query({fetch:async()=>(await i.Z.getDefaultLibraryAttribution({editorType:"cooper"})).data.meta.library_key_to_attribution});function s(e){let[r]=(0,a.IT)(o({enabled:e}));return r.data?r.data:{}}},640483:(e,r,n)=>{n.d(r,{HH:()=>d,eM:()=>s,im:()=>l,to:()=>c});var a=n(301168);n(186606);var i=n(19180);n(554326);var o=n(259964);function s(e){return e?.view==="fullscreen"&&e?.editorType===o.nT.Cooper}function l(e){return s(e.selectedView)}function c(){return(0,a.d4)(l)}function d(){return!!(0,i.k)().cooper}},318798:(e,r,n)=>{n.d(r,{D9:()=>i,Mt:()=>a}),n(752181);let a="Copying 3 or more non-instance assets",i="cooper_publish_templates_target_key"},214625:(e,r,n)=>{n.d(r,{DG:()=>h});var a=n(848318);n(301168),n(82433),n(382902),n(63163);var i=n(615233);n(230618);var o=n(967688);n(453370),n(533737);var s=n(957872);n(506428);var l=n(34375),c=n(34542);n(539829);var d=n(263336),u=n(45937);n(566901);var p=n(391301);n(556049);var m=n(136169);n(756672);var _=n(318798);function h(){let{show:e,isShowing:r,complete:n,uniqueId:h}=(0,c.e)({overlay:m.QKV,priority:d.N.DEFAULT_MODAL});return(0,l.E)(h,_.Mt,()=>{e()}),a.createElement(p.rq,{arrowPadding:8,description:(0,o.tx)("cooper.onboarding.templates_help_your_team_stay"),isShowing:r,media:a.createElement(u.y,{src:(0,i.ck)("7c5445059896c65ae2098087f34d2f35cc5a8b20"),alt:(0,o.t)("cooper.onboarding.overlay_image_alt"),aspectRatio:240/135}),onClose:n,onTargetLost:n,primaryCta:{label:(0,o.tx)("general.got_it"),onClick:n,type:"button",ctaTrackingDescriptor:s.c.GOT_IT},targetKey:_.D9,title:(0,o.tx)("cooper.onboarding.publish_templates_to_your_team"),trackingContextName:"Slides Onboarding > Publishing Overview"})}},616178:(e,r,n)=>{n.d(r,{Lk:()=>o,x:()=>i}),n(382902);var a=n(4881),i=(e=>(e.ASSETS="ASSETS",e.TEMPLATES="TEMPLATES",e.TEXT="TEXT",e.MEDIA="MEDIA",e.SHAPES="SHAPES",e.INSERTS="INSERTS",e.FIELDS="FIELDS",e.BULK_CREATE="BULK_CREATE",e.FIND="FIND",e))(i||{});let o=(0,a.rt)("ASSETS")},237100:(e,r,n)=>{n.d(r,{Jw:()=>y,Lm:()=>s,Md:()=>m,UV:()=>g,VW:()=>d,WU:()=>f,_9:()=>E,mF:()=>o});var a=n(382902),i=n(4881),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.START_FROM_SCRATCH="START_FROM_SCRATCH",e.NEW_TEMPLATE="NEW_TEMPLATE",e.TEAM="TEAM",e.TEMPLATES="TEMPLATES",e.USE_CASE="USE_CASE",e))(o||{});(0,i.Wh)(()=>(0,a.eU)(!1));let s=(0,a.eU)({type:"ALL"});(0,i.Wh)(()=>(0,a.eU)(!0));let l=(0,a.eU)({});(0,a.eU)(e=>e(l),(e,r,n,a)=>{r(l,e=>({...e,[n]:a}))}),(0,a.eU)(null,(e,r)=>{r(l,{})}),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(!1)),(0,i.Wh)(()=>(0,a.eU)(!1)),(0,a.eU)(Math.random()),(0,i.Wh)(()=>(0,a.eU)("COMMUNITY")),(0,i.Wh)(()=>(0,a.eU)("")),(0,i.Wh)(()=>(0,a.eU)(!0)),(0,i.Wh)(()=>(0,a.eU)(!0)),(0,i.Wh)(()=>(0,a.eU)(!0));var c=(e=>(e.DEFAULT="DEFAULT",e.BROWSING_TEMPLATE="BROWSING_TEMPLATE",e))(c||{});(0,i.Wh)(()=>(0,a.eU)({type:"DEFAULT"})),(0,i.Wh)(()=>(0,a.eU)(!1));var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],p=[...u,"CLEARED"];function m(e){return u.includes(e)}let _={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:p,PUBLISH_TEMPLATE_ERRORED:p,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:p,UNPUBLISH_ERRORED:p,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:p,PUBLISH_HUB_FILE_ERRORED:p},h=(0,a.eU)({state:"CLEARED"}),g=(0,a.eU)(e=>e(h).state),f=(0,a.eU)(e=>{let r=e(h);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,a.eU)(null,(e,r,n)=>{let a=e(g),{state:i}=n;if(_[a].includes(i))r(h,n);else throw Error(`Invalid state transition from ${a} to ${i}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Cooper Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Cooper Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Cooper Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Cooper Hub File Unpublish";default:return e}}(0,a.eU)(null,(e,r)=>r(h,{state:"CLEARED"})),(0,i.Wh)(()=>(0,a.eU)(!1))},45487:(e,r,n)=>{n.d(r,{Hk:()=>A,OL:()=>N,fu:()=>w,pu:()=>L});var a=n(848318),i=n(559389),o=n(186606),s=n(19180),l=n(781239),c=n(41830),d=n(454805),u=n(230618),p=n(967688),m=n(372566),_=n(303397),h=n(552807),g=n(120846),f=n(257620);let E={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF";case"PDF Print":return"PDF Print"}}},y=[{type:"CONTENT_SCALE",value:.5},{type:"CONTENT_SCALE",value:1},{type:"CONTENT_SCALE",value:2},{type:"CONTENT_SCALE",value:3},{type:"CONTENT_SCALE",value:4}],b=new m.mz,v=g.l6,T=g.c$,I=g.l6,S=g.c$;function A({imageType:e,setImageType:r,dropdownShown:n,dispatch:i,ariaLabel:o}){return a.createElement(c.E,{name:"export_image_type_select"},a.createElement(v,{ariaLabel:o,dispatch:i,dropdownClassName:f.eD,dropdownShown:n,formatter:E,id:"export-image-type",inputClassName:f.SL,onChange:e=>r(e),onMouseDown:e=>e.stopPropagation(),property:e,recordingKey:l.Pt("imageType")},a.createElement(T,{value:"PNG",recordingKey:l.Pt("imageType","png")}),a.createElement(T,{value:"JPEG",recordingKey:l.Pt("imageType","jpeg"),fullWidth:!0}),a.createElement(T,{value:"PDF",recordingKey:l.Pt("imageType","pdf"),fullWidth:!0}),!!(0,s.k)().buzz_print_export&&a.createElement(T,{value:"PDF Print",recordingKey:l.Pt("imageType","pdf_print"),fullWidth:!0})))}function w({imageType:e,constraint:r,setConstraint:n,dropdownShown:i,dispatch:o,ariaLabel:s}){let d=y.map((e,r)=>a.createElement(S,{key:r,value:e,recordingKey:l.Pt("constraints",e.value),fullWidth:!0}));return a.createElement(c.E,{name:"export_constraint_combo_box"},a.createElement(I,{ariaLabel:s,disabled:"PDF"===e||"PDF Print"===e,dispatch:o,dropdownClassName:f.eD,dropdownShown:i,formatter:b,id:"export-constraint",inputClassName:f.SL,onChange:e=>n(e),onMouseDown:e=>e.stopPropagation(),property:r,recordingKey:l.Pt("contraint")},d))}function C({thumbnail:e}){return a.createElement("div",{className:f.cT},a.createElement(u.oW,{src:e.src,width:e.displaySize.x,height:e.displaySize.y,style:{objectFit:"contain"},alt:(0,p.t)("cooper.toolbar.export_modal.preview_thumbnail_alt")}))}function N({panelWidth:e,panelHeight:r}){return a.createElement("div",{style:{width:`${e}px`,height:`${r??e}px`,borderRadius:"2px",backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)"}})}let L=a.forwardRef(function({selectedCooperFrameNodeId:e,panelWidth:r,panelHeight:n,colorProfile:s,hasBorder:l,renderPrintMarks:c},u){let[p,m]=(0,a.useState)(null),g=(0,a.useCallback)(()=>{let a=new d.Mi(r,n??r),i=h._G(a,e,!0,o.tvY.CHECKERBOARD,!1,!1,!0,c),l=null;i&&i.pixels&&i.pixelSize&&i.displaySize&&(l={src:h.Pv(i.pixels,i.pixelSize,s),displaySize:i.displaySize}),m(l)},[s,n,r,e,c]),f=(0,i.s)(()=>g(),1e3),E=(0,a.useCallback)(()=>{null!==e&&f()},[e,f]);return(0,a.useEffect)(()=>(_.Y5.fromFullscreen.on("pingSceneGraphEvent",E),g(),()=>{_.Y5.fromFullscreen.removeListener("pingSceneGraphEvent",E),f.cancel()}),[c]),a.createElement("div",{ref:u,style:{width:`${r}px`,height:`${n??r}px`,borderRadius:"2px",border:l?"1px solid var(--color-border)":"none"}},p&&a.createElement(C,{thumbnail:p}))})},1271:(e,r,n)=>{n.d(r,{Pc:()=>u,Wn:()=>c,XR:()=>d,dS:()=>m,gI:()=>p}),n(848318);var a=n(301168);n(186606);var i=n(553547),o=n(195124),s=n(768618),l=n(349048);function c(){let e=function(){let e=function(){let e=(function(){let e=(0,s.UN)();return e&&e.isValidScene?(0,o.bV)(e,"0:1"):[]})().filter(e=>"SLIDE_GRID"===e.type);if(e.length){if(e.length>1){console.warn("Multiple canvas grid node found");return}return e[0]}}();return e?e.childrenNodes.filter(e=>"SLIDE_ROW"===e.type):(console.warn("No valid canvas grid node found"),[])}(),r=[];for(let n of e){let e=n.childrenNodes.filter(e=>e.isCooperFrame);r=r.concat(e)}return r}function d(){return c().map(e=>e.guid)}function u(){let e=d();return(0,l.k9)(()=>e,[e])}function p(){let e=(0,a.d4)(e=>e.mirror.sceneGraphSelection);return(0,l.k9)(()=>{let r=new Set;return Object.keys(e).forEach(e=>{let n=(0,s.UN)().get(e),a=n?.containingCooperFrameId();a&&(0,i.fn)((0,i.sH)(a))&&r.add(a)}),[...r]},[e])}function m(){let e=(0,a.d4)(e=>e.mirror.sceneGraphSelection);return(0,l.k9)(()=>{let r=new Set;return Object.keys(e).forEach(e=>{let n=(0,s.UN)().get(e);n&&"SLIDE_ROW"===n.type&&r.add(n.guid)}),[...r]},[e])}},544348:(e,r,n)=>{var a=n(186606),i=n(382902),o=n(4881),s=n(10082);(0,s.SG)(()=>a.Ez5.cmsState().bindingCollectionId);let l=(0,s.SG)(()=>a.Ez5.cmsState().bindingFieldSchema);(0,i.mg)(l,e=>e?.id),(0,o.Wh)(()=>(0,i.eU)(null)),(0,i.eU)(new Set),(0,i.Iz)(()=>(0,i.eU)(void 0)),(0,o.Wh)(()=>(0,i.eU)(new Set)),(0,o.Wh)(()=>(0,i.eU)(null)),(0,i.eU)(480),(0,i.eU)(!1),(0,o.Wh)(()=>(0,i.eU)(null)),(0,o.Wh)(()=>(0,i.eU)(null))},830021:(e,r,n)=>{n.d(r,{If:()=>d}),n(848318),n(938982);var a=n(186606),i=n(320953),o=n(768618);n(382902),n(870567),n(290267),n(410725),n(757685),n(998568),n(810503),n(182317),n(967688),n(544348);var s=n(436941),l=n(303397);n(55116);var c=n(273555);function d(e,r){let n=(0,o.UN)(),d=(0,s.oj)(n.getDirectlySelectedNodes()),u={type:"IMAGE",color:{r:1,g:1,b:1,a:1},opacity:1,imageScaleMode:"FILL",imageVar:{value:{cmsAliasValue:{collectionId:e,fieldId:r,itemId:""}},dataType:"CMS_ALIAS",resolvedDataType:"IMAGE"}},p=d[0].fills,m=p.findIndex(r=>"IMAGE"===r.type&&r.imageVar?.value?.cmsAliasValue?.collectionId===e);-1!==m?p[m]=u:p.push(u),i.l7.user("dakota-set-image-binding",()=>{a.Egt?.clearSelection(),a.Egt?.addToSelection([...new Set((d||[]).flatMap(r=>r.getNodesForCmsBinding(e).map(e=>e.guid)))]),l.Y5.updateSelectionProperties({fillPaints:p},{shouldCommit:c.zk.YES}),a.Egt?.replaceSelection(d?.map(e=>e.guid)??[],!1)})}n(569556)},384192:(e,r,n)=>{n.d(r,{c$:()=>c,fk:()=>l,gL:()=>s});var a=n(848318);n(183603);var i=n(310048),o=n(930711);function s(e){let{collection:r,status:n}=(0,i.G)({collectionStableId:e});return(0,a.useMemo)(()=>({status:n,data:r}),[r,n])}function l(e){let{collections:r}=(0,o.X)({fileKey:e});return(r?.length??0)>0}function c(e){let{collections:r,status:n}=(0,o.X)({fileKey:e});return(0,a.useMemo)(()=>({status:n,data:r}),[r,n])}n(569556)},777939:(e,r,n)=>{n.d(r,{dx:()=>o});var a=n(848318);n(183603),n(757685),n(182317);var i=n(505959);function o({collectionId:e,itemId:r}){let{item:n,status:o}=(0,i.H)({collectionStableId:e,itemStableId:r});return(0,a.useMemo)(()=>({status:o,data:n}),[n,o])}n(71173)},522679:(e,r,n)=>{function a(e){let r=e.split("/").filter(e=>e.length>0);return r.length<2?null:r.slice(1).join("/")}function i(e){let r=e.split("/").filter(Boolean);return 0===r.length?"/":"/"+r[0]}function o(e){let r=e.getDakotaItemData()?.slugFieldId,n=e.getDakotaItemData()?.fieldIdToDataMap,a=n?.[r]?.value;return a&&"string"==typeof a?`${e.name}/${a}`:e.name}function s(e){return"RESPONSIVE_SET"===e.type&&!!e.getDakotaSelector()?.collectionId}n.d(r,{Iv:()=>a,if:()=>s,lB:()=>o,sO:()=>i})},706846:(e,r,n)=>{n.d(r,{Dh:()=>d,_j:()=>o});var a=n(755595),i=(e=>(e.Title="Title",e.Slug="Slug",e))(i||{});let o={PLAIN_TEXT:"plain_text",RICH_TEXT:"rich_text",LINK:"link",SLUG:"slug",IMAGE:"image",DATE:"date"};var s=(e=>(e.PLAIN_DATE="plain_date",e.PLAIN_DATE_TIME="plain_date_time",e.ZONED_DATE_TIME="zoned_date_time",e))(s||{});let l=a.z.object({sessionID:a.z.number(),localID:a.z.number()}),c=a.z.object({nodeId:l.optional(),cmsItemId:a.z.string().optional(),fieldSchemaId:a.z.string().optional()});a.z.object({url:a.z.string().optional(),guid:l.optional(),cmsTarget:c.optional(),openInNewTab:a.z.boolean().optional()});let d=a.z.object({image:a.z.string(),imageThumbnail:a.z.string().optional(),animatedImage:a.z.string().optional(),originalImageHeight:a.z.number(),originalImageWidth:a.z.number(),altText:a.z.string(),animationFrame:a.z.number().optional()});a.z.object({...d.shape,fileName:a.z.string()})},436941:(e,r,n)=>{n.d(r,{ZS:()=>s,mN:()=>l,oj:()=>c}),n(848318),n(938982),n(186606);var a=n(553547),i=n(768618);n(998568);var o=n(956174);function s(e){return(0,i.UN)().getDirectlySelectedNodes().every(r=>(!e||!!e.includes(r.type))&&null!==r.getNearestDakotaCollectionId())}function l(){return function(e){let r=new Set;return e.forEach(e=>{let n=e.getNearestDakotaCollectionId();n&&r.add(n)}),1===r.size}((0,i.UN)().getDirectlySelectedNodes())}function c(e){if(!o.e)return e;let r=e.filter(e=>e.isInPrimaryBreakpointFrame),n=new Set(r.map(e=>e.multiEditGlueId??""));return[...r,...e.filter(e=>!e.isInPrimaryBreakpointFrame&&(e.multiEditGlueId&&!n.has(e.multiEditGlueId)?(n.add(e.multiEditGlueId),!0):!(0,a.fn)((0,a.sH)(e.multiEditGlueId))))]}n(730143)},677526:(e,r,n)=>{n.d(r,{ZI:()=>_,pP:()=>p,wv:()=>m});var a=n(768618),i=n(19180),o=n(384192),s=n(930711),l=n(706846),c=n(436941),d=n(871114),u=n(730143),p=(e=>(e.DISABLED_FOR_INSTANCE_SUBLAYER="DISABLED_FOR_INSTANCE_SUBLAYER",e.DISABLED_FOR_INSTANCE_SUBLAYER_IN_CMS_LIST="DISABLED_FOR_INSTANCE_SUBLAYER_IN_CMS_LIST",e.DISABLED_FOR_NOT_IN_CMS_CONTAINER="DISABLED_FOR_NOT_IN_CMS_CONTAINER",e.DISABLED_FOR_NO_IMAGE_FIELD="DISABLED_FOR_NO_IMAGE_FIELD",e))(p||{});function m(e){return e.some(e=>"DISABLED_FOR_NOT_IN_CMS_CONTAINER"===e.disabledReason)}function _(){let e=(0,c.ZS)(),r=function(){let e=(0,a.UN)().getDirectlySelectedNodes(),r=e[0]?.getNearestDakotaCollectionId(),n=(0,o.gL)(r??"");return!!(n.data?.fieldSchemas??[]).some(e=>l._j.IMAGE===e.fieldType)}(),{collections:n}=(0,s.X)({fileKey:(0,u.tS)()});return{showDakotaFieldPicker:(0,d.U)()&&!!(0,i.k)().dakota_field_image&&null!==n&&n.length>0,filteredFieldTypes:[{fieldType:l._j.IMAGE,disabledReason:e?r?void 0:"DISABLED_FOR_NO_IMAGE_FIELD":"DISABLED_FOR_NOT_IN_CMS_CONTAINER"}]}}},980393:(e,r,n)=>{n.d(r,{rZ:()=>G,yT:()=>H});var a=n(848318),i=n(891627),o=n(301168),s=n(430385),l=n(658029),c=n(458612),d=n(990066),u=n(382902),p=n(536384),m=n.n(p),_=n(781239),h=n(705974),g=n(212984),f=n(178806),E=n(967688),y=n(925085),b=n(986219),v=n(43322),T=n(421300),I=n(341298),S=n(372234),A=n(153911),w=n(792533),C=n(453370),N=n(142896),L=n(17753),O=n(698429),R=n(368085),P=n(108977),D=n(15690),k=n(913030),M=n(464604);let F=(0,u.eU)(!1),x=e=>e.filter(e=>!e.excludeFromCopy);function U(e,r={}){return e.replace(T.Z4,"").replace(T.M$,"").replace(T.NT,"").replace(T.Q6,"").replace(A.G6,"").replace(A.P1,"").replace(b.k,e=>{let n=r[e];return n?"INSTANCE"===n.type||"D2C"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"})}function B(e,r={}){return(0,s.WI)(e.map(e=>{let n=x(e.lines);return 0===n.length?null:U((0,I.kt)(n,!0),r)})).join("\n\n")}function G({source:e,title:r,tooltip:n=(0,E.t)("inspect_panel.copy"),selectedAll:i,additionalTrackingProperties:o,onMouseEnter:s,onMouseLeave:c,...u}){let p=(0,O.ks)(),m=(0,v.v4)(),_=(0,a.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?m.type:void 0,pluginId:"code connect"!==e?m.id:void 0,selectedAll:i,source:e,title:r,isDevMode:p,...o}),[p,m.id,m.type,i,e,r,o]);return e?a.createElement(f.Me,{...u,"aria-label":u["aria-label"]??n,htmlAttributes:{"data-tooltip":n,"data-tooltip-type":L.Ib.TEXT,onMouseEnter:s,onMouseLeave:c},trackingProperties:_},a.createElement(d.X,null)):a.createElement(l.K,{...u,"aria-label":u["aria-label"]??n,htmlAttributes:{"data-tooltip":n,"data-tooltip-type":L.Ib.TEXT,onMouseEnter:s,onMouseLeave:c}},a.createElement(d.X,null))}function V({onClick:e,copyAllActionEnabled:r=!1,onMouseEnter:n,onMouseLeave:i,title:o,isCopyingAll:s=!1,additionalTrackingProperties:l}){let c=o??(0,E.t)("inspect_panel.copy_section_default_sectionname"),d=r?(0,E.t)("inspect_panel.copy_section_with_shift",{sectionName:c}):(0,E.t)("inspect_panel.copy_section",{sectionName:c});return a.createElement(G,{onClick:e,onMouseEnter:n,onMouseLeave:i,tooltip:d,source:"codegen",title:o,selectedAll:s,additionalTrackingProperties:l})}function H(e){let{code:r,section:n,hasCodeDiff:s,collapseLongSections:l=!0,bottomPadding:c=!1,copyActionEnabled:d=!0,copyAllActionEnabled:p=!0,hideHints:h=!1,recordingKey:g,additionalHeaderActions:f=null,footerActions:b=null,type:v="default",leftHeaderActions:T=null,hideHeader:S=!1,copyButtonContainer:A,additionalTrackingProperties:L,onInstancePillClick:O}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let P=(0,o.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),k=(0,o.wA)(),x=function(e,r){let n=(0,o.wA)();return(0,D.IG)(e.lines,e.language,e.pills,n,r)}(n,O),[U,G]=a.useState(l),[H,Y]=a.useState(!1),[$,q]=(0,u.fp)(F),X=p&&$;a.useEffect(()=>{G(l)},[P,l]);let J=a.useMemo(()=>U&&n.collapseAfterIndex?x.slice(0,n.collapseAfterIndex):x,[x,n.collapseAfterIndex,U]),Z=n.collapseAfterIndex?x.length-n.collapseAfterIndex:0,Q=a.useCallback(()=>{if(!X)return B([n],n.pills);{let e=r.reduce((e,r)=>Object.assign(e,r.pills),{});return B(r,e)}},[X,n,r]),ee=a.useCallback(()=>{let e=Q();e&&k(w.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[k,Q]),et=_.rf(_.Pt(g,"copy"),"click",ee),er=a.useCallback(()=>{k(w.lW({stringToCopy:window.getSelection()?.toString()||Q(),ignoreLineBreaks:!1}))},[k,Q]),en=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;k(C.j7({type:N.Sl,data:{clientX:r,clientY:n,onCopyText:er}}))},[er,k]),ea=a.useCallback(e=>{p&&q(e.shiftKey),Y(!0)},[q,p]),ei=_.rf(_.Pt(g,"copy"),"mouseenter",ea),eo=a.useCallback(e=>{q(!1),Y(!1)},[q]),es=a.useCallback(e=>{q(H&&p&&e.shiftKey)},[H,q,p]);a.useEffect(()=>(document.addEventListener("keydown",es),document.addEventListener("keyup",es),()=>{document.removeEventListener("keydown",es),document.removeEventListener("keyup",es)}),[es]);let el=function(e){switch(e){case"Modifier":return(0,E.t)("inspect_panel.code.modifier");case"Code":return(0,E.t)("inspect_panel.code.code");case"Style":return(0,E.t)("inspect_panel.code.style");case"Variables":return(0,E.t)("inspect_panel.code.variables");case"Layout":return(0,E.t)("inspect_panel.properties.layout");case"Position":return(0,E.t)("inspect_panel.code.position");case"Other":return(0,E.t)("inspect_panel.code.other");case"Typography":return(0,E.t)("inspect_panel.typography.title");default:return e}}(n.name),ec=H||X,ed=a.useRef(null),eu=(0,a.useMemo)(()=>function(){return a.createElement(V,{onClick:et,copyAllActionEnabled:p,onMouseEnter:ei,onMouseLeave:eo,title:n.name,isCopyingAll:X,additionalTrackingProperties:L})},[et,p,ei,eo,n.name,X,L]);return a.createElement(a.Fragment,null,A&&A.current&&d&&(0,i.createPortal)(a.createElement(eu,null),A.current),a.createElement(R.VZ,{hideHeader:!0,noPadding:!c,noBorder:!0,recordingKey:`code:${n.name}`},a.createElement(D.GM.Provider,{value:{ref:ed}},a.createElement(j,{content:a.createElement(z,{code:n,lines:J,hideHints:h||ec,hasCodeDiff:s,isCopyHighlightActive:ec,onInstancePillClick:e.onInstancePillClick}),footer:b?a.createElement(W,{type:v},b):void 0,header:!S&&a.createElement(K,{type:v,rowRef:ed,muted:n.isTextSegment,actions:a.createElement(a.Fragment,null,f||a.createElement(y.M,null),d&&a.createElement(eu,null)),title:el,leftActions:T,titleAccessory:e.titleAccessory}),leftGutter:s?function(e,r=!1){return a.createElement("div",{className:M.x4},e.map((e,n)=>{let i=e.diff===I.j5.ADDED?"+":e.diff===I.j5.REMOVED?"-":null;return a.createElement("div",{className:m()({[M.BJ]:!0,[M.L6]:!r&&e.diff===I.j5.ADDED,[M.pG]:!r&&e.diff===I.j5.REMOVED,[M.wY]:r&&!e.excludeFromCopy}),key:n,"aria-hidden":!0},r?null:i)}))}(J,ec):function(e,r=!1){return a.createElement("div",{className:M.BA},e.map((e,n)=>a.createElement("div",{className:m()(M.eT,{[M.wY]:r&&!e.excludeFromCopy}),key:n,"aria-hidden":!0},n+1)))}(J,ec),onContextMenu:en,onShowMore:()=>G(!1),shouldShowMore:U&&Z>0,showMoreLinesCount:Z,type:v}))))}function z({code:e,lines:r,hideHints:n,hasCodeDiff:i,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=a.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),d=({index:s})=>{let d=r[s],u=e.lines[s];if(!d||!u)return null;let p=8*(0,I.Gj)(d).length+16+8,_=U(u.code.toString(),e.pills),h=i&&(d.diff===I.j5.ADDED||d.diff===I.j5.REMOVED),g=a.createElement("span",{style:{display:"inline-block",paddingLeft:p,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,onClick:l},h&&a.createElement(c.E,null,d.diff===I.j5.ADDED&&(0,E.t)("dev_handoff.compare_changes.code_line.added_line",{line:_}),d.diff===I.j5.REMOVED&&(0,E.t)("dev_handoff.compare_changes.code_line.removed_line",{line:_})),a.createElement("span",{"aria-hidden":h},d.code)),f=d.hint,y=void 0!==f&&f.type===S.bv.Tooltip?a.createElement(P.A,{hint:(0,P.x)(f),hidden:n}):null,b=e.lines[s]?.diff;return a.createElement("div",{key:s,className:m()({[M.n8]:!0,[M.vN]:b===I.j5.ADDED&&!o,[M.rq]:b===I.j5.REMOVED&&!o,[M.R0]:i&&b!==I.j5.ADDED&&b!==I.j5.REMOVED&&!o,[M.r9]:i&&b===I.j5.REMOVED&&o,[M.wY]:o&&!d?.excludeFromCopy})},g,y)};return a.createElement("code",{className:m()(M.Zh,k.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>d({index:r})))}function K({title:e,muted:r,actions:n,type:i,leftActions:o,rowRef:s,titleAccessory:l}){return a.createElement("div",{className:M.Tw,ref:s},a.createElement("div",{className:m()({[M.S7]:!0,[M.aW]:"connected"===i,[M.jW]:"manual"===i,[M.JM]:"connected-playground"===i})},o,a.createElement("h3",{className:r?M.fH:M.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),l,a.createElement("div",{className:M.zB},n)))}function W({children:e,type:r}){return a.createElement("div",{className:M.p4},a.createElement("div",{className:m()({[M.I$]:!0,[M.aW]:"connected"===r,[M.jW]:"manual"===r})},e))}function j({header:e,content:r,leftGutter:n,footer:i,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:d,copyHoverClassName:u}){let[p,_]=a.useState(null),f=p&&p.value?M.Lo:M.ZP,y=a.useCallback(e=>{_({value:e})},[]),b=!!n,v=!!i,T=a.useRef(null);return a.createElement("div",{className:M._X},e,a.createElement("div",{className:m()(M.is,u,{[M.Eu]:b,[M.xP]:v,[M.aW]:"connected"===o,[M.jW]:"manual"===o})},b&&n,a.createElement("div",{className:M.jJ},a.createElement(h.Z,{onCanScrollChanged:y,className:m()(f),scrollBarAlways:!0,childRef:T},a.createElement("div",{onContextMenu:d,style:{width:"fit-content",minWidth:"100%"},ref:T},r)),s&&a.createElement("div",{className:M.cH},a.createElement(g.d,{label:(0,E.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),v&&i)}},43322:(e,r,n)=>{n.d(r,{AC:()=>g,Pt:()=>h,XP:()=>_,v4:()=>E,xv:()=>f});var a=n(848318),i=n(301168),o=n(382902),s=n(113618),l=n(967688),c=n(85586),d=n(652576),u=n(20687),p=n(259964),m=n(906132);function _(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||c.S8[r.id])?r:{type:"first-party",id:c.uz}}function h(e){let r=(0,d.$1)(),n=(0,d.j8)();return(0,a.useMemo)(()=>({format(a){if(a?.type==="first-party")switch(a?.id){case c.A0:return"CssBuilder";case c.uz:return(0,l.t)("dev_handoff.code.lang_css");case c.p:return(0,l.t)("dev_handoff.code.lang_swiftui");case c.Ap:return(0,l.t)("dev_handoff.code.lang_uikit");case c.LK:return(0,l.t)("dev_handoff.code.lang_compose");case c.NU:return(0,l.t)("dev_handoff.code.lang_android_xml");case c.MT:return(0,l.t)("dev_handoff.code.lang_figma")}if(e){let i=a?.type==="local-plugin"?r[a.id]:a?.type==="published-plugin"&&e.plugin_id===a?.id?n[a.id]??e:null;if(i)return 1===(0,m.m)(i).length?i.name:(0,m.X)(i,a?.pluginLanguage??"").label??i.name}return""}}),[n,r,e])}function g(e){let r=(0,i.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,a=(0,d.S0)((e?.type!=="first-party"?e?.id:"")??"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,d._P)((e?.type==="published-plugin"?e?.id:"0")??"0",e?.type==="published-plugin");if(!e||"orgAdminSettings"!==r.view&&n!==p.nT.DevHandoff)return null;let s=a||o;return s&&(0,u.M5)(s)?s:null}function f(e,r){if(!e||!e.codeSyntax)return null;switch(r){case c.uz:case c.A0:return e.codeSyntax[0]??null;case c.LK:case c.NU:return e.codeSyntax[1]??null;case c.p:case c.Ap:return e.codeSyntax[2]??null}return null}function E(){let e=(0,o.md)(s.D),r=(0,i.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,i.d4)(e=>e.selectedView),l=r;return"orgAdminSettings"===n.view&&e&&(l=e),(0,a.useMemo)(()=>_(l),[l])}},845954:(e,r,n)=>{n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var a=n(186606);let i=[];function o(e){i.push(e),i.length&&a.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(i=i.filter(r=>r!==e)).length||a.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},414759:(e,r,n)=>{n.d(r,{W8:()=>c,pq:()=>d});var a=n(848318),i=n(19180),o=n(382902);let s=(0,o.eU)(new Map),l=(0,o.eU)(null,(e,r,{nodeId:n,suggestions:a})=>{let i=new Map(e(s));0===a.length?i.delete(n):i.set(n,a),r(s,i)});function c(e,r){o.zl.set(l,{nodeId:e,suggestions:r})}function d(e,r){let n=(0,o.Xr)(l);a.useEffect(()=>{(0,i.k)().dt_ccv2_on_canvas&&("loaded"===r.status?n({nodeId:e.guid,suggestions:r.data}):n({nodeId:e.guid,suggestions:[]}))},[r,n,e])}},392935:(e,r,n)=>{n.d(r,{G:()=>i}),n(19180),n(227276);var a=n(138528);function i(){let e=(0,a.T5)("usePlanAiFeaturesPermissions");return"loaded"!==e.status?"unknown":e.data?.aiFeaturesEnabled?"enabled":"disabled"}},33538:(e,r,n)=>{n.d(r,{Tr:()=>l,gK:()=>m});var a=n(848318),i=n(19180),o=n(615233),s=n(967688),l=(e=>(e.NPM="npm",e.SNIPPET="snippet",e.BOOKMARKLET="bookmarklet",e))(l||{}),c=(e=>(e.CENTERED="centered",e.RIGHT_ALIGNED="rightAligned",e))(c||{});let d={installMethod:"snippet",thumbnailUrls:{dark:(0,o.ck)("c47c0c6427db0d61706853c8594ff403c0030f4c"),light:(0,o.ck)("c47c0c6427db0d61706853c8594ff403c0030f4c")},thumbnailAlignment:"centered",renderTitle:()=>(0,s.t)("dev_handoff.codebase_suggestions.snippet"),renderDescription:()=>(0,s.t)("dev_handoff.codebase_suggestions.add_a_script_tag_to_your_application_to_automatically_collect_components")},u={installMethod:"npm",thumbnailUrls:{dark:(0,o.ck)("3cac39c8b1168bc9061165d5604e55ee317119f0"),light:(0,o.ck)("3cac39c8b1168bc9061165d5604e55ee317119f0")},thumbnailAlignment:"centered",renderTitle:()=>(0,s.t)("dev_handoff.codebase_suggestions.npm"),renderDescription:()=>(0,s.t)("dev_handoff.codebase_suggestions.install_an_npm_package_that_scans_your_local_dev_environment")},p={installMethod:"bookmarklet",thumbnailUrls:{dark:(0,o.ck)("9cd48a1a4058b455566d18691ef648e7875d0cbb"),light:(0,o.ck)("9cd48a1a4058b455566d18691ef648e7875d0cbb")},thumbnailAlignment:"rightAligned",renderTitle:()=>(0,s.t)("dev_handoff.codebase_suggestions.bookmarklet"),renderDescription:()=>(0,s.t)("dev_handoff.codebase_suggestions.add_a_bookmarklet_to_your_browser_bar_to_collect_components")};function m(e=!1){let r=function(){let e=[];return(0,i.k)().dt_ccv2_setup_snippet&&e.push(d),(0,i.k)().dt_ccv2_setup_npm&&e.push(u),(0,i.k)().dt_ccv2_setup_bookmarklet&&e.push(p),e}(),n=e?r[0]?.installMethod??null:null,[o,s]=(0,a.useState)(n),l=r.find(e=>e.installMethod===o);return{setInstallMethod:s,availableInstallMethods:r,installMethod:l??null}}},370259:(e,r,n)=>{n.d(r,{G:()=>v});var a=n(848318),i=n(779492),o=n(250838),s=n(162796),l=n(309488),c=n(93275),d=n(193675),u=n(967688),p=n(392935),m=n(863270),_=n(446951),h=n(975256),g=n(33538),f=n(52805),E=n(176942),y=n(818524);function b({methodDetails:e,onMethodChange:r,availableMethods:n}){return a.createElement(i.bL,{value:e.installMethod,onChange:r,legend:a.createElement(o.q,null,(0,u.t)("dev_handoff.codebase_suggestions.installation_methods"))},n.map(e=>a.createElement(i.RT,{key:e.installMethod,value:e.installMethod,label:e.renderTitle()})))}function v(e){let r=s.hS(e),{installMethod:n,setInstallMethod:i,availableInstallMethods:o}=(0,g.gK)(!0),_=(0,p.G)();return a.createElement(m.fu,{name:"Codebase Suggestions Onboarding Modal"},a.createElement(l.bL,{manager:r,width:"lg",height:"dynamic"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,a.createElement("div",{className:y.DD},(0,u.t)("dev_handoff.codebase_suggestions.onboarding_title"),a.createElement(d.E,null,(0,u.t)("dev_handoff.codebase_suggestions.alpha"))))),a.createElement(c.nB,{padding:0},a.createElement("div",{className:y.rf},a.createElement("div",{className:y.wx},a.createElement("div",{className:y.R_},(0,u.t)("dev_handoff.codebase_suggestions.onboarding_body_title")),a.createElement("p",null,(0,u.t)("dev_handoff.codebase_suggestions.onboarding_body_description")),"disabled"===_&&a.createElement(E.P,null),o.length>1&&n&&a.createElement(b,{methodDetails:n,onMethodChange:i,availableMethods:o})),n&&a.createElement(f.o,{installMethod:n.installMethod,onContinue:()=>e.onClose()}))),a.createElement(c.wi,null,a.createElement("div",{className:y.Vr},a.createElement(h.n,null))))))}(0,_.Ju)(v)},903969:(e,r,n)=>{function a(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}n.d(r,{Mx:()=>a}),n(186606),n(553547),n(273555)},828237:(e,r,n)=>{n.d(r,{HT:()=>l,RB:()=>c});var a=n(382902),i=n(231159);let o=(0,a.eU)(void 0),s=(0,i.bt)(e=>e.universalInsertModal.initialFdView),l=(0,a.t_)(e=>{let r=e(s),n=e(o);return r||n||"recents_and_saved"}),c=(0,a.eU)(!1)},520116:(e,r,n)=>{n.d(r,{lz:()=>m,sX:()=>_}),n(848318);var a=n(186606);n(19180);var i=n(382902),o=n(410441),s=n(959750),l=n(27776);let c=(0,o.jz)(l.QBm),d=300+c,u=640+c;function p(e){return Math.max(d,Math.min(u,e||0))}function m(){return p((0,s.UX)())}function _(){return p(a.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)}(0,i.eU)(!1)},926295:(e,r,n)=>{n.d(r,{r:()=>a});let a=(0,n(382902).eU)(!1)},555637:(e,r,n)=>{n.d(r,{d1:()=>o,hj:()=>i});var a=n(382902);(0,a.eU)(null);let i=(0,a.eU)(null),o=(0,a.eU)({fn:null});(0,a.eU)(!1)},301360:(e,r,n)=>{n(848318),n(186606),n(768618),n(382902),n(989232);var a=n(615233);n(178806),n(967688),n(740495),n(957872),n(34375),n(34542),n(338104),n(15105),n(531288),n(601167),n(263336),n(556049),n(593713),n(67391),n(136169),n(555637),n(722541),(0,a.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8")},19746:(e,r,n)=>{var a=n(382902),i=n(410441),o=n(27776);let s=(0,i.jz)(o.YI7),l=(0,i.jz)(o.Qhc);(0,a.eU)(s+l)},556777:(e,r,n)=>{n.d(r,{e:()=>s}),n(848318);var a=n(382902);n(540698);var i=n(698429);let o=(0,a.eU)(!1);function s(){let e=(0,i.LS)(),[r]=(0,a.fp)(o);return r&&e}},806550:(e,r,n)=>{n.d(r,{eN:()=>s});var a=n(382902),i=(e=>(e[e.IDLE=0]="IDLE",e[e.STARTED=1]="STARTED",e[e.STOPPED=2]="STOPPED",e[e.HOVERED_NOTHING_AFTER_STOPPED=3]="HOVERED_NOTHING_AFTER_STOPPED",e))(i||{});let o=(0,a.eU)(0);function s(){return 0!==a.zl.get(o)}},972402:(e,r,n)=>{n.d(r,{Nc:()=>d,U4:()=>p,_I:()=>u,tn:()=>c,xo:()=>m});var a=n(301168);n(19180),n(615233);var i=n(410725),o=n(730143);n(125761);var s=n(55116),l=n(944239);let c=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),d=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function u(){return(0,a.d4)(c)}function p(){return(0,a.d4)(d)}function m(){let e=(0,o.tS)(),r=(0,i.Rs)(s.F$0,{key:e||""},{enabled:!!e});return!!r.data?.file&&"error"!==r.data.file.status&&(r.data?.file?.data?.hasPermission??!1)}},993165:(e,r,n)=>{n.d(r,{T1:()=>V,p5:()=>B});var a=n(848318),i=n(301168),o=n(658029),s=n(658839),l=n(566371),c=n(186606),d=n(19180),u=n(382902),p=n(536384),m=n.n(p),_=n(996202),h=n(454805),g=n(967688),f=n(414759),E=n(370259),y=n(290598),b=n(584845),v=n(120700),T=n(553527),I=n(324762),S=n(31898),A=n(859480),w=n(552807),C=n(355755),N=n(730143),L=n(677334),O=n(17753),R=n(326252),P=n(208624),D=n(368085),k=n(979485),M=n(592966),F=n(435207),x=n(32193),U=n(168080);let B=L.M4.Query({fetch:async e=>(await P.$W.getCodeSuggestions_DEPRECATED(e)).data.meta.results}),G=L.M4.Query({fetch:async e=>(await R.Q.getCodeConnectMapping(e)).data.meta});function V(e){let r=function(e,r){let n=Math.max(e.x,e.y);if(n>224){let r=224/n;return new h.Mi(e.x*r,e.y*r)}return e}(new h.Mi(e.size.x,e.size.y),0),n=(0,w._G)(r,e.guid,!1,c.tvY.TRANSPARENT,!1,!0);return n&&n.pixels&&n.pixelSize&&n.displaySize&&(0,w.Pv)(n.pixels,n.pixelSize).split(";base64,").pop()||null}function H({children:e}){return a.createElement("div",{className:U.Vg},e)}var z=(e=>(e.InspectPanelHeader="inspect-panel-header",e.InspectPanelRecommendedCode="inspect-panel-recommended-code",e))(z||{});function K({noPadding:e,connectedInfo:r}){return a.createElement(D.VZ,{titleAccessory:a.createElement(Y,null),noPadding:e,title:(0,g.t)("dev_handoff.codebase_suggestions.inspect_panel_connected_header_title"),recordingKey:"codebaseSuggestionPanel"},a.createElement(x.w,{item:r}))}function W(){let e=(0,A.dh)(),r=(0,A.nn)(),n=(0,i.Pj)();return a.useMemo(()=>{let a=n.getState();return{pageId:e,pageName:r,userId:a.user&&a.user.id}},[n,e,r])}function j({results:e,selectedNode:r}){let n=(0,_.hC)(),i=W();return a.useEffect(()=>{n("code_connect_v2.codebase_suggestions_rendered",{nodeId:r.guid,...i,location:"inspect_panel",renderedSuggestionsCount:e.length,renderedSuggestionsSetData:JSON.stringify(e.map(e=>({name:e.name,src_path:e.srcPath})))})},[]),null}function Y(){return a.createElement("div",{className:U.E3},a.createElement(o.K,{htmlAttributes:{"data-tooltip-type":O.Ib.SPECIAL,"data-tooltip":M.N,"data-tooltip-show-immediately":!0,"data-tooltip-interactive":!0,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},"aria-label":(0,g.t)("dev_handoff.codebase_suggestions.info_tooltip_button")},a.createElement(l.B,null)))}function $({children:e}){return a.createElement(D.VZ,{titleAccessory:a.createElement(Y,null),noPadding:!0,title:(0,g.t)("dev_handoff.codebase_suggestions.inspect_panel_disconnected_header_title"),recordingKey:"codebaseSuggestionPanel"},e)}function q({selectedNode:e,fileKey:r,placement:n}){let o=!!(0,d.k)().dt_ccv2_dd,l=(0,C.eY)(),c=(0,u.md)(N._S),p=(0,i.wA)(),m=(0,a.useRef)(null),{backingNodeId:h,backingLibraryKey:E,backingComponentKey:I}=(0,y.K)(e.guid,l,c),A=V(e)??"",[w]=(0,L.IT)(B({name:e.name,thumbnailB64:A,fileKey:r,nodeId:e.guid,metadata:{},componentKey:I,backingNodeId:h??void 0,backingLibraryKey:E??void 0}),{enabled:!!(0,d.k)().dt_ccv2&&!o});(0,f.pq)(e,w);let O=o?T.dI:w,R=O?.status==="loaded",P=(0,v.s)({result:O?.data,status:O?.status}),D=(0,_.hC)(),M=W(),x=P.data.map(e=>({name:e.name,src_path:e.srcPath})),G=(r,n)=>{let{y:a}=n,i=0;m.current&&(i=m.current.getBoundingClientRect().left-P.width),D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...M,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"click"}),P.setOpen(r,{x:i,y:a})},z=(0,a.useMemo)(()=>{let e=(0,d.k)().dt_ccv2_all_data_internal?P.data.length:3,r=P.index??0,n=r-r%e,a=P.data.slice(n,n+e);for(;a.length<e;)a.push({id:"",thumbnail:"",srcPath:"",name:"",type:"placeholder"});return a},[P.data,P.index]),K=r=>{D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...M,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"hover"})},Y=(r,n)=>{D("code_connect_v2.codebase_suggestion_reference_clicked",{nodeId:e.guid,...M,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),clickedReferenceUrl:n?n.url:void 0,clickedReferenceType:n?n.type:void 0,componentNameCopied:n?n.componentName:void 0})},q="inspect-panel-header"===n?$:a.Fragment;if(0===P.data.length&&R)return a.createElement(q,null,a.createElement(j,{selectedNode:e,results:z}),a.createElement("div",{className:U.Vg},a.createElement("span",{className:U.qf},(0,g.t)("dev_handoff.codebase_suggestions.codebase_suggestions_not_found_message"))));let X=()=>{P.setKeepWindowOpen(!1),p(S.Lo())};return a.createElement(q,null,a.createElement(s.ds,null,a.createElement("div",{ref:m,className:U.kL},a.createElement(H,null,R&&a.createElement(j,{selectedNode:e,results:z}),R?z.map((e,r)=>"placeholder"===e.type?a.createElement(k.u_,{key:r}):a.createElement(k.jO,{onClick:G,onHover:K,key:e.id,item:e,index:r,isSelected:e.id===P.selectedItem?.id})):a.createElement(a.Fragment,null,a.createElement(k.AZ,null),a.createElement(k.AZ,null),a.createElement(k.AZ,null)))),R&&a.createElement(b.q_,{window:P,onPageThrough:r=>{D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...M,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"page_through"})},onReferenceClicked:Y,onZoomClicked:()=>{let{data:e,setKeepWindowOpen:r}=P;r(!0),p(S.to({type:F.dU,data:{data:e,onClose:X,onReferenceClicked:Y},showModalsBeneath:!0}))}})))}a.memo(function({placement:e}){let[r,n]=(0,a.useState)(!1),i=(0,I.VW)(),o=!!(0,d.k)().dt_ccv2&&(i?.type==="FRAME"||i?.type==="SYMBOL"||i?.type==="INSTANCE"||i?.type==="ROUNDED_RECTANGLE"&&i?.fills.some(e=>"IMAGE"===e.type)),s=(0,N.tS)(),l=function(e){let r=(0,u.md)(N._S),n=(0,I.VW)(),a=(0,N.tS)(),i=(0,C.eY)(),{backingComponentKey:o,backingLibraryKey:s}=(0,y.K)(n.guid,i,r),l=!!(0,d.k)().dt_ccv2&&!!n?.guid&&!!s&&!!a,[c]=(0,L.IT)(G({assetKey:o,backingLibraryKey:s,language:e,openFileKey:a}),{enabled:l});if("loaded"!==c.status)return;let p=c.data;return{id:p.mapping_id,thumbnail:p.thumbnail_url,name:p.name,srcPath:p.src_path,isConnected:"connected"===p.state}}("React");if(!o||!i||!s)return null;let c=l&&l.isConnected?a.createElement(K,{noPadding:"inspect-panel-header"===e,connectedInfo:l}):a.createElement(q,{selectedNode:i,fileKey:s,placement:e});return a.createElement(a.Fragment,null,a.createElement(E.G,{open:r,onClose:()=>{n(!1)}}),a.createElement("div",{className:m()("inspect-panel-header"===e&&U.AG)},c))})},553527:(e,r,n)=>{n.d(r,{dI:()=>s});var a=n(854925);let i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAAgCAYAAAChKnCsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANhSURBVHgB7Zk/TBNRHMe/70JsG/8Eo9HEqeDgJJZEB3UABhLiYCCOmAAuRhc1Jq6Co4kRBiO6AIluGIkTiQM6iIuJgJODcpNGo5EoBurQ8/e919drzxav10rp1U9y7d29e+/e9/f7vT/3nkJAJnqd5vV19CoHHXKZygBJBTSjRjjAigXY8r8AhefxOGaGZtRKkLzqbw/c7XGSIvSSiByspciATIqikQuzyt7ooZKi6dn0Gq6LJS+jzpA6jyYSGCnl+aKi6V3JOSenSdQvtqjrKuZ1y3/jTreTioBg4jru/inR46PA0xHxsJ8/PJ4T7fbOa3iNaAk22PEE2k0bz4U3Oy1EUzBJrml9Lq6ns2G9jKij0MIw1552PCtEGkcPv+p2p9Mcj+EbGgAJ65VYAi2WTN96UUP2HAR27semIJMWdyptQc+lQ3P6JnBuGohtD/b8gTbgULd3fawfaNtEs4u3Oyz5SSEk9BBFfP9cKCQfvzH8omdvAC/ubZwnaFoQMg5STdmvpVBQwIclfSRPAEszXtrhPuDoWX3+axV4ck1CuVXfJ4wQ3uu6Cvz4BLx6oI3Ia4Y8efPYu98/pc9NmfPjhe8LivTcSauSLycKePtUv5wGMF5gJU+eB6YvyqTnjH6GlbVfaiFf32nBfiiYBmQe5mX5LNdA44336PcZ45UL27WFkOxt1Qe9RLFf3nsVoddZeaYRemju1sblbduhBdIwhHk/Lup3GJazafY8KqKJH+NhvE2B6Z/aO/mVNvA6DOnVwjLCllMKDlsWVx8QAgpku3o44B28x4Phu2ufNxQxtBnuhIYqJoShy+gw0WI6Sd6rJtKH2ZajsIgyYWVYqfwwM5U2FWW7Y+fDg7216XSYh82Bw5wfNoGW48DQI93R0ajVFi2d2IKSefegtO4J/AMojl41bdufRq8XgwalEUulV4TCkDsNjcWwXAfrX1VBPjF3W1eeKXZkU2gAlMIkv6n1kKUwigZARqoR/ruis0spY4g2Y2bJKDc5WU9jGCGHrzqAy0XD5iInmm2bC2iInnB3YTB/DbxgGkr3ZzLoQ3SEu3r8a9//F/sNfFDaeDvqt3Mb45JvqT2tQBt48jcsnh/AFia7izkl0+rR0Bt4fsxWrZx2yi7mka2yVSsKFuS8rK3a3+AQO2IxvaFGAAAAAElFTkSuQmCC",o=(0,a.g)(1);Array.from({length:50},function(){let e=o();return{codebase_component_id:e.toString(),scanned_at:"2021-09-01T00:00:00Z",thumbnail_url:i,name:`Button_${e}`,src_path:`src/components/Button_${e}.tsx`,confidence_level:e>.5?"high":"low",score:e}});let s={status:"loaded",data:[{codebase_component_id:"1",scanned_at:"2021-09-01T00:00:00Z",thumbnail_url:i,name:"Button",src_path:"src/components/long/path/to/get/to/Button.tsx",confidence_level:"high",score:.95},{codebase_component_id:"2",scanned_at:"2021-09-01T00:00:00Z",thumbnail_url:i,name:"Button Wide",src_path:"src/components/ButtonWide.tsx",confidence_level:"high",score:.8},{codebase_component_id:"3",scanned_at:"2021-09-01T00:00:00Z",thumbnail_url:i,name:"Button v1",src_path:"src/legacy/Buttonv1.tsx",confidence_level:"low",score:.6},{codebase_component_id:"4",scanned_at:"2021-09-01T00:00:00Z",thumbnail_url:i,name:"Button v2",src_path:"src/legacy/Buttonv2.tsx",confidence_level:"low",score:.2}]}},359567:(e,r,n)=>{n.d(r,{MW:()=>F});var a=n(848318),i=n(301168);n(938982),n(186606);var o=n(19180),s=n(382902);n(7376),n(989232),n(918777),n(615233),n(998568),n(129170),n(949325);var l=n(968325),c=n(967688);n(925085),n(35949);var d=n(980393);n(43322),n(993165),n(324762),n(63163),n(865114),n(162394),n(58204),n(31898),n(533737),n(863270),n(696786),n(702038),n(14837),n(511067),n(355755),n(730143),n(125761),n(752181);var u=n(4881);n(626912),n(677334),n(700436),n(720722),n(17753),n(368085),n(120846),n(226455);var p=n(720300);n(916073),p.H4.NONE,n(403425),n(124533);var m=n(162796),_=n(47551),h=n(309488),g=n(93275),f=n(629469),E=n(735067),y=n(531788),b=n(996202),v=n(792533),T=n(564837),I=n(446951),S=n(610227),A=(e=>(e.REACT="React",e.SWIFTUI="SwiftUI",e.COMPOSE="Compose",e.HTML="HTML",e))(A||{});function w({language:e}){switch(e){case"React":return a.createElement(C,null);case"SwiftUI":return a.createElement(N,null);case"Compose":return a.createElement(L,null);case"HTML":return a.createElement(O,null);default:return null}}function C(){let e=(0,i.wA)();return a.createElement("ol",{role:"list",className:S.Gg},a.createElement("h2",{className:S.MC},(0,c.t)("dev_handoff.code.lang_react")),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install @figma/code-connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_install_command"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),source:"code connect",title:"react-step1"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_connect_command"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),source:"code connect",title:"react-step2"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_publish_command"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),source:"code connect",title:"react-step3"})))))))}function N(){let e=(0,i.wA)();return a.createElement("ol",{role:"list",className:S.Gg},a.createElement("h2",{className:S.MC},(0,c.t)("dev_handoff.code.lang_swiftui")),a.createElement("li",{className:S.gY},a.createElement("article",null," ",a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_global_install_command"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),source:"code connect",title:"swift-step1"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null," ",a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.swift.add_snippet")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_package_snippet"),onClick:()=>e(v.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),source:"code connect",title:"swift-step2"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null," ",a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_connect_command"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),source:"code connect",title:"swift-step3"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null," ",a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"4")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_publish_command"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),source:"code connect",title:"swift-step4"})))))))}function L(){let e=(0,i.wA)();return a.createElement("ol",{role:"list",className:S.Gg},a.createElement("h2",{className:S.MC},(0,c.t)("dev_handoff.code.lang_compose")),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_global_install_command"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),source:"code connect",title:"compose-step1"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),a.createElement("div",{className:S.fq},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_plugin_snippet"),onClick:()=>e(v.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),source:"code connect",title:"compose-step2"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_connect_command"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),source:"code connect",title:"compose-step3"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"4")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_publish_command"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),source:"code connect",title:"compose-step4"})))))))}function O(){let e=(0,i.wA)();return a.createElement("ol",{role:"list",className:S.Gg},a.createElement("h2",{className:S.MC},(0,c.t)("dev_handoff.code.lang_html")),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"1")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npm install @figma/code-connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_install_command"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),source:"code connect",title:"html-step1"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"2")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect"),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_connect_command"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),source:"code connect",title:"html-step2"})))))),a.createElement("li",{className:S.gY},a.createElement("article",null,a.createElement("div",{className:S.YN,"aria-hidden":"true"},a.createElement("div",{className:S.v_},"3")),a.createElement("div",{className:S.M7},a.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:S.G5},a.createElement("div",{className:S.jt},"npx figma connect publish "),a.createElement("div",{className:S.cL},a.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_publish_command"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),source:"code connect",title:"html-step3"})))))))}function R({notConnected:e}){let r=React.createElement(Link,{href:"https://www.figma.com/code-connect-docs/","aria-label":t("dev_handoff.figmadocs.learn_more"),trusted:!0,newTab:!0},tx("dev_handoff.figmadocs.learn_more"));return React.createElement(ColorTheme,{brand:"dev-handoff",mode:"dark"},React.createElement("div",{className:styles.ccBadgeTooltip},e?tx("dev_handoff.figmadocs.not_connected_tooltip",{learnMore:r}):tx("dev_handoff.figmadocs.connected_tooltip",{learnMore:r})))}(0,I.Ju)(function(e){let[r,n]=(0,a.useState)("React"),s=(0,b.hC)(),d=(0,i.wA)(),u=a.useCallback(e=>{"HTML"!==e&&s("code_connect.connect_to_codebase.language_selected",{language:e.toLowerCase()}),n(e)},[s]),p=m.hS({...e,onClose:()=>{s("code_connect.connect_to_codebase.popup_closed"),e.onClose()}}),[v,I,A]=_.H({React:!0,SwiftUI:!0,Compose:!0,HTML:!0},r,u);return a.createElement(h.bL,{htmlAttributes:{"data-testid":"upgrade_choose_plan_modal"},manager:p,width:800},a.createElement(g.Wk,null,a.createElement("div",{className:S.kL},a.createElement("div",{className:S.pz},a.createElement("h1",{className:S.tb},(0,c.tx)("dev_handoff.code_connect.title")),a.createElement("h2",{className:S.J$},(0,c.tx)("dev_handoff.code_connect.modal_text")),a.createElement(f.r,{manager:A,className:S.gy},a.createElement(E.r,{className:"React"===r?S.xR:S.s6,...v.React},(0,c.t)("dev_handoff.code.lang_react")),a.createElement(E.r,{className:"SwiftUI"===r?S.xR:S.s6,...v.SwiftUI},(0,c.t)("dev_handoff.code.lang_swiftui")),a.createElement(E.r,{className:"Compose"===r?S.xR:S.s6,...v.Compose},(0,c.t)("dev_handoff.code.lang_compose")),(0,o.k)().dt_code_connect_modal_updates&&a.createElement(E.r,{className:"HTML"===r?S.xR:S.s6,...v.HTML},a.createElement("div",{className:S.Sd},(0,c.t)("dev_handoff.code.lang_html"),a.createElement("span",{className:S.X4},(0,c.t)("dev_handoff.code.lang_html_examples"))))),a.createElement("div",{className:S.jH}),a.createElement("span",{className:S.Iw},a.createElement(y.IK,{variant:"primary",onClick:()=>{s("code_connect.connect_to_codebase.view_docs_github_clicked"),d((0,T.RK)({rawInput:"https://github.com/figma/code-connect"}))},iconPrefix:a.createElement("div",{className:S.F9},a.createElement(l.f,null))},(0,c.tx)("dev_handoff.code_connect.modal_github_button")))),a.createElement("div",{className:S.Qs},a.createElement(w,{language:r})))))},"CodeConnectModal",I.ZU.YES),n(85586),n(787004);let P={boxShadow:"var(--elevation-500)",borderRadius:"var(--radius-medium)",backgroundColor:"var(--color-bg-tooltip)","--color-bg":"var(--color-bg-tooltip)"},D={type:"dialog",openOnHover:!0,placement:"bottom-end",softDismiss:!0};function k({linkText:e}){return React.createElement("span",{className:styles.linkFilePath},e)}let M=(e,r)=>{let n=React.useMemo(()=>e?dayjs(e).fromNow():void 0,[e]);return n?r?t("dev_handoff.figmadocs.connected_last_published_at_to_target",{lastPublishedAt:n,target:r}):t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:n}):void 0},F=(0,s.eU)(!1);(0,u.Wh)(()=>(0,s.eU)(!1))},840652:(e,r,n)=>{n.d(r,{q:()=>i}),n(848318);var a=n(195124);function i(e,r,n=new Set){return(0,a.hV)(e,e=>{n.has(e.guid)||"INSTANCE"!==e.type||r.push(e)}),r}n(382902),n(7376),n(476254),n(458608),n(329228),n(35949),n(43322),n(292024),n(355755),n(730143),n(55116),n(403425),n(85586)},294365:(e,r,n)=>{n.d(r,{X:()=>v});var a=n(848318),i=n(658029),o=n(990066),s=n(186606),l=n(382902),c=n(536384),d=n.n(c),u=n(330821);n(813009);var p=n(967688),m=n(174945),_=n(788903),h=n(21614),g=n(368085),f=n(985789),E=n(96526),y=n(299589),b=n(18906);function v(e){let{basisContent:r="",changeContent:n=""}=e,i=a.useMemo(()=>(0,u.pR)(r,n).map(e=>{let r=e.added?b.Qs:e.removed?b.Tk:"";return a.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return a.createElement(T,{content:a.createElement(a.Fragment,null,i),contentToCopy:n,showVariable:!1})}function T({content:e,contentToCopy:r,showVariable:n=!0}){let{value:c,eventHandlers:u,isHovered:v}=(0,g.ZQ)(b.O7,b.O7),[T,I]=a.useState(!1),S=a.useRef(null),A=(0,f.oU)("TEXT_DATA",{type:s.Z_n.STRING,resolvedType:s.rXF.STRING,value:r}),w=A.variableDisplayName,C=(0,h.uV)(A?.variable),N=(0,_.t8)(A?.variable?.node_id),L=(0,g.Cm)(r,"text_content"),O=(0,g.Cm)(C,"text_variable"),R=v||T,P=a.createElement(a.Fragment,null,a.createElement(m.$Q,{matchingVars:A?.matchingVars,rowRef:S,isHovered:R,recordingKey:"content_panel"}),a.createElement("div",{className:b.cL},a.createElement(i.K,{htmlAttributes:u,onClick:L,"aria-label":(0,p.t)("inspect_panel.copy")},a.createElement(o.X,null)))),{collapsedInspectionPanelAtom:D,collapseEnabled:k}=(0,g.QZ)("content"),[M]=(0,l.fp)(D),F=(0,p.t)("inspect_panel.property.content_text"),x="string"==typeof e;return a.createElement(g.VZ,{title:F,hideHeader:!0,noPadding:!0,recordingKey:"content"},a.createElement("div",{onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),ref:S},a.createElement(g.SH,{title:F,isHovered:R,recordingKey:"contentHeader",additionalHeaders:P,isCollapsedAtom:D,collapseEnabled:k,collapsedHeaders:x?a.createElement(y.G,{text:e}):void 0}),a.createElement(g.ln,{isCollapsed:M,childrenWrapperClassname:b.eR},a.createElement("div",{className:d()(b.P_,c),dir:"auto","data-testid":"textContent"},e),!!w&&n&&a.createElement(g._p,{copyValue:null,variableId:A.variable?.node_id,className:b.tl},a.createElement(E.wG,{text:C??w,onClick:O,dataTestId:"textVariableName",thumbnailValue:N,fullWidth:!0,ui3Height:!0,endTruncate:!0})))))}},584961:(e,r,n)=>{n.d(r,{xb:()=>y,FO:()=>b});var a=n(848318),i=n(301168),o=n(760893),s=n(376771),l=n(232786),c=n(186606),d=n(615233),u=n(968325),p=n(967688),m=n(533737),_=n(702038),h=n(698429);n(713416);let g="hint_panels--icon--EMIdH",f=(0,d.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),E=(0,d.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),y="dev_handoff_dismissed_inspect_panel_plugins_hint";function b(){let e=(0,h.LS)(),r=(0,i.wA)(),n=a.useCallback(()=>{r(m.b({[y]:!0}))},[r]),d=a.useCallback(()=>{(0,_.ax)(c._gJ.PLUGIN),n()},[n]);return e?a.createElement("div",{className:"hint_panels--hintPanel--MUqNV"},a.createElement(o.aq,{variant:"default",icon:a.createElement("div",{className:"hint_panels--iconRow--SXq7J"},a.createElement("img",{alt:"",className:g,src:f}),a.createElement("div",{className:g},a.createElement(u.f,null)),a.createElement("img",{alt:"",className:g,src:E})),onDismiss:n},a.createElement(s.Q,{title:(0,p.t)("dev_handoff.inspect_panel.plugins_hint.title")},(0,p.tx)("dev_handoff.inspect_panel.plugins_hint")),a.createElement(l.$,{onClick:d},(0,p.tx)("dev_handoff.inspect_panel.plugins_hint.link")))):null}},268335:(e,r,n)=>{n.d(r,{O:()=>m});var a=n(848318),i=n(186606),o=n(19180),s=n(382902),l=n(662470),c=n(439952),d=n(614092),u=(e=>(e.VALID="valid",e.GENERATING="generating",e.ERROR="error",e))(u||{});let p=(0,s.eU)({});function m({assetId:e,thumbnailVersion:r,scale:n,...u}){let m=(0,d.Fk)((e,r)=>{let n=r?e?.get(r):null;return n?{width:n.size.x,height:n.size.y}:{width:0,height:0}},e),{imgStyle:_,width:h,height:g}=a.useMemo(()=>{let e=(0,o.k)().dt_insp_impr_assets&&m.width>2.5*m.height,r=(0,o.k)().dt_insp_impr_assets&&m.height>2.5*m.width,{width:n,height:a}=e?{height:u.height,width:m.width/m.height*u.height}:r?{width:u.width,height:m.height/m.width*u.width}:{width:u.width,height:u.height};return{imgStyle:{maxWidth:n/2,maxHeight:a/2,transform:`scale(0.5, 0.5)${e||r?` translate(${e?`calc(50% - ${a/4}px)`:"0"}, ${r?`calc(50% - ${n/4}px)`:"0"})`:""}`},width:n,height:a}},[m.width,m.height,u.width,u.height]),f=function({assetId:e,width:r,height:n,scale:a}){return`${e}-${r}x${n}@${a}x`}({assetId:e,width:h,height:g,scale:n}),[E,y]=(0,s.fp)(p),b=E[f],v=b?.state==="valid"?b.url:void 0,T=a.useCallback(e=>{y(r=>({...r,[f]:e}))},[f,y]),I=(0,l.c6)(e);return(a.useEffect(()=>{let a=async()=>{T({state:"generating",version:r}),await (0,c.Jr)().loadAllImagesUnder([e],i.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[a,o]=i.Vzr.generateThumbnailForNode(e,h,g,n,{forceContentsOnly:!0});o.length>0&&(b?.state==="valid"&&URL.revokeObjectURL(b.url),T({state:"valid",url:URL.createObjectURL(new Blob([o])),version:r}))},o=b?.state==="generating",s=b?.state==="valid",l=b?.version!==r,d=b?.state==="error";o||s&&(!l||d)||a().catch(e=>{T({state:"error",version:r,error:e}),console.error(e)})},[e,g,n,h,f,r,v,b,T]),v)?{url:v,backgroundStyle:I,imgStyle:_}:{backgroundStyle:I}}},211721:(e,r,n)=>{n.d(r,{$R:()=>f,Ed:()=>I});var a=n(848318),i=n(186606),o=n(382902),s=n(476254),l=n(967688),c=n(952039),d=n(113752);n(903969);var u=n(220260),p=n(151223),m=n(702038),_=n(273555),h=n(324762);function g({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:o}=(0,u.gc)(),s=o===i.tKW.SCALED,l=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),c=l(e),d=l(r),p=a.createElement("span",{"data-testid":`${n}Width`},c),m=a.createElement("span",{"data-testid":`${n}Height`},d);return a.createElement(a.Fragment,null,p,"\u2009x\u2009",m,a.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function f({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:i,hideDot:o}){let s=(0,h.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return a.createElement(E,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:i})}function E({assetType:e,pxWidth:r,pxHeight:n,dataTestId:i,hideDot:o,shouldShowTypeLabel:s}){let c=e&_.PW.ASSET_VIDEO?(0,l.t)("dev_handoff.assets.video"):e&_.PW.ASSET_GIF?(0,l.t)("dev_handoff.assets.gif"):e&_.PW.ASSET_IMAGE?(0,l.t)("dev_handoff.assets.image"):e&_.PW.ASSET_ICON?(0,l.t)("dev_handoff.assets.icon"):e&_.PW.ASSET_COMPONENT?(0,l.t)("dev_handoff.assets.instance"):e&_.PW.ASSET_ILLUSTRATION?(0,l.t)("dev_handoff.assets.asset"):void 0;return a.createElement("span",null,s&&c,!o&&a.createElement(a.Fragment,null,"\xa0","\xb7 "),a.createElement(g,{pxWidth:r,pxHeight:n,dataTestId:i}))}(0,o.eU)(!1),(0,o.eU)({});let y="return_to_previous",b=null,v=!1,T=null;(0,p.nF)((e,r)=>{r&&(b={guidsToReturnTo:Object.keys(e.getState().mirror.sceneGraphSelection).sort(),selectedGUID:r})});let I=(0,p.nF)(e=>{let r=Object.keys(e.getState().mirror.sceneGraphSelection).sort(),n=b&&1===r.length&&b.selectedGUID===r[0];n&&!v?(document.addEventListener("keydown",S),e.dispatch(c.F.enqueue({type:y,message:"",icon:d.zX.RETURN_TO_INSTANCE,button:{text:(0,l.t)("dev_handoff.assets.return_to_previous"),action:A},onDismiss:()=>{b=null,v=!1,document.removeEventListener("keydown",S)}})),v=!0,clearTimeout(T)):!n&&v&&(document.removeEventListener("keydown",S),e.dispatch(c.F.dequeue({matchType:y})),v=!1,T=setTimeout(()=>{b=null},3e4))});function S(e){let r=e.ctrlKey&&e.altKey&&e.metaKey,n=e.ctrlKey&&e.altKey&&e.shiftKey;(r||n)&&"KeyK"===e.code&&(A(),s.D.dispatch(c.F.dequeue({matchType:y})))}function A(){b&&((0,m.tJ)(b.guidsToReturnTo),b=null,v=!1),document.removeEventListener("keydown",S)}},662470:(e,r,n)=>{n.d(r,{c6:()=>g});var a=n(848318),i=n(301168),o=n(186606),s=n(989232),l=n(315933),c=n(206639),d=n(506428),u=n(277454),p=n(535884),m=n(144487),_=n(720722),h=n(21614);function g(e){let r=function(e,r){let n=function(e){let r=(0,h.jY)(),n=(0,i.d4)(p.FZ),a=(0,i.d4)(m.c5);return(0,u.NY)(e,r,n,a)}(e),g=(0,d.DP)(),f=n?.containing_frame?.backgroundColor??"";return n?.type===_.PW.STATE_GROUP&&n.fill_color&&(f=n.fill_color),a.useCallback(()=>{let r=g&&("light"===g||"dark"===g)?g:"dark";if(!e)return f&&!(0,c.ty)(f)?(0,c.HD)(f)?"dark":"light":r;l.sn.start("dev_mode_calculate_component_color");let n=o.w3z.getApproximateNodeColor(e),a=l.sn.stop("dev_mode_calculate_component_color");return a&&(0,s.trackEvent)("dev_mode_calculate_component_color",{elapsedMs:a},{forwardToDatadog:!0}),(0,c.HD)(n)?"light":"dark"},[f,e,void 0,g])}(e);return"dark"===(0,a.useMemo)(r,[r])?f:E}let f={background:"#383838"},E={background:"#f5f5f5"}},278634:(e,r,n)=>{n.d(r,{G:()=>d,X:()=>c});var a=n(186606),i=n(206639),o=n(959750),s=n(641501),l=n(985789);function c({color:e,colorVar:r,encodedPaint:n,opacity:c,valueFormatter:u}){let{variable:p,variableDisplayName:m}=(0,l._B)({color:e,colorVar:r,opacity:c}),_=(0,o.Ku)(),h=()=>{a.Osy.highlightOnlySamePaintInSublayers(n)},g=()=>a.Osy.highlightOnlySamePaintInSublayers(""),{value:f,copyValue:E}=d(e??i.FN,_,u,c),y=(0,s.q)(e??i.FN,_,u).value;return p&&m&&e?{copyValue:E,isSoftDeleted:p?.subscriptionStatus==="LOCAL"&&p?.isSoftDeleted,isVariableRow:!0,onMouseEnter:h,onMouseLeave:g,value:f,valueWithoutOpacity:y,variable:p,variableDisplayName:m}:{copyValue:E,isVariableRow:!1,onMouseEnter:h,onMouseLeave:g,value:f,valueWithoutOpacity:y}}function d(e,r,n,a=1){let{a:i=1}=e;return(0,s.q)({...e,a:i*a},r,n,{alphaInPercent:!0})}},269781:(e,r,n)=>{var a=n(848318);n(301168),n(673786);var i=n(186606);n(553547),n(768618),n(329228),n(967688);var o=n(526867);n(489082),n(355755),n(730143);var s=n(677334),l=n(180495);n(42725),n(184226),n(499025),n(417338),n(832329),n(739321),n(324762),s.M4.Query({fetch:async({componentKey:e})=>{try{let r=await l.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),s.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,a=e.dataStorageKey,s=await o.Eo.getCanvas({canvas_url:e.canvasUrl});if(!s)return{};let l=i.glU.loadDetachedComponent(r??"",a,s,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled}),a.createContext({status:"loading"})},579859:(e,r,n)=>{n.d(r,{Cs:()=>E,Qz:()=>g,W7:()=>f,gP:()=>d,oz:()=>_,tr:()=>h}),n(848318);var a=n(301168),i=n(77708),o=n.n(i),s=n(813009);n(324762);var l=n(489082);n(426299),n(730143),n(614092);var c=n(484130),d=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(d||{}),u=(e=>(e.TOP_LEFT="top_left",e.TOP_RIGHT="top_right",e.BOTTOM_LEFT="bottom_left",e.BOTTOM_RIGHT="bottom_right",e))(u||{});function p(e){return(0,l.gl)(e)?0:e??0}function m(e){return"NONE"!==e&&"GRID"!==e}function _(e,r){return m(e)||!!r&&m(r.stackMode)}function h(e){return(0,a.d4)(r=>{let n=r.mirror.selectionProperties;return _(r.mirror.selectionProperties.stackMode,r.mirror.selectionProperties.inferredAutoLayoutResult)?m(n.stackMode)?n[function(e){switch(e){case"top":return"stackVerticalPadding";case"right":return"stackPaddingRight";case"bottom":return"stackPaddingBottom";case"left":return"stackHorizontalPadding"}}(e)]??0:n.inferredAutoLayoutResult?.[`stackPadding${o()(e)}`]??0:0})}function g(e){return(0,a.d4)(r=>{let n=r.mirror.selectionProperties,{borderStrokeWeightsIndependent:a,strokePaints:i,strokeWeight:s}=n;return a&&(0,l.hS)(a)?n[`border${o()(e)}Visible`]?p(n[`border${o()(e)}Weight`]):0:i&&(0,l.hS)(i)&&Array.isArray(i)&&i.length&&(i.filter(e=>!!e&&e.visible&&(e.opacity??0)>0)||[]).length?p(s):0})}function f(){return(0,s.R)(e=>(0,c.ut)(e.mirror.selectionProperties,p))}let E=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e},787004:(e,r,n)=>{n(848318),n(301168),n(186606),n(290598),n(453370),n(422444),n(413020),n(355755),n(730143),n(209595),n(955730),n(269781),n(324762),n(246618)},232540:(e,r,n)=>{n.d(r,{Fj:()=>l});var a=n(848318),i=n(301168);n(382902),n(813009),n(910314),n(759604),n(43322),n(324762),n(764539),n(277454);var o=n(535884),s=n(354703);function l(e=""){let r=(0,i.d4)(o.cM),n=(0,i.d4)(s.wi),c=a.useMemo(()=>Object.values(r).find(r=>r.key===e),[r,e]),d=a.useMemo(()=>Object.values(n).find(r=>r.key===e),[n,e]);return c??d}n(720722),n(698429),n(21614),n(325590),n(985789)},246618:(e,r,n)=>{n(301168),n(361964),n(355755),n(614092),n(700436),n(21614),n(269781),n(324762)},84360:(e,r,n)=>{n.d(r,{V0:()=>O,_y:()=>k,ls:()=>R,vV:()=>M});var a=n(848318),i=n(891627),o=n(301168),s=n(168323),l=n(500886),c=n(544405),d=n(907727),u=n(19180),p=n(278802),m=n(589781),_=n(967688),h=n(87463),g=n(43322);n(458660);var f=n(972402),E=n(740245),y=n(212885),b=n(453370),v=n(696786),T=n(511067),I=n(180294),S=n(764474),A=n(17753),w=n(770686),C=n(442022),N=n(120846),L=n(79137);function O({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:l,skipBrowsePlugins:c}){let d=(0,g.AC)(e),u=(0,g.Pt)(d),p=(0,I.sZ)(),m=(0,o.d4)(e=>e.whitelistedPlugins),_=(0,S.ow)(d,m,p)?e:{type:"first-party",id:"WEB"},h=(0,E.Z)({codeLanguage:_,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:a,formatter:u,showAddInsteadOfBrowse:i,addCodegenPluginCallback:s,currentSavedCodeLanguage:l,skipBrowsePlugins:c});return{codeLanguage:_,onCodeLanguageChange:r,codeLanguageOptions:h,activeCodegenPlugin:d,formatter:u}}function R({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:i,parentElementId:o}){let{codeLanguage:s,activeCodegenPlugin:l,formatter:c,codeLanguageOptions:d}=n,u=l&&"first-party"!==s.type?a.createElement(w.d,{plugin:l}):null;return a.createElement(k,{dropdownId:e,onDropdownHidden:i,disabled:r,parentElementId:o,value:s,formatter:c,items:d,icon:u,activatePathOnMount:"local-plugin"!==s.type?[c.format(s)]:d[0]?[d[0].displayText]:void 0})}function P(){return(0,v.GS)()?a.createElement(d.l,{className:L.aC,"aria-hidden":!0}):a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:L.aC,"aria-hidden":!0},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2069 5.20724L7.70688 10.7072L6.99977 11.4144L6.29266 10.7072L3.29266 7.70724L4.70688 6.29303L6.99977 8.58592L11.7927 3.79303L13.2069 5.20724Z",fill:"var(--color-icon"}))}let D=(e,r,n)=>e.separator?a.createElement(s.wv,{key:`${r}_separator`}):e.header?a.createElement(s.hE,null,e.displayText):e.children?a.createElement(s.g8,{key:r},a.createElement(s.ZP,{hasChecked:e.isChildChecked||e.isChecked||!1,recordingKey:(0,p.Pt)(n,e?.recordingKey??"")},e.icon&&a.createElement(s.Q$,null,e.icon),a.createElement("div",{className:L._d},a.createElement(h.E,null,e.displayText))),a.createElement(s.MJ,null,e.children.map(e=>D(e,`${r}-${e.name}`,n)))):void 0===e.isChecked?a.createElement(s.q7,{key:r,onClick:e.callback,recordingKey:(0,p.Pt)(n,e?.recordingKey??"")},e.icon&&a.createElement(s.Q$,null,e.icon),a.createElement("div",{className:L._d},a.createElement(h.E,null,e.displayText))):a.createElement(l.q7,{key:r,"aria-checked":e.isChecked,className:L.mL,onClick:e.callback,recordingKey:(0,p.Pt)(n,e?.recordingKey??"")},a.createElement("span",{className:L.ZU},a.createElement(P,null),e.icon&&a.createElement(s.Q$,null,e.icon),a.createElement("div",{className:L._d},a.createElement(h.E,null,e.displayText))));function k({dropdownId:e,disabled:r,onDropdownHidden:n,parentElementId:l,formatter:d,value:p,items:h,icon:g,activatePathOnMount:E}){let v=(0,u.k)().fpl_code_menu,I=(0,f._I)(),{manager:S,getTriggerProps:w}=s.b(),O=a.useId(),R=(0,o.wA)();a.useEffect(()=>R(y.aq()),[R]);let P=(0,T.Um)(),k=a.useRef(null),M=P?.type===e;return v?a.createElement(s.bL,{manager:S},a.createElement(c.h,{htmlFor:e},(0,_.t)("dev_handoff.code.language")),a.createElement(m.e,{lead:g,...w({id:O}),recordingKey:"preferencesDropdownButton"},E?.[0]??(0,_.t)("dev_handoff.code.language")),a.createElement(s.mc,null,h.map(e=>D(e,e.name,"preferencesDropdown")))):a.createElement("div",{className:L.aD,"data-tooltip":(0,_.t)("dev_handoff.code.language"),"data-tooltip-type":A.Ib.TEXT,"data-tooltip-show-above":!0},a.createElement("div",{className:L.lj},a.createElement(N.uQ,{formatter:d,property:p,icon:g,onClick:()=>{M?R(b.oB()):I&&R(b.j7({type:e}))},inputClassName:L.UD,ref:k,dataTestId:"code_language_dropdown",recordingKey:"preferencesDropdownButton",isDisabled:r})),M&&!r&&k.current&&(0,i.createPortal)(a.createElement("div",{className:L.aD},a.createElement(C.j,{activatePathOnMount:E,alwaysShowCheckMarkOffset:!0,dispatch:R,items:h,lean:"right",leanPadding:8,onDropdownHidden:n,onSelectItem:e=>{e.callback&&e.callback("",null,R)},parentRect:k.current.getBoundingClientRect(),recordingKey:"preferencesDropdown",showPoint:!1})),document.getElementById(l||"dev-handoff-inspect-panel")))}function M({dropdownId:e,disabled:r,onDropdownHidden:n,parentElementId:l,formatter:d,value:p,items:h,activatePathOnMount:g}){let E=(0,u.k)().fpl_code_menu,v=(0,f._I)(),{manager:I,getTriggerProps:S}=s.b(),w=a.useId(),O=(0,o.wA)();a.useEffect(()=>O(y.aq()),[O]);let R=(0,T.Um)(),P=a.useRef(null);if(E)return a.createElement(s.bL,{manager:I},a.createElement(c.h,{htmlFor:e},(0,_.t)("dev_handoff.code.settings.language_dropdown")),a.createElement(m.e,{...S({id:w}),"aria-label":(0,_.t)("dev_handoff.code.settings.language_dropdown"),recordingKey:"preferencesDropdownButton"},g?.[0]??(0,_.t)("dev_handoff.code.options")),a.createElement(s.mc,null,h.map(e=>D(e,e.name,"preferencesDropdown"))));let k=R?.type===e;return a.createElement("div",{className:L.aD,"data-tooltip":(0,_.t)("dev_handoff.code.options"),"data-tooltip-type":A.Ib.TEXT,"data-tooltip-show-above":!0},a.createElement("div",{className:L.lj},a.createElement(N.uQ,{formatter:d,property:p,onClick:()=>{k?O(b.oB()):v&&O(b.j7({type:e}))},inputClassName:L.UD,ref:P,dataTestId:"list_preferences_dropdown",isDisabled:r,recordingKey:"preferencesDropdownButton"})),k&&!r&&P.current&&(0,i.createPortal)(a.createElement("div",{className:L.aD},a.createElement(C.j,{activatePathOnMount:g,alwaysShowCheckMarkOffset:!0,dispatch:O,items:h,lean:"right",leanPadding:8,onDropdownHidden:n,onSelectItem:e=>{e.callback&&e.callback("",null,O)},parentRect:P.current.getBoundingClientRect(),recordingKey:"preferencesDropdown",showPoint:!1})),document.getElementById(l||"dev-handoff-inspect-panel")))}},175568:(e,r,n)=>{n.d(r,{n2:()=>w});var a=n(848318),i=n(301168),o=n(879169),s=n(779492),l=n(250838),c=n(382902),d=n(238462),u=n(967688),p=n(972402),m=n(84360),_=n(725810),h=n(220260),g=n(361218),f=n(754210),E=n(696786),y=n(338104),b=n(511067),v=n(672940),T=n(770686),I=n(368085),S=n(120846);n(764539);var A=n(132015);function w({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:o,hidePreferencesForList:s}){let l=(0,i.wA)(),c=(0,p._I)(),{inspectionMode:m,setInspectionMode:h,inspectionModes:g}=n,f=(0,b.Um)(),v=a.useMemo(()=>g.map(e=>a.createElement(S.c$,{key:e,value:e,recordingKey:e})),[g]),T=(0,E.GS)(),w=y.z4.getIsExtension(),N=g.map(e=>({key:e,label:_.a9.format(e)}));return a.createElement(I.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"preferences"},a.createElement("div",{className:A.NR},!w&&("drop-down"===r?a.createElement(S.l6,{ariaLabel:(0,u.t)("dev_handoff.inspection_mode.select"),className:A.VM,dispatch:l,dropdownShown:f,dropdownWidth:T?"120px":"auto",formatter:_.a9,id:`${e}_dev_handoff_inspection_mode`,onChange:h,onShowDropdownOverride:c?void 0:d.lQ,property:m,recordingKey:"dev_handoff_inspection_mode"},v):"tabs"===r?a.createElement(R,{onTabClick:h,selectedTabKey:m,tabs:N}):a.createElement(P,{onChange:h,inspectionMode:m,inspectionModes:N})),a.createElement("div",{className:A.d2},n.codeLanguageApi&&a.createElement(C,{dropdownPrefix:e,preferencesApi:{...n,codeLanguageApi:n.codeLanguageApi},parentElementId:o,hidePreferencesForList:s}))))}function C({dropdownPrefix:e,preferencesApi:r,parentElementId:n,hidePreferencesForList:i}){let o=(0,v.AF)(),s=y.z4.getIsExtension(),{preferenceOptions:l,inspectionMode:c,codeLanguageApi:d,skipHeadersInNewInspectPanelExperience:u}=r;return l&&d&&o?s||"properties"!==c?a.createElement(N,{preferenceOptions:l,codeLanguageApi:d,dropdownPrefix:e,parentElementId:n,skipPreferencesHeaders:u}):i?null:a.createElement(O,{preferenceOptions:l,codeLanguageApi:d,dropdownPrefix:e,parentElementId:n}):null}function N({preferenceOptions:e,codeLanguageApi:r,dropdownPrefix:n,parentElementId:i,skipPreferencesHeaders:o}){let s=n?`${n}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",{activeCodegenPlugin:l,codeLanguage:c,codeLanguageOptions:d,formatter:p}=r,_=l&&"first-party"!==c.type?a.createElement(T.d,{plugin:l}):null,h=p.format(c),g="local-plugin"!==c.type?[h]:[d[0].displayText],f=a.useMemo(()=>{let r=o?void 0:{displayText:(0,u.t)("dev_handoff.language_dropdown.preferences_header",{languageOrPlugin:h}),header:!0};return[...d,{separator:!0,displayText:""},...r?[r]:[],...e]},[d,e,h,o]);return a.createElement(m._y,{dropdownId:s,items:f,formatter:p,value:c,icon:_,activatePathOnMount:g,parentElementId:i})}let L=new f.yt;function O({preferenceOptions:e,codeLanguageApi:r,dropdownPrefix:n,parentElementId:i}){let o=n?`${n}_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",{codeLanguage:s}=r,l=(0,h.Em)(),d=(0,h.ie)(),p=(0,c.md)(g.v);if("first-party"!==s.type)return null;let _=p?(0,u.t)("dev_handoff.variables.panel_display_code_syntax"):(0,u.t)("dev_handoff.variables.panel_display_figma_name");return a.createElement(m.vV,{dropdownId:o,items:e,formatter:L,value:d,activatePathOnMount:[l?d:_],parentElementId:i})}function R({tabs:e,onTabClick:r,selectedTabKey:n}){let i=e.reduce((e,r)=>(e[r.key]=!0,e),{}),[s,,l]=o.t.useManagedTabs(i,n,r,{recordingKey:"devHandoffPanelTabs"});return a.createElement("div",{className:A.rb},a.createElement(o.t.TabStrip,{manager:l},e.map(e=>a.createElement(o.t.Tab,{key:e.key,...s[e.key]},e.label))))}function P({inspectionModes:e,inspectionMode:r,onChange:n}){return a.createElement("div",{className:A.rb},a.createElement(s.bL,{value:r,onChange:n,legend:a.createElement(l.q,null,(0,u.tx)("dev_handoff.layer_properties_view"))},e.map(({key:e,label:r})=>a.createElement(s.RT,{label:r,value:e,key:e}))))}},694158:(e,r,n)=>{n.d(r,{j6:()=>O});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(271020),d=n(544405),u=n(609759),p=n(238462),m=n(967688),_=n(43322),h=n(85586),g=n(84360),f=n(220260),E=n(372566),y=n(696786),b=n(511067),v=n(446951),T=n(753644),I=n(120846),S=n(89739);let A=new E.KD({min:.1}),w=[3,2,1,.5,1/3],C=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,m.t)("dev_handoff.alternative_units.no_scale")}};function N({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s,autoFocus:l}){let c=(0,i.wA)(),d=(0,b.Um)(),u=(0,y.GS)();return a.createElement(I.l6,{ariaLabel:(0,m.t)("dev_handoff.alternative_units.scale_factor.select_label"),autoFocus:l,className:o,dispatch:c,dropdownShown:d,dropdownWidth:u?"120px":"auto",formatter:C,id:"SCALE_FACTOR",inputClassName:s,onChange:r,onDropdownHidden:n,property:e},w.map(r=>a.createElement(I.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function L({codeLanguage:e}){let r=(0,f.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let O=(0,v.Ju)(function(e){let r=(0,_.v4)(),[n,i]=a.useState(r),E=(0,f.aq)(n),b=(0,f.gc)(n.id),v=(0,f.Bs)(),I=(0,y.GS)(),w=o.hS(e),C=a.useCallback(e=>{e&&v(n,E,{scaleFactor:e})},[n,v,E]),O="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),R="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),P=(0,u.A)(()=>{R&&v(n,E,{customSettings:{onlyText:"true"===(b.customSettings?.onlyText||"false")?"false":"true"}})},250),D=b?.scaleFactor??1,k=(0,g.V0)({onChange:i,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0,skipBrowsePlugins:!0});return a.createElement(s.bL,{manager:w,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,m.t)("dev_handoff.alternative_units.unit_settings_modal_title")),a.createElement(l.jk,null,a.createElement("div",{className:S.DT},a.createElement(g.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:k})))),a.createElement(l.nB,null,O?a.createElement("div",{className:S.iF},a.createElement(N,{scaleFactor:D,onChange:C,onDropdownHidden:p.lQ,className:S.j8,autoFocus:!0}),a.createElement("div",{className:S.rc})):a.createElement("div",{className:S.hq},a.createElement(T.Q7,{className:S.IC,property:D,formatter:A,onChange:C,autoFocus:!0})),a.createElement("div",{className:S.A3},a.createElement(L,{codeLanguage:n})),R&&(I?a.createElement(c.S,{checked:b.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:S.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:P}):a.createElement("div",{className:S.sM},a.createElement(c.S,{checked:b.customSettings?.onlyText==="true",label:a.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:a.createElement("span",{className:S.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:P}))))))},"SCALE_FACTOR_MODAL")},220260:(e,r,n)=>{n.d(r,{$s:()=>N,Bs:()=>T,Em:()=>w,SF:()=>D,aq:()=>A,b1:()=>L,gc:()=>b,ie:()=>P,lX:()=>v,qM:()=>S,wA:()=>R,wQ:()=>O});var a=n(848318),i=n(301168),o=n(186606),s=n(3757),l=n.n(s),c=n(476254),d=n(996202),u=n(967688),p=n(43322),m=n(85586),_=n(677103),h=n(652576),g=n(847877),f=n(764474),E=n(906132);let y={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",scaledAndroidText:"sp",pixel:"px"};function b(e){let r=(0,p.v4)().id,n=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,a.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function v(){let e=c.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function T(){let e=(0,i.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,d.U)();return(0,a.useCallback)((n,a,i)=>{let{customSettings:s,...c}=i;l()(c)||(void 0!==c.unit&&(c.unit=c.unit===o.tKW.PIXEL?y.pixel:C(n,a)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...c})),(0,_.D8)(e,n,i)},[e,r])}let I=({preferences:e,options:r={}})=>e.customSettings?.onlyText==="true"&&!r?.isTextProperty;function S(e,r,n,a){let i=function(e,r,n,a){let i=(0,p.v4)(),s=e??i,l=function(e,r,n=e=>e,a){let i=(0,p.v4)(),s=e??i,l=function(e){let r=(0,p.v4)(),n=e??r,{unit:a=o.tKW.PIXEL,scaleFactor:i=1}=b(n.id);return"first-party"===n.type&&n.id===m.MT?1:a===o.tKW.SCALED?i:1}(s),c=b(s.id);return 1===l||0===l||I({preferences:c,options:a})?r.map(e=>void 0===e?void 0:n(e)):r.map(e=>void 0===e?void 0:n(e/l))}(s,r,n,a),c=P(s,a);return I({preferences:b(s.id),options:a})?l.map(e=>`${e}${y.pixel}`):l.map(e=>`${e}${c}`)}(e,[r],n,a);if(void 0!==r)return i[0]}function A(e){let{id:r,type:n}=e;return(0,h.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function w(e){let r=(0,p.v4)(),n=A(e??r);return(0,_.ZA)(e??r,n)}function C(e,r,n){let{id:a,type:i,pluginLanguage:o}=e;if("first-party"!==i&&r){let e=(0,E.X)(r,o),n=(0,_.K6)(r,e);if(n)return n.scaledUnit}switch(a){case m.uz:return y.scaledWeb;case m.p:case m.Ap:return y.scaledIOS;case m.LK:case m.NU:if(n?.isTextProperty)return y.scaledAndroidText;return y.scaledAndroid;default:return y.scaledWeb}}function N(e,r){let n=A(e);return C(e,n,r)}function L(e){switch(e){case m.uz:return(0,u.t)("dev_handoff.alternative_units.rem_unit");case m.LK:case m.NU:return(0,u.t)("dev_handoff.alternative_units.dp_unit");case m.p:case m.Ap:return(0,u.t)("dev_handoff.alternative_units.pt_unit");default:return(0,u.t)("dev_handoff.alternative_units.rem_unit")}}function O(e){let r=(0,p.v4)();return R(e??r)}function R(e){let r=N(e);return"first-party"===e.type?L(e.id):r}function P(e,r){let n=(0,p.v4)(),a=e??n,i=function(e){let r=(0,p.v4)(),n=e??r,a=b(n.id)?.unit??o.tKW.PIXEL;return"first-party"===n.type&&n.id===m.MT?o.tKW.PIXEL:a}(a),s=N(a,r);return i===o.tKW.PIXEL?y.pixel:s}function D({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let i=(0,p.v4)(),o=e??i,s=(0,p.AC)(o),l=b(o.id),c=T();return a.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:a,codeExtensionPreferences:i,onChangePreferences:o}){let s=[];if(!a||"first-party"===n.type||(0,_.GL)(a)!==n.id)return s;for(let l of(0,_.zZ)(a,(0,E.X)(a,n.pluginLanguage)))e&&(0,f.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>g.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,f.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:i?.customSettings?.[l.propertyName]?i?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,a,{customSettings:{...i?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},131545:(e,r,n)=>{n.d(r,{q:()=>E});var a=n(848318),i=n(301168),o=n(186606),s=n(382902),l=n(967688),c=n(43322),d=n(677103),u=n(725810),p=n(694158),m=n(220260),_=n(31898),h=n(338104),g=n(281406),f=n(361218);function E(e){let r=(0,m.SF)(),n=(0,u.sQ)(),E=h.z4.getIsExtension(),y=function(e){let r=(0,c.v4)(),n=e??r,s=(0,c.AC)(n),u=(0,m.wQ)(n),h=(0,m.Em)(n),g=(0,m.gc)(n.id),f=(0,m.Bs)(),E=(0,i.wA)();return a.useMemo(()=>{let e=[];if(!h)return e;let r=g?.unit||o.tKW.PIXEL;return e.push(...d.zq.map(e=>{let a=e===o.tKW.PIXEL?(0,l.t)("dev_handoff.alternative_units.pixel_unit"):u;return{name:e.toString(),displayText:a,isChecked:r===e,callback:()=>f(n,s,{unit:e}),recordingKey:e===o.tKW.PIXEL?"pixel":"scaled"}}),{displayText:(0,l.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>E((0,_.to)({type:p.j6})),recordingKey:"setScaleFactor"}),e},[h,g?.unit,u,f,n,s,E])}(e),b=(0,c.v4)(),v=e??b,{updateDefaultCodegenSettings:T,isSetToDefault:I}=(0,g.Q)(),[S,A]=(0,s.fp)(f.v),w=(0,c.AC)(v),C=(0,c.Pt)(w).format(v);return a.useMemo(()=>{let e=[];return y.length>0&&(n||E||e.push({displayText:(0,l.t)("dev_handoff.language_dropdown.preferences_header_unit",{languageOrPlugin:C}),header:!0}),e.push(...y)),r.length>0&&e.length>0&&e.push({displayText:"",separator:!0}),e.push(...r),e.length>0&&e.push({separator:!0,displayText:""}),n?e.push({displayText:(0,l.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{T()},isChecked:I}):v?.type==="first-party"&&(e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display"),header:!0}),e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display_code_syntax"),isChecked:S,callback:()=>{A(!0)}}),e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display_figma_name"),isChecked:!S,callback:()=>{A(!1)}})),e},[r,I,y,T,n,S,A,v?.type,E,C])}},632319:(e,r,n)=>{n.d(r,{Co:()=>R,Iy:()=>w,Me:()=>L,SD:()=>A,TU:()=>I,WV:()=>O});var a=n(938982),i=n(553547),o=n(755595),s=n(149334),l=n(476254),c=n(183603),d=n(998568),u=n(461979),p=n(182317),m=n(304756),_=n(353231),h=n(626912),g=n(677334),f=n(720722),E=n(7905),y=n(200141),b=n(42725);let v=o.z.object({id:o.z.string(),node_id:o.z.string(),file_key:o.z.string(),link_name:o.z.string(),link_url:o.z.string(),is_user_override:o.z.boolean(),link_preview_json:o.z.any()}),T=o.z.object({meta:o.z.array(v)});async function I({fileKey:e,nodeId:r,includeInheritedLinks:n}){let a=(await E.S.getRelatedLinks({nodeId:r,fileKey:e})).data,i=T.safeParse(a);if(!i.success)throw Error("Invalid response from server");let o=i.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let s=l.D.getState().mirror.sceneGraph,c=(0,b.k4)([r],s),d=(0,b.Yi)([r],s),u=await S(e,c),p=await S(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...p.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function S(e,r){let n=l.D.getState().mirror.sceneGraph;if(!r)return[];let a=n.get(r);if(!a)return[];let{publishID:o}=a,s=i.fn(i.sH(o)),c=a.sourceLibraryKey,d=(await g.M4.fetch(h.Cs.LibrariesByLibraryKeysQuery({libraryKeys:[c],subscriptionFileKey:l.D.getState().openFile?.key??null,orgId:l.D.getState().currentUserOrgId})))[0],u=null;return d&&((0,f.ZA)(d)&&(0,f.xA)(d)?u=d.hub_file_id:"library_file_key"in d&&(u=d.library_file_key)),await I({fileKey:u??e,nodeId:s?o??"":r,includeInheritedLinks:!1})}async function A(e){let r=new Set([e]),n=new Map,a=new Map,o=l.D.getState().mirror.sceneGraph,s=(s,l,c)=>{if(!l)return;let d=o.get(l);if(!d)return;let{publishID:u,guid:p}=d,m=c.find(e=>e.library_key===d.sourceLibraryKey),_=null;if(m&&((0,f.ZA)(m)&&(0,f.xA)(m)?_=m.hub_file_id:"library_file_key"in m&&(_=m.library_file_key)),!_||!u||!i.fn(i.sH(u))||_===e){n.set(p,s),a.set(p,l);return}n.set(u,s),a.set(u,l),r.add(_)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);if(c&&c.length>0){let e=new Set;for(let r of c){let n=o.get(r);if(!n||"INSTANCE"!==n.type)continue;let a=n.symbolId;if(!a)continue;let i=o.get(a);i?.sourceLibraryKey&&e.add(i?.sourceLibraryKey)}let r=await g.M4.fetch(h.Cs.LibrariesByLibraryKeysQuery({libraryKeys:Array.from(e),subscriptionFileKey:l.D.getState().openFile?.key??null,orgId:l.D.getState().currentUserOrgId}));for(let e of c){let n=o.get(e);if(!n||"INSTANCE"!==n.type)continue;s(e,n.symbolId,r);let a=(0,b.Yi)([e],o);s(e,a,r)}}let d=await m.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let i=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};i&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:a.get(r.node_id)})}),u}async function w({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s}){if((await I({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return N({fileKey:e,nodeId:r,url:n,name:a,nodeType:i,pluginId:o,source:s})}async function C(e){let r;try{let n=await y.E.getLinkMetadata({text:e}),a=n?.data?.meta;a?.title&&(r=decodeURIComponent(a?.title))}catch(e){}finally{if(!r){let n=(0,s.Gw)(e);r=n?(0,u.Zr)(n):"N/A"}}return r}async function N({url:e,nodeId:r,fileKey:n,name:a,onPost:i,nodeType:o,pluginId:d,source:u}){let h="";if(a)h=a;else{let r=(0,s.FB)(e);if(r?.toLowerCase()==="github.com")h="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){h="Jira";let r=function(e){for(let r of k){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(h=`Issue ${r}`)}else h=await C(e)}let g={node_id:r??"",link_name:h,link_url:e},f=m.Ay.post(`/api/files/${n}/related_links`,g);return i&&i(),c.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${p.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:h,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,_.ds)("Dev Handoff Related Links Added New Link Success",n,l.D.getState(),{nodeId:r,nodeType:o,source:u,pluginId:d}),e))}async function L({fileKey:e,nodeId:r,currentUrl:n,newValue:a,nodeType:i,pluginId:o,source:s}){let d=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:a,url:i,isUserOverride:o,clearLinkPreview:s,nodeType:d,pluginId:u,source:p}){let h={node_id:r,link_id:n,new_link_name:a,new_link_url:i};void 0!==o&&(h.is_user_override=o),s&&(h.link_preview_json=null);let g=m.Ay.put(`/api/files/${e}/related_links`,h);return c.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:a,linkUrl:i,isUserOverride:o,linkPreviewJson:s?"":void 0}}},g),g.then(n=>((0,_.ds)("Dev Handoff Related Links Edit Link Success",e,l.D.getState(),{nodeId:r,nodeType:d,source:p,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:a.name||d.linkName,url:a.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:i,pluginId:o,source:s})}async function O({fileKey:e,nodeId:r,url:n,nodeType:a,pluginId:i,source:o}){let s=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return s||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:a,pluginId:i,source:o}){let s=m.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return c.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},s),s.then(n=>((0,_.ds)("Dev Handoff Related Links Delete Link Success",e,l.D.getState(),{nodeId:r,nodeType:a,source:o,pluginId:i}),n))}({fileKey:e,nodeId:r,linkId:s.id,nodeType:a,pluginId:i,source:o})}async function R({fileKey:e,nodeId:r,url:n,linkPreviewJson:a}){let i=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return i||D({nodeId:r,url:n}),P({link:i,linkPreviewJson:a})}async function P({link:e,linkPreviewJson:r}){try{let n=m.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});c.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,d.$D)(a.e.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function D({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}o.z.object({node_id:o.z.string(),link_name:o.z.string(),link_url:o.z.string()}),o.z.object({meta:v});let k=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},677972:(e,r,n)=>{n.d(r,{Kv:()=>l,np:()=>c,s4:()=>s});var a=n(186606),i=n(19180),o=n(554326);function s(){return!!(0,i.k)().dt_interactive_inspection&&!!(0,i.k)().changes_stager_rollback_to_syncable_value}function l(){let e=a.Ez5?.changesStagerState();return(0,o.ut)(e?.activeStagerType,null)===a.mNT.DEV_MODE_FOCUS_VIEW}function c(){return(a.Ez5?.changesStagerState()?.activeStagerType.getCopy()||null)===a.mNT.DEV_MODE_FOCUS_VIEW}},664421:(e,r,n)=>{n.d(r,{Ib:()=>x,Zy:()=>B,q1:()=>G,vY:()=>V});var a=n(848318),i=n(773511),o=n(812295),s=n(611128),l=n(186606),c=n(320953),d=n(768618),u=n(19180),p=n(382902),m=n(536384),_=n.n(m),h=n(476254),g=n(813009),f=n(238462),E=n(720522),y=n(967688),b=n(268335),v=n(211721),T=n(353231),I=n(959750),S=n(702038),A=n(355755),w=n(413238),C=n(554326),N=n(614092),L=n(273555),O=n(17753),R=n(838191),P=n(74583),D=n(996306),k=n(348522),M=n(523860),F=n(85206);let x=(0,p.eU)(new Map);function U(e){let{isHovered:r,selection:n}=(0,g.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),[i,o]=a.useState(!1),s=a.useRef(null);a.useEffect(()=>{s.current&&e.isSelected&&s.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||G.includes(e.type),d=[k.nM,e._className];e.isSelected&&d.push(k.wH),r&&d.push(k.yo),c&&d.push(k.HR),e.isExpanded(e.guid)&&d.push(k.sz),e.isAncestorSelected&&d.push(k.bx),0!==e.indentation&&d.push(k.BT);let u=Array.from({length:e.indentation},(e,r)=>r+1);return a.createElement("div",{ref:s,className:_()(d),"data-fullscreen-intercept":!0,onContextMenu:r=>e.openContextMenu(r,e.guid),onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onMouseDown:r=>{(0,w.S)("html_tree"),e.didSelectRow(e.guid);let a=Object.keys(n);if(p.zl.set(R.m,null),l.Ez5?.editorState().focusedAnnotationId.set(null),r.metaKey){var i;n[i=e.guid]?S.D$([i]):S.Dh([i])}else r.shiftKey&&a.length>0?S.GL(a[a.length-1],e.guid):l.w3z.selectAndPanToNode(e.guid)},onMouseEnter:()=>{o(!0),S.Uc(e.guid)},onMouseLeave:()=>{o(!1),S.Uc(S.Hr)},role:"button",tabIndex:0},a.createElement("div",{className:k.M4},u.map(e=>a.createElement("div",{key:e,className:k.Mh})),e.children),a.createElement(W,{name:e.name,guid:e.guid,isRowHovered:i}))}function B(e){return a.createElement(E.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:_()(k.GE,e.visible&&k.RK),svg:e.expanded?M.A:F.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let G=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function V(e,r){let n=e?.type??L.PW.NOT_ASSET,a=n&(L.PW.ASSET_IMAGE|L.PW.ASSET_ICON);return r?a:n&L.PW.ASSET_IMAGE}function H(e){return"SYMBOL"===e||"INSTANCE"===e}function z({guid:e}){let r=(0,p.md)(x).get(e);if(!r)return null;let n=r.state;return"added"===n?a.createElement("div",{className:k.vN}):"changed"===n?a.createElement("div",{className:k.tD}):"removed"===n?a.createElement("div",{className:k.rq}):null}function K(e){return a.createElement(U,{...e,_className:e.hasChildren?k.aw:void 0},a.createElement(B,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(D.Bf,{className:k.V3,guid:e.guid}),a.createElement("span",{className:k.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(z,{guid:e.guid}))}function W({isRowHovered:e,guid:r,name:n}){let l=(0,N.Fk)((e,r)=>e.get(r)?.isLockedInDevMode,r);return l||e?a.createElement(i.E,{actionOnPointerDown:!0,onClick:()=>{let e=(0,d.UN)().get(r);e&&c.l7.user("set-locked-in-dev-mode",()=>{e.isLockedInDevMode=!e.isLockedInDevMode;let r=h.D.getState(),n=r.openFile?.key;n&&(0,T.GS)("dev_mode.set_node_locked",n,r,{locked:e.isLockedInDevMode,nodeId:e.guid,nodeType:e.type,isLockedInDesignMode:e.locked,opacity:e.opacity,fillOpacity:e.fills[0]?.opacity})})},"aria-label":(0,y.t)("dev_handoff.layers_panel.locked_tooltip"),className:k.hz,"aria-pressed":l,htmlAttributes:{"data-testid":`devHandoffLayersRow.lockIcon-${n}`,"data-tooltip":(0,y.t)("dev_handoff.layers_panel.locked_tooltip"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip-show-right":!0}},l?a.createElement(o.s,null):a.createElement(s.r,null)):null}function j(e){return a.createElement(U,{...e,_className:k.aw},a.createElement(B,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),a.createElement(D.Bf,{className:k.V3,guid:e.guid}),a.createElement("span",{className:k.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement(z,{guid:e.guid}))}function Y(e){var r,n;let i;let o=(0,A.eY)(),s=e.inheritedTextStyle;if(s){let e=l.Pt4.getStyleNodeId(s.key,s.version);i=o.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return a.createElement(U,{...e,_className:k.yL},a.createElement(B,{visible:!1,expanded:!1,name:e.name}),a.createElement(D.Bf,{className:k.V3,guid:e.guid}),c?null:a.createElement("span",{className:k.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:k.P_},e.textContent),a.createElement("span",{className:k.bT}," \xb7 ",i),a.createElement(z,{guid:e.guid}))}function $(e){return a.createElement(a.Fragment,null,a.createElement(D.Bf,{className:_()(k.V3,k.MS,{[k.hR]:!e.figJam}),guid:e.guid}),a.createElement("span",{className:_()(k.Hn,k.MS)},e.name,e.showGuids&&` (${e.guid})`))}function q(e){let r=e.guid;return a.createElement(U,{...e},a.createElement(B,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),a.createElement($,{guid:r,name:e.name,showGuids:e.showGuids}),a.createElement(z,{guid:e.guid}))}function X(e){let r=e.guid;return a.createElement(U,{...e},a.createElement(B,{visible:!1,expanded:!1,onMouseDown:f.lQ,name:e.name}),a.createElement($,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),a.createElement(z,{guid:e.guid}))}function J(e){let{assetInfo:r}=e;return r?a.createElement(Q,{...e,assetInfo:r}):a.createElement(K,{...e})}function Z({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let i=r.type&L.PW.ASSET_IMAGE||n,o=(0,b.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return a.createElement(P.J,{className:_()(k.ZE,i?k.Ym:k.ye),style:o.backgroundStyle,src:o.url})}function Q(e){let{assetInfo:r}=e;return a.createElement(U,{...e,_className:k.Re},(0,u.k)().dt_insp_impr_assets?a.createElement(B,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}):a.createElement(B,{visible:!1,expanded:!1,name:e.name}),a.createElement(Z,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),a.createElement(a.Fragment,null,H(e.type)?a.createElement($,{guid:e.guid,name:e.name,showGuids:!1}):a.createElement(a.Fragment,null,a.createElement("span",{className:k.Hn},e.name," ",e.showGuids&&` (${e.guid})`),a.createElement("span",{className:k.UZ},a.createElement(v.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}a.memo(e=>{let r=(0,C.J2)((0,I.UK)().showGuids),n=(0,C.J2)(l.Ez5.devHandoffState().automaticIconDetection),i=a.useMemo(()=>l.w3z.getOrAddAssetInfo(e.guid),[e.guid]),o=(0,A.eY)().get(e.guid);if(!o)return null;let s=o.devToolsOrderedVisibleChildren,c=function(e,r,n){return G.includes(e.type)?X:n&&V(n,r)?J:H(e.type)?q:"FRAME"===e.type&&e.isStack?j:"TEXT"===e.type?Y:K}(o,n,i);if(!c)return null;let d=s.length>0&&(!!(0,u.k)().dt_insp_impr_assets||!(i&&V(i,n)));return a.createElement(c,{absoluteBoundingBox:o.absoluteBoundingBox,assetInfo:i,autoRename:o.autoRename,didSelectRow:e.didSelectRow,guid:o.guid,hasChildren:d,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,indentation:e.indentation,inheritedTextStyle:o.inheritedTextStyle,isAncestorSelected:e.isAncestorSelected,isExpandable:!e.isRoot&&d,isExpanded:e.isExpanded,isInstanceSublayer:o.isInstanceSublayer,isSelected:e.isSelected,isSymbolSublayer:o.isSymbolSublayer,name:o.name,openContextMenu:e.openContextMenu,showGuids:r,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,textContent:o.textContent,toggleExpanded:e.toggleExpanded,type:o.type})})},462794:(e,r,n)=>{n.d(r,{Ym:()=>d});var a=n(615233),i=n(972402),o=n(353231),s=n(318147),l=n(259964),c=n(680090);function d(e,r,n,u,p={}){let m=r===l.nT.DevHandoff,_=r===l.nT.Illustration,h={source:n,hasSeatForDevMode:(0,i.tn)(e),...p},g=e.openFile?.key;if((0,o.ds)(m?"Enter Inspect Mode":_?"Enter Illustration Mode":"Enter Design Mode",g,e,h,{forwardToDatadog:u}),(0,a.Ay)().org_id&&g&&"init"!==n){if(_)return;let e=m?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},691195:(e,r,n)=>{function a(e){let[r,n]=e.split("-");if(n){let[e,r]=n.split("_");return`${e}:${r}`}}n.d(r,{xg:()=>a})},521375:(e,r,n)=>{n.d(r,{d:()=>i});var a=n(517776);(0,a.Fu)("dev_mode_should_see_paywall_reminder");let i=(0,a.Fu)("dev_mode_seen_paywall_reminder")},58204:(e,r,n)=>{(0,n(382902).eU)([])},718373:(e,r,n)=>{n(180294),n(318147),n(138528),n(848318),n(179101)},595088:(e,r,n)=>{n.d(r,{a:()=>ee});var a=n(848318),i=n(301168),o=n(938982),s=n(658029),l=n(773511),c=n(534497),d=n(523152),u=n(48710),p=n(855965),m=n(566371),_=n(42791),h=n(287572),g=n(186606),f=n(536384),E=n.n(f),y=n(865114),b=n(857607),v=n(146968),T=n(755534),I=n(297638),S=n(360437),A=n(967688),w=n(952039),C=n(147376),N=n(74864),L=n(484720),O=n(998436),R=n(116400),P=n(413020),D=n(959750),k=n(788903),M=n(14837),F=n(511067),x=n(822879),U=n(17753),B=n(764872),G=n(824286),V=n(21614),H=n(415356),z=n(368085),K=n(641501),W=n(325590),j=n(120846),Y=n(486887),$=n(985789),q=n(346288),X=n(96526),J=n(50652),Z=n(244052),Q=n(881983);function ee({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:i,surface:o,entryPoint:s,maxHeight:l,canOpenLibrary:c}){let d=(0,k.u)(e),u=(0,M.T)()?"vscode":"dev_mode",p=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,m=a.useMemo(()=>({entrypoint:s,variableType:d?.resolvedType!==void 0?(0,q.Hr)(d.resolvedType):void 0,variableOrigin:d?.subscriptionStatus==="LOCAL"?"local":"library",product:u,isDeleted:p,surface:o}),[s,p,d?.resolvedType,d?.subscriptionStatus,o,u]);return a.createElement(R.gs,{name:"details",enabled:!!d,trackingProps:m},a.createElement(et,{variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:i,canOpenLibrary:c,maxHeight:l}))}function et({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:o,canOpenLibrary:l=!0,maxHeight:c}){let u=(0,i.wA)(),p=(0,R.ON)(),m=function({variableId:e,isDetailsModal:r}){let n=(0,k.u)(e),a=(0,k.G6)(n?.variableSetId),i=(0,k.Kd)(n?.node_id),o=a?.modes.find(e=>e.id===a?.defaultModeID),s=(0,$.yK)(n?.node_id);return{variable:n??void 0,variableSet:a,variableSetKey:i??void 0,modeForModal:r&&s?s.modeId.guid:o?.id}}({variableId:e,isDetailsModal:n}),_=(0,y.ZC)(e),h=m.variable?.variableSetId,g=(0,y.ZC)(h),[f,E]=a.useState(null);a.useEffect(()=>{n?_&&_!==e&&E(null):g&&g!==h&&E(null)},[n,_,e,g,h]);let v=!!m.variable&&!!m.variableSet&&!!m.variableSetKey&&!!m.modeForModal;a.useEffect(()=>{v||(u(w.F.enqueue({message:"Variable details could not be loaded"})),r())},[v,u,r]);let I=a.useCallback(e=>{e.event.keyCode===b.Uz.ESCAPE&&(p("escape_pressed"),e.event.preventDefault(),e.accept(),r())},[p,r]),S=a.useCallback(()=>{p("description_expanded")},[p]),{variable:N,variableSet:L,variableSetKey:O,modeForModal:P}=m??{},D=f??P,M=em(e,O,D);if(!v)return null;let F="LOCAL"===N.subscriptionStatus&&N.isSoftDeleted;return a.createElement(B.vL,{handleKeyDown:I,name:"dev-mode-variable-details",focusOnMount:!0},a.createElement(z.VZ,{title:"variable-info",hideHeader:!0,recordingKey:"dev-var-details-header",noPadding:!0},a.createElement("div",{className:Q.Ct},o?a.createElement("div",{className:Q.h6},a.createElement(er,{variable:N}),a.createElement(s.K,{onClick:r,"aria-label":(0,A.t)("dev_handoff.variables.details_button_close_aria_label")},a.createElement(d.L,null))):a.createElement(er,{variable:N}),n&&!F&&a.createElement(en,{variableId:e,libraryKey:N?.subscriptionStatus==="SUBSCRIBED"?N.library_key:void 0,isLocal:N?.subscriptionStatus==="LOCAL",onClose:r,canOpenLibrary:l}),a.createElement(C.X,{description:N.description,containerClassName:Q.h_,onExpand:S,dataTestId:"var-details-description"}))),a.createElement(T.P,{maxHeight:c},a.createElement(z.VZ,{title:"variable-value",hideHeader:!0,recordingKey:"dev-var-details-value",noPadding:!0},a.createElement("div",{className:Q.Ct},a.createElement(eo,{name:(0,A.t)("dev_handoff.variables.details_collection"),value:L?.name,copyValue:null,trackingName:"collection"}),a.createElement(ei,{setSelectedMode:E,selectedMode:D,modeOptions:L?.modes??[],jumpsCollection:M}),a.createElement(e_,{variableId:N.node_id,currentVarSetKey:O,currentlySelectedModeId:D,expandByDefault:!n,onClose:r,canOpenLibrary:l}),a.createElement(eh,{variableId:N.node_id}))),a.createElement(eg,{codeSyntax:N.codeSyntax})))}function er({variable:e}){let r=(0,V.Cj)(e.name),n=(0,R.ON)(),i="LOCAL"===e.subscriptionStatus&&e.isSoftDeleted,{ref:o,...s}=(0,H.X)(e.name),c=i?{"data-tooltip":(0,A.t)("variables.variable_was_deleted"),"data-tooltip-type":U.Ib.TEXT}:void 0,d=a.useCallback(()=>{r&&(n("row_copied",{type:"name"}),r())},[r,n]);return a.createElement(l.E,{className:Q.L$,onClick:d,htmlAttributes:s??c},i&&a.createElement(X.B3,null),a.createElement("span",{className:Q.cG,ref:o,"data-testid":"var-details-name"},e.name))}function en({variableId:e,libraryKey:r,isLocal:n,onClose:i,canOpenLibrary:s}){let l=(0,R.KP)("full_table",L.Nh.VariableDetailsModal),c=(0,P.b)({libraryKey:r,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),d=(0,x.B)(r||"",{enabled:!!r}),u=(0,O.g)({onShow:i,entryPoint:L.Nh.VariableDetailsModal,variableId:e});return n||"loaded"===c.status&&"loaded"===d.status?s?a.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},a.createElement(N.J,{libraryName:d?.data,containerClassName:Q.Yv,link:c.data,isLocal:n,localFallback:(0,A.t)("dev_handoff.variables.details_local"),onClickLocalFallback:u,onTrackClickName:l,dataTestId:"var-details-library",recordingKey:"library_name"})):a.createElement(N.J,{libraryName:d?.data,containerClassName:Q.Yv,isLocal:n,dataTestId:"var-details-library"}):a.createElement(N.J,{containerClassName:Q.Yv,loading:!0})}let ea=new class{format(e){return e.name}};function ei({selectedMode:e,setSelectedMode:r,modeOptions:n,jumpsCollection:o}){let s=(0,i.wA)(),l=(0,R.ON)(),c=(0,F.Um)(),d=a.useMemo(()=>n.find(r=>r.id===e),[e,n]),u=a.useCallback(n=>{l("change_mode",{previous:e,current:n.id}),r(n.id)},[e,r,l]),p=a.useId();if(!d||!n||n.length<2)return null;let m=o?Q.FV:Q.Fj;return a.createElement(z._p,{className:Q.VL,disableDetailModalEntry:!0},a.createElement("span",{id:p,className:Q.xZ},(0,A.tx)("dev_handoff.variables.details_mode")),a.createElement("span",{className:m,"data-testid":"var-details-mode"},a.createElement(j.l6,{ariaLabelledBy:p,id:"mode_dropdown",dispatch:s,dropdownShown:c,property:d,onChange:u,formatter:ea},n.map(e=>a.createElement(j.c$,{key:`${e.id}`,value:e},e.name)))))}function eo({name:e,trackingName:r,trackingProps:n={},value:i,copyValue:o,children:s}){let l=(0,R.ON)(),c=a.useCallback(()=>{null!==o?l("row_copied",{type:r,...n}):l("row_clicked",{type:r,...n})},[o,l,r,n]);return s?a.createElement(z._p,{copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0},s):a.createElement(z._p,{name:e,value:i,copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0})}function es(e,r){let n=(0,$.Px)();return a.useMemo(()=>e&&r?{...n,[e]:r}:n,[n,e,r])}let el=(0,Z.ex)("variable_value_from_other_mode",function({modeName:e,collectionName:r}){return a.createElement("div",{className:I.s.cursorDefault.colorTextTooltip.wFitContent.$},(0,A.tx)("dev_handoff.variables.details_value_from_other_mode",{modeName:a.createElement("span",{className:I.s.fontSemiBold.$},e),collectionName:a.createElement("span",{className:I.s.fontSemiBold.$},r)}))},e=>({modeName:e.getAttribute("data-tooltip-mode"),collectionName:e.getAttribute("data-tooltip-collection")}));function ec({variableId:e,onClose:r,canOpenLibrary:n}){let i=(0,k.u)(e),d=i?.subscriptionStatus==="LOCAL",m=i?.subscriptionStatus==="LOCAL"&&i.isSoftDeleted,_=i?.subscriptionStatus==="SUBSCRIBED"?i.library_key:void 0,h=(0,R.KP)("full_table",L.Nh.VariableDetailsModal),g=(0,P.b)({libraryKey:_,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),f=g.data?.link,y=(0,O.g)({onShow:r,entryPoint:L.Nh.VariableDetailsModal,variableId:e}),b=a.useCallback(()=>{h({type:d?"local":"library"}),d&&y()},[d,h,y]);return i&&!m&&n&&(i?.subscriptionStatus!=="SUBSCRIBED"||"loaded"===g.status)?d?a.createElement("div",{className:Q.Iw},a.createElement(s.K,{"aria-label":(0,A.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":U.Ib.TEXT,"data-tooltip":(0,A.t)("dev_handoff.variables.details_view_in_collection")},onClick:b},a.createElement(u.E,null))):g.data?.type==="community"?a.createElement(l.E,{disabled:!0,className:E()(Q.WF,Q.Iw),"aria-label":(0,A.t)("dev_handoff.variables.details_from_community"),htmlAttributes:{"data-tooltip-type":U.Ib.TEXT,"data-tooltip":(0,A.t)("dev_handoff.variables.details_from_community")}},a.createElement(p.U,null)):f?a.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},a.createElement(c._,{className:E()(Q.YI,Q.Iw),newTab:!0,href:f,trusted:!0,onClick:b,"aria-label":(0,A.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":U.Ib.TEXT,"data-tooltip":(0,A.t)("dev_handoff.variables.details_view_in_collection")}},a.createElement(u.E,null))):null:null}function ed({variableData:e,varSetKeyToModeID:r,originalSetID:n,showArrow:i,showDotDotDot:o,numberOfAliases:s,showCollapsedTooltip:c,someAliasOutsideCollection:d,onToggle:u,onClose:p,canOpenLibrary:f}){let y=(0,k.u)(e.value),b=(0,k.BQ)(e.value,r),v=(0,k.t8)(e.value,r),T=(0,k.G6)(y?.variableSetId),I=(0,k.Kd)(y?.node_id),S=(0,V.Cj)(y?.name),w=(0,R.ON)(),C=a.useCallback(()=>{S&&(S(),w("row_copied",{type:"alias"}))},[S,w]),N=a.useMemo(()=>{if(y?.variableSetId===n||!I||!T)return null;let e=r?.[I]??T?.defaultModeID,a=T?.modes.find(r=>r.id===e);return a?{modeName:a.name,collectionName:T.name}:null},[n,T,r,y,I]),L=(0,A.t)("dev_handoff.variables.details_value_show_more",{count:s-2}),{ref:O,...P}=(0,H.X)(L),D="MIXED"!==b&&b?.type!==g.Z_n.COLOR,M=!D;return a.createElement(a.Fragment,null,a.createElement("div",{className:Q.FO},M?a.createElement(G.np,{color:b.value,variable:y,label:y?.name??(0,A.t)("variables.missing_name"),onClick:C,shouldStretch:!0}):a.createElement(X.wG,{thumbnailValue:v,text:y?.name??(0,A.t)("variables.missing_name"),onClick:C,isDeleted:y?(0,q.eF)(y):void 0,fullWidth:!0,containerClassName:Q.g7}),d&&a.createElement("div",{className:Q._Z},N&&a.createElement(m.B,{"data-tooltip-type":U.Ib.SPECIAL,"data-tooltip":el,"data-tooltip-mode":N.modeName,"data-tooltip-collection":N.collectionName,className:Q.LU})),a.createElement(ec,{onClose:p,variableId:e.value,canOpenLibrary:f})),i?a.createElement("div",{className:E()(Q.aI,D&&Q.S5)},a.createElement(_.Q,null)):o?a.createElement("div",{className:E()(Q.my,D&&Q.mH)},a.createElement(l.E,{onClick:u,"aria-label":(0,A.t)("dev_handoff.variables.details_value_expand_aria_label"),className:Q.X1,htmlAttributes:P},a.createElement(h.f,{className:Q.Kk}),a.createElement("div",{className:Q.Pn,ref:O},L)),c&&a.createElement(m.B,{"data-tooltip-type":U.Ib.TEXT,"data-tooltip":(0,A.t)("dev_handoff.variables.details_values_not_all_from_same_mode"),className:Q.Kk})):null)}function eu({value:e,noChain:r}){let n=e?.type===g.Z_n.FLOAT?(0,z.nd)(e.value,""):e?.value?.toString(),i=(0,V.Cj)(n),o=(0,R.ON)(),{ref:s,...c}=(0,H.X)(n),d=a.useCallback(()=>{i&&(i(),o("row_copied",{type:"value"}))},[i,o]);switch(e.type){case g.Z_n.STRING:case g.Z_n.BOOLEAN:case g.Z_n.FLOAT:return a.createElement(l.E,{onClick:d,className:E()(Q.Uq,e.type===g.Z_n.STRING&&Q.TQ),htmlAttributes:{...c,"data-testid":"var-details-value"},ref:s},n);case g.Z_n.COLOR:return a.createElement(ep,{value:e,noChain:r});default:return null}}function ep({value:e,noChain:r}){let n=(0,D.Ku)(),i=(0,W.Ig)(),o=(0,K.q)(e.value,n,i,{alphaInPercent:!0}).value,s=(0,V.Cj)(o),l=(0,R.ON)(),c=a.useCallback(()=>{s&&(s(),l("row_copied",{type:"value"}))},[s,l]),{ref:d,...u}=(0,H.X)(o),p={...u,"data-testid":"var-details-value"};return a.createElement("div",{className:Q.Ur},a.createElement(G.rh,{color:e.value,value:o,onClick:c,labelRef:d,htmlAttributes:p,pillClassName:r?Q.W7:void 0}))}function em(e,r,n){let i=es(r,n),o=(0,k.u)(e),s=(0,k.Xv)(e,i),l=(0,k.hg)((s??[]).map(e=>e.type===g.Z_n.ALIAS?e.value:void 0)),c=o?.variableSetId;return a.useMemo(()=>l.some((e,r)=>!!e&&r>0&&e?.variableSetId!==c),[l,c])}function e_({variableId:e,currentVarSetKey:r,currentlySelectedModeId:n,expandByDefault:i,onClose:o,canOpenLibrary:s}){let[l,c]=a.useState(!1),d=i||l,u=es(r,n),p=(0,k.u)(e),m=(0,k.Xv)(e,u),_=(0,R.ON)(),h=a.useCallback(()=>{_("toggle_alias_chain",{type:d?"collapse":"expand"}),c(e=>!e)},[d,_]),f=em(e,r,n);if(!p||!m||0===m.length)return null;let y=m.length>2,b=m[0],v=m[m.length-1],T=m.length>1?d?m:[b,v]:[v];if(1===m.length&&(v.type===g.Z_n.STRING||v.type===g.Z_n.BOOLEAN||v.type===g.Z_n.FLOAT)){let e=v.type===g.Z_n.FLOAT?(0,z.nd)(v.value,""):v.value.toString();return a.createElement(eo,{trackingName:"value",name:(0,A.t)("dev_handoff.variables.details_value"),value:e,copyValue:e})}return a.createElement("div",{className:Q.e9},a.createElement("span",{className:Q.xZ},(0,A.tx)("dev_handoff.variables.details_value")),a.createElement("div",{className:E()(Q.n8,v.type!==g.Z_n.COLOR&&Q.jl,v.type===g.Z_n.COLOR&&Q.Kv)},T.map((e,r)=>{let n=r===T.length-1;return e.type===g.Z_n.ALIAS?a.createElement(ed,{key:r,canOpenLibrary:s,numberOfAliases:m.length,onClose:o,onToggle:h,originalSetID:p?.variableSetId,showArrow:y?!n&&d:!n,showCollapsedTooltip:y&&!d&&f,showDotDotDot:!!y&&!n&&!d,someAliasOutsideCollection:f,varSetKeyToModeID:u,variableData:e}):a.createElement(eu,{key:r,value:e,noChain:1===m.length})})))}function eh({variableId:e}){let r=(0,k.u)(e),n=(0,R.ON)(),i=(0,A.t)("dev_handoff.variables.details_scope"),o=(0,H.X)(i);return r?.scopes&&r.scopes.length>0&&r.scopes[0]!==g.j0r.ALL_SCOPES?a.createElement(S.c,{className:Q.e9,onClick:()=>n("row_clicked",{type:"scopes"})},a.createElement("span",{className:Q.xZ},a.createElement("span",{className:Q.qg,...o},i),a.createElement("div",{"data-tooltip":(0,A.t)("dev_handoff.variables.details_scope_info"),"data-tooltip-type":U.Ib.TEXT,className:Q.Kk},a.createElement(m.B,null))),a.createElement("div",{className:Q.Wu},r.scopes.map(e=>a.createElement("div",{key:e.toString(),className:Q.qg,"data-testid":`var-details-scope-${e.toString()}`},(0,J.Us)(e,{devMode:!0}))))):null}function eg({codeSyntax:e}){return e&&Object.keys(e).length>0?a.createElement(a.Fragment,null,a.createElement("div",{className:I.s.h8.$}),a.createElement(z.VZ,{title:(0,A.t)("dev_handoff.variables.details_code_syntax"),recordingKey:"dev-var-details-code-syntax"},Object.entries(e).map(([e,r])=>{let n=(0,Y.ov)(e);return null===n?null:a.createElement(eo,{key:n,trackingName:"code_syntax",trackingProps:{codeSyntaxPlatform:(0,Y.r8)(n)},name:(0,Y.lo)(n),value:r,copyValue:r})}))):null}},257419:(e,r,n)=>{n.d(r,{A8:()=>u,eT:()=>p});var a=n(848318),i=n(301168),o=n(382902),s=n(865114),l=n(324762);n(453370);var c=n(31898),d=n(788903);function u(){let e=(0,i.d4)(e=>"devModeVariablesTableSelectedVariable"in e.selectedView?e.selectedView.devModeVariablesTableSelectedVariable:void 0),r=(0,d.u)(e),n=(0,d.Rb)(),o=!!r,s=a.useMemo(()=>o&&"SUBSCRIBED"!==r.subscriptionStatus||!e?null:n.find(r=>e.includes(r.keyForPublish)),[o,e,n,r?.subscriptionStatus]);return s?s.node_id:r?.node_id??null}function p(){let e=(0,l.uQ)(),r=(0,s.ZC)(e),n=(0,i.wA)();a.useEffect(()=>{r&&e!==r&&n(c.AS())},[n,r,e])}n(209595),n(64525),(0,o.E3)("last-used-dev-mode-variable-set",null),(0,o.eU)("ALL_VARIABLES")},116400:(e,r,n)=>{n.d(r,{KP:()=>m,ON:()=>p,gs:()=>_});var a=n(848318),i=n(996202),o=n(43322),s=n(725810),l=n(863270);let c=a.createContext({}),d="dev_mode.variables.",u={};function p(){let e=(0,i.hC)(),{name:r,enabled:n=!0,trackingProps:o}=a.useContext(c);return a.useCallback((a,i=u)=>{r&&n&&e(d+r,{action:a,...o,...i})},[o,n,r,e])}function m(e,r){let n=(0,i.hC)();return a.useCallback((a=u)=>{n(d+e,{action:"click_on_entry_point",entrypoint:r,...a})},[r,e,n])}function _({children:e,enabled:r=!0,skipOpenAndClose:n=!1,name:p,trackingProps:m=u}){let _=(0,i.hC)(),h=(0,o.v4)().id,[g]=(0,s.$h)(),f=a.useMemo(()=>({codeLanguage:h,inspectView:g,...m}),[m,h,g]),E=a.useMemo(()=>({name:p,enabled:r,trackingProps:f}),[p,r,f]);return(a.useEffect(()=>{if(p&&r&&!n)return _(d+p,{action:"view_opened",...f}),()=>{_(d+p,{action:"view_closed",...f})}},[]),p)?a.createElement(l.fu,{name:p,enabled:r,properties:f},a.createElement(c.Provider,{value:E},e)):a.createElement(a.Fragment,null,e)}},467138:(e,r,n)=>{n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var a=n(382902),i=n(517776),o=n(43258);(0,a.eU)(void 0);let s=(0,a.eU)(!1),l=(0,a.eU)(!1),c=(0,a.eU)(!1),d=(0,i.Fu)(o.Ih)},899383:(e,r,n)=>{n.d(r,{D0:()=>s,zi:()=>o});var a=n(186606),i=n(967688);function o(e){switch(e){case a.zIx.BUILD:return(0,i.t)("dev_handoff.status.ready_for_dev");case a.zIx.COMPLETED:return(0,i.t)("dev_handoff.status.completed");case a.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},133685:(e,r,n)=>{n.d(r,{S7:()=>m,WJ:()=>function e(r,n){return!!n&&"CANVAS"!==n.type&&(n.guid===r.guid||e(r,n.parentNode))},_$:()=>p});var a=n(186606),i=n(803565),o=n(476254),s=n(462794),l=n(453370),c=n(323201),d=n(353231),u=n(259964);function p(e,r,n){if("fullscreen"!==r.view)return;let a=o.D.getState();a.selectedView?.showOverview&&"overview_search_clicked"===n&&(0,d.ds)("Dev Mode Overview Pages Search Clicked",a.openFile?.key,a,{pageId:r.nodeId}),"editorType"in r&&r.editorType===u.nT.Design&&(0,s.Ym)(a,u.nT.Design,n),e(l.$T({...r,showOverview:!1,overviewBackButtonTargetNodeId:void 0}))}function m(e,r,n){let o=function(e,r){let n=e.get(r)?.backgroundColor;return n?c.F.format(n):null}(e,n),s=a.w3z.backgroundColorOverride(r);return s?c.F.format((0,i.aH)(s)):o}},361964:(e,r,n)=>{n.d(r,{NZ:()=>u,Wl:()=>p,ZO:()=>d,hA:()=>m,ju:()=>h,l7:()=>c,s4:()=>_});var a=n(848318),i=n(301168);n(186606),n(382902),n(523035),n(996202);var o=n(813009);n(972402),n(885683),n(462794);var s=n(453370);n(461445),n(355755),n(554326),n(259964);var l=n(698429);function c(){return(0,i.d4)(e=>p(e.selectedView))}function d(){return(0,i.d4)(e=>{var r;return!!(r=e.selectedView)&&r?.view==="fullscreen"&&r?.showDevModeComponentBrowser===!0})}function u(){return(0,i.d4)(e=>(function(e){if(e)return e?.view==="fullscreen"?e?.componentKey:void 0})(e.selectedView))}function p(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function m(){return(0,i.d4)(e=>_(e.selectedView)??null)}function _(e){if(e)return(0,l.$A)(e)?e.devModeFocusId:void 0}function h(){let e=(0,i.wA)(),r=function(){let e=(0,i.d4)(e=>e.mirror.appModel.currentPage);return(0,o.R)(r=>"fullscreen"===r.selectedView.view?{...r.selectedView,showDevModeComponentBrowser:!0,componentBrowserBackButtonTargetNodeId:e}:r.selectedView)}();return(0,a.useCallback)(()=>{e((0,s.$T)(r))},[e,r])}n(467138),n(615484)},946074:(e,r,n)=>{n.d(r,{L:()=>k});var a=n(871043),i=n(938982),o=n(186606),s=n(320953),l=n(382902),c=n(476254),d=n(458608),u=n(998568),p=n(66699),m=n(967688),_=n(444404),h=n(555637),g=n(972402),f=n(677972),E=n(467138),y=n(899383),b=n(533737),v=n(353231),T=n(303397),I=n(729213),S=n(318147),A=n(55116),w=n(19242),C=n(691339),N=n(823160),L=n(133685);function O({status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isReadOnly:s,description:l,isEdited:d}){let u=c.D.getState();(0,v.ds)("dev_handoff_edit_status",u.openFile?.key,u,{status:e,prevStatus:r,source:n,numNodesUpdated:a,nodeId:i,nodeType:o,isViewOnly:s,hasDescription:""!==l,description:l,isEdited:d},{forwardToDatadog:!0})}async function R(e,r,n,a,d){let p;let m=c.D.dispatch,_=c.D.getState(),h=_.openFile?.key||"",g=d??void 0,f=performance.now();if(l.zl.set(E.pc,!0),r===o.zIx.BUILD||r===o.zIx.COMPLETED)try{let e=await (0,w.m)(h,(0,y.zi)(r)??void 0,g,m,!0);p=e?.id,h&&!p&&(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] createSavepoint returned no id"))}catch(e){(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating version on status change: "+e.stack))}let b=!1;(0,s.l7)(s.zk.SYSTEM,"store-status-activity",()=>{C.e.recordStatusChange({fileKey:h,nodes:e,status:r,description:g,versionId:p}).then(()=>{b=!0}).catch(e=>{(0,u.$D)(i.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating activity: "+e.stack))}).finally(()=>{let r=performance.now()-f;(0,v.ds)("dev_handoff_status_activity",h,_,{elapsedMs:r,status:n,source:a,savedVersion:!!p,savedActivity:b,nodeIds:e.map(e=>e.id)},{forwardToDatadog:!0}),l.zl.set(E.pc,!1)})})}function P(e){switch(e){case o.zIx.BUILD:return"ready_for_dev";case o.zIx.COMPLETED:return"completed";default:return"none"}}async function D(e,r){let n=e.map(({id:e,isUpdated:n})=>n?{fileKey:r,nodeId:e}:null).filter(a.Vq);if(0===n.length)return{};let i=await (0,d.S8)(A.WND,n),o={};return i.forEach(({result:e},r)=>{if(e.data?.file.status==="loaded"){let a=e.data.file.data?.devModeActivity.filter(e=>e.activityType===S.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())||[],i=n[r],s=a[0];i&&s&&(o[i.nodeId]=s.id)}}),o}async function k({nodeIds:e,status:r,description:n,sourceForLogging:a,editScopeType:i}){let d=c.D.getState(),u=d.mirror.sceneGraph,y=d.openFile?.key??"",S=d.user?.id??"",A=o.w3z.isReadOnly(o.SES.NODE_STATUS),w=P(r),C=c.D.dispatch;if(r===o.zIx.BUILD){C((0,b.b)({has_marked_ready_for_dev:!0})),(0,p.YQ)({id:"marked_ready_for_dev",properties:{nodeIds:e}});let r=l.zl.get(h.hj);if(r&&e.includes(r)){let e=l.zl.get(h.d1);e.fn?.()}}let k=new Map,M=new Map,F=[];for(let n of e){let e=u.get(n);if(e){let a=e.getStatusInfo().status;k.set(n,e.hasBeenEditedSinceLastStatusChange),M.set(n,P(a));let i=(0,L.S7)(u,n,e.containingCanvas||""),s=a===o.zIx.BUILD&&r===o.zIx.BUILD,l="";if(e.containingCanvas){let r=u.get(e.containingCanvas);r&&(l=r.name)}F.push({id:n,name:e.name,type:e.type,pageName:l,prevStatus:a,previewBackground:i,isUpdated:s})}}let x=(0,f.np)();if(A||x){let s=d.openFile,l={status:w,canAccessDevModeRaw:s?.canAccessFullDevMode,canAccessDevModeEntryPoint:s?.canAccessDevModeEntryPoint,canAccessDevMode:(0,g.tn)(d),fileRepoId:s?.fileRepoId,userOrgId:d.user?.org_id,currentTeamId:d.currentTeamId,currentUserOrgId:d.currentUserOrgId,source:a,numNodes:e.length,editScopeType:i,userIdForMultiplayer:S,linkAccess:s?.linkAccess,fileCanEdit:s?.canEdit,fileCanEditCanvas:s?.canEditCanvas,fileCanEditIgnoreEduGracePeriod:s?.canEditIgnoreEduGracePeriod,canManage:s?.canManage,canView:s?.canView,isTeamTemplate:s?.isTeamTemplate,isTryFile:s?.isTryFile,viewerExportRestricted:s?.viewerExportRestricted,fileHasPartialOrgUser:!!s?.currentPartialOrgUser,fileHasCurrentTeamUser:!!s?.currentTeamUser,hasEditRole:s?.hasEditRole?.data};(0,v.ds)("temp_debug_set_status_view_only",s?.key,d,l);let c=!1;setTimeout(()=>{c||(0,v.ds)("temp_debug_set_status_view_only_failed",s?.key,d,l)},2e3),o.h3O.sendSetNodeStatus(e,r,n??"",S);let[u]=await Promise.all([D(F,y),(0,I.n)()]);if(c=!0,(0,g.tn)(d))for(let{id:e,name:a,type:i,pageName:o,prevStatus:s,previewBackground:l}of F)N.f.recordStatusChange({fileKey:y,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:s,description:n||void 0,pageName:o,previewBackground:l,prevActivityId:u[e]||null});for(let{id:i,type:o}of(R(F,r,w,a,n),F))O({status:w,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:A,description:n??"",prevStatus:M.get(i)??w,isEdited:k.get(i)??!1})}else{if(!navigator.onLine){(0,_.j)("offlineSettingNodeStatus",!0,{message:(0,m.t)("dev_handoff.status.offline")});return}(0,s.l7)(i,"set-nodes-status",()=>{for(let{id:e}of F){let a=u.get(e);a&&a.setStatus(r,S,n??void 0)}T.Y5.triggerAction("commit")});let o=await D(F,y);for(let{id:e,name:a,type:i,pageName:s,prevStatus:l,previewBackground:c}of F)(0,g.tn)(d)&&N.f.recordStatusChange({fileKey:y,nodeId:e,nodeName:a,nodeType:i,status:r,prevStatus:l,description:n||void 0,pageName:s,previewBackground:c,prevActivityId:o[e]||null});for(let{id:i,type:o}of(R(F,r,w,a,n),F))O({status:w,source:a,numNodesUpdated:e.length,nodeId:i,nodeType:o,isReadOnly:A,description:n??"",prevStatus:M.get(i)??w,isEdited:k.get(i)??!1})}!function(e){let r=l.zl.get(E.d),n=l.zl.get(E.cR),a=l.zl.get(E.hv)?.data;e!==o.zIx.BUILD||r||n||a||l.zl.set(E.d,!0)}(r)}},615484:(e,r,n)=>{n(848318),n(301168),n(938982);var a=n(382902);n(989232),n(996202),n(63163),n(998568),n(972402),(0,n(4881).Wh)(()=>(0,a.eU)(!1),{preserveValue:!1}),(0,a.eU)(""),(0,a.eU)("");var i=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(i||{}),o=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(o||{})},142917:(e,r,n)=>{n.d(r,{E1:()=>l,ei:()=>s});var a=n(813009),i=n(615233);n(355755);var o=n(614092);function s(e,r=!1,n){return(0,o.Fk)((e,r,a)=>r&&function(e,r,n){let a=e.get(r)?.editInfo;return!a||n&&a.userId===i.Ay().user_data?.id||0===a.lastEditedAt?null:(a.lastEditedAt=1e3*a.lastEditedAt,a.createdAt=1e3*a.createdAt,a)}(n??e,r,a)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,a.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),a=new Date(r);return n>a?n:a}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},533226:(e,r,n)=>{n.d(r,{E:()=>g,aK:()=>h,ce:()=>m,cv:()=>f,hZ:()=>E,rg:()=>_});var a=n(60074),i=n(476254),o=n(304756),s=n(314979),l=n(151223),c=n(760150),d=n(353231),u=n(791339);let p=e=>{let r=i.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function m(){p("fig_file_save_as")}let _=(0,l.nF)((e,r)=>{p("fig_file_export")}),h=(0,l.nF)((e,r)=>{p("fig_file_image_download")}),g=(0,a.NC)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:a,emails:i,eventName:o,date:l}=r,p=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:p.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...a?{teamId:a}:null,...o?{eventName:JSON.stringify(o)}:null,...i?{emails:i.join()}:null,...n?null:{after:p.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],m=s[1],_=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(E({logs:_,cursor:m})),(0,d.Fr)("Activity Logs Fetched",p.currentUserOrgId,p,{teamIdFilter:a,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!i&&i.length>0,filtersOnActedOnEmail:!!i&&i.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(g(r))});let f=(0,a.NC)("CLEAR_CURSOR_ACTIVITY_LOGS"),E=(0,a.NC)("SET_ACTIVITY_LOGS")},364619:(e,r,n)=>{n.d(r,{ZH:()=>c,_M:()=>s,r$:()=>l,r5:()=>d});var a=n(60074),i=n(398612),o=n(29188);let s=(0,n(151223).nF)(e=>{let r=e.getState().appWindow.inFullScreenMode;if(o.eD){o.eD.setFullScreen(!r);return}i.R7.fullscreen&&(r?i.R7.getFullscreenElement()?i.R7.exitFullscreenFunc():e.dispatch(c()):i.R7.requestFullscreenFunc.call(document.documentElement))}),l=(0,a.NC)("WINDOW_DID_ENTER_FULL_SCREEN"),c=(0,a.NC)("WINDOW_DID_EXIT_FULL_SCREEN");function d(e){i.R7.fullscreen&&!o.eD&&(document.addEventListener(i.R7.fullscreenChangeEventName,function(){let r=e.getState();i.R7.getFullscreenElement()&&!r.appWindow.inFullScreenMode?e.dispatch(l()):r.appWindow.inFullScreenMode&&e.dispatch(c())}),document.addEventListener(i.R7.fullscreenErrorEventName,function(r){console.warn("failed to enter fullscreen:",r),e.getState().appWindow.inFullScreenMode&&e.dispatch(c())}))}},917417:(e,r,n)=>{n.d(r,{TP:()=>g,Y3:()=>E,h0:()=>y,vv:()=>_,zE:()=>f});var a=n(382902),i=n(60074),o=n(989232),s=n(29188),l=n(151223),c=n(453370),d=n(952468),u=n(281294),p=n(948008),m=n(677334);let _=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let a=Object.keys(r);await (0,u.wI)(n,a),p.hp.sendToAllTabs(p.c6,a),(0,o.trackEvent)("Delete New Autosave Files",{deletedCount:a.length})}),h=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let a=await (0,u.kl)(n);e.dispatch(E({filesWithChangesInIDB:a.unsyncedFiles,filesCreatedOffline:a.newFiles})),e.dispatch(g(a.nextGarbageCollectionTimestamp))}),g=(0,i.NC)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),f=(0,i.NC)("SET_AUTOSAVE_SNOOZE"),E=(0,i.NC)("SET_UNCLAIMED_FILES");function y(e){p.hp.register(p.ec,()=>(function(e){let r=e.getState().user?.id??null;m.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),p.hp.register(p.c6,r=>(function(e,r){let n=a.zl.get(d.h);n&&r.includes(n)&&(s.eD?s.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentsAndSharing"}))),e.dispatch(h())})(e,r)),p.hp.register(p.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},853434:(e,r,n)=>{n.d(r,{AY:()=>v,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>T,s6:()=>I});var a=n(186606),i=n(60074),o=n(183223),s=n(304756),l=n(314979),c=n(967688),d=n(952039),u=n(151223),p=n(179388),m=n(198850),_=n(15120);n(552807);var h=n(7373),g=n(358847);function f(e,r,n,a){let i=document.createElement("canvas"),o=i.getContext("2d");return i.width=i.height=r,o.fillStyle="image/png"===a?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(i,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===a?i.toDataURL():i.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,i.NC)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===h.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&a.h3O?.setImgUrl(n.img_url),e.dispatch(_.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===h.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===h.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===h.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),v=(0,i.NC)("AVATAR_EDITOR_UPLOAD"),T=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let a=n[0].data.meta.url,i=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:a,largeUrl:i}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(v(r))}),I=(0,i.NC)("AVATAR_EDITOR_INIT")},12898:(e,r,n)=>{n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>i,zx:()=>l});var a=n(60074);let i=(0,a.NC)("CANVAS_SEARCH_SET_MODE"),o=(0,a.NC)("CANVAS_SEARCH_SET_SCOPE"),s=(0,a.NC)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,a.NC)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,a.NC)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,a.NC)("CANVAS_SEARCH_SET_QUERY"),u=(0,a.NC)("CANVAS_SEARCH_RESET")},847461:(e,r,n)=>{n.d(r,{$0:()=>es,$M:()=>eO,AY:()=>K,At:()=>Z,C:()=>G,CX:()=>el,Df:()=>eB,F8:()=>ec,Fm:()=>ef,Jc:()=>ex,Mv:()=>Y,NJ:()=>eg,Oo:()=>eh,PB:()=>eL,Q8:()=>eu,QD:()=>eM,QY:()=>z,Qe:()=>eE,RI:()=>ev,RO:()=>eC,RP:()=>em,Tb:()=>W,U3:()=>eN,UU:()=>eo,We:()=>eb,Z5:()=>eD,_B:()=>ei,_v:()=>J,a$:()=>ed,bB:()=>ee,cL:()=>eY,dB:()=>V,gi:()=>er,hY:()=>q,hx:()=>$,i4:()=>ey,js:()=>e$,k7:()=>eF,l5:()=>Q,lI:()=>ea,lV:()=>en,li:()=>eV,nL:()=>eT,nb:()=>eP,on:()=>ek,pD:()=>et,pI:()=>eK,q4:()=>eR,rW:()=>X,sQ:()=>eI,uy:()=>eU,uz:()=>eG,vV:()=>ep,wJ:()=>eH,wg:()=>e_,xH:()=>eA,y3:()=>ez,yH:()=>eW,z$:()=>j});var a=n(186606),i=n(553547),o=n(19180),s=n(382902),l=n(334704),c=n(60074),d=n(989232),u=n(484169),p=n(343651),m=n(183603),_=n(97941),h=n(998568),g=n(810503),f=n(304756),E=n(314979),y=n(967688),b=n(210853),v=n(952039),T=n(151223),I=n(453370),S=n(224847),A=n(353231),w=n(123327),C=n(657554),N=n(303397),L=n(656320),O=n(302982),R=n(838191),P=n(98737),D=n(744550),k=n(664250),M=n(518166),F=n(31898),x=n(222428),U=n(446244),B=n(533737);async function G(e,r,n,a,i){await H(i.messageMeta,e,r,n,a).then(r=>{e(J({comment:i.comment,messageMeta:i.messageMeta,attachmentUpdates:i.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function V(e,r,n,a,i,o,s,l){return await H(o.messageMeta,r,n,a,i).then(n=>{r(ex({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(en({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eR({threadId:o.threadId,resetStatusOnly:!0})),r(ex({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function H(e,r,n,a,i){return new Promise(o=>{r((0,F.to)({type:M.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:a,uninvitableUsers:i,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let z=(0,T.nF)((e,r)=>{let{receiptsAPI:n,comment:a}=r;n.markAsUnread(a.id).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),K=(0,T.nF)((e,r)=>{let{receiptsAPI:n,thread:a}=r;n.markAsRead(a.comments.map(e=>e.id)).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),W=(0,T.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:a}=r;n.markAllAsRead().catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}}),a.markAllAsRead().catch(r=>{let n=(0,y.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})});(0,T.nF)((e,r)=>{let{reactionsApi:n,id:a,emoji:i}=r,o=n.removeReaction(a,i),s=(0,y.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,E.Q)({promise:o,fallbackError:s}))}),(0,T.nF)((e,r)=>{let n=e.getState(),{reactionsApi:a,id:i,emoji:o}=r,s=a.addReaction(i,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,y.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))});let j=(0,T.nF)((e,r)=>{let{reactionsApi:n,id:a}=r,{emoji:i}=r,o=e.getState();(0,p.uD)(i)&&null!==(0,p.$f)()&&(i=(0,p.Kh)(i)[0]+(0,p.$f)());let s=n.toggleReaction(a,i,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,y.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))}),Y=(0,T.nF)((e,r)=>{let n;let{comment:a}=r,{key:i,id:o,uuid:s,parent_id:l}=a,c=f.Ay.del(`/api/file/${i}/comments/${o}`),u=(0,y.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,E.Q)({promise:c,fallbackError:u})),S.O.remove(o),n=s?(0,m.WB)().optimisticallyDeleteWithUUID({Comment:{[s]:null}},c):(0,m.WB)().optimisticallyDelete({Comment:{[o]:null}},c),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!s}),(0,_.f)(n,e.dispatch,eW({comment:{id:o,parent_id:l}}))}),$=(0,T.nF)((e,{thread:{key:r,id:n,uuid:a},resolved:i})=>{let l=e.getState();if(i&&l.comments.activeThread?.id===n&&!l.comments.showResolved&&e.dispatch(eo()),i&&s.zl.set(k.R,!1),(0,o.k)().comments_undo_resolve&&i){let i={text:(0,y.t)("comments.undo"),action:()=>{e.dispatch($({thread:{key:r,id:n,uuid:a},resolved:!1}))}};e.dispatch(v.F.enqueue({message:(0,y.t)("comments.comment_resolved"),type:"comment-resolved",button:i,onDismiss:()=>{}}))}S.O.remove(n);let c=i?"true":"false",p=i?(0,y.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,y.t)("comments.an_error_occurred_while_unresolving_this_comment");if(a&&(0,u.L4)(n)){let n=(0,m.WB)().getIdFromUuid("Comment",a).then(n=>{let a=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});return e.dispatch((0,E.Q)({promise:a,fallbackError:p})),a});(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},n),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});e.dispatch((0,E.Q)({promise:o,fallbackError:p})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:i?new Date:null}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:i?new Date:null}}},o),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!a})}}),q=(0,T.nF)((e,{thread:{key:r,id:n,uuid:a},clientMeta:i})=>{let o;a&&(0,u.L4)(n)?(o=(0,m.WB)().getIdFromUuid("Comment",a).then(e=>f.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:i})),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=f.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:i}),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!a}));let s=(0,y.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,E.Q)({promise:o,fallbackError:s})),a?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:i.x,y:i.y,pageId:void 0===i.page_id?null:i.page_id,nodeId:void 0===i.node_id?null:i.node_id,nodeOffset:void 0===i.node_offset?null:i.node_offset,inFrame:void 0===i.in_frame?null:i.in_frame,selectionBoxAnchor:i.selection_box_anchor?i.selection_box_anchor:null,stablePath:i.stable_path?i.stable_path:null}}}},o)}),X=(0,c.NC)("COMMENTS_SET_COMMENT_CONTENT"),J=(0,T.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,u.I)(r.messageMeta)){e.dispatch(X());return}let a=(0,u.cs)(r.messageMeta),i=f.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,O.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:a}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,y.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,E.Q)({promise:i,fallbackError:o}));let s=r.comment.uuid,l=(0,u.Rc)(r.messageMeta);if(s?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[s]:{uuid:s,messageMeta:l,messageMetaStylized:l}}},i):(0,m.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:l,messageMetaStylized:l}}},i),(0,d.trackEvent)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!s}),r.attachmentUpdates){let e=(0,w.LO)(r.attachmentUpdates.deleted);e?(0,m.WB)().optimisticallyDelete({CommentAttachment:e},i):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_delete"});let n=(0,w.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);n?(0,m.WB)().optimisticallyCreate({CommentAttachment:n},i):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_create"})}e.dispatch(X())}),Z=(0,T.nF)(async(e,r)=>{let n=e.dispatch(Q(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let s=e.getState(),l=o.client_meta?.node_id,c=o.client_meta?.stable_path?o.client_meta.stable_path:i.EP;!c&&l&&(c=[l]);let u=r.thread.id,p=r.source;o.client_meta?.page_id&&"communityHub"===s.selectedView.view&&(u!==s.selectedView.commentThreadId&&e.dispatch(I.$T({...s.selectedView,commentThreadId:u})),s.selectedView.commentThreadId&&(0,d.trackEvent)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(ef({threadId:u,source:p})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(K({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,d.trackEvent)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===s.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:`[${c.join(",")}]`})}),Q=(0,T.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(eo()))return null;n=e.getState();let{thread:i,viewport:o,config:s,navigate:c,isOrphanedComment:d}=r,{setCurrentPageIdAsync:u,pageIdForNodeId:p}=o;if(!o.getViewportInfo())return null;let m=i.comments[0];if(!m)return null;let _=m.client_meta?.node_id,h=i.page||_&&p(_)||m.client_meta?.page_id,g=[],f=n.mirror?.appModel?.currentPage,E=!1;h&&(E=f!==h,g.push(u(h).then(async()=>{E&&await (0,l.yQ)()})));let y=n.mirror.appModel.currentTool===a.NLJ.COMMENTS;if(!d&&s.repositionViewportOnCommentSelection){let e=c((0,C.E)(i,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&g.push(e)}return Promise.all(g).then()}),ee=(0,T.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(eo()):(r.skipDeactivatingExistingActiveComment||e.dispatch(eo()),(0,u.H3)(n.comments)&&(e.dispatch(Z(r)),s.zl.set(R.m,null)))}),et=(0,c.NC)("COMMENTS_STOP_EDITING"),er=(0,c.NC)("COMMENTS_SUBMIT_REPLY"),en=(0,T.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:i,commentsConfiguration:s}=r,l=n.comments.threads[r.threadId],[c,d]=i.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:l.reply.messageMeta,attachments:Object.values(l.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eV({commentUuid:r.uuid})),e.dispatch(ex({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),c.then(r=>{if(!r)return;let{data:i}=r;if(i.message?.warning_message&&0!==i.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:i.message.warning_message})),i.message&&i.message.is_new_file_follower){let r=s.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(eo()),r.mirror.appModel.showUi||N.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&N.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{(0,D.h)()})}}:void 0;e.dispatch(v.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let l=i.meta;e.dispatch(ej({comment:l,userInitiated:!1})),A.ds("Comment Submitted",l.key,n,{commentId:l.id,parentCommentId:l.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,o.k)().comments_faster_saving_ux_v2&&l.id&&l.uuid&&e.dispatch(ez({commentId:l.id,commentUuid:l.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(B.b({has_created_comment:!0}))}).catch(n=>{let a=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===a||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let a=(0,b.J)(n,(0,y.t)("comments.an_error_occurred"));e.dispatch(E.s.error(a)),e.dispatch(eR({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(ex({threadId:r.threadId,reply:l.reply}));return}r.onCommentValidationFailure(a.users_without_view,a.ext_users_without_view,a.uninvitable_users,{threadId:r.threadId,messageMeta:l.reply.messageMeta,attachments:l.reply.attachments})}).finally(()=>{(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eH({commentUuid:r.uuid}))}),e.dispatch(er(r))}),ea=(0,c.NC)("COMMENTS_SUBMIT_NEW_COMMENT"),ei=(0,T.nF)((e,r)=>{(0,d.trackEvent)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),i=(0,L.U2)(n.selectedView);if(!i)return Promise.resolve();let l=r.newCommentState||n.comments.newComment,{canvasPosition:c,nodeId:u,nodeOffset:p,inFrame:m,pageId:_,viewport:h,stablePath:g}=r.destination,f=l.selectionBoxAnchor?l.selectionBoxAnchor:void 0;e.dispatch(eo({force:!0})),e.dispatch(eO({resetStatusOnly:!1}));let{messageMeta:E,attachments:T}=l;(0,d.trackEvent)("New comment creating promise",{uuid:r.uuid});let[I,S]=r.commentsWriteApi.create({fileKey:i,messageMeta:E,attachments:Object.values(T),pageId:_,uuid:r.uuid,clientMeta:{x:c.x,y:c.y,node_id:u,node_offset:p,page_id:_,viewport:h,in_frame:m,selection_box_anchor:f,stable_path:g}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,a)=>{if(await H(l.messageMeta,e.dispatch,r,n,a))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eO({resetStatusOnly:!0}));let r={text:(0,y.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===O.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(ew()),e.dispatch(v.F.update({id:n,message:(0,y.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(eL(l)),e.dispatch(el())}};e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,error:!1,message:(0,y.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(eL(l)),e.dispatch(el()),e.dispatch(ew())}});return(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eV({commentUuid:r.uuid})),e.dispatch(ea(r)),I.then(m=>{if((0,d.trackEvent)("New comment promise resolved",{uuid:r.uuid}),!m)return;let{data:h}=m;if((0,L.U2)(e.getState().selectedView)!==i)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(eo({force:!0})),r.mirror.appModel.showUi||N.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&N.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{(0,D.h)()})}}:void 0;e.dispatch(v.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let f=h.meta;s.zl.set(P.WE,f.id);let E=e.getState().comments.newComment!==l;e.dispatch(eO({resetStatusOnly:E})),(0,o.k)().comments_faster_saving_ux_v2&&f.id&&f.uuid&&e.dispatch(ez({commentId:f.id,commentUuid:f.uuid})),A.ds("Comment Submitted",i,n,{commentId:f.id,locationX:c&&c.x,locationY:c&&c.y,nodeId:u,pageId:_,nodeOffsetX:p&&p.x,nodeOffsetY:p&&p.y,selectedView:n.selectedView.view,stablePath:g,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(B.b({has_created_comment:!0})),e.dispatch((0,x.zq)({lastCreatedCommentId:f.id}))}).catch(n=>{if(e.dispatch(eO({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,message:(0,y.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,y.t)("comments.retry"),action(){(0,d.trackEvent)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(ei({...r,newCommentState:l}))}}}));{let r=(0,b.J)(n);if(r)return e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,message:r,error:!0}))}}).finally(()=>{(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eH({commentUuid:r.uuid}))})}),eo=(0,T.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:l}=n.comments,c=n.comments.activeThread?.id,d=(0,u.Kx)(l.messageMeta)&&0===Object.keys(l.attachments).length;if(!o&&!d&&!(0,u.H3)(n.comments))return e.dispatch(ew()),!1;let p=c&&n.comments.threads[c],m=p&&(0,u.Kx)(p.reply.messageMeta)&&0===Object.keys(p.reply.attachments||{}).length;if(!o&&c&&p&&!m&&(!p.discardAttempts||p.discardAttempts<1))return e.dispatch(eS(c)),!1;let _=n.comments.editingComment;return!o&&_?(e.dispatch(eS(_.id)),!1):("fullscreen"===n.selectedView.view&&a.glU.setActiveCommentAnchorData({stablePath:i.x7}),"communityHub"===n.selectedView.view&&e.dispatch(I.$T({...n.selectedView,commentThreadId:void 0})),s.zl.set(k.R,!1),e.dispatch(eY()),e.dispatch(e$()),e.dispatch(eO({resetStatusOnly:!1})),n.tooltip&&e.dispatch(U.jD()),!0)}),es=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),el=(0,T.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:i}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?a.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,i))}else a.glU.setActiveCommentAnchorData({stablePath:i.x7})}e.dispatch(es(r))}),ec=(0,c.NC)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),ed=(0,T.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(B.b({has_created_selection_comment:!0})),e.dispatch(ec(r))}),eu=(0,c.NC)("COMMENTS_SET_NEW_ANCHOR_POSITION"),ep=(0,T.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;a.glU.setActiveCommentAnchorData(a.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(eu(r))}),em=(0,c.NC)("COMMENTS_REMOVE_HOVERED_PIN"),e_=(0,c.NC)("COMMENTS_ADD_HOVERED_PIN"),eh=(0,c.NC)("COMMENTS_REMOVE_EMPHASIZED_PIN"),eg=(0,c.NC)("COMMENTS_ADD_EMPHASIZED_PIN"),ef=(0,c.NC)("COMMENTS_SET_ACTIVE"),eE=(0,T.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,d.trackEvent)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),ey=(0,c.NC)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),eb=(0,c.NC)("COMMENTS_SET_TYPEAHEAD"),ev=(0,c.NC)("COMMENTS_SHOW_EMOJI_PICKER"),eT=(0,c.NC)("COMMENTS_SET_ACTIVE_SORT"),eI=(0,c.NC)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),eS=(0,T.nF)((e,r)=>{let n=e.getState().comments,a=n.activeThread?.id,i=a&&n.threads[a];if(i&&i.discardAttempts===u.B2){let e=(0,u._Z)(i.reply.messageMeta),r=(0,u.Kx)(i.reply.messageMeta);(0,g.Lo)("Comment discard active thread attempt","comment info",{threadId:a,messageLength:e.length,isMessageDiscardable:r}),(0,h.kF)("isMessageDiscardable",String(r)),(0,h.kF)("messageType","reply"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eI(r))}),eA=(0,c.NC)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),ew=(0,T.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===u.B2){let e=(0,u._Z)(r.messageMeta),n=(0,u.Kx)(r.messageMeta);(0,g.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,h.kF)("isMessageDiscardable",String(n)),(0,h.kF)("messageType","new"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eA())}),eC=(0,c.NC)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),eN=(0,c.NC)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),eL=(0,c.NC)("COMMENTS_REVERT_NEW_COMMENT"),eO=(0,c.NC)("COMMENTS_RESET_NEW_COMMENT"),eR=(0,c.NC)("COMMENTS_RESET_THREAD"),eP=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eD=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),ek=(0,c.NC)("COMMENTS_SET_NEW_COMMENT"),eM=(0,c.NC)("COMMENTS_SET_REPLY_ATTACHMENT"),eF=(0,c.NC)("COMMENTS_SET_REPLY_MESSAGE"),ex=(0,c.NC)("COMMENTS_SET_REPLY"),eU=(0,c.NC)("COMMENTS_SET_EDITING_ATTACHMENT"),eB=(0,c.NC)("COMMENTS_SET_EDITING"),eG=(0,c.NC)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),eV=(0,c.NC)("COMMENTS_SET_SAVING"),eH=(0,c.NC)("COMMENTS_CLEAR_SAVING"),ez=(0,c.NC)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eK=(0,c.NC)("COMMENTS_CLEAR_LG_PENDING_UUID"),eW=(0,c.NC)("COMMENTS_DEL"),ej=(0,T.nF)((e,r)=>{let n=e.dispatch,a=e.getState(),{comment:i}=r;if(a.user&&a.user.id===i.user_id&&!r.userInitiated){if(i.parent_id){let e=a.comments.threads[i.parent_id];if(e&&e.state===O.EB.BUSY){let a=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let a=e[n],i=r[n],o=new Set(Object.keys(a)),s=Object.keys(i);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&a[e]===i[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eR({threadId:i.parent_id,resetStatusOnly:a}))}}else{let e=a.comments.newComment;e&&e.state===O.EB.BUSY&&n(eo({force:!0})),n(eO({resetStatusOnly:!1}))}}}),eY=(0,c.NC)("COMMENTS_RESET"),e$=(0,c.NC)("COMMENTS_RESET_ACTIVE_ID")},966936:(e,r,n)=>{n.d(r,{Ad:()=>U,Ch:()=>P,Dg:()=>M,Hx:()=>K,LO:()=>j,RS:()=>F,Rx:()=>x,X2:()=>ei,Zj:()=>V,_8:()=>Y,_F:()=>z,aP:()=>Q,cO:()=>B,cR:()=>k,d6:()=>eo,dL:()=>q,dv:()=>er,e6:()=>en,eg:()=>ea,gT:()=>X,h1:()=>Z,ig:()=>H,oB:()=>ee,qo:()=>$,r1:()=>G,rO:()=>D,vQ:()=>J});var a=n(60074),i=n(989232),o=n(200576),s=n(527546),l=n(304756),c=n(314979),d=n(967688),u=n(210853),p=n(805739),m=n(952039),_=n(809543),h=n(318717),g=n(151223),f=n(847461),E=n(453370),y=n(422444),b=n(217035),v=n(179388),T=n(175528),I=n(913026),S=n(280255),A=n(10096),w=n(411910),C=n(302982),N=n(324747),L=n(376132),O=n(229511),R=n(415832);let P=(0,a.NC)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),D=(0,a.NC)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),k=p.cR,M=(0,g.nF)((e,r)=>{let n;let{user:a,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:c,authedProfilesById:u,selectedView:p,currentUserOrgId:_}=e.getState(),g=r.profileId?u[r.profileId]:null,f=r.view?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,h.Gu)()};if(!g){e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(E.$T(f));return}let b=_;if(g.org_id){b=g.org_id;let e=s[g.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,S.Ay)(n.permission)>=L.jh.ADMIN)return n.user_id})}else g.team_id?(b=l[g.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=c[e];return r?.find(e=>e.team_id===g.team_id)?.user_id})):n=g.primary_user_id===a?.id?a?.id:o.orderedIds.find(e=>g.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,w.Il)(g.id),(0,i.trackEvent)("Community profile IA switched",{profileId:g.id,view:p.view}),e.dispatch(k(g)),e.dispatch(P()),n&&(n!==a?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(y._l({workspace:r,view:f}))}else e.dispatch(E.$T(f))}),F=(0,a.NC)("COMMUNITY_HUB_ADD_FOLLOW"),x=(0,a.NC)("COMMUNITY_HUB_DELETE_FOLLOW"),U=(0,a.NC)("COMMUNITY_HUB_SAVE_PAGE_STATE"),B=(0,a.NC)("COMMUNITY_HUB_RESET_COMMENT_STATE"),G=(0,a.NC)("COMMUNITY_HUB_SET_COMMENTS"),V=(0,a.NC)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),H=(0,a.NC)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),z=(0,a.NC)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),K=(0,a.NC)("COMMENTS_INSERT_COMMUNITY_MENTION"),W=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,g.nF)((e,r)=>{if(!(0,s.u9)(r))return;let n=`/api/${(0,I.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==C.hm&&!r.pagination?.selected_comment&&(n=W(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===N.Qv.ME&&(n=W(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=W(n,"include_total_count=true"))),(0,s.En)(n,r.pageSizeOverride??s.vs,r,s.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:a,authorsById:i,feed:o}=(0,I.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:a,authorsById:i,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(c.s.error((0,d.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let j=(0,a.NC)("COMMUNITY_HUB_RESTRICT_PROFILE"),Y=(0,g.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{l.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(j({profileId:r,blockedProfileId:n,onSuccess:a}))}),$=(0,a.NC)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),q=(0,g.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:a})=>{l.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{a&&a()}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch($({profileId:r,blockedProfileId:n,onSuccess:a}))}),X=(0,a.NC)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,g.nF)((e,r)=>{let{id:n,type:a}=r;(n!==e.getState().communityHub.comments.id||a!==e.getState().communityHub.comments.type)&&e.dispatch(B()),e.dispatch(G(r)),e.dispatch(X(r))}),(0,g.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:a})=>{let i=O.s.getProfile({profileId:r});(0,A.N)(i,e,a),i.then(({data:r})=>{e.dispatch(R.Oo(r.meta.profile)),e.dispatch(E.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(c.s.error((0,d.t)("community.actions.error_fetching_profile_information"))),null))}),(0,g.nF)((e,{handle:r,on404Redirect:n},{loadingKey:a})=>{let i=e.getState().currentUserOrgId,o=O.s.getHandle({currentOrgId:i||void 0,handle:r});(0,A.N)(o,e,a),o.then(({data:r})=>{e.dispatch(R.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(c.s.error((0,d.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let J=(0,g.nF)((e,r,{loadingKey:n})=>{let{website:a,description:i,location:o,profileHandle:s,onSuccess:d,userId:p,teamId:m,orgId:_}=r,h=l.Ay.post("/api/profile",{website:a,description:i,location:o,profile_handle:s,primary_user_id:p,team_id:m,org_id:_});(0,A.N)(h,e,n),h.then(({data:r})=>{e.dispatch(R.HZ(r.meta)),e.dispatch(R.Oo(r.meta));let{currentUserOrgId:n,orgById:a}=e.getState(),i=n&&a[n];n&&i&&n===_&&e.dispatch(v.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),d&&d(e)}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(c.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),Z=(0,g.nF)((e,r)=>{l.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(R.HZ(n.meta)),e.dispatch(R.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(c.s.error(r.message))})}),Q=(0,g.nF)((e,r,{loadingKey:n})=>{let{website:a,twitter:i,instagram:o,pronouns:s,description:p,location:h,profileId:g,profileHandle:f,onSuccess:y}=r,b=e.getState().communityHub.currentProfile;if(g===b?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in b&&b[e]===r))return;let T=i?.trim(),S=o?.trim();if(T&&b?.twitter!==T&&!_.HD.test(T)){e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.your_twitter_handle_is_not_valid",{handle:T}),error:!0}));return}if(S&&b?.instagram!==S&&!_.Co.test(S)){e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.your_instagram_handle_is_not_valid",{handle:S}),error:!0}));return}let w=l.Ay.put(`/api/profile/${g}`,{website:a,twitter:T,instagram:S,pronouns:s,description:p,location:h,profile_handle:f});(0,A.N)(w,e,n);let C=e.getState().user?.community_profile_handle;w.then(({data:n})=>{let{communityHub:a,currentUserOrgId:i,orgById:o}=e.getState();a.currentProfile?.id===n.meta.id&&e.dispatch(R.Oo(n.meta));let s=o[i];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(v.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),f){let r=e.getState().selectedView;(0,I.Cj)(r)&&r?.handle===C&&e.dispatch(E.$T({view:"communityHub",subView:"handle",handle:f})),n.meta.primary_user_id?e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:f}),type:"profile-handle"})):n.meta.team_id?e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"team-handle"})):n.meta.org_id&&e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(a=>{if(a in n.meta&&a in r){let r={twitter:(0,d.t)("community.actions.your_twitter_handle_was_updated"),location:(0,d.t)("community.actions.your_location_was_updated"),instagram:(0,d.t)("community.actions.your_instagram_handle_was_updated"),website:(0,d.t)("community.actions.your_website_url_was_updated"),description:(0,d.t)("community.actions.your_description_was_updated")};e.dispatch(m.F.enqueue({message:r[a],type:"profile-updated"}))}}),y&&y(e)}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(c.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),ee=(0,g.nF)((e,r,{loadingKey:n})=>{let{profileId:a,handle:i}=r;l.Ay.del(`/api/profile/${a}`).then(()=>{e.dispatch(R.cr(i));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===a&&e.dispatch(v.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(c.s.error((0,d.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});async function et(e,r,n){if(!r)return{cover_image_path:"",signature:""};let{cover_image_path:a,signature:i,fields:s}=(await l.Ay.post(e)).data.meta,c=new FormData;return s&&Object.entries(s).forEach(([e,r])=>c.append(e,r)),c.set("content-type",n.type),c.append("file",n),await (0,o.yr)(a,c),{cover_image_path:a,signature:i}}(0,g.nF)(async(e,{file:r,profileId:n,onSuccessCallback:a},{loadingKey:i})=>{let o=(0,T.c)(r).then(e=>et(`/api/profile/${n}/upload`,e,r));(0,A.N)(o,e,i),await o.then(({signature:e})=>l.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(R.Oo(r.meta)),a()}).catch(r=>{e.dispatch(c.s.error(r?(0,d.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,d.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let er=(0,a.NC)("COMMUNTY_HUB_FOLLOW_ENTITY"),en=(0,g.nF)(async(e,r,{loadingKey:n})=>{let a=l.Ay.put("/api/follows",{followed_profile_id:r});(0,A.N)(a,e,n),await a.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(F({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(er(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),ea=(0,a.NC)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),ei=(0,g.nF)((e,r,{loadingKey:n})=>{let a=l.Ay.del("/api/follows",{followed_profile_id:r});(0,A.N)(a,e,n),a.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(x({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(m.F.enqueue({message:(0,d.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,u.J)(r);n&&e.dispatch(m.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(ea(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function eo(e){return{updateStatus:(0,a.NC)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,a.NC)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,a.NC)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,a.NC)(`${e}_CLEAR_PUBLISHING`)}}(0,g.nF)(async(e,r)=>{let n;let{thread:a,resolved:i}=r,o=e.getState();i&&o.comments.activeThread?.id===a.id&&!o.comments.showResolved&&e.dispatch(f.UU()),n=i?l.Ay.put(`/api/community_comments/${a.id}/resolve`):l.Ay.put(`/api/community_comments/${a.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(b.kE({comment:{id:a.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(m.F.enqueue({error:!0,message:i?(0,d.t)("community.actions.failed_to_resolve_comment"):(0,d.t)("community.actions.failed_to_unresolve_comment")}))})})},441208:(e,r,n)=>{n.d(r,{In:()=>d,fI:()=>c});var a=n(160769),i=n(677334),o=n(720722),s=n(602615),l=n(289903);i.M4.Query({fetch:async e=>{try{let{components:r,state_groups:n}=(await s.f.getPublishedComponents({hubFileId:e})).data.meta;return{components:r,state_groups:n}}catch{return{components:[],state_groups:[]}}},output:({data:e})=>(0,l.Tf)(e.components,e.state_groups)}),i.M4.Query({fetch:async({hubFileId:e})=>(await s.f.getLibraryStyles({hubFileId:e})).data.meta.styles??[],output:({data:e})=>e.map(a.aV)});let c=i.M4.Query({fetch:async()=>(await s.f.getCommunityLibraries()).data.meta,output:({data:e})=>e.map(u)}),d=i.M4.Query({fetch:async()=>(await s.f.getCommunityLibrariesVisualAssets()).data.meta,output:({data:e})=>e.map(u)});function u(e){return{...e,type:o.PP,num_state_groups:0}}},148176:(e,r,n)=>{n.d(r,{M2:()=>_,Sp:()=>p,k3:()=>m});var a=n(7376),i=n(60074),o=n(810503),s=n(900003),l=n(151223),c=n(10096),d=n(463783);(0,l.nF)((e,r)=>{let{payments:n,source:i}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,p=a.TQ()?.getItem(d);if(p){let e=JSON.parse(p);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),a=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));a.length&&(0,o.x1)("community","[ActivePayments] mismatch detected",{source:i,userId:l,revoked:a,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let m=JSON.stringify(c);a.TQ()?.setItem(d,m)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let a=d.C.getBuyerActivePayments();(0,c.N)(a,e,n),a.then(({data:r})=>{e.dispatch(_(r.meta))}).catch(()=>{})});let p=(0,i.NC)("M10N_DEL_ACTIVE_USER_PAYMENT"),m=(0,i.NC)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),_=(0,i.NC)("M10N_SET_ACTIVE_USER_PAYMENTS")},772283:(e,r,n)=>{n.d(r,{wJ:()=>m});var a=n(60074),i=n(810503),o=n(331210),s=n(666771),l=n(151223),c=n(913026),d=n(10096),u=n(324747),p=n(71584);let m=(0,a.NC)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE");function _(e,r){let n=[],a=[],i=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?a.push(e):r===u.Ug.WIDGET&&i.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...a,...i],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:a})=>{let o={shelfType:r,limitShelfContent:n},s=p.A.getCommunityShelves(o);(0,d.N)(s,e,a),s.then(({data:n})=>{let a=n.meta;a.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:a}))}).catch(e=>{(0,i.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`),(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:a},{loadingKey:i})=>{let o=p.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:a});(0,d.N)(o,e,i),o.then(({data:n})=>{let a=n.meta;a.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:a}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},514019:(e,r,n)=>{n.d(r,{Af:()=>e_,D3:()=>N.D3,FO:()=>eh,L1:()=>N.L1,N4:()=>eR,QA:()=>eg,Ri:()=>em,Sb:()=>N.Sb,VS:()=>eA,ax:()=>eP,bk:()=>eN,eq:()=>eE,i9:()=>eL,oO:()=>eC,p7:()=>eb,rH:()=>eI,ts:()=>eT,wO:()=>eS,yh:()=>eD});var a=n(938982),i=n(186606),o=n(562027),s=n(19180),l=n(382902),c=n(167920),d=n(60074),u=n(989232),p=n(398612),m=n(637640),_=n(865500),h=n(615233),g=n(183603),f=n(329228),E=n(656329),y=n(998568),b=n(810503),v=n(304756),T=n(103661),I=n(314979),S=n(967688),A=n(210853),w=n(952039),C=n(775204),N=n(331210),L=n(568510),O=n(151223),R=n(966936),P=n(807949),D=n(453370),k=n(578274),M=n(31898),F=n(63443),x=n(768623),U=n(660948),B=n(530292),G=n(353231),V=n(913026),H=n(162934),z=n(94311),K=n(543177),W=n(633468),j=n(318147),Y=n(677334),$=n(509618),q=n(10096),X=n(19242),J=n(535884),Z=n(361053),Q=n(553709),ee=n(720722),et=n(475166),er=n(175957),en=n(386252),ea=n(463783),ei=n(289468),eo=n(392165),es=n(844462),el=n(385646),ec=n(658700),ed=n(770981),eu=n(415832);let ep=n(783536).ZS,em=(0,d.NC)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),e_=(0,d.NC)("UPDATE_HUB_FILE_PAGE_TITILE"),eh=(0,d.NC)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),eg=(0,d.NC)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),ef=(0,d.NC)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eE=(0,d.NC)("HUB_FILE_PUT_HUB_FILE_REMIX"),ey=e=>{let r=(0,S.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(E.rr){window.location.href="/login";return}e.dispatch(T.Ts({origin})),e.dispatch(M.to({type:es.x,data:{headerText:r}}))},eb=(0,O.nF)((e,r,{loadingKey:n})=>{let a=e.getState();if(!a.user){ey(e);return}let i={headers:{...v.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=v.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},i);(0,q.N)(o,e,n),o.then(({data:n})=>{let i=n.meta;(0,u.trackEvent)(U.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:i.key,searchSessionId:(0,C.wr)(a)}),"whiteboard"===i.editor_type&&e.dispatch(F.Hx({storeInRecentsKey:et.$A.FigJam,id:r.hubFileId,type:et.vt.CommunityResource}));let o=(0,W.to)(i);o=(0,p.dR)(o,{[K.pt.KEY]:K.pt.VALUE,fuid:r.workspace.userId}),m.Ay.redirect(o,E.rr?void 0:"_blank"),e.dispatch(D.oB())}).catch(r=>{e.dispatch(w.F.enqueue({error:!0,message:(0,S.t)("community.actions.failed_to_duplicate_file_error",{error:(0,A.J)(r,(0,S.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),ev=(0,O.nF)((e,r)=>{let{canRetry:n=!0}=r,a=e.getState(),i=a.currentUserOrgId,o=a.currentTeamId;if(r.folderId){let n=a.folders[r.folderId]?.team_id,i=n?a.teams[n]:null,o=(0,B.N)(a.hubFiles[r.hubFileId].viewer_mode);if(i&&!(0,Z.rR)(i,{type:Z.sK.ADD_FILE,editorType:o})){e.dispatch(M.to({type:el.Y,data:{teamId:i.id,createInDrafts:()=>{e.dispatch(ev({...r,folderId:void 0}))},teamName:i.name,editorType:o,dispatch:e.dispatch,action:en.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return v.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:i,team_id:o||void 0}).then(({data:n})=>{let i=n.meta;(0,G.f5)("File Created",i,{selectedView:a.selectedView},{source:r.source}),r.callback&&r.callback(i?.key),"whiteboard"===i.editor_type&&e.dispatch(F.Hx({storeInRecentsKey:et.$A.FigJam,id:r.hubFileId,type:et.vt.CommunityResource}));let o={};r.isDrawMode&&(o={...o,isDrawMode:!0,allowDefaulting:!1});let s=(0,W.to)(i,o);m.Ay.redirect(s,r.openInNewTab&&!E.rr?"_blank":void 0)}).catch(a=>{let i={error:!0,message:(0,S.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(i.button={text:(0,S.t)("community.actions.retry"),action:()=>e.dispatch(ev({...r,canRetry:!1}))}),e.dispatch(w.F.enqueue(i))})}),eT=(0,O.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:a})=>{let i=null,o=Promise.resolve(null),s=eo.H.getVersions({id:r});o=s;try{i=(await s).data.meta}catch(e){return}(0,q.N)(o,e,a);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=i,u=d.related_content,p=d.remixed_to_metadata,m=[...u?u.content:p||[],d];c&&m.push(c),e.dispatch((0,N.Sb)({hubFiles:m,src:"getHubFileVersions"})),l&&(e.dispatch(em({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(P.yJ({file:l.file})),l.roles&&e.dispatch(x.uo({roles:l.roles}))),e.dispatch(e_({hubFileId:d.id}));let _=new Set(p?.map(e=>e.id));e.dispatch(eE({hubFileId:d.id,from:c?c.id:null,to:_})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),eI=(0,O.nF)(async(e,{fileKey:r})=>{(0,h.Ay)().user_data&&await ei.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let a=n.meta.published_as;a?.id?e.dispatch(em({hubFileId:a.id,fileKey:r})):e.dispatch(eh({fileKey:r}));let i=n.meta.remixed_from_metadata,o=n.meta.is_preview;i?.id?e.dispatch(eg({hubFileId:i.id,fileKey:r,isPreview:!!o})):e.dispatch(ef({fileKey:r}));let s=[a,i].filter(e=>!!e);s.length>0&&e.dispatch((0,N.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,s.k)().ce_new_missing_fonts_logging&&(0,z.DI)()}).catch(e=>{console.error(e)}).finally(()=>{l.zl.set(_.x,!0)})}),eS=(0,R.d6)("HUB_FILE"),{updateMetadata:eA,updateStatus:ew,clearMetadataAndStatus:eC,clearMetadata:eN}=eS,eL=(0,O.nF)((e,r)=>{let n=[],a=r.viewerMode===j.y4.SLIDE_TEMPLATE;if(a){n=(0,J.AC)(e.getState());let a=(0,J.x6)(e.getState()),i=!!r.hubFileId&&n.length>0&&(0,$.aB)(Object.values(a),new Set(n));if(!r.hubFileId&&0===n.length||i){(0,ed.Dl)(e.dispatch);return}l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(ew({id:r.fileKey,status:{code:Q.aP.UPLOADING}})),eO(e,r).then(({hubFile:n,actingProfile:a,profileCreated:i})=>(e.dispatch((0,N.Sb)({hubFiles:[n],src:"createHubFile"})),e.dispatch(em({hubFileId:n.id,fileKey:r.fileKey})),i&&(a.profile_created=i,e.dispatch(eu.HZ(a))),e.dispatch(eu.Oo(a)),e.dispatch(ew({id:r.fileKey,status:{code:Q.aP.SUCCESS}})),r.suggestedCategory&&(0,u.trackEvent)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),{hubFile:n})).then(({hubFile:n})=>{if(!a||null===ep)return;let s=(0,J.AC)(e.getState()),c=Object.values((0,J.jO)(e.getState(),ee.o.HUBFILE)).map(e=>e.node_id),d=i.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?c:s;if(d.length>0){n.library_key&&i.Ez5?.canvasGrid().updateSourceLibraryKey(o.l(n.library_key));let{onPublishSuccess:r,onPublishProgress:a,onPublishError:s}=(0,k.u)(j._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(ep({savepointDescription:"Community slide template publish",publishingMode:ee.o.HUBFILE,itemsToPublish:new Set(d),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:a,onPublishError:s}))})}else l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{a&&l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(w.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(ew({id:r.fileKey,status:{code:Q.aP.FAILURE,error:n.message}}))})});async function eO(e,r){let n;let{fileKey:o,name:s,description:l,categoryId:c,publisherIds:d,tags:u,tagsV2:p,creatorPolicy:m,thumbnailBuffer:_,viewerMode:h,scalingMode:g,authorOrgId:f,authorTeamId:E,hasCustomUploadedThumbnail:b,validPrototype:v,commentsSetting:T,agreedToTos:I,isPaid:w,price:C,supportContact:N,carouselMedia:L,customCarouselThumbnail:O}=r;if(f&&E)throw Error((0,S.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(h===j.y4.PROTOTYPE&&i.X3B.firstPagePrototypeStatus()!==i.bOM.VALID)throw Error((0,S.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let R=await (0,X.m)(o,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,y.$D)(a.e.COMMUNITY,e),Error(e.data?.message||(0,S.t)("community.actions.could_not_connect_to_the_server"))});try{n=await (0,H.R1)(_,L||[],R)}catch(e){throw(0,y.$D)(a.e.COMMUNITY,e),Error((0,S.t)("community.actions.error_uploading_images_e"))}let P=(0,H.Z2)(n?.carousel_images||[],O),D={file_version_id:R,name:s,description:l,tags:u,tags_v2:p,category_id:c,creator_policy:m,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:h,scaling_mode:g,author_org_id:f,author_team_id:E,has_custom_uploaded_thumbnail:b,valid_prototype:v,comments_setting:T,agreed_to_tos:I,is_paid:w,price:C,support_contact:N,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[P]};try{let e=await eo.H.publishHubFile(D);return{hubFile:e.data.meta.hub_file,actingProfile:e.data.meta.acting_profile,profileCreated:e.data.meta.profile_created}}catch(e){throw(0,y.$D)(a.e.COMMUNITY,e),Error((0,A.J)(e,(0,S.t)("community.actions.could_not_publish_hub_file",{error:e.message})))}}let eR=(0,O.nF)(async(e,{payload:r,onSuccess:n})=>{let i;let{hubFileId:o,name:s,description:l,categoryId:c,suggestedCategory:d,creatorPolicy:p,publisherIds:m,tags:_,tagsV2:h,viewerMode:g,scalingMode:f,commentsSetting:E,price:b,supportContact:v,carouselMedia:T,customCarouselThumbnail:C,hasCustomUploadedThumbnail:L,thumbnailBuffer:O}=r;try{i=await (0,H.R1)(O,T||[],void 0,o)}catch(r){throw(0,y.$D)(a.e.COMMUNITY,r),e.dispatch(w.F.enqueue({message:(0,S.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let R=(0,H.Z2)(i?.carousel_images||[],C),P={name:s,description:l,category_id:c,creator_policy:p,publisher_ids:m,tags:_,tags_v2:h,viewer_mode:g,scaling_mode:f,comments_setting:E,price:b,support_contact:v,carousel_images:i?.carousel_images,cover_image_carousel_image:i?.carousel_images[R],has_custom_uploaded_thumbnail:L,cover_image_uploaded:i?.cover_image.cover_image_uploaded,signature:i?.cover_image.signature};try{let r=(await eo.H.updateHubFile(o,P)).data.meta;e.dispatch((0,N.Sb)({hubFiles:[r],src:"updateHubFile"})),d&&(0,u.trackEvent)("community_category_suggestion",{resourceType:"hub_file",resourceId:r.id,categoryId:r.category_id,suggestedCategory:d},{forwardToDatadog:!0}),n?.(r)}catch(n){let r=(0,A.J)(n,(0,S.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(I.s.error(r)),(0,y.$D)(a.e.COMMUNITY,n),Error(`Error updating file ${n}`)}}),eP=(0,O.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:i,onError:o})=>{v.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,N.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&m.Ay.redirect(n),i?.()}).catch(e=>{(0,y.$D)(a.e.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eD=(0,O.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:a})=>{v.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:i})=>{e.dispatch(c.c(a));let o=i.meta,s=(0,W.to)(o);s=(0,p.dR)(s,{[K.pt.KEY]:K.pt.VALUE}),m.Ay.redirect(s,E.rr?void 0:"_blank"),(0,u.trackEvent)(U.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,C.wr)(e.getState())})}).catch(r=>{e.dispatch(c.r(a)),e.dispatch(w.F.enqueue({message:(0,S.t)("community.actions.unable_to_duplicate",{error:(0,A.J)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),ek=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,L.m)({apiResourceType:"file",id:e}),e=>{e.like_count+=1}),eo.H.likeHubFile({id:e})));(0,O.nF)((e,{hubFileId:r},{loadingKey:n})=>{let a=(0,f.Jl)(ek)({id:r});(0,q.N)(a,e,n),a.catch(r=>{e.dispatch(w.F.enqueue({message:(0,S.t)("community.actions.unable_to_like_this_file_error",{error:(0,A.J)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let i=e.getState().user,o=i&&(0,V.sD)(i,e.getState().authedProfilesById);i?.id&&o&&(0,g.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,resourceId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},a)},e=>`LIKE_HUB_FILE_${e}`);let eM=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,L.m)({apiResourceType:"file",id:e}),e=>{e.like_count-=1}),eo.H.unlikeHubFile({id:e})));(0,O.nF)((e,{hubFileId:r,likeId:n},{loadingKey:a})=>{let i=(0,f.Jl)(eM)({id:r});(0,q.N)(i,e,a),i.catch(r=>{e.dispatch(w.F.enqueue({message:(0,S.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,A.J)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,g.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},i)},e=>`UNLIKE_HUB_FILE_${e}`),(0,O.nF)((e,{hubFileId:r})=>v.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eF={};(0,O.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),a=n.user?.id;a&&((0,u.trackEvent)(U.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eF[a]?.includes(r)||await ea.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eF[a]||(eF[a]=[]),eF[a].includes(r)||eF[a].push(r)}).catch(e=>{(0,b.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))}),(0,O.nF)((e,r)=>{(r===er.G4.FULLSCREEN||r===er.G4.FULLSCREEN_WITH_COMMENTS)&&((0,u.trackEvent)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===er.G4.FULLSCREEN_WITH_COMMENTS&&(0,u.trackEvent)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===er.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(D.$T(n))})},718284:(e,r,n)=>{n.d(r,{JZ:()=>b,QF:()=>v,qR:()=>T});var a=n(989232),i=n(967688),o=n(952039),s=n(151223),l=n(490970),c=n(63443),d=n(14837),u=n(794025),p=n(20687),m=n(324747),_=n(764474),h=n(388446),g=n(102382),f=n(731889),E=n(477302);let y=(0,u.M)(),b=(0,s.nF)(async(e,{resourceType:r,localFileIdToRemove:n})=>{if(!y)return;let{added:s,existed:u}=await y.createMultipleNewLocalFileExtensions({title:(0,i.t)("community.actions.pick_extension_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0),E=s[0]??u[0];if(null!=E)try{let s=await (0,p.c2)(E,{resourceType:r,isPublishing:!1});"unknown"===r&&(r=s.containsWidget?"widget":"plugin");let u=(0,p.T)();if(u&&!s.editorType?.includes(u))throw Error((0,_.am)({type:_.ho.VALIDATE,text:`The manifest editorType does not include "${u}".`}));if((0,a.trackEvent)("Added new plugin",{how:"loaded",pluginId:s.id,version:s.api,isWidget:"widget"===r,productType:u?(0,p.Pz)(u):null,isVsCode:(0,d.T)()}),e.dispatch(v({localFileId:E,resourceType:r})),(0,l.s)({initialX:0,initialY:0,initialTab:"figjam"===u?"widget"===r?g.p.WIDGETS:g.p.PLUGINS:void 0,initialFdResourceTab:"figjam"!==u?"widget"===r?f.s.WIDGET:f.s.PLUGIN:void 0,initialFdView:"figjam"!==u?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===u,source:"extension-import"}),e.dispatch(o.F.enqueue({message:s.name?(0,i.t)("community.actions.manifest_name_has_been_imported",{manifestName:s.name}):"widget"===r?(0,i.t)("community.actions.widget_has_been_imported"):(0,i.t)("community.actions.plugin_has_been_imported")})),n){let r=e.getState().localPlugins[n],a=r?.lastKnownPluginId??r?.plugin_id??r?.manifest.id;(a===s.id||null==a)&&e.dispatch(T(n))}let y=s.editorType;y?.forEach(n=>{let a=p.Sb(n);r===m.bD.PLUGIN?e.dispatch(c.gU({storeInRecentsKey:a,id:s.id||"",version:"",isDevelopment:!0,currentUserId:h.o8()})):r===m.bD.WIDGET&&e.dispatch(c.RH({storeInRecentsKey:a,id:s.id||"",version:"",isDevelopment:!0,currentUserId:h.o8()}))})}catch(r){e.dispatch(o.F.enqueue({message:r.message,error:!0}))}}),v=(0,s.nF)(async(e,{localFileId:r,resourceType:n})=>{let a=await (0,p.t3)(r,{resourceType:n});e.dispatch((0,E.Po)(a))}),T=(0,s.nF)((e,r)=>{void 0!=r&&(y&&y.removeLocalFileExtension(r),e.dispatch((0,E.Zy)(r)))})},120094:(e,r,n)=>{n.d(r,{C:()=>m});var a=n(183603),i=n(304756),o=n(967688),s=n(210853),l=n(952039),c=n(151223),d=n(913026),u=n(10096),p=n(324747);let m=(0,c.nF)((e,{id:r,resourceType:n},{loadingKey:c})=>{let m=i.Ay.post(`/api/${(0,d.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,u.N)(m,e,c),m.catch(r=>{e.dispatch(l.F.enqueue({message:n===p.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,s.J)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,s.J)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let _=e.getState().user,h=_&&(0,d.sD)(_,e.getState().authedProfilesById);_?.id&&h&&(0,a.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${h.id}`]:{pluginId:r,hubFileId:null,resourceId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,c.nF)((e,{id:r,resourceType:n,likeId:s},{loadingKey:c})=>{let m=i.Ay.del(`/api/${(0,d.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,u.N)(m,e,c),m.catch(r=>{e.dispatch(l.F.enqueue({message:n===p.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&s&&(0,a.WB)().optimisticallyDelete({CommunityHubLike:{[s]:null}},m)})},477302:(e,r,n)=>{n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>v});var a=n(559389),i=n(60074),o=n(314979),s=n(151223),l=n(609458),c=n(794025),d=n(407638),u=n(20687),p=n(578461),m=n(680136),_=n(452011),h=n(764474),g=n(650379),f=n(299176),E=n(566726);let y=(0,i.NC)("PLUGIN_INITIALIZE_LOCAL"),b=(0,i.NC)("PLUGIN_UPDATE_LOCAL"),v=(0,i.NC)("PLUGIN_DELETE_LOCAL"),T=!1,I=(0,c.M)();(0,s.nF)(async e=>{if(I){if(I.isCompatibleWith({desktopVersion:59})){let r=await I.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",i[e.localFileId]=e}),e.dispatch(y(i))}else if(I.isCompatibleWith({desktopVersion:58})){let r=await I.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),a=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};a.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],i[e.localFileId]=e}),e.dispatch(y(i))}else{let r=await I.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};n.forEach(e=>{a[e.localFileId]=e}),e.dispatch(y(a))}if(!T){T=!0,I.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let a=r.id,i=(0,u.mm)(a,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[a]?.plugin_id;e.dispatch(b(i));let l=e.getState(),{publishingPlugins:c,localPlugins:p,publishedPlugins:m,publishedWidgets:_,currentUserOrgId:h,authedProfilesById:g,modalShown:y}=l,v=c[a];i.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:a}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:h,localPlugins:p,publishedPlugins:m,publishedWidgets:_,authedProfilesById:g},a)}catch(r){e.dispatch(o.s.error(r.message));return}v&&v.metadata&&(0,u.L1)(v.metadata)&&!i.error&&e.dispatch((0,E.fy)({id:a,metadata:n}))}else"removed"===r.type&&e.dispatch(v(r.id))});let r=(0,a.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let a=p.SH()?.plugin,i=p.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&a&&(0,h.ZQ)(a)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===a.localFileId&&(0,m.hM)()&&(async()=>{await (0,_.wY)(),"codegen"!==i&&(0,m.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});I.registerCodeChangeObserver(r),I.registerManifestChangeObserver(r),I.registerUiChangeObserver(r)}}})},566726:(e,r,n)=>{n.d(r,{$Z:()=>W,Cf:()=>q,Dl:()=>ei,GV:()=>f.GV,Ij:()=>en,KJ:()=>ee,L4:()=>x,LP:()=>X,O8:()=>$,Qi:()=>f.Qi,R8:()=>el,Vp:()=>eo,Vx:()=>f.Vx,W9:()=>j,a8:()=>J,b6:()=>V,et:()=>ec,f1:()=>Y,fd:()=>G,fs:()=>z,fy:()=>et,gD:()=>er,l5:()=>f.l5,l7:()=>f.l7,n1:()=>ep,pm:()=>ea,se:()=>B,uF:()=>U,uT:()=>eu,uV:()=>f.uV,uX:()=>H,uw:()=>K,wx:()=>ed,zn:()=>es});var a=n(938982),i=n(19180),o=n(60074),s=n(989232),l=n(476254),c=n(625358),d=n(998568),u=n(304756),p=n(314979),m=n(967688),_=n(210853),h=n(952039),g=n(809543),f=n(666771),E=n(823898),y=n(151223),b=n(966936),v=n(415832),T=n(35597),I=n(175528),S=n(162934),A=n(677334),w=n(407638),C=n(767203),N=n(20687),L=n(10096),O=n(324747),R=n(553709),P=n(768279),D=n(946322),k=n(540539),M=n(83911),F=n(255063);let x=(0,o.NC)("PLUGIN_REPLACE_FEATURED"),U=(0,y.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let a=D.V.getPlugins(),i=k.U.getWidgets();a.then(({data:r})=>{let n=r.meta;e.dispatch((0,f.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),i.then(({data:r})=>{let n=r.meta;e.dispatch((0,f.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,L.N)(i,e,n)}),B=A.M4.Query({fetch:async e=>(await D.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),G=A.M4.Query({fetch:async e=>(await k.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=(0,y.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:a}=e.getState();for(let[e,i]of Object.entries(r))i.forEach(i=>{let o=n[e]?.[i];o&&new Set(r[e]).forEach(e=>{C.F.getAndCache({...o,id:e},a??void 0)})})}),H=(0,y.nF)(async(e,{resourceId:r,resourceType:n})=>{let a=n===O.bD.WIDGET?k.U.getWidgets({id:r}):D.V.getPlugins({id:r}),{data:i}=await a,o=i.meta.find(e=>e.id===r);o&&e.dispatch((0,f.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),z=(0,o.NC)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),K=(0,o.NC)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function W(e,r,n){let a=await j({[e]:[r]},n);return a[e]?.[r]}async function j(e,r){let n=l.D.getState(),a=n.openFile?.key,i=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:a}),o=i?.data?.meta||{};return l.D.dispatch(z(o)),l.D.dispatch(K(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let Y=(0,y.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await D.V.postPluginsBatch(i,n),r=e.data?.meta??[];l.D.dispatch((0,f.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),$=(0,y.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:a}=e.getState(),i=r.filter(e=>!a[e]);if(i.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:i,org_id:n}),r=e.data?.meta??[];l.D.dispatch((0,f.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),q=(0,y.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),a=[],i={};r.forEach(({widgetID:e,widgetVersionID:r})=>{i[e]?i[e].includes(r)||i[e].push(r):(a.push(e),i[e]=[r])}),0!==a.length&&(await j(i,n),e.dispatch(V({widgetIDToVersions:i})),e.dispatch($({widgetIds:Object.keys(i)})))});(0,y.nF)((e,r,{loadingKey:n})=>{let a=D.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,F.UM)(r.profileId);return(0,L.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,y.nF)((e,r,{loadingKey:n})=>{let a=k.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,F.Jr)(r.profileId);return(0,L.N)(a,e,n),a.then(async({data:r})=>{let n=[...await i,...r.meta];return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let X=(0,y.nF)((e,r,{loadingKey:n})=>{let a=D.V.getOrg({orgId:r});return(0,L.N)(a,e,n),a.then(({data:r})=>{let n=r.meta;return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),J=(0,y.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(T.Cx({key:n}));let a=await k.U.getOrg({orgId:r}),i=a?.data?.meta||[];return e.dispatch((0,f.Qi)({publishedPlugins:i,src:"getOrgPublishedWidgets"})),e.dispatch(T.x2({key:n})),i}catch(r){return p.s.flash(r.message||(0,m.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(T.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function Z(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,m.t)("community.actions.resource_is_invalid"));let i=0;r.iconBlob&&(i=(0,N.wf)(r.iconBlob));let o=0;r.coverBlob&&(o=(0,N.oD)(r.coverBlob));let l=r.carouselMedia,{uploadImages:c,uploadVideos:p,allMedia:h}=(0,S.Kg)(l),f=await P.w.postPluginImagesUpload(e.id,e.is_widget,c),E=Promise.resolve(!1),y=r.iconBlob;void 0!==y&&(E=(0,I.c)(y).then(e=>(0,S.Ac)(f.iconUploadUrl,y,e)).then(()=>!0).catch(r=>{(0,d.$D)(a.e.COMMUNITY,r);let n=(0,_.J)(r,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,O.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let b=Promise.resolve(!1),v=r.coverBlob;void 0!==v&&(b=(0,I.c)(v).then(e=>(0,S.Ac)(f.coverImageUploadUrl,v,e)).then(()=>!0).catch(r=>{throw(0,d.$D)(a.e.COMMUNITY,r),Error((0,O.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,_.J)(r,r.data?.message||"unknown error")}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,_.J)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:T}=r,A=Promise.resolve(!1);void 0!==T&&(A=(0,I.c)(T).then(e=>{if(!f.snapshotUploadUrl)throw Error("Snapshot upload url is missing");return(0,S.Ac)(f.snapshotUploadUrl,T,e)}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}));let w=(0,S.Rd)(f.carouselImages,l),[C,L,R]=await Promise.all([E,b,A,...w]),D=p.map(r=>(0,S.Gf)((0,g.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{h.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}));await Promise.all(D);let{data:k}=await u.Ay.put(`/api/${(0,g.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:C,cover_image_uploaded:L,snapshot_uploaded:R,carousel_media:h,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:f.imageUploadNonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}),M=k.meta,F=M.plugin;if(F.id!==e.id)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,s.trackEvent)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:i,coverFileSize:o}),{publishedPlugin:F,profile:M.profile}}async function Q(e,r,n,i,o,l,c,p,h,f,E){let y;if(!e)throw Error((0,m.t)("community.actions.plugin_id_is_invalid"));let[b,v]=await Promise.all([(0,N.c2)(r,{resourceType:(0,g.nF)(f),isPublishing:!0}),(0,N.MB)(r)]),T=(0,N.ZT)(v),A=0;n.iconBlob&&(A=(0,N.wf)(n.iconBlob));let w=0;n.coverBlob&&(w=(0,N.oD)(n.coverBlob));let C=n.carouselMedia,{uploadImages:L,uploadVideos:O,allMedia:R}=(0,S.Kg)(C),D={manifest:b,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:l,tags_v2:c,category_id:o,images_sha1:L};try{y=await P.w.postPluginUpload(D,e,f)}catch(e){throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,_.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server")))}let{codeUploadUrl:k,iconUploadUrl:M,coverImageUploadUrl:F,snapshotUploadUrl:x,signature:U,versionId:B,imageUploadNonce:G,carouselImages:V}=y,H=Promise.resolve(!1);v&&(H=eu(k,v).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=ep(e)??(0,_.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(f?(0,m.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let z=Promise.resolve(!1),K=n.iconBlob;null!=K&&(z=(0,I.c)(K).then(e=>(0,S.Ac)(M,K,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=ep(e)??(0,_.J)(e,e.data?.message||"unknown error");throw Error(f?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let W=Promise.resolve(!1),j=n.coverBlob;null!=j&&(W=(0,I.c)(j).then(e=>(0,S.Ac)(F,j,e)).then(()=>!0).catch(e=>{(0,d.$D)(a.e.COMMUNITY,e);let r=ep(e)??(0,_.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(f?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:Y}=n,$=Promise.resolve(!1);null!=Y&&x&&($=(0,I.c)(Y).then(e=>(0,S.Ac)(x,Y,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:ep(e)??(0,_.J)(e,e.data?.message||"unknown error")}))}));let q=(0,S.Rd)(V,C),[X,J,Z,Q]=await Promise.all([H,z,W,$,...q]),ee=O.map(async r=>{try{let n=await (0,S.Gf)(f?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1);return R.push({carousel_position:r.carousel_position,sha1:n.sha1,video_file_uuid:n.videoFileUuid,video_thumbnail_sha1:n.videoThumbnailSha1}),!0}catch(e){throw(0,d.$D)(a.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}});await Promise.all(ee);let{data:et}=await u.Ay.put(`/api/${(0,g.nF)(!!f,{pluralized:!0})}/${e}/versions/${B}`,{icon_uploaded:J,cover_image_uploaded:Z,snapshot_uploaded:Q,carousel_media:R,code_uploaded:X,comments_setting:i,category_id:o,signature:U,image_upload_nonce:G,agreed_to_tos:p,org_id:h,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:E}).catch(e=>{throw(0,d.$D)(a.e.COMMUNITY,e),Error(f?(0,m.t)("community.actions.error_finalizing_widget_error",{error:(0,_.J)(e,e.data?.message||"")}):(0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,_.J)(e,e.data?.message||"")}))}),er=et.meta,en=er.plugin;if(en.id!==e)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,s.trackEvent)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!b.ui,apiVersion:b.api,codeLength:T,iconFileSize:A,coverFileSize:w,isWidget:f,editorType:b.editorType?.sort().join(", ")}),{publishedPlugin:en,profile:er.profile}}let ee=(0,b.d6)("PLUGIN"),{updateMetadata:et,updateStatus:er,clearMetadataAndStatus:en,clearMetadata:ea}=ee,ei=(0,y.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:i,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:p,orgId:g,isWidget:E,playgroundFilePublishType:y,tags:b,tagsV2:T}=r;e.dispatch(er({id:i,status:{code:R.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:a}=await Q(o,i,n,s,l,b,T,p,g,E,y);e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),a&&(e.dispatch(v.HZ(a)),e.dispatch(v.Oo(a))),e.dispatch(er({id:i,status:{code:R.aP.SUCCESS}})),e.dispatch(ea({id:i})),u()}catch(n){e.dispatch(er({id:i,status:{code:R.aP.FAILURE,error:n.message}}));let r=(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,_.J)(n,n.message)});throw n instanceof c.qW?(0,M.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(h.F.enqueue({message:r,error:!0})),(0,d.$D)(a.e.COMMUNITY,n),Error(r)}}),eo=(0,y.nF)(async(e,r)=>{let{resource:n,pluginVersion:i,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(er({id:l,status:{code:R.aP.UPLOADING}}));let{profile:r,publishedPlugin:a}=await Z(n,i,s);e.dispatch((0,f.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"})),r&&e.dispatch(v.Oo(r)),e.dispatch(er({id:l,status:{code:R.aP.SUCCESS}})),o()}catch(n){let r=(0,_.J)(n,n.message);throw n instanceof c.qW?(0,M.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(h.F.enqueue({message:r,error:!0})),e.dispatch(er({id:l,status:{code:R.aP.FAILURE,error:r}})),(0,d.$D)(a.e.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),es=(0,y.nF)(async(e,{pluginId:r,role:n,agreedToTos:i,isWidget:o})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:i};l=o?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let a=n.meta;(0,s.trackEvent)("Hub Plugin Publish Role",{pluginId:r,toPublic:a.roles.is_public,toOrg:!!a.roles.org,needApproval:(0,E.AC)(a),isWidget:o}),e.dispatch((0,f.Qi)({publishedPlugins:[a],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,_.J)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,r)})}),el=(0,y.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:i,pluginId:o}=r,s={tags:r.tags,tags_v2:r.tagsV2,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=i?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let a=n.meta;e.dispatch((0,f.Qi)({publishedPlugins:[a],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,_.J)(r,r.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,r)})}),ec=(0,y.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,g.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let a=n.meta;e.dispatch((0,f.Qi)({publishedPlugins:[a],src:"unpublishPublishedPlugin"})),(0,s.trackEvent)("Hub Unpublish Plugin",{pluginId:r.id,...(0,N.L8)(r)})}).catch(n=>{e.dispatch(h.F.enqueue({message:(0,O.xQ)(r)?(0,m.t)("community.actions.could_not_publish_widget_error",{error:(0,_.J)(n,n.data?.message)}):(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,_.J)(n,n.data?.message)}),error:!0})),(0,d.$D)(a.e.COMMUNITY,n)})});(0,y.nF)((e,{id:r,resourceType:n},{loadingKey:a})=>{let i=r=>e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===O.bD.WIDGET?k.U.getVersions({widgetId:r}):D.V.getVersions({pluginId:r});(0,L.N)(o,e,a),o.then(({data:e})=>{i(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let ed=(0,y.nF)(async(e,r)=>{let{role:n,userId:i,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${i}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${i}`,{role:n})).data.meta.plugin,a=e.getState().user;n===R.kM.NONE&&i===a?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:p,currentUserOrgId:m,authedProfilesById:_}=s,h=Object.values(c).find(e=>e.plugin_id===o.id),g=h?.localFileId??o.id,E=(0,N.mI)({...(0,w.getPermissionsState)(s),currentUserOrgId:m,localPlugins:c,publishedPlugins:d,publishedWidgets:p,authedProfilesById:_},h?.localFileId),y={...l[g].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(et({id:g,metadata:y}))}catch(r){throw e.dispatch(h.F.enqueue({message:(0,_.J)(r,r.message),error:!0})),(0,d.$D)(a.e.COMMUNITY,r),Error(r.message)}});function eu(e,r){let{fields:n,codePath:a,signedCloudfrontUrl:o}=e,s=new FormData;return(Object.entries(n).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type","text/javascript"),s.append("file",r),o&&(0,i.k)().ext_s3_url_use_figma_domains)?u.Ay.crossOriginPut(o,r,{raw:!0,headers:{"Content-Type":"text/javascript","Cache-Control":"private, max-age=86400","x-amz-acl":"bucket-owner-full-control"}}):u.Ay.crossOriginPost(a,s,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})}function ep(e){let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,m.t)("community.actions.file_too_large")}},81884:(e,r,n)=>{n.d(r,{d6:()=>S,g3:()=>T,oj:()=>N,s1:()=>A,uR:()=>I});var a=n(167920),i=n(60074),o=n(989232),s=n(183603),l=n(182317),c=n(304756),d=n(967688),u=n(210853),p=n(952039),m=n(151223),_=n(566726),h=n(660948),g=n(652576),f=n(913026),E=n(324747),y=n(946322),b=n(540539),v=n(944239);let T=(0,i.NC)("SET_SAVED_PLUGIN_VERSIONS");(0,m.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(_.b6({widgetIDToVersions:n}))});var I=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(I||{});let S=(0,v.n)((0,m.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:i,orgId:m,onSuccess:y,hideSuccessVisualBell:b,onFail:v,source:T,optimisticData:I},{optimistId:S})=>{let A=e.getState(),w={plugin_version_id:i,org_id:m,current_org_id:A.currentUserOrgId};w.can_handle_first_time_install=!0,w.use_upgraded_version=!0,w.profile_id=e.getState().authedActiveCommunityProfile?.id,n===E.vt.WIDGET&&(w.current_org_id=void 0);let C=`/api/${(0,f.n)(n)}/${r}/install`,N=c.Ay.post(C,w);if(A.user&&I?.resource){let e=`optimistic-plugin-install-${(0,l.g)()}`,r=(0,g.N3)(I.resource,{userId:m?null:A.user.id,orgId:m??null});r&&(0,s.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},N)}N.then(({data:r})=>{e.dispatch(a.c(S));let i=r.meta,s=n===E.vt.WIDGET?{publishedPlugins:[i],src:"installResource",isWidget:!0}:{publishedPlugins:[i],src:"installResource"};if(e.dispatch(_.Qi({...s,overrideInstallStatus:!0})),y?.(),!b){let r=(()=>{if("inserts_modal"===T)return n===E.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved"):(0,d.t)("community.saves.widget_saved");if(m){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===m);return(0,d.t)(n===E.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,d.t)(n===E.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile"):n===E.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_your_account"):(0,d.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(p.F.enqueue({message:r,type:"plugin-installed"}))}(0,o.trackEvent)((0,E.xQ)(i)?h.M5.WIDGET_INSTALLED:h.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,E.xQ)(i)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:i.id,source:T})}).catch(r=>{v?.(),e.dispatch(a.r(S)),403===r.data.status?e.dispatch(p.F.enqueue({message:n===E.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,u.J)(r,r.data?.message)}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,u.J)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(p.F.enqueue({message:n===E.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,d.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),A=(0,m.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:i,hideSuccessVisualBell:l,source:u,optimisticData:m},{optimistId:g})=>{let y={org_id:i,current_org_id:e.getState().currentUserOrgId};y.use_upgraded_version=!0,y.profile_id=e.getState().authedActiveCommunityProfile?.id,n===E.vt.WIDGET&&(y.current_org_id=void 0);let b=`/api/${(0,f.n)(n)}/${r}/install`,v=c.Ay.del(b,y);m?.pluginInstallId&&(0,s.WB)().optimisticallyDelete({PluginInstall:{[m.pluginInstallId]:null}},v),v.then(({data:s})=>{let c=s.meta,m=n===E.vt.WIDGET?{publishedPlugins:[c],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[c],src:"uninstallResource"};if(e.dispatch(_.Qi({...m,overrideInstallStatus:!0})),e.dispatch(a.c(g)),!l){let a={message:(()=>{if("inserts_modal"===u)return n===E.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account");if(i){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===i);return(0,d.t)(n===E.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,d.t)(n===E.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile"):n===E.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,d.t)("community.undo"),action:()=>{e.dispatch(p.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(S({id:r,resourceType:n,orgId:i,hideSuccessVisualBell:!0,source:u}))}}};e.dispatch(p.F.enqueue(a))}(0,o.trackEvent)((0,E.xQ)(c)?h.M5.WIDGET_UNINSTALLED:h.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,E.xQ)(c)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:c.id,source:u})}).catch(r=>{e.dispatch(a.r(g)),console.error(r)})}),w={[E.bD.PLUGIN]:function(e){return y.V.getInstallStatus({orgId:e})},[E.bD.WIDGET]:function(e){return b.U.getInstallStatus({orgId:e})}},C=(0,m.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let a=w[r.resourceType];a&&a(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(p.F.enqueue({type:"plugin-save-error",message:r.resourceType===E.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,u.J)(n,n.data.message||"unknown error")}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,u.J)(n,n.data.message||"unknown error")}),error:!0}))})}),N=(0,m.nF)((e,r)=>{let{orgId:n,id:a,resourceType:i,communityProfile:o}=r;e.dispatch(C({orgId:n,id:a,resourceType:i,callback:()=>{e.dispatch(S({id:a,resourceType:i,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},550456:(e,r,n)=>{n.d(r,{aI:()=>W,cx:()=>z,lx:()=>K,s0:()=>j});var a=n(938982),i=n(989232),o=n(653313),s=n(656329),l=n(998568),c=n(103661),d=n(967688),u=n(952039),p=n(113752),m=n(512991),_=n(608749),h=n(775204),g=n(10110),f=n(151223),E=n(31898),y=n(63443),b=n(924476),v=n(757202),T=n(211971),I=n(162299),S=n(747703),A=n(407638),w=n(20687),C=n(411910),N=n(324747),L=n(259964),O=n(129723),R=n(764474),P=n(941244),D=n(446951),k=n(784508),M=n(414607),F=n(102306),x=n(903761),U=n(529628);let B=()=>async e=>{let r="org-admin-team-creation";e(u.F.enqueue({message:(0,d.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:p.zX.SPINNER}));try{let n=(await P.G.createStarterTeam()).data.meta;return e(u.F.dequeue({matchType:r})),e(E.Lo()),n}catch(n){return e(u.F.dequeue({matchType:r})),e(E.Lo()),e(u.F.enqueue({message:(0,d.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},G=(0,D.Ju)(M.Rw),V=(e,r,n)=>a=>{a(E.to({type:G,data:{confirmationTitle:(0,d.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,d.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,d.t)("general.continue"),onConfirm:()=>{a(B()).then(n)},hideCancel:!0}}))},H=(0,f.nF)(async(e,r)=>{let{workspaces:n,plans:a}=r,i=e.getState(),{authedUsers:o,orgById:s}=i,l=n.map(e=>({...e,workspaceName:(0,I.HE)(i,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,v.hb)(r.resource,n),l=(0,v.VT)(r.resource,n)),(0,w.Rt)(r.resource)&&!(0,A.canMemberOrg)(e.orgId,i,e.userId))return;let c=(0,g.y)(e,(0,L.wN)(r.editorType),i,a);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(E.to({type:_._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),z=(0,f.nF)((e,r)=>{if(s.rr){window.location.href="/login";return}let n=r.isWidget?(0,d.t)("community.logged_out.sign_up_modal_widget_header"):(0,d.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(c.Ts({origin:"plugin_try_signed_out"})),e.dispatch(E.to({type:k.l,data:{headerText:n,icon:r.isWidget?U.A:x.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,f.nF)((e,r)=>{let n=e.getState().user,a=r.extension,i="isWidget"in a?!!a.isWidget:!!a.is_widget,o="currentPluginVersion"in a?a.currentPluginVersion:(0,w.Ar)(a);if(!o||!n)return;let s="hasPlaygroundFile"in o?o.hasPlaygroundFile:o.playground_file_version_id,l=r.fullscreenEditorType===L.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:a.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:i,isPlaygroundFile:!!(s||l),fuid:n.id,tryPluginParams:void 0};(0,C.Y9)(n.id,!1,null),(0,F.j)(c,null,null,n.id),(()=>{let s={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:a.id,version:o.id,currentUserId:n.id};i?e.dispatch(y.RH(s)):e.dispatch(y.gU(s))})()}),(0,f.nF)((e,r)=>{let n=e.getState(),a=n.user,i=r.extension,s="isWidget"in i?!!i.isWidget:!!i.is_widget,l="currentPluginVersion"in i?i.currentPluginVersion:(0,w.Ar)(i);if(!l||!a)return;let c=()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:i.id,version:l.id,currentUserId:a.id};s?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},d="hasPlaygroundFile"in l?l.hasPlaygroundFile:l.playground_file_version_id,u=r.fullscreenEditorType===L.nT.DevHandoff,p={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:i.id,tryPluginVersionId:l.id,tryPluginName:l.name??"",isWidget:s,isPlaygroundFile:!!(d||u),fuid:a.id,tryPluginParams:void 0},m=n.plans.filter(e=>e.plan_type===O.O.TEAM).map(e=>{let r=(0,o.O)(e,a.id);return{...r,workspaceName:(0,I.HE)(n,r),user:a}});if(0===m.length){e.dispatch(V(l.name,n.orgById[n.currentUserOrgId].name,e=>{(0,C.Y9)(a.id,!1,null,void 0,e.id),(0,F.j)(p,null,e.id,a.id),c()}));return}1===m.length?((0,C.Y9)(a.id,!1,null,void 0,m[0].teamId??null),(0,F.j)(p,null,m[0].teamId??null,a.id),c()):e.dispatch(E.to({type:_._,data:{payload:{workspaces:m,onSelectWorkspace:e=>{(0,C.Y9)(a.id,!1,null,void 0,e?.teamId??null),(0,F.j)(p,null,e?.teamId??null,a.id),c()},mode:"new_file"}}}))});let K=(0,f.nF)((e,r)=>{let n=e.getState(),a=n.user,i=r.extension,o="isWidget"in i?!!i.isWidget:!!i.is_widget,s="currentPluginVersion"in i?i.currentPluginVersion:(0,w.Ar)(i);if(!s||!a)return;let l="hasPlaygroundFile"in s?s.hasPlaygroundFile:s.playground_file_version_id,c=r.fullscreenEditorType===L.nT.DevHandoff,d={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:i.id,tryPluginVersionId:s.id,tryPluginName:s.name??"",isWidget:o,isPlaygroundFile:!!(l||c),fuid:a.id,tryPluginParams:void 0},u=n.plans.find(e=>e.plan_type===O.O.ORG&&e.plan_id===n.currentUserOrgId);(0,C.Y9)(a.id,!1,u.plan_id,void 0,null),(0,F.j)(d,u.plan_id,null,a.id),(()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:i.id,version:s.id,currentUserId:a.id};o?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))})()}),W=(0,f.nF)(async(e,r)=>{let n=e.getState(),{user:o}=n,s=(0,h.wr)(n),c=(0,h.Ux)(n),p=(0,N.xQ)(r.resource),m=(0,w.uF)(r.resource);if(!o){e.dispatch(z({isWidget:p}));return}let _=()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:r.resource.id,version:m.id,currentUserId:o.id};p?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},g=[],f=null;try{f=await e.dispatch((0,T.nm)(!0)),g=(0,S.F)(n,r.resource,f)}catch(n){let r=n?.data?.message||(0,d.t)("file_browser.error_try_again");e.dispatch(u.F.enqueue({message:r,type:"error"}))}let E=!r.orgId&&g.length>1&&!r.fileKey,A={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:m.id,tryPluginName:m.name,tryPluginEditorType:m.manifest.editorType?.[0]??R.FW.FIGMA,isWidget:p,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,i.trackEvent)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:p,editorType:r.fullscreenEditorType,isMonetized:(0,N.m3)(r.resource),fileKey:r.fileKey,search_session_id:s,query_id:c}),E)(0,i.trackEvent)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:p,searchSessionId:s}),e.dispatch(H({plans:f,workspaces:g,resource:r.resource,editorType:(0,L.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(A.fuid=e.userId,(0,C.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,F.j)(A,e.orgId,e.teamId??null,e.userId)):(0,F.j)(A,null,null,o.id),_()}}));else if(r.fileKey)A.fuid=r.userId??o.id,(0,F.j)(A,null,null,A.fuid);else if(r.orgId){A.fuid=r.userId??o.id;let a=n.orgById[r.orgId];if(a&&!await (0,v.hb)(r.resource,a)){e.dispatch(u.F.enqueue({message:(0,d.t)("community.resource.you_do_not_have_permissions_to_use_this_resource"),error:!0}));return}(0,C.Y9)(o.id,!1,r.orgId),(0,F.j)(A,r.orgId,null,o.id)}else if(1===g.length){let a=g[0];if(a.orgId&&!(0,v.VT)(r.resource,n.orgById[a.orgId])&&!await (0,v.hb)(r.resource,n.orgById[a.orgId])){e.dispatch(V(m.name,(0,I.HE)(n,a),e=>{(0,C.Y9)(o.id,!1,null,void 0,e.id),(0,F.j)(A,null,e.id,o.id),_()}));return}(0,C.Y9)(a.userId,!1,a.orgId,void 0,a.teamId??null),(0,F.j)(A,a.orgId,a.teamId??null,a.userId)}else(0,l.$D)(a.e.COMMUNITY,Error("No workspaces found")),e.dispatch(u.F.enqueue({message:(0,d.t)("file_browser.error_try_again"),error:!0}))});function j(e,r){e(E.to({type:m.t,data:{onContinue:r}}))}},212885:(e,r,n)=>{n.d(r,{Xt:()=>b,aq:()=>y,gI:()=>v});var a=n(304756),i=n(314979),o=n(967688),s=n(210853),l=n(331210),c=n(151223),d=n(566726),u=n(490970),p=n(353231),m=n(20687),_=n(567587),h=n(102382),g=n(731889),f=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(f||{});function E(e){return e.hub_file?(0,l.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?d.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?d.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}(0,c.nF)((e,r)=>{a.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=E(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})}),(0,c.nF)((e,r)=>{let{src:n,plugin_id:l,widget_id:c}=r;a.Ay.put("/api/plugin_publishers/accept",{plugin_id:l,widget_id:c}).then(({data:r})=>{let a=E(r.meta);a&&e.dispatch(a),(0,p.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:l??c,isWidget:!!c});let i=(0,m.T)();l?(0,u.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.PLUGINS:void 0,initialFdResourceTab:"figma"===i?g.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`}):c&&(0,u.s)({initialX:0,initialY:0,initialTab:"figjam"===i?h.p.WIDGETS:void 0,initialFdResourceTab:"figma"===i?g.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===i,initialFdView:"figma"===i?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})}),(0,c.nF)((e,r)=>{a.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=E(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})}),(0,c.nF)((e,r)=>{a.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let a=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let i=E(a);i&&e.dispatch(i),(0,p.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(i.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let y=(0,c.nF)(e=>{_.R.loadPluginsPublishedByUser(e),_.R.loadPluginsAuthoredByCurrentOrg(e)}),b=(0,c.nF)(e=>{_.R.loadPluginsAuthoredByCurrentOrg(e)}),v=(0,c.nF)(async e=>{await _.R.loadWidgetsAuthoredByCurrentOrg(e)})},876086:(e,r,n)=>{n.d(r,{r:()=>C});var a=n(186606),i=n(19180),o=n(210853),s=n(952039),l=n(823898),c=n(669449),d=n(808988),u=n(151223),p=n(566726),m=n(31898),_=n(877146),h=n(353231),g=n(280255),f=n(407638),E=n(20687),y=n(280361),b=n(324747),v=n(553709),T=n(946322),I=n(540539),S=n(299176),A=n(414864),w=n(468953);let C=(0,u.nF)(async(e,{localFileId:r,publishedPluginId:n,entryPoint:u,initialTab:C,initialAllowedTabs:N,localSnapshotUrl:L,localSnapshotBlob:O,widgetNodeId:R})=>{if(u===v.k2.EDITOR&&!(0,g.cb)(e.getState()))return y.R.instance.handleUpgrade(_.Q7.MANAGE_EXTENSIONS);if(null!=n){let[r,a]=await Promise.all([T.V.getPlugins({id:n}),I.U.getWidgets({id:n})]),i=r.data.meta,o=a.data.meta,s=i.concat(o).find(e=>e.id===n);s&&e.dispatch(p.Qi({publishedPlugins:[s],src:"showPublishPluginModal"}))}let P=e.getState(),{localPlugins:D,publishedPlugins:k,publishedWidgets:M,publishingPlugins:F,currentUserOrgId:x,authedProfilesById:U,user:B}=P,G=(n?k[n]:void 0)||(n?M[n]:void 0),V=null!=r?D[r]:void 0;if(G&&!(0,b.m3)(G)&&(0,l.Ul)(G)&&V&&V.manifest.permissions?.includes("payments")&&B&&!B.has_passed_visual_compliance){e.dispatch(m.$O({type:w.O.type}));return}if(null==r||F[r]){if(null!=r&&F[r])try{if(L&&F[r].metadata.widgetSnapshotImageSrc!==L){let{metadata:n}=F[r];n.widgetSnapshotImageSrc=L,n.widgetSnapshotImageBlob=O,e.dispatch((0,p.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(s.F.enqueue({message:(0,o.J)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&G)try{let r=(0,E.mI)({...(0,f.getPermissionsState)(P),currentUserOrgId:x,localPlugins:D,publishedPlugins:k,publishedWidgets:M,authedProfilesById:U},void 0,n,L);e.dispatch((0,p.fy)({id:G.id,metadata:r}))}catch(r){e.dispatch(s.F.enqueue({message:(0,o.J)(r)||r.message,error:!0}));return}}else try{let a=(0,E.mI)({...(0,f.getPermissionsState)(P),currentUserOrgId:x,localPlugins:D,publishedPlugins:k,publishedWidgets:M,authedProfilesById:U},r,n,L,O);e.dispatch((0,p.fy)({id:r,metadata:a}))}catch(r){e.dispatch(s.F.enqueue({message:(0,o.J)(r)||r.message,error:!0}));return}if(a.glU&&a.glU.triggerAction("set-tool-default",null),(0,h.uE)("show_publish_plugin_modal",P,{entryPoint:u,userId:P.user?.id,orgId:P.currentUserOrgId,resourceType:G?G.is_widget?"widget":"plugin":void 0,publishedResourceId:G?G.id:void 0,initialTab:C??A.KM.PUBLISH}),(0,i.k)().ext_plugin_publish_rearch){if(!V&&!G)return;if(C===A.KM.PERMISSIONS){e.dispatch(m.to({type:S.o,data:{localFileId:r,entryPoint:u,initialTab:C,initialAllowedTabs:[A.KM.PERMISSIONS],publishedPluginId:G?G.id:void 0,existingSecurityFormResponse:null}}));return}!V&&G?e.dispatch(m.to({type:d.T,data:{localFileId:void 0,validExtensionId:G.id,entryPoint:u,isWidget:(0,c.p4)({existingExtension:G,localExtension:V}),widgetNodeId:R}})):r&&e.dispatch(m.to({type:d.T,data:{localFileId:r,validExtensionId:G?.id,entryPoint:u,isWidget:(0,c.p4)({existingExtension:G,localExtension:V}),widgetNodeId:R}}))}else e.dispatch(m.to({type:S.o,data:{localFileId:r,entryPoint:u,initialTab:C,initialAllowedTabs:N??A.x5,publishedPluginId:G?G.id:void 0,existingSecurityFormResponse:null}}))})},792533:(e,r,n)=>{n.d(r,{S:()=>_,TH:()=>p,lW:()=>u,le:()=>m});var a=n(446470),i=n(967688),o=n(952039),s=n(31898),l=n(656320),c=n(634617),d=n(151223);let u=(0,d.nF)((e,r)=>{let n=r.stringToCopy,s={withLineBreaks:!(r.ignoreLineBreaks??!0),successText:r.successText};(0,a.Dk)(n,s).then(()=>{e.dispatch(o.F.enqueue({type:"copied_to_clipboard",message:s.successText??(0,i.t)("fullscreen_actions.copied_to_clipboard")}))})});function p(e){return(0,d.nF)((e,r)=>{let n=r.selector.selectedViewToPath(r.selectedView,r.data);if(!n)return;let a=new URL(n,document.baseURI).href;e.dispatch(_({url:a}))})(e)}(0,d.nF)((e,r)=>{let n=r.emailList,s=n.length,l=n.join("; ");(0,a.Dk)(l).then(()=>{e.dispatch(o.F.enqueue({message:(0,i.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:s,emailText:l}),type:"emails-copied"}))})});let m=(0,d.nF)((e,r)=>{let n=new URL((0,l.Np)(e.getState(),r),document.baseURI).href;e.dispatch(_({url:n}))}),_=(0,d.nF)(async(e,r)=>{let n;let l=r.url;switch(r.linkType??"selection"){case"template":n=(0,i.t)("copy_to_clipboard.template_share_link_copied");break;case"link":n=(0,i.t)("copy_to_clipboard.link_copied_to_clipboard");break;case"plugin":n=(0,i.t)("copy_to_clipboard.link_to_plugin_copied_to_clipboard");break;case"widget":n=(0,i.t)("copy_to_clipboard.link_to_widget_copied_to_clipboard");break;default:n=(0,i.t)("copy_to_clipboard.link_to_selection_copied_to_clipboard")}try{await (0,a.Dk)(l),e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:n}))}catch{e.dispatch(s.to({type:c.o,data:{link:l}}))}})},284902:(e,r,n)=>{n.d(r,{Ri:()=>O,c3:()=>P,j3:()=>L,mg:()=>N,on:()=>R});var a=n(559389),i=n(60074),o=n(989232),s=n(311129),l=n(29188),c=n(637640),d=n(653313),u=n(453370),p=n(565294),m=n(67308),_=n(281294),h=n(318147),g=n(806349),f=n(407638),E=n(656320),y=n(181630),b=n(259964),v=n(434289),T=n(603592),I=n(98449),S=n(175957),A=n(151223),w=n(858839);let C=(0,A.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let a=_.ZG()?.fileKey||n.fileKey;a&&l.eD?.updateViewport(a,r)}});(0,A.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?T.Rx.ORG:T.Rx.ORG_GUEST:T.Rx.PERSONAL}(r);e.dispatch(w.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:T.uH.FILES})),e.dispatch(w.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let a=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(a)});let N=(0,i.NC)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),L=(0,i.NC)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,i.NC)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,A.nF)((e,r)=>{let n=e.getState(),a=r.result,i=a.model,o={position:r.index,resource_id:i.key,resource_type:a.search_model_type.toString(),matched_queries:a.matched_queries,result:a},s={plan:(0,d.S)(n)};new I.vj.Analytics(n.search,o,s).click(a.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(w.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??h._Y.DESIGN)}))}),(0,A.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,o.trackEvent)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:a.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(a),nodeId:r.pageId,pageId:r.pageId}))}),(0,A.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey);(0,o.trackEvent)("Desktop New Tab Open Recent",{itemType:"file",fileKey:a.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??h._Y.DESIGN)}))}),(0,A.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let a=(0,s.ce)()?v.ai.SAME_TAB:v.ai.NEW_TAB,i=(0,m.xA)({state:e.getState(),openNewFileIn:a,folderOverride:r.projectId?{folderId:r.projectId}:"drafts",trackingInfo:{from:v.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},editorType:r.editorType});e.dispatch(p.uM(i))}});let P=(0,a.s)((e,r)=>{e.dispatch(C({viewport:r}))},1e3)},62314:(e,r,n)=>{n.d(r,{A3:()=>K,CE:()=>G,Cs:()=>Y,HS:()=>R,I4:()=>em,Ir:()=>P,N9:()=>J,NL:()=>W,OC:()=>er,OJ:()=>O,Ox:()=>U,Pg:()=>et,Qv:()=>ec,UX:()=>q,V9:()=>F,VV:()=>ed,Vk:()=>ep,WA:()=>L,_1:()=>eu,bA:()=>el,e9:()=>eo,g6:()=>N,h8:()=>ea,he:()=>k,iy:()=>V,k1:()=>Q,ks:()=>H,lV:()=>ee,lu:()=>en,mI:()=>es,n0:()=>Z,ne:()=>e_,oI:()=>C,ot:()=>B,wk:()=>z});var a=n(559389),i=n(186606),o=n(60074),s=n(621464),l=n(615233),c=n(967688),d=n(952039),u=n(353231),p=n(67308),m=n(587745),_=n(257270),h=n(847877),g=n(259964),f=n(716748),E=n(372529),y=n(521174),b=n(878624),v=n(438673),T=n(969641),I=n(151223);function S(e){return e.multiplayer.allUsers.length}function A(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function w(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch($({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(X()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let C=(0,o.NC)("SET_SELECTED_SONG_ID_MUSIC");(0,I.nF)((e,r)=>{let{music:n}=e.getState().music,a=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||a)){let a=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:a?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(C(r))});let N=(0,I.nF)(e=>{e.dispatch(L()),(0,b.I8)(),(0,b.om)()}),L=(0,o.NC)("RESET_LOCAL_MUSIC"),O=(0,I.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=M(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,o.NC)("SET_MUSIC_STATE"),P=(0,o.NC)("RESUME_MUSIC");(0,I.nF)(async(e,r)=>{let n=A(r),a=e.getState(),i=a.music.music?.selectedSongID;i&&(i=await w(i,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,I.nF)((e,r)=>{let n=A(r),a=e.getState(),i=a.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:i||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,I.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),k=(0,o.NC)("START_MUSIC");(0,I.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,a="";n&&(a=n.selectedSongID),a&&(a=await w(a,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:a,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(k({musicStartTimeMs:r}))});let M=(e,r)=>r.find(r=>r.song_id===e),F=(0,o.NC)("SEND_MUSIC_MESSAGE"),x=(0,I.nF)((e,r)=>{let n=e.getState().music;i.h3O?.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,I.nF)((e,r)=>{"open"===r.state&&(0,T.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,o.NC)("SET_MUSIC_MODAL"),B=(0,o.NC)("RESET_LOCAL_TIMER"),G=(0,o.NC)("SET_MUSIC_STANDALONE_VOLUME");(0,I.nF)((e,r)=>{j(e.getState(),r),e.dispatch(G(r))});let V=(0,o.NC)("SET_MUSIC_IS_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(V({isMuted:r,userInitiated:n}))});let H=(0,o.NC)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let z=(0,o.NC)("SET_STANDALONE_MUSIC_PLAYER"),K=(0,o.NC)("SET_MAIN_MUSIC_PLAYER"),W=(0,o.NC)("SET_MUSIC_VOLUME");(0,I.nF)((e,r)=>{j(e.getState(),r),e.dispatch(W(r))});let j=(0,a.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),Y=(0,o.NC)("SET_SELECTED_SONG_ID"),$=(0,I.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let a=(0,v.P$)(n);e.dispatch(ei({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:a,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),h.d1.timerChange("timerupdatesongid")}e.dispatch(Y(r))}),q=(0,o.NC)("GET_ACTIVE_SONGS_SUCCESS"),X=(0,I.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch active songs"),e}}),J=(0,o.NC)("SET_SHOWING_FILE_FOOTER"),Z=(0,o.NC)("SET_SELECTED_TYPED_PROP_DEF_ID"),Q=(0,o.NC)("SET_START_CHIME_PLAYED"),ee=(0,o.NC)("SET_TIMER_NOTIFICATION"),et=(0,o.NC)("SET_TIMER_AUDIO_ENABLED"),er=(0,o.NC)("SET_TIMER_MODAL"),en=(0,I.nF)((e,r)=>{if("open"===r.state&&(0,v.FR)()&&(0,T.D)(()=>{let r=(0,v.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(en({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),a=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":a,source:r.source})}e.dispatch(er(r))}),ea=(0,o.NC)("SEND_TIMER"),ei=(0,I.nF)((e,r)=>{let n=e.getState(),a=n.timer,o=a.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(i.h3O?.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(a?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let a=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=a}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ea(r))}),eo=(0,o.NC)("SET_TIMER"),es=(0,I.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,p.d1)(r);if(n){let e=(0,m.L8)(n,r.repos);!function(e,r,n){if(!e)return;let a=new E.a().selectedViewNameHelper(e,r);(0,_.hL)(a,(0,g.wN)(e.editor_type),"")}(n,e)}}e.dispatch(eo(r))}),el=(0,o.NC)("START_TIMER"),ec=(0,I.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let a=e.getState().timer.selectedSongID;a&&(a=await w(a,e)),e.dispatch(ei({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:a,lastReceivedSongTimestampMs:n})),h.d1.timerChange("timerstart"),e.dispatch(el({totalTimeMs:r,musicStartTimeMs:n}))}),ed=(0,I.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(ei({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,v.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),h.d1.timerChange("timeradjust")}),eu=(0,I.nF)((e,r)=>{let n=(0,v.P$)(r),a=A(r),i=e.getState().timer.selectedSongID,o=function(e){return e?e.totalTimeMs:0}(r);e.dispatch(ei({eventName:"pause-timer",totalTimeMs:o,timeRemainingMs:n,isPaused:!0,songID:i,lastReceivedSongTimestampMs:a})),h.d1.timerChange("timerpause")}),ep=(0,I.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(ei({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),h.d1.timerChange("timerstop")}),em=(0,o.NC)("RESUME_TIMER"),e_=(0,I.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await w(n,e)),e.dispatch(ei({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),h.d1.timerChange("timerresume"),e.dispatch(em(r))})},864907:(e,r,n)=>{n.d(r,{DN:()=>D,EX:()=>O,Fb:()=>U,Mv:()=>R,N9:()=>C,U6:()=>S,X7:()=>k,dy:()=>N,gG:()=>x,iN:()=>M,jv:()=>L,lF:()=>I,ox:()=>P,pS:()=>w,qP:()=>F,to:()=>A});var a=n(660376),i=n(167920),o=n(60074),s=n(226697),l=n(183603),c=n(511985),d=n(795234),u=n(304756),p=n(314979),m=n(967688),_=n(210853),h=n(952039),g=n(151223),f=n(587745),E=n(983178),y=n(403253),b=n(106340),v=n(318147),T=n(447651);let I=(0,o.NC)("SET_FAVORITES_COUNT"),S=(0,o.NC)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),A=(0,o.NC)("SET_MOVING_RESOURCE"),w=(0,o.NC)("SET_NEW_SECTION_INDEX");(0,g.nF)((e,r)=>{let{name:n,orderedFavoriteIds:a}=r,i=u.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:a,name:n}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))});(0,l.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...a?{orderedFavoritedResourceIds:a}:{}}}},i),r.name&&(0,s.K2)(r.sectionId,r.name)}),(0,g.nF)((e,r)=>{let n=u.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))});(0,s.Pe)(r.sidebarSectionId),(0,l.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,g.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,s.Dr)(r.favoriteIds,r.teamId),u.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))})}),(0,g.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},a=u.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,l.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},a);let i={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case v.bk.TEAM:(0,l.WB)().optimisticallyUpdate({FavoritedTeam:i},a);break;case v.bk.FOLDER:(0,l.WB)().optimisticallyUpdate({FavoritedProject:i},a);break;case v.bk.FILE:(0,l.WB)().optimisticallyUpdate({FavoritedFile:i},a);break;case v.bk.PROTOTYPE:(0,l.WB)().optimisticallyUpdate({FavoritedPrototype:i},a);break;case v.bk.WORKSPACE:(0,l.WB)().optimisticallyUpdate({FavoritedWorkspace:i},a)}}),(0,g.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=u.Ay.post("/api/user_sidebar_sections",a).then(n=>{if(!n?.data.meta){e.dispatch(A({movingResource:void 0}));return}G(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(A({movingResource:void 0}))}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))});if((0,l.WB)().optimisticallyCreate({UserSidebarSection:{[H]:{userId:e.getState().user?.id??"",orgId:n,teamId:null,name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),H,...r.currentOrderedSections.slice(r.insertAtIndex,a)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,T.ah)(s,e.getState().user?.id,n,null,i)}}),(0,g.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,a={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},i=u.Ay.post("/api/user_sidebar_sections",a).then(e=>{(0,s.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))}),o="optimistic-id-custom-section-id";if((0,l.WB)().optimisticallyCreate({UserSidebarSection:{[o]:{userId:e.getState().user?.id??"",orgId:n,teamId:null,name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},i),r.prefs&&r.currentOrderedSections){let a=r.currentOrderedSections.length,s=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),o,...r.currentOrderedSections.slice(r.insertAtIndex,a)],l={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:s};(0,T.ah)(l,e.getState().user?.id,n,null,i)}});let C=(0,g.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:a})=>{let{files:o,repos:d,prototypes:m,orgId:_,teamId:g,selectedView:f,entrypoint:E}=r,y=e.getState().currentTeamId,b=e.getState().currentUserOrgId,I=y??b,S=o.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)),A=S.map(e=>e.key),w=d.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)).filter(Boolean),C=w.map(e=>e.default_file_key),N=m.filter(e=>!e.is_favorited&&(e.parent_team?.id===I||e.parent_org?.id===I)),L=N.map(e=>e.file_key+","+e.page_id),O={files:C.concat(A),org_id:_,team_id:g,prototypes:L,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};o.forEach(e=>{(0,s.gB)(e.key,f,E,v.bk.FILE,e.editor_type,!0)}),d.forEach(e=>{(0,s.gB)(e.default_file_key??void 0,f,E,v.bk.FILE,"design",!0)}),m.forEach(e=>{(0,s.gB)(e.file_key,f,E,v.bk.PROTOTYPE,"design",!0)});let R=u.Ay.put("/api/bulk_favorite_resources",O).then(()=>{e.dispatch(i.c(n))}).catch(r=>{e.dispatch(i.r(n));try{e.dispatch(h.F.enqueue({message:r.message}))}catch(r){e.dispatch(p.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},k={},M=[];if(N.forEach(e=>{M.push(`optimistic-id-${e.fig_file.key}`),k[`optimistic-id-${e.fig_file.key}`]=(0,c.XJ)(e,P,_,r.sectionId)}),w.forEach(e=>{let n=e.default_file_key;if(n){let e=a.readCachedFile(n);e&&(M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,c.f2)(e,P,_,r.sectionId))}}),S.forEach(e=>{M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,c.f2)(e,P,_,r.sectionId)}),(0,l.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:k},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...M,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,l.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,T.ah)(e,P,_,null,R)}}),N=(0,g.nF)((e,r)=>{let{tile:n,entrypoint:i,favoriteId:o,fileBrowserEntryPoint:s}=r;switch(n.type){case y.nb.FILE:case y.nb.PINNED_FILE:e.dispatch(F({entrypoint:i,favoriteId:o,file:n.file,fileBrowserEntryPoint:s}));return;case y.nb.PROTOTYPE:e.dispatch(k({entrypoint:i,favoriteId:o,prototype:n.prototype,fileBrowserEntryPoint:s}));return;case y.nb.REPO:e.dispatch(F({entrypoint:i,favoriteId:o,file:b.F.toLiveGraph((0,f.mr)(n.repo,n.branches,{})),repoId:n.repo.id,fileBrowserEntryPoint:s}));return;case y.nb.OFFLINE_FILE:return;default:(0,a.xb)(n)}}),L=(0,g.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,s.to)(a.id,e.getState().selectedView.view,r.entrypoint,v.bk.FOLDER);let o=G(e.dispatch,v.bk.FOLDER,!1,a.id,n,i);r.favoriteId&&(0,l.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},o)}),O=(0,g.nF)(async(e,r,{liveStore:n})=>{let{tile:i,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(i.type){case y.nb.FILE:e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:i.file,fileBrowserEntryPoint:c}));return;case y.nb.PINNED_FILE:let d=await n.fetchFile(i.file.key);e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:b.F.toLiveGraph(d),fileBrowserEntryPoint:c}));return;case y.nb.PROTOTYPE:e.dispatch(M({entrypoint:o,favoriteId:s,sectionId:l,prototype:i.prototype,fileBrowserEntryPoint:c}));return;case y.nb.REPO:e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:b.F.toLiveGraph((0,f.mr)(i.repo,i.branches,e.getState().selectedBranchKeyByRepoId)),repoId:i.repo.id,fileBrowserEntryPoint:c}));return;case y.nb.OFFLINE_FILE:return;default:(0,a.xb)(i)}}),R=(0,g.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:a,sectionId:i}=r;(0,s.gB)(a.id,e.getState().selectedView.view,r.entrypoint,v.bk.FOLDER);let o=G(e.dispatch,v.bk.FOLDER,!0,a.id,n,i),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,l.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},o),"is_favorited"in a&&(r.favoriteId||(0,l.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${a.id}`]:(0,c.ad)(a,d,u,i)}},o)))});(0,g.nF)((e,r)=>{let{workspace:n}=r;(0,s.to)(n.id,e.getState().selectedView.view,r.entrypoint,v.bk.WORKSPACE);let a=G(e.dispatch,v.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,l.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},a)}),(0,g.nF)((e,r)=>{let{workspace:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,s.gB)(n.id,e.getState().selectedView.view,r.entrypoint,v.bk.WORKSPACE);let o=G(e.dispatch,v.bk.WORKSPACE,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,l.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},o):(0,l.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,c.Nc)(n,d,i,a)}},o))});let P=(0,g.nF)((e,r)=>{let{team:n}=r;(0,s.to)(n.id,e.getState().selectedView.view,r.entrypoint,v.bk.TEAM);let a=G(e.dispatch,v.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,l.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},a)}),D=(0,g.nF)((e,r)=>{let{team:n,sectionId:a}=r,i=e.getState().currentUserOrgId;(0,s.gB)(n.id,e.getState().selectedView.view,r.entrypoint,v.bk.TEAM);let o=G(e.dispatch,v.bk.TEAM,!0,n.id,void 0,a),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,l.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},o):(0,l.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,c.zb)(n,d,i,a)}},o))}),k=(0,g.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,fileBrowserEntryPoint:o}=r;(0,s.to)(a.file_key,e.getState().selectedView.view,i,v.bk.PROTOTYPE,void 0,o);let c=G(e.dispatch,v.bk.PROTOTYPE,!1,a.file_key,n,void 0,a.page_id);e.getState().user?.id&&r.favoriteId&&(0,l.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),M=(0,g.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:a,entrypoint:i,sectionId:o,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,s.gB)(a.file_key,e.getState().selectedView.view,i,v.bk.PROTOTYPE,"prototype",d);let p=G(e.dispatch,v.bk.PROTOTYPE,!0,a.fig_file.key,n,o,a.page_id),m=e.getState().user?.id;m&&(r.favoriteId&&r.sectionId?(0,l.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},p):(0,l.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${a.fig_file.key}`]:(0,c.XJ)(a,m,u,o)}},p))}),F=(0,g.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let a=e.getState().selectedView.view,{file:i,entrypoint:o,fileBrowserEntryPoint:c}=r;(0,s.to)(i.key,a,o,v.bk.FILE,i.editorType??"design",c);let d="fullscreen"===a?B(e.dispatch,v.bk.FILE,!1,i.key,(0,E.D6)(e.getState().currentUserOrgId)):G(e.dispatch,v.bk.FILE,!1,i.key,n);e.getState().user?.id&&r.favoriteId&&(0,l.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),x=(0,o.NC)("ADD_FILE_FAVORITE"),U=(0,g.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(x(r)),{file:a,entrypoint:i,sectionId:o,fileBrowserEntryPoint:d}=r;(0,s.gB)(a.key,e.getState().selectedView.view,i,v.bk.FILE,a.editorType??"design",d);let u=G(e.dispatch,v.bk.FILE,!0,a.key,n,o,void 0,(0,E.D6)(e.getState().currentUserOrgId)),p=e.getState().user?.id;if(p){if(r.favoriteId&&r.sectionId)(0,l.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:v.bk.FILE,userId:p}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.teamId||e.getState().currentUserOrgId&&r.file.parentOrgId){let n=(0,c.h7)(b.F.toSinatra(a));(0,l.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${a.key}`]:{userId:p,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:a.key,resourceType:v.bk.FILE,readableFile:n}}},u)}}}),B=(e,r,n,a,i)=>u.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:a}).then(()=>{let r=i?(0,m.t)("tile.favoriting.file_removed_from_sidebar"):(0,m.t)("tile.favoriting.file_removed_from_favorites"),a=i?(0,m.t)("tile.favoriting.file_added_to_sidebar"):(0,m.t)("tile.favoriting.file_added_to_favorites");e(h.F.enqueue({message:n?a:r}))}).catch(r=>{let n=(0,_.J)(r);if(n)try{e(h.F.enqueue({message:n}))}catch(r){e(p.s.error("An error occurred while favoriting this item"))}}),G=(e,r,n,a,o,s,l,c)=>u.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:a,page_id:l,section_id:s}).then(()=>{if(o&&e(i.c(o)),c||r!==v.bk.FILE){let r=n?(0,m.t)("sidebar.item_added_bell_message"):(0,m.t)("sidebar.item_removed_bell_message");e(h.F.enqueue({message:r}))}}).catch(r=>{let a=(0,_.J)(r);if(a){o&&e(i.r(o));try{e(h.F.enqueue({message:a}))}catch(a){let r=n?"favoriting this item":"removing this favorite";e(p.s.error(`An error occurred while ${r}`))}}}),V=e=>((0,s.j4)(e.favorited_resource_ids),u.Ay.del("/api/favorited_resources",d.td.toAPIParameters(e)));(0,g.nF)((e,r)=>{V({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))})});let H="optimistic-id-custom-section-id"},495105:(e,r,n)=>{n.d(r,{EG:()=>l,Ji:()=>i,lr:()=>o,qC:()=>s});var a=n(60074);let i=(0,a.NC)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,a.NC)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,a.NC)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,a.NC)("FIGJAM_SET_QUICK_ACCESS_TOOL")},558038:(e,r,n)=>{n.d(r,{fC:()=>m,o2:()=>u,s7:()=>p});var a=n(60074),i=n(151223),o=n(514019),s=n(566726),l=n(35597),c=n(922484),d=n(46290);let u=(0,a.NC)("UPDATE_FACE_STAMPS"),p=(0,a.NC)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,i.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&_(e)});let m="FETCH_FIGJAM_DEFAULT_INSERTS";async function _(e){let r=e.getState();if((0,c.Sc)(r.loadingState,m)){e.dispatch(l.Cx({key:m}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),a=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],i=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(p(n.data.meta)),e.dispatch(s.Vx(a)),e.dispatch(s.uV(i));let u={},_={};i.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(_[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(_)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:m}))}catch(r){e.dispatch(l.of({key:m}))}}}},807949:(e,r,n)=>{n.d(r,{$m:()=>Y,FE:()=>B,GZ:()=>j,Lk:()=>el,Nw:()=>Q,PB:()=>en,PF:()=>$,Rh:()=>W,S:()=>J,SQ:()=>q,U2:()=>et,YW:()=>H,Yn:()=>X,Yp:()=>ee,ZN:()=>z,bE:()=>er,c3:()=>es,jO:()=>U,og:()=>G,rA:()=>K,sF:()=>V,uo:()=>ea,yJ:()=>ei});var a=n(289644),i=n(559389),o=n(186606),s=n(19180),l=n(60074),c=n(29188),d=n(446470),u=n(637640),p=n(615233),m=n(183603),_=n(458608),h=n(748008),g=n(287105),f=n(810503),E=n(304756),y=n(97481),b=n(314979),v=n(967688),T=n(952039),I=n(151223),S=n(31898),A=n(353231),w=n(587745),C=n(633468),N=n(480945),L=n(55116),O=n(806349),R=n(584347),P=n(606672),D=n(569556),k=n(7905),M=n(634617),F=n(944239),x=n(529848);function U(e){return void 0!==e.file_repo}function B(e,r){return E.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{o.Ez5?.canvasViewState().thumbnailNodeId.set(r)})}let G=(0,I.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=k.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(T.F.enqueue({message:(0,v.t)("file_permissions.generic_error"),error:!0})),(0,p.b5)())throw n}),a=r.file,i={...(0,O.Ns)(a,a.key),...(0,O.yT)(a,r.linkExpirationConfigId,r.currentUser)},o=(0,O.TP)(a,r.linkExpirationConfigId,r.currentUser);Object.keys(i).length>0&&(0,m.WB)().optimisticallyUpdate(i,n),o&&(0,m.WB)().optimisticallyCreate(o,n)}),V=(0,l.NC)("FILE_PERMISSIONS_PUT"),H=(0,I.nF)(async(e,r)=>{let n=e.getState(),i={},o=r.file,l=r.folderId||o.folderId,d=!1;if(l){let e=(0,h.oA)((await (0,_.Ek)(L.zCd,{projectId:l})).project);d=!!e&&!!o.editorType&&(0,y.d6)(e,o.editorType)}d&&(i.folder_id=l),r.versionId&&(i.version_id=r.versionId),e.dispatch(T.F.enqueue({type:"file_duplicating",message:(0,v.t)("visual_bell.duplicating")})),E.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,g.lF)(i)}`).then(i=>{e.dispatch(T.F.dequeue({}));let l=!!n.openFile;if(!i.data.error&&i.data.meta&&l){let l=i.data.meta;if((0,A.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:l.key,duplicatedContainingFolderId:l.folder_id,duplicatedFileTeamId:l.team_id}),!(0,s.k)().cms_duplication&&(0,s.k)().dakota_collection_share_on_file_duplicate_internal)for(let e of r.cmsCollectionIds??[])D.A2.connectCollectionToFile({fileKey:l.key,collectionId:e});if(r.checkOssSalesExperiment&&(0,R.Lb)(l.key),c.eD){c.eD.openFile({fileKey:l.key,title:l.name,fileEditorType:l.editor_type,target:a.OpenTarget.FOCAL_TAB,isBranch:(0,w.Xm)(l),isLibrary:!!l.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}u.Ay.redirect((0,C.to)(l),"_blank")}}).catch(()=>{e.dispatch(T.F.dequeue({})),e.dispatch(b.s.error((0,v.t)("file_browser.file_browser_actions.file_copy_error")))})}),z=(0,I.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||k.S.getFiles({fileKey:n}).then(r=>e.dispatch(ei({file:r.data.meta}))))}),K=(0,I.nF)(async(e,r)=>{try{await E.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),W=(0,I.nF)(async(e,r,{liveStore:n})=>{let a=await n.fetchFile(r.fileKey),i=E.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(T.F.enqueue({message:(0,v.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,v.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(J({fileKey:r.fileKey,url:(0,C.to)(a),source:N.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(T.F.enqueue({message:(0,v.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,m.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},i)}}),j=(0,I.nF)(async(e,r)=>{await E.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:a,last_edit_at:i}=n.meta;e.dispatch(x.FB({lastViewed:a,lastEdited:i})),e.dispatch((0,P.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,f.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),Y=(0,I.nF)((e,r)=>{B(r.file_key,r.thumbnail_guid).then(()=>{let n=(0,s.k)().dse_library_pg_thumbnails?r.thumbnail_guid?(0,v.t)("file_browser.file_browser_actions.file_thumbnail_set"):(0,v.t)("file_browser.file_browser_actions.default_file_thumbnail_restored"):r.thumbnail_guid?(0,v.t)("file_browser.file_browser_actions.thumbnail_set"):(0,v.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(T.F.enqueue({message:n}))}).catch(()=>{e.dispatch(T.F.enqueue({message:(0,v.t)("file_browser.error_try_again"),error:!0}))})}),$=(0,l.NC)("FILE_RESTORE"),q=(0,I.nF)((e,r)=>{let{fileKey:n,version:a}=r,i=e.getState().versionHistory.versions.filter(e=>e.created_at).sort((e,r)=>e.created_at<r.created_at?-1:1),o=i.findIndex(e=>e.id===a.id);if(-1===o||0===o){e.dispatch(b.s.error("Unable to find version to restore"));return}let s=i[o-1];s?e.dispatch($({fileKey:n,versionId:s.id})):e.dispatch(b.s.error("Unable to find version to restore"))}),X=(0,I.nF)((e,r)=>{(0,d.Dk)(r.embedCode).then(()=>{(0,A.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(T.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,v.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(b.s.error((0,v.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),J=(0,F.n)((0,I.nF)((e,r)=>{let n;let a=r.url,i=r.label;if(i){let e=document.createElement("a");e.href=a,e.innerText=i;let r=e.outerHTML;n=(0,d.wY)(r,a)}else n=(0,d.Dk)(a);n.then(()=>{(0,A.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:N.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(T.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,v.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(S.to({type:M.o,data:{link:a}}))})})),Z=e=>e.replace(/[\r\n]+/g," "),Q=(0,I.nF)((e,r)=>{let n=Z(r.name);if(n.length<=100){let a={key:r.file.key,name:n,updated_at:new Date().toISOString()};e.dispatch(ei({file:a,userInitiated:!0})),(0,A.ds)("File Renamed",a.key,e.getState(),{fileName:a.name})}}),ee=(0,l.NC)("FILE_REMOVE_FROM_PROJECT"),et=(0,l.NC)("FILE_MOVE"),er=(0,l.NC)("FILE_POST"),en=(0,l.NC)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),ea=(0,l.NC)("FILE_BATCH_PUT"),ei=(0,l.NC)("FILE_PUT"),eo=(0,i.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&E.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let a=r.getState();for(let i in e){if(n&&a.activeFileUsers&&i in a.activeFileUsers)continue;let o=e[i],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(el({fileKey:i,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,I.nF)((e,r)=>{eo(r.fileKeys,e)});let es=(0,l.NC)("FILE_CLEAR_ACTIVE_USERS"),el=(0,l.NC)("FILE_SET_ACTIVE_USERS")},447651:(e,r,n)=>{n.d(r,{ah:()=>s});var a=n(183603),i=n(304756),o=n(151223);function s(e,r,n,i,o){e.id&&"optimistic-id"!==e.id?a.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&a.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,o.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentUserOrgId,o=e.getState().currentTeamId,l=i.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:a,team_id:o,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});s(r.prefs,n,a,o,l)}),(0,o.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentTeamId,o=r.teamUser,l=r.prefs.orderedFavoritedResourceIds,c=[];if(l)for(var d of l)(o.favoritedFiles?.some(e=>e.id===d)||o.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=o.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let p=i.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:a});s({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,a,p)})},422444:(e,r,n)=>{n.d(r,{Dl:()=>ei,Dw:()=>X,Ef:()=>Y,Fs:()=>$,RH:()=>ea,UN:()=>j,V3:()=>z,Z8:()=>et,_l:()=>V,cz:()=>Q,dm:()=>W,gN:()=>K,gR:()=>H,hm:()=>B,kg:()=>q,l7:()=>en,q0:()=>G,qj:()=>U,rg:()=>er});var a=n(19180),i=n(334704),o=n(989232),s=n(398612),l=n(29188),c=n(637640),d=n(849326),u=n(227276),p=n(304756),m=n(314979),_=n(967688),h=n(952039),g=n(193544),f=n(740495),E=n(353231),y=n(913026),b=n(459403),v=n(14837),T=n(677334),I=n(10096),S=n(656320),A=n(411910),w=n(422232),C=n(190731),N=n(872240),L=n(175957),O=n(400652),R=n(478654),P=n(27685),D=n(680807),k=n(192323),M=n(151223),F=n(453370),x=n(31898);let U=(0,M.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,x.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,F.oB)()),e.dispatch((0,F.DE)({show:!0})),r?.until.then(()=>{e.dispatch(F.DE({show:!1}))}),g.q_.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),B=(0,M.nF)(e=>{R.H.getState().then(r=>{e.dispatch((0,F.os)(r.data.meta)),e.dispatch(G(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,_.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(h.F.enqueue({error:!0,message:n}))})}),G=(0,M.nF)((e,r)=>{new d.P().sendToOtherTabs(O.y,r)}),V=(0,M.nF)((e,r)=>{let n=e.getState(),a=r.view||{view:"recentsAndSharing"},i=(0,S.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},a),o=!(0,y.d9)(n.selectedView)&&(0,y.d9)(a);if(l.eD&&o){l.eD.openCommunity(i,r.workspace.userId);return}function d(){let e=(0,y.d9)(n.selectedView)&&!(0,y.d9)(a);l.eD&&e&&c.Ay.redirect((0,s.dR)((0,S.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(U()),r.path){(0,E.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),c.Ay.redirect((0,s.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,E.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:a.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!i.includes(r.workspace.orgId)||r.workspace.teamId&&!i.includes(r.workspace.teamId)||(0,y.d9)(a)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,A.Y9)(r.workspace.userId,(0,y.d9)(a),r.workspace.orgId,void 0,r.workspace.teamId),(0,b.ck)()?k.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(c.Ay.redirect((0,s.dR)(i,{fuid:r.workspace.userId})),d())});(0,M.nF)(e=>{p.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,a=`/app_auth/${n}/grant`,i=e.getState().authedUsers.orderedIds;i.length>0&&(a+=`?authed_ids=${i.join(",")}`),l.eD?.startAppAuth(a),e.dispatch(h.F.enqueue({message:(0,_.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(h.F.enqueue({message:(0,_.t)("file_browser.error_try_again"),error:!0}))})}),(0,M.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,F.j7)(r))});let H=(0,M.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,F.oB)()):e.dispatch((0,F.j7)(r))}),z=(0,M.nF)((e,r)=>{(0,v.T)()?(0,w.Qn)(r.url):c.Ay.redirect(r.url,"_blank")});function K(e,r={}){return(0,F.$T)({view:"folder",folderId:e,...r})}function W(e,r={},n){return(0,F.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,M.nF)((e,{index:r})=>{(0,o.trackEvent)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let j=(0,M.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:a,currentSharedByFilter:i,viewMode:o})=>{(0,E.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:a?.planId,planFilterType:a?.planType,sharedByFilter:i,viewMode:o})}),Y=(0,M.nF)(e=>{(0,E.uE)("Font Installer Downloaded",e.getState())}),$=(0,M.nF)(e=>{(0,E.uE)("Font Uninstaller Downloaded",e.getState())}),q=(0,M.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,E.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});T.M4.Query({fetch:async e=>(await D.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(C.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,M.nF)((e,{orgId:r,teamId:n},{loadingKey:a})=>{let i=P.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,I.N)(i,e,a),i.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,F.pB)({deletedFiles:n.meta.files})),e.dispatch((0,F.pg)({deletedRepos:n.meta.repos}))})});let X=(0,M.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:i,isEduTeam:o,ignoreCurrentPlan:s})=>{let l=e.getState();if(n){let r=(0,S.xS)(l,{view:"teamCreation",ignoreCurrentPlan:s});e.dispatch(z({url:r}));return}if(l.user&&(0,a.k)().close_starter_team_loophole){let n=(0,u.hW)("starter_team_loophole_experiment_m0"),a=(0,u.hW)("starter_team_loophole_experiment_m1"),[i,c]=await Promise.all([n,a]);if((0,f.e5)({userId:l.user.id,teams:Object.values(l.teams),rolesByTeamId:l.roles.byTeamId,getM0Config:()=>i,getM1Config:()=>c})){e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:o,ignoreCurrentPlan:s}));return}}l.user&&(0,f.Mk)(l.user.id,Object.values(l.teams),l.roles.byTeamId)?e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:o,ignoreCurrentPlan:s})):e.dispatch((0,F.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:i,isEduTeam:o,ignoreCurrentPlan:s}))}),J=["fullscreen","prototype"],Z=[...L.gu,"desktopNewTab"];function Q(e,r){if(J.includes(e.view));else if(Z.includes(e.view))return!0;else if(r&&r.includes(e.view))return!0;return!1}let ee=null,et=(0,M.nF)((e,r)=>{ee&&Q(r.selectedView,ee.additionalViewsToReload)&&c.Ay.reload(ee.reason,ee.metadata)});function er(){return null!=ee}function en(){ee=null}var ea=(e=>(e[e.DEFAULT=2e3]="DEFAULT",e[e.NONE=0]="NONE",e))(ea||{});let ei=(0,M.nF)(async(e,r)=>{await (0,i.fm)(r.delay),Q(e.getState().selectedView,r.additionalViewsToReload)?c.Ay.reload(r.reason,r.metadata):ee={reason:r.reason,metadata:r.metadata,additionalViewsToReload:r.additionalViewsToReload}});(0,M.nF)((e,r)=>{let n=e.getState().selectedView;"orgSelfServe"===n.view?e.dispatch((0,F.$T)({view:n.view,step:n.step,orgMigrated:!0,upsellSource:n.upsellSource})):e.dispatch(ei(r))});let eo=(0,M.nF)(async(e,r)=>{await (0,i.fm)(r.delay),c.Ay.redirect("/")});(0,M.nF)((e,r)=>{e.dispatch(m.s.flash((0,_.t)("org_settings.mfa_for_members.member_flash"))),e.dispatch(eo(r))})},679111:(e,r,n)=>{n.d(r,{$l:()=>k,$o:()=>I,HA:()=>w,IU:()=>N,Kc:()=>P,MR:()=>A,Q2:()=>v,TI:()=>F,WC:()=>x,ZJ:()=>O,bE:()=>M,gO:()=>S,ub:()=>b,vt:()=>L,y2:()=>R,yH:()=>C,yJ:()=>D,z6:()=>T});var a=n(60074),i=n(751561),o=n(304756),s=n(314979),l=n(967688),c=n(952039),d=n(453370),u=n(31898),p=n(353231),m=n(249726),_=n(318147),h=n(89140),g=n(94831),f=n(63767),E=n(151223),y=n(768623);let b=(0,E.nF)((e,r)=>o.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(D({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_subscription_error")))})),v=(0,a.NC)("FOLDER_UNPIN_FILE"),T=(0,E.nF)((e,r)=>{let n=e.optimisticDispatch(v(r));return o.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_unpin_error")))})}),I=(0,a.NC)("FOLDER_PIN_FILE"),S=(0,E.nF)(async(e,r)=>{let n=e.optimisticDispatch(I(r));(0,p.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await o.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(c.F.enqueue({error:!1,message:(0,l.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_pin_error")))})}),A=(0,a.NC)("FOLDER_SET_PINNED_FILE"),w=(0,a.NC)("FOLDER_DELETE_LG_SHIM"),C=(0,a.NC)("FOLDER_DELETE"),N=(0,a.NC)("FOLDER_CLEAR"),L=(0,E.nF)((e,r)=>{let n=(0,m.SS)(r.name);if(n)return e.dispatch(s.s.error(n)),null;if(e.dispatch(u.Lo()),e.dispatch(d.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(s.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let a={id:(0,m.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null,trashed_user_id:null,is_abandoned_drafts:!1},c=o.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(C({folderIds:[a.id]}));let i=n.meta;for(let n of i)if(n.name===r.name){e.dispatch(M(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,p.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let a=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,h.rq)({emails:r.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:_.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||g.e6.VIEWER,source:"new_project_creation_modal",teamId:r.teamId})),f.G.getRoles({resourceId:n.id,resourceType:_.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(y.bE({role:n}))}),r.shouldRedirect&&e.dispatch(d.$T({view:"folder",folderId:n.id}));break}return i});return(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:M(a)})}),O=(0,E.nF)((e,{folderId:r,teamId:n,isSubscribed:a})=>{let s=a?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,p.xr)(s,r,n,e.getState());let c=o.Ay.put(`/api/folders/${r}`,{is_subscribed:a});(0,i.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:D({folder:{id:r,is_subscribed:a}})})});(0,a.NC)("FOLDER_LOAD");let R=(0,a.NC)("FOLDER_PUT_UPDATED_AT"),P=(0,a.NC)("FOLDER_LOADED"),D=(0,a.NC)("FOLDER_PUT"),k=(0,a.NC)("FOLDER_BATCH_POST"),M=(0,a.NC)("FOLDER_POST"),F=(0,a.NC)("FOLDER_STOP_RENAME"),x=(0,a.NC)("FOLDER_BEGIN_RENAME")},244534:(e,r,n)=>{n.d(r,{Bs:()=>en,CN:()=>eE,D9:()=>V,Dr:()=>J,FP:()=>B,Gm:()=>x,J4:()=>eg,JM:()=>G,Jt:()=>k,Kx:()=>W,M3:()=>eC,Mt:()=>Y,OB:()=>eL,PQ:()=>P,Ql:()=>X,Qm:()=>ev,R5:()=>F,Rw:()=>R,ST:()=>O,U8:()=>z,UC:()=>eN,UM:()=>eh,Uv:()=>$,VB:()=>es,Wk:()=>ei,XE:()=>et,XQ:()=>ep,Y:()=>j,Y6:()=>em,Z1:()=>ey,Z_:()=>e_,aK:()=>eb,bO:()=>eA,bS:()=>q,eH:()=>ew,fG:()=>K,fk:()=>ec,fy:()=>el,ho:()=>eO,il:()=>H,kP:()=>eu,lp:()=>eT,lz:()=>M,nA:()=>eS,nN:()=>ea,p5:()=>ed,pj:()=>D,re:()=>ef,sx:()=>U,u1:()=>er,vg:()=>eo,yv:()=>eI});var a=n(186606),i=n(19180),o=n(60074),s=n(989232),l=n(398612),c=n(29188),d=n(637640),u=n(615233),p=n(251067),m=n(66699),_=n(967688),h=n(453370),g=n(31898),f=n(500974),E=n(142896),y=n(353231),b=n(303397),v=n(516404),T=n(478054),I=n(474132),S=n(656320),A=n(361053),w=n(434289),C=n(129723),N=n(89220),L=n(151223);let O=(0,o.NC)("CLEAR_SELECTED_VIEW_COMMENT_ID"),R=(0,o.NC)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),P=(0,o.NC)("RECENTLY_USED_QUICK_COMMANDS"),D=(0,o.NC)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),k=(0,o.NC)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),M=(0,o.NC)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),F=(0,o.NC)("FULLSCREEN_SET_HYPERLINK_POPUP"),x=(0,o.NC)("FULLSCREEN_SET_EYEDROPPER"),U=(0,L.nF)((e,r)=>{let n=e.getState(),a=r.params||{},{fileKey:i}=n.selectedView;(0,y.ds)(r.name,i??null,n,a)}),B=(0,o.NC)("FULLSCREEN_SET_LEFT_PANEL_TAB"),G=(0,o.NC)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),V=(0,o.NC)("FULLSCREEN_HIDE_UPGRADE_BANNER"),H=(0,o.NC)("FULLSCREEN_SHOW_UPGRADE_BANNER"),z=(0,o.NC)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),K=(0,o.NC)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),W=(0,o.NC)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),j=(0,L.nF)((e,r)=>{(0,s.trackEvent)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch(W(r))}),Y=(0,o.NC)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),$=(0,o.NC)("FULLSCREEN_HIDE_STYLE_PICKER"),q=(0,o.NC)("FULLSCREEN_SHOW_STYLE_PICKER"),X=(0,o.NC)("FULLSCREEN_HIDE_PICKER"),J=(0,o.NC)("FULLSCREEN_SHOW_PICKER");function Z(e){return e&&e.startsWith(E.F7)}function Q(e){return e&&e.startsWith(E.yJ)}function ee(e,r,n){let i=e&&e.id,o=r&&r.id,l=i!==E.k8&&o===E.k8,c=i===E.k8&&o!==E.k8,d=i!==E.$T&&o===E.$T,u=i===E.$T&&o!==E.$T,p=i!==E.AB&&i!==E.h2&&(o===E.AB||o===E.h2),m=(i===E.AB||i===E.h2)&&o!==E.AB&&o!==E.h2,_=i!==E._V&&o===E._V,h=i===E._V&&o!==E._V,g=!Z(i)&&Z(o),y=Z(i)&&!Z(o),v=!Q(i)&&Q(o),T=Q(i)&&!Q(o);l?a.Ez5?.uiState().backgroundPickerOpen.set(!0):c?a.Ez5?.uiState().backgroundPickerOpen.set(!1):d?b.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?b.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):p?(a.Ez5?.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,s.trackEvent)("Type Details Panel Opened")):m&&a.Ez5?.propertiesPanelState().typeDetailsPanelOpen.set(!1),g?a.Osy?.setIsPaintPickerOpen(!0):y&&a.Osy?.setIsPaintPickerOpen(!1),v?a.Osy?.setIsStylePickerOpen(!0):T&&a.Osy?.setIsStylePickerOpen(!1),_?a.Ez5?.uiState().minMaxModalShown.set(!0):h&&a.Ez5?.uiState().minMaxModalShown.set(!1),y&&n(f.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let et=(0,L.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(X()),ee(r,e.getState().pickerShown,e.dispatch)}),er=(0,L.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(J(r)),ee(n,e.getState().pickerShown,e.dispatch)}),en=(0,o.NC)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),ea=(0,o.NC)("FULLSCREEN_UPDATE_FONT_LIST"),ei=(0,o.NC)("FULLSCREEN_STOP_RENAMING"),eo=(0,o.NC)("FULLSCREEN_BEGIN_RENAMING"),es=(0,L.nF)((e,r)=>{let n=e.getState(),i=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==a.E63.SUPPRESS_UNSAVED_CHANGES_UI){if(!(0,T.Ed)(()=>e.dispatch(ew()))){let r=(0,_.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(g.to({type:N.v,data:{message:r}}))}d.Ay.push((0,S.Np)(n,i),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,u.tl)().release_manifest_git_commit}),e.dispatch(h.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===a.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,s.trackEvent)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(h.$T({...i,fromPopstate:!0}))}),el=(0,o.NC)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),ec=(0,o.NC)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),ed=(0,o.NC)("FULLSCREEN_UPDATE_MIRROR"),eu=(0,o.NC)("FULLSCREEN_SET_NEEDS_UPGRADE"),ep=(0,o.NC)("FULLSCREEN_SET_FILE_VERSION"),em=(0,o.NC)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),e_=(0,o.NC)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),eh=(0,o.NC)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),eg=(0,L.nF)((e,r)=>{void 0!==r.allUsers&&(v.k6(r.allUsers.length,r.presenterSessionID),(0,m.YQ)({id:w.M8})),e.dispatch(eh(r))}),ef=(0,o.NC)("FULLSCREEN_SHOW_DOWNTIME_BANNER"),eE=(0,o.NC)("FULLSCREEN_HIDE_DOWNTIME_BANNER"),ey=(0,o.NC)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),eb=(0,o.NC)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),ev=(0,o.NC)("FULLSCREEN_RECONNECTING_SUCCEEDED"),eT=(0,L.nF)(e=>{v.Dg(),e.dispatch(ev())}),eI=(0,o.NC)("FULLSCREEN_RECONNECTING_STARTED"),eS=(0,L.nF)(e=>{v.Ug(),e.dispatch(eI())}),eA=(0,o.NC)("FULLSCREEN_ATTEMPT_CLOSE"),ew=(0,L.nF)((e,r)=>{if(c.eD){c.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&c.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(l.GZ()){if((0,i.k)().integ_zoom_allow_file_switching&&(0,p.LR)())return;d.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:o,selectedView:s}=n,u=o?.project?.id,m={view:"recentsAndSharing"};if(o&&s){if("fullscreen"===s.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===C.O.ORG?o?.parentOrgId:o?.teamId)){let e=(0,S.xS)(n,m);s.prevSelectedView&&(e=(0,S.xS)(n,s.prevSelectedView));let r=(0,I.nX)(e),a=(0,A.Eq)(e);(r||a)&&(e=(0,S.Tk)(e,r?C.O.ORG:C.O.TEAM,r||a,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),d.Ay.redirect(e);return}"fullscreen"===s.view&&s.prevSelectedView?m=s.prevSelectedView:o&&u&&(m={view:"folder",folderId:u})}if(a.Ez5?.uiState().isRecovery.getCopy()){let e=(0,S.xS)(n,m);d.Ay.redirect(e)}b.Y5.dispatchIfSaved(h.$T(m)),v.V(),e.dispatch(eA(r))}),eC=(0,o.NC)("FILE_SELECTED_SHARE_MODAL_TAB"),eN=(0,o.NC)("UPDATE_OPEN_FILE"),eL=(0,o.NC)("NEW_FILE_LOADED"),eO=(0,o.NC)("FULLSCREEN_OPEN")},217035:(e,r,n)=>{n.d(r,{HF:()=>h,QA:()=>y,TW:()=>f,Zv:()=>_,kE:()=>m,mH:()=>g,tG:()=>p,zs:()=>E});var a=n(167920),i=n(60074),o=n(304756),s=n(967688),l=n(210853),c=n(952039),d=n(151223),u=n(302982);let p=(0,i.NC)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),m=(0,i.NC)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),_=(0,i.NC)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),h=(0,i.NC)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,d.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:a}=r,i=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=i;if(!l||!c||!i.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await a(d),e.dispatch(_({resourceType:c,resourceId:l,comments:d}))});let g=(0,i.NC)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,i.NC)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let f=(0,i.NC)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),E=(0,i.NC)("GENERIC_COMMENT_SUBMIT");(0,d.nF)(async(e,r)=>{let{messageMeta:n,resourceId:a,resourceType:i,onSuccess:d,onError:m,clientMeta:_,pageId:h,parentId:g,isReply:y}=r;await o.Ay.post("/api/community_comments",{message_meta:n,resource_id:a,resource_type:i,client_meta:_,page_id:h,parent_id:g}).then(({data:r})=>{e.dispatch(p({comment:r.meta,resourceId:a,resourceType:i,isReply:y})),d&&d(r.meta)}).catch(r=>{let n=(0,l.J)(r);n&&(e.dispatch(c.F.enqueue({error:!0,message:(0,s.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),g?e.dispatch(f({commentId:g})):e.dispatch(f({commentId:u.hm})),m&&m())}),e.dispatch(E(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let y=(0,d.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:i,messageMeta:l,callback:d,clientMeta:u}=r;await o.Ay.put(`/api/community_comments/${i}`,{message_meta:l,client_meta:u}).then(({data:r})=>{e.dispatch(a.c(n)),d(r.meta),e.dispatch(m({comment:r.meta}))}).catch(r=>{e.dispatch(a.r(n)),e.dispatch(c.F.enqueue({message:(0,s.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,d.nF)((e,r,{loadingKey:n})=>{let{commentId:a,onFinish:i}=r,{type:d,id:u}=e.getState().communityHub.comments;if(null===d||null===u)return;let p=e.getState().communityHub.comments.commentsById[a];o.Ay.del(`/api/community_comments/${a}`).then(()=>{e.dispatch(_({resourceType:d,resourceId:u,comments:[p]})),e.dispatch(c.F.enqueue({message:(0,s.t)("community.comments.comment_deleted")})),i?.(!1)}).catch(r=>{let n=(0,l.J)(r);n&&(e.dispatch(c.F.enqueue({error:!0,message:(0,s.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),i?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,d.nF)((e,r)=>{let n;let{commentId:a,userIsAdmin:i,onFinish:d}=r,{type:u,id:p}=e.getState().communityHub.comments;null!==u&&null!==p&&(i&&(n={hide:!0}),o.Ay.post(`/api/community_comments/${a}/report`,n).then(()=>{e.dispatch(h({commentId:a,resourceId:p,resourceType:u})),e.dispatch(c.F.enqueue({message:(0,s.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),d?.(!1)}).catch(r=>{let n=(0,l.J)(r);n&&(e.dispatch(c.F.enqueue({message:(0,s.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),d?.(!0))}))})},24052:(e,r,n)=>{n.d(r,{f:()=>p});var a=n(314979),i=n(967688),o=n(952039),s=n(31898),l=n(10096),c=n(4478),d=n(345416),u=n(151223);let p=(0,u.nF)((e,{fileKey:r,emailAddress:n,isResentEmail:s,onSuccess:d},{loadingKey:u})=>{let p=c.L.setClaimEmail({fileKey:r,emailAddress:n});(0,l.N)(p,e,u),p.then(()=>{if(s){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}d?.(n)}).catch(r=>{if(r.data?.message==="Hit Claim Email Job timeout lock"){e.dispatch(o.F.enqueue({message:(0,i.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(a.s.error((0,i.t)("google_device_try_file_modal.enter_email.failed_to_send")))})});(0,u.nF)((e,{fileKey:r},{loadingKey:n})=>{let o=c.L.claimDeviceFile({fileKey:r});(0,l.N)(o,e,n),o.then(()=>{e.dispatch(s.to({type:d.$,data:{}}))}).catch(r=>{e.dispatch(a.s.error((0,i.t)("google_device_try_file.save_board.generic_error")))})})},466930:(e,r,n)=>{n.d(r,{QC:()=>B,fi:()=>F,zK:()=>U});var a=n(871043),i=n(938982),o=n(19180),s=n(382902),l=n(615233),c=n(998568),d=n(304756),u=n(6068),p=n(331210),m=n(151223),_=n(807949),h=n(834428),g=n(813147),f=n(35597),E=n(106358),y=n(277454),b=n(142250),v=n(294490),T=n(160769),I=n(922484),S=n(656320),A=n(411910),w=n(259964),C=n(720722),N=n(475166),L=n(180495),O=n(925144);let R=new Map;async function P(e,r){let n=(0,S.zg)(e.getState().selectedView),a=!(0,l.Ay)().user_data;if(a&&!n)return;if((R.get(r)||0)>20){(0,y.LC)();return}let d=(0,O.yD)(r);if(!(0,I.Sc)(e.getState().loadingState,d)){(0,y.LC)();return}e.dispatch(f.Cx({key:d}));let u=e.getState();try{let n=u.selectedView.editorType,l=function(e){switch(e){case w.nT.Whiteboard:return"figjam";case w.nT.Slides:return"slides";case w.nT.Cooper:return"cooper";default:return"design"}}(n),m=L.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:l}),[g]=await Promise.all([m]);a||await A.kb.promise,e.dispatch(_.uo({files:g.data.meta.files,subscribeToRealtime:!0})),g.data.meta.files.forEach(e=>{(0,y.Ve)(e.key)});let b=s.zl.get(E.qp),T=g.data.meta.hub_files;T&&(T.forEach(e=>{(0,y.Ve)(e.id)}),e.dispatch((0,p.D3)(T)));let I=g.data.meta.state_groups.map(e=>({...e,team_id:b[e.library_key]?.team_id})),S=g.data.meta.components.map(e=>({...e,team_id:b[e.library_key]?.team_id}));if(e.dispatch(h.uo({items:I,type:C.PW.STATE_GROUP})),e.dispatch(h.uo({items:S,type:C.PW.COMPONENT})),(0,o.k)().dse_lk_realtime_audit){let e=S.filter(e=>!e.library_key),r=I.filter(e=>!e.library_key);(e.length>0||r.length>0)&&(0,c.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("Missing library keys for components or state groups"),{tags:{numComponentsWithMissingLibraryKeys:e.length,numStateGroupsWithMissingLibraryKeys:r.length}})}(0,y.LC)(),e.dispatch(f.x2({key:d})),v.YG.queryDidChange(e)}catch(n){(0,y.LC)(),R.set(r,(R.get(r)||0)+1),e.dispatch(f.of({key:d}))}}async function D(e){let r=e.getState().openFile;if(!r)return;let n=(0,y.iw)(r.key),i=e.getState().loadingState;if(!((0,I.D2)(i,n)||(0,I.VP)(i,n))){e.dispatch(f.Cx({key:n}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let i=await L.Z.getDefaultLibraries({editorType:(0,w.Bu)(r.editorType)});M(e,i.data.meta.components,C.PW.COMPONENT),M(e,i.data.meta.state_groups,C.PW.STATE_GROUP),i.data.meta.files.forEach(r=>{r.team_id=C.Yu,e.dispatch(_.yJ({file:r}))});let o=i.data.meta.files.map(b.l).filter(a.Vq);e.dispatch(h.lx({libraryKeys:o})),(0,y.kG)(),e.dispatch(f.x2({key:n}))}catch(r){(0,y.kG)(),e.dispatch(f.of({key:n})),v.YG.queryDidChange(e)}}}let k=(0,u.f)(),M=(e,r,n)=>{let a={[C.Yu]:{}},i={};r.forEach(e=>{let r=k(e=(0,T.aV)(e));a[C.Yu][r]=a[C.Yu][r]||{},a[C.Yu][r][e.node_id]=e,(i[e.library_key]??={})[e.node_id]=e}),e.dispatch(h.Ho({publishedItemsByTeamId:a,publishedItemsByLibraryKey:i,type:n}))};(0,m.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let a=e.getState().selectedView;a&&"fullscreen"===a.view&&(a.editorType===w.nT.Whiteboard||a.editorType===w.nT.Slides||a.editorType===w.nT.Cooper?D(e):(0,y.kG)(),n&&x(e,a.editorType===w.nT.Whiteboard?N.$A.FigJam:N.$A.Design)),n&&(e.dispatch(g.tg()),g.xZ(e))});let F="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function x(e,r){let n;if((0,I.VP)(e.getState().loadingState,F))return;e.dispatch(f.Cx({key:F}));let a=e.getState();if("fullscreen"!==a.selectedView.view){e.dispatch(f.x2({key:F}));return}let i=new Set,o=new Set;for(let e of a.recentlyUsed.libraryItems[r]){let r=e.library_key;e.type===C.PW.COMPONENT&&e.key&&!a.library.publishedByLibraryKey.components[e.team_id]?.[r]?.[e.node_id]?i.add(e.key):e.type===C.PW.STATE_GROUP&&e.key&&!a.library.publishedByLibraryKey.stateGroups[e.team_id]?.[r]?.[e.node_id]&&o.add(e.key)}if(0===i.size&&0===o.size){e.dispatch(f.x2({key:F}));return}try{n=await d.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(i),state_group_keys:Array.from(o),org_id:a.openFile?.parentOrgId})}catch(r){e.dispatch(f.of({key:F}));return}e.dispatch(f.x2({key:F})),e.dispatch(_.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(h.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let l=s.zl.get(E.qp);g.VF(n.data.meta.components,C.PW.COMPONENT,l,e.dispatch),g.VF(n.data.meta.state_groups,C.PW.STATE_GROUP,l,e.dispatch)}let U=(0,m.nF)(e=>{let r=e.getState().openFile;r&&P(e,r.key)});function B(e){e.dispatch(U())}},813147:(e,r,n)=>{n.d(r,{$h:()=>e$,AV:()=>e8,As:()=>e2,BK:()=>eW,Bs:()=>eZ,D6:()=>tb,EY:()=>tz,Ee:()=>eX,FU:()=>eq,Kd:()=>to,Kk:()=>tH,Ky:()=>ty,NW:()=>tM,Oe:()=>tn,PI:()=>tF,Qn:()=>e5,Tn:()=>tC,VF:()=>t$,Yb:()=>tA,Yf:()=>ta,Yi:()=>tr,Yx:()=>tk,Z:()=>tI,Zn:()=>tj,_K:()=>e7,a9:()=>th,b$:()=>eJ,e$:()=>tc,f$:()=>e9,ff:()=>tt,fv:()=>tT,jD:()=>ez,jR:()=>eQ,n8:()=>tV,nh:()=>e6,nz:()=>tD,rX:()=>e3,t5:()=>e4,tL:()=>tu,tg:()=>td,u7:()=>t_,uO:()=>ej,uP:()=>eK,wV:()=>tw,x:()=>tK,xZ:()=>tv,yA:()=>te,zn:()=>tE});var a=n(848318),i=n(301168),o=n(328813),s=n(938982),l=n(672154),c=n(673786),d=n(186606),u=n(659052),p=n(320953),m=n(861868),_=n(553547),h=n(562027),g=n(768618),f=n(19180),E=n(382902),y=n(223926),b=n.n(y),v=n(239910),T=n.n(v),I=n(60074),S=n(989232),A=n(648914),w=n(476254),C=n(637640),N=n(865114),L=n(410725),O=n(329228),R=n(87551),P=n(998568),D=n(810503),k=n(304756),M=n(66699),F=n(314979),x=n(967688),U=n(6068),B=n(952039),G=n(113752),V=n(151223),H=n(807949),z=n(834428),K=n(35597),W=n(31898),j=n(185531),Y=n(533737),$=n(271326),q=n(353231),X=n(67308),J=n(360430),Z=n(526867),Q=n(106358),ee=n(214638),et=n(94294),er=n(965686),en=n(162394),ea=n(303397),ei=n(76664),eo=n(579407),es=n(740267),el=n(205258),ec=n(626912),ed=n(277454),eu=n(964619),ep=n(55116),em=n(677334),e_=n(922484),eh=n(28589),eg=n(318427),ef=n(10096),eE=n(786835),ey=n(361053),eb=n(411910),ev=n(98157),eT=n(895222),eI=n(720722),eS=n(203155),eA=n(180495),ew=n(655530),eC=n(870545),eN=n(457905),eL=n(635020),eO=n(515092),eR=n(789253),eP=n(579123),eD=n(693964),ek=n(953413),eM=n(925144),eF=n(944239),ex=n(540990),eU=n(59892),eB=n(454272),eG=n(353581),eV=n(757109),eH=n(791879);async function ez(e,r=d.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===d.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:d.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let a=await Z.Eo.getCanvas(e);if(e.type===eI.PW.COMPONENT){let i=p.l7.system("upsert-shared-symbol",()=>d.BXd.upsertSharedSymbol(e.component_key??c.ii.INVALID,e.content_hash??c.F7.INVALID,e.library_key,d.zol.NO,a,r));if(!i||(0,o.Im)(i)||i.fileUpdateRequired)return;i.localGUID||(0,D.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"no local GUID in response",{response:JSON.stringify(i)},{reportAsSentryError:!0}),n=i.localGUID}else if(e.type===eI.PW.STATE_GROUP){let i=p.l7.system("upsert-shared-state-group",()=>d.BXd.upsertSharedStateGroup(e.key,e.version,e.library_key,d.zol.NO,a,r));if(!i||(0,o.Im)(i)||i.fileUpdateRequired)return;if(!i.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(i.C2)throw Error(i.C2);n=i.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:a}}let eK=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o,alwaysFetch:l,targetUpsertScene:c=d.ZiZ.ACTIVE_SCENE}=r,u=(0,X.d1)(e.getState());if(u){if(!(0,J.N2)(n,u)||l){let r=async()=>{try{let e=await ez(n,c);e&&(a?.(e.newSymbolOrStateGroupGuid),e.buffer&&i?.(e.buffer))}catch(r){e.dispatch(F.s.error((0,x.t)("banner.component_or_set_retrieval_error"))),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eU.jE.LOAD_COMPONENT}))}else a?.(n.node_id)}}),eW=(0,I.NC)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),ej=(0,V.nF)((e,r)=>{let{item:n,instanceGUIDs:a,usedSwapInstanceKeyboardShortcut:i,storeInRecentsKey:o,queryId:l}=r,c=(0,eM.Ml)(n,a);e.dispatch(K.Cx({key:c}));let u=e.getState(),m=(0,es.s)(u);e.dispatch(tF({storeInRecentsKey:o,item:n,userId:m}));let _=(0,X.d1)(u);if(!_){e.dispatch(K.of({key:c}));return}let h=async()=>{try{let r=await ez(n);if(r){let o=n.type===eI.PW.STATE_GROUP?d.glU.getSimilarStates(a,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:a};p.l7.user("replace-symbol-backing-instances",()=>{d.glU.replaceSymbolBackingInstances(o,i)}),e.dispatch(K.x2({key:c})),(0,ex.V)(_.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(K.of({key:c})),e.dispatch(F.s.error("An error occurred while adding an instance of this component.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),(0,ex.V)(_.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,q.ds)("Instance Swapped To Shared Component",_.key,e.getState(),{componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:l})};e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:h,source:eU.jE.SWAP_TO_COMPONENT})),e.dispatch(eW(r))});function eY(e){return e(B.F.enqueue({type:"insert_instance",message:(0,x.t)("design_systems.subscriptions.inserting_instance"),icon:G.zX.SPINNER,delay:1e3})),function(){e(B.F.dequeue({matchType:"insert_instance"}))}}let e$=(0,I.NC)("INSERT_SHARED_COMPONENT"),eq=(0,V.nF)((e,r)=>{e.dispatch(e$(r));let{item:n}=r,{canvasPosition:a,percentageOffset:i,isFromDoubleClick:o,useSmartPositioning:l,insertionCallback:u,storeInRecentsKey:m,fromPlayground:h,insertLogArgsOverride:f,isClick:y,selectAfterInsert:b,sourceForTracking:v}=r,T=r.insertAsChildOfCanvas?g.UN().getCurrentPage()?.guid:r.insertAsChildOfGuid,I=e.getState(),S=E.zl.get(eD.TG).has(n.library_key),A=async()=>{let r=(0,es.s)(I);e.dispatch(tF({storeInRecentsKey:m,item:n,userId:r}));let E=(0,X.d1)(I);if(!E)return;let A=(r,n)=>{let o=(0,eN.Dl)(),s=h?d.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},S):d.glU.insertInstance(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,T??null,l??!1,S,b??!0);try{(0,eL.L)(a,s),(0,eN.cI)(o,a,s,v)}catch(e){(0,D.x1)("auto_suggest","Error logging shadow reads on component insertion",{error:e})}if(u?.([s],a,y),(0,eR.qr)(e.dispatch),s!==_.AD){let n=(0,eh.C$)((0,g.UN)().get(r)),a=I.mirror.sceneGraph.get(s),i=Object.keys(a&&"INSTANCE"===a.type&&a.componentProperties()||{}).length>0;n&&i?(e.dispatch(j.E({nodeId:s})),(0,M.YQ)({id:eS.sh})):n?(e.dispatch(j.E({nodeId:s})),(0,M.YQ)({id:eS.Sp})):i?(0,M.YQ)({id:eS.An}):(0,M.YQ)({id:eS.fe})}ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default")};if((0,J.N2)(n,E)){let r=I.library.local.components[n.node_id];if(!r||!I.mirror.sceneGraph.get(r.node_id)){e.dispatch(W.to({type:eP.Q}));return}try{p.l7.user("insert-component",()=>{A(r.node_id,f)}),(0,q.ds)("Component Local Symbol Inserted",E.key,e.getState(),{componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y}),(0,ex.V)(E.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(tW())}catch(n){e.dispatch(F.s.error("An error occurred while adding an instance of this component.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),(0,ex.V)(E.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tp&&tp===n.component_key&&tm){let e=(await tm).component;e&&e.updated_at>n.updated_at&&(n=e)}let i=eY(e.dispatch);Z.Eo.getCanvas(n).then(e=>{p.l7.user("insert-component",()=>{let r=p.l7.system("upsert-shared-symbol",()=>d.BXd.upsertSharedSymbol(n.component_key??c.ii.INVALID,n.content_hash??c.F7.INVALID,n.library_key,d.zol.NO,e,d.ZiZ.ACTIVE_SCENE));if(!r)throw(0,D.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??c.ii.INVALID,contentHash:n.content_hash??c.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");A(r.localGUID,f)})},e=>{let r=d.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}p.l7.user("insert-component",()=>{A(r,f)})}).then(()=>{let i=performance.now()-r;(0,q.ds)("Component Shared Symbol Inserted",E.key,e.getState(),{elapsedMs:i,componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:a.x,ComponentCanvasPositionY:a.y,isFromDefaultLibrary:(0,ed.td)(I.library.defaultPublished,n.library_key),isFromDoubleClick:!!o,useSmartPositioning:!!l}),(0,ex.V)(E.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:i}),e.dispatch(tW())}).catch(a=>{e.dispatch(F.s.error(a.message)),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,a),(0,ex.V)(E.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:A,source:eU.jE.INSERT_SHARED_COMPONENT}))}),eX=(0,I.NC)("INSERT_SHARED_STATE_GROUP"),eJ=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:a,percentageOffset:i,isFromDoubleClick:o,useSmartPositioning:l,insertionCallback:u,storeInRecentsKey:m,fromPlayground:h,insertLogArgsOverride:y,isClick:b,sourceForTracking:v}=r,T=r.insertAsChildOfCanvas?g.UN().getCurrentPage()?.guid:r.insertAsChildOfGuid,I=e.getState(),S=E.zl.get(eD.TG).has(n.library_key),A=async()=>{let r=(0,es.s)(I);e.dispatch(tF({storeInRecentsKey:m,item:n,userId:r}));let g=(0,X.d1)(I);if(!g)return;let A=(r,o,s)=>{let c=(0,eN.Dl)(),p=h?d.glU.insertPlaygroundInstance({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},S):d.glU.insertStateGroup(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},s,T??null,l??!1,o,S);try{(0,eL.L)(a,p),(0,eN.cI)(c,a,p,v)}catch(e){(0,D.x1)("auto_suggest","Error logging shadow reads on state group insertion",{error:e})}return(0,f.k)().anticipation_props_shadow_reads&&(E.zl.set(eC.xB,p),E.zl.set(eC.fu,n.key)),u?.([p],a,b),(0,eR.qr)(e.dispatch),ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default"),p};if((0,J.N2)(n,g)){let r=I.library.local.stateGroups[n.node_id];if(!r||!I.mirror.sceneGraph.get(r.node_id)){e.dispatch(W.to({type:eP.Q}));return}p.l7.user("insert-state-group",()=>{A(r.node_id,"",y)}),(0,q.ds)("State Group Local Symbol Inserted",g.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y}),e.dispatch(tW())}else{let r=performance.now();if(tg&&tg===n.key&&tf){let e=await tf;e&&e.updated_at>n.updated_at&&(n=e)}let i=eY(e.dispatch);Z.Eo.getCanvas(n).then(r=>{p.l7.user("insert-state-group",()=>{let a=p.l7.system("upsert-shared-state-group",()=>d.BXd.upsertSharedStateGroup(n.key??c.q.INVALID,n.version,n.library_key,d.zol.NO,r,d.ZiZ.ACTIVE_SCENE));if(!a||a.fileUpdateRequired||!a.localGUID)throw Error("An error occurred while adding an instance of this component.");let i=A(a.localGUID,n.default_state_key,y),o=I.mirror.sceneGraph.get(a.localGUID)?.childrenNodes[0];o&&((0,eh.C$)(o)&&i!==_.AD?(e.dispatch(j.E({nodeId:i})),(0,M.YQ)({id:eS.sh})):(0,M.YQ)({id:eS.An}))})},e=>{let r=d.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");A(r,"",y)}).then(()=>{(0,q.ds)("State Group Shared Symbol Inserted",g.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:a.x,StateGroupCanvasPositionY:a.y,isFromDefaultLibrary:(0,ed.td)(I.library.defaultPublished,n.library_key),isFromDoubleClick:!!o}),(0,ex.V)(g.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(tW())}).catch(a=>{e.dispatch(F.s.error(a.message)),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,a),(0,ex.V)(g.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{i()})}};await e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:A,source:eU.jE.INSERT_SHARED_STATE_GROUP})),e.dispatch(eX(r))}),eZ=(0,V.nF)(async(e,r)=>{let{item:n}=r;if(!(0,ek.RX)(n))return;let{canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:c,insertionCallback:u,storeInRecentsKey:m,fromPlayground:_,selectAfterInsert:h,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,es.s)(y);e.dispatch(tF({storeInRecentsKey:m,item:n,userId:b}));let v=(r,n)=>{let s=p.l7.user("insert-module",()=>_?d.glU.insertPlaygroundModuleUsage({x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y}):d.glU.insertModule(r,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},n,o,l??!1,h??!0));return u?.(s,a,g),(0,eR.qr)(e.dispatch),ea.Y5.triggerAction("set-tool-default"),s},T=(0,X.d1)(y);if((0,J.N2)(n,T))v(n.node_id,c),e.dispatch(tW());else{let r=()=>{};f&&(r=function(e){return e(B.F.enqueue({type:"insert_template",message:(0,x.t)("design_systems.subscriptions.inserting_template"),icon:G.zX.SPINNER,delay:1e3})),function(){e(B.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await e0(n);v(e.localGUID,c)}catch(r){e.dispatch(F.s.error(r.message)),E?E(r):(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});(0,V.nF)(async(e,r)=>{let{modules:n,canvasPosition:a,percentageOffset:i,insertAsChildOfCanvas:o,afterSlideModulesInsertion:l,useSmartPositioning:c,insertLogArgsOverride:u,storeInRecentsKey:m,selectAfterInsert:_,errorCallback:h}=r;if(n.some(e=>e.moduleSource!==d.QjO.SLIDES_TEMPLATE||!(0,ek.RX)(e)))return;let g=e.getState(),f=(0,es.s)(g),E=(e,r)=>p.l7.user("insert-module",()=>d.glU.insertModule(e,{x:a.x,y:a.y,percentOffsetX:i.x,percentOffsetY:i.y},r,o,c??!1,_??!0));try{let r=(await Promise.all(n.map(e0))).map(e=>E(e.localGUID,u));n.forEach(r=>{e.dispatch(tF({storeInRecentsKey:m,item:r,userId:f}))}),l(n,r),ea.Y5.triggerAction("set-tool-default")}catch(e){h?h(e):(0,P.$D)(s.e.SLIDES,e)}});let eQ=(0,V.nF)(async(e,r)=>{let{item:n}=r,{cmsCollectionMappings:a,canvasPosition:i,percentageOffset:o,insertAsChildOfCanvas:l,useSmartPositioning:c,insertLogArgsOverride:u,selectAfterInsert:m,errorCallback:_}=r,h=i?{x:i.x,y:i.y,percentOffsetX:o?.x||.5,percentOffsetY:o?.y||.5}:null;(0,ee.e)(n);let g=(r,n)=>{let i=a?.collectionId??null,o=a?new Map(Object.entries(a.fieldSchemaMappings)):null,s=p.l7.user("insert-responsive-set",()=>d.glU.insertResponsiveSet(r,h,n,i,o,l,c??!1,m??!0));return(0,eR.qr)(e.dispatch),ea.Y5.triggerAction("commit"),ea.Y5.triggerAction("set-tool-default"),s};if("LIBRARY"!==n.subscriptionStatus)g(n.assetId,u);else try{let e=await (0,eH.e)(n);g(e,u)}catch(r){e.dispatch(F.s.error(r.message)),_?_(r):(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}});async function e0(e){let r=await Z.Eo.getCanvas(e),n=p.l7.system("upsert-shared-module",()=>d.BXd.upsertSharedModule(e.key??c.mW.INVALID,e.version??c.Pg.INVALID,e.library_key,d.zol.NO,r,d.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}function e1(e,r,n){return(0,A.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(eG.qB({delta:n}))}})}let e2=(0,V.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:o,subscribedLibraryKeys:l,fileSubscribedLibraryKeys:c}=r,m=e.getState(),_=m.openFile;if(_)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await e1(e.dispatch,n,(e,n)=>{let c=r[n];if(p.l7.user("update-shared-state-group",()=>{d.BXd.updateSharedStateGroup(e.key,e.library_key,e.newStateKeyToOutdatedItems,i.map(u.v.toString),c,o)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:i}=r;if((0,ed.GA)(m.library,_,n,i,a,l)){s.has(e.library_key)||s.add(e.library_key);break}}}),ea.Y5.triggerAction("commit");let h=n.map(e=>e.id);(0,q.ds)("Components Updated",_.key,e.getState(),{stateGroups:h,isSgShimFFEnabled:!0}),s.size>0&&tU(e,Array.from(s),c)}catch(r){e.dispatch(F.s.error("An error occurred while updating the instances of this component.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e3=(0,V.nF)(async(e,r)=>{let{components:n,usedItemsByKey:a,instanceIdsToUpdate:i,updateStartTime:o,subscribedLibraryKeys:l,fileSubscribedLibraryKeys:m}=r,_=e.getState(),h=_.openFile;if(h)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await e1(e.dispatch,n,(e,n)=>{let m=r[n];p.l7.user("update-shared-symbol",()=>{d.BXd.updateSharedSymbol(e.component_key??c.ii.INVALID,e.library_key,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,i.map(u.v.toString),m,o)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,ed.GA)(_.library,h,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,a,l)&&!s.has(e.library_key)&&s.add(e.library_key)}),ea.Y5.triggerAction("commit");let g=n.map(e=>e.id);(0,q.ds)("Components Updated",h.key,e.getState(),{components:g,isShimFFEnabled:!0}),s.size>0&&tU(e,Array.from(s),m)}catch(r){e.dispatch(F.s.error("An error occurred while updating the instances of this component.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e8=(0,V.nF)((e,r)=>{let{style:n,inheritStyleKeyField:a,fromSearch:i,targetGuids:o,onSuccess:s,onError:l,targetUpsertScene:c=d.ZiZ.ACTIVE_SCENE}=r,u=e.getState(),m=(0,X.d1)(u),_=m&&!(0,J.N2)(n,m),h=u.openFile,g=(0,er.ZR)((0,er.cO)(n,_??!1),h),f=(0,en.X)(g);e.dispatch(e6({style:n,callback:(r,c,u=d.ZiZ.ACTIVE_SCENE)=>{if(c){(0,e.dispatch)(B.F.enqueue({type:"missing-font",message:(0,x.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,x.t)("design_systems.missing_font_learn_more"),action:()=>{C.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}})),l&&l();return}o?p.l7.user("apply-style-to-nodes",()=>{(0,eO.f)(d.VD3.STYLE_ATTACH,d.e0R.DIRECT,()=>{d.glU?.applyStyleToNodes(a,r,!0,o,u)})}):p.l7.user("apply-style-to-selection",()=>{(0,eO.f)(d.VD3.STYLE_ATTACH,d.e0R.DIRECT,()=>{d.glU?.applyStyleToSelection(a,r,!0)})}),(0,S.trackEvent)("Style Applied",{styleType:n.style_type,isShared:!!_,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!i,nonInteraction:0,styleKey:n.key,consumedVariableIds:d.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:g,consumingFileKey:h?.key,fileTeamId:h?.teamId,fileParentOrgId:h?.parentOrgId,partnerType:f,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted,targetScene:tq(u)},{forwardToDatadog:!0}),s&&s()},errorCallback:()=>{(0,S.trackEvent)("Style Applied Error",{partnerType:f,targetScene:tq(c)},{forwardToDatadog:!0}),l&&l()},targetUpsertScene:c}))}),e6=(0,V.nF)((e,r)=>{let n=e.getState(),{style:a,targetUpsertScene:i=d.ZiZ.ACTIVE_SCENE}=r,o=(0,X.d1)(n);if(!o)return;let l=!(0,J.N2)(a,o),u="GRID"===a.style_type&&!d.Ez5.editorPreferences().showFrameGrids.getCopy();if(l){let n=async()=>{try{let n=await Z.Eo.getCanvas(a);r.bufferCallback?.(n);let o=p.l7.system("ensure-style-is-loaded",()=>d.BXd.getOrCreateSubscribedStyleNodeId(a.key,a.content_hash??c.IA.INVALID,a.library_key,n,i));if(o?.fileUpdateRequired)return;r.omitFullscreenCommit||ea.Y5.triggerAction("commit"),u&&((0,ei.c6)(),d.Ez5.editorPreferences().showFrameGrids.set(!0));let s=!1;if("TEXT"===a.style_type&&o&&o.localGUID){let r;let n=(r=i===d.ZiZ.LINTER_SCENE?new g.qo(d.juq.LINTER).get(o.localGUID):e.getState().mirror.sceneGraph.get(o.localGUID))&&r.fontName;n&&await (0,m.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),s=!0})}r.callback?.(o.localGUID,s,i)}catch(n){e.dispatch(F.s.error("An error occurred while applying the style to the selection.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,eU.vQ)({assetLibraryKey:a.library_key,onInsertAsset:n,source:eU.jE.LOAD_STYLE}))}else u&&((0,ei.c6)(),d.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(a.node_id,!1,i),r.bufferCallback?.(void 0)}),e4=(0,V.nF)(async(e,r)=>{let{styles:n,updateStartTime:a,subscribedLibraryKeys:i,fileSubscribedLibraryKeys:o}=r,l=e.getState().openFile;if(l)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set,u=e.getState();await e1(e.dispatch,n,(e,n)=>{let o=r[n];p.l7.user("update-shared-style",()=>{d.BXd.updateSharedStyle(e.key,e.library_key,e.content_hash??c.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,o,a)}),(0,ed.GA)(u.library,l,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,u.library.used__LIVEGRAPH.styles,i)&&!s.has(e.library_key)&&s.add(e.library_key)}),ea.Y5.triggerAction("commit");let m=n.map(e=>e.id);(0,q.ds)("Styles Updated",u.openFile?.key,e.getState(),{styles:m}),s.size>0&&tU(e,Array.from(s),o)}catch(r){e.dispatch(F.s.error("An error occurred while updating this style.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e5=(0,V.nF)((e,r)=>{let n=d.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:a,oldStyleGUID:i,consumerGUIDsToUpdate:o}=r,{updateAsset:l}=a;Z.Eo.getCanvas(l).then(r=>{let a=e.getState(),{content_hash:s}=l;if(!i)throw Error("guid to update can not be empty");if(!s)throw Error("content_hash not specified on style");let c=p.l7.user("update-selected-shared-style-consumers",()=>d.BXd.updateSelectedSharedStyleConsumers(l.key,l.library_key,s,l.oldSubscribedKeysToUpdate,l.localIdsToUpdate,o,i,r,n));if(ea.Y5.triggerAction("commit"),!c)throw Error("unable to update");(0,q.ds)("Styles Updated",a.openFile?.key,e.getState(),{styles:[l.id]})}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this style.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e7=(0,V.nF)((e,r)=>{let{variableSets:n,updateStartTime:a}=r;if(e.getState().openFile)return Promise.all(n.map(e=>Z.Eo.getCanvas(e))).then(r=>e1(e.dispatch,n,(e,n)=>{let i=r[n];p.l7.user("update-shared-variable-set",()=>{d.BXd.updateSharedVariableSet(e.node_id,e.libraryVariableIdsForUpdate,i,a)})})).then(()=>{ea.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this variable collection")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e9=(0,V.nF)((e,r)=>{let{assets:n,updateStartTime:a}=r;return Promise.all(n.map(e=>Z.Eo.getCanvas({canvas_url:e.canvasUrl}))).then(r=>e1(e.dispatch,n,(e,n)=>{let i=r[n];if(i)p.l7.user("update-shared-library-asset",()=>{d.BXd.updateSharedLibraryAsset((0,ev.Hk)(e.type),e.assetId,e.sourceLibraryKey,i,a)});else throw Error("Missing buffer in updateSharedLibraryAssets")})).then(()=>{ea.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this asset")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),te=(0,V.nF)((e,r)=>{let{assets:n,updateStartTime:a}=r;return Promise.all(n.map(e=>Z.Eo.getCanvas({canvas_url:e.canvasUrl}))).then(e=>(0,A.a)(n,(r,n)=>{let i=e[n];if(i)(0,eo.r)(()=>{p.l7.system("auto-update-shared-library-asset",()=>{d.BXd.updateSharedLibraryAsset((0,ev.Hk)(r.type),r.assetId,r.sourceLibraryKey,i,a)})});else throw Error("Missing buffer in autoUpdateSharedLibraryAssets")},{batchSize:5})).catch(e=>{(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,e)})});async function tt(e){let r=await Z.Eo.getCanvas(e);if(!p.l7.system("upsert-shared-variable",()=>d.BXd.upsertSharedVariable(e.node_id,d.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let tr=(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o}=r;if(!(0,X.d1)(e.getState())){o?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await tt(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(F.s.error("An error occurred while retrieving the variable.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),S.definedAnalyticsHandler.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,en.X)(n.library_key)}),o?.(r)}};e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eU.jE.LOAD_VARIABLE}))}else a?.(n.node_id)}),tn=(0,V.nF)((e,r)=>new Promise((n,a)=>{e.dispatch(tr({item:r,callback:n,errorCallback:a}))}));async function ta(e){let r=await Z.Eo.getCanvas(e),n=p.l7.system("upsert-entire-variable-set",()=>{if(!d.BXd){(0,D.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"LibraryPubSub binding is not available, can't upsert variable set");return}let n=l.gr.fromString(e.node_id);return e.isExtension&&n?d.BXd.upsertSharedVariableSetExtension(n,e.library_key,d.zol.NO,r,d.ZiZ.ACTIVE_SCENE):d.BXd.upsertSharedRootVariableSet(e.node_id,e.library_key,d.zol.NO,d.ZxO.YES,r)});if(n&&!n.fileUpdateRequired)return{buffer:r}}async function ti(e){let r=await Z.Eo.getCanvas(e),n=p.l7.system("upsert-shared-variable-set",()=>{if(!d.BXd){(0,D.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"LibraryPubSub binding is not available, can't upsert variable set");return}let n=l.gr.fromString(e.node_id);return e.isExtension&&n?d.BXd.upsertSharedVariableSetExtension(n,e.library_key,d.zol.NO,r,d.ZiZ.ACTIVE_SCENE):d.BXd.upsertSharedRootVariableSet(e.node_id,e.library_key,d.zol.NO,d.ZxO.NO,r)});if(n&&!n.fileUpdateRequired)return{buffer:r}}(0,V.nF)((e,r)=>{let{item:n,callback:a,bufferCallback:i,errorCallback:o}=r;if((0,X.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await ti(n);e&&(a?.(n.node_id),i?.(e.buffer))}catch(r){e.dispatch(F.s.error("An error occurred while retrieving the variable collection.")),(0,P.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eU.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eU.jE.LOAD_VARIABLE_SET}))}else a?.(n.node_id)}});let to=(0,V.nF)((e,r)=>{e.dispatch(K.yH({key:(0,eM.yD)(r.openFileKey)})),e.dispatch(K.yH({key:(0,ed.iw)(r.openFileKey)}))}),ts=new Set,tl=new Set;function tc(){ts=new Set,tl=new Set}let td=(0,V.nF)(async e=>{let r=e.getState();r.user&&(await eg.gi,tu((0,eE.OQ)(r),(0,eE.LL)(r),e))}),tu=async(e,r,n,a)=>{if(0===e.length&&0===r.length)return;let i=n.getState().openFile;if(!i)return;let o=(a=a??(0,ed.lG)(n)).loadingKey;(0,e_.VP)(n.getState().loadingState,o)&&await a.promise,n.dispatch(K.Cx({key:o})),"whiteboard"===i.editorType&&await ed.kw;let s=n.getState(),l=[];if(e.length>0){let r=new Set([...(0,ed.vu)(s.library.publishedByLibraryKey.components).map(e=>e.component_key),...(0,ed.$j)(s.library.defaultPublished.componentsByLibraryKey).map(e=>e.component_key)]);l=e.filter(e=>!r.has(e)&&!ts.has(e))}let c=[];if(r.length>0){let e=new Set([...(0,ed.vu)(s.library.publishedByLibraryKey.stateGroups).map(e=>e.key),...(0,ed.$j)(s.library.defaultPublished.stateGroupsByLibraryKey).map(e=>e.key)]);c=r.filter(r=>!e.has(r)&&!tl.has(r))}try{if(l.length>0||c.length>0){let e=await k.Ay.post("/api/design_systems/components_state_groups",{component_keys:l,state_group_keys:c,org_id:i.parentOrgId});l.forEach(e=>{ts.add(e)}),c.forEach(e=>{tl.add(e)});let r=e.data.meta.components,a=e.data.meta.state_groups,o=e.data.meta.files;n.dispatch(H.uo({files:o,subscribeToRealtime:!0})),n.dispatch(z.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let s=E.zl.get(Q.qp);t$(r,eI.PW.COMPONENT,s,n.dispatch),t$(a,eI.PW.STATE_GROUP,s,n.dispatch)}a.callbackForComponent?.(!0)}catch(e){a.callbackForComponent?.(!1)}a.resetPromise(),n.dispatch(K.yH({key:o})),a.callback()},tp=null,tm=null;async function t_(e,r,n){try{let a=await eA.Z.getLibraryComponentV2({componentKey:r,source:n}),i=a.data.meta.file;i&&e.dispatch(H.yJ({file:i}));let o=a.data.meta.component||null,s=a.data.meta.component_set||null,l=E.zl.get(Q.qp);if(o&&(o.team_id=l[o.library_key]?.team_id),s&&(s.team_id=l[s.library_key]?.team_id),i){let r={};r[o.node_id]=o,a.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch((0,eV.vP)({itemsById:r,fileKey:i.key,libraryKey:(0,h.l)(i.library_key),teamId:i.team_id,type:eI.PW.COMPONENT})),a.data.meta.component_set&&e.dispatch((0,eV.vP)({itemsById:{[a.data.meta.component_set.key]:a.data.meta.component_set},fileKey:i.key,libraryKey:(0,h.l)(i.library_key),teamId:i.team_id,type:eI.PW.STATE_GROUP})),o&&Z.Eo.getCanvas(o)}return{component:o,parentStateGroup:a.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,R.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let th=(0,V.nF)((e,r)=>{tp=r.componentKey,tm=t_(e,r.componentKey,r.callsite)}),tg=null,tf=null;async function tE(e,r){try{let n=(await eA.Z.getLibraryStateGroup({stateGroupKey:r})).data.meta,a={[n.node_id]:n},i=E.zl.get(Q.qp)[n.library_key];if(!i)return n;return n.team_id=i.team_id,e.dispatch((0,eV.vP)({itemsById:a,fileKey:i.key,libraryKey:(0,h.l)(i.library_key),teamId:i.team_id,type:eI.PW.STATE_GROUP})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,R.t)("state"),console.error(e)}return null}}async function ty(e,r){try{let{style:n,file:a}=(await eA.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return a&&e.dispatch(H.yJ({file:a})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,R.t)("style"),console.error(e)}return null}}let tb=(0,V.nF)((e,r)=>{tg=r.stateGroupKey,tf=tE(e,r.stateGroupKey)});async function tv(e){let{loadingState:r}=e.getState(),n=e.getState().openFile;if(null==n)return;let a=(0,ed.Mb)((0,h.l)(n.libraryKey));if(!(0,e_.Sc)(r,a))return;let i=eA.Z.getLibraryPublishedAndMovedComponents({openFileKey:n.key});(0,ef.N)(i,{dispatch:e.dispatch},a),ed.Ys.add(a);try{let r=await i;e.dispatch(H.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,ed.Ve)(n.key),(0,ed.Ve)(n.libraryKey);let a=E.zl.get(Q.qp);t$(r.data.meta.state_groups,eI.PW.STATE_GROUP,a,e.dispatch),t$(r.data.meta.components,eI.PW.COMPONENT,a,e.dispatch),e.dispatch(z.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,ed._B)()}let tT=em.M4.Query({fetch:async e=>(await ew.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),tI=em.M4.Query({fetch:async e=>await tS(w.D.dispatch,e),key:"libraryStats"}),tS=async(e,r)=>{let n=ew.PT.getLibraries({orgId:r,fv:eT.Ob}),a=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,ef.N)(n,{dispatch:e},a);try{let r=await n,a=r&&r.data&&r.data.meta||[],i=0,o=0,s=0,l=0,c=0,d=0,u=0,p=0,m=[],_=[],h=new Set,g={};for(let e of a)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!h.has(e.team_id)&&(h.add(e.team_id),u++),m.push(e),_.push(e.file),e.thumbnail_url&&(g[e.library_key]=e.thumbnail_url),i+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,p++);return _.length>0&&e(H.uo({files:_,subscribeToRealtime:!1})),{totalComponents:i,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:p,files:m,libraryThumbnailByLibraryKey:g}}catch(e){return eI.wg}},tA=em.M4.Query({fetch:e=>tN(e),key:"libraryInfo"}),tw=em.M4.Query({fetch:async e=>(await eA.Z.getLibrariesV2(e)).data.meta??[],key:"libraryInfoV2"});function tC(e,r={}){let n=(0,em.IT)(tA(e),r),a=(0,i.wA)(),[o]=n,s=(0,E.Xr)(ec.qU);return(0,O.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&a(H.uo({files:r,subscribeToRealtime:!1})),s(e.files.map(e=>(0,el.E)(e)))}),n}let tN=(0,eF.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:a,includeSharingGroupInfo:i})=>{let o=eA.Z.getLibraries({orgId:e,subscriptionFileKey:n||void 0,includeThumbnails:a,includeSharingGroupInfo:i});try{let e=await o,n=e&&e.data&&e.data.meta||[],i=0,s=0,l=0,c=0,d=0,u=0,p=0,m=0,_=[],h=[],g=new Set,f={};for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),p++),_.push(a?{...e,thumbnail_url:e.file.thumbnail_url}:e),h.push(e.file),e.thumbnail_url&&(f[e.library_key]=e.thumbnail_url),i+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,m++);return{totalComponents:i,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:p,totalLibraries:m,files:_,libraryThumbnailByLibraryKey:f}}catch(e){return{...eI.wg}}});function tL(e){return(0,h.l)(e.libraryKey||"")}function tO(e,r,n){if(!r||!n)return;r=r.filter(e=>e.library||e.communityLibrary),n=n.filter(e=>e.library||e.communityLibrary);let a=T()(r,tL);for(let r of n){let n=tL(r),i=a[n];i&&i.isSubscribed===r.isSubscribed&&i.figJamSubscribed===r.figJamSubscribed&&i.slidesSubscribed===r.slidesSubscribed||e.dispatch((0,eB.F$)({libraryKey:n,subscriptions:{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed,buzz:!1}}))}}function tR(e,r,n){tO(e,r?.map(tP),n?.map(tP))}let tP=e=>({...e}),tD=function(){let e=(0,i.Pj)(),r=(0,$.n1)(),n=(0,eu.LH)(),{data:o}=(0,L.Rs)(ep.Lew,{}),s=(0,N.ZC)(o);(0,a.useEffect)(()=>{if(!s||!o)return;let r=o?.currentUser?.libraryUserSubscriptions;tR(e,s?.currentUser?.libraryUserSubscriptions,r)},[e,o,s]);let l=(0,et.Nn)(),c=(0,N.ZC)(l);(0,a.useEffect)(()=>{if(!l||!c)return;let r=(0,et.sj)(l);tO(e,(0,et.sj)(c),r)},[e,l,c]);let{data:d}=(0,L.Rs)(ep.AXx,{orgId:n},{enabled:!!n}),u=(0,N.ZC)(d);(0,a.useEffect)(()=>{if(!u||!d)return;let r=d?.orgLibrarySubscriptions;tR(e,u?.orgLibrarySubscriptions,r)},[e,d,u]);let p=(0,ey.cD)(),m=(0,L.Rs)(ep.f19,{}),{data:_}=(0,a.useMemo)(()=>m.transform(e=>{let a=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===n||e.team.id===p)).map(e=>e.team),i={};for(let e of a){let n=e.libraryTeamSubscriptionOverrides.map(tP).filter(e=>r||!e.communityLibrary);i[e.id]=n}return i}),[r,n,p,m]),h=(0,N.ZC)(_);(0,a.useEffect)(()=>{h&&_&&tO(e,Object.values(h).flat(),Object.values(_).flat())},[e,_,h])},tk=(0,V.nF)(async e=>{if(await eb.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),a=Promise.resolve(null);try{await Promise.all([r,a,n])}catch(e){}});async function tM(e){if(!e)return 0;try{return(await ew.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tF=(0,I.NC)("ADD_ASSET_TO_RECENTS"),tU=(e,r,n)=>{let a=e.getState(),i=a.openFile?.key||null,o=a.openFile?.libraryKey||null;i&&r.forEach(r=>{r!==o&&e.dispatch((0,eB.am)({libraryFileSubscription:{file_key:i,library_key:r,is_subscribed:!0},userInitiated:!0,fileSubscribedLibraryKeys:n}))})},tB="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",tG=null,tV=(0,V.nF)((e,r)=>{tG={done:0,total:r.total},e.dispatch(B.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:tB,icon:G.zX.SPINNER,timeoutOverride:1/0}))}),tH=(0,V.nF)((e,r)=>{tG&&(tG.done+=r.done,e.dispatch(B.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connecting_fraction",{current:tG.done,total:tG.total}),type:tB,icon:G.zX.SPINNER,timeoutOverride:1/0})))}),tz=(0,V.nF)(e=>{tG=null,e.dispatch(B.F.dequeue({matchType:tB})),e.dispatch(B.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connected"),type:tB,icon:G.zX.CHECK}))}),tK=(0,V.nF)(e=>{tG=null,e.dispatch(B.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connection_failed"),type:tB,error:!0}))}),tW=(0,V.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch(Y.b({has_inserted_component:!0}))}),tj=(0,V.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch(Y.b({has_opened_libraries_modal:!0}))}),tY=(0,U.f)();function t$(e,r,n,a){for(let[i,o]of(e=e.map(e=>({...e,team_id:n[e.library_key]?.team_id})),Object.entries(b()(e,e=>e.library_key)))){let e=(0,h.l)(i);a((0,eV.vP)({itemsById:T()(o,e=>e.node_id),fileKey:tY(o[0]),libraryKey:e,teamId:n[e]?.team_id??null,type:r}))}}function tq(e){switch(e){case d.ZiZ.ACTIVE_SCENE:return"ACTIVE_SCENE";case d.ZiZ.PLAYGROUND_SCENE:return"PLAYGROUND_SCENE";case d.ZiZ.LINTER_SCENE:return"LINTER_SCENE"}}},818958:(e,r,n)=>{n.d(r,{c:()=>f});var a=n(454805),i=n(967688),o=n(403355),s=n(952039),l=n(151223),c=n(813147),d=n(67308),u=n(303397),p=n(601167),m=n(277454),_=n(142250),h=n(679044);let g="\x3c!--(figcomponent)";(0,l.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let i=n.indexOf(g)+g.length,o=n.indexOf("(/figcomponent)--\x3e");if(i>=0&&o>=0&&i<o){let s=n.substring(i,o).trim();try{let n=JSON.parse(s);if("object"==typeof n){let i=n.fileKey,o=n.nodeId;if(i&&o){let n=u.Y5.getViewportInfo(),s=new a.Mi(n.x,n.y),l=new a.Mi(r.clientX,r.clientY).subtract(s),c=(0,p.$$)(n,l);e.dispatch(f({fileKey:i,nodeId:o,canvasX:c.x,canvasY:c.y}))}}}catch(e){}}}});let f=(0,l.nF)(async(e,r)=>{let{fileKey:n,nodeId:l,canvasX:u,canvasY:p}=r,g=e.getState(),f=(0,d.d1)(g),E=null;if(f&&f.key===n)E=g.library.local.components[l]??null;else{g.fileByKey[n]||(await e.dispatch((0,h.n)({libraryKey:(0,o.$)(n)})),g=e.getState());let r=g.fileByKey[n],a=r?(0,_.l)(r):void 0;!a||(E=(0,m.HK)(g.library.publishedByLibraryKey.components,a)[l]??null)||(await e.dispatch((0,h.n)({libraryKey:(0,o.$)(n)})),g=e.getState(),E=(0,m.HK)(g.library.publishedByLibraryKey.components,a)[l]??null)}E?e.dispatch(c.FU({item:E,canvasPosition:new a.Mi(u,p),percentageOffset:new a.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(s.F.enqueue({type:"insert_component_error",message:(0,i.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))})},454272:(e,r,n)=>{n.d(r,{F$:()=>I,am:()=>S,fR:()=>A,nE:()=>w});var a=n(938982),i=n(186606),o=n(989232),s=n(183603),l=n(998568),c=n(967688),d=n(952039),u=n(151223),p=n(35597),m=n(67308),_=n(277454),h=n(376691),g=n(436999),f=n(720722),E=n(545668),y=n(925144),b=n(679044);let v="file_key_optimistic_update",T="hub_file_id_optimistic_update",I=(0,u.nF)((e,{libraryKey:r,subscriptions:n})=>{if(!n||(0,_.td)(e.getState().library.defaultPublished,r))return;let a=(0,m.d1)(e.getState());if(a){let o=a.editor_type??"design";(!0===n||"design"===o&&n.design||"whiteboard"===o&&n.figjam)&&(e.getState().leftPanel.activeTab===i.xae.ASSETS||e.getState().universalInsertModal.showing?e.dispatch((0,b.n)({libraryKey:r})):e.dispatch(p.yH({key:(0,y.yD)(a.key)})))}}),S=(0,u.nF)(async(e,r)=>{let{libraryFileSubscription:n,userInitiated:i,publishedLibrary:o,fileSubscribedLibraryKeys:u}=r,{file_key:p,is_subscribed:m,id:_,library_key:h}=n,g=e.getState().openFile?.key||null;if(g===p&&e.dispatch(I({libraryKey:h,subscriptions:m})),u.has(h)&&m||!i)return;let y=E.A.postFileSubscriptionByLibraryKey({libraryKey:h,fileKey:p,isSubscribed:m});_?s.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[_]:{isSubscribed:m}}},y):m&&o&&s.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${h}`]:{isSubscribed:m,fileKey:p,hubFileId:T,libraryKey:h??null,libraryFileKey:v,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:o.num_components,numStateGroups:o.num_state_groups??0,numStyles:o.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:o.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numLibraryAssets:0,numVariableSets:o.num_variable_collections,numModuleAssets:o.num_module_assets,hasAssets:!1,fileKey:v,file:{_id:`optimistic-id-${v}`,_name:null,key:v,name:o.library_name,libraryKey:o.library_key,signedThumbnailUrl:o.thumbnail_url,signedThumbnailUrlOverride:null,thumbnailUrl:o.thumbnail_url,thumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:f.Nf(o)?o.thumbnail_guid:null},hubFileId:T,canRead:!0},communityLibrary:null}}},y);try{await y}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:g,fileKey:p,libraryKey:h,isSubscribed:m}})}}),A=(0,u.nF)(async(e,r)=>{let{libraryUserSubscription:n,userInitiated:i,existingSubscription:s}=r,{library_key:u,subscriptions:p}=n;if(e.dispatch(I({libraryKey:u,subscriptions:p})),!i)return;let m={libraryKey:u,userId:e.getState().user?.id,library:{libraryKey:u,fileKey:v},communityLibrary:null},_=E.A.postUserSubscriptionByLibraryKey({libraryKey:u,subscriptions:p});(0,h.J)(s,g.Qh.USER,p.design,p.figjam,p.slides,p.buzz,m,_);try{if(!u)throw Error("Library key is required for user subscription");await _,o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,buzzSubscribed:p.buzz,subscriptionType:"user",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,buzzSubscribed:p.buzz,subscriptionType:"user",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,buzzSubscribed:p.buzz}})}}),w=(0,u.nF)(async(e,r)=>{let{libraryTeamSubscription:n,userInitiated:i,existingSubscription:s}=r,{library_key:u,subscriptions:p,team_id:m}=n;if(e.dispatch(I({libraryKey:u,subscriptions:p})),!i)return;let _=E.A.postTeamSubscriptionByLibraryKey({libraryKey:u,subscriptions:p,teamId:m});(0,h.J)(s,g.Qh.TEAM,p.design,p.figjam,p.slides,p.buzz,{libraryKey:u,teamId:m,library:{libraryKey:u,fileKey:v,hubFileId:T},communityLibrary:null},_);try{if(!u)throw Error("Team subscription requires a library key");await _,o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,buzzSubscribed:p.buzz,subscriptionType:"team",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,buzzSubscribed:p.buzz,subscriptionType:"team",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides}})}});(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{libraryKey:o,subscriptions:l,workspaceId:u}=n,p=E.A.postWorkspaceSubscriptionByLibraryKey({libraryKey:o,subscriptions:l,workspaceId:u});n.id?(0,s.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides}}},p):(0,s.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:v,workspaceId:u,libraryKey:o,isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides,buzzSubscribed:l.buzz,canRead:!0,hubFileId:T}}},p);try{await p,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:a,workspaceName:i}=r,{libraryKey:o,workspaceId:l}=n,u=E.A.deleteWorkspaceSubscriptionByLibraryKey({libraryKey:o,workspaceId:l});n.id&&(0,s.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},u);try{await u,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:a,orgOrWorkspaceName:i})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryOrgSubscription:n,libraryTeamId:i,userInitiated:s}=r,{orgId:u,subscriptions:p,libraryKey:m}=n;if(e.dispatch(I({libraryKey:m,subscriptions:p})),s){if(r.currentSubscription){let e=n.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,o.trackEvent)("Org Library File Enabled",{orgId:u,libraryKey:m,fileTeamId:i}):(0,o.trackEvent)("Org Library File Disabled",{orgId:u,libraryKey:m,fileTeamId:i}),o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,buzzSubscribed:n.subscriptions.buzz,subscriptionType:"org"})}try{await E.A.postOrgSubscriptionByLibraryKey({libraryKey:n.libraryKey,subscriptions:p,orgId:u}),e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,buzzSubscribed:n.subscriptions.buzz,subscriptionType:"org",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.definedAnalyticsHandler.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,buzzSubscribed:n.subscriptions.buzz,subscriptionType:"org",outcome:"error"}),(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:n.libraryKey,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides}})}}})},757109:(e,r,n)=>{n.d(r,{Nf:()=>u,aW:()=>m,vP:()=>p});var a=n(938982),i=n(19180),o=n(998568),s=n(151223),l=n(834428),c=n(277454),d=n(720722);let u=(0,s.nF)(e=>{(0,c.KQ)(e)}),p=(0,s.nF)((e,r)=>{e.dispatch(l.$I(r)),e.getState().openFile&&e.dispatch(u()),!r.libraryKey&&(0,i.k)().dse_lk_realtime_audit&&(0,o.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("putProductComponents called without a libraryKey"),{tags:{libraryFileKey:r.fileKey,openFileKey:e.getState().openFile?.key,teamId:r.teamId,type:r.type}})}),m=(0,s.nF)((e,r)=>{let{stateGroups:n,components:a,fileKeyOrHubFileId:i,libraryKey:o,teamId:s}=r;if(0!==n.length){let r=n.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(p({itemsById:r,fileKey:i,libraryKey:o,teamId:s??null,type:d.PW.STATE_GROUP}))}if(0!==a.length){let r=a.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(p({itemsById:r,fileKey:i,libraryKey:o,teamId:s??null,type:d.PW.COMPONENT}))}})},783536:(e,r,n)=>{n.d(r,{De:()=>X,Sb:()=>Y,TS:()=>J,WM:()=>q,ZS:()=>eo,df:()=>$,iA:()=>ei,sb:()=>ee});var a=n(660376),i=n(871043),o=n(938982),s=n(186606),l=n(693108),c=n(19180),d=n(334704),u=n(223926),p=n.n(u),m=n(60074),_=n(989232),h=n(879263),g=n(841807),f=n(625358),E=n(998568),y=n(810503),b=n(66699),v=n(967688),T=n(659717),I=n(731991),S=n(952039),A=n(113752),w=n(151223),C=n(834428),N=n(31898),L=n(533737),O=n(67308),R=n(162394),P=n(33103),D=n(937578),k=n(277454),M=n(509618),F=n(19242),x=n(535884),U=n(361053),B=n(899963),G=n(720722),V=n(180495),H=n(866384),z=n(533518),K=n(540818),W=n(216),j=n(757109);let Y=(0,m.NC)("START_PUBLISH"),$=(0,m.NC)("PUBLISH_PROGRESS"),q=(0,m.NC)("PUBLISH_REQUEST_FINISHED"),X=(0,m.NC)("SAVE_PUBLISH_DESCRIPTION"),J=(0,w.nF)(e=>{e.dispatch(I.Q.dequeue({type:T._.MOVE_COMPONENTS_PROMPT})),(0,b.YQ)({id:"Finished publishing components"}),e.dispatch(q())}),Z="library publish SSP";var Q=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(Q||{});let ee=(0,w.nF)((e,{hubFileId:r,localAssetsWithDenormalizedPublishInfo:n})=>{let a=e.getState(),i=(0,c.k)().ds_remove_redux_library_status;if(!i){let r=e=>{for(let r in e={...e})(0,k.HF)(e[r].status)?e[r].status=G.E8.DELETED:e[r].status===G.E8.NEW&&(e[r].status=G.E8.NOT_STAGED);return e},n=r(a.library.local.components),i=r(a.library.local.stateGroups),o=r(a.library.local.styles);e.dispatch(C.I0({local:n,type:G.PW.COMPONENT})),e.dispatch(C.I0({local:i,type:G.PW.STATE_GROUP})),e.dispatch(C.I0({local:o,type:G.PW.STYLE}))}e.dispatch($({state:G.Qx.NONE})),e.dispatch(eo({unpublishAll:i,hubFileId:r,localAssetsWithDenormalizedPublishInfo:n}))});async function et(e,r,n,a){let i=new g.jk("publish.client.generate_and_upload_thumbnails",{});if(i.start(),!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,c=()=>{!function(e,r,n){e.dispatch($({state:G.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:er(e.getState().library.publishProgress)}))}(a,(l+=1)/s,r?G.M$.UNPUBLISH:G.M$.PUBLISH)},d=Object.create(null),u=[],p=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,K.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[a,i]=e.node_id.split(":").map(e=>Number(e));if(isNaN(a))throw Error("Unable to parse sessionId");if(isNaN(i))throw Error("Unable to parse localId");p.push({sessionId:a,localId:i,thumbnail:r}),e.type===G.PW.STYLE&&(d[e.node_id]=JSON.stringify((0,K.fn)(e,n)))}catch(r){(0,y.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),u.push(e.type===G.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{c()}})),0===p.length)return{s3Paths:[],failedThumbnailNodeIds:u,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let m=[];for(;p.length;)m.push(p.splice(0,G.v$));let b=z.b.getThumbnailsBufferPresignedPostUrl(m.length),v=m.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:a,localId:i,thumbnail:o})=>(e.set([(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a,(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i,(0xff000000&o.byteLength)>>24,(0xff0000&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${a}:${i}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),T=[],I=(await b).data.meta.presigned_posts,S=!1;await Promise.allSettled(I.map(async({url:e,fields:r})=>{let n=v.shift();if(!n){(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{T.push(await (0,f.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,h.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof f.qW&&(S=!0),u.push(...n.guids)}})),S&&(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let A=i.stop();return A&&(0,_.trackEvent)("Library generate and upload thumbnails",{elapsedMs:A,duration:A},{forwardToDatadog:!0}),{s3Paths:T,styleMetaByNodeId:d,failedThumbnailNodeIds:u,uploadDurationMs:A,encounteredNonS3PresignedPostError:S}}function er(e){return e.state===G.Qx.NONE?((0,y.x1)(Z,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function en(e,r,n,a){let i=er(e);if(i){let e=performance.now()-i;(0,_.trackEvent)(r,{duration:e}),(0,h.S3)(n,e,{error:a})}else(0,y.x1)(Z,"Publish start time was null")}let ea=async e=>{let r;if((0,c.k)().first_draft_publish_ux&&(e.publishAsFirstDraftKit||e.unpublishAll)){let n=s.XJn.getLocalDesignSystemKits();if(n.length>1)(0,y.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:n.map(e=>e.name)});else if(1===n.length){let a=n[0];if(!a){(0,y.xi)("first_draft","No kit found for publishing",{kits:n});return}r=await (0,P.Hj)(a.pageId,a.name,{publishType:D.tf.LIBRARY_TYPE_INFO_UPDATE},e.firstDraftVariablesForTheme,e.unpublishAll)}}return r},ei=(0,w.nF)(async(e,r={})=>{let n=e.getState(),a=(0,O.d1)(n),i=a?.key;if(!i){(0,y.xi)("first_draft","No file key found for publishing");return}let o=S.F.enqueue({type:"first-draft-publish",message:"Publishing changes...",icon:A.zX.SPINNER}),s=S.F.enqueue({type:"first-draft-publish",message:"Changes published",icon:A.zX.CHECK}),l=S.F.enqueue({type:"first-draft-publish",message:"Failed to publish changes",icon:A.zX.EXCLAMATION,error:!0});e.dispatch(N.Ce()),e.dispatch(o);let c=await ea(r);if(!c){(0,y.xi)("first_draft","No kit metadata found for publishing"),e.dispatch(l);return}try{await H.Gh.postFirstDraftUpdateMetadata({fileKey:i,publishMetadata:c}),e.dispatch(s)}catch(r){(0,y.xi)("first_draft","Failed to publish changes",{error:r}),e.dispatch(l)}}),eo=(0,w.nF)(async(e,r={})=>{let n,u,m,b,T,I,S;let w=e.getState(),C=r.onPublishSuccess??W.cc,H=r.onPublishProgress??W.UN,z=r.onPublishError??W.tZ;r.publishingMode&&r.publishingMode!==w.library.libraryPublishingMode&&(0,y.x1)(Z,"Publishing Mode does not match Redux state, and this will cause downstream errors.",{desiredPublishingMode:r.publishingMode,reduxLibraryPublishingMode:w.library.libraryPublishingMode});let q=r.localAssetsWithDenormalizedPublishInfo??{};if(w.library.publishProgress.state!==G.Qx.NONE){e.dispatch(J());return}let Q=(0,O.d1)(w);if(!Q){console.error("library publishChanges: file is null"),z({error:W.jO.NoFile,dispatch:e.dispatch}),e.dispatch(J());return}let ee=r.itemsToPublish;if(void 0!==ee&&0===ee.size){console.error("No items selected to publish"),z({error:W.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(J());return}let ea=[G.PW.CODE_COMPONENT,G.PW.RESPONSIVE_SET].every(e=>!(0,B.O)(e)||(0,M.aB)(Object.values(q).filter(r=>r.type===e),ee)),ei=r.unpublishAll||(0,M.aB)(Object.values((0,x.MH)(w)),ee)&&(0,M.aB)(Object.values((0,x.dM)(w)),ee)&&(0,M.aB)(Object.values((0,x.cM)(w)),ee)&&(0,M.aB)(Object.values((0,x.bh)(w)),ee)&&(!(0,B.O)(G.PW.MODULE)||(0,M.aB)(Object.values((0,x.x6)(w)),ee))&&ea;(0,h.Rh)(`${ei?G.M$.UNPUBLISH:G.M$.PUBLISH}.start`),e.dispatch(Y({unpublishAll:!!ei})),e.dispatch(L.b({has_published_library_items:!0}));let eo=(n,a,i,o)=>{e.dispatch((0,j.Nf)());let l=o?.encounteredNonS3PresignedPostError?"non_s3_error":a;en(e.getState().library.publishProgress,n,`${ei?G.M$.UNPUBLISH:G.M$.PUBLISH}.error.duration`,l);let d=o?.error;(0,y.x1)(Z,n,{...r,name:d?.name,message:d?.message,stack:d?.stack},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==i&&(0,_.trackEvent)("Publish ended",{savepointId:i,hadException:!0}),function(e,r,n,a,i,o,s,l){0===r?function(e,r,n,a){if(r.state===G.Qx.UPLOADING){let e=er(r);if(e){let a=performance.now(),i=a-e,o=n?{totalDurationMs:i}:{totalDurationMs:i,uploadBuffersDurationMs:a-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};(0,_.trackEvent)(`Client perceived ${r.publishType} duration`,o);let s=(0,c.k)().ssp_stop_client_gen_thumb_generation?"true":"false";for(let[e,n]of Object.entries(o)){let a=`${r.publishType}.success.${e}`;(0,h.S3)(a,n,{skip_client_thumbnail:s})}}else(0,y.x1)(Z,"Publish start time was null")}a({publishProgress:r,publishType:n?G.M$.UNPUBLISH:G.M$.PUBLISH,dispatch:e}),e(X(""))}(a,e,n,i):function(e,r,n,a,i,o,s){let l=a?G.M$.UNPUBLISH:G.M$.PUBLISH;if(o&&e(X(o)),s){i({error:W.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?i({error:W.jO.GenericError,publishType:l,dispatch:e}):(en(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),i({error:W.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(a,e,r,n,o,s,l)}(e.getState().library.publishProgress,o?.numSkippedDueToError??{__tag:"UNKNOWN"},ei,e.dispatch,C,z,r.savepointDescription,o?.encounteredNonS3PresignedPostError),e.dispatch(J());let{hideModalOnPublishRequestFinish:u=!0}=r;u&&e.dispatch(N.Ce())},es=(0,M.jx)((0,x.dM)(w),(0,x.MH)(w),(0,x.cM)(w),(0,x.tK)(w),(0,x.bh)(w),(0,x.x6)(w),q,Q,w.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:ee,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll});if((0,c.k)().ds_ssp_thumbnailing_for_text_styles_client_prep){!function(e){let r=new g.jk("publish.client.prep_nodes_for_thumbnailing",{});r.start();let n=e[G.PW.STYLE][G.M$.PUBLISH].filter(e=>e.style_type===l.s4.TEXT);n.forEach(e=>{s.glU.prepNodeForAssetThumbnailRendering(e.node_id)});let a=r.stop();a&&(0,_.trackEvent)("Prepared node fields used for thumbnail rendering",{elapsedMs:a,textStylesCount:n.length},{forwardToDatadog:!0})}(es);let e=(0,c.k)().ds_ssp_thumbnailing_client_prep_wait_extra_frames?10:2;for(let r=0;r<e;r++)await (0,d.yQ)()}let el=performance.now(),ec="slides"===Q.editor_type,ed=ec?(0,v.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,v.t)("design_systems.publish_actions.savepoint_for_unpublish"),eu=ec?(0,v.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,v.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,F.m)(Q.key,ei?ed:eu,r.savepointDescription,e.dispatch,!0)}catch(r){navigator.onLine?eo("Unable to create savepoint during library publish","create_savepoint",null,{error:r}):(z({error:W.jO.Offline,publishType:ei?G.M$.UNPUBLISH:G.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(J()));return}if(!n){eo("Created savepoint is null","create_savepoint",null);return}let ep=performance.now()-el;(0,_.trackEvent)("Publish start: savepoint successfully created",{savepointId:n.id});let em=p()(Object.values(w.library.local.components).filter(e=>e.isLocal),e=>(0,k.E2)(e)||G.Nv),e_=(0,U.H7)(w),{orderedUpdates:eh}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},a=e[G.PW.VARIABLE_SET][G.M$.PUBLISH];n({publishType:G.M$.PUBLISH,assetType:G.PW.VARIABLE_SET,assets:a}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.VARIABLE_SET,assets:e[G.PW.VARIABLE_SET][G.M$.UNPUBLISH]}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.VARIABLE,assets:e[G.PW.VARIABLE][G.M$.UNPUBLISH]});let i=e[G.PW.STATE_GROUP][G.M$.PUBLISH],o=e[G.PW.COMPONENT][G.M$.UNPUBLISH].filter(e=>null===(0,k.E2)(e));return n({publishType:G.M$.PUBLISH,assetType:G.PW.STATE_GROUP,assets:i}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.STATE_GROUP,assets:e[G.PW.STATE_GROUP][G.M$.UNPUBLISH]}),n({publishType:G.M$.PUBLISH,assetType:G.PW.COMPONENT,assets:e[G.PW.COMPONENT][G.M$.PUBLISH].filter(e=>!(0,k.E2)(e))}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.COMPONENT,assets:o}),n({publishType:G.M$.PUBLISH,assetType:G.PW.STYLE,assets:e[G.PW.STYLE][G.M$.PUBLISH]}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.STYLE,assets:e[G.PW.STYLE][G.M$.UNPUBLISH]}),(0,B.O)(G.PW.MODULE)&&(n({publishType:G.M$.PUBLISH,assetType:G.PW.MODULE,assets:e[G.PW.MODULE][G.M$.PUBLISH]}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.MODULE,assets:e[G.PW.MODULE][G.M$.UNPUBLISH]})),(0,B.O)(G.PW.RESPONSIVE_SET)&&(n({publishType:G.M$.PUBLISH,assetType:G.PW.RESPONSIVE_SET,assets:e[G.PW.RESPONSIVE_SET][G.M$.PUBLISH]}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.RESPONSIVE_SET,assets:e[G.PW.RESPONSIVE_SET][G.M$.UNPUBLISH]})),(0,B.O)(G.PW.CODE_COMPONENT)&&(n({publishType:G.M$.PUBLISH,assetType:G.PW.CODE_COMPONENT,assets:e[G.PW.CODE_COMPONENT][G.M$.PUBLISH]}),n({publishType:G.M$.UNPUBLISH,assetType:G.PW.CODE_COMPONENT,assets:e[G.PW.CODE_COMPONENT][G.M$.UNPUBLISH]})),{orderedUpdates:r}}(es),eg=eh.reduce((e,{publishType:r,assetType:n,assets:i})=>{let o="";switch(n){case G.PW.COMPONENT:o="numComponentBuffers";break;case G.PW.STATE_GROUP:o="numStateGroupBuffers";break;case G.PW.STYLE:o="numStyleBuffers";break;case G.PW.VARIABLE_SET:o="numVariableSetBuffers";break;case G.PW.MODULE:o="numTemplateBuffers";break;case G.PW.VARIABLE:case G.PW.VARIABLE_OVERRIDE:break;case G.PW.RESPONSIVE_SET:o="numResponsiveSetBuffers";break;case G.PW.CODE_LIBRARY:o="numCodeLibraryBuffers";break;case G.PW.CODE_FILE:o="numCodeFileBuffers";break;case G.PW.CODE_COMPONENT:o="numCodeComponentBuffers";break;case G.PW.CONSTRAINED_TEMPLATE:case G.PW.MANAGED_STRING:break;default:(0,a.xb)(n)}r===G.M$.UNPUBLISH&&(o=`${o}Unpublished`);let s=o;return s in e&&(e[s]=i.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numResponsiveSetBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0,numResponsiveSetBuffersUnpublished:0,numCodeLibraryBuffers:0,numCodeLibraryBuffersUnpublished:0,numCodeFileBuffers:0,numCodeFileBuffersUnpublished:0,numCodeComponentBuffers:0,numCodeComponentBuffersUnpublished:0});(0,_.trackEvent)("Library publish upload",{fileKey:Q.key,publishMode:(0,R.z)((0,x.Io)(w)),publishScope:r.publishScope,libraryModalSessionId:r.libraryModalSessionId,orgId:e_?.org_id,workspaceId:e_?.workspace_id,teamId:e_?.id,...eg},{forwardToDatadog:!0});let ef=eh.flatMap(e=>e.publishType===G.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type!==G.PW.VARIABLE&&r.type!==G.PW.VARIABLE_SET&&(0,B.O)(r.type)?r.type===G.PW.MODULE?e.concat(r):e.concat(r).concat(em[r.node_id]||[]):e,[]);if((0,c.k)().ssp_stop_client_gen_thumb_generation)u={failedThumbnailNodeIds:[],s3Paths:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};else try{u=await et(ef,ei,w.library.local.thumbnails,e)}catch(e){eo("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:eE,s3Paths:ey,styleMetaByNodeId:eb,uploadDurationMs:ev,encounteredNonS3PresignedPostError:eT}=u,eI=eh.flatMap(e=>e.assets).length;if(eE.length===eI){eo("All thumbnails failed to upload"+(eT?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:eI,encounteredNonS3PresignedPostError:eT});return}let eS=eh.map(({publishType:e,assetType:r,assets:n})=>{let a=n.filter(e=>!eE.includes(e.node_id));return a.length>0?{publishType:e,assetType:r,assets:a}:null}).filter(i.Vq);if((0,c.k)().first_draft_publish_ux&&(r.publishAsFirstDraftKit||r.unpublishAll)){let e=s.XJn.getLocalDesignSystemKits();if(e.length>1)(0,y.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)});else if(1===e.length){let n=e[0];if(!n){(0,y.xi)("first_draft","No kit found for publishing",{kits:e});return}S=await (0,P.Hj)(n.pageId,n.name,{publishType:D.tf.LIBRARY_PUBLISH,localComponents:(0,x.MH)(w),localStateGroups:(0,x.dM)(w),localVariableSets:(0,x.bh)(w),isDirectGenCompatible:r.isDirectGenCompatible??!1},r.firstDraftVariablesForTheme,r.unpublishAll)}}let eA={updates:eS.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,K.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(i.Vq)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:ey,styleMetaByNodeId:eb,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...S?{kitMetaData:S}:{}};try{let e=(await V.Z.postUploadPublishParams()).data.meta;m=e.url,b=e.fields}catch(e){eo("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;T=await (0,f.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",m,b,e.encode(JSON.stringify(eA)),"application/json")}catch(r){let e=r instanceof f.qW;eo("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{I=(await V.Z.postLibraryPublish({fileKey:Q.key,checkpointKey:n.checkpoint_key,paramsPath:T,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){eo("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,a,i,o,s,l){let c=performance.now(),d=r?G.M$.UNPUBLISH:G.M$.PUBLISH;e.dispatch($({state:G.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:a,numSkippedPriorToPublish:i,publishStartMs:er(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:A.zX.SPINNER})}(e,ei,I,n,eE.length,ev,ep,H)}catch(e){eo("Unable to notify publish start","generic_error",n.id,{error:e});return}})},421724:(e,r,n)=>{n.d(r,{hZ:()=>E,w4:()=>g,yo:()=>f});var a=n(60074),i=n(967688),o=n(952039),s=n(302395),l=n(637603),c=n(318147),d=n(922484),u=n(693246),p=n(138528),m=n(683703),_=n(151223),h=n(35597);let g=(0,a.NC)("LICENSE_GROUP_DELETE"),f=(0,a.NC)("LICENSE_GROUP_UPDATE"),E=(0,a.NC)("LICENSE_GROUP_SET");(0,_.nF)(async(e,r)=>{let n=r.orgId;n&&await y(e,r,n)}),(0,_.nF)(async(e,r)=>{let{currentUserOrgId:n}=e.getState();n&&await y(e,r,n)});let y=async(e,r,n)=>{let{orgById:a,loadingState:_}=e.getState(),g=await (0,s.Q)((0,u.gq)(!0)),f=(0,p.A8)(g,c.Xn.MEMBER);if(!n)return;let y=a[n],b=(0,l.EO)(y.id);if(y&&y.bigma_enabled&&f&&(r.forceRefetch||(0,d.Sc)(_,b))&&!(0,d.VP)(_,b)){e.dispatch(h.Cx({key:(0,l.EO)(n)}));try{let r=(await m.Eh.getLicenseGroups({currentOrgId:n})).data.meta;e.dispatch(E(r)),e.dispatch(h.x2({key:(0,l.EO)(n)}))}catch(r){e.dispatch(o.F.enqueue({type:"get-license-groups",message:r.data?.message||(0,i.t)("license_group.an_error_occurred_while_fetching_workspaces"),error:!0})),e.dispatch(h.of({key:(0,l.EO)(n)}))}}}},35597:(e,r,n)=>{n.d(r,{Cx:()=>c,SI:()=>o,of:()=>s,x2:()=>l,yH:()=>i});var a=n(60074);let i=(0,a.NC)("LOADING_STATE_DEL"),o=(0,a.NC)("LOADING_STATE_PUT_FAILURE_REASON"),s=(0,a.NC)("LOADING_STATE_PUT_FAILURE"),l=(0,a.NC)("LOADING_STATE_PUT_SUCCESS"),c=(0,a.NC)("LOADING_STATE_PUT_LOADING")},763610:(e,r,n)=>{n.d(r,{F6:()=>_,Ho:()=>p,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>h,sm:()=>d,sp:()=>E,yc:()=>m});var a=n(186606),i=n(60074),o=n(353231),s=n(286003),l=n(13635),c=n(151223);let d=(0,i.NC)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,i.NC)("MULTIPLAYER_EMOJI_CLEAR_STATE"),p=(0,c.nF)(e=>{a.glU?.setIsInCursorChat(!1),e.dispatch(u())}),m=(0,i.NC)("MULTIPLAYER_EMOJI_START_CHATTING"),_=(0,c.nF)((e,r)=>{let n=e.getState();0>[a.NLJ.HAND,a.NLJ.SELECT,a.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&a.glU?.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(a.glU?.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(m(r))}),h=(0,i.NC)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,i.NC)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,i.NC)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},590318:(e,r,n)=>{n.d(r,{Jd:()=>T,QC:()=>b,UF:()=>I,aJ:()=>E,kN:()=>y,lT:()=>v});var a=n(989232),i=n(183603),o=n(304756),s=n(314979),l=n(967688),c=n(210853),d=n(952039),u=n(151223);n(31898);var p=n(179388),m=n(705693),_=n(94831),h=n(654793),g=n(683703),f=n(768623);let E="team_join_request_submitted",y="permission_request_submitted",b=(0,u.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},i=e.getState().user?.id,d=e.getState().roles.byTeamId,u=i&&d&&d[r.teamId]?d[r.teamId][i]?.level:null,p={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===y?(0,a.trackEvent)(y,p):(0,a.trackEvent)(E,p),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let a=n.meta;a.status===h.c.APPROVED?e.dispatch((0,m.vr)({teamId:a.team_id})):r.level===_.e6.EDITOR&&u===_.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),v=(0,u.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),T=(0,u.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(f.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),I=(0,u.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,u.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(p.yJ({org:r.meta}))})});let S=(0,u.nF)((e,{payload:r,successMessage:n})=>{let a=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${a}`,r).then(r=>{e.dispatch(p.yJ({org:r.data.meta})),n&&e.dispatch(d.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})});(0,u.nF)((e,{orgId:r,googleSsoOnly:n,mfaRequired:a})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n,mfa_required:a}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,samlSsoOnly:n,mfaRequired:a})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n,mfa_required:a}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(p.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{onFailure:r,onSuccess:n,orgId:a,timeoutDurationInSecs:i})=>{o.Ay.put(`/api/orgs/${a}`,{idle_timeout_duration_in_secs:i}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(p.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,c.J)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,u.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:a,onSuccess:i})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?a:void 0,ip_allowlist_enabled:n}).then(a=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(p.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),i()}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,u.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,u.nF)((e,{orgId:r,exportControlSetting:n,successMessage:a})=>{o.Ay.put(`/api/orgs/${r}/export_controls`,{export_control_setting:n}).then(()=>{e.dispatch(S({payload:{file_export_setting:n},successMessage:a}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,workspaceId:n,exportControlSetting:a,successMessage:i,onClose:d})=>{o.Ay.put(`/api/orgs/${r}/workspaces/export_controls`,{export_control_setting:a,workspace_id:n}).then(()=>{e.dispatch(S({payload:{file_export_setting:a},successMessage:i})),d()}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,workspaceId:n,exportControlSetting:a,successMessage:i,onClose:d})=>{o.Ay.put(`/api/orgs/${r}/workspaces/export_controls`,{export_control_setting:null,workspace_id:n}).then(()=>{e.dispatch(S({payload:{file_export_setting:a},successMessage:i})),d()}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,r)=>{let n=r.successMessage,a=r.autogenPasswordControl,o=r.settingsId,u=g.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:a});u.then(()=>{n&&e.dispatch(d.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,i.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:a}}},u):(0,i.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:a,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},u)}),(0,u.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,u.nF)((e,{orgId:r,slidesDisabled:n,successMessage:a})=>{g.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(p.F6({id:r,is_slides_disabled:n})),a&&e.dispatch(s.s.flash(a))})}),(0,u.nF)((e,{orgId:r,sitesPublishingDisabled:n,successMessage:a})=>{g.Eh.putToggleSitesPublishingDisabled({orgId:r,sitesPublishingDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{a&&e.dispatch(s.s.flash(a))})}),(0,u.nF)((e,{orgId:r,supabaseDisabled:n,successMessage:a})=>{g.Eh.putToggleSupabaseDisabled({orgId:r,supabaseDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{a&&e.dispatch(s.s.flash(a))})})},766425:(e,r,n)=>{n.d(r,{MB:()=>u,hZ:()=>_,wc:()=>p,yH:()=>m});var a=n(60074),i=n(304756),o=n(314979),s=n(967688),l=n(952039),c=n(151223),d=n(31898);let u=(0,c.nF)((e,r)=>{let n=e.getState(),{emails:a,isResentInvite:o,licenseGroupId:c,workspaceId:u,billableProductKey:m}=r;e.dispatch(p({creating:!0})),i.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:a,billable_product_key:m,license_group_id:c,workspace_id:u}).then(({data:r})=>{let n=r.meta;e.dispatch(_(n)),e.dispatch(p({creating:!1})),e.dispatch(d.Lo());let i=(0,s.t)("org_invite.invite_resent");if(!o){let e=a.length-n.length;i=n.length>0?0===e?(0,s.t)("org_invite.new_members_message",{numInvites:n.length}):1===e?(0,s.t)("org_invite.new_members_and_one_existing_member_message",{numInvites:n.length}):(0,s.t)("org_invite.new_members_and_multiple_existing_members_message",{numInvites:n.length,numExisting:e}):(0,s.t)("org_invite.existing_members_message",{numExisting:e})}e.dispatch(l.F.enqueue({message:i}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(p({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})});(0,c.nF)((e,r)=>{let{idpUser:n}=r,a=e.getState();i.Ay.del(`/api/org_invites/${n.id}`,{org_id:a.currentUserOrgId}).then(r=>{e.dispatch(m({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let p=(0,a.NC)("IS_CREATING_ORG_INVITES"),m=(0,a.NC)("DELETE_ORG_INVITE"),_=(0,a.NC)("SET_ORG_INVITES")},370766:(e,r,n)=>{n.d(r,{E:()=>l,hZ:()=>c});var a=n(60074),i=n(314979),o=n(151223),s=n(485139);let l=(0,a.NC)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(i.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,a.NC)("ORG_SAML_CONFIG_SET")},524637:(e,r,n)=>{n.d(r,{E:()=>b,GR:()=>S,Lx:()=>v,MT:()=>T,hZ:()=>I}),n(848318),n(301168);var a=n(879378),i=n.n(a),o=n(60074),s=n(304756),l=n(314979),c=n(967688),d=n(210853),u=n(151223),p=n(198850),m=n(705693),_=n(610345),h=n(10096),g=n(683703),f=n(358847),E=n(35597);(0,u.nF)(async(e,r)=>{let n=r.team.id;try{let a=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(I({teams:[a]}))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,u.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),a=await Promise.all(r),i=[].concat(...a.map(e=>e.data.meta));e.dispatch(I({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:i.length})))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,u.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),a=r.workspaceId;try{let i=(await s.Ay.post(`/api/workspace/${a}/teams`,{team_ids:n})).data.meta;e.dispatch(I({teams:i})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:i.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,u.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(v("loading"));try{let r=(await f.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(I({teams:r})),e.dispatch(v("loaded"))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(v("errors"))}}),(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamIds,i={team_ids:a};r.level&&(i.level=r.level);let o=(0,_.n1)(a);e.dispatch(E.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.UM)({teamIds:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(E.of({key:o}))})});let y=(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,a=r.teamId,i={team_ids:[a]};r.level&&(i.level=r.level);let o=(0,_.p9)(a);e.dispatch(E.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,i).then(()=>{e.dispatch((0,m.vr)({teamId:a,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(E.of({key:o}))})});(0,u.nF)((e,r,{loadingKey:n})=>{let a=e.getState().currentUserOrgId,{teamId:i,disableFlashError:o}=r,s=g.Eh.getTeam({orgId:a,teamId:i});(0,h.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(p.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let b=(0,o.NC)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:a,includeMemberCount:i,includeTopMembers:o,includeSecretTeams:s}=r||{};g.Eh.getTeams({orgId:n,includeMemberCount:i,includeProjectCount:a,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(I({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(b(r))});let v=(0,o.NC)("SET_ORG_TEAMS_STATUS"),T=(0,o.NC)("RESET_ORG_TEAMS"),I=(0,o.NC)("ORGS_SET_DISCOVERABLE_TEAMS");function S(e,r,n){return i()(()=>e(y({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},861119:(e,r,n)=>{n.d(r,{$V:()=>S,AW:()=>A,IJ:()=>N,Pg:()=>L,bu:()=>C,hZ:()=>T,uo:()=>w,yJ:()=>I});var a=n(167920),i=n(60074),o=n(637640),s=n(304756),l=n(103661),c=n(946778),d=n(314979),u=n(967688),p=n(805739),m=n(952039),_=n(151223),h=n(31898),g=n(877146),f=n(922484),E=n(10096),y=n(941244),b=n(683703),v=n(844462);let T=p.hG,I=(0,_.MM)("ORG_USER_PUT",async(e,r,{optimistId:n})=>{if(r.userInitiated)try{let i=await y.G.updateOrgUser({id:r.orgUser.id,changes:{description:r.orgUser.description}});e.dispatch(a.c(n)),e.dispatch(I({orgUser:i.data.meta,userInitiated:!1}))}catch(r){e.dispatch(a.r(n)),e.dispatch(d.s.error(r.data?.message||(0,u.t)("org_user_actions.an_error_occurred")))}});(0,_.nF)(async(e,r)=>{try{let n={...!1===r.showUserOnboarding&&{show_figjam_user_onboarding:!1},...r.shownPreLaunchAdminOnboarding&&{has_shown_figjam_admin_onboarding:!0},...r.shownPostLaunchAdminOnboarding&&{has_shown_figjam_admin_launch_onboarding:!0}},a=await y.G.updateOrgUser({id:r.orgUserId,changes:n});e.dispatch(I({orgUser:a.data.meta,userInitiated:!1}))}catch(r){e.dispatch(d.s.error(r.data?.message||(0,u.t)("org_user_actions.an_error_occurred_closing_onboarding")))}});let S=(0,_.nF)(async(e,r)=>{try{let n;switch(await y.G.requestOrgAccountTypeRequest({org_id:r.orgId,entry_point:r.entryPoint,message:r.message,admin_ids:r.adminIds,editor_type:r.licenseType,billable_product_key:r.seatTypeKey,file_key:r.fileKey,folder_id:r.folderId}).then(e=>{200===e.status&&r.onSuccess?.(e.data.meta?.id)}),r.entryPoint){case g.tc.IN_EDITOR_RESTRICTED_DRAFT:case g.tc.RESTRICTED_DRAFT_SHARED_EMAIL:n=(0,u.t)("org_user_actions.request_sent_well_let_you_know");break;case g.tc.ASK_TO_EDIT_ONE_CLICK:n=(0,u.t)("1_click_expansion.request_sent_well_let_you");break;case g.PE.CreateFileProjectView:case g.tc.USER_SETTINGS:n=(0,u.t)("upgrades.request_sent_toast");break;default:n=(0,u.t)("org_user_actions.upgrade_request_sent")}r.suppressVisualBell||e.dispatch(m.F.enqueue({message:n,type:"upgrade-request-sent"}))}catch(n){console.error(n),n.message.includes("Org access needed")?(e.dispatch(l.Ts({origin:"edit_button_click",formState:c.qB.JOIN_ORG,redirectUrl:o.Ay.location.pathname})),e.dispatch(h.to({type:v.x,data:{}}))):e.dispatch(d.s.error(n.data?.message||(0,u.t)("org_user_actions.an_error_occurred_requesting_account_type"))),r.onError?.()}}),A=(0,_.nF)(async(e,r)=>{try{await s.Ay.del(`/api/org_user/${r.orgId}`),e.dispatch(m.F.enqueue({type:"org_guest_leave",message:(0,u.t)("org_user_actions.you_successfully_left_organization",{orgName:r.orgName})}))}catch(n){console.error(n),e.dispatch(d.s.error(n.data?.message||(0,u.t)("org_user_actions.an_error_occurred_leaving_organization",{orgName:r.orgName})))}}),w=(0,_.MM)("ORG_USER_BATCH_UPDATE_ORG_USERS",async(e,r,{optimistId:n})=>{let i,o;let s=e.getState();if(r.lastUpdateTimestampOverride)i=r.lastUpdateTimestampOverride,o=r.lastUpdateTimestampOverride;else{let e=Object.values(s.orgUsersByOrgId[r.orgId]).filter(e=>r.params.org_user_ids.includes(e.id));if(0===e.length)return;if(o=new Date(Math.max(...e.map(e=>+new Date(e.updated_at)))).toISOString(),void 0!==r.params.license_group_id){let r=e.map(e=>e.license_group_member?.updated_at).filter(Boolean);i=r.length>0?new Date(Math.max(...r.map(e=>+new Date(e)))).toISOString():null}}try{let s=(await y.G.updateOrgUsers({orgId:r.orgId,...r.params,latest_ou_update:o,latest_lg_member_update:i,showing_billing_groups:!0})).data.meta;e.dispatch(a.c(n)),e.dispatch(T({orgUsers:s,orgId:r.orgId})),r.successCallback&&r.successCallback()}catch(o){console.error("Batch Update Failed",o),r.errorCallback?.(),e.dispatch(a.r(n));let i=function(e){let{reason:r,message:n}=e;return"seat_increase_unauthorized"===r?(0,u.t)("modify_plan_user_seat_modal.error.seat_increase_unauthorized"):n??(0,u.t)("org_user_actions.an_error_occurred_updating_org_users")}(o.data);e.dispatch(d.s.error(i))}}),C=(0,i.NC)("ORG_USER_BATCH_DELETE_ORG_USERS"),N=(0,_.nF)(async(e,r)=>{if(e.dispatch(C(r)),r.userInitiated)try{await s.Ay.del(`/api/orgs/${r.orgId}/org_users`,r.params);let n=r.params.org_user_ids.length,a=(0,u.t)("org_user_actions.user_has_been_removed_from_organization",{deletedOrgUserCount:n});e.dispatch(d.s.flash(a))}catch(r){e.dispatch(d.s.error(r.data?.message||(0,u.t)("org_user_actions.an_error_occurred")));return}}),L=(0,_.nF)(async(e,{orgId:r},{loadingKey:n})=>{let a=e.getState();if(!f.Sc(a.loadingState,n))return;let i=b.Eh.getAdmins({includeLicenseAdmins:!0,orgId:r});(0,E.N)(i,e,n);try{let n=await i;e.dispatch(T({orgUsers:n.data.meta,orgId:r}))}catch(r){e.dispatch(d.s.error(r.message||(0,u.t)("org_user_actions.an_error_occurred_fetching_org_admins")))}},({orgId:e})=>`ORG_USER_GET_ADMINS_${e}`);(0,_.nF)(async(e,r,{loadingKey:n})=>{let a=b.Eh.getUser({orgId:r.orgId,userId:r.userId});(0,E.N)(a,e,n);try{let n=[(await a).data.meta];return e.dispatch(T({orgUsers:n,orgId:r.orgId})),n.find(e=>e.user_id===r.userId)||null}catch(n){if(404===n.status&&r.allowNoOrgUser)return null;return e.dispatch(d.s.error(n.message||(0,u.t)("org_user_actions.an_error_occurred_fetching_org_users"))),null}},e=>`ORG_USER_GET_BY_USER_ID_${e.orgId}_${e.userId}`)},679617:(e,r,n)=>{n.d(r,{$h:()=>N,Ay:()=>C,Az:()=>x,Bq:()=>z,Ef:()=>L,I2:()=>k,Je:()=>M,Lo:()=>B,M2:()=>F,MN:()=>I,Mv:()=>H,Qe:()=>O,Qg:()=>P,Ts:()=>V,Vm:()=>v,WG:()=>S,WX:()=>W,Wc:()=>R,XS:()=>w,eK:()=>T,i:()=>A,js:()=>U,pv:()=>K,qU:()=>G,yy:()=>D});var a=n(60074),i=n(918777),o=n(29188),s=n(586588),l=n(304756),c=n(314979),d=n(967688),u=n(453370),p=n(253332),m=n(656320),_=n(872240),h=n(175957),g=n(151223),f=n(422444),E=n(31898),y=n(198850),b=n(442214);let v=(0,g.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})=>{e.dispatch(u.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:a})),e.dispatch(B({billingPeriod:_.tY.STUDENT}))}),T=(0,a.NC)("PAYMENT_RESTORE_SAVED_CART"),I=(0,a.NC)("PAYMENT_SET_CURRENCY"),S=(0,a.NC)("PAYMENT_SET_TOKEN"),A=(0,a.NC)("PAYMENT_SET_TAXES"),w=(0,a.NC)("PAYMENT_SET_PROMO"),C=(0,g.nF)((e,r)=>{r.promo||(0,s._H)(),e.dispatch(w(r))}),N=(0,a.NC)("PAYMENT_SET_VAT_GST_ID"),L=(0,a.NC)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),O=(0,a.NC)("PAYMENT_MAKE_STUDENT_TEAM");(0,g.nF)((e,r)=>{let n=e.getState(),a=n.user?.id;l.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{a?e.dispatch(f._l({workspace:{userId:a,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(u.$T({view:"team",teamId:r.teamId})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(k({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(k({submitPending:!1}))}),e.dispatch(O())});let R=(0,g.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?l.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(b.Be({teamId:r})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,p.UE)(r,e.dispatch)):l.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:a})=>{let o=a.meta&&a.meta.team;o&&e.dispatch(y.yJ({team:o,userInitiated:!1})),e.dispatch(b.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,u=s?.quantity?s.current_period_end:null,p=l?.quantity?l.current_period_end:null,m=u&&p?(0,i.A)(u).isAfter((0,i.A)(p))?u:p:u||p;e.dispatch(c.s.flash(m?(0,d.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,i.A)(m).toDate()}):(0,d.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,p.UE)(r,e.dispatch))}),P=(0,a.NC)("PAYMENT_SHOW_ERROR"),D=(0,a.NC)("PAYMENT_SET_COMPANY_DETAILS"),k=(0,a.NC)("PAYMENT_SET_SUBMIT_PENDING"),M=(0,a.NC)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),F=(0,a.NC)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),x=(0,a.NC)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),U=(0,a.NC)("PAYMENT_SET_NUM_EDITORS"),B=(0,a.NC)("PAYMENT_SET_BILLING_PERIOD"),G=(0,a.NC)("PAYMENT_SET_CAMPFIRE_SEATS"),V=(0,a.NC)("PAYMENT_INIT"),H=(0,a.NC)("PAYMENT_START_ORG_UPGRADE_FLOW"),z=(0,g.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:a,entryPoint:i,upsellSource:s}=r,l=(0,_.oO)({upsellSource:s,fallbackEntryPoint:i});if(n&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,m.Np)(r,{view:"orgSelfServe",upsellSource:s,entryPoint:l}),document.baseURI).href;e.dispatch(f.V3({url:n}))}else e.dispatch(E.Ce()),e.dispatch(u.$T({view:"orgSelfServe",newTeamProps:a,upsellSource:s,entryPoint:l}));e.dispatch(H({currency:r.currency}))}),K=(0,a.NC)("PAYMENT_START_PRO_UPGRADE_FLOW"),W=(0,g.nF)((e,r)=>{let{teamId:n,billingPeriod:a,entryPoint:i,onBillingCompleteRedirectInfo:s,upsellSource:l}=r,c=(0,_.oO)({upsellSource:l,fallbackEntryPoint:i}),d={view:"teamUpgrade",teamFlowType:h.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:_.tn.CHOOSE_PLAN,billingPeriod:a,planType:h.Sc.TEAM,entryPoint:c,...s?{searchParams:{onCompleteRedirectFileKey:s.fileKey,onCompleteRedirectNodeId:s.nodeId}}:{}};if(r.openInNewTab&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,m.Np)(r,d),document.baseURI).href;e.dispatch(f.V3({url:n}))}else{let n=r.openInNewTab?void 0:r.selectedView;e.dispatch(E.Ce()),d.previousView=n,e.dispatch(u.$T(d))}e.dispatch(K({newTeam:r.newTeam,currency:r.currency}))})},63443:(e,r,n)=>{n.d(r,{F9:()=>v,Hx:()=>N,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>k,RH:()=>M,TN:()=>G,Vu:()=>A,WR:()=>T,ay:()=>y,cu:()=>L,f0:()=>O,fR:()=>B,gU:()=>D,jS:()=>I,jX:()=>P,lD:()=>F,nM:()=>w,pj:()=>C,v8:()=>b});var a=n(60074),i=n(621464),o=n(304756),s=n(210853),l=n(160304),c=n(151223),d=n(566726),u=n(197700),p=n(913026),m=n(244813),_=n(20687),h=n(722563),g=n(324747),f=n(475166);let E=(0,a.NC)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,h.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,a.NC)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,a.NC)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,h.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let v=(0,a.NC)("ADD_FACE_STAMP_TO_RECENTS"),T=(0,a.NC)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,h.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:a})),e.dispatch(T(r))});let I=(0,a.NC)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,h.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(A({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let a=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:a})),e.dispatch(I(r))});let S=(0,a.NC)("SET_RECENT_PLUGINS"),A=(0,a.NC)("SET_RECENT_WIDGETS"),w=l.nM,C=l.pj,N=l.Hx,L=(0,a.NC)("ADD_FETCHED_PLUGIN_VERSION"),O=(0,a.NC)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{G(e,r)}),P=(0,a.NC)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r))}),k=(0,a.NC)("ADD_WIDGETS_TO_RECENTS"),M=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(k(r))}),F=(0,a.NC)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,a.NC)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,a,l,c,d)=>{if(a&&a.current_user_has_run||!r||(0,m.Vi)(e)||c)return;let p=l.find(r=>r.id===e);p?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{i.k.error((0,s.J)(e))})},B=(e,r)=>n=>{let a=(0,_.uF)(e),i=(a.manifest?.editorType??[]).map(_.Sb),o=(0,g.xQ)(e)?M:D;i.forEach(i=>n(o({storeInRecentsKey:i,id:e.id,version:a.id,currentUserId:r})))};function G(e,r){let n={},a=({id:a,version:i,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?L:O;return i&&(n[a]=i),e.dispatch(s({id:a,version:i,status:o}))},i=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){a({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&l.status!==f.Lx.FETCHING&&(l.status!==f.Lx.FETCHED||l.version)?l.version&&(n[o]=l.version):i.push(o)}),!i.length)return Promise.resolve(n);i.forEach(e=>{a({id:e,status:f.Lx.FETCHING})});let s={ids:i,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,p.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),i.forEach(e=>{let n;let i=r.meta.find(r=>r.id===e);i&&(n=(0,h.ul)(i)),a({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(i.forEach(e=>{a({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},795240:(e,r,n)=>{n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>m,hh:()=>h,lX:()=>f,q0:()=>_,zT:()=>y,zU:()=>p});var a=n(186606),i=n(7376),o=n(60074),s=n(446470),l=n(151223),c=n(656320),d=n(983510);let u="seen_try_onboarding",p=(0,o.NC)("SET_WORKSHOP_USER_NAME"),m=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),i=e.getState(),o="fullscreen"===i.selectedView.view&&i.selectedView.workshopModeInfo;if(o)a.h3O?.setName(n),(0,d.Vv)(o.id,n),e.dispatch(p(r))}),_=(0,o.NC)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),h=(0,o.NC)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,o.NC)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,i.DN)().set(u,!0),e.dispatch(g())});let f=(0,o.NC)("SET_WORKSHOP_MODE_UNTIL"),E=(0,o.NC)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,s.Dk)((0,c.xS)(n,r))})},375694:(e,r,n)=>{n.d(r,{Ev:()=>l,FL:()=>s,nH:()=>d,rk:()=>c,sw:()=>o});var a=n(60074),i=n(151223);let o=(0,a.NC)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,i.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(o())}),(0,i.nF)((e,r)=>{let{rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:l,nodeId:c}=r;e.dispatch(s({rowTop:n,rowLeft:a,styleType:i,inheritStyleKeyField:o,styleNameInputPrefix:l,nodeId:c}))});let s=(0,a.NC)("SHOW_CREATE_STYLE_PREVIEW"),l=(0,a.NC)("FULLSCREEN_SHOW_STYLE_PREVIEW"),c=(0,i.nF)((e,r)=>{e.dispatch(l(r))}),d=(0,a.NC)("STYLE_FILE_PUT_STYLE_SET");(0,a.NC)("STYLE_FILE_GET_STYLE_SET")},198850:(e,r,n)=>{n.d(r,{$I:()=>L,$V:()=>E,$w:()=>C,Jt:()=>D,TI:()=>v,WC:()=>T,_E:()=>f,aB:()=>A,bE:()=>P,bQ:()=>w,ii:()=>y,mw:()=>b,n9:()=>S,r1:()=>I,uo:()=>N,yH:()=>R,yJ:()=>O});var a=n(167920),i=n(60074),o=n(637640),s=n(304756),l=n(314979),c=n(967688),d=n(805739),u=n(952039),p=n(151223),m=n(472520),_=n(613733),h=n(10096),g=n(583940);let f=(0,p.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:i})=>{s.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(a.c(i))}).catch(r=>{e.dispatch(a.r(i))})});(0,p.nF)(async(e,r)=>{let{teamId:n}=r;await s.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;o.Ay.redirect(r),e.dispatch(l.s.flash((0,c.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(l.s.error((0,c.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,c.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,p.nF)(async(e,r)=>{await s.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(O({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,p.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await g.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(u.F.enqueue({message:n?(0,c.t)("settings_tab.ui_kits_disabled"):(0,c.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(O({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("file_browser.error_try_again")))})}),(0,p.nF)((e,{teamId:r},{loadingKey:n})=>{let a=g.$.getTeam({teamId:r});(0,h.N)(a,e,n),a.then(({data:r})=>{e.dispatch(O({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("file_browser.error_try_again")))})}),(0,p.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:a})=>{let i=g.$.getMembers({teamId:r});n&&(0,h.N)(i,e,a);let o=(0,_.kW)({label:m.A.TeamMembersTable.teamMembersByTeamId,variant:"old",contextArgs:{teamId:r}});i.then(({data:n})=>{o();let a={};n.meta.forEach(e=>{a[e.email]=e}),e.dispatch(E({members:a,teamId:r}))},r=>{console.error(r),e.dispatch(l.s.error((0,c.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`);let E=(0,i.NC)("TEAM_SET_MEMBERS"),y=(0,i.NC)("TEAM_BATCH_JOIN"),b=(0,i.NC)("TEAM_JOIN"),v=(0,i.NC)("TEAM_STOP_RENAME"),T=(0,i.NC)("TEAM_BEGIN_RENAME"),I=(0,i.NC)("TEAM_CREATION_SET_LOADING"),S=(0,i.NC)("TEAM_CHANGE_DEFAULT_PERMISSION"),A=(0,i.NC)("TEAM_CHANGE_SHARING_SETTINGS"),w=(0,i.NC)("TEAM_CHANGE_ORG_ACCESS");(0,i.NC)("TEAM_LOADED");let C=(0,i.NC)("TEAM_RENAME"),N=(0,i.NC)("TEAM_BATCH_PUT"),L=d.RF,O=(0,p.nF)((e,r)=>{e.dispatch(L(r))}),R=d.Nh,P=(0,i.NC)("TEAM_POST"),D=(0,i.NC)("TEAM_GET")},442214:(e,r,n)=>{n.d(r,{Be:()=>h,H3:()=>E,OP:()=>f,l0:()=>g,wn:()=>y});var a=n(60074),i=n(304756),o=n(314979),s=n(967688),l=n(952039),c=n(151223);n(31898);var d=n(442214),u=n(353379),p=n(318147);n(834612);var m=n(10096),_=n(2147);let h=(0,c.nF)((e,{teamId:r},{loadingKey:n})=>{let a=_.T.getTeamSummary({teamId:r});(0,m.N)(a,e,n),a.then(({data:r})=>{e.dispatch(g({summary:r.meta}))}).catch(()=>{e.dispatch(o.s.error((0,s.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`),g=(0,a.NC)("TEAM_ADMIN_SET_SUMMARY"),f=(0,a.NC)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER");function E(e){let{teamId:r,dispatch:n,annualSeatCounts:a,onSuccess:c,onFailure:m}=e;return i.Ay.post(`/api/subscriptions/team/${r}/annual_subscription`,{count_by_billable_product:a}).then(async()=>{n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"})),await (0,u.jL)({planType:p.OL.TEAM,planId:r}),c()}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),m(),e})}function y(e){let{teamId:r,dispatch:n,annualSeatCounts:a,onSuccess:c,onFailure:m}=e;return i.Ay.put(`/api/subscriptions/team/${r}/coterm_annual_seats`,{count_by_billable_product:a}).then(async()=>{n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"})),await (0,u.jL)({planType:p.OL.TEAM,planId:r}),c()}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),m(),e})}},162962:(e,r,n)=>{n.d(r,{m:()=>h});var a=n(167920),i=n(304756),o=n(314979),s=n(967688),l=n(952039),c=n(504614),d=n(31898),u=n(318147),p=n(173847),m=n(151223),_=n(931078);(0,m.nF)((e,{members:r,team:n,teamUsers:a,usersWithNoTeamUserIds:i=[],paidStatusType:o,paidStatus:m,entryPoint:_,showModalsBeneath:g=!1})=>{e.dispatch((0,d.to)({type:(0,c.j)(),data:{onConfirm:()=>{let c;e.dispatch(h({teamId:n.id,teamUsers:a,usersWithNoTeamUserIds:i,paidStatus:m,paidStatusType:o,userInitiated:!0,entryPoint:_}));let d=r.length,g={productName:o===p.j4.WHITEBOARD?(0,s.t)("general.figjam"):(0,s.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:d};switch(m){case u.Zf.FULL:c=(0,s.t)("team_user.actions.team_members_upgraded.seat_rename",g);break;case u.Zf.STARTER:c=(0,s.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",g);break;case u.Zf.RESTRICTED:c=(0,s.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",g)}e.dispatch(l.F.enqueue({type:"team-paid-status-updated",message:c}))},members:r,team:n,paidStatusType:o,paidStatus:m},showModalsBeneath:g}))});let h=(0,m.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:l,paidStatus:c,paidStatusType:d,userInitiated:u,entryPoint:m},{optimistId:h})=>{if(u){let u=n.map(e=>e.user_id).concat(l||[]);await i.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return d===p.j4.WHITEBOARD?r.whiteboard_paid_status=c:r.design_paid_status=c,r}),entry_point:m}).then(function({data:n}){e.dispatch(a.c(h)),e.dispatch((0,_.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(a.r(h));let n=(0,s.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(o.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},27382:(e,r,n)=>{n.d(r,{XZ:()=>_,c0:()=>m});var a=n(755595),i=n(60074),o=n(304756),s=n(331210),l=n(151223),c=n(677334),d=n(163554),u=n(7905),p=n(392165);let m=(0,i.NC)("ONBOARDING_TEMPLATES_PUT_ALL");(0,l.nF)(e=>{p.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,s.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(m(n))})}),(0,l.nF)((e,r)=>o.Ay.post("/api/files/first_template_type",{template_type:r.type}));let _=c.M4.Query({fetch:async e=>{let r=await u.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:a.z.array(d.L)});c.M4.Query({fetch:async()=>{let e=await p.H.getStartingPointsTemplates();if(200!==e.status)throw Error("Failed to fetch starting points templates");return e.data.meta},key:"starting_points_templates"}),c.M4.Query({fetch:async()=>{let e=await p.H.getStartingPointsTemplatesAndAssets();if(200!==e.status)throw Error("Failed to fetch starting points templates and assets");return e.data.meta},key:"starting_points_templates_and_assets"})},372240:(e,r,n)=>{n.d(r,{$:()=>h});var a=n(848318),i=n(301168),o=n(382902),s=n(857607),l=n(353231),c=n(277909),d=n(125761),u=n(318147),p=n(434289),m=n(124213),_=n(565294);function h({editorType:e,triggerElement:r,contextClicked:n,...h}){let g=function({newFileFrom:e,isDraftsFolder:r,folderId:n,forceOpenNewTab:h,newFileDataLocalStorageKey:g}){let f=(0,c.B)(),E=(0,i.wA)(),y=(0,d.TA)(),b=(0,o.Xr)(m.P4),v=(0,i.d4)(e=>{let r=n??e.user?.drafts_folder_id,a=r?e.folders[r]:void 0;return a&&a.team_id?e.teams[a.team_id]:void 0}),T=(0,i.d4)(e=>e.currentTeamId?e.teams[e.currentTeamId]:void 0);return(0,a.useCallback)(({editorType:a,contextClicked:i,triggerElement:o})=>c=>{E((0,_.zE)({state:f,editorType:a,triggerElement:o,team:v||T,from:e,openNewFileIn:h||(0,s.oJ)(c)?p.ai.NEW_TAB:p.ai.SAME_TAB,folderId:n,isDraftsFolder:r,callback:e=>{(0,l.Cu)({userId:y,fileKey:e},i)},newFileDataLocalStorageKey:g})),a===u._Y.SITES&&b(!0)},[E,n,v,r,T,h,e,f,y,g,b])}(h);return(0,a.useMemo)(()=>g({editorType:e,triggerElement:r,contextClicked:n}),[g,e,r,n])}},15120:(e,r,n)=>{n.d(r,{C$:()=>P,S5:()=>w,WJ:()=>R,hz:()=>O,yJ:()=>D});var a=n(938982),i=n(60074),o=n(989232),s=n(29188),l=n(637640),c=n(849326),d=n(998568),u=n(810503),p=n(304756),m=n(967688),_=n(805739),h=n(952039),g=n(867499),f=n(453370),E=n(31898),y=n(353231),b=n(281294),v=n(913026),T=n(400652),I=n(478654),S=n(151223),A=n(422444);(0,S.nF)(async()=>{try{await p.Ay.post("/api/user/migrate_personal_drafts")}catch(e){(0,u.Lo)("planSpaces","Personal drafts not auto-migrated for user",e)}});let w=(0,S.nF)(async e=>{try{let r=e.getState();for(let a of r.authedUsers.orderedIds)if(await (0,b.z$)(a)){N();let a=n(521885).xv;e.dispatch(E.to({type:a,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(C())}}}));return}}catch(e){(0,d.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(C())}),C=(0,S.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,v.d9)(e.getState().selectedView);I.H.logoutAllUsers().then(()=>{(0,y.Pg)(),g.U2.clear(),new c.P().sendToAllTabs(T.y,T.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(h.F.enqueue({error:!0,message:n}))})});(0,S.nF)(async(e,r)=>{try{if(await (0,b.z$)(r.user.id)){N();let a=n(521885).xv;e.dispatch(E.to({type:a,data:{users:[r.user],onLogOut:()=>{e.dispatch(L(r))}}}))}else e.dispatch(L(r))}catch(n){(0,d.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(L(r))}});let N=()=>{try{(0,o.trackEvent)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},L=(0,S.nF)((e,r)=>{I.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(f.os(n.data.meta)),e.dispatch(A.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,y.Pg)(),g.U2.clear());let a=n.data?.meta?.redirect_url;a?l.Ay.redirect(a):e.dispatch(h.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let a=n.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(h.F.enqueue({error:!0,message:a}))})}),O=(0,i.NC)("DELETE_USER_LOADING"),R=(0,i.NC)("USER_ERASE_SECRETS"),P=(0,i.NC)("USER_TOGGLE_TWO_FACTOR"),D=_.vv},337752:(e,r,n)=>{n.d(r,{Q$:()=>b});var a=n(186606),i=n(60074),o=n(989232),s=n(304756),l=n(967688),c=n(659717),d=n(731991),u=n(952039),p=n(151223),m=n(67308),_=n(303397),h=n(744550),g=n(847461);let f=e=>{let r=e.getState();e.dispatch(g.UU({force:!0})),r.mirror.appModel.showUi||_.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==a.NLJ.COMMENTS&&_.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{(0,h.h)()})},E=(e,r,n,a)=>{o.definedAnalyticsHandler.trackDefinedMetric("notification.catfile_confirmation_toast_shown",{user_id:e,file_key:r,experiment_name:n,toast_type:a})};(0,p.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n={text:(0,l.t)("comments.manage"),action:()=>f(e)};E(r.userId,r.fileKey,r.experimentName,"manage");let a="all"===r.preference?(0,l.t)("comments.you_will_be_notified_about_file_comments"):(0,l.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(u.F.enqueue({message:a,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let y=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{s.Ay.post(n,{opted_in:e})}};(0,p.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=y(r.fileKey,r.experimentName),a={text:(0,l.t)("comments.turn_on"),action:()=>{n(!0)}};E(r.userId,r.fileKey,r.experimentName,r.toastType),setTimeout(()=>{e.dispatch(u.F.enqueue({message:(0,l.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:a,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,p.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let n=y(r.fileKey,r.experimentName);E(r.userId,r.fileKey,r.experimentName,r.toastType),setTimeout(()=>{e.dispatch(d.Q.enqueue({notification:{type:c._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,l.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,p.nF)((e,r)=>{let n=e.getState(),a=(0,m.d1)(n);if(a&&r.fileKey===a.key&&n?.user?.id===r.userId){let r={text:(0,l.t)("comments.manage"),action:()=>f(e)},n=(0,l.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(u.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let b=(0,i.NC)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL")},531919:(e,r,n)=>{n.d(r,{bE:()=>s,hV:()=>o,z9:()=>i});var a=n(60074);let i=(0,a.NC)("USER_TEAM_FLAG_RECEIVE_DELETE"),o=(0,a.NC)("USER_TEAM_FLAG_RECEIVE_UPDATE"),s=(0,a.NC)("USER_TEAM_FLAG_POST")},340132:(e,r,n)=>{n.d(r,{D6:()=>R,H1:()=>w,Ho:()=>P,U6:()=>C,Vw:()=>b,au:()=>N,cx:()=>I,gA:()=>y,hL:()=>O,rT:()=>v,w9:()=>T});var a=n(186606),i=n(382902),o=n(870567),s=n(60074),l=n(989232),c=n(183603),d=n(97941),u=n(304756),p=n(314979),m=n(967688),_=n(952039),h=n(151223),g=n(702038),f=n(264524),E=n(35597);let y=(0,s.NC)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,s.NC)("SET_HOVERED_IN_MODAL_VOTE_PIN"),v=(0,s.NC)("DESELECT_VOTE_PIN"),T=(0,s.NC)("SELECT_VOTE_PIN"),I=(0,s.NC)("INITIATED_VOTING_SESSION");(0,h.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:a}=n.selectedView,o=n.mirror.appModel.votingSessionInfo.sessionId;if(!a||!o)return;let s=S(a),l="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:s})),e.dispatch(_.F.enqueue({type:l,message:(0,m.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:s})),e.dispatch(_.F.dequeue({matchType:l})),await u.Ay.put(`/api/file/${a}/voting_sessions/${o}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:s})),"MeetingsPanel"===r&&i.zl.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,h.nF)((e,{source:r,usedCustomTitle:n,requestBody:a,uiSurface:o})=>{let{fileKey:s}=e.getState().selectedView;if(!s)return;let c=A(s),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(_.F.enqueue({type:"start-voting-session-failed",message:(0,m.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(_.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${s}/voting_sessions`,a).then(a=>{200===a.status?(e.dispatch(I({votingSessionId:a.data.meta.id})),"MeetingsPanel"===o&&i.zl.get(f.Qs).activeToolModal===f.sx.VOTING&&i.zl.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,l.trackEvent)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:a.data.meta.id,fileKey:s})):d()}).catch(e=>{throw d(),e})});let A=e=>`create_voting_session_${e}`;(0,h.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let a=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,p.Q)({promise:a,fallbackError:(0,m.t)("voting.modal.delete_voting_session_error")})),e.dispatch(_.F.enqueue({message:(0,m.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(a,e.dispatch,L({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},a)});let w=(0,h.nF)((e,r)=>{let n;let i=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(i===a.W8Y.NO_SESSION){a.ofk.setVotingSessionInfo("",a.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(i===a.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,o.oA)(n.pageNodeId);d&&(a.ofk.setVotingSessionInfo(n.id,i,n.userVoteLimit,d),i===a.W8Y.JOINED&&(e.dispatch(C()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),C=(0,s.NC)("DISMISS_JOIN_CONFIRMATION"),N=(0,s.NC)("HIDE_JOIN_VOTING_SESSION_MODAL"),L=(0,s.NC)("DELETE_VOTING_SESSION"),O=(0,s.NC)("SET_VOTES_PER_USER_LIMIT"),R=(0,s.NC)("SET_TITLE"),P=(0,s.NC)("CLEAR_STATE")},858488:(e,r,n)=>{n.d(r,{NX:()=>H});var a=n(848318),i=n(301168),o=n(354427),s=n(19180),l=n(418193),c=n(989232),d=n(484169),u=n(865114),p=n(183603),m=n(410725),_=n(748008),h=n(998568),g=n(608323),f=n(810503),E=n(182317),y=n(304756),b=n(847461),v=n(691784),T=n(995218),I=n(123327),S=n(412865),A=n(339542),w=n(262179),C=n(125761),N=n(55116),L=n(259964),O=n(89162),R=n(431698),P=n(286586),D=n(584371),k=n(338056),M=n(224847);class F{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let a=y.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,i,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await i.optimisticallyCreate({CommentReaction:{[l]:{fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},a)}),await a}async removeReaction(e,r){let n=y.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(a,i,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await i.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function x(e){return e.map(e=>({...e,id:e.id.toString()}))}class U{constructor(e){this.client=e}trackMissingCommentData(e,r,n,a,i,o){let s=!1;M.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,h.kF)("comments_optimistic_updates","true"),(0,h.kF)("isLoadedComments",i.isLoadedComments?"true":"false"),(0,h.kF)("commentType",e),(0,f.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=a(),n=null,i=null,o=null;for(let a of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===a.type||"STORE.ADD_INSTANCE"===a.type||"STORE.REMOVE_INSTANCE"===a.type||"SESSION.APPLY_MUTATIONS"===a.type||"SESSION.APPLY_SHADOW_MUTATIONS"===a.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===a.type||"REQUEST_MESSAGE"===a.type&&"sync"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"synced"===a.message.messageType||"RESPONSE_MESSAGE"===a.type&&"pendingMutations"===a.message.messageType)(0,f.Lo)(r,JSON.stringify(a));else if("VIEW_QUERY_NODE.ADD_RESULT"===a.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===a.type){if(a.type===n&&a.queryId===i&&a.instance===o)continue;(0,f.Lo)(r,JSON.stringify(a)),n=a.type,i=a.queryId,o=a.instance}else"SESSION.NOTIFY_OBSERVERS"===a.type&&a.view._name.includes("Comments")&&(0,f.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:a.view._name}));(0,f.x1)(r,l)}}},setTimeout(()=>{let i=M.O.records[n.id];if(i||a(),delete M.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);i&&!o?i.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):a()},1e4)}create(e,r){let n=(0,p.S6)(),{fileKey:a,messageMeta:i,attachments:o,clientMeta:l,pageId:u,uuid:m}=e;(0,c.trackEvent)("New comment API create",{uuid:m});let _=(0,s.k)().show_at_mention_invited_users?[...new Set((0,d.cs)(i))]:[],h=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let s=n.failure_info,d=await r.onValidationError(x(s.users_without_view),x(s.ext_users_without_view),x(s.uninvitable_users));return d?((0,c.trackEvent)("New comment API handling validation",{uuid:m}),y.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:l,page_id:u,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:m,pending_mentions:_}).catch(h)):null},g=(0,D.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=y.Ay.post(`/api/file/${a}/comments`,{file_key:a,message_meta:i,attachments:o.map(e=>e.id),client_meta:l,page_id:u,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:_,uuid:m,...!f&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,c=(0,d.Rc)(i);r.optimisticallyCreateWithUUID({Comment:{[m]:{uuid:m,key:a,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,clientMeta:{x:l.x,y:l.y,nodeId:l.node_id||null,pageId:l.page_id||null,nodeOffset:l.node_offset||null,inFrame:l.in_frame||null,selectionBoxAnchor:l.selection_box_anchor||null,stablePath:l.stable_path||null},messageMeta:c,messageMetaStylized:c,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,I.Mu)(o,a,m);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(h).then(e=>{if(!e)return null;try{let a=e.data.meta;this.trackMissingCommentData("New Comment",m,a,n,{isLoadedComments:g},r)}catch{}return e}),m]}reply(e,r){let n=(0,p.S6)(),{threadId:a,threadUuid:i,messageMeta:o,attachments:s,uuid:l}=e,{fileKey:u}=this.client,m=(0,d.cs)(o),_=y.Ay.post(`/api/file/${u}/comments/${e.threadId}`,{file_key:u,uuid:l,message_meta:o,attachments:s.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:m}),h=(0,d.Rc)(o),g=(0,D.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{i?r.optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:null}}},_):r.optimisticallyUpdate({Comment:{[a]:{resolvedAt:null}}},_),(0,c.trackEvent)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!i}),r.optimisticallyCreateWithUUID({Comment:{[l]:{uuid:l,key:u,userId:f.id,parentId:a,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,clientMeta:null,messageMeta:h,messageMetaStylized:h,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:s.map(e=>(0,I.QG)(e,u,l))}}},_);let n=(0,I.Mu)(s,u,l);n&&r.optimisticallyCreate({CommentAttachment:n},_)}),[_.then(e=>{if(!e)return null;let a=e.data.meta;return this.trackMissingCommentData("Reply Comment",l,a,n,{isLoadedComments:g},r),e}),l]}}class B{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...i}=o.readComments;await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:S.gj.allReadAt,readComments:i,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(e,n,a)=>{let i=e.file.currentUserCommentReadStatus,o=new Date;i?await n.optimisticallyUpdate({CommentReadStatus:{[i.id]:{...i,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,a,i)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await a.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await a.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let G=(0,l.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function V(e,r,n){let i=a.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,u.ZC)(i),{removed:s}=a.useMemo(()=>(0,g.Zv)(i,o),[i,o]),l=a.useCallback(e,r);a.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function H(e){let{userId:r,file:n,activeId:l,anchorPositions:c,boundingBoxPositions:d,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:p,getPageIdsForNodes:h,children:g}=e,f=a.useRef({}),y=(0,T.E3)()===L.nT.Whiteboard,I=!!(0,s.k)().xr_debounce_threshold,S=n?.key,x=!!S,H=a.useMemo(()=>({fileKey:S??""}),[S]),z=a.useMemo(()=>(0,E.g)(),[H]),K=(0,m.Rs)(R.$J,H,{enabled:x,traceId:z}),W=(0,m.Rs)(N.ZBn,H,{enabled:x}),j=(0,m.Rs)(N.qRE,H,{enabled:I&&x}),Y=(0,m.Rs)(N.gkf,H,{enabled:y&&x}),$=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap),q=(0,i.wA)(),X=a.useMemo(()=>{if("loaded"!==K.status||!K.data.file)return K;let e=G(K.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===W.status){let r=W.data.file?.resolvedComments;e=e.transform.join(r)}let r={...K.data.file,comments:e};return{...K,data:{...K.data,file:r}}},[K,W]);a.useMemo(()=>{"loaded"===X.status&&X.data?.file?.comments?.forEach(e=>{e.id in $?(f.current[e.id]=e,e.id=$[e.id]):e.uuid&&e.uuid in $&&f.current[e.uuid]&&f.current[e.uuid]!==e&&(q(b.pI({commentUuid:e.uuid})),delete f.current[e.uuid])})},[q,X,$]);let J=(0,i.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:Z,commentThreadNodeIds:Q,commentThreadStablePaths:ee}=a.useMemo(()=>{if("loaded"!==X.status||!X.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return X.data.file.comments.forEach(a=>{if(null===a.parentId){let i=a.clientMeta?.nodeId,o=a.clientMeta?.stablePath;o&&p?(e.push(a),n.add(`[${o.join(",")}]`)):i&&u&&(e.push(a),r.add(i))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[X,u,p]),et=a.useMemo(()=>{if("loaded"!==X.status||!X.data.file||I&&!j.data?.file)return[];let e=new Set(Q);return I&&(0,w.N)(j.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[X,j,I,Q]),er=a.useMemo(()=>"loaded"===X.status&&X.data.file?Array.from(new Set(ee)):[],[X,ee]);a.useEffect(()=>{u&&u(et),p&&p(er)},[u,et,p,er]);let en=(0,A.W9)(r,X,l,c,h,J),ea=(0,A.gu)(r,Y,e.activeId),ei=(0,O.i)(j,e.activeId,h,d),eo=a.useMemo(()=>{if("loaded"!==X.status||I&&"loaded"!==j.status||y&&"loaded"!==Y.status)return(0,_.gB)([]);let e=[];return en.data&&(e=e.concat(en.data)),ea.data&&(e=e.concat(ea.data)),ei.data&&(e=e.concat(ei.data)),(0,_.gB)(e)},[X.status,I,j.status,y,Y.status,en.data,ea.data,ei.data]),es=function(e){let r=(0,m.ZA)(),n=(0,C.iZ)(),{args:i,subscription:s}=e,[l,c]=a.useState(()=>{if(n)return new D.I(i,s,n)});return a.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.c2)(l.args,i)){c(new D.I(i,s,n));return}},[l,i,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),a.useMemo(()=>l?{commentReceipts:new B(l),reactionsApi:new F(l),writeAPI:new U(l),pinApi:new k.xI(l)}:{},[l])}({args:H,subscription:X}),el=(0,P.r)({args:H,subscription:j});es.canvasMentionReceipts=(0,v.pf)({canvasMentionArgs:H,canvasMentionSubscription:Y}),(0,A.Hu)(Z,{enabled:!!(0,s.k)().comments_absolute_positioning}),V(e=>{M.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],K),V(e=>{M.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],W);let ec=a.useMemo(()=>x?{...X,api:es,feedApi:el,threads:eo,isUnresolvedLoaded:"loaded"===K.status,isResolvedLoaded:"loaded"===W.status}:{status:"loading",data:null,errors:null,threads:(0,_.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[x,X,es,el,eo,K.status,W.status]);return a.createElement(R.kR,{value:ec},g)}},846968:(e,r,n)=>{n.d(r,{t:()=>o});var a=n(19180),i=n(967688);function o(){let e=(0,a.k)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,i.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,i.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,i.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,i.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides","sites"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,i.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,i.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,i.t)("fullscreen_actions.resize-to-fit")},...e]}}},660948:(e,r,n)=>{n.d(r,{E2:()=>m,M5:()=>i,N$:()=>E,SS:()=>_,Tb:()=>u,WX:()=>g,W_:()=>s,XG:()=>l,ZO:()=>a,_O:()=>p,aY:()=>d,in:()=>h,s0:()=>o,xP:()=>f});var a=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(a||{}),i=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e.RESOURCE_LIKE="resource_like",e.RESOURCE_UNLIKE="resource_unlike",e.SEARCH_QUERY_RESULT="cmty_search_query_result",e.EDITOR_TYPE_FILTER_CHANGED="editor_type_filter_changed",e.TEMPLATE_PICKER_SEARCH_QUERY_RESULT="template_picker_search_query_result",e))(i||{}),o=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(o||{}),s=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(s||{}),l=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(l||{}),c=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(c||{}),d=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(d||{});let u="checkout",p="freemium_preview",m="1",_="internal_publish_modal",h="community_publish_modal";var g=(e=>(e.OPENED="opened",e.EDIT_NAME="edit_name",e.EDIT_DESCRIPTION="edit_description",e.DETAILS="details",e.ERROR="error",e.PUBLISH="publish",e.CLOSED="closed",e.ADD_CAROUSEL_MEDIA="add_carousel_media",e.DELETE_CAROUSEL_MEDIA="delete_carousel_media",e.ADD_CUSTOM_THUMBNAIL="add_custom_thumbnail",e.UPLOAD_ICON="upload_icon",e))(g||{}),f=(e=>(e.FILE_INPUT="file_input",e.DROP="drop",e))(f||{}),E=(e=>(e.INTERNAL="internal",e.COMMUNITY="community",e))(E||{})},899386:(e,r,n)=>{n.d(r,{BG:()=>S,Fh:()=>C,LM:()=>v,L_:()=>w,UV:()=>b,WT:()=>T,hY:()=>d,ln:()=>A,qt:()=>I});var a=n(871043),i=n(546845),o=n(809969),s=n(785901),l=n(247210);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,i.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,a=[];for(let i of e)n.has(i.deviceName)||(n.add(i.deviceName),i.archived?r?.push(i.deviceName):a.push(i.deviceName));return a}let p=[],m=u(o.eo,p),_=u(s.o,p),h=u(l.t,p),g=u(i.E,p),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,i.E])for(let a of n)if(a.framePresetSize.x===e&&a.framePresetSize.y===r)return a;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:m,2:_,3:h,4:g,0:[]},v={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(i.E).slice(0,5),0:[]};function T(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:C(e,r)).filter(a.Vq)}function I(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==m.indexOf(n)?1:-1!==_.indexOf(n)?2:-1!==h.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==h.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function A(e){let r=I(e||"");return 4!==r&&0!==r}let w=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function C(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let a=d[r.presetIdentifier],i=a.hideUnlessActive&&!a.archived&&n.framePresetSize.x===a.framePresetSize.x&&n.framePresetSize.y===a.framePresetSize.y;if(a&&a.deviceName===e)n=a;else if(!i&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},117027:(e,r,n)=>{n.d(r,{$W:()=>u,fS:()=>p});var a=n(967688);let i=[{name:"Android Compact",width:412,height:917,i18nName:()=>(0,a.t)("presets.android_compact")},{name:"Android Medium",width:700,height:840,i18nName:()=>(0,a.t)("presets.android_medium")},{name:"iPhone 16",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_16")},{name:"iPhone 16 Pro",width:402,height:874,i18nName:()=>(0,a.t)("presets.i_phone_16_pro")},{name:"iPhone 16 Pro Max",width:440,height:956,i18nName:()=>(0,a.t)("presets.i_phone_16_pro_max")},{name:"iPhone 16 Plus",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_16_plus")},{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,a.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,a.t)("presets.i_phone_se")}],o=[{name:"Android Expanded",width:1280,height:800,i18nName:()=>(0,a.t)("presets.android_expanded")},{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,a.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,a.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,a.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,a.t)("presets.i_pad_pro_12_9")}],s=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,a.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,a.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,a.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,a.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,a.t)("categories.wireframes")},{name:"TV",width:1280,height:720,i18nName:()=>(0,a.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,a.t)("presets.slide_4_3")}],c=[{name:"A4",width:595,height:842,i18nName:()=>(0,a.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,a.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,a.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,a.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,a.t)("presets.tabloid")}],d=m(Object.values({phonePresets:i,tabletPresets:o,desktopPresets:s,presentationPresets:l,watchPresets:[{name:"Apple Watch Series 10 42mm",width:187,height:223,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_42_mm")},{name:"Apple Watch Series 10 46mm",width:208,height:248,i18nName:()=>(0,a.t)("presets.apple_watch_series_10_46_mm")},{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,a.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,a.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,a.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,a.t)("presets.apple_watch_40_mm")}],paperPresets:c,socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,a.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,a.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,a.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,a.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,a.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,a.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,a.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,a.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,a.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,a.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,a.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,a.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,a.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,a.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,a.t)("presets.i_phone_11_pro_x")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,a.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,a.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,a.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,a.t)("presets.android_large")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,a.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,a.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,a.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,a.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,a.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,a.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,a.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,a.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,a.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,a.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,a.t)("presets.mac_128k")}]})),u=m([i,s,l]);function p(e,r=d){let n=null;for(let a of Object.values(r)){if(e.width===a.width&&e.height===a.height)return a;e.width!==a.height||e.height!==a.width||n||(n=a)}return n}function m(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}m([i,o,c])},142896:(e,r,n)=>{n.d(r,{$T:()=>u,AB:()=>p,AM:()=>D,C9:()=>g,DT:()=>F,Dm:()=>a,F:()=>c,F7:()=>f,J6:()=>h,K9:()=>A,LO:()=>N,Pr:()=>m,Qx:()=>i,Sl:()=>C,Uu:()=>o,Vl:()=>x,WJ:()=>P,W_:()=>w,XX:()=>k,Yr:()=>y,Z7:()=>R,ZR:()=>l,_V:()=>v,aN:()=>I,h2:()=>_,k8:()=>d,ku:()=>L,o$:()=>T,s4:()=>s,si:()=>M,t4:()=>O,vu:()=>b,wi:()=>S,yJ:()=>E});let a="js-fullscreen-prevent-event-capture",i="js-fullscreen-prevent-event-capture-keys",o="js-fullscreen-wheel-event-passthrough",s="js-fullscreen-wheel-event-capture",l="js-fullscreen-no-mod-wheel-event-capture",c=0x7fffffff,d="background-panel-color-picker",u="prototype-background-panel-color-picker",p="type-settings",m="text-decoration-paint-picker",_="style-preview-type-settings",h="font-picker",g="export-picker",f="selection-paint-item",E="selection-style-item",y=`${f}-slides`,b="slides-rewrite-text-picker",v="stacking-advanced-sizing",T="prototype-interaction-settings",I="accessible-reading-order",S="DROPDOWN_TYPE_SELECT_LAYER_CONTEXT_MENU",A="DROPDOWN_TYPE_SELECTION_CONTEXT_MENU",w="DROPDOWN_TYPE_CANVAS_CONTEXT_MENU",C="DROPDOWN_TYPE_DEV_HANDOFF_CODE_CONTEXT_MENU",N="DROPDOWN_TYPE_PLUGIN_RUN_CONTEXT_MENU",L="DROPDOWN_TYPE_TEXT_EDIT_MODE_CONTEXT_MENU",O="DROPDOWN_TYPE_RULER_GUIDE_CONTEXT_MENU",R="DROPDOWN_TYPE_COMMENT_CONTEXT_MENU",P="DROPDOWN_TYPE_READY_STATUS_CONTEXT_MENU",D="DROPDOWN_TYPE_LINTER_CONTEXT_MENU",k="DROPDOWN_TYPE_ANNOTATIONS_BUTTON_CONTEXT_MENU",M="DROPDOWN_TYPE_SECTION_PRESET_PICKER_CONTEXT_MENU",F="DROPDOWN_TYPE_COMMENT_ATTACHMENT_CONTEXT_MENU",x="DROPDOWN_TYPE_GRADIENT_STOP_CONTEXT_MENU"},715980:(e,r,n)=>{function a(e){return"children"in e||"childDropdown"in e}function i(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>_,MH:()=>g,TV:()=>a,WJ:()=>c,_o:()=>i,_p:()=>m,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>p,u2:()=>h});let p="edit-menu",m="view-menu",_="object-menu",h="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},740495:(e,r,n)=>{n.d(r,{E9:()=>R,Mk:()=>C,Mx:()=>N,Of:()=>k,Xt:()=>P,YJ:()=>x,Z5:()=>M,e5:()=>A,fn:()=>O,fr:()=>D,ih:()=>L,kt:()=>U,lx:()=>F,y:()=>S});var a=n(848318);n(301168);var i=n(113594),o=n(660376),s=n(19180),l=n(870567),c=n(989232);n(45137);var d=n(410725),u=n(227276),p=n(235252);n(640724),n(718373);var m=n(859172);n(249726);var _=n(730143),h=n(180294),g=n(125761);n(752181);var f=n(318147),E=n(55116);n(253332);var y=n(138528),b=n(361053),v=n(94831),T=n(520804),I=n(192542);function S(){let{getConfig:e}=(0,u.I7)("exp_at_mention_invited_users");return(0,a.useCallback)(r=>!!function({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:a,isMobile:i}){return!(r||i||!e||!n||a)}(r)&&"variant"===e().get("treatment",""),[e])}function A({userId:e,teams:r,rolesByTeamId:n,getM0Config:a,getM1Config:i}){if(!(0,s.k)().close_starter_team_loophole)return!1;let o=w(e,r,n);return 0!==o&&(1===o?a().get("should_block_second_starter_team",!1):i().get("should_block_more_than_one_starter_team",!1))}function w(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];r&&s&&s.level===v.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&a++}return a}function C(e,r,n){return!!(0,s.k)().close_starter_team_loophole&&0===w(e,r,n)&&(0,s.k)().close_starter_loophole_team_one}function N(){let{getConfig:e}=(0,u.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}var L=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(L||{});function O(){let{getConfig:e}=(0,u.I7)("exp_fbg_navigation_updates"),r=(0,y.T5)("useFBGNavigationUpdatesTreatment").unwrapOr(null),n=r?.key.type===f.OL.TEAM,a=r?.tier===f.Ag.STARTER;return n&&a?e().getValue("treatment","control"):"control"}function R(){let e=(0,u.I7)("starter_global_file_limits");return!!e?.getConfig().getValue("enabled",!1)}function P(e){let{getConfig:r}=(0,u.I7)(e?"exp_drafts_copy_link_v2_org":"exp_drafts_copy_link_v2_team");return(0,s.k)().statsig_aa_flag_plan_key_web,!!r().getValue("has_drafts_copy_link_experience",!1)}function D(){let e=(0,_.q5)(),r=(0,y.X$)("useShowSeatsInNux"),n=(0,y.q8)(r),i=(0,y.D6)("useShowSeatsInNux").unwrapOr(null),o=(0,h.dq)(),s=!!o,c=(0,b.cD)(),p=!s,m=(0,d.Rs)((0,E.RcX)({orgId:o}),{enabled:!!o}).unwrapOr(null),g=m?.org?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting?.status===l.tT.Loaded?m?.org?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting?.data:null,v=g===f.Sm.ALL_USERS||g===f.Sm.MEMBERS,{getConfig:T}=(0,u.I7)("exp_seat_choice_in_nux_team_id"),{getConfig:I}=(0,u.I7)("exp_seat_choice_in_nux_org_id"),S=p?T:I;return(0,a.useCallback)(()=>{let r=!!i?.licenseTypes?.length;return!(!e||e?.project?.activeProjectResourceConnections?.length)&&!v&&!r&&"loaded"===n.status&&!n.data&&(!p||!!c)&&S().get("enabled",!1)},[S,p,c,n,e,i,v])}function k(){let{getConfig:e}=(0,u.I7)("exp_improve_devmode_request_context_for_admins"),r=p.Gq()?.getPrimaryLocale(!1)??i.hT.EN;return(0,a.useCallback)(n=>n&&r===i.hT.EN?e().get("treatment",null):null,[e,r])}function M({disableExposureLogging:e}={}){let r=(0,y.No)(),n=(0,y.q8)(r),{getConfig:i}=(0,u.I7)("exp_pro_admin_plan_invite_with_seat",void 0,e),{getConfig:l}=(0,u.I7)("exp_org_admin_plan_invite_with_seat",void 0,e);return(0,a.useCallback)(({isPlanAdmin:e})=>{if((0,s.k)().plan_invite_modal_revamp)return!0;if("loaded"!==r.status||n.data||!e)return!1;let a=r.data.key.type;switch(a){case f.OL.ORG:return l().get("enabled",!1);case f.OL.TEAM:return i().get("enabled",!1);default:(0,o.xb)(a)}},[r,l,i,n])}function F(){let{getConfig:e}=(0,u.I7)("exp_pro_admin_file_invite_with_seat"),{getConfig:r}=(0,u.I7)("exp_org_admin_file_invite_with_seat"),n=(0,y.X$)("useIsInviteToFileWithSeatExpEnabled").unwrapOr(null);return(0,a.useCallback)(({rolePending:a,inviteBillableProductKey:i,editorType:o,filePlanKey:s,userNeedsUpgrade:l,hasEditRole:c})=>{if(!o||!c||!s)return!1;if(a){if(i&&(0,m.JR)(i,o))return!1}else if(!l)return!1;if(s.type!==n?.key.type||s.parentId!==n?.key.parentId)return!1;let d=n?.tier===f.Ag.PRO,u=n?.tier===f.Ag.ORG||n?.tier===f.Ag.ENTERPRISE;return d?e().get("enabled",!1):!!u&&r().get("enabled",!1)},[n,e,r])}function x(e){let r=(0,y.No)().unwrapOr(null),n=(0,g.iZ)(),i=(0,_.q5)(),o=(0,y.H3)(r)??null,s=(0,d.Rs)((0,E.RcX)({orgId:o}),{enabled:!!o}).unwrapOr(null),u=s?.org?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting?.status===l.tT.Loaded?s?.org?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting?.data:null,p=u===f.Sm.ALL_USERS||u===f.Sm.MEMBERS,m=(0,T.c)(),h=r?.tier===f.Ag.PRO,b=r?.tier===f.Ag.ORG||r?.tier===f.Ag.ENTERPRISE,v=(0,d.Rs)(E.GEO,{teamId:r?.key.parentId||""},{enabled:h&&!p&&!m&&e}).unwrapOr(null),I=(0,d.Rs)(E.Nvo,{orgId:r?.key.parentId||""},{enabled:b&&!p&&!m&&e}).unwrapOr(null),S=(0,a.useRef)(!1),A=I?.orgPublicInfo?.expOneClickAskToEditOrgId.status===l.tT.Loaded?I.orgPublicInfo.expOneClickAskToEditOrgId.data:null,w=v?.teamPublicInfo?.expOneClickAskToEditTeamIdPublic.status===l.tT.Loaded?v.teamPublicInfo.expOneClickAskToEditTeamIdPublic.data:null;return(0,a.useCallback)(()=>(!S.current&&(A||w)&&(c.definedAnalyticsHandler.trackDefinedEvent("activation.experiment_exposure_for_user",{userId:n?.id,fileKey:i?.key,orgId:o||void 0,teamId:b?void 0:r?.key.parentId,ruleId:A?.treatment??w?.treatment,experimentName:A?.id??w?.id}),S.current=!0),b)?A?.treatment==="variant":!!h&&w?.treatment==="variant",[w,A,b,h,r,n,i,o])}function U(){let e=(0,I.w)({teamXP:"exp_social_proof_expansion_team_id",orgXP:"exp_social_proof_expansion_org_id"},{allowStarterPlans:!1,allowCurfPlans:!0,allowFigmaConnectPlans:!0});return(0,a.useCallback)((r,n)=>r===f.G_.DEV_MODE&&"dev-mode-blocking-modal"===n||!!e&&(e().get("enabled",!1)??!1),[e])}},30575:(e,r,n)=>{n.d(r,{S$:()=>_,U6:()=>u,k3:()=>m,wN:()=>d,yo:()=>p}),n(848318);var a=n(19180),i=n(382902);n(29188);var o=n(238444),s=n(615233);n(656329);var l=n(227276);n(180294);var c=n(318147);function d(e){return!1}function u(){return!!(0,a.k)().rollout_pinned_comments_ff}function p({user:e,file:r,numPinnedCommentThreads:n}={}){return!!u()&&!!e&&!!r&&r.editorType===c._Y.DESIGN&&(!!n&&n>0||!!((0,s.b5)()&&(0,o.jm)(e.email))||!!r.team&&!r.parentOrgId)}function m(){let{getConfig:e}=(0,l.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function _(){return(0,a.k)().google_federated_cm??!1}var h=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(h||{});(0,i.eU)(null)},47458:(e,r,n)=>{n.d(r,{d:()=>l});var a=n(848318),i=n(301168);n(227276);var o=n(730143),s=n(474132);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,i.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,a.useEffect)(()=>{if(r||!n||e?.editorType!=="design")return},[r,n,e])}},863270:(e,r,n)=>{n.d(r,{$z:()=>v,L0:()=>I,QE:()=>h,T8:()=>E,fu:()=>g,h3:()=>b,j6:()=>S,jm:()=>T,kp:()=>f,tf:()=>y});var a=n(848318),i=n(301168),o=n(911734),s=n(989232),l=n(810503),c=n(66699),d=n(967688),u=n(486383),p=n(353231);let m=null;function _(){m=null}let h=a.createContext({properties:{},trackEvent:()=>null});function g({name:e,properties:r={},trackingTargets:n=u.K.ALL,enabled:o=!0,ignoreParent:d=!1,onlyOnce:_=!1,children:g,trackingOptions:f}){let{name:E,properties:y}=(0,a.useContext)(h),b=(0,a.useRef)({}),v=(0,a.useRef)(null);b.current&&(0,i.bN)(b.current,r)||(b.current=r),r=b.current;let T=(0,a.useMemo)(()=>{let n=E&&!d?`${E} > ${e}`:e,a={...y,...r};return{name:n,properties:a,trackEvent:(e,r)=>(0,s.trackEvent)(e,{trackingContext:n,...a,...r})}},[e,r,E,y,d]);return(0,a.useEffect)(()=>{if(!o||n===u.K.NONE)return;let e=T.name,r=T.properties;if(v.current&&v.current.name===e&&(_||(0,i.bN)(v.current.properties,r)))return;if(n===u.K.RCS){let n={};for(let e of Object.keys(r))null!==r[e]&&void 0!==r[e]&&(n[e]=r[e]);(0,c.YQ)({id:e,properties:n});return}let a={name:e,...null!=m&&{ctaClickedReferrer:m},...r};(0,l.ED)("Context Viewed",e,a),(0,p.qD)(a,f),v.current=T},[n,T,o,_,f]),a.createElement(h.Provider,{value:T},g)}function f(e,r){var n;return(n=class extends a.PureComponent{render(){return a.createElement(g,{name:r||e.displayName},a.createElement(e,{...this.props}))}}).displayName=e.displayName,n}function E(e,r,n={},i=!0){return a.createElement(g,{name:r,properties:n,enabled:i},e)}function y(e,r){let n=a.forwardRef((n,i)=>a.createElement(h.Consumer,null,o=>{let s=e=>{if(n.disabled)return;let i={...o.properties,...n.trackingProperties};o.name&&(i.trackingContext=o.name);let s=function(e,r){if(r)return r;if(e&&"string"==typeof e)return e;{let r=a.Children.map(e,e=>{if(e?.type!==d.qD)return e;{let{id:r,options:n}=e.props;return(0,d.t)(r,n)}});if(r?.every(e=>"string"==typeof e))return r.join("")}}(n.children,n.innerText);s&&(i.text=s),(0,p.Cu)(i,n.trackingEventName,r,n.trackingOptions),m=`${i.trackingContext} : ${i.text}`,n.onClick?.(e),setTimeout(_,150)},{trackingProperties:l,innerText:c,useMouseDown:u,trackingEventName:h,...g}=n;return a.createElement(e,{ref:i,...g,...n.useMouseDown?{onMouseDown:s}:{onClick:s}})}));return n.displayName=`Tracked(${e.displayName||e.name})`,n}function b(e){return class extends a.Component{render(){return a.createElement(h.Consumer,null,r=>{let{trackingProperties:n,trackingPopulationLevel:i,trackingFieldName:o,...s}=this.props;return a.createElement(e,{...s,onBlur:e=>{let n={...r.properties,...this.props.trackingProperties,fieldName:this.props.trackingFieldName,populationLevel:this.props.trackingPopulationLevel};r.name&&(n.trackingContext=r.name),(0,p.fy)(n),this.props.onBlur&&this.props.onBlur(e)}})})}}}let v=y(({dataTestId:e,...r})=>a.createElement("button",{...r,"data-testid":e})),T=y(e=>a.createElement("div",{...e})),I=y(e=>a.createElement("a",{...e},e.children),!0);function S(){return(0,a.useContext)(h)}y(e=>a.createElement(o.N_,{...e})),y(e=>a.createElement("input",{...e}))},500187:(e,r,n)=>{n.d(r,{Nh:()=>l,S3:()=>c,bf:()=>d,pI:()=>s});var a=n(122586),i=n(409438);function o(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,i.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function s(){return(0,a.gn)()}function l(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let a=o(e);return s()&&r?[...n.slice(1),e.name.plugin].join(" "):[a,...n,e.name.plugin].join(" ")}function c(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function d(e){let r=c(e);return r?[o(r),e.name].join(" "):e.name}},471476:(e,r,n)=>{n.d(r,{t:()=>h});var a=n(301168),i=n(813009),o=n(31898),s=n(533737),l=n(652576),c=n(20687),d=n(324747),u=n(740224),p=n(62467),m=n(105653),_=n(411358);function h(e,r,n){let{appModel:h,selectedView:g}=(0,i.R)(e=>({appModel:e.mirror.appModel,selectedView:e.selectedView})),f=(0,a.wA)(),E=(0,l.cW)()[e],y=(0,c.uF)(E),b=(0,l.Be)(),v=b.plugins[e]||b.orgPlugins[e]||y,T=Object.values((0,l.$1)()).find(r=>r.plugin_id===e),I=T?.manifest.menu&&T.manifest.menu.length>0&&!(0,c.LW)(T)?(0,m.z)(T.manifest.menu,T):[],S=v.manifest.menu&&v.manifest.menu.length>0&&!(0,c.LW)(v)?(0,m.z)(v.manifest.menu,v):[],A=(0,p.jv)(S.map(e=>(0,_.q)(e,e=>()=>r(e))),{appModel:h,selectedView:g}),w=(0,p.jv)(I.map(e=>(0,_.q)(e,e=>()=>n(e))),{appModel:h,selectedView:g});if(!T)return A;if(!E||E&&!E.current_plugin_version_id)return w;let C=[];return T.error?C.push({displayText:"\u26A0 In-development version",callback:()=>{f((0,o.to)({type:u.r,data:{dispatch:f,error:T.error,resourceType:d.bD.PLUGIN},showModalsBeneath:!0}))}}):C.push({displayText:"In-development version",...w.length>0?{children:w}:{callback:()=>{"figma"===(0,c.T)()&&(f(s.b({seen_published_plugin_onboarding_modal:!0})),f(s.b({seen_development_plugin_onboarding_modal:!0}))),n()}}}),C.push({displayText:"Published version",...A.length>0?{children:A}:{callback:()=>{"figma"===(0,c.T)()&&(f(s.b({seen_published_plugin_onboarding_modal:!0})),f(s.b({seen_development_plugin_onboarding_modal:!0}))),r()}}}),C}},57762:(e,r,n)=>{n.d(r,{NG:()=>p,UK:()=>function e(r){let{item:n,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:p,isItemSubmenu:m}=r,_=[];if("run-menu-action"===n.type){if(n.disabled&&!l)return _;if("plugin-name"===n.name.type){if(!s.userCanViewPlugins)return _;let e=(0,d.qs)(n)?(0,i.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],a=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,o={name:"plugins-menu-item",extensionSearchString:(0,u.Nh)(n,p),itemPath:r,itemParameterArgs:(0,c.o0)(n.menuAction),callback:()=>(0,d.Im)(s,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:a};_.push(o)}else{if(o&&n.disabled)return _;let e={name:n.name.key,callback:()=>(0,d.Im)(s,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};_.push(e)}}else if("submenu"===n.type){if((0,u.pI)()&&!p&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,u.bf)(n),itemPath:[n.name],callback:a.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isItemSubmenu:!0})).flat()},i=(0,u.S3)(n);i&&(r.menuActionType=i.menuAction.type,"pluginId"in i.menuAction&&(r.pluginId=i.menuAction.pluginId),"localFileId"in i.menuAction&&(r.pluginLocalFileId=i.menuAction.localFileId)),_.push(r)}if(m)return _;for(let r of n.submenu){let n=e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:!0});_.push(...n)}}return _}});var a=n(238462),i=n(967688),o=n(105653),s=n(38011),l=n(764474),c=n(956992),d=n(409438),u=n(500187);function p(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,o.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,s.IK)(r),disabled:!n,isWidget:(0,l.k0)(r),path:[]}}},372566:(e,r,n)=>{n.d(r,{EV:()=>T,GW:()=>S,KD:()=>_,LN:()=>v,LS:()=>m,Lk:()=>h,NB:()=>E,PZ:()=>f,X9:()=>C,cu:()=>w,f0:()=>b,h7:()=>L,k$:()=>g,l4:()=>A,mz:()=>R,o1:()=>N,t6:()=>I,wf:()=>O});var a=n(430385),i=n(376852),o=n(328813),s=n(989232),l=n(7276),c=n(810503),d=n(967688),u=n(489082),p=n(498709);class m extends Error{constructor(e,r){super(`${e}: ${r}`),this.errorType=r}}class _{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,l.O4)(e,r);if(n.error)throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new m("Could not parse input",n.error.type);return n.value}onParseThrow(e,r){if(e instanceof m&&e.errorType)return this.options.onEvaluateExpressionError?.(e.errorType,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,i.KY)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??p.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??p._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class h extends _{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,s.trackEvent)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends _{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new h(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new h(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),a=e.match(n);return a?a.filter(e=>e.length).map((e,n)=>{let a=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(a))throw Error("could not parse array input");return a}):[]}format(e){return null==e?"":(0,a.Ef)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,a)=>!n||n[a]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,i.YE)(e,r))}isEqual(e,r){return(0,a.lu)(e,r)}getIncrementTargets(e,{start:r,end:n}){let a={};if(0===r&&n>=e.length)return null;let i=r===n;if(i&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(i){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(a[o]=!0),s>=n)break}return a}getSelection(e,r){let n;let a=Object.keys(r).map(Number),i=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(a.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;i=r,--r}}return{start:n??0,end:i}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends _{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[a,i,o]=n.reverse().map(e=>e.trim()),s=a?super.parse(a,r):0,l=i?super.parse(i,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,a]=e.split(".",2),i=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=a?`${i}.${a}`:i;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let a=this.displayFractions?e:Math.floor(e),i=Number.isInteger(a)?a:a.toFixed(2),o=Number.isInteger(a)?`${a}`.padStart(2,"0"):`${i}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class v extends _{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}let T=new v;class I extends _{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class S extends _{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class A extends _{constructor(){super(...arguments),this.allowedUnits="%"}format(e){return null==e?"":`${e}%`}}class w extends _{constructor(e={}){super((0,o.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class C extends _{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class N extends _{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class L{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||p._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||p.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,l.O4)(e,NaN);if(!n.error)return[n.value,r]}parse(e,r){let n=L.parse(e);if(void 0===n)throw Error("Could not parse input");let[a,i]=n;return void 0===i&&(i=null==r?"PERCENT":r.units),{value:a,units:i}}format(e){if(!e)return"";let r=parseFloat((e.value??0).toFixed(2));return"PERCENT"===e.units?`${r}%`:"RAW"===e.units?`${100*r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,i.KY)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,i.YE)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let O=new L({bigPixelNudgeAmount:p._q,smallPixelNudgeAmount:p.bA});class R{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,l.O4)(e);if(n.error)throw new m("Could not parse input",n.error.type);return{value:n.value,type:r}}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,i.YE)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,i.YE)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},754210:(e,r,n)=>{n.d(r,{D:()=>m,SU:()=>S,VG:()=>I,Xi:()=>b,ZB:()=>p,_r:()=>d,cP:()=>g,el:()=>f,ey:()=>h,js:()=>y,mj:()=>E,oc:()=>A,qj:()=>_,ro:()=>u,yt:()=>c});var a=n(660376),i=n(553547),o=n(19180);n(621464);var s=n(967688),l=n(489082);n(372566);class c{constructor(){this.parse=e=>e,this.format=e=>e||""}}class d{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class u{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class p{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");case"PATTERN":return(0,s.t)("fullscreen.properties_panel.pattern");case"NOISE":return(0,s.t)("fullscreen.properties_panel.noise");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class _{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");case"GRAIN":return(0,s.t)("fullscreen.properties_panel.effects.texture");case"NOISE":return(0,s.t)("fullscreen.properties_panel.effects.noise");case"GLASS":return(0,s.t)("fullscreen.properties_panel.effects.glass");default:return""}}}}class h{constructor(){this.format=e=>{switch(e){case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");case"SKEW":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.skew");default:return""}}}}class g{constructor(e){this.scene=e}hasNameForNode(e){return e===i.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===i.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class f{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function E(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class y{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.k)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3&&!(0,o.k)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class b{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.k)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3&&!(0,o.k)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let v=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),T=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class I{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return v();case"MOUSE_OUT":return T();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,a.xb)(e)}}}}class S{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.blend_mode.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.blend_mode.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.blend_mode.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.blend_mode.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.blend_mode.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.blend_mode.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.blend_mode.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.blend_mode.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.blend_mode.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.blend_mode.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.blend_mode.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.blend_mode.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.blend_mode.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.blend_mode.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.blend_mode.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.blend_mode.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.blend_mode.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.blend_mode.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.blend_mode.luminosity")}}}}class A{constructor(){this.format=(e,r)=>{switch(e){case"HORIZONTAL":if(r)return(0,s.t)("inspect_panel.properties.flow.horizontal_wrap");return(0,s.t)("inspect_panel.properties.flow.horizontal");case"VERTICAL":return(0,s.t)("inspect_panel.properties.flow.vertical");case"GRID":return(0,s.t)("inspect_panel.properties.flow.grid");default:return""}}}}},67188:(e,r,n)=>{n.d(r,{UE:()=>o,dG:()=>l,ft:()=>s,wo:()=>c});var a=n(19180),i=n(656329);function o(e){return e?.nodeType===1&&function(e){for(;e;){if(e.classList&&(e.classList.contains("js-fullscreen-prevent-event-capture")||e.dataset?.fullscreenPreventEventCapture))return!0;e=e.parentElement}return!1}(e)}function s(e=!1){return(!!i.Ay.isIpadNative||!!i.Ay.ios&&!!i.Ay.isInNativeApp)&&!!window.FigmaMobile.shouldHandleMultiTouchInFullscreen||!!i.Ay.isMeetDevice||!!i.Ay.isIpad||!!e&&!!(0,a.k)().ce_il_pressure_sensitivity&&!i.rr}function l(e){e.stopPropagation()}function c(e){e.preventDefault()}},530292:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(318147);function i(e){switch(e){case a.y4.WHITEBOARD:return a._Y.WHITEBOARD;case a.y4.SLIDE_TEMPLATE:return a._Y.SLIDES;default:return a._Y.DESIGN}}},431054:(e,r,n)=>{n.d(r,{i:()=>o});var a=n(656329),i=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(i||{});function o(e){return"which"in e?3===e.which||a.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||a.Ay.mac&&0===e.button&&e.ctrlKey)}},911433:(e,r,n)=>{n.d(r,{$K:()=>_,bW:()=>E,s5:()=>f,u2:()=>g});var a=n(382902),i=n(755595),o=n(843117);let s=i.z.object({key:i.z.string()}),l=i.z.object({fileKey:i.z.string().min(1),fileVersion:i.z.number(),pageGuid:i.z.string().min(1),selectedNodeIds:i.z.array(i.z.string()).nonempty()}),c=i.z.object({fileKey:i.z.string().min(1),fileVersion:i.z.number(),pageGuid:i.z.string().min(1),selectedNodeId:i.z.string()}),d=i.z.object({showOrgTemplateView:i.z.boolean()}),u=i.z.object({figjamFileKey:i.z.string().min(1),selectedGuids:i.z.array(i.z.string()).optional(),pageGuids:i.z.array(i.z.string()).optional()}),p=i.z.discriminatedUnion("type",[s.extend({type:i.z.literal("copy-to-sites-from-design"),data:c}),s.extend({type:i.z.literal("design-copy-to-slides"),data:l}),s.extend({type:i.z.literal("figjam-create-slides-outline"),data:u}),s.extend({type:i.z.literal("cooper-org-template-picker-view"),data:d})]),m=(0,a.E2)("new-file-data",null,p.nullable()),_=(0,a.tx)(null),h=(0,a.Iz)(e=>(0,a.eU)(r=>{let n=r(_),a=r(m);return a&&a.key===n&&a.type===e?a.data:null},(r,n,a)=>{let i=(0,o.MZ)();return n(m,{data:a,type:e,key:i}),i})),g=h("design-copy-to-slides"),f=h("figjam-create-slides-outline");h("copy-to-sites-from-design");let E=h("cooper-org-template-picker-view")},990063:(e,r,n)=>{function a(e,r){return null!==e[r]&&!!e[r]}n.d(r,{vx:()=>a}),n(489082)},892887:(e,r,n)=>{n.d(r,{B:()=>c}),n(848318);var a=n(195124),i=n(768618),o=n(654574);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,a){let o=(0,i.UN)();if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:a};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,o._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,i,{enableTracking:o=!0}={}){let l=s.instance;if(!o||!l)return await i();let d=(0,a.UP)(),u=await i(),p=new Set((0,a.UP)());return d.forEach(e=>p.delete(e)),r||="null",l.trackNodesAsTemplate(e(),p,r,n),u}},376732:(e,r,n)=>{n(553547),n(768618),n(382902),n(614092),n(708889)},557214:(e,r,n)=>{let a;n.d(r,{ky:()=>_}),n(848318);var i=n(938982);n(186606),n(19180);var o=n(284505),s=n(382731),l=n(862057),c=n(257034),d=n(782559),u=n(947527),p=n(998568),m=n(461979);n(995218),n(303397),n(46641),n(259964);let _={getTokenValue:h,updateColorsInFullscreen:function(e){let r={},n=getComputedStyle(document.body);if(!a&&!(a=function(){let e;let r=document.head.querySelector('link[href*="figma_app"][href*="css"]');try{r instanceof HTMLLinkElement&&(e=r.sheet?.cssRules)}catch{}return!!(e&&e.length>0)}())){(0,p.us)("Cannot fetch color tokens from CSS, CSS was not loaded");return}let o=e.currentTokens.getCopy();for(let e in o){let a=h(n,e),o=function(e){if(!e)return;let r=g(e);if(!r)return;let{r:n,g:a,b:i,alpha:o}=r;return((void 0===o?255:Math.round(255*o))<<24|Math.round(255*i)<<16|Math.round(255*a)<<8|Math.round(255*n))>>>0}(a);void 0!==o?r[e]=o:(0,p.$D)(i.e.FPL,Error(`Failed to find valid value for color token ${e}, found ${a}`))}e.currentTokens.set(r),e.hasSetTokens.set(!0)}};function h(e,r){let n;if(r.startsWith("fs"))n="color-"+r;else{let e="color"+r.charAt(0).toUpperCase()+r.slice(1);n=(0,m.VZ)(e).replace("desktop-backgrounded","desktopBackgrounded").replace("desktop-foreground","desktopForeground").replace("desktop-fullscreen","desktopFullscreen")}return e.getPropertyValue(`--${n}`)?.trim()||void 0}(0,o.b2)(s.A),(0,o.b2)(l.A),(0,o.b2)(c.A),(0,o.b2)(d.A);let g=(0,u.A)("rgb")},205958:(e,r,n)=>{n.d(r,{J:()=>_});var a=n(848318),i=n(301168),o=n(803565),s=n(186606),l=n(206639),c=n(813009),d=n(323201),u=n(995218),p=n(756672),m=n(506428);function _(){let e=(0,u.ow)(),r=(0,p.sO)(),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),_=(0,c.R)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),h=(0,m.DP)(),g=(0,a.useMemo)(()=>d.F.format(_),[_]);if(e){let e=s.DV9?.getWhiteboardCanvasColor();return e?d.F.format((0,o.aH)(e)):"#ffffff"}return r&&s.Ez5?d.F.format((0,o.aH)((0,o.R0)(s.Ez5.getFSCanvasDefaultFill()))):_?g:(0,l.Bx)(h)}},892189:(e,r,n)=>{n.d(r,{JT:()=>d});var a=n(301168),i=n(410725),o=n(540698),s=n(318147),l=n(55116),c=n(933614);function d(){let e=(0,a.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,a.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:a}=r,i=e&&a[e];return i?(0,c.B4)(n[i]):null});let r=(0,i.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},995218:(e,r,n)=>{n.d(r,{E3:()=>g,Em:()=>m,HW:()=>d,JV:()=>y,XE:()=>c,cJ:()=>_,iq:()=>u,lg:()=>l,m0:()=>h,my:()=>E,ow:()=>p,pQ:()=>f,u8:()=>b});var a=n(301168),i=n(231159),o=n(318147),s=n(259964);function l(){return(0,a.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,a.d4)(e=>"prototype"===e.selectedView.view)}function u(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view)}function p(){return l()===o._Y.WHITEBOARD}function m(){return l()===o._Y.DESIGN}function _(){return l()===o._Y.SITES}function h(){return g()===s.nT.DevHandoff}function g(){return(0,a.d4)(f)}function f(e){let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType}function E(){return(0,a.d4)(e=>y(e.selectedView))}function y(e){return"fullscreen"!==e.view?null:e.editorType}let b=(0,i.bt)(e=>y(e.selectedView))},834053:(e,r,n)=>{n.d(r,{Ol:()=>l,xy:()=>s});var a=n(848318);n(382902),n(828237);var i=n(995218),o=n(20687);function s(e,r){let n=(0,i.my)();return(0,a.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,i.my)();return(0,a.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(698429)},262709:(e,r,n)=>{n(301168),n(398612),n(637640),n(103661),n(967688),n(31898),n(844462),n(226455)},456028:(e,r,n)=>{n.d(r,{$D:()=>p,DG:()=>u,dk:()=>m});var a=n(848318),i=n(301168),o=n(382902),s=n(410725),l=n(55116),c=n(944239);let d=(0,o.eU)(null),u=(0,c.D)((e,r=!1)=>{let n=(0,s.Rs)(l.a8q,{fileKey:e},{enabled:!!e});return(0,a.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function p(e=!1){return function(e=!1){let r=(0,i.d4)(e=>e.openFile);return u(r?.key||"",e)}(e).enabled}function m(e){let r=o.zl.get(d);return!!e&&!!r&&new Date<r&&!e.isTryFile}},738714:(e,r,n)=>{n.d(r,{of:()=>u}),n(848318),n(301168);var a=n(19180);n(382902),n(989232),n(311129),n(29188),n(97481),n(171506),n(967688),n(565294),n(431698);var i=n(2138),o=n(212504);n(303397),n(766930),n(92338),n(459403),n(467591),n(659502),n(590781),n(672990);var s=n(97239);n(70433);var l=n(730143);n(672940),n(277909),n(222565),n(318147);var c=n(407638);n(535884),n(361053),n(434289);var d=n(197696);function u(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:u,isRecovery:p,isUserInLimitedSpace:m,isPublishingModalDisabled:_}){let h=(0,s.Z)(e)||null,g=(0,a.k)().branching_update_status_lg?{createBranch:{status:"hidden"},openBranchSource:{status:"hidden"},viewBranches:{status:"hidden"},viewBranchDiff:{status:"hidden"},mergeBranch:{status:"hidden"},viewSourceDiff:{status:"hidden"},updateBranch:{status:"hidden"}}:(0,o.gW)((0,l.tB)(e),(0,c.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,p,h,m,null);return(0,i.p)({fileMenuArgs:{fileCreationMenuItems:[],branchingActionsStatus:g,saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,shouldShowSlideConversionEntrypoint:!1,openFile:(0,l.tB)(e),hasCollections:!1},pluginAndWidgetMenuArgs:u,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,d.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,d.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:_},spotlightArgs:{spotlightDisabledForSelf:!(0,d.Yh)(e.mirror.appModel,"spotlight-me")}})}n(912344),n(995218),n(810503),n(996046)},618500:(e,r,n)=>{n.d(r,{v:()=>c});var a=n(848318);n(128080);var i=n(410725),o=n(587745),s=n(55116),l=n(709067);function c(e){let r=(0,i.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return a.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let a=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:a?.toISOString()}},[r])}},840769:(e,r,n)=>{n(938982),n(615233),n(748008),n(998568),n(594950),n(859172),n(318147),n(194081),n(683703)},719038:(e,r,n)=>{var a=n(382902);n(476254);var i=n(410725);n(748008),n(946778);var o=n(730143);n(125761);var s=n(55116),l=n(944239);n(262709),(0,l.D)(()=>{let e=(0,a.md)(o.ze);return(0,i.Rs)(s.jmg,{fileKey:e||""},{enabled:!!e})}),(0,a.eU)(!1)},522463:(e,r,n)=>{n.d(r,{z:()=>o});var a=n(848318),i=n(430385);function o(e,r,n){let[o,s]=a.useState(e),l=a.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=a.useMemo(()=>{let e=[...r],a=n.find(e=>e.name===o.columnName);return a&&a.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let a=n.isReversed,o=a;r.sortReversed&&(a=!a),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,i.hR)(e,r.getSortValue,a,r.getSecondarySortValue,o):(0,i.v7)(e,r.getSortValue,{isDescending:a,isSecondaryDescending:o},r.getSecondarySortValue)}(e,a,o),e},[n,r,o]);return[o,l,c]}},481406:(e,r,n)=>{n.d(r,{U5:()=>l,Yo:()=>s.zp,yy:()=>c});var a=n(301168);n(317720),n(190243),n(329228);var i=n(180294),o=n(318147);n(55116),n(138528);var s=n(913026);function l(){let e=(0,i.sZ)(),r=(0,a.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==o._D.GUEST}function c(){return(0,a.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}},174882:(e,r,n)=>{n.d(r,{LQ:()=>l,a9:()=>o,ar:()=>s}),n(848318);var a=n(301168);n(317720),n(128080),n(989232),n(300322),n(621464),n(865114),n(861813),n(458608),n(410725),n(748008),n(72462),n(182317),n(314979),n(967688),n(141652),n(766425),n(861119),n(55116),n(523443),n(131413);var i=n(403014);function o(){return(0,a.d4)(e=>(0,i.xw)(e))}n(138528),n(360860),n(683703),n(840769);function s(e,r){return!!(e&&r)}function l(e){var r;let n=(0,i.xw)(e);return!!((r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null)&&r.are_custom_templates_allowed&&n)}},557993:(e,r,n)=>{n(301168),n(967688),n(823898),n(718284),n(876086),n(31898),n(675257),n(760641),n(125761),n(794025),n(20687),n(324747),n(553709),n(764474),n(414864),n(990652),n(849911),n(729365)},747822:(e,r,n)=>{n.d(r,{a:()=>l});var a=n(848318),i=n(410725),o=n(55116);let s=(e,r,n)=>{let s=(0,i.Rs)(o.i1D,{orgId:e},{enabled:!!e});return a.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let a=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&a})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},38011:(e,r,n)=>{n.d(r,{Bi:()=>L,Gt:()=>C,IK:()=>O,dR:()=>P,ee:()=>N,hN:()=>R});var a=n(848318),i=n(301168),o=n(938982),s=n(186606),l=n(813009),c=n(998568),d=n(458660),u=n(677103),p=n(462794),m=n(453370),_=n(882242),h=n(409438),g=n(995218),f=n(913026),E=n(702038),y=n(280255),b=n(20687),v=n(259964),T=n(764474),I=n(215533),S=n(652576);function A(){let e=(0,g.E3)(),{orgEntity:r,org:n,openFile:i,isReadOnly:o,userCanViewPlugins:s,userCanRunExtensions:c,activeTextReviewPlugin:d,publishedPlugins:u,publishedWidgets:p}=(0,l.R)(e=>({orgEntity:(0,f.EL)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanViewPlugins:(0,y.Eh)(e),userCanRunExtensions:(0,y.cb)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),m=(0,S.$1)();return a.useMemo(()=>({openFile:i,localExtensions:m,orgEntity:r,org:n,isReadOnly:o,userCanViewPlugins:s,userCanRunExtensions:c,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:d,publishedPlugins:u,publishedWidgets:p}),[i,m,r,n,o,s,c,e,d,u,p])}function w(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function C(e,r){let n=function(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],a=(0,S.cW)()[e];return n||(a?(0,b.Ar)(a):null)}(e),l=A(),p=(0,I.b)(),m=(0,d.gB)(),_=(0,i.Pj)();return a.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.e.EXTENSIBILITY,Error("Plugin version not found"));return}let a=w(n);if((0,b.YG)(n)&&D(_),(0,b.mx)(n)){m((0,u.$n)(n)),D(_),(0,E.ax)(s._gJ.PRIMARY);return}(0,h.Im)({...l,allSavedPlugins:{[n.plugin_id]:n}},r,e||a),p()},[n,l,r,p,_,m])}function N(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function L(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function O(e){return(0,T.ZQ)(e)?(0,T.k0)(e)?N(e):R(e):(0,T.k0)(e)?L(e):w(e)}function R(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function P(e,r){let n=A(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),l=(0,I.b)(),c=(0,d.gB)(),p=(0,i.Pj)();return a.useCallback(e=>{if(!o){console.error("Plugin not found");return}let a=R(o);if((0,b.YG)(o)&&D(p),(0,b.mx)(o)){c((0,u.$n)(o)),D(p),(0,E.ax)(s._gJ.PRIMARY);return}(0,h.Im)(n,r,e||a),l()},[o,n,r,l,p,c])}function D(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===v.nT.Design&&(e.dispatch(m.$T({...r,view:"fullscreen",editorType:v.nT.DevHandoff})),(0,p.Ym)(e.getState(),v.nT.DevHandoff,"plugin_run"))}},652576:(e,r,n)=>{n.d(r,{$1:()=>M,BE:()=>el,Be:()=>K,N3:()=>U,QZ:()=>es,S0:()=>er,U6:()=>et,V2:()=>eo,YN:()=>ei,YW:()=>j,ZT:()=>x,_P:()=>W,cW:()=>F,j1:()=>ec,j8:()=>en,ll:()=>ee,mf:()=>B,op:()=>ed,qr:()=>$,tB:()=>J});var a=n(848318),i=n(301168),o=n(354427),s=n(938982),l=n(19180),c=n(805353),d=n.n(c);n(989232);var u=n(813009),p=n(410725);n(841807);var m=n(998568);n(810503);var _=n(967688),h=n(674661),g=n(952039);n(823898),n(221511);var f=n(16084),E=n(566726),y=n(995218);n(391720);var b=n(531851),v=n(355755);n(7148);var T=n(730143),I=n(180294),S=n(125761),A=n(318147),w=n(55116),C=n(922484),N=n(280255),L=n(20687),O=n(259964),R=n(764474);n(208624);var P=n(698429),D=n(834053),k=n(924476);function M(e){let r=(0,i.d4)(e=>e.localPlugins);return(0,D.xy)(r,e)}function F(){let e=(0,i.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,a.useMemo)(()=>(0,L.xC)(r,e),[e,r])}function x(){let e=(0,i.d4)(e=>e.publishedWidgets),r=es(),n=(0,a.useMemo)(()=>({}),[]);return r?e:n}function U(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id];if(!n)return null;let a={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file?.key??null,hasPlaygroundFile:!!n.playground_file_version_id,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},i={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===A.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,isSlides:n?.manifest.editorType?.includes(R.FW.SLIDES)||!1,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:A.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null,imgUrls:{}}}))||[],currentPluginVersion:a,viewableInEditor:!0,publishingStatusUpdatedAt:null,isSeoIndexingAllowed:null,currentPlanUser:null};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:i,pinnedStatus:A.hM.UNPINNED}}function B(e,r,n,a){if(!e||e.publishingStatus&&[A.KB.ORG_PRIVATE,A.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,l.k)().community_hub_admin)return;let i=e.currentPluginVersion;if(!i)return;if(!i.manifest){(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",c=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=R.pL.safeParse(r);if(!n.success)return(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(i.manifest);if(!c)return;let d=`?resource_type=${o}&resource_id=${e.id}`;n&&(d+=`&fuid=${n}`);let u={id:i.id,plugin_id:e.id,name:i.name||"",current_plugin_version_id:i.plugin?.currentPluginVersionId||void 0,version:i.version||"",release_notes:i.releaseNotes||"",is_private:!!e.orgId,description:i.description||"",creator_policy:i.creatorPolicy??"",manifest:c,installed_by:a,tagline:i.tagline||"",created_at:i.createdAt.toString(),redirect_icon_url:`/community/icon${d}`,redirect_cover_image_url:`/community/thumbnail${d}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(u.community_publishers=e.communityPublishers),e.isWidget&&(u.redirect_snapshot_url=`/community/snapshot${d}`),e.orgId&&(u.org_id=e.orgId),u}let G=(e,r,n)=>{let a={},i={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let p=B(u,r,n,d);p&&(u.isWidget?(i[e.pluginId]=p,"org"===d?s[e.pluginId]=p:"user"===d&&(c[e.pluginId]=p)):(a[e.pluginId]=p,"org"===d?o[e.pluginId]=p:"user"===d&&(l[e.pluginId]=p)))}}return{plugins:a,widgets:i,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},V=new Set,H=new Set,z=d()(e=>{V.size>0&&(e(E.f1({pluginIds:Array.from(V)})),V.clear()),H.size>0&&(e(E.O8({widgetIds:Array.from(H)})),H.clear())},300);function K(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,p.Rs)(w.BB3,{orgId:r}),o=(0,S.TA)(),s=es();return a.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:a,widgets:i,orgPlugins:l,orgWidgets:c,userPlugins:d,userWidgets:u}=G(n,r,o);return!function(e,r,n){let a=Object.keys(r),i=Object.keys(n);a.forEach(e=>V.add(e)),i.forEach(e=>H.add(e)),z(e)}(e,a,s?i:{}),{loaded:!0,plugins:a,widgets:s?i:{},orgPlugins:l,orgWidgets:s?c:{},userPlugins:d,userWidgets:s?u:{}}},[e,n,r,o,s])}function W(e,r){let n=I.sZ()?.id??null,i=(0,S.TA)(),o=(0,p.Rs)(w.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return a.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?B(s,n,i,null)??null:null},[l,s,n,i])}function j(e,r){return e.name.localeCompare(r.name)}let Y={loaded:!0,plugins:{}};function $(){return X(function(){let e=(0,i.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=M();return(0,a.useMemo)(()=>{let r={};for(let n in e){let a=e[n];(0,R.k0)(a)&&(r[n]=a)}return r},[e])}(),n=(0,k.o)(),o=(0,S.TA)(),s=es();return(0,a.useMemo)(()=>{let a=[];return s&&n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,r,e,o,s])}())}function q(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=M(void 0);return(0,a.useMemo)(()=>{let e={};for(let n in r){let a=r[n];(0,R.k0)(a)||(e[n]=a)}return e},[r])}(),n=(0,k.o)(),o=(0,S.TA)(),s=(0,a.useMemo)(()=>{let a=[];return n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let i=e.fetchedResources[n.id];if(i&&i.version){a.push(i.version);return}if(r[n.id]){a.push(r[n.id]);return}}),a},[n,e,r,o]);return(0,D.Ol)(s)}function X(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function J(){let e=(0,i.d4)(e=>e.recentlyUsed.plugins),r=(0,i.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,k.o)();return(0,a.useMemo)(()=>{let a={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(a[e.id]=r)})),a},[o,n,e,r])}function Z(e,r,n){let a=Object.keys(e).reduce((e,n)=>{if(r[n]){let a=r[n],i=(0,L.Ar)(a);if(!i)return e;e[n]=i}return e},{});return(0,L.NW)(n,a)}function Q(e){let r=I.sZ()?.id??"",n=(0,i.wA)(),a=(0,i.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=I.sZ()?.id??"",a=(0,T.tS)(),i=(0,b.CR)(e,r&&!!a),o=(0,b.kA)(n??"",e,r&&!!n&&!a);return a?i:o}(e,s),c=l.loaded?l.data:[];if(!s)return a;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.c2)(d,a)||n(("plugin"===e?h.P:h.o)(d)),d}function ee(){let e=(0,y.my)(),r=(0,I.sZ)(),n=F(),o=!!(r&&r.plugins_whitelist_enforced),s=Q("plugin"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.Gb)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));return a.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),a.useMemo(()=>Z(s,n,e),[e,s,n])}function et(){let e=(0,y.my)(),r=(0,I.sZ)(),n=x(),o=!!(r&&r.widgets_whitelist_enforced),s=Q("widget"),l=(0,i.wA)(),c=(0,T.tS)(),d=(0,R.n_)(r?.id??"",c),u=(0,i.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));a.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]);let p=a.useMemo(()=>Z(s,n,e),[s,n,e]),m=es(),_=(0,a.useMemo)(()=>({}),[]);return m?p:_}function er(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let i=M(),o=F();return a.useMemo(()=>(0,L.DM)({idToSearch:e,localExtensionsByFileId:r?i:void 0,publishedExtensions:n?o:void 0}),[e,r,n,i,o])}function en(){let e=function(){let e=(0,i.d4)(e=>e.selectedView),r=(0,i.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return Y;let n=(0,L.GX)(e.editorType);if(!r.loaded)return r;let a={};for(let i of Object.values(r.plugins))(0,L.EK)(n,i.manifest.editorType)?a[i.plugin_id]=i:((0,P.$A)(e)&&(0,L.M5)(i)||"figma"===n&&(0,L.M5)(i))&&(a[i.plugin_id]=i);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,L.NW)(o,a)}}(),r=function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=F();return(0,a.useMemo)(()=>{if(!r)return[];let a=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(a,r,e))},[n,r,e])}(),n=q(),o={};return Object.values(e.plugins).forEach(e=>{o[e.plugin_id]||(o[e.plugin_id]=e)}),Object.values(r).map(L.uF).forEach(e=>{o[e.plugin_id]||(0,R.ZQ)(e)||(o[e.plugin_id]=e)}),n.forEach(e=>{o[e.plugin_id]||(0,R.ZQ)(e)||(o[e.plugin_id]=e)}),o}function ea(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ei(){let e=(0,y.E3)(),r=ea(ee()),n=ea(et()),i=(0,u.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,v.p8)("isReadOnly");return a.useCallback(a=>{let{canRun:s}=(0,L.JT)({plugin:a,editorType:e,canRunPluginState:{...i,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,i,r,n,o])}function eo(){return(0,i.d4)(N.cb)}function es(){let e=(0,y.E3)();return e!==O.nT.Slides&&e!==O.nT.Sites&&e!==O.nT.Figmake}function el(e){let r=(0,y.pQ)(e);return r!==O.nT.Slides&&r!==O.nT.Sites&&r!==O.nT.Figmake}function ec(e){let r=(0,i.wA)(),n=(0,I.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,i.d4)(e=>e.whitelistedPlugins)[e],l=M(),c=a.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,i.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,p=!s&&!u;return{validatePublishedPluginInOrgAllowlist:a.useCallback(()=>!p||(r(g.F.enqueue({message:(0,_.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[p,r]),isPluginBlockedByAllowlist:p}}function ed(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,I.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),i=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ee(),l=et(),c=e?l:s,d=e?i:n,u=r?.id??"",p=(0,T.tS)(),m=(0,C.oh)(e?(0,R.n_)(u,p):(0,R.Gb)(u,p)),_=a.useCallback(e=>d?e.filter(e=>!(0,R.LR)(e)||!!c[e.plugin_id]):e,[c,d]),h=a.useCallback(e=>o?e.filter(e=>!(0,R.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:m,hasPluginAllowList:n,hasWidgetAllowList:i,filterByPublicResourcesAllowed:h,filterByAllowlist:_}}(!1);return e(r(X(q())))}},996046:(e,r,n)=>{n.d(r,{b$:()=>p,c4:()=>m});var a=n(848318);n(708754),n(623788);var i=n(813009);n(480960),n(972402);var o=n(652576),s=n(913026);n(959750),n(942963);var l=n(180294);n(554326);var c=n(280255),d=n(259964);let u={};function p(e){let r=(0,d.oD)(e.selectedView.editorType);return{openFile:e.openFile,publishedPlugins:e.publishedPlugins,allSavedPlugins:u,recentlyUsedPlugins:(0,s.gS)((0,d.wN)(r),e.recentlyUsed,e.localPlugins),localExtensions:e.localPlugins,org:(0,l.td)(e.currentUserOrgId,e.orgById)??null,isReadOnly:e.mirror.appModel.isReadOnly,userCanViewPlugins:(0,c.Eh)(e),userCanRunExtensions:(0,c.cb)(e),editorType:(0,d.wN)(r),widgetSelectionInfo:e.mirror.selectionProperties?.selectedWidgetInfo,activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedWidgets:e.publishedWidgets,userCanViewWidgets:(0,o.BE)(e)}}function m(){let e=(0,o.Be)(),r=(0,o.qr)(),n=(0,i.R)(e=>p(e)),s=n.editorType===d.nT.Sites,l=n.editorType===d.nT.Figmake,c=n.editorType===d.nT.Cooper,m=(0,o.QZ)();return(0,a.useMemo)(()=>{if(s||l||c)return{...n,userCanViewPlugins:!1,userCanRunExtensions:!1,allSavedPlugins:u,isReadOnly:!0};let a=e.plugins,i=e.widgets;return{...n,recentlyUsedWidgets:r,savedWidgetVersions:i,userCanViewWidgets:m,allSavedPlugins:a}},[n,s,l,c,r,e.plugins,e.widgets,m])}},156818:(e,r,n)=>{n.d(r,{Yk:()=>y}),n(848318);var a=n(301168);n(186606),n(19180);var i=n(382902),o=n(410441),s=n(328238);n(978295);var l=n(926295),c=n(556777);n(361964);var d=n(995218);n(959750),n(601167),n(14837),n(7148),n(554326);var u=n(698429);n(789388);var p=n(733289);n(570775);var m=n(817710),_=n(590641),h=n(476077),g=n(620847);n(236880);var f=n(696786),E=n(27776);function y(){let e=(0,p.N)(),r=(0,c.e)(),n=(0,u.ks)(),y=(0,a.d4)(e=>!!e.prototype?.isFooterVisible),b=(0,s.zm)()&&!n?(0,o.jz)(E.F6W):0,v=(0,f.GS)(),T=(0,a.d4)(e=>e.mirror?.appModel.showUi),I=64+e+b,S=(0,d.ow)(),A=(0,_.L)(),w=(0,g._)(),C=(0,h.G)(),N=(0,i.md)(m.gT),L=(0,i.md)(l.r);return S&&!A?w&&C?(0,o.jz)(E.IuL)+(0,o.jz)(E.jl4):w&&N?I:w?(0,o.jz)(E.IuL):0:r?v?I+(L?40:0):(0,o.jz)(E.ZB$):y?(0,o.jz)(E.P4e):v&&T?I:0}(0,o.hG)(E.xEX),(0,i.eU)(0)},858160:(e,r,n)=>{n.d(r,{iT:()=>p});var a=n(848318),i=n(301168),o=n(186606);n(865114),n(116848),n(702038);var s=n(355755),l=n(554326),c=n(228845);n(756672);var d=n(995218),u=n(696786);function p(){let e=(0,u.GS)(),r=!(0,l.ut)(o.Ez5?.uiState()?.showPropertiesPanel,!0),n=function(){let e=(0,u.GS)(),r=(0,d.ow)(),n=(0,c.Ye)(),a=(0,s.aV)(),l=(0,s.ax)(),p=(0,s.dH)(),m=p===o.NLJ.FRAME||p===o.NLJ.COMMENTS||p===o.NLJ.VECTOR_PENCIL,_=(0,i.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!_&&!!n&&!a&&!r&&!l&&!m}(),p=e&&(r||n),m=(0,a.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),_=(0,a.useCallback)(()=>{m(!p)},[p,m]);return{isPropertiesPanelCollapsed:p,setPropertiesPanelCollapsed:m,togglePropertiesPanelCollapsed:_}}},852314:(e,r,n)=>{n.d(r,{w:()=>o,y:()=>s});var a=n(19180),i=n(481406);function o(){let e=(0,i.U5)();return(0,a.k)().xr_debounce_threshold&&e}function s(){return(0,a.k)().xr_debounce_threshold}},425835:(e,r,n)=>{n.d(r,{Et:()=>N,J3:()=>S,JU:()=>A,UF:()=>w,b2:()=>O,kD:()=>C,kN:()=>y,mZ:()=>I,tS:()=>T});var a=n(848318),i=n(301168),o=n(660376),s=n(19180),l=n(382902);n(813009),n(410725),n(329228);var c=n(249726),d=n(730143),u=n(180294),p=n(318147);n(55116);var m=n(677334);n(474132);var _=n(138528);n(535884);var h=n(361053);n(606672),n(152545),n(209857);var g=n(668777),f=n(995218),E=n(174882);n(452586);var y=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(y||{});function b(){let e=(0,f.lg)(),r=(0,_.D6)("useCustomTemplatesAllowed").unwrapOr(null),n=(0,_.T5)("useCustomTemplatesAllowed").unwrapOr(null);return(0,a.useMemo)(()=>n?.key.type===p.OL.ORG?(0,E.ar)(!!n?.customTemplatesAllowed,!!r):n?.key.type===p.OL.TEAM&&!!n&&!!e&&n.tier!==p.Ag.STARTER&&(e===p._Y.SLIDES||(e===p._Y.WHITEBOARD?!!(0,s.k)().pro_templates_figjam:e===p._Y.COOPER)),[r,n,e])}function v(){let e=(0,u.sZ)(),r=(0,h.ol)();if(b()){if(e)return{type:"org",entity:e,name:e.name};if(r)return{type:"team",entity:r,name:r.name}}return null}function T(){return!!v()}function I(e){let r=b();return!!e&&r}function S(){let e=(0,d.q5)(),r=function(){let e=v(),r=(0,d.q5)();return(0,i.d4)(n=>!!r&&!!r.folderId&&(e?.type==="team"?(0,c.ye)(n.folders[r.folderId]):e?.type==="org"&&(0,c.Gi)(n.folders[r.folderId])))}(),n=(0,_.X$)("usePublishTemplateStatus").unwrapOr(null),a=n?.key.type,o=b(),s=!!e?.canPublishTemplate,l=!!e?.canEdit;return(a===p.OL.ORG||o)&&e?.editorType!==p._Y.DESIGN?s?"CAN_PUBLISH":l?a!==p.OL.ORG||o?r?e?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function A(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,o.xb)(e)}}function w({fileCanEdit:e,editor_type:r,team_id:n,state:a}){let i=a.currentUserOrgId&&a.orgById[a.currentUserOrgId];return!!(i&&e&&r===p._Y.WHITEBOARD&&i.are_custom_templates_allowed&&n)}function C(){let e=(0,d.q5)(),r=N(e);return e?.template&&r?e?.template:null}function N(e){let r=I(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}var L=(e=>(e.ORG_PLUS="org_plus",e.PRO_OR_STUDENT_TEAM="pro_or_student_team",e))(L||{});m.M4.Query({fetch:async({orgId:e,count:r,editorType:n,enabled:a=!0})=>e&&a?await g.q.getSearchPaginated({orgId:e,size:r,from:0,templateType:n}).then(e=>e.data.meta.templates):[]}),(0,l.eU)(null);let O=(0,l.eU)(null)},566841:(e,r,n)=>{n.d(r,{jd:()=>K,dT:()=>U,Fz:()=>V,eE:()=>H,_R:()=>j});var a=n(848318),i=n(301168),o=n(660376),s=n(186606),l=n(320953),c=n(989232),d=n(637640),u=n(861813),p=n(72462),m=n(841807),_=n(304756),h=n(967688),g=n(952039),f=n(151223),E=n(35597),y=n(804853),b=n(63443),v=n(533737),T=n(892887),I=n(654574),S=n(968602),A=n(780922),w=n(956158),C=n(730143),N=n(125761),L=n(633468);n(318147);var O=n(922484);n(138528);var R=n(152545),P=n(475166);n(668777);let D=(e,r)=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/${r}/prepare_insert`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/${r}/prepare_insert`}},k=e=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/template_canvas`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/template_canvas`}},M=({type:e,template:r})=>{switch(e){case R.n.HubFile:return r.id;case R.n.TeamTemplate:return r.file_key;case R.n.TeamTemplateLg:return r.fileKey;default:(0,o.xb)(e)}},F=({template:e,type:r})=>{switch(r){case R.n.HubFile:return{type:P.vt.CommunityResource,id:e.id};case R.n.TeamTemplate:return{type:P.vt.TeamTemplate,file_key:e.file_key};case R.n.TeamTemplateLg:return{type:P.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.xb)(r)}};async function x({insert:e,dispatch:r,fileKey:n,template:a,onSuccess:i,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new m.jk(`template_insert.${d}`,{key:n??""});u.start();let p=e=>{let r=u.stop();(0,c.trackEvent)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},_=M(a);try{await (0,T.B)(()=>_,n,I.T.STANDARD,async()=>{await e()&&(i&&i(),p("template_insert_success"),(0,I._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,S.gY)(a),resourceId:_,triggeredFrom:d,templateType:a.type,templateCategory:a.type===R.n.HubFile?a.category:void 0}),s)&&(r(v.b({inserted_figjam_template:!0})),a.type===R.n.TeamTemplate&&r(y.D([a.template])),"section-preset"!==d&&"sites-templates-modal"!==d&&r(b.Hx({storeInRecentsKey:P.$A.FigJam,...F(a)})))},{enableTracking:!l})}catch(e){r(g.F.enqueue({message:(0,h.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),p("template_insert_failure")}}async function U({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let a=D(e,r),i=k(e),o=e.type===R.n.HubFile?{fv:`${n}`}:void 0,s=(0,A.n)(i,(e,r)=>_.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e)),[[l]]=await Promise.all([s,_.Ay.post(a,o)]);return l}async function B(e){let{userTriggered:r=!0,cloneLocalStylesAndVariablesForTemplate:n,templateInsertionDirection:a=s.hKj.RIGHT,templateCustomPosition:i,selectTemplateAfterInsertion:o}=e,c=e.editScopeType;c||(c=r?s.zkO.USER:s.zkO.SYSTEM),await x({insert:async()=>await U(e).then(e=>{let d=s.glU;return!!d&&((0,l.l7)(c,"insert-figjam-template",()=>d.insertTemplateInCanvas(e,!!n,a,o??r,!i,i?i.x:null,i?i.y:null)),!0)}),...e})}function G(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function V(){let e=(0,i.wA)(),r=(0,C.tS)(),n=(0,i.d4)(e=>e.fileVersion),a=(0,i.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:i,onFailure:o,...s})=>{let l=G(r,M(s.template));(0,O.VP)(a,l)||(e(E.Cx({key:l})),await B({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(E.yH({key:l})),i&&i()},onFailure:()=>{e(E.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=G(r,e);return(0,O.VP)(a,n)}}}function H(e){let r=(0,i.d4)(e=>e.recentlyUsed.templates),n=(0,i.d4)(e=>e.hubFiles),s=(0,i.d4)(e=>e.recentCustomTemplates);return(0,a.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case P.vt.CommunityResource:return{type:R.n.HubFile,template:n[e.id]};case P.vt.TeamTemplate:return{type:R.n.TeamTemplate,template:s[e.key]};default:(0,o.xb)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function z({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:a,templateName:i,openInNewTab:o,folderId:s}){await _.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:a})=>{let{fig_file:i,template:s}=a.meta;n(),e(y.D([s])),e(b.Hx({storeInRecentsKey:P.$A.FigJam,...r})),d.Ay.redirect((0,L.to)(i),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,h.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:i})};e(g.F.enqueue(r)),a()})}let K=(0,f.nF)((e,r)=>{var n;let a=(n=r.templateIdentifier.file_key,`DUPLICATE_FIGJAM_TEMPLATE_${n}`),{dispatch:i}=e,{loadingState:o}=e.getState();(0,O.VP)(o,a)||(i(E.Cx({key:a})),z({...r,dispatch:i,onSuccess:()=>{i(E.yH({key:a})),r.onSuccess&&r.onSuccess()},onFailure:()=>{i(E.yH({key:a})),r.onFailure&&r.onFailure()}}))}),W={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="};function j(e){let r=(0,N.iZ)(),n=(0,u.J)(()=>r?(0,w.sf)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[i,o]=(0,a.useState)(W);return(0,a.useEffect)(()=>{n.status===p.r.SUCCESS&&o(n.value),n.status===p.r.FAILURE&&o(W)},[n]),i}},696786:(e,r,n)=>{n.d(r,{GS:()=>i}),n(848318),n(301168);var a=n(730455);function i(){return"ui3"===(0,a.DP)().version}n(186606),n(19180),n(313850),n(637640),n(839982),n(998568),n(995218),n(330362),n(46641),n(14837),n(131650),n(200300),n(259964),n(756672)},807720:(e,r,n)=>{n(848318);var a=n(382902);n(67188),(0,a.eU)(null),(0,a.eU)(null)},271326:(e,r,n)=>{n.d(r,{JB:()=>h,MJ:()=>p,n1:()=>_});var a=n(660376),i=n(382902),o=n(615233),s=n(318147),l=n(693246),c=n(259964),d=n(944239),u=n(995218);let p=(0,d.n)((e,r,n)=>{let a=g(n),i=e?.figma_provided_libraries_disabled||r?.figma_provided_libraries_disabled;return!!(!(0,o.sL)()&&a&&!i)}),m=(0,d.n)((e,r)=>{let n=g(r),a=null==e||e.tier===s.Ag.STARTER||e.figmaProvidedLibrariesEnabled;return!!(!(0,o.sL)()&&n&&a)});function _(){return(0,i.md)(h)}let h=(0,i.eU)(e=>{let r=e((0,l.zl)(!0)),n=e(u.u8);return m(r.data,n)});function g(e){if(!e)return!0;switch(e){case c.nT.Design:case c.nT.DevHandoff:return!0;case c.nT.Cooper:case c.nT.Slides:case c.nT.Sites:case c.nT.Figmake:case c.nT.Illustration:case c.nT.Whiteboard:return!1;default:(0,a.xb)(e)}}},885432:(e,r,n)=>{n(848318),n(601167),n(807720)},330362:(e,r,n)=>{n.d(r,{k:()=>s});var a=n(125761),i=n(259964),o=n(995218);function s(){let e=!(0,a.iZ)(),r=(0,o.my)(),n=r===i.nT.Design,s=r===i.nT.Slides,l=r===i.nT.Sites,c=r===i.nT.Cooper,d=r===i.nT.Figmake;return e&&(n||s||l||c||d)}},977385:(e,r,n)=>{n.d(r,{K:()=>o});var a=n(848318);function i(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),a=e.filter(e=>!n.has(e));return a.length===e.length?e:a}function o(e,r=50){let[n,s]=a.useState([]),l=a.useMemo(()=>i(n,e),[e,n]);return a.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:a.useCallback(e=>s(n=>{let a=[...n,...e];return a.length>r?a.slice(a.length-r):a}),[r]),setServerData:a.useCallback(e=>{s(r=>i(r,e))},[])}}},664793:(e,r,n)=>{n.d(r,{FC:()=>h});var a=n(938982),i=n(382902),o=n(615233),s=n(183603),l=n(458608);n(410725);var c=n(998568),d=n(55116),u=n(363655);class p{constructor(e){this.pendingIncrementCount=0,this.makeDebouncedUpsertRequest=m(e=>u.H.upsertUserFlagWithCount(this.userFlagName,e),1e3),this.makeDebouncedResetRequest=m(()=>u.H.resetUserFlag(this.userFlagName),1e3),this.increment=async()=>{let e;let r=o.Ay().user_data?.id;if(!r){(0,c.$D)(a.e.GROWTH_PLATFORM,Error(`Attempted to increment user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}this.pendingIncrementCount+=1;try{e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName})}catch(e){throw this.pendingIncrementCount-=1,e}let n=e.currentUser.userFlagByName;if(0===this.pendingIncrementCount)return;let i=(n?n.count??1:0)+this.pendingIncrementCount;this.pendingIncrementCount=0;let u=this.makeDebouncedUpsertRequest(i),p=new Date;return n?(0,s.WB)().optimisticallyUpdate({UserFlag:{[n.id]:{count:i,updatedAt:p}}},u):(0,s.WB)().optimisticallyCreate({UserFlag:{[`optimistic-id-${this.userFlagName}`]:{userId:r,name:this.userFlagName,count:i,createdAt:p,updatedAt:p}}},u)},this.reset=async()=>{if(!o.Ay().user_data?.id){(0,c.$D)(a.e.GROWTH_PLATFORM,Error(`Attempted to reset user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}let e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName}),r=e.currentUser?.userFlagByName;if(!r)return;let n=this.makeDebouncedResetRequest();return(0,s.WB)().optimisticallyDelete({UserFlag:{[r.id]:null}},n)},this.userFlagName=e}}function m(e,r=200){let n;let a=[];return function(...i){return clearTimeout(n),n=setTimeout(()=>{let r=e(...i);a.forEach(e=>e(r)),a=[]},r),new Promise(e=>a.push(e))}}let _=(0,i.Iz)(e=>(0,i.eU)(()=>new p(e)));function h(e){return i.zl.get(_(e)).increment()}},164427:(e,r,n)=>{var a=n(637640);n(615233);var i=n(287105);n(313817);let o=new URL(window.location.href),s=(o.searchParams.get("mode")||"interaction").toLowerCase().split(","),l=(s.find(e=>e.includes("interaction")),!!s.find(e=>e.includes("perf-bench")||"perf"===e)),c=!!s.find(e=>e.includes("perf-regression")||"perf"===e);o.hostname,function(){let e=o.searchParams.get("playback");switch(e){case null:return;case"sync":case"async":case"realtime":return;default:throw Error(`Unknown playback mode ${e}. Options are "sync", "async", and "realtime".`)}}();let d=i.qg(window.location.search);d["additional-ffs"],d.playwright,d.only,d.skip,d.testGroupFilter,d.onlyPrintSpecs,d.onlyPrintGroups,d.secondary,d.popout,parseInt(d.repeat??"1"),d.logFigmentRequests,d.rolloutFlags,d.stopOnSpecFailure,d.reportV2,d.updateScreenshots,d.bisectDecisions,d.asan;let u=i.qg(a.Ay.location.hash),p=d.initialOptions||u.initialOptions;p&&JSON.parse(decodeURIComponent(p)),(()=>{let e=d["additional-ffs"];if(!e)return;let r={};e.split(",").forEach(e=>{if(!e)return;let[n,a]=e.split("=");r[n]=!a||a.startsWith("t")})})(),(l||c)&&d.noShowPerfReport,(d.test_categories||"").split(",").filter(e=>e.length>0),(d.excludeCategories||"").split(",").filter(e=>e.length>0)},503933:(e,r,n)=>{function a(e){return!!e.imageUrl&&!!e.id&&!!e.handle}function i(e){return{id:e.id,handle:e.handle,img_url:e.imageUrl}}n.d(r,{q3:()=>a,rR:()=>i})},760150:(e,r,n)=>{n.d(r,{H3:()=>i});var a=n(918777);function i(e){return e?(0,a.A)(e).add(1,"day").subtract(1,"second").format():null}n(238444)},353231:(e,r,n)=>{n.d(r,{Cu:()=>$,Dc:()=>m,E9:()=>O,FE:()=>D,Fr:()=>G,GS:()=>L,Hb:()=>I,Nb:()=>A,Nq:()=>v,OH:()=>k,PB:()=>M,Pg:()=>w,QM:()=>T,Ws:()=>Y,_J:()=>B,_R:()=>q,ak:()=>x,cf:()=>E,ds:()=>C,f5:()=>N,fy:()=>X,k1:()=>P,oP:()=>W,pf:()=>F,pi:()=>_,qD:()=>J,uE:()=>V,v5:()=>h,xr:()=>U,ye:()=>K,ys:()=>y,z_:()=>z});var a=n(186606),i=n(989232),o=n(998568),s=n(810503),l=n(318147),c=n(259964),d=n(26435),u=n(944239),p=n(504906);function m(e){switch(e){case c.nT.Design:return"design";case c.nT.Whiteboard:return"figjam";case c.nT.DevHandoff:return"dev_handoff";case c.nT.Slides:return"slides";case c.nT.Sites:return"sites";case c.nT.Figmake:return"make";case c.nT.Cooper:return"buzz";case c.nT.Illustration:return"draw";default:return"unknown"}}function _(e){switch(e&&e.editorType){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"figjam";case l._Y.SLIDES:return"slides";case l._Y.SITES:return"sites";case l._Y.FIGMAKE:return"make";case l._Y.COOPER:return"buzz";default:return"unknown"}}function h(e,r){return e?.view==="fullscreen"?m(e.editorType):r?_({editorType:r}):"unknown"}let g=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},f=null;function E(){return f}function y(e){f=e}let b=0;function v(){return b.toString()}function T(){b=0}function I(){b++}let S=(e,r,n,i={})=>{let o=h(n?.selectedView,r&&r.editor_type),s={...i,...A(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=i.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,f&&(s.loadID=f,s.reconnectId=v()),s.fileIsIncremental=!!a.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!a.h3O?.isValidatingIncremental(),s.isStagingChanges=!!a.h3O?.isStagingChanges(),s};function A(e,r){return e===l._Y.SLIDES&&"fullscreen"===r?{slide_view:a.Ez5?.singleSlideView()?.isFocusedNodeViewEnabled()?"ssv":"grid"}:{}}function w(){(0,i.clearAnalyticsStorage)()}let C=(0,u.n)((e,r,n,a={},o)=>{let s=g(r,n),l=S(r,s,n,a);(0,i.trackEvent)(e,l,o)}),N=(0,u.n)((e,r,n,a={},o)=>{let s=S(r.key,r,n,a);(0,i.trackEvent)(e,s,o)}),L=(0,u.n)((e,r,n,a)=>{let o=g(r,n),s=S(r,o,n,a);i.definedAnalyticsHandler.trackDefinedEvent(e,s)});function O(e,r,n={},a){n.productType=r&&_(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,i.trackEvent)(e,n,a)}let R="File Browser File Clicked";function P(e,r,n){if(r.state){var a;C(R,e,r.state,{selectedView:"recentsAndSharing"===(a=r.state).selectedView.view?a.selectedView.tab||d.G.RECENTLY_VIEWED:"folder"===a.selectedView.view&&a.selectedView.folderId===a.user?.drafts_folder_id?"drafts":a.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,i.trackEvent)(R,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,i.trackEvent)(R,{fileKey:e,entrypoint:r.entrypoint},n)}function D(e,r,n){(0,i.trackEvent)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function k(e,r,n={},a){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,i.trackEvent)(e,n,a)}function M(e,r,n,a={},o){let s=r.map(e=>n.fileByKey[e]);a.fileKeys=r,a.fileParentOrgIds=[],a.fileTeamIds=[],a.containingFolderIds=[],s.forEach(e=>{a.fileParentOrgIds.push(e.parent_org_id),a.fileTeamIds.push(e.team_id),a.containingFolderIds.push(e.folder_id)}),(0,i.trackEvent)(e,a,o)}function F(e,r,n={},a){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,i.trackEvent)(e,n,a)}function x(e,r,n,a){let i=e.map(e=>e.key),o=[],s=[],l=[];i.forEach((e,n)=>{let a=r[n];o.push(a.key),s.push(a.folder_id),l.push(a.team_id)}),M("File Copied",i,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},a)}function U(e,r,n,a,o={},s){let l=a.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,i.trackEvent)(e,o,s)}function B(e,r,n,a={},o){let s=(0,p._)(r,n);a.teamId=s?.id,a.teamName=s?.name,(0,i.trackEvent)(e,a,o)}function G(e,r,n,a={},o){let s=n.orgById[r];a.orgId=s.id,a.orgName=s.name,(0,i.trackEvent)(e,a,o)}function V(e,r,n={},a){n.userId=r.user&&r.user.id,(0,i.trackEvent)(e,n,a)}let H={[l.vt.FILE]:"fileKey",[l.vt.FILE_REPO]:"fileRepoId",[l.vt.FOLDER]:"folderId",[l.vt.TEAM]:"teamId"};function z(e,r,n={},a){let o=H[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,i.trackEvent)(e,n,a)}function K(e,r){(0,i.trackEvent)(e,r)}function W(e){return{canEdit:e.canEdit,fileKey:e.key,productType:_(e)}}var j=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(j||{});let Y="CTA Clicked";function $(e,r,n,a){let l=r||Y;(0,s.Lo)(l,e.text||"",e,{logToConsole:o.NU.NEVER});let c={...e,nonInteraction:0};(0,i.trackEvent)(l,c,{forwardToDatadog:!0,sendAsBeacon:n,...a})}var q=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(q||{});function X(e,r){let n={...e,nonInteraction:0};(0,i.trackEvent)("Input Blurred",n,r)}function J(e,r={}){(0,i.trackEvent)("Context Viewed",e,{forwardToDatadog:!0,...r})}},968602:(e,r,n)=>{n.d(r,{fG:()=>m,gY:()=>p,gp:()=>u});var a=n(848318),i=n(660376),o=n(562027),s=n(318147),l=n(138528),c=n(152545),d=n(543177);function u(e){switch(e.type){case c.n.HubFile:return e.template.id;case c.n.TeamTemplate:return e.template.file_key;case c.n.TeamTemplateLg:return e.template.fileKey;default:return(0,i.xb)(e)}}function p(e){switch(e.type){case c.n.HubFile:return(0,d.a6)(e.template).name;case c.n.TeamTemplate:case c.n.TeamTemplateLg:return e.template.name;default:return(0,i.xb)(e)}}function m(){let e=(0,l.T5)("useGetGenericTemplateDisplayProps").unwrapOr(null),r=e?.imgUrl||void 0,n=e?.name;return(0,a.useCallback)(e=>{let a=u(e),l=p(e),m=function(e){switch(e.type){case c.n.HubFile:return(0,d.a6)(e.template).description;case c.n.TeamTemplate:case c.n.TeamTemplateLg:return e.template.description;default:return(0,i.xb)(e)}}(e),{type:_,template:h}=e;switch(_){case c.n.HubFile:return{imageUrl:h.thumbnail_url||void 0,clientMeta:h.client_meta,thumbnailIsSet:!!h.thumbnail_is_set,isWhiteboard:h.viewer_mode===s.y4.WHITEBOARD,name:l,description:m,hubFileId:h.id,publishers:h.community_publishers?.accepted||[],primaryKey:a,duplicateLink:`${window.location.origin}/community/file/${h.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:h.resized_thumbnail_urls,libraryKey:h.library_key};case c.n.TeamTemplate:{let e=h.published_by_user?[{name:h.published_by_user.handle,img_url:h.published_by_user.img_url}]:n?[{name:n,img_url:r}]:[];return{imageUrl:h.signed_thumbnail_url,clientMeta:h.client_meta,thumbnailIsSet:!!h.has_custom_thumbnail,isWhiteboard:!0,name:l,description:m,publishers:e,primaryKey:a,duplicateLink:`${window.location.origin}/new/template/${h.file_key}`,viewSourceFileUrl:`/file/${h.file_key}`,libraryKey:h.library_key}}case c.n.TeamTemplateLg:{let e=h.publishedByUserNullable?[{name:h.publishedByUserNullable.handle,img_url:h.publishedByUserNullable.imgUrl}]:n?[{name:n,img_url:r}]:[];return{imageUrl:h.signedThumbnailUrl,clientMeta:h.checkpointClientMeta,thumbnailIsSet:h.hasCustomThumbnail,isWhiteboard:h.editorType===s._Y.WHITEBOARD,name:l,description:m,publishers:e,primaryKey:a,duplicateLink:`${window.location.origin}/new/template/${h.fileKey}`,viewSourceFileUrl:`/file/${h.fileKey}`,libraryKey:(0,o.l)(h.libraryKey)}}default:(0,i.xb)(_)}},[r,n])}},281294:(e,r,n)=>{n.d(r,{$3:()=>el,GT:()=>eP,Gc:()=>eF,Gg:()=>eU,I4:()=>ex,JI:()=>et,OL:()=>eC,Ww:()=>ep,ZG:()=>eT,ZW:()=>er,bD:()=>$,b_:()=>eL,dm:()=>ek,go:()=>ed,gp:()=>ew,kl:()=>en,lu:()=>eR,mu:()=>eI,oE:()=>eN,t:()=>eS,wI:()=>ec,yn:()=>eA,z$:()=>ei});var a=n(848318),i=n(301168),o=n(699098),s=n(430385),l=n(871043),c=n(938982),d=n(186606),u=n(320953),p=n(19180),m=n(382902),_=n(317720),h=n(390973),g=n(989232),f=n(613900),E=n(476254),y=n(615233),b=n(410725),v=n(841807),T=n(656329),I=n(998568),S=n(810503),A=n(107712),w=n(66699),C=n(967688),N=n(659717),L=n(731991),O=n(807949),R=n(353231),P=n(887836),D=n(461445),k=n(933658),M=n(911947),F=n(55116),x=n(677334),U=n(19242),B=n(200130),G=n(712231),V=n(365098),H=n(952468),z=n(65214),K=n(324543),W=n(948008),j=n(764964);function Y(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,S.x1)("Autosave",n,{message:r})}function $(){return 7776e6}async function q(e,r,n,a){let i=a.objectStore(z.Sp),o=await i.index(z.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function X(e,r,n,a){let i=await q(e,r,n,a);return i?.id}async function J(e,r,n){let a=e.objectStore(z.Sp),i=e.objectStore(z.jP),o=e.objectStore(z.DV),s=e.objectStore(z.w8),l=[];for(let e of n){let r=await a.index(z.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,p=new Map;for(let e of(await i.getAll((0,z.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots,c.id]);for(let e of(await s.getAll((0,z.iM)(c.id))))p.set(e.nodeID,e.buffer);let m=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await i.getAll((0,z.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,a=r.snapshots;if(e){let[i,o]=e;n=d.i6g.mergeMultiplayerMessages(i,r.changes,c.fileVersion),a={...o,...r.snapshots}}u.set(r.nodeID,[n,a,c.id]),i.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:a}).catch(e=>Y(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,z.iM)(e.id))))p.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>Y(e,"mergeAndClaimChanges: merge referenced nodes"));m=Math.max(m,e.lastUpdatedAt)}i.delete((0,z.iM)(e.id)).catch(e=>Y(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,z.iM)(e.id)).catch(e=>Y(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,z.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>Y(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>Y(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();a.delete(e.id).catch(e=>Y(e,"mergeAndClaimChanges: delete old session id"))}return await a.put({...c,sessionID:r,lastUpdatedAt:m}),(0,z.dU)(e),await e.done,(0,S.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:p,fileVersion:c.fileVersion}}async function Z(e,r){let n=(0,z.Zt)(e,r),a=[];return await M.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,z.Z4)();if(!e)return;let r=e.transaction(z.Sp),i=r.objectStore(z.Sp),o=await i.index(z.SW).openCursor(n);for(;o;)a.push(o.value),o=await o.continue();await r.done}),a.length>0&&(0,S.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),a}async function Q(e){return await M.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,j.mc)(e))),n=Date.now()-$(),a=e.filter((e,a)=>!r[a]&&e.lastUpdatedAt>n);return 0===a.length&&(0,S.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),a})}let ee=null;async function et(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,h.MR)(e).catch(()=>{});try{let r=await ed((0,z.cu)(e),e=>Date.now()-e.lastUpdatedAt<$());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,g.trackEvent)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,K.Lf)("Failed to garbage collect autosave changes",e)}(0,G.L_)()}ee||(ee=r()),await ee}async function er(e){let r={};for(let n of e){let e=await en(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function en(e){let r=await (0,z.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await ea(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,j.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.isLocalFileKey)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.isLocalFileKey)(e)&&a.has(e)).map(e=>{let r=a.get(e);return es(r,l,i.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function ea(e,r){let n=e.transaction([z.Sp,z.jP,z.JR]),a=Error("original async stack");n.done.catch(e=>{e.cause=a,(0,I.$D)(c.e.UNOWNED,e)});let i=n.objectStore(z.Sp),o=await i.index(z.SW).getAll((0,z.cu)(r)),s=[],l=n.objectStore(z.jP);for(let e of o)if(await l.count((0,z.iM)(e.id))>0){for(let r of(await l.getAll((0,z.iM)(e.id))))if(!((0,p.k)().suppress_unsaved_changes_ui&&(0,p.k)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,m=n.objectStore(z.JR),_=new Set;for(let e of(await m.getAll((0,z.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,z.iM)(r.id));(eh(e.fileKey,n)||e.hasChangedMetadata)&&_.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:_}}async function ei(e){let r=await en(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function eo(e){if((0,K.rQ)())return[];let r=await (0,z.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:a,newFilesWithChanges:i}=await ea(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=a.get(e);return r?es(r,s,i.has(r.fileKey)):null}).filter(l.Vq);return ev?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function es(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function el(e,r){if((0,K.rQ)())return;let n=async(e,n)=>{let a=n.objectStore(z.jP);return eh(r,await a.getAll((0,z.iM)(e.id)))};await ed((0,z.Zt)(e,r),n)}async function ec(e,r){await ed((0,z.cu)(e),e=>!r.includes(e.fileKey))}async function ed(e,r){let n=await (0,z.Z4)();if(!n)return[];let a=n.transaction([z.Sp,z.jP,z.DV,z.w8,z.JR],"readwrite"),i=Error("original async stack");a.done.catch(e=>{e.cause=i,(0,I.$D)(c.e.UNOWNED,e)});let s=a.objectStore(z.Sp),l=a.objectStore(z.jP),d=a.objectStore(z.DV),u=a.objectStore(z.w8),p=a.objectStore(z.JR),m=!1,_=await s.index(z.SW).getAll(e),h=[],g=[];for(let e of _)if(!(r&&await r(e,a))){let[r,n,a]=await Promise.all([l.count((0,z.iM)(e.id)),d.count((0,z.iM)(e.id)),u.count((0,z.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.isLocalFileKey)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:a,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,z.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,z.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,z.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete referenced nodes")),m=!0,(0,o.isLocalFileKey)(e.fileKey)&&h.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of h)0===await s.index(z.SW).count((0,z.Zt)(r,e))?await p.delete((0,z.Zt)(r,e)):(0,K.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,K.W6)("Found leftover node changes in IDB"),l.delete((0,z.BE)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,K.W6)("Found leftover images in IDB"),d.delete((0,z.IE)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,K.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,z.Ab)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,z.dU)(a),await a.done,m&&(0,W.HZ)(),g}async function eu(e,r){await r.objectStore(z.jP).count((0,z.iM)(e))===0&&await r.objectStore(z.DV).count((0,z.iM)(e))===0&&await r.objectStore(z.w8).count((0,z.iM)(e))===0&&r.objectStore(z.Sp).delete(e).catch(e=>Y(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function ep(e,r){let n=await (0,z.Z4)();if(!n)throw Error("Could not open autosave data");let a=n.transaction([z.Sp,z.jP,z.DV,z.w8]),i=a.objectStore(z.Sp),o=a.objectStore(z.jP),s={};for(let e of(await i.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await a.done,s}async function em(e){let{transaction:r,commitPolicy:n,userID:a,fileKey:i,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:p,pendingReferencedNodes:m,reason:_,isFirstCommitOfAutosaveSession:h}=e,g=r.objectStore(z.Sp),f=r.objectStore(z.jP),E=r.objectStore(z.DV),b=r.objectStore(z.w8),v=await q(a,i,c,r),T=0;v&&(T=(v.offlineEditingTime||0)+(h?0:Date.now()-v.lastUpdatedAt));let I=v?.id,S={userID:a,fileKey:i,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,y.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:_,offlineEditingTime:T,originalTrackingSessionId:(0,A.f)()};for(let e of(null==I?I=await g.add(S):(n===d.W2B.REPLACE_CHANGES&&(f.delete((0,z.iM)(I)).catch(e=>Y(e,"commitChanges: replace node changes")),b.delete((0,z.iM)(I)).catch(e=>Y(e,"commitChanges: replace referenced nodes"))),g.put({id:I,...S}).catch(e=>Y(e,"commitChanges: update session"))),u))e.changes?f.put({editorSessionID:I,nodeID:e.nodeID,changes:e.changes}).catch(e=>Y(e,"commitChanges: put node changes")):f.delete([I,e.nodeID]).catch(e=>Y(e,"commitChanges: clear node changes"));for(let e of p)if(await E.count([I,e])===0){let r=d.Bko.getCompressedImage(e);r&&E.add({editorSessionID:I,hash:e,blob:r}).catch(e=>Y(e,"commitChanges: add images"))}for(let e of m)b.add({editorSessionID:I,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>Y(e,"commitChanges: add referenced nodes"));let w=await f.count((0,z.iM)(I));return 0===w&&(await E.delete((0,z.iM)(I)),await b.delete((0,z.iM)(I))),await eu(I,r),(0,z.dU)(r),await r.done,(0,o.isLocalFileKey)(i)&&(0,W.HZ)(),w}async function e_(e,r,n){(0,S.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,z.DB)([z.Sp,z.JR],async a=>{let i=a.objectStore(z.Sp);(await i.index(z.SW).getAll((0,z.Zt)(e,r))).map(e=>{e.fileKey=n,i.put(e)}),a.objectStore(z.JR).delete((0,z.Zt)(e,r))},"readwrite"),(0,W.HZ)()}function eh(e,r){if(!(0,o.isLocalFileKey)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class eg{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class ef{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,K.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.isLocalFileKey)(r)?this._sessionsToRestore=Z(e,r):this._sessionsToRestore=Z(e,r).then(e=>Q(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.isLocalFileKey)(e)?e:null;m.zl.set(H.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,K.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},m.zl.set(H.h,null),await e?.destroy().catch(()=>K.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,S.xi)("Autosave","autosave disabled",{message:e}),r&&(0,K.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,g.trackEvent)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,K.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,z.Fy)()}catch(e){(0,S.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,g.trackEvent)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new v.M4;r.start();let n=await this._sessionsToRestore;(0,o.isLocalFileKey)(this.fileKey)&&(n.length>1?((0,K.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,K.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let a=await (0,j.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!a){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new eb(e,this,r,n,a)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.isLocalFileKey)(r))try{await (0,z.DB)([z.JR],async n=>{let a=n.objectStore(z.JR);if(await a.get((0,z.Zt)(this.userID,r)))return;let i={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,C.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await a.put(i)},"readwrite"),this.fileCreationManager&&(0,K.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new ey(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function eE(e,r,n){if((0,o.isLocalFileKey)(r)&&e)try{await (0,z.DB)([z.JR],async a=>{let i=a.objectStore(z.JR),o=await i.get((0,z.Zt)(e,r));o&&await i.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,W.HZ)()}catch(e){(0,I.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class ey{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,B.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,W.hp.sendToAllTabs(W.m6,{localFileKey:this.fileKey,realFileKey:e})}}class eb{constructor(e,r,n,a,i){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=a,this.webLock=i,this.transactionQueue=new V.O,this.commitEventListener=new eg,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.lastCommitTime=0,this.activityLogger=navigator.storage?.estimate?new G.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>Y(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,a){let i=(0,z.DB)(r,n,a);return i.catch(r=>{(0,g.trackEvent)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),i}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,K.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}getLastCommitTime(){return this.lastCommitTime}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:a,fileKey:i,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(i&&i!==this.manager.fileKey){(0,K.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":i}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,j.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,j.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let p=r.changedNodes.length,m=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),_=[];for(let e of r.referencedNodes)_.push({nodeID:e.nodeID,buffer:e.changes});let h=new Set;for(let e of r.imageHashes)h.add(e);let g=await this.sessionTransaction("commit",[z.Sp,z.jP,z.DV,z.w8],async e=>await em({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:a,oldSessionID:c,sessionID:this.sessionID,pendingChanges:m,pendingImages:h,pendingReferencedNodes:_,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0,this.lastCommitTime=Date.now();let f={stored_node_changes:g,unclean_registers:s,changed_nodes:p,cleared_nodes:r.clearedNodes.length,referenced_nodes:_.length,pending_images:h.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:i,manager_file_key:this.manager.fileKey};if((0,S.Lo)("Autosave","commit completed",f),(0,R.ds)("autosave_commit_completed",i,E.D.getState(),f),!this.reportedStorageError&&void 0!==s&&s!==g){if(g>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await ep(5,!0);(0,S.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else g>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):g<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>Y(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,w.YQ)({id:W.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.isLocalFileKey)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!T.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,K.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:a,quotaBytes:i}=await r;this.restoreAnalytics.storageUsageBytes=a,this.restoreAnalytics.storageQuotaBytes=i,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,R.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,E.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,j.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:a}=await this.sessionTransaction("restore",[z.Sp,z.jP,z.DV,z.w8],async r=>await J(r,this.sessionID,e),"readwrite"),i=r.size>0;for(let e of(i?((0,o.isLocalFileKey)(this.manager.fileKey)||await (0,U.m)(this.manager.fileKey,"Offline sync","Before syncing changes",E.D.dispatch).catch(e=>(0,K.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,S.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,a)):(0,S.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{W.hp.sendToOtherTabs(W.a)}).catch(e=>Y(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=i,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let a=Array.from(e.entries()).sort(([e,r],[n,a])=>e<n?-1:1),i=(0,p.k)().suppress_unsaved_changes_ui&&(0,p.k)().incremental_loading_validation&&a.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n)),s=[];for(let[e,[r,i,o]]of a){let{decodedAsEmptyMultiplayerMessage:a}=d.i6g.loadAutosavedNodeChanges(e,r,i,n);a&&s.push([e,o])}let l=Promise.resolve();if(s.length>0&&((0,S.xi)("Autosave","Deleting nodes without phase or property changes",{numNodes:s.length,guids:JSON.stringify(s.map(([e])=>e).slice(0,10))}),(0,g.trackEvent)("autosave delete empty changes",{numNodes:s.length,willDelete:(0,p.k)().ss_autosave_delete_empty_changes}),(0,p.k)().ss_autosave_delete_empty_changes&&(l=this.sessionTransaction("delete_empty_changes",[z.jP,z.DV,z.w8,z.Sp],async e=>{let r=e.objectStore(z.jP),n=new Set(s.map(([e,r])=>r));await Promise.all(s.map(([e,n])=>r.delete([n,e]).catch(e=>Y(e,"restoreChanges: delete empty node changes")))),await Promise.all(Array.from(n.values()).map(r=>eu(r,e)))},"readwrite"))),this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,D.Ff)()){(0,R.ds)("autosave_load_containing_pages_start",this.manager.fileKey,E.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,D.Xl)(n),(0,R.ds)("autosave_load_containing_pages_end",this.manager.fileKey,E.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let c=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(c);let m=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(m,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,S.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let _=()=>{E.D.dispatch(L.Q.enqueueFront({notification:{type:N._.AUTOSAVE_CHANGES_RESTORED,message:(0,C.t)("autosave.changes_synced")}})),(0,S.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};await l,(async()=>{await (0,k.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),(0,o.isLocalFileKey)(this.manager.fileKey)||await (0,U.m)(this.manager.fileKey,"Offline sync","After syncing changes",E.D.dispatch).catch(e=>{(0,R.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,E.D.getState(),{error:e.data?.message}),(0,K.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),this.manager.fileKey!==E.D.getState().openFile?.key||i||_()})()}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[z.Sp,z.DV],async n=>{let a=await this.currentEditorSessionID(n);if(!a)return;let i=n.objectStore(z.DV);for(let n of e){let e=await i.get([a,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,a]of e)d.i6g.restoreReferencedNodeFile(n,a),r.push(n);return r}currentEditorSessionID(e){return X(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,z.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([z.Sp,z.jP],"readonly"),n=r.objectStore(z.jP),a=await this.currentEditorSessionID(r);return a?await n.getAll((0,z.iM)(a)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return eh(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.isLocalFileKey)(n)){(0,K.W6)("Only local file keys can be reassigned");return}if((0,o.isLocalFileKey)(e)){(0,K.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let a=this.webLock,i=await (0,j.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!i){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=i,await e_(this.manager.userID,n,e),r(),await a?.release()})}}let ev=null;function eT(){return ev}function eI(e,r){if(ev){if(ev.fileKey===e)return(0,S.Lo)("Autosave","Autosave manager already exists"),ev;(0,K.W6)("Manager already exists. Updating file key",{"current fileKey":ev.fileKey,"new fileKey":e}),ev.terminateAndWaitForCleanup(),ev=null}return(0,S.ED)("Autosave","Create autosave manager",{fileKey:e}),ev=new ef(r,e)}function eS(){eA().catch(e=>Y(e,"failed to destroy autosave manager"))}async function eA(){if((0,S.ED)("Autosave","Destroy autosave manager"),!ev){(0,S.Lo)("Autosave","No manager to destroy");return}let e=ev;ev=null,await e.terminateAndWaitForCleanup()}function ew(e,{offlineFiles:r}){let n={};for(let a in e){let e=r[a];e&&(n[a]=e)}return n}let eC=x.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await eo(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eN=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eN||{});let eL=x.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:a,query:i,reduxStore:o})=>{if(a.set(eD,null),!r)return;let s=o.getState().user?.id??null;i.mutate(eC({userId:s}),n=>{let a=n[e];a&&(a.name=r)});let l=ev?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&E.D.dispatch(O.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,K.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,g.trackEvent)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),eE(s,e,r)}),eO=(0,m.eU)(e=>{let r=e(P.kS),n={};if(r){let a=e(eC({userId:r}));for(let[e,r]of Object.entries(a?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eR=(0,m.eU)(e=>{let r=e(H.h),n=e(P.kS);if(r&&n){let a=e(eC({userId:n})),i=a?.data??{};if(r in i)return i[r]}return null});function eP(){return m.zl.get(eR)}let eD=(0,m.eU)(null);function ek(e){m.zl.set(eD,e.fileKey)}let eM=(0,m.eU)({});function eF(e,r){let n=m.zl.get(eM);m.zl.set(eM,{...n,[e]:r})}function ex(e){let r=(0,i.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,f.l)(F.dDF,r?e:"");return r?n:_.Qw.loaded(!1)}function eU(){let e=(0,i.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,i.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,b.p)(F.dDF,a.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=a.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,i.d4)(e=>e.fileByKey);return a.useMemo(()=>({unsyncedFiles:(0,s.WI)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let a=l[e];return a&&!a.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:a}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,m.eU)(e=>{let r={...e(eO)},n=e(eD),a=e(eM),i={};for(let e in r)e in a||(i[e]=r[e]);if(n&&n in i){let e=i[n];i[n]={...e,isRenaming:!0}}return i})},926198:(e,r,n)=>{n.d(r,{X:()=>d});var a=n(297638),i=n(151223),o=n(853434),s=n(31898),l=n(7373),c=n(533085);let d=(0,i.nF)((e,{entity:r,entityType:n,shape:i})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=a.s.hidden.$,l.style.display="none",l.onchange=()=>{let a=l.files;null!==a&&a.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:a[0],shape:i||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,i.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},141131:(e,r,n)=>{n.d(r,{JJ:()=>b,YL:()=>A,bg:()=>I,iJ:()=>v,in:()=>y,mW:()=>T,xQ:()=>S});var a=n(848318),i=n(301168),o=n(938982);n(19180),n(317720),n(923386),n(190243);var s=n(918777);n(615233),n(410725);var l=n(329228),c=n(998568);n(640724),n(220576);var d=n(188279),u=n(318147),p=n(55116),m=n(834612);n(253332);var _=n(912534),h=n(872240),g=n(594950),f=n(501104);function E(e,r,n,a){let i=(e===d.Y$.CURRENT?d.Ln:d.SG)(r,f.N_,{renewalTerm:n,unit:a}),[s]=(0,l.mI)(i),u=s.data;if(!u)return(0,c.$D)(o.e.SCALE,Error("Plan renewal modal could not load price information"),{extra:{planKey:r,prices:u}}),{prices:null,localizeCurrency:null};let p=(0,d.Tc)(u);return{prices:u,localizeCurrency:new m.vr(p)}}let y=500;function b(e){return E(d.Y$.AT_NEXT_RENEWAL,e,_.IX.YEAR,_.IX.YEAR)}function v(e,r){return E(e,r,_.IX.YEAR,_.IX.MONTH)}function T(e,r){return E(e,r,_.IX.MONTH,_.IX.MONTH)}function I(e,r){return E(e,r,_.IX.MONTH,_.IX.YEAR)}function S(){let e=(0,i.d4)(e=>e.teamBilling),r=e.summary.monthly_subscription?.current_period_end;return(0,a.useMemo)(()=>r?(0,s.A)(r).toDate():null,[r])}function A(e,r){let n=function(e,r,n={enabled:!0}){let[i]=(0,l.IT)((0,p.JRW)({planParentId:e.parentId,planParentType:e.type===u.OL.ORG?u.iX.ORG:u.iX.TEAM,billingInterval:h.NW.YEAR}),{enabled:!!e.parentId&&n.enabled});return(0,a.useMemo)(()=>i.transform(e=>(function(e,r){if(!r)return null;let n=e.pendingConfirmedRenewalSeatCounts?.filter(e=>s.A(e.billingPeriodStart).add(1,"day").toDate()>r&&s.A(e.billingPeriodStart).subtract(1,"day").toDate()<r);if(!n||!n.length)return null;let a=f.N_.dict(e=>0),i=f.N_.dict(e=>0);return n.forEach(e=>{if(!e.billableProductKey||!(0,g.dA)(e.billableProductKey)){(0,c.$D)(o.e.BILLING_EXPERIENCE,Error(`Confirmed seat count with unexpected billable product key: ${e.billableProductKey}`));return}let r=e.billableProductKey;a[r]=parseInt(e.surplusSeatCount??"0"),i[r]=parseInt(e.totalSeatCount??"0")}),{surplus:a,total:i}})(e,r)),[r,i])}(e,r),[i]=(0,l.mI)(n);if("loaded"!==i.status){let e=Error("Error fetching next annual renewal confirmed seat counts");throw(0,c.$D)(o.e.SCALE,e),e}return i.data}},716054:(e,r,n)=>{n.d(r,{i:()=>u});var a=n(848318),i=n(297638),o=n(925085),s=n(418534),l=n(859172),c=n(939235);function d({licenseType:e,colorStyle:r,spacing:n}){return a.createElement(o.Y,{direction:"horizontal",spacing:n},a.createElement(s.j,{type:e,size:"16",colorStyle:r}),a.createElement("div",{className:i.s.textBodyMedium.$},(0,c.o)(e)))}function u(e){let r=(0,l.HD)(e.seatType,{visibility:l.YT.SEAT_DESCRIPTION});return a.createElement(a.Fragment,null,r.map(r=>a.createElement(d,{key:r,licenseType:r,colorStyle:e.colorStyle,spacing:e.spacing})))}},859172:(e,r,n)=>{n.d(r,{AG:()=>C,Gj:()=>S,HD:()=>L,Hl:()=>O,JR:()=>x,SS:()=>M,TA:()=>D,Uw:()=>F,YT:()=>N,Zx:()=>v,_w:()=>k,f2:()=>P});var a=n(848318),i=n(430385),o=n(907031),s=n(938982);n(755595);var l=n(998568),c=n(1800),d=n(967688),u=n(318147),p=n(138528),m=n(173847),_=n(254028),h=n(594950),g=n(501104),f=n(939235),E=n(578590),y=n(559372);let b={design:h.ud.DESIGN,whiteboard:h.ud.FIGJAM,figjam:h.ud.FIGJAM,dev_mode:h.ud.DEV_MODE,slides:h.ud.SLIDES,collaborator:h.ud.COLLABORATOR,developer:h.ud.DEVELOPER,expert:h.ud.EXPERT,content:h.ud.CONTENT,view:h.Gu.VIEW};function v(e){return b[e]??e}(0,c.x)()(b);let T={design:u.ud.DESIGN,whiteboard:u.ud.WHITEBOARD,figjam:u.ud.WHITEBOARD,dev_mode:u.ud.DEV_MODE,slides:u.ud.SLIDES,collaborator:u.ud.COLLABORATOR,developer:u.ud.DEVELOPER,expert:u.ud.EXPERT,content:u.ud.CONTENT};(0,c.x)()(T);let I={design:u.G_.DESIGN,whiteboard:u.G_.WHITEBOARD,figjam:u.G_.WHITEBOARD,dev_mode:u.G_.DEV_MODE,slides:u.G_.SLIDES,sites:u.G_.SITES,figmake:u.G_.FIGMAKE,cooper:u.G_.COOPER};function S(e){return I[e]??e}(0,c.x)()(I);let A={design:m.j4.DESIGN,whiteboard:m.j4.WHITEBOARD,figjam:m.j4.WHITEBOARD};(0,c.x)()(A);let w={[h.ud.DESIGN]:10,[h.ud.DEV_MODE]:20,[h.ud.FIGJAM]:30,[h.ud.SLIDES]:40,[h.ud.EXPERT]:50,[h.ud.DEVELOPER]:60,[h.ud.CONTENT]:70,[h.ud.COLLABORATOR]:80,[h.Gu.VIEW]:90};function C(e,r){return w[e]-w[r]}var N=(e=>(e.SEAT_DESCRIPTION="seat_description",e.ALL="all",e))(N||{});function L(e,r){let n=O(r);return(0,a.useMemo)(()=>n(e),[n,e])}function O(e){let r=function(e){let r=e.visibility??"seat_description",n=(0,p.X$)("useSeatTypeLicenseTypesMap").unwrapOr(null),s=(e.overridePlanTier?(0,o.K)(u.Ag,e.overridePlanTier):void 0)||n?.tier,l=(0,a.useMemo)(()=>({[h.ud.EXPERT]:(0,i.WI)([u.G_.DESIGN,u.G_.DEV_MODE,u.G_.WHITEBOARD,u.G_.SLIDES,u.G_.SITES,(0,_.aI)()?u.G_.FIGMAKE:void 0]),[h.ud.DEVELOPER]:(0,i.WI)([u.G_.DEV_MODE,u.G_.WHITEBOARD,u.G_.SLIDES]),[h.ud.COLLABORATOR]:(0,i.WI)([u.G_.WHITEBOARD,u.G_.SLIDES]),[h.ud.CONTENT]:(0,i.WI)([u.G_.COOPER,u.G_.WHITEBOARD,u.G_.SLIDES,u.G_.SITES])}),[]);return(0,a.useMemo)(()=>g.N_.dict(e=>{let n=l[e];return"seat_description"===r&&(n=n.filter(e=>(0,y.x3)(e,s))),n}),[r,l,s])}(e);return(0,a.useCallback)(e=>r[e]?.sort(E.Hn)||[],[r])}let R=g.N_.dict();function P(e){return R[e]}function D(e){if(!e)return null;let r=R[v(e.key)];return r?{key:r,license_types:e.licenseTypes}:((0,l.$D)(s.e.BILLING_EXPERIENCE,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}function k(e){let{listFormatType:r,overridePlanTier:n}=e??{},i=O({overridePlanTier:n,visibility:"seat_description"});return(0,a.useCallback)(e=>e===h.Gu.VIEW?(0,d.t)("modify_plan_user_seat_modal.products_for_seat.view"):(0,f.a)(i(e),r),[r,i])}function M(e,r){let n=k(r);return(0,a.useMemo)(()=>n(e),[e,n])}function F(e,r){switch((0,y.F2)(e)){case h.ud.EXPERT:return{header:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_header.full_seat"),body:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_body.full_seat",{planName:r})};case h.ud.DEVELOPER:return{header:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_header.dev_seat"),body:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_body.dev_seat",{planName:r})};case h.ud.COLLABORATOR:return{header:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_header.collab_seat"),body:(0,d.tx)("upgrades.drafts_move.admin_self_upgrade_body.collab_seat",{planName:r})};default:return null}}function x(e,r){let n=(0,y.F2)((0,E.wR)(r));return!n||!(0,h.B6)(n,e)}},694930:(e,r,n)=>{n.d(r,{d:()=>u,h:()=>d});var a=n(317720),i=n(329228),o=n(998568),s=n(318147),l=n(55116),c=n(138528);function d({planType:e,planParentId:r}){let[n]=(0,i.IT)((0,l.zqW)({orgId:r}),{enabled:e===s.OL.ORG&&!!r}),{status:o,errors:c,suspense:d,data:u}=n;switch(o){case"loading":return a.Qw.loadingSuspendable(d);case"loaded":return a.Qw.loadedSuspendable(u?.org?.activeOrgBillingPeriod?.isEla??!1,c,d);case"disabled":return a.Qw.loadedSuspendable(!1,[],d);case"errors":return a.Qw.errorSuspendable(c,d)}}function u({reportErrorsToTeam:e}){let r=(0,c.XP)({reportErrorsToTeam:e}),n=d({planType:r.type,planParentId:r.key.parentId}),[a]=(0,i.mI)(n);if("loaded"!==a.status){let r=Error("Error fetching isELA info");throw(0,o.$D)(e,r),r}return a.data}},578590:(e,r,n)=>{n.d(r,{DK:()=>l,Hn:()=>m,_R:()=>u,vc:()=>c,wR:()=>d});var a=n(660376),i=n(755595),o=n(318147);let s={DESIGN:o.G_.DESIGN,WHITEBOARD:o.G_.WHITEBOARD,DEV_MODE:o.G_.DEV_MODE};i.z.nativeEnum(s);let l=i.z.union([i.z.nativeEnum(o.G_),i.z.literal("figjam")]);function c(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case o._Y.FIGMAKE:case null:return s.DESIGN;case o._Y.WHITEBOARD:return s.WHITEBOARD;default:(0,a.xb)(e)}}function d(e){return function(e){switch(e){case o._Y.DESIGN:return o.G_.DESIGN;case o._Y.WHITEBOARD:return o.G_.WHITEBOARD;case o._Y.SLIDES:return o.G_.SLIDES;case o._Y.SITES:return o.G_.SITES;case o._Y.FIGMAKE:return o.G_.FIGMAKE;case o._Y.COOPER:return o.G_.COOPER;case null:return null;default:(0,a.xb)(e)}}(e)??o.G_.DESIGN}function u(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}let p={[o.G_.DESIGN]:10,[o.G_.SITES]:20,[o.G_.FIGMAKE]:30,[o.G_.DEV_MODE]:40,[o.G_.WHITEBOARD]:50,[o.G_.SLIDES]:60,[o.G_.COOPER]:70};function m(e,r){return p[e]-p[r]}},612225:(e,r,n)=>{n.d(r,{ar:()=>T,qH:()=>g}),n(938982);var a=n(755595);n(241899),n(918777),n(998568),n(461979),n(967688);var i=n(318147),o=n(882695),s=n(872240),l=n(594950),c=(e=>(e.ACH_DEBIT="ach_debit",e.CARD="card",e.SEPA_DEBIT="sepa_debit",e.UNKNOWN="unknown",e))(c||{}),d=(e=>(e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.EFTPOS_AU="eftpos_au",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa",e.UNKNOWN="unknown",e))(d||{});let u=a.z.object({type:a.z.literal("ach_debit"),last4:a.z.string().nullable()}),p=a.z.object({type:a.z.literal("card"),brand:a.z.nativeEnum(d).nullable(),last4:a.z.string().nullable()}),m=a.z.object({type:a.z.literal("sepa_debit"),last4:a.z.string().nullable()}),_=a.z.object({type:a.z.literal("unknown"),stripe_type:a.z.string()}),h=a.z.union([u,p,m,_]);var g=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e))(g||{}),f=(e=>(e.MANUAL="manual",e.SUBSCRIPTION_CREATED="subscription_created",e.SUBSCRIPTION_RENEWED="subscription_renewed",e.CATCH_UP="catch_up",e.TRUE_UP="true_up",e))(f||{}),E=(e=>(e.OPEN="open",e.PAID="paid",e.CANCELED="canceled",e))(E||{});let y=a.z.object({status:a.z.nativeEnum(E),payment_method:h.nullable()});var b=(e=>(e.LEGACY="legacy",e.PRORATED="prorated",e))(b||{});let v=(0,l.g7)(a.z.object({net_quantity:a.z.number(),amount:a.z.number(),seats_quantity:a.z.number(),seats_amount:a.z.number(),adjustments_quantity:a.z.number(),adjustments_amount:a.z.number(),charges_quantity:a.z.number(),charges_amount:a.z.number(),credits_quantity:a.z.number(),credits_amount:a.z.number()})),T=a.z.object({id:a.z.string(),issued_at:a.z.string(),paid_at:a.z.string().nullable(),period_starts_at:a.z.string(),period_ends_at:a.z.string(),past_due_at:a.z.string(),plan_parent_type:a.z.nativeEnum(i.OL),billing_interval:a.z.nativeEnum(s.NW),total:a.z.number(),state:a.z.nativeEnum(g),subtype:a.z.nativeEnum(f),currency:o.D,hosted_invoice_url:a.z.string().nullable(),invoice_pdf_url:a.z.string().nullable(),number:a.z.string().nullable(),total_tax_amount:a.z.number(),subtotal:a.z.number(),payments:y.array(),billing_mechanics:a.z.nativeEnum(b),billable_products_kind:a.z.nativeEnum(i.FE),org_invoice_details:a.z.object({is_locked:a.z.boolean().nullable(),is_skipped_trueup:a.z.boolean().nullable(),seat_floors:(0,l.g7)(a.z.number().nullable()).nullable(),billable_seats_now:(0,l.g7)(a.z.number().nullable()).nullable()}).nullish(),is_empty:a.z.boolean(),invalid_amounts_or_quantities:a.z.boolean().optional(),seats_breakdown:v});var I=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e.OVERDUE="overdue",e))(I||{}),S=(e=>(e.REVIEW="review",e.LOCKED="locked",e))(S||{})},744525:(e,r,n)=>{n.d(r,{c:()=>l,y:()=>s});var a=n(709884),i=n(912534);class o extends Error{}function s(e,r){if(0===e.product_prices.length)throw new o("Product price list is empty");let{tier:n,currency:a,renewalTerm:s,unit:l,billableProductKey:c}=r,d=l;n===i.Ju.PRO&&s===i.IX.YEAR&&d===i.IX.MONTH&&(d=i.IX.YEAR),n===i.Ju.PRO&&s===i.IX.MONTH&&d===i.IX.YEAR&&(d=i.IX.MONTH),(n===i.Ju.ORG||n===i.Ju.ENTERPRISE)&&s===i.IX.YEAR&&d===i.IX.YEAR&&(d=i.IX.MONTH);let u=e.product_prices.filter(e=>e.tier===n&&e.currency===a&&e.renewal_term===s&&e.unit===d&&e.billable_product_key===c);if(1===u.length){if(d===i.IX.YEAR&&l===i.IX.MONTH){let e=u[0].amount/12;return{...u[0],unit:l,amount:e}}if(d===i.IX.MONTH&&l===i.IX.YEAR){let e=12*u[0].amount;return{...u[0],unit:l,amount:e}}return u[0]}if(u.length>1)throw new o(`Multiple product prices available for: ${JSON.stringify(r)}`);throw new o(`No product price available for: ${JSON.stringify(r)})`)}let l={[a.OL.TEAM]:[i.IX.MONTH,i.IX.YEAR],[a.OL.ORG]:[i.IX.YEAR]}},84904:(e,r,n)=>{n.d(r,{O:()=>o});var a=n(967688),i=n(594950);function o(e){switch(e){case i.ud.EXPERT:return(0,a.t)("billing_modals.billing_remodel_edu.full_seat");case i.ud.DEVELOPER:return(0,a.t)("billing_modals.billing_remodel_edu.dev_seat");case i.ud.COLLABORATOR:return(0,a.t)("billing_modals.billing_remodel_edu.collab_seat");case i.ud.CONTENT:return(0,a.t)("billing_modals.billing_remodel_edu.content_seat");case i.Gu.VIEW:return(0,a.t)("billing_modals.billing_remodel_edu.view_seat");default:return""}}},126527:(e,r,n)=>{n.d(r,{p:()=>i}),n(329228),n(188279),n(912534);var a=n(872240);function i(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===a.tn.CONFIRM_PAY&&r.promo}n(594950),n(501104)},353379:(e,r,n)=>{n.d(r,{jL:()=>h}),n(848318);var a=n(382902),i=n(239910),o=n.n(i),s=n(621464);n(967688);var l=n(612225),c=n(677334);n(651108);var d=n(535306);let u=(0,a.eU)({});function p(e){let r=o()(e,e=>e.id);a.zl.set(u,e=>({...e,...r}))}let m=c.M4.Query({fetch:async e=>{let r=(await d.V.getPlanInvoices(e)).data.meta.invoices;return p(r),r}}),_=c.M4.Query({fetch:async({planType:e,planId:r})=>{let n=(await d.V.getUpcomingPlanInvoices({planType:e,planId:r})).data.meta.invoices;return p(n),n}});async function h(e){try{let r=await c.M4.fetch(_(e),{policy:"networkOnly"}),n=c.M4.getMutation(g);await n({queryArgs:e,upcomingPlanInvoices:r})}catch(e){s.k.error(e)}}let g=c.M4.Mutation((e,{query:r})=>{r.mutate(m(e.queryArgs),r=>[...e.upcomingPlanInvoices,...r.filter(({state:e})=>e!==l.qH.PENDING)])});c.M4.Query({fetch:async({planType:e,planId:r})=>{let n=(await d.V.getOpenPlanInvoices({planType:e,planId:r})).data.meta.invoices;return p(n),n},enabled:e=>!!e})},412865:(e,r,n)=>{n.d(r,{CR:()=>L,F$:()=>U,GV:()=>b,JG:()=>A,PK:()=>y,Zz:()=>B,eR:()=>w,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>C,rN:()=>v,ro:()=>D,t$:()=>I,us:()=>x,vl:()=>k,wB:()=>f});var a=n(660376),i=n(19180),o=n(418193),s=n(484169),l=n(410441),c=n(748008),d=n(454805),u=n(691784),p=n(696786),m=n(601167),_=n(302982),h=n(119017),g=n(27776);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:_.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function v(e,r){return!r||(0,d.gR)(r,e)}function T(e){return(0,l.jz)(e?g.NJv:g.QP5)}function I(){return T((0,p.GS)())}function S(){var e;return e=(0,p.GS)(),(0,l.jz)(e?g.oGx:g.RdL)}function A(e,r,n){let{messageMeta:a,attachments:i,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:_.hm,key:_.hm,uuid:_.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===_.hm,comments:[],messageMeta:a,attachments:Object.values(i),pageName:null,isCanvasMention:!1,sidebarItemType:_.kT.COMMENT_THREAD}}function w(e){return e===_.hm}let C=(0,o.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?C(e.children):void 0})),N=(0,o.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),L=(0,o.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),O=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,a,o,l,d,u){if("loaded"!==r.status)return r;let p=r.data.file;if(!p)return(0,c.gB)([]);let m=p?.comments.filter(e=>!e.parentId),h=p.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=p.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(m.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=m.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,c=a[r.id]||r.uuid&&a[r.uuid],m=null;if(c&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;m={x:c.x-e,y:c.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=h[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],v=p.currentUserCommentReadStatus||P,T=b.map(n=>{let a=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,a,o,l,c){let d=O(n,a,e),u=(0,s.L4)(n.id),p=n.messageMeta;n.messageMetaStylized?.length&&(p=n.messageMetaStylized);let m=(0,i.k)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,_=(0,i.k)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:C(p),attachments:c,client_meta:n.clientMeta?N(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:m,isPendingFromLg:_,user:L(n.user)}}(e,r,n,v,d,u,a)}),I=(0,s.L4)(r.id),S=(0,i.k)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,A=(0,i.k)().comments_faster_saving_ux_v2?I||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!c,canvasPosition:c,selectionAnchorCanvasPosition:m,page:E,pageName:E&&l[E]||null,isActive:n===r.id,isPendingFromSinatra:I,isSaving:S,isPendingFromLg:A,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:_.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,c.gB)(E)}function k(e,r,n,i){let{canvasPosition:o}=r,s=o&&e?(0,m.Z0)(e,o):null,l=function(e,r,n,i,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case _.kT.COMMENT_THREAD:case _.kT.LITMUS_COMMENT_THREAD:return h.XC;case _.kT.FEED_POST:return h.b1;default:(0,a.xb)(e)}})(i).getPinSize(n).width,c=l+E.x+T(o)+25;return e.width-r.x-(s??0)<c?{x:-1*T(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,i),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let M=(e,r,n)=>{let a=e.id;if(r.unreadCanvasMentions[a])return!0;if(r.readCanvasMentions[a])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let a=r.data.file;if(!a)return(0,c.gB)([]);let i=a.fileCanvasMentions,o=a.currentUserFileCanvasMentionReadStatus||u.ih,s=i.map(r=>(function(e,r,n,a){let i=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=M(r,n,e);return{id:i,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,c.oA)(r.pageId,null),pageName:null,isActive:a===i,isPendingFromSinatra:void 0,comments:[{id:i,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:C(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:L(r.mentionedByUser)}],messageMeta:C(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:_.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,c.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:_.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let a=e.message_meta[n];a.hasOwnProperty("user_id")&&r.push(a.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},339542:(e,r,n)=>{n.d(r,{Hu:()=>A,Kq:()=>L,W9:()=>C,gu:()=>N,kx:()=>w});var a=n(848318),i=n(301168),o=n(186606),s=n(553547);n(195124);var l=n(768618),c=n(19180),d=n(223926),u=n.n(d),p=n(989232),m=n(454805),_=n(847461);n(852314),n(262179),n(303397),n(137999);var h=n(355755),g=n(563741),f=n(546021),E=n(412865),y=n(757623),b=n(46641),v=n(531288),T=n(274468);(0,c.k)().comments_new_observer;let I=(e,r)=>({anchorPositionById:r(a.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),a=new Set,i=r.comments.filter(e=>null===e.parentId);for(let e of i)if(e.clientMeta){let{x:r,y:i,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:i},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&a.add(o)}return{commentNodeInfoById:n,commentNodeIds:a,commentThreads:i}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function A(e,r){let n=a.useMemo(()=>u()(e,e=>e.clientMeta?.nodeId),[e]),s=a.useMemo(()=>Object.keys(n),[n]),l=a.useRef({}),c=(0,i.wA)(),d=(0,b.g)(),p=a.useCallback(e=>{let{nodeId:r,position:a,eventOrigins:i}=e,o=l.current[r],s=i.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===a){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=m.Mi.add(o.position,n);(r.x!==a.x||r.y!==a.y)&&c(_.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else a&&a.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=m.Mi.add(a,n);c(_.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:a.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);a.useEffect(()=>{if(r.enabled&&o.glU&&d){let{currentNodePosition:e}=(0,v.EE)(S,s,p);l.current=e}return()=>{o.glU&&d&&(0,v.lB)(S)}},[s,p,r.enabled,d])}function w(e){return a.useCallback(r=>r.reduce((r,n)=>{let a=e?.pageIdForNodeId(n)||null;return a&&l.UN().get(a)?.isInternalOnlyNode&&(a=null),r[n]=a,r},{}),[e])}function C(e,r,n,o,s,l){let c=I(r,o),d=(0,i.d4)(e=>e.comments.savingCommentUuids),u=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);a.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,p.trackEvent)("Livegraph Comments Errors",{errors:e})}},[r]),(0,T.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let m=a.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),_=a.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,m,d,u),[e,r,n,c.anchorPositionById,s,m,d,u]);return(0,y.E)("loaded"===_.status&&_.data||[]),_}function N(e,r,n){return a.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,p.trackEvent)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),a.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function L(e){let r;let n=(0,g.s)(),a=(0,h.eY)();if(!(0,f.Qf)(a))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!a.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let i=(0,l.UN)().get(r);if(!i)return!0;return i.containingSlideId===s.AD;default:return!1}}},913026:(e,r,n)=>{n.d(r,{CR:()=>C,CW:()=>O,Cj:()=>et,D:()=>H,EL:()=>S,Gq:()=>x,HE:()=>k,HN:()=>z,HR:()=>Y,Hc:()=>E,IZ:()=>j,Lg:()=>P,T9:()=>X,UP:()=>Z,Uc:()=>M,V4:()=>N,Wi:()=>V,Yp:()=>y,ax:()=>f,b:()=>D,cV:()=>er,cs:()=>$,d9:()=>Q,eL:()=>G,gS:()=>w,jI:()=>B,kc:()=>q,n:()=>ea,nR:()=>ei,oH:()=>b,ou:()=>T,pH:()=>U,qA:()=>en,sD:()=>J,uS:()=>L,vr:()=>v,x1:()=>W,yO:()=>F,z7:()=>R,zU:()=>ee,zp:()=>A});var a=n(301168);n(354427);var i=n(418193),o=n(989232),s=n(967688),l=n(495084),c=n(660948),d=n(103873);n(125761);var u=n(318147),p=n(407638);n(477548);var m=n(324747),_=n(259964),h=n(553709);n(376132);var g=n(475166);function f(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function E(e,r,n){return e&&r&&r[e]||n}function y(e){return e&&e.trim()||""}function b(e){return e&&e.status||{code:h.aP.EDIT}}function v(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function T(e,r){if(!("user"in r))return!1;let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,p.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,p.canAdminOrg)(n.org_id,r)}let I=(0,i.xx)((e,r,n,a)=>{let i=null;if(e&&r[e]){let o=r[e];i={isAdmin:(0,p.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:a,fileByKey:{}}),id:o.id,name:o.name}}return i});function S(e){return I(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function A(){let e=(0,a.d4)(e=>e.currentUserOrgId);return I(e,(0,a.d4)(e=>"orgById"in e?e.orgById:{}),(0,a.d4)(e=>e.user),(0,a.d4)(e=>"orgUsersByOrgId"in e?e.orgUsersByOrgId:{}))}let w=(0,i.xx)((e,r,n)=>{let a;let i=r.plugins.fetchedResources;switch(e){case _.nT.Design:a=g.$A.Design;break;case _.nT.DevHandoff:a=g.$A.Handoff;break;case _.nT.Slides:a=g.$A.Slides;break;case _.nT.Cooper:a=g.$A.Cooper;break;default:a=g.$A.FigJam}let o=[];for(let e of r.plugins[a]){let r=i[e.id];if(r&&r.version){o.push(r.version);continue}let a=n[e.id];a&&o.push(a)}return o});function C(e){return w(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function N(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function L(e){return(0,s.Yd)(e.i18n_meta?.text,e.text)}function O(e){return e.replace(/[\s_-]+/g," ").trim().toLocaleLowerCase()}function R(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}function P(e){return e.length>z?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let D={name:"",description:"",tags:[],categoryId:null,creatorPolicy:"",viewerMode:u.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:d.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},k=["Tab","Enter",","],M=5242880,F=0xf00000,x=0x6400000,U=100,B=5,G=5,V=10,H=60,z=100;function K(e){return"is_widget"in e&&e.is_widget?m.vt.WIDGET:"current_plugin_version_id"in e?m.vt.PLUGIN:m.vt.HUB_FILE}function W(e){return"profile_handle"in e?m.Ug.PROFILE:K(e)===m.vt.HUB_FILE?m.Ug.HUB_FILE:K(e)===m.vt.WIDGET?m.Ug.WIDGET:m.Ug.PLUGIN}function j(e){return e>=V-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:V}):null}function Y(e){let r={},n={},a=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:a}}let $=l.c;function q(){return(0,a.d4)(e=>e.authedActiveCommunityProfile)}function X({authedProfilesById:e,profileId:r,userId:n,orgId:a,teamId:i}){return r?e[r]:a?Object.values(e).find(e=>e.org_id===a)||null:i?Object.values(e).find(e=>e.team_id===i)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function J(e,r){return e&&Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function Z(){return(0,a.d4)(e=>Q(e.selectedView))}function Q(e){return"communityHub"===e.view||ee(e)||!1}function ee(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function et(e){return"communityHub"===e.view&&"handle"===e.subView}function er(e){return e.community_publishers?.accepted.find(e=>$(e))||null}function en(e,r){let n=er(r);if(n)return e.authedProfilesById[n.id]||null;let a=e.user&&J(e.user,e.authedProfilesById);return a&&r.community_publishers?.accepted.find(e=>e.id===a.id)?a:null}function ea(e){switch(e){case m.bD.PLUGIN:return"plugins";case m.bD.WIDGET:return"widgets";case m.bD.COMMENT:return"comments";case m.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function ei(e,r){(0,o.trackEvent)(c.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},486266:(e,r,n)=>{n.d(r,{D:()=>l,VH:()=>s});var a=n(461979),i=n(967688),o=n(913026);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,i.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,a.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},391720:(e,r,n)=>{n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var a=n(304756),i=n(809543);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await a.Ay.post(`/api/${(0,i.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},628362:(e,r,n)=>{n(318147),n(403014);var a=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(a||{})},162934:(e,r,n)=>{n.d(r,{$W:()=>eb,$x:()=>eo,Ac:()=>eT,CW:()=>er,Dd:()=>x,En:()=>U,Gf:()=>eS,Gp:()=>es,Ii:()=>J,JJ:()=>$,Kg:()=>eu,M0:()=>eI,MO:()=>z,N8:()=>el,Q4:()=>k,R1:()=>e_,Rd:()=>ep,Rv:()=>j,T$:()=>B,Tn:()=>G,UU:()=>X,Wl:()=>en,Z2:()=>eh,Z7:()=>K,f7:()=>H,gO:()=>F,j4:()=>Z,jr:()=>W,kN:()=>Q,l8:()=>ea,mH:()=>et,mN:()=>Y,nK:()=>ef,o1:()=>ee,oB:()=>M,of:()=>q,vC:()=>ec,xw:()=>ey});var a=n(301168),i=n(936733),o=n(818995),s=n(938982),l=n(19180),c=n(592460),d=n(200576),u=n(476254),p=n(625358),m=n(998568),_=n(304756),h=n(967688),g=n(210853),f=n(502310),E=n(823898);n(652021);var y=n(570311),b=n(913026);n(162299);var v=n(407638),T=n(324747),I=n(553709),S=n(163699),A=n(764474),w=n(871991),C=n(392165),N=n(229511),L=n(175528);n(628362),n(677334);var O=n(281942),R=n(403014),P=n(30371),D=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(D||{});let k=e=>!0===e.is_public||null!=e.org;function M(e,r,n,a){return(0,T.m3)(e)||a?A.Lu.PUBLIC:k(e.roles)?e.roles.is_public||(0,E.AC)(e)?A.Lu.PUBLIC:A.Lu.ORG:null!=r&&n?A.Lu.ORG:A.Lu.PUBLIC}function F(e,r,n,a){let i=j(r.team_id,n,e,r.parent_org_id||null);if(0===i.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return V(e,i,n.authedProfilesById,n.user?.id,a)}function x(e,r){return e.creator.id===r}function U(e,r){if(e){let n=q(r,e);if(n)return n}let n=X(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return V(e,n,r.authedProfilesById,r.user?.id)}function B(e,r,n){return e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let a=(0,b.cV)(e),i=a&&r[a.id];return i?.team_id?{team_id:i.team_id}:i?.org_id?{org_id:i.org_id}:{user_id:n||e.creator.id}}let a=r[e.publisher.id];return a?.org_id?{org_id:a.org_id}:a?.team_id?{team_id:a.team_id}:{user_id:a?.primary_user_id||e.creator.id}}(e,r,n):null}function G(e){let r;return e?.team_id?r={team_id:e.team_id}:e?.org_id&&(r={org_id:e.org_id}),r}function V(e,r,n,i,o){if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=B(e,n,i);if(s&&r.some(e=>H(e,s)))return s;if(o&&r.find(e=>(0,a.bN)(e,o)))return o;let l=r.find(W);if(l)return l;let c=r.find(z);return c?c:r.find(K)||r[0]}function H(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let z=e=>"org_id"in e,K=e=>"team_id"in e,W=e=>"user_id"in e;function j(e,r,n,a){let i=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!a)return[{user_id:r.user.id}];let i=n&&(0,b.cV)(n),o=i?r.authedProfilesById[i.id]:null;if(o?.team_id)return(0,v.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,v.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,v.canAdminOrg)(r.currentUserOrgId,r)&&(i.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&i.push({user_id:r.user.id})),e&&r.teams[e]){if(r.teams[e]?.org_access==="secret")return[];((0,P.Bg)(n.shared_org_license_group_settings)?(0,v.canAdminOrg)(r.currentUserOrgId,r):(0,v.hasAdminRoleAccessOnTeam)(e,r))&&i.push({team_id:e})}return i}return e?((0,v.hasAdminRoleAccessOnTeam)(e,r)&&i.push({team_id:e}),i.push({user_id:r.user.id}),i):[{user_id:r.user.id}]}async function Y(e){let{data:r,status:n}=await N.s.getEditors({fileKey:e.key});if(200===n)return r.meta}function $(e,r,n,a){let i;if(!r)return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.you_do_not_have_edit_permissions"):(0,h.t)("general.error");if("is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default")return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_default_files"):(0,h.t)("general.error");if(e.has_file_link_password||e.hasFileLinkPassword)return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_password_protected_files"):(0,h.t)("general.error");if(i="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null,0===j("team_id"in e?e.team_id:e.teamId,n,a,i||null).length)return(0,h.t)("community.permissions_modal_publish_tab.footer.publish_admins_only");let o=!!n.figFileDuplicatedFromHubFile[e.key],s=!a;return o&&s?(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.remixes_unavailable_until_first_publish"):(0,h.t)("general.error"):null}function q(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case I.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case I.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function X(e,r,n=!0){let a=[],i=n&&r?q(e,r):null;return e.currentUserOrgId&&(0,v.canAdminOrg)(e.currentUserOrgId,e)&&a.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,v.hasAdminRoleAccessOnTeam)(r,e)&&a.push({team_id:r})}),a.push({user_id:e.user.id}),i&&!a.some(e=>H(e,i))&&a.unshift(i),a}function J(e,r){if(!e)return!1;let{team_id:n,org_id:a}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&a===r.org_id}function Z(e){let r=u.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function Q(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,b.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function ee(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,h.t)("community.publishing.org_name",{org:n.name}):(0,h.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,h.t)("community.publishing.team_name",{team:n.name}):(0,h.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,b.sD)(n,r.authedProfilesById);return a?a.name:n?.name||(0,h.t)("general.fallback_user_name")}}function et(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,a=(0,b.sD)(n,r.authedProfilesById);return a?a.profile_handle:n?.handle||null}}let er=[S.yj.PNG,S.yj.JPEG];function en(e,r="Image"){if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));let n=(0,f.S)(e.type,S.yj);if(!n||!er.includes(n))throw Error((0,h.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>b.Uc)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(b.Uc/1e6)}));return e.size}function ea(e){return new Promise((r,n)=>{let a=new Image;a.onload=()=>r(a),a.onerror=n,a.src=e})}let ei=new Set;async function eo(e,r){if(null===e.files||!e.files[0])throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&ef(r);let n=e.files[0];en(n,(0,h.t)("community.publishing.thumbnail_image"));let[a,i]=await Promise.all([ea(URL.createObjectURL(n)),(0,L.c)(n)]);return ei.add(a.src),{url:a.src,buffer:new Uint8Array(i)}}async function es(e,r,n=y.en){let a=[];for(let i of Array.from(e).slice(0,n))if(r&&i.type.startsWith("video/")){!function(e){let r=e.name;if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!S.VY.includes(e.type))throw Error((0,h.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>b.Gq)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(b.Gq/1e6)}))}(i);let e=URL.createObjectURL(i),[r,n]=await Promise.all([eE(i),(0,O.j)(e),ed(e,i.name)]),s=URL.createObjectURL(new Blob([n]));ei.add(e),ei.add(s),a.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:s,thumbnail_buffer:n,thumbnail_sha1:(0,o.Et)(n)})}else{en(i,(0,h.t)("community.publishing.carousel_media_image"));let[e,r]=await Promise.all([ea(URL.createObjectURL(i)),(0,L.c)(i)]);ei.add(e.src);let n=new Uint8Array(r);a.push({url:e.src,buffer:n,sha1:(0,o.Et)(n),type:"image"})}return a}async function el(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await es(e.files,r)}function ec(e){if(!e||!e.length)return(0,h.t)("community.publishing.upload_at_least_one_image")}async function ed(e,r){if(await new Promise((r,n)=>{let a=document.createElement("video");a.preload="metadata",a.addEventListener("error",e=>{n(e.message)}),a.addEventListener("loadedmetadata",()=>{r(a.duration)}),a.src=e,a.currentTime=0,a.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)})>y.GT)throw Error((0,h.t)("community.publishing.error_video_too_long",{filename:r,max_length:y.GT}))}function eu(e){let r=[],n=[],a=[];return e&&e.forEach((e,i)=>{if("buffer"in e){if("video"===e.type){if(!e.thumbnail_buffer)throw Error((0,h.t)("community.publishing.error_video_thumbnail_not_found"));let r={carousel_position:i,sha1:(0,o.Et)(e.buffer),bytes:e.buffer,video_thumbnail_buffer:e.thumbnail_buffer,video_thumbnail_sha1:(0,o.Et)(e.thumbnail_buffer)};n.push(r)}else{let n={carousel_position:i,sha1:(0,o.Et)(e.buffer)};r.push(n),a.push(n)}}else if("id"in e){let r="video"===e.type?{carousel_position:i,sha1:e.sha1,video_file_uuid:e.video_file_uuid,video_thumbnail_sha1:e.thumbnail_sha1}:{carousel_position:i,sha1:e.sha1};a.push(r)}}),{uploadImages:r,uploadVideos:n,allMedia:a}}function ep(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carouselPosition:a,signedCloudfrontUrl:i})=>{let o=r[a];if(!o||!("buffer"in o)||!o.buffer)return!1;let u=new FormData;Object.entries(n).forEach(([e,r])=>u.append(e,r)),u.set("content-type",(0,c.i)(o.buffer)??"image/png");let p=new Blob([o.buffer]);try{if(i&&(0,l.k)().ext_s3_url_use_figma_domains){let e=await (0,L.c)(p);await _.Ay.crossOriginPut(i,e,{raw:!0,headers:{"Content-Type":p.type,"x-amz-acl":"bucket-owner-full-control"}})}else{let r=new FormData;Object.entries(n).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,c.i)(o.buffer)??"image/png"),r.append("file",p),await (0,d.yr)(e,r)}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.t)("community.actions.error_uploading_carousel_image_error",{error:(0,g.J)(e,e.data?.message||"unknown error")}))}return!0}):[]}function em(e,r){let n=new FormData;return Object.entries(e).forEach(([e,r])=>n.append(e,r)),n.set("content-type",(0,c.i)(r)??"image/png"),n.append("file",new Blob([r])),n}async function e_(e,r,n,a){let i;let{uploadImages:o,allMedia:l}=eu(r);if(!e?.length&&!o?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:l};try{i=(await C.H.setupMultiImageUploadForHubFile({file_version_id:n,hub_file_id:a,images_sha1:o})).data.meta}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,g.J)(e,(0,h.t)("community.actions.could_not_connect_to_the_server")))}let c=[];for(let e of i.carousel_images){let n=r[e.carousel_position];n&&"buffer"in n&&n.buffer&&c.push({url:e.url,formData:em(e.fields,n.buffer)})}e?.length&&c.push({url:i.cover_image.cover_image_upload_url,formData:em(i.cover_image.fields,e)});try{return await (0,d.aB)(c),{cover_image:{cover_image_uploaded:!!e?.length,signature:i.cover_image.signature},carousel_images:l}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,g.J)(e,(0,h.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}function eh(e,r){return r?e.findIndex(e=>e.sha1===r.sha1):-1}function eg(e){ei.has(e)&&(URL.revokeObjectURL(e),ei.delete(e))}function ef(e){e&&(e.url&&eg(e.url),"type"in e&&"video"===e.type&&eg(e.thumbnail_url))}async function eE(e){let r=new Uint8Array(await (0,L.c)(e));return{sha1:(0,o.Et)(r),bytes:r}}function ey(e){if(!e.currentUserOrgId)return!1;let r=(0,R.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function eb(e,r){return Object.entries(r).reduce((r,[n,a])=>r+Number(e.includes(n)&&!!a),0)}function ev(e){return"object"==typeof e&&"fields"in e&&"imagePath"in e}function eT(e,r,n){if(ev(e)){let{fields:a,imagePath:i,signedCloudfrontUrl:o}=e;if(o&&(0,l.k)().ext_s3_url_use_figma_domains)return _.Ay.crossOriginPut(o,n,{raw:!0,headers:{"Content-Type":r.type,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(a).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",r.type),s.append("file",r),_.Ay.crossOriginPost(i,s,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?_.Ay.crossOriginPut(e,n,{raw:!0,headers:{..._.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}function eI(e,r){let n=(0,c.i)(r)??"image/png";if(ev(e)){let{fields:a,imagePath:i,signedCloudfrontUrl:o}=e;if(o&&(0,l.k)().ext_s3_url_use_figma_domains)return _.Ay.crossOriginPut(o,r,{raw:!0,headers:{"Content-Type":n,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(a).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",n),s.append("file",new Blob([r])),_.Ay.crossOriginPost(i,s,{raw:!0,headers:{"Content-Type":n}})}return"string"==typeof e?_.Ay.crossOriginPut(e,r,{raw:!0,headers:{..._.Ay.defaults.headers,"Content-Type":n}}):Promise.reject(Error("Invalid presigned_url"))}async function eS(e,r,n,a,s){let{video:c,videoThumbnail:d}=await w.v.getVideoUploadUrl({resourceType:e,id:r,sha1:n.sha1,thumbnail_sha1:s}),u=null;if(c){let{url:e,fields:r,signedCloudfrontUrl:a}=c;if(a&&(0,l.k)().ext_s3_url_use_figma_domains&&(0,l.k)().ext_s3_url_videos_use_figma_domains){let e=(0,i.lF)((0,o.aD)(n.sha1));u=_.Ay.crossOriginPut(a,n.bytes,{raw:!0,headers:{"Content-Type":"video/mp4","x-amz-acl":"bucket-owner-full-control","x-amz-checksum-sha1":e}}).then(()=>r.key||"")}else u=(0,p.VV)(e,r,n,"video/mp4")}let m=new Blob([a],{type:"image/png"}),f=eT({imagePath:d.url,fields:d.fields,signedCloudfrontUrl:d.signedCloudfrontUrl},m,a).catch(e=>{throw Error((0,h.t)("community.actions.error_uploading_plugin_video_thumbnail_error",{error:(0,g.J)(e,e.data?.message||"unknown error")}))}),[E]=await Promise.all([u,f]);return await eA(n.sha1,r,e,E??"",s,c?.blobUploadCommitKey||"")}async function eA(e,r,n,a,i,o){let s=new URLSearchParams;return s.append("sha1",e),s.append("uploadPath",a),s.append("resourceId",r),s.append("resourceType",n),s.append("blobUploadCommitKey",o),{videoFileUuid:(await _.Ay.post(`/api/upnode/video?${s.toString()}`)).data.meta.video_file_uuid,sha1:e,videoThumbnailSha1:i}}},292024:(e,r,n)=>{n.d(r,{$Q:()=>d,GS:()=>p,N4:()=>u,hT:()=>m,wJ:()=>c});var a=n(848318);n(301168);var i=n(562027);n(382902),n(271326);var o=n(933614),s=n(720722);n(693964),n(695816);var l=n(944239);n(436999);let c=(0,l.D)(e=>22!==e.length&&!e.match(/\D/));function d(e){return(0,a.useMemo)(()=>e&&c(e)?e:null,[e])}function u(e){let r=(0,o.oA)(e),{id:n,thumbnail_url:a,library_key:l,publisher:c}=e;return{name:r,key:n,type:s.PP,thumbnail_url:a,library_key:l??(0,i.l)(""),author_name:c.name,author_handle:c.profile_handle}}function p(e){let{library_file_name:r,library_file_key:n,thumbnail_url:a,library_key:i,author_name:o,author_handle:l}=e;return{name:r,key:n,type:s.PP,thumbnail_url:a,library_key:i,author_name:o,author_handle:l}}function m(e){let{file:r,components:n,stateGroups:a,styles:i,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:p,author_name:m,author_handle:_}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:a.length,num_styles:i.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,num_library_assets:0,type:d,library_key:p,author_name:m,author_handle:_}}},982588:(e,r,n)=>{n.d(r,{EO:()=>x,FP:()=>F,OY:()=>U,Qj:()=>z,Rm:()=>B,Y8:()=>W,ej:()=>P,gn:()=>j,kA:()=>R,vT:()=>D,vl:()=>k,y1:()=>H,zH:()=>V});var a=n(848318),i=n(301168),o=n(19180),s=n(7376),l=n(989232),c=n(621464),d=n(476254),u=n(637640),p=n(103661);n(314979);var m=n(967688),_=n(163472),h=n(809543),g=n(900003),f=n(823898);n(80100);var E=n(31898),y=n(63443);n(652576);var b=n(749405),v=n(324747);n(342463);var T=n(764474),I=n(844462),S=n(337292),A=n(493863),w=n(880089),C=n(944239),N=n(125761),L=n(20687);function O(e,r,n,a){return i=>{i(E.$O({type:S.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{i(n=>{((0,v.I0)(r)||(0,v.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:a}}))}}let R=(0,C.n)((e,r,n,a,i,s)=>{let l=(0,o.k)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(o=>{let d=()=>{if(r){if(a||l){var i;e((i=()=>{z({type:"PAID"}),o()},e=>{e(E.$O({type:S.h.type,data:{userId:r.id,resource:n,localResource:a,onSuccess:i,onCancel:o,noInteractionMode:!0}}))}));return}(0,v.m3)(n)?e(O(r,n,()=>o(),()=>o())):c.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(p.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:u.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:I.x,data:{headerText:(0,m.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};s===A.P.SKIP?d():e(E.$O({type:A.V.type,data:{type:r?s||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:d,onClose:o,plugin:n&&(0,L.uF)(n)||a||i,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function P(e){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),o=(0,i.d4)(e=>e.authedUsers),s=(0,_.I)(e);return a.useCallback(()=>{if(!e)return;let a=(0,g.QQ)(s),i=(0,v.m3)(e);if((0,l.trackEvent)("cmty_resource_usage_action",{resourceType:(0,h.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:a,isMonetizedResource:i}),!i||a||!1===function(e,r,n){if(!(0,v.m3)(n))return!1;let a=(0,b.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:i,publishers:o}=(0,g.V4)(a,n);return(0!==i.length||0!==o.length)&&(0!==i.length||0===o.length)}(n,o,e))return;let c=(0,b.G)({authedActiveCommunityProfile:n,authedUsers:o}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,l.trackEvent)("Checkout Flow Entered",{resourceType:(0,h.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(O(d[0],e));return}r((0,E.to)({type:w.I,data:{onUserSelect:n=>{(0,l.trackEvent)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,h.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(O(n,e))},resource:e}}))},[e,s,n,o,r])}function D(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function k(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function M(e,r,n){return!(!e||!(0,v.m3)(e)||(0,v.PM)(e)||!(0,v.U)(e)&&((0,T.f5)(e)||(0,v.zF)(e))||n&&k(e,n))&&!(D(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function F(){return(0,i.d4)(e=>e.communityPayments)}function x(e){return M(e,F(),(0,N.iZ)()||void 0)}function U(e){let r=F();return(0,v.m3)(e)&&D(e,r)}function B(e){return M(e,d.D&&d.D.getState().communityPayments,d.D&&d.D.getState().user||void 0)}let G="local-resource-payment";var V=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(V||{});function H(){return(0,s.DN)().get(G)}function z(e){(0,s.DN)().set(G,e)}function K(e,r){if(r&&(0,v.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function W({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:a}){let i=((0,T.k0)(e)?n:r)[e.plugin_id];if(!i)return;let o=K(a,i);return{...i,community_resource_payment:o}}function j(e){let r=K(F(),e);return!!r&&(0,g.UO)(r)}},642935:(e,r,n)=>{n.d(r,{c6:()=>l,hI:()=>c,Ay:()=>s});var a,i=n(556458);!function(e){e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER"}(a||(a={}));var o=n(879263);let s=(0,i.yu)({onError:e=>{(0,o.Rh)("web.cortex.error",{route:e})}});class l{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:a}=await r;if(n)break;yield a}}finally{e.releaseLock()}}}class c{constructor(e,r){this.stream=e,this.timeoutMs=r}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read();try{let e=new Promise((e,r)=>{setTimeout(()=>{r(Error("Timeout"))},this.timeoutMs)}),{done:n,value:a}=await Promise.race([r,e]);if(n)break;yield a}catch(e){if(e instanceof Error&&"Timeout"===e.message)break;throw e}}}finally{e.releaseLock()}}}},539829:(e,r,n)=>{n.d(r,{PD:()=>g,wg:()=>y});var a=n(382902),i=n(433166),o=n(730143),s=n(231159),l=n(253332),c=n(800802),d=n(983510),u=n(957273),p=n(814038),m=n(638345),_=n(709292),h=n(517776);let g=(0,p.Z1)(_.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let a=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=a&&c.ng.getProTrialStatus({grace_period_end:a.gracePeriodEnd?a.gracePeriodEnd.toISOString():null,grace_period_type:a.gracePeriodType})===u.a.IN_TRIAL});(0,p.J9)([_.Hh],([e],r)=>{let n=r(o.yV),a=r(m._s)?null:e;return!!n&&!!a&&!n.teamId&&!n.parentOrgId&&n.folderId===a});let f=(0,s.bt)(({progressBarState:e})=>(0,i.T)(e?.mode));(0,a.eU)(e=>new Promise(r=>{e(f)||r(!1)})),(0,h.r1)("figjam_editor_onboarded");let E=(0,p.Z1)(_.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,p.J9)([m.KI,E],([e,r],n)=>{let a=n(o.yV),i=a?.parentOrgId?e[a.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:a?.editorType??null,org:i,team:s})}),(0,a.eU)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,a.eU)(e=>{let r=e(o.yV);return r?.canEdit??!1});(0,a.eU)(e=>{let r=e(o.yV);return!!r&&r.canView&&!r.canEdit})},638345:(e,r,n)=>{n.d(r,{KI:()=>u,UC:()=>h,ZS:()=>m,_s:()=>p,eS:()=>g,rg:()=>d});var a=n(382902),i=n(231159),o=n(318147),s=n(55116),l=n(658796),c=n(814038);let d=(0,c.Z1)(s.Tej.Query({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),p=(0,i.bt)(e=>e.currentUserOrgId),m=(0,c.J9)([u],([e],r)=>{let n=r(p);return null!=n?e[n]:null}),_=(0,i.bt)(e=>e.orgById),h=(0,a.Iz)(e=>(0,c.Z1)(s.s5h.Query({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([m,d,l.N],([e,r,n],a)=>{if(!e)return!1;let i=a(_)[e.id];if(!i.bigma_enabled||!i.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([s.Tej.Query({}),m],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null});let g=(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},709292:(e,r,n)=>{n.d(r,{Fy:()=>h,Hh:()=>g,NT:()=>I,Vm:()=>y,Z_:()=>E,g5:()=>A,mp:()=>_,t:()=>T,zN:()=>f});var a=n(382902),i=n(238444),o=n(45137),s=n(231159),l=n(55116),c=n(253332),d=n(107007),u=n(991675),p=n(814038),m=n(638345);(0,p.J9)([l.Tej.Query({}),m.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?u.qo.ORG:u.qo.PERSONAL);let _=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.createdAt),h=(0,p.Z1)(_,e=>e.getTime()<=Date.now()-12096e5),g=(0,p.J9)([m.rg,l.Tej.Query({})],([e,r],n)=>{let a=n(m._s);if(!a)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===a);return r?.draftsFolderId||null}});(0,p.Z1)(l.Tej.Query({}),e=>{let r=e.currentUser.email;return(0,i.jm)(r)||!!r?.endsWith("@dev.figma.com")});let f=(0,p.Z1)(l.Tej.Query({}),e=>null!=e.currentUser.studentValidatedAt);(0,p.Z1)(l.UpR.Query({}),e=>e.currentUser.eduPeriodEnd);let E=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.teamRoles),y=(0,p.Z1)(E,e=>e?.map(e=>e.team).filter(e=>null!=e)),b=(0,s.bt)(e=>e.isFreeUser),v=(0,p.J9)([m.rg,y],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,c.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),T=(0,p.Z1)(v,(e,r)=>r(b));(0,p.Z1)(m.rg,e=>!!e?.length&&e.length>0),(0,p.Z1)(l.Tej.Query({}),e=>{let r=e.currentUser.email;return null!=r?(0,i.qe)(r):void 0});let I=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.profile?.jobTitle);(0,p.Z1)(I,e=>{let r=(0,o.HB)(e);return"designer"!==r&&"other"!==r&&"unknown"!==r}),(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.profile?.usagePurpose);let S=(0,s.bt)(e=>e.authedProfilesById);(0,a.eU)(e=>Object.values(e(S)).some(e=>!!e.org_id||!!e.team_id)),(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.email);let A=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.emailValidatedAt),w=(0,s.bt)(e=>e.userAnalyticsData);(0,a.Iz)(e=>(0,a.mg)(w,r=>{if(null==r)return;let n=r[e];return d.bW.includes(e)&&n?new Date(n):n})),(0,p.J9)([l.Tej.Query({}),m.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},517776:(e,r,n)=>{n.d(r,{$B:()=>p,Fu:()=>c,qG:()=>l,r1:()=>u});var a=n(382902),i=n(55116),o=n(961359),s=n(814038);let l=(0,s.Z1)(i.Tej.Query({}),e=>{let r=e.currentUser.userFlags,n={};return r.forEach(e=>n[e.name]=e),n}),c=(0,a.Iz)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,a.Iz)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded");let p=c("not_gen_0")},986761:(e,r,n)=>{n.d(r,{KI:()=>s,MS:()=>i,mW:()=>o});var a=n(318147);function i(e){return e.signed_up_from_figjam_jamboard||e.signed_up_from_figjam_page?a._Y.WHITEBOARD:e.signed_up_from_figma_page?a._Y.DESIGN:e.signed_up_from_community?"community":void 0}function o(e,r){return!!e[r]}function s(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n(253332),n(800802),n(983510),n(957273),n(961359),n(991675)},259550:(e,r,n)=>{n.d(r,{X:()=>a});let a="curator_global_request_close";var i=(e=>(e.FigJamQuickActionsMenuOpen="figjam_quick_actions_menu_open",e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(i||{})},834822:(e,r,n)=>{n.d(r,{RI:()=>u});var a=n(382902),i=n(918777),o=n(7365);n(664793);var s=n(564966),l=n(136169),c=n(468751);let d=new Set([l.koo.id,l.dvJ.id,l.L6E.id,l.Nh9.id,l.wRw.id]),u=new c.m("LimitDevModeUpsellFrequency","Prevent showing more than on dev mode upsell in a 24 hour period",(e,r)=>{if(a.zl.get(s.FP))return!1;let n=(0,o.y)(r.id);return!d.has(n)||!e.lastSeenDevModeUpsell||!(e.lastSeenDevModeUpsell>(0,i.A)().subtract(1,"day").toDate())})},265098:(e,r,n)=>{n.d(r,{zl:()=>o});var a=n(848318),i=n(382902);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,i.fp)(e),c=r.isComplete(n);return(0,a.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(66699)},257264:(e,r,n)=>{n.d(r,{Op:()=>a.Op,nr:()=>a.nr,rn:()=>i.rn});var a=n(236446),i=n(360110);n(265098)},499668:(e,r,n)=>{n.d(r,{DQ:()=>_,Pw:()=>l,_X:()=>m,pw:()=>p,wv:()=>c});var a=n(938982),i=n(755595),o=n(998568),s=n(227276),l=(e=>(e.GROUP_3="GROUP_3",e.GROUP_4="GROUP_4",e.GROUP_6="GROUP_6",e.GROUP_7="GROUP_7",e))(l||{}),c=(e=>(e.GROUP_1="GROUP_1",e.GROUP_2="GROUP_2",e.GROUP_3="GROUP_3",e))(c||{});let d={redux_deprecation:a.e.FRONTEND_PLATFORM,migrate_team_data_to_livegraph:a.e.SCALE,test_config:a.e.FRONTEND_PLATFORM},u=i.z.enum(["passthrough","shadowread","cutover"]);function p(e,r){let n=h(e,r);return"shadowread"===n||"cutover"===n}function m(e){return p("redux_deprecation",e)}function _(e){return"cutover"===h("redux_deprecation",e)}function h(e,r){let n=(0,s.gP)(e).get(r,"passthrough"),{success:a,data:i}=u.safeParse(n);return a?i:((0,o.$D)(d[e],Error(`Invalid value for configGroup ${r}: ${n}`)),"passthrough")}},613733:(e,r,n)=>{n.d(r,{A5:()=>f.A,HZ:()=>E,MF:()=>w,X7:()=>y,jV:()=>H,kW:()=>L,u8:()=>S});var a=n(848318),i=n(301168),o=n(660376),s=n(186606),l=n(19180),c=n(349048),d=n(529640),u=n.n(d),p=n(989232),m=n(942744),_=n(813009),h=n(879263),g=n(97239),f=n(472520);function E({oldValue:e,oldLatencyMs:r,newValue:n,newLatencyMs:a,contextArgs:i,label:o,debug:s=!1,enableFullRead:l=!1,enableShadowRead:c=!0,comparator:d=k(),maxReports:u}){return c&&G()&&!T(o,u)&&I({label:o,discrepancies:d(e,n),oldLatencyMs:r,newLatencyMs:a,contextArgs:i,debug:s}),l?n:e}function y({comparisonConfig:e,...r}){let n=F({...D,...e});return E({...r,comparator:n})}function b(e){return JSON.stringify(e,(e,r)=>void 0===r?"undefined":r)}let v=new Map;function T(e,r){if(void 0===r)return!1;let n=v.get(e)??0;return n>=r||(v.set(e,n+1),!1)}function I({label:e,discrepancies:r,oldLatencyMs:n,newLatencyMs:a,contextArgs:i,debug:o}){o&&(r.length>0?console.log(`[Shadow read] '${e}' has discrepancies \u26A0\uFE0F`,r):console.log(`[Shadow read] '${e}' has no discrepancies \u2705`));let s={label:e,contextArgs:b(i??{}),datadogRUMSessionId:m.Tf.sessionId||""};if(r.length>0){let e=r.reduce((e,r)=>"high"===r.severity?"high":e,"low");p.definedAnalyticsHandler.trackDefinedEvent("data_migrations.shadow_read_discrepancy",{...s,discrepancy_maxSeverity:e})}else p.definedAnalyticsHandler.trackDefinedEvent("data_migrations.shadow_read_match",s);r.length>0&&(r.sort((e,r)=>e.severity===r.severity?0:"high"===e.severity?-1:1),r.slice(0,10).forEach(e=>{p.definedAnalyticsHandler.trackDefinedEvent("data_migrations.shadow_read_discrepancy_details",{...s,discrepancy_path:e.path.join("."),discrepancy_oldValue:b(e.oldValue),discrepancy_newValue:b(e.newValue),discrepancy_severity:e.severity})})),void 0!==n&&p.definedAnalyticsHandler.trackDefinedEvent("data_migrations.shadow_read_latency_old_value",{...s,latency_ms:n}),void 0!==a&&p.definedAnalyticsHandler.trackDefinedEvent("data_migrations.shadow_read_latency_new_value",{...s,latency_ms:a})}function S({oldValue:e,oldValueReady:r=!0,newValue:n,newValueReady:i=!0,label:o,contextArgs:s,withDefaultContextArgs:l=!0,enableFullRead:c=!1,enableShadowRead:d=!0,debug:u=!1,trackLatency:p=!0,timeoutMs:m,sampleRate__UNSTABLE:_=1,comparator:h=k(),maxReports:g}){let f=R(l,s),[y]=(0,a.useState)(()=>h),b=(0,a.useRef)(!1),[v]=(0,a.useState)(()=>Math.random()<_),T=d&&v,I=p&&T;return O({isReady:r,label:o,variant:"old",contextArgs:s,withDefaultContextArgs:l,timeoutMs:m,debug:u,enabled:I}),O({isReady:i,label:o,variant:"new",contextArgs:s,withDefaultContextArgs:l,timeoutMs:m,debug:u,enabled:I}),(0,a.useEffect)(()=>{!b.current&&T&&i&&r&&(E({oldValue:e,newValue:n,label:o,contextArgs:f,comparator:y,debug:u,maxReports:g}),b.current=!0)},[T,e,n,o,f,y,u,g,i,r]),c?n:e}function A(e,r){let{errors:n,...a}=e,{errors:o,...s}=r;return(0,i.bN)(n,o)&&(0,i.bN)(a,s)}function w({oldValue:e,newValue:r,comparisonConfig:n,...a}){let i=(0,c.DD)(()=>e,[e],A),o=(0,c.DD)(()=>r,[r],A),s="loaded"===i.status,l="loaded"===o.status,d=F(n);return S({oldValue:i.data,oldValueReady:s,newValue:o.data,newValueReady:l,comparator:d,...a}),a.enableFullRead?o:i}function C({label:e,variant:r,contextArgs:n,debug:a,duration:i},{backgrounded:o,offlined:s}){if(!G())return;let l=o||s;a&&console.log(`[Shadow read] [variant: ${r.toUpperCase()}] '${e}' took ${i}ms to be ready \u23F1 (was idle? ${l})`),p.definedAnalyticsHandler.trackDefinedEvent("old"===r?"data_migrations.shadow_read_latency_old_value":"data_migrations.shadow_read_latency_new_value",{label:e,latency_ms:i,idled:l,contextArgs:b(n??{}),datadogRUMSessionId:m.Tf.sessionId||""})}function N({label:e,variant:r,contextArgs:n,debug:a,duration:i},{backgrounded:o,offlined:s}){if(!G())return;let l=o||s;a&&console.log(`[Shadow read] '${e}' has timed out after ${i}ms \u23F1 (was idle? ${l})`),p.definedAnalyticsHandler.trackDefinedEvent("old"===r?"data_migrations.shadow_read_latency_old_value_timeout":"data_migrations.shadow_read_latency_new_value_timeout",{label:e,idled:l,contextArgs:b(n??{}),datadogRUMSessionId:m.Tf.sessionId||""})}function L({label:e,variant:r,contextArgs:n,timeoutMs:a=1e4,debug:i=!1}){let o=new h.rw({onTimeout:(o,s)=>{N({label:e,variant:r,contextArgs:n,debug:i,duration:a},{backgrounded:o,offlined:s})},timeoutMs:a});return()=>{o.stop((a,o,s)=>{C({label:e,variant:r,contextArgs:n,debug:i,duration:a},{backgrounded:o,offlined:s})},{skipIfIdle:!1})}}function O({isReady:e,enabled:r=!0,label:n,variant:a,contextArgs:i,withDefaultContextArgs:o=!0,timeoutMs:s=1e4,debug:l=!1}){let c=R(o,i);(0,h.I)(e,(e,r,i)=>{C({label:n,variant:a,contextArgs:c,debug:l,duration:e},{backgrounded:r,offlined:i})},{enabled:r,onTimeout:(e,r)=>{N({label:n,variant:a,contextArgs:c,debug:l,duration:s},{backgrounded:e,offlined:r})},timeoutMs:s})}function R(e,r){if((0,a.useRef)(e).current!==e)throw Error("useMemoizedContextArgs: withDefaultContextArgs cannot change during the lifetime of the hook!");let n=e?(0,_.R)(e=>({currentTeamId:e.currentTeamId,getTeamIdReturnValue:(0,g.Z)(e),currentOrgId:e.currentUserOrgId,currentUserId:e.user?.id??null,openFileKey:e.openFile?.key??null,selectedView:e.selectedView?.view??null})):null;return(0,c.k9)(()=>({...n,...r}),[n,r])}function P(e,r){return"function"==typeof e?e(r):e}let D={ignore:!1,strictRecords:!0,strictLists:!0};function k(e){let r={ignore:!1};return(n,a)=>M(n,a,[],{...r,...e})}function M(e,r,n,a){if(P(a.ignore,n))return[];if(Array.isArray(e)!==Array.isArray(r)||U(e)!==U(r))return[{path:n,oldValue:e,newValue:r,severity:"high"}];let i=[];if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return i.push({path:n,severity:"high",oldValue:e,newValue:r}),i;for(let o=0;o<e.length;o++)i.push(...M(e[o],r[o],[...n,String(o)],a))}else if(U(e)&&U(r))for(let o of function(e,r){let n={};for(let r in e)n[r]=!0;for(let e in r)n[e]=!0;return Object.keys(n)}(e,r)){let s=n.concat(o);i.push(...M(e[o],r[o],s,a))}else i.push(...x(e,r,n));return i}function F(e){return(r,n)=>(function e(r,n,a,i){if(P(i.ignore,a))return[];let o=P(i.strictLists,a);if(Array.isArray(r)!==Array.isArray(n)||U(r)!==U(n))return[{path:a,oldValue:r,newValue:n,severity:"high"}];let s=[];if(Array.isArray(r)&&Array.isArray(n)){if(r.every(B)&&n.every(B))s.push(...M(r,n,a,i));else{let l=(e,r=0)=>{if(!U(e))return null;if("id"in e)return["id"];if("key"in e)return["key"];if(0===r)for(let n in e){let a=l(e[n],r+1);if(a)return[n,...a]}return null},c=e=>{let r=new Map;for(let n of e){let e=l(n);e&&r.set(u()(n,e),n)}return r},d=c(r),p=c(n),m=!1;for(let[l,c]of(o&&d.size!==p.size&&(m=!0),0!==d.size||0!==p.size||0===r.length&&0===n.length||s.push({path:a,oldValue:r,newValue:n,severity:"high"}),d)){if(!p.has(l)){o&&(m=!0);continue}s.push(...e(c,p.get(l),[...a,l],i))}m&&s.push({path:a,severity:"high",oldValue:Array.from(d.keys()),newValue:Array.from(p.keys())})}}else if(U(r)&&U(n))for(let o in r){let l=[...a,o],c=P(i.strictRecords,l);(o in n||c)&&s.push(...e(r[o],n[o],l,i))}else s.push(...x(r,n,a));return s})(r,n,[],{...D,...e})}function x(e,r,n){if(e===r||"function"==typeof e||"function"==typeof r)return[];let a=[null,void 0,!1];return a.includes(e)&&a.includes(r)&&e!==r?[{path:n,oldValue:e,newValue:r,severity:"low"}]:typeof e!=typeof r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:e instanceof Date&&r instanceof Date?Math.abs(e.getTime()-r.getTime())>=1e3?[{path:n,oldValue:e.toISOString(),newValue:r.toISOString(),severity:"high"}]:[]:e!==r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:[]}function U(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&!(e instanceof Date)}function B(e){return"object"!=typeof e&&"function"!=typeof e}function G(){return(0,l.k)().use_shadow_read_reporting}class V{reportDiscrepancies(e,r,n){G()&&(T(e,n.maxReports??void 0)||I({label:(0,f.R)(e),discrepancies:r.map(({severity:e,...r})=>({...r,severity:function(e){switch(e){case s.D2E.HIGH:return"high";case s.D2E.LOW:return"low";default:return(0,o.j)(e),"low"}}(e)})),oldLatencyMs:n.oldLatencyMs??void 0,newLatencyMs:n.newLatencyMs??void 0,contextArgs:n.contextArgs??void 0,debug:n.debug}))}compareAndReportDiscrepancies(e,r,n,a){if(!G()||T(e,a.maxReports??void 0))return;let i=k()(r,n);I({label:(0,f.R)(e),discrepancies:i,oldLatencyMs:a.oldLatencyMs??void 0,newLatencyMs:a.newLatencyMs??void 0,contextArgs:a.contextArgs??void 0,debug:a.debug})}}function H(){new V}},298380:(e,r,n)=>{n.d(r,{IK:()=>y});var a=n(938982),i=n(382902),o=n(29188),s=n(637640),l=n(183603);n(656329);var c=n(998568),d=n(453370),u=n(402644),p=n(788792),m=n(486250),_=n(163195);let h=new Map,g=new _.vY;o.S8?.setListener({name:"notificationClicked",listener(e){h.get(e)?.(),h.delete(e)}});let f=null;function E(e,r){if(e)f?.(),f=null;else if(r)f=(0,_.cz)(r);else throw Error("Could not subscribe to PersistentUserNotificationBellData as BellFeed LiveGraphClient was null.")}function y(e){let r=(0,l.WB)();o.S8?.setListener({name:"updateRealtimeTokens",listener(e){g.updateSubscriptions(e,r)}}),o.S8?.setListener({name:"updateIsLivegraphClientEnabled",listener(e){e!==i.zl.get(u.d)&&(E(e,r),i.zl.set(u.d,e))}});let n=(0,o.O_)(9);if(n){let e=n.getIsLivegraphClientEnabled();i.zl.set(u.d,e),E(e,r)}if(o.S8?.setListener({name:"pushNotificationReceived",listener(r,n,a){!function(e,r,n,a){var i;i=()=>{p.sr.recordNotificationClicked({id:r,currentView:a,medium:"desktoppush"}).then(r=>{if(o.S8){let r=(0,m.sL)(n||"")||void 0;e(d.$T({view:"feed",quickReplyInfo:r})),o.S8.toggleTrayWindow(!0)}else n&&s.Ay.redirect(n)})},h.set(r,i),setTimeout(()=>h.delete(r),6048e5)}(e.dispatch,r.id,a,n)}}),o.S8){let e=o.S8.getRealtimeTokens();if(null==e&&((0,c.$D)(a.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${e} from getRealtimeTokens() on first try`),{level:"warning"}),e=o.S8.getRealtimeTokens()),null==e){(0,c.$D)(a.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${e} from getRealtimeTokens() on second try`));return}g.updateSubscriptions(e,r)}}},389541:(e,r,n)=>{n.d(r,{Ck:()=>s,Fl:()=>u,Ho:()=>l,fV:()=>c});var a=n(848318),i=n(382902),o=n(559184);function s(e,r){let n=d(r);return!!e&&n.has(e)}function l(e){let r=(0,i.md)(o.S0);return!!e&&r.has(e)}function c(e,r){let n=s(e,r),a=l(e);return n||a}function d(e){return(0,i.md)(e?o.Gg:o.bJ)}function u(e){let r=d(e),n=(0,i.md)(o.S0);return a.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},992288:(e,r,n)=>{n.d(r,{FX:()=>v,KP:()=>y,L1:()=>b});var a=n(848318),i=n(779367),o=n(476964),s=n(382902),l=n(536384),c=n.n(l),d=n(401970),u=n(297638),p=n(138528),m=n(389541),_=n(680004),h=n(559184),g=n(260649),f=n(74416);function E({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:l="above",size:u="small",variant:p}){let m=r||n?(0,_.wZ)({orgName:r,workspaceName:n,tooltipLocation:l,tooltipDelay:s}):{};return a.createElement(d.U,{className:c()("secondary"===p?g.Wo:g.Kk,e?g.cH:void 0),svg:f.A,...m},a.createElement("div",{className:c()("secondary"===p?g.Wo:g.Kk,e?g.cH:void 0),...m},"large"===u?a.createElement(i.U,null):a.createElement(o.x,null)))}function y({libraryKey:e,...r}){let n=(0,s.md)(h.d$),i=(0,p.T5)("ApprovedLibraryIconForFullScreen").unwrapOr(null),o=i?.name,l=(0,m.Ho)(e);return a.createElement(E,{...r,orgNameForTooltip:l?o:void 0,workspaceNameForTooltip:n?.name})}function b(e){let r=(0,s.md)(h.G7),n=(0,p.T5)("ApprovedLibraryIconForUserDefaultSubscriptions").unwrapOr(null),i=n?.name,o=(0,m.Ho)(e.libraryKey);return a.createElement(E,{...e,orgNameForTooltip:o?i:void 0,workspaceNameForTooltip:r?.name})}function v(){return a.createElement("div",{className:u.s.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},a.createElement(E,{isForSelect:!0}))}},680004:(e,r,n)=>{n.d(r,{NX:()=>y,Qy:()=>h,k9:()=>_,sF:()=>E,wZ:()=>f}),n(275779);var a=n(562027),i=n(382902),o=n(410441),s=n(750294),l=n(277454),c=n(17753),d=n(881412),u=n(559184),p=n(27776);let m=(0,o.jz)(p.UEm);function _({libraries:e,approvedLibraryKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:a=!1}){e.sort((e,i)=>h({libraryA:e,libraryB:i,approvedLibraryKeysByResourceType:r,currentTeamId:n,shouldSortByTeam:a}))}function h({libraryA:e,libraryB:r,approvedLibraryKeysByResourceType:n,currentTeamId:i=null,shouldSortByTeam:o=!1}){let{workspaceApprovedLibraryKeys:c,orgApprovedLibraryKeys:d}=n;if(o&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,l.r9)(e,r,i);let u=(0,a.l)(e.library_key??""),p=(0,a.l)(r.library_key??""),m=d.has(u)?1:0,_=d.has(p)?1:0;if(m!==_)return _-m;let h=c.has(u)?1:0,f=c.has(p)?1:0;return h!==f?f-h:s.f.LEXICOGRAPHICALLY(g(e),g(r))}function g(e){return"name"in e?e.name:e.library_file_name}function f({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:a}){let i=e??r;if(!i)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>m)return m;if(r>m/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return m}(i);return{"data-tooltip-type":c.Ib.SPECIAL,"data-tooltip":d.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...a?{"data-tooltip-timeout-delay":a}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function E(e){if(!e)return!1;let r=i.zl.get(u.bJ).has(e),n=i.zl.get(u.S0).has(e);return r||n}function y({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},901558:(e,r,n)=>{n.d(r,{V:()=>o});var a=n(277454),i=n(720722);function o(e){return(0,i.Do)(e)?"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key:e.isLocal?(0,a.Gj)(e):(0,a.Av)(e)??(0,a.Gj)(e)}},214638:(e,r,n)=>{n.d(r,{e:()=>d});var a=n(562027),i=n(382902),o=n(755595),s=n(730143),l=n(687391);let c=(0,i.Iz)(e=>(0,l.P)(`recently-used-${e}s`,"key",o.z.object({type:o.z.literal(e),key:o.z.string(),libraryKey:o.z.string()}),{transform:(e,r)=>{let n=r(s.yV);return{type:e.type,key:"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key,libraryKey:"LOCAL"===e.subscriptionStatus?(0,a.l)(n?.libraryKey??""):e.sourceLibraryKey}}}));function d(e){i.zl.set(c(e.type),e)}},109068:(e,r,n)=>{n.d(r,{R8:()=>l});var a=n(848318),i=n(410725),o=n(55116),s=n(720722);function l({assetKey:e,type:r}){let n=(0,i.Rs)(o.ftA,{key:e??""},{enabled:r===s.PW.COMPONENT&&!!e}),l=(0,i.Rs)(o.iL6,{key:e??""},{enabled:r===s.PW.STATE_GROUP&&!!e}),c=(0,i.Rs)(o.bUF,{key:e??""},{enabled:r===s.PW.STYLE&&!!e}),d=(0,i.Rs)(o.EW,{key:e??""},{enabled:r===s.PW.VARIABLE_SET&&!!e}),u=a.useMemo(()=>r!==s.PW.COMPONENT?null:n,[n,r]),p=a.useMemo(()=>r!==s.PW.STATE_GROUP?null:l,[l,r]),m=a.useMemo(()=>r!==s.PW.STYLE?null:c,[c,r]),_=a.useMemo(()=>r!==s.PW.VARIABLE_SET?null:d,[d,r]);return a.useMemo(()=>null!=u?"loaded"!==u.status?u:{status:u.status,data:{assetAttribution:u.data?.component?.assetAttribution},errors:u.errors}:null!=p?"loaded"!==p.status?p:{status:p.status,data:{assetAttribution:p.data?.stateGroup?.assetAttribution},errors:p.errors}:null!=m?"loaded"!==m.status?m:{status:m.status,data:{assetAttribution:m.data?.style?.assetAttribution},errors:m.errors}:null!=_?"loaded"!==_.status?_:{status:_.status,data:{assetAttribution:_.data?.variableCollection?.assetAttribution},errors:_.errors}:{status:"disabled",data:null,errors:null},[u,p,m,_])}},949598:(e,r,n)=>{n.d(r,{P:()=>g});var a=n(848318),i=n(860676),o=n(536384),s=n.n(o),l=n(900980),c=n(730143),d=n(138528),u=n(695816),p=n(389541),m=n(992288),_=n(87148),h=n(678287);function g({libraryKey:e,showPresetTooltip:r,tooltipDelay:n,tooltipLocation:o,compact:g,colorPrimaryOnHover:f}){let E=(0,d.X$)("LibraryBadge").unwrapOr(null),y=E?.tier===i.Agb.ENTERPRISE,b=(0,c._G)(),v=(0,p.fV)(e),T=(0,_.fd)(e),I=(0,u.H)(e),S=s()(h.iE,{[h.oE]:g,[h.FT]:f});return y&&e!==b&&v?a.createElement("div",{className:S},a.createElement(m.KP,{libraryKey:e,tooltipDelay:n,tooltipLocation:o})):e!==b&&(T||I)?a.createElement("div",{className:S},a.createElement(l.E,{showTooltip:r,libraryKey:e,tooltipDelay:n,tooltipLocation:o})):null}},397697:(e,r,n)=>{n.d(r,{Nz:()=>s,o:()=>l}),n(430385);var a=n(720722),i=n(87148);let o=/^Examples *\//;function s(e,{isPreset:r}){return!!r&&o.test(e.name)}function l(e,r){if((0,a.Do)(e)||!(e.type===a.PW.COMPONENT||e.type===a.PW.STATE_GROUP))return!1;let n=(0,i.lR)(e,r);return s(e,{isPreset:n})}},802240:(e,r,n)=>{n.d(r,{M:()=>o});var a=n(19180),i=n(318147);function o(){return(0,a.k)().dse_preset_group_internal?i.wl.INTERNAL:i.wl.DEFAULT}},87148:(e,r,n)=>{n.d(r,{Ag:()=>I,B8:()=>f,HA:()=>h,Os:()=>R,fd:()=>g,fn:()=>b,ku:()=>P,lR:()=>E,nT:()=>O,o3:()=>T,p9:()=>L,qA:()=>v,xm:()=>y});var a=n(848318),i=n(382902),o=n(870567),s=n(989232),l=n(458608),c=n(227276),d=n(791893),u=n(55116),p=n(677334),m=n(693964),_=n(695816);function h(e,r){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>o.oA(e.libraryKey)===r);if(n)return n.partner_type??void 0}}function g(e){let r=(0,i.md)(m.TG);return!!e&&r.has(e)}function f(){return(0,a.useCallback)(e=>{let r=i.zl.get(m.TG);return!!e&&r.has(e)},[])}function E(e,r){return r.has(e.library_key)}function y(){let e=(0,i.md)(m.TG);return(0,a.useCallback)(r=>E(r,e),[e])}p.M4.Query({fetch:async e=>e?(await (0,c.w0)("ui_kits_feedback_urls")).get(e,""):""});let b=(0,i.eU)(null),v=(0,i.eU)({value:(0,d.N)(),updateSource:"page_load"});function T(e){let r=i.zl.get(m.TG);return!!e&&r.has(e)}function I(e){if(!e)return!1;let r=i.zl.get(_.QN),n=i.zl.get(_.r9);return r.includes(e)||n.includes(e)}let S={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},A=[u.Lom,u.bsh,u.yFE,u.vsj],w=e=>A.some(r=>r._name===e),C=e=>w(e)?e:void 0,N=e=>p.M4.Query({fetch:async r=>{let n=(0,l.S8)(e,r.arguments),a=C(e._name);if(a){let n=S[a];(null===n||r.nonce.value>n)&&(s.definedAnalyticsHandler.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:C(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),S[a]=r.nonce.value)}return await n}}),L=N(u.Lom),O=N(u.bsh);N(u.yFE);let R=N(u.vsj);function P(e,r,n){let a=n(b),i=n(v),o=n(e({arguments:r,nonce:i}));return"loading"===o.status&&null!==a&&(o=n(e({arguments:r,nonce:a}))),o}},920008:(e,r,n)=>{n.d(r,{u:()=>o});var a=n(677334),i=n(180495);a.M4.Query({fetch:async e=>(await i.Z.getLibraryPublishedComponents({key:e})).data.meta,key:"libraryPublishedComponents"});let o=a.M4.Query({fetch:async e=>(await i.Z.getLibraryPublishedComponentsV2({libraryKey:e})).data.meta,key:"libraryPublishedComponentsV2"})},97795:(e,r,n)=>{n.d(r,{Ew:()=>g,GZ:()=>f,Gq:()=>y,Hu:()=>E});var a=n(848318),i=n(301168),o=n(660376),s=n(353231),l=n(730143),c=n(931451),d=n(83742),u=n(436999),p=n(720722),m=n(669465),_=n(399906),h=n(920467);function g({assetKey:e,assetLibraryKey:r,assetType:n,isList:u,sectionNameforTracking:g,sectionPosition:b,sourceForTracking:v,sectionDepth:T,aiScore:I,lexicalScore:S,isExample:A,partnerType:w}){let C=(0,l.q5)(),{searchSessionId:N}=y(),L=(0,i.d4)(e=>e.search.queryId),O=a.useContext(m.U),R=O?.assetTypeDropdownSelection,{query:P}=(0,c.I)(d.Cn.AssetsPanel),D=E(r),k=f(r,D),M=(0,_.M)(),F=function(){let[e]=(0,h.MA)();return e}(),x=M?F:u?"LIST":"GRID",U=(0,_.k)();return a.useMemo(()=>({assetKey:e,assetLibraryKey:r,assetTypeDropdownSelection:R,libraryType:D,viewMode:x,searchQuery:P,searchSessionId:N??void 0,source:v,sourceSection:g,type:function(e){if("embed"===e)return"embed";switch(e){case p.PW.COMPONENT:return"component";case p.PW.STATE_GROUP:return"state_group";case p.PW.MODULE:return"module";case p.PW.RESPONSIVE_SET:return"responsive_set";case p.PW.CODE_COMPONENT:return"code_component";case p.PW.CODE_LIBRARY:case p.PW.CODE_FILE:case p.PW.STYLE:case p.PW.VARIABLE:case p.PW.VARIABLE_OVERRIDE:case p.PW.VARIABLE_SET:case p.PW.CONSTRAINED_TEMPLATE:case p.PW.MANAGED_STRING:return;default:(0,o.xb)(e,"Can't get asset type for logging")}}(n),sectionPosition:b,subscriptionLevel:k,sectionDepth:T,assetsPanelVersion:U,fileKey:C?.key,fileTeamId:C?.teamId??void 0,fileOrgId:C?.parentOrgId??void 0,scoreAi:I,scoreLexical:S,isExample:A,partnerType:w,productType:(0,s.pi)({editorType:C?.editorType}),queryId:L??void 0}),[e,r,R,D,x,P,N,v,g,n,b,k,T,U,C?.key,C?.teamId,C?.parentOrgId,C?.editorType,I,S,A,w,L])}function f(e,r){let n=(0,u.Ly)();return a.useMemo(()=>n.file?.has(e)?"file":n.user?.has(e)?"user":n.team?.has(e)?"team":n.org?.has(e)?"org":"SUBSCRIBED"===r?"other":"",[e,n,r])}function E(e){let r=(0,l._G)(),n=(0,u.He)();return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}function y(){let e=(0,i.d4)(e=>e.library.assetsPanelSearch.query),r=(0,i.d4)(r=>e?r.search.lastLoadedQuery?.sessionId??r.search.sessionId:null);return{query:e,searchSessionId:r}}},577148:(e,r,n)=>{n.d(r,{Ci:()=>o,WJ:()=>a,vO:()=>s,yc:()=>i}),n(996202);var a=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(a||{}),i=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(i||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},70217:(e,r,n)=>{n.d(r,{$W:()=>l,KD:()=>i,O1:()=>s});var a=n(848318),i=(e=>(e[e.OVERLAY=50]="OVERLAY",e[e.MULTIPLAYER_SPOTLIGHT=40]="MULTIPLAYER_SPOTLIGHT",e[e.LINK_TOOLTIP=30]="LINK_TOOLTIP",e[e.SITES_NON_DEFAULT_LEFT_RAIL_VIEW=25]="SITES_NON_DEFAULT_LEFT_RAIL_VIEW",e[e.EDITING_TEXT_FIELD=20]="EDITING_TEXT_FIELD",e[e.FULL_SCREEN_MODAL=15]="FULL_SCREEN_MODAL",e[e.MODAL=10]="MODAL",e))(i||{});let o=new Set;function s(e,r){let n=a.useCallback(e=>{if("Escape"!==e.key)return;let r=Array.from(o);for(let n of(r.sort((e,r)=>r.priority-e.priority),r))if(n.callback()){e.stopImmediatePropagation();break}},[]);a.useEffect(()=>{0===o.size&&document.addEventListener("keydown",n,{capture:!0});let a={callback:e,priority:r};return o.add(a),()=>{o.delete(a),0===o.size&&document.removeEventListener("keydown",n,{capture:!0})}},[n,e,r])}function l(e){let{handleEscape:r,priority:n}=e;return s(r,n),a.createElement(a.Fragment,null,e.children)}},531851:(e,r,n)=>{n.d(r,{CR:()=>p,RW:()=>_,XL:()=>m,kA:()=>u});var a=n(870567),i=n(410725),o=n(748008),s=n(243042),l=n(55116),c=n(730143);function d(e,r,n){let i=[],o=[];for(let r of e){var s;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==a.tT.Loaded)continue;s=r.plugin.data}else s=r.plugin;if(!s)continue;let e="Workspace"===r.allowlistGroupType,l=r.allowlistedWorkspace;if(e&&!l||e&&!n)continue;let c=l?.id;n&&c&&c!==n||(s.isWidget?o.push(s.id):i.push(s.id))}return"plugin"===r?i:o}function u(e,r,n=!0){let a=_(),o=(0,i.Rs)(l.M9I,{orgId:e},{enabled:n}),s=o.data?.org;return"loading"!==o.status&&a.loaded?"errors"!==o.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,a.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function p(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let a=n.data;return{loaded:!0,data:d(a?.allowlistedExtensions??[],e,a?.workspaceId??void 0)}}function m({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function _(){let e=(0,c.q5)(),r=!!e,n=(0,i.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});return r?"loaded"!==n.status?{loaded:!1}:{loaded:!0,data:{workspaceId:n.data?.file?.workspaceId||void 0,workspaceName:o.oA(n.data?.file?.computedWorkspace)?.workspace?.name,fileKey:e.key,fileName:e.name}}:{loaded:!0,data:void 0}}},983178:(e,r,n)=>{n.d(r,{D6:()=>o,T0:()=>l,TF:()=>p,ds:()=>m,eU:()=>c,gV:()=>h,kK:()=>s,sb:()=>E,t$:()=>f,tW:()=>g});var a=n(989232);n(511985),n(453370),n(403253);var i=n(318147);function o(e){return!0}function s(e){return e?1e3:50}function l(e,r){return m(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function c(e,r){switch(r){case i.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:i.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case i.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:i.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case i.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:i.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case i.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:i.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case i.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:i.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function d(e,r,n,i,o,s){(0,a.trackEvent)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:i,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function u(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function p(e,r,n){let a=new Set((n??[]).map(e=>e.plan_id)),i=new Set,o=new Set,s=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(d(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),u(i,e);if(e.teamId===r&&!a.has(e.file?.teamId??""))return u(i,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(d(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),u(s,e);if(e.project?.orgId===null&&e.teamId===r&&!a.has(e.project?.teamId??""))return u(s,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(d(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),u(o,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!a.has(e.prototype?.file?.teamId??""))return u(o,e)}}).filter(e=>null!=e),favoritedFilesKeySet:i,favoritedPrototypesIdSet:o,favoritedFoldersIdSet:s}}function m(e,r,n,a,i){return _(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],a?.filter(e=>e.team&&!e.team.deletedAt)??[],i??[])}let _=(e,r,n,a,o)=>{let s=e.map(e=>({id:e.id,resourceType:i.bk.FILE,resource:e})),l=r.map(e=>({id:e.id,resourceType:i.bk.PROTOTYPE,resource:e}));return[...s,...l,...n.map(e=>({id:e.id,resourceType:i.bk.FOLDER,resource:e})),...a.map(e=>({id:e.id,resourceType:i.bk.TEAM,resource:e})),...o.map(e=>({id:e.id,resourceType:i.bk.WORKSPACE,resource:e}))]};function h(e,r){let n=s(r);return m(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function g(e){return!!e&&e>=1e3}function f(e,r){let n={};e.forEach(e=>{n[e.id]=e});let a=e.find(e=>""===e.name)?.id,i=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&a?[n[a],...i,...o]:[...i,...o]}function E(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let a=r?.map(e=>n[e]).filter(e=>e)??[],i=e.filter(e=>!(r&&r.includes(e.resource.id)));return i.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...a,...i]}},262179:(e,r,n)=>{function a(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>a}),n(186606)},508248:(e,r,n)=>{n.d(r,{b4:()=>x,g4:()=>G,n_:()=>B});var a=n(431160),i=n(19180),o=n(239910),s=n.n(o),l=n(458608),c=n(287105),d=n(304756),u=n(97481),p=n(314979),m=n(967688),_=n(952039),h=n(151223),g=n(572073),f=n(453370),E=n(31898),y=n(340938),b=n(594602),v=n(353231),T=n(381673),I=n(975887),S=n(329748),A=n(318147),w=n(55116),C=n(677334),N=n(361053),L=n(520779),O=n(259964),R=n(386252),P=n(938907),D=n(274016),k=n(946877),M=n(285908),F=n(976089);let x=(0,h.nF)(async(e,r)=>{let{fileKeys:n,repoIds:a}=r;if(n.length>0){let r=e.getState(),[a,...o]=await Promise.all([(0,N.R5)(n),...n.map(e=>C.M4.fetchFile(e))]);if(a){let s=r.teams[a],l=new Set(o.map(e=>e.editor_type)),c=l.size>1?null:l.has(A._Y.WHITEBOARD)?A._Y.WHITEBOARD:A._Y.DESIGN;l.has(A._Y.SITES)&&F.M&&!(0,i.k)().sts_starter_enabled?e.dispatch(E.to({type:F.M,data:{team:s}})):l.has(A._Y.FIGMAKE)&&(0,k.W)()?e.dispatch(E.to({type:M.i,data:{team:s}})):e.dispatch(E.to({type:D.DV,data:{team:s,action:R.ZN.RESTORE_FILES,editorType:l.has(A._Y.FIGMAKE)?A._Y.FIGMAKE:c,resource:l.has(A._Y.FIGMAKE)&&!(0,i.k)().bake_starter_limit?L.Bi.FIGMAKE:L.vL.FILE,multipleResources:n.length>1,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO}}))}else e.dispatch(g.Rh({fileKeys:s()(o,"key"),userInitiated:!0}))}if(a&&a.length>0){let r=await Promise.all(a.map(e=>C.M4.fetchRepo(e)));e.dispatch((0,y.i)({reposById:s()(r,"id"),userInitiated:!0}))}e.dispatch(b.an())});async function U({selectedFileKeys:e,currentSpaceDraftsFolderId:r,currentUserId:n,state:a,toDraft:i}){let o=await (0,l.S8)(w.M5e,e.map(e=>({fileKey:e}))),s=[],c=new Set;return o.forEach(({result:{data:e}})=>{let o;let{file:l}=e??{};if(!l)return;let{project:d,editorType:p,key:m}=l;if(null!=p&&c.add(p),l.parentOrgId){let e=n&&a.orgUsersByOrgId[l.parentOrgId]?.[n];o=e?e.drafts_folder_id:r}else if(l.teamId){let e=a.roles.byTeamId[l.teamId],i=n&&e&&a.teamUserByTeamId[l.teamId]?.[n];o=i?i.drafts_folder_id:r}else o=r;let _=(o||d?.id)??"",h=!i&&d&&(0,u.d6)(d,p??A._Y.DESIGN)?d.id:_;s.push({key:m,folderId:h})}),{copyFiles:s,editorTypes:c}}let B=(0,h.nF)(async(e,r)=>{let n=e.getState(),o=n.user?.id,s=n.user?.personal_drafts_folder_id,l=n.user?.drafts_folder_id,u=[s];o&&(u.push(...(0,I.x)(n.orgUsersByOrgId,o).map(e=>e.drafts_folder_id)),u.push(...(0,S._)(n.teamUserByTeamId,o).map(e=>e.drafts_folder_id||void 0)));let h=Object.keys(n.tileSelect&&n.tileSelect[P.F.FILES]||{}).concat(Object.keys(n.tileSelect&&n.tileSelect[P.F.PINNED_FILES]||{})),g=Object.keys(n.tileSelect&&n.tileSelect[P.F.REPOS]||{});(await Promise.all(g.map(e=>C.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&h.push(r)});let{copyFiles:y,editorTypes:b}=await U({selectedFileKeys:h,currentSpaceDraftsFolderId:l,currentUserId:o,state:n,toDraft:r.toDraft}),w=await (0,N.mx)(y);if(w){let r=n.teams[w],a=b.size>1?null:b.has(A._Y.WHITEBOARD)?A._Y.WHITEBOARD:A._Y.DESIGN;b.has(A._Y.SITES)&&F.M&&!(0,i.k)().sts_starter_enabled?e.dispatch(E.to({type:F.M,data:{team:r}})):b.has(A._Y.FIGMAKE)&&(0,k.W)()?e.dispatch(E.to({type:M.i,data:{team:r}})):e.dispatch(E.to({type:D.DV,data:{team:r,action:R.ZN.DUPLICATE_FILES,editorType:a,resource:b.has(A._Y.FIGMAKE)&&!(0,i.k)().bake_starter_limit?L.Bi.FIGMAKE:L.vL.FILE,multipleResources:y.length>1,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO}}));return}let x=y.map(({key:r,folderId:n})=>()=>{let a=d.Ay.post(`/api/multiplayer/${r}/copy?${(0,c.lF)({folder_id:n})}`);return a.catch(({data:r})=>{r&&r.message?e.dispatch(p.s.error(r.message)):e.dispatch(p.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))}),a});(0,a.Ed)(x,8).then(r=>{if(!r.some(e=>"reject"===e.type)){let a=y.filter(e=>!!e.folderId&&u.includes(e.folderId)).length,i=r=>r&&r.editor_type?{text:(0,m.t)("general.open"),action:()=>{e.dispatch(f.$T({view:"fullscreen",fileKey:r.key,editorType:(0,O.wN)(r.editor_type)})),e.dispatch(_.F.dequeue({}))}}:void 0;if(a>0&&("folder"!==n.selectedView.view||n.selectedView.folderId!==l)){let n,o="",s=1===y.length;o=s?(0,m.t)("user_view.file_duplicated_to_your_drafts"):a===y.length?(0,m.t)("user_view.files_duplicated_to_your_drafts",{intArg:a}):(0,m.t)("user_view.some_files_duplicated_to_your_drafts"),n=s?i(r[0].resolve?.data?.meta):{text:(0,m.t)("general.show"),action:()=>{l&&e.dispatch(f.$T({view:"folder",folderId:l})),e.dispatch(_.F.dequeue({}))}},e.dispatch(_.F.enqueue({type:"file_duplicated",message:o,button:n}))}else if("folder"===n.selectedView.view){let n=i(1===y.length?r[0].resolve?.data?.meta:void 0);e.dispatch(_.F.enqueue({type:"file_duplicated",message:1===y.length?(0,m.t)("user_view.file_duplicated"):(0,m.t)("user_view.files_duplicated",{intArg:y.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,v.ak)(y,o,e.getState())}})}),G=(0,h.nF)(e=>{e.dispatch(B({toDraft:!0}))});(0,h.nF)((e,r)=>{let n=e.getState(),a=n.user?.drafts_folder_id;return d.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,c.lF)({folder_id:a})}`).then(()=>{e.dispatch(p.s.flash((0,m.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(p.s.error(r.message)):e.dispatch(p.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},5990:(e,r,n)=>{n.d(r,{Ct:()=>J,LK:()=>j,Nr:()=>en,Q3:()=>et,Q4:()=>X,SX:()=>ei,Xg:()=>q,iT:()=>ee,jl:()=>$,k4:()=>Z,mq:()=>Q,xT:()=>er});var a=n(301168),i=n(871043),o=n(167920),s=n(755595),l=n(183603),c=n(329228),d=n(304756),u=n(314979),p=n(967688),m=n(952039),_=n(426902),h=n(151223),g=n(807949),f=n(453370),E=n(679111),y=n(31898),b=n(699547),v=n(768623),T=n(353231),I=n(381673),S=n(249726),A=n(468709),w=n(318147),C=n(55116),N=n(677334),L=n(361053),O=n(679996),R=n(343851),P=n(520779),D=n(163554),k=n(190731),M=n(334619),F=n(94831),x=n(175957),U=n(386252),B=n(295859),G=n(583940),V=n(694390),H=n(274016),z=n(964765);let K=(0,h.nF)((e,{folderId:r,folderData:n})=>{(0,a.vA)(()=>{e.getState().folders[r]?e.dispatch(E.yJ({folder:n.folder})):e.dispatch(E.bE(n.folder)),e.dispatch(g.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(b.nX({repos:n.repos})),e.dispatch(v.uo({roles:n.roles})),e.dispatch(E.Kc({folderId:r,state:"loaded"}))})}),W=N.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await B.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(g.uo({files:n.data.meta.files})),r.dispatch(b.nX({repos:n.data.meta.repos})),r.dispatch(v.uo({roles:n.data.meta.roles})),r.dispatch(E.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:k.lH.nullable(),files:e.array(D.L),repos:e.array(M.z)}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let a=new Date(new Date().setHours(0,0,0,0));return n.subscribe(C.m0h,{projectId:e,updatedAtTimestamp:a},n=>{r(r=>{let a=r.files;(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{a.find(r=>r.key===e.key)||r.files.unshift((0,R.W$)(e))})})})},syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(i.Vq),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:a,previewFiles:[...n,...o],filesByRepoId:s}}});function j(e,r=!0,n=!1){let[a]=(0,N.IT)(W({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return a}let Y=s.z.object({folder:k.lH.nullable(),files:s.z.array(D.L),repos:s.z.array(M.z),roles:s.z.array(F.an)});N.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let a;if(r)a=r;else{let{folderId:r,...n}=e,i=new URLSearchParams({...n,page_size:"50"}).toString();a=`/api/folders/${r}/paginated_files?${i}`}let i=await (0,d.GD)(a),o=i.data.meta;return n.dispatch(g.uo({files:o.files})),n.dispatch(b.nX({repos:o.repos})),n.dispatch(v.uo({roles:o.roles})),n.dispatch(E.Kc({folderId:e.folderId,state:"loaded"})),{data:i.data.meta,nextPage:i.data.pagination?.next_page,prevPage:i.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e.length>0?e[e.length-1].data.folder:null}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let a=new Date(new Date().setHours(0,0,0,0));return n.subscribe(C.m0h,{projectId:e,updatedAtTimestamp:a},n=>{r(r=>{let a=r[0];a&&(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{r.find(r=>!!r.files.find(r=>r.key===e.key))||a.files.unshift((0,R.W$)(e))})})})},output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),a=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),i={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());i[r.id]=n}),{folder:e.folder,files:n,repos:a,filesByRepoId:i}},schema:Y,syncObjects:!0});let $=(0,h.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(E.Kc({folderId:r,state:"loading"}));try{let n=(await B.W.getFiles({folderId:r})).data.meta;e.dispatch(K({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(f.$T({view:"resourceUnavailable",resourceType:x.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(E.Kc({folderId:r,state:"loaded"})):e.dispatch(E.Kc({folderId:r,state:null}))}}}),q=N.M4.Query({fetch:async e=>(await G.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(k.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))}),X=N.M4.Mutation((e,{reduxStore:r})=>B.W.permanentlyDelete({folderId:e.folderId}).then(()=>{r.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),J=N.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let a=B.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,u.Q)({promise:a,fallbackError:(0,p.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,l.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},a)}),Z=N.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:a})=>{let i=B.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),a.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,p.t)("visual_bell.show_in_toast",{destination:r?.name??"Recents"}),action:()=>{r?a.dispatch(f.$T({view:"team",teamId:r.id})):a.dispatch(f.$T({view:"recentsAndSharing"}))}}}))});a.dispatch((0,u.Q)({promise:i,fallbackError:(0,p.t)("file_browser.api_folder.error_when_restoring")})),(0,l.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},i)});N.M4.Mutation(e=>B.W.batchDelete({folderIds:e.folderIds}));let Q=N.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:a})=>{let i=(0,S.SS)(r);if(i){a.dispatch(u.s.error(i));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,T.xr)("Folder Renamed",e,null,a.getState(),{folderName:r});let o=d.Ay.put("/api/folders/rename",{folder_id:e,name:r});return a.dispatch((0,u.Q)({promise:o,fallbackError:(0,p.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,l.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},o),o}),ee=(0,h.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let a=d.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(o.c(n))}).catch(()=>{e.dispatch(o.r(n))});(0,u.Q)({promise:a,fallbackError:(0,p.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),et=(0,h.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let a=B.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(o.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(o.r(n))});(0,u.Q)({promise:a,fallbackError:(0,p.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),er=(0,h.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let a=B.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(o.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(o.r(n))});(0,u.Q)({promise:a,fallbackError:(0,p.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),en=(0,h.nF)(async(e,r)=>{let n=r.folder,a=r.team,i=(0,A.Ws)(a);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(y.to({type:V.z,data:{folder:n}}));return}try{await B.W.getCanMove({teamId:a.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(y.to({type:H.DV,data:{team:i,resource:P.vL.FOLDER,action:U.ZN.MOVE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null,upsellSource:O.b.FOLDER_MOVE_MODAL}})):e.dispatch(u.s.error(r.data?.message));return}if(n.teamId&&i){e.dispatch(y.to({type:z.o,data:{folder:n,destinationTeam:i,onConfirm:()=>{(0,c.Jl)(ea)({folder:n,team:i})}}}));return}(0,c.Jl)(ea)({folder:n,team:i}),r.onSuccess&&r.onSuccess()}),ea=N.M4.Mutation((e,{query:r,objects:n,reduxStore:a})=>{let{folder:i,team:o}=e;(0,T.xr)("Folder Moved",i.id,null,a.getState(),{destTeamId:o.id});let s=d.Ay.put("/api/folders/move",{folder_id:i.id,team_id:o.id}).then(()=>{a.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.folder_move.project_moved_toast",{folderName:i.path,teamName:o.name})}))});return a.dispatch((0,u.Q)({promise:s,fallbackError:(0,p.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),l.WB()?.optimisticallyUpdate({Project:{[i.id]:{teamId:o.id}}},s),i.teamId&&(r.mutate(q({teamId:i.teamId}),e=>{let r=e.findIndex(e=>e.id===i.id);-1!==r&&e.splice(r,1)}),n.Folder.update(i.id,e=>{e.team_id=o.id})),s}),ei=(0,h.nF)((e,r)=>{let n=e.getState(),a=r.where,i=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===a&&n.creatingNewFolder.teamId===i,s=r.team;if(!o){if(s.canEdit)(0,L.rR)(s,{type:L.sK.ADD_PROJECT})?(e.dispatch(f.sf({where:a,teamId:i})),e.dispatch(y.to({type:(0,_.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(y.to({type:H.DV,data:{team:s,resource:P.vL.FOLDER,action:U.ZN.CREATE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null}}));else{let r=s?(0,p.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,p.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(u.s.flash(r))}}})},705693:(e,r,n)=>{n.d(r,{IA:()=>L,KQ:()=>N,UM:()=>P,vr:()=>R,zK:()=>O});var a=n(989232),i=n(183603),o=n(751561),s=n(304756),l=n(314979),c=n(967688),d=n(210853),u=n(952039),p=n(151223),m=n(453370),_=n(422444),h=n(35597),g=n(768623),f=n(198850),E=n(84811),y=n(353231),b=n(318147),v=n(610345),T=n(89140),I=n(411910),S=n(94831),A=n(175957),w=n(63767),C=n(59473);let N=(0,p.nF)((e,r)=>{let{teamName:n,orgAccess:a,workspaceId:i,description:o,defaultPermission:p,sharingAudienceControl:h,orgBrowsable:E,hidden:v,ignoreCurrentPlan:I}=r,C=e.getState().currentUserOrgId,N={team_name:n};!C||I||(N.org_id=C,h||(N.org_access=a)),i&&(N.workspace_id=i),o&&(N.description=o),p&&!h&&(N.default_permission=p),h&&(N.sharing_audience_control=h),E&&(N.org_browsable=E),v&&(N.hidden=v),e.dispatch(f.r1({loading:!0})),s.Ay.post("/api/teams/create",N).then(({data:n})=>{let a="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",a.id,e.getState(),{sharing_audience_control:h,org_browsable:E,hidden:v}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(a),function(e,r,n){let a=r.getState().user,i=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:o}=n;i&&!o&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal",teamId:e.id})):n.teamFlowType===A.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:a?new Set([a.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow",teamId:e.id})),w.G.getTeam({teamId:e.id}).then(({data:i})=>{for(let e of i.meta)r.dispatch(g.bE({role:e}));let s=r.getState().currentUserOrgId&&!o;if(n.dontRedirect)r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,c.t)("team_creation.you_have_created_a_new_team")})),r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(r.dispatch(f.r1({loading:!1})),n.onSuccess()),s||n.teamFlowType===A.SC.CREATE)r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,c.t)("team_creation.you_have_created_a_new_team")}));else if(a?.id){let n={view:"addCollaborators",teamId:e.id},i={userId:a.id,teamId:e.id,orgId:null};r.dispatch(_._l({workspace:i,view:n}))}else r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"addCollaborators",teamId:e.id}))})}(a,e,r)}).catch(r=>{let n=(0,d.J)(r,r?.response?.message||(0,c.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(l.s.error(n)),e.dispatch(f.r1({loading:!1}))})}),L=(0,p.nF)((e,r)=>{let n=r.team,a=n.id,l=n.name,d=r.name;(0,y._J)("Team Renamed",a,e.getState());let p=s.Ay.put(`/api/teams/${a}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,c.t)("change_team_name_visual_bell.text",{oldTeamName:l,newTeamName:d}),button:{text:(0,c.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(L({team:n.meta,name:l,skipVisualBell:!0}))}}}))});return i.WB()?.optimisticallyUpdate({Team:{[a]:{name:d}}},p),(0,o.Q)({requestPromise:p,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),O=(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,o.Q)({requestPromise:s.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})}),R=(0,p.nF)((e,r)=>{(0,a.trackEvent)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,v.p9)(r.teamId);(0,I._X)("onJoinTeam").then(a=>{let i=r.teamId;e.dispatch(m.Qv(a.data.meta));let o=e.getState().teams[i].name;switch(r.level){case S.e6.OWNER:e.dispatch(l.s.flash((0,c.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(l.s.flash((0,c.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(l.s.flash((0,c.t)("join_team_flash.text",{teamName:o})))}e.dispatch(h.x2({key:n}))}).catch(()=>{e.dispatch(h.of({key:n}))}),e.dispatch(f.mw(r))}),P=(0,p.nF)((e,r)=>{(0,a.trackEvent)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,v.n1)(r.teamIds);(0,I._X)("onBatchJoinTeams").then(a=>{e.dispatch(m.Qv(a.data.meta));let i=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.as_owner.text",{teamCount:i})));break;case S.e6.ADMIN:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.as_admin.text",{teamCount:i})));break;default:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.text",{teamCount:i})))}e.dispatch(h.x2({key:n}))}).catch(()=>{e.dispatch(h.of({key:n}))}),e.dispatch(f.ii(r))});(0,p.nF)(e=>{let r=e.getState().currentUserOrgId;C.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},765770:(e,r,n)=>{n.d(r,{Ad:()=>S,Ir:()=>C,Jj:()=>T,bY:()=>E,dE:()=>w,m1:()=>I,nk:()=>f});var a=n(870567),i=n(961736),o=n.n(i),s=n(918777),l=n(461979),c=n(967688),d=n(859172),u=n(106340),p=n(318147),m=n(806349),_=n(259964);n(759975);var h=n(240176),g=n(249726),f=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(f||{});function E(e){return{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1}}function y(e){return{file:E(e),repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,_.wN)(e.editor_type),numProjectTeamMembersWithAccess:0,planTier:null}}function b(e){return e.fileLinkExpirationConfig||e.sourceFileLinkExpirationConfig}function v(e){return e.repo?.defaultFileKey===e.key}function T(e){let r=b(e),n=v(e),i=e.pwdConfig?.updatedAt||null,o=e.pwdConfig?.setByUser?(0,m.Um)(e.pwdConfig.setByUser):null,s={...u.F.toSinatra(e),client_meta:e.clientMeta||"",created_at:e.createdAt?.toString()||"",creator_id:e.creator.id,description:e.description||"",is_template:!!e.trackTags?.isTemplate,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType,org_audience:!!e.orgAudience,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,touched_at:"",trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,l.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,l.sy)(e.name||"")}`};return{canEdit:e.canEdit,canEditCanvas:e.canEditCanvas,hasEditRole:e.hasEditRole,hasViewRole:e.hasViewRole,canView:e.canView,canViewPrototype:e.canViewPrototype,canViewPrototypeLinks:e.hasViewPrototypeRole,canMove:e.canMove,passwordSetAt:i,passwordSetByUser:o,isOwner:n?!!e.repo?.roleOnObjectForUser?.isOwnerOfResource:!!e.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!e.publishedHubFile&&!e.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,m.Nl)(r),folderAccessEnabled:e.folderAccessEnabled&&(0,a.oA)(e.folderAccessEnabled)||!1,isDraftFileLG:e.isDraftFile&&(0,a.oA)(e.isDraftFile)||!1,isAbandonedDraftFile:e.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,a.oA)(e.mustUpgradeToShareDraft)||!1,...s}}function I(e,r){if("loaded"!==e.status)return y(r);let n=e.data.file;if(!n)return y(r);let i=b(n),o=v(n),s="loaded"===e.status&&e.data.file?T(e.data.file):E(r),l={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(l[e.userId]=e)});let c=n.project,d=null;c&&(d=c.teamAccess);let u=new Set,f={};n.project&&n.project.roles.forEach(e=>{e.userId&&(f[e.userId]=e,u.add(e.userId))});let I={};n.team&&n.team.roles.forEach(e=>{e.userId&&(I[e.userId]=e,d&&d!==p.eD.TEAM_ACCESS_DISABLED&&u.add(e.userId))});let S={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,m.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,a=l[r.id],i=I[r.id],o=f[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,c=(0,m.aU)(e,r,n||null,s||null);S[r.id]=c.pending?{...c,invite:N(e.invite)}:{...c,folderLevel:o?.level||null,teamLevel:i?.level||null,repoLevel:a?.level||null}}else if(e.pending){let r=(0,m.aU)(e,null,null,null);S[`pending-${e.id}`]={...r,invite:N(e.invite)}}});let w={};(0,h.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,m.Um)(e.user):null;if(r){let n=l[r.id],a=I[r.id],i=f[r.id],o=(0,m.WP)(e,r);w[o.user_id]={...o,folderLevel:i?.level||null,teamLevel:a?.level||null,repoLevel:n?.level||null}}});let C={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(C[e.org.id]={})});let L=n.repo?{...(0,m.Xs)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,m.Nl)(i)}:null;if(A(i)){let e={link_access:i.prevPrivateLinkAccess,proto_link_access:i.prevPrivateProtoLinkAccess,org_browsable:i.prevOrgBrowsable};s={...s,...e},L&&(L={...L,...e})}let O=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||p.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,m.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null;var R=void 0;n.org&&null!==n.org.imgUrl&&(R=n.org.imgUrl);let P=n.org&&n.org.k12GoogleOrg&&(0,a.oA)(n.org.k12GoogleOrg);return{file:s,repo:L,rolesByUserId:S,fileSeenStatesByUserId:w,fileRoleRequests:n.fileRoleRequests,folder:c&&{name:c.path,is_view_only:!!c.viewOnlyAt,is_invite_only:!!c.inviteOnlyAt,team_id:c.teamId,team_access:d,canRead:c.canRead&&(0,a.oA)(c.canRead)||!1},folderRoles:c&&c.roles||[],isInDraftsFolder:(0,g.VA)(c),orgDraftsOwner:O,org:n.org?{id:n.org.id,name:n.org.name,img_url:R,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,m.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!P}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:n.team.imgUrl??void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:C,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,m.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,_.wN)(s.editor_type),numProjectTeamMembersWithAccess:u.size,activeProjectConnection:n.activeProjectResourceConnections?.[0],planTier:n.planPublicInfo?.tier||null}}function S(e,r){let n;let a=null,i=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",a=o()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",i=o()(e.errors||[],r.errors||[])):n="loading",{status:n,data:a,errors:i}}let A=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,s.A)().isAfter(n)};function w({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,c.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,c.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function C(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===p.PQ.INHERIT)}function N(e){return e?{id:e.id,redeemedBy:e.redeemedBy,billableProductKey:e.billableProductKey?(0,d.Zx)(e.billableProductKey):null}:null}},956158:(e,r,n)=>{n.d(r,{$T:()=>u,sf:()=>c});var a=n(186606),i=n(107712),o=n(944239),s=n(175528),l=n(732550);function c(e,r){let n=new XMLHttpRequest;return n.open("GET",`/api/hub_files/cover_image?file_key=${e}`,!0),n.setRequestHeader("X-Figma-User-ID",r.id),n.setRequestHeader("X-Csrf-Bypass","yes"),n.setRequestHeader("tsid",(0,i.f)()),n.responseType="blob",new Promise((e,r)=>{n.onreadystatechange=function(){if(n.readyState!==XMLHttpRequest.DONE)return;if(n.status<200||n.status>=400){r(Error(`Failed to fetch thumbnail: ${n.statusText}`));return}let a=new Image;a.src=URL.createObjectURL(n.response),a.onload=async()=>{let r=document.createElement("canvas");r.width=l.PJ,r.height=l.Oq;let n=r.width,i=a.height*(r.width/a.width),o=0,c=r.height/2-i/2;i<r.height&&(i=r.height,n=a.width*(r.height/a.height),o=r.width/2-n/2,c=0),r.getContext("2d").drawImage(a,o,c,n,i);let d=await new Promise(e=>r.toBlob(e)),[u]=await Promise.all([(0,s.c)(d)]);e({url:URL.createObjectURL(new Blob([u||""])),buffer:new Uint8Array(u)})}},n.send(null)})}let d=(0,o.D)(e=>{if(!a.Vzr)return null;let[r,n]=a.Vzr.generateThumbnailForNode(e,l.PJ,l.Oq,2,{});return n});function u(e,r){var n;let a;return n=e?.thumbnailGuid,a=null,(n&&(a=d(n)),(!a||0===a.length)&&r&&(a=d(r)),a&&0!==a.length)?{url:URL.createObjectURL(new Blob([a])),buffer:a}:null}},691450:(e,r,n)=>{var a=n(904331);a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR,a.lu.TITLE,a.vj.BOLD,a.vj.REGULAR,a.lu.BODY,a.vj.BOLD,a.vj.MEDIUM,a.vj.REGULAR,a.lu.LABEL,a.vj.MEDIUM,a.vj.REGULAR},576489:(e,r,n)=>{n.d(r,{zD:()=>u}),n(848318),n(92454);var a=n(818995),i=n(320953),o=n(967688),s=n(439952),l=n(592971);n(261357);var c=n(389109);async function d({node:e,base64:r,name:n,scaleMode:o,backgroundFill:l,shouldContinueStream:d}){if(!e.isAlive)return;let u=await (0,c.xF)(r,["*"]),p=await (0,s.UD)(u,"image/png",n);if(!e.isAlive||!d())return;let m=[...e.fills];i.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(p)});let _=e.fills[m.length],h=(0,a.B9)(_.image?.hash||[]);return i.l7.ai("first-draft-set-image-fill",()=>{_.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,a)=>a===n?r:e).flat():r}(m,l?[l,_]:[_]),e.name=n}),h}async function u({node:e,shouldContinueStream:r=()=>!0}){await d({node:e,base64:l.$,shouldContinueStream:r,name:(0,o.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function p(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((a,i)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),a()},o.onerror=i,o.src=e});let a=r.width,i=r.height,o=n.getImageData(0,0,a,i),s=0,l=i,c=0,d=a,u=(e,r)=>0===o.data[r*a*4+4*e+3],p=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},m=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&p(s);)s++;for(;l-1>s&&p(l-1);)l--;for(;c<d&&m(c);)c++;for(;d-1>c&&m(d-1);)d--;let _=n.getImageData(c,s,d-c,l-s),h=r.ownerDocument.createElement("canvas");return h.width=_.width,h.height=_.height,h.getContext("2d").putImageData(_,0,0),h.toDataURL()}n(356066),n(69946),n(468415)},864277:(e,r,n)=>{n(947239),n(92454);var a=n(938982),i=n(186606),o=n(320953),s=n(768618);n(19180),n(382902);var l=n(476254),c=n(998568);n(810503);var d=n(304756),u=n(526867);n(642935),n(601167),n(730143);var p=n(656320),m=n(866384),_=n(944239);n(6406),n(818222),n(752214);var h=n(468415);function g(e,r,n){let a;let s=(0,h._F)(e,["FRAME","INSTANCE"]);a="LOCAL"===r.type?{type:i.AZ4.LOCAL,key:i.XJn.getKitKey(r.pageId)||""}:{type:i.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:a}})}n(576489);(0,_.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:l}){let d;if(!r.symbolId)return;let p=(0,s.UN)(),_=p.get(r.symbolId);if(!_)return;let{key:f,version:E}=(await m.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:h.C,description:n})).data.meta;if(!f){(0,c.$D)(a.e.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:_.guid}});return}let y=E?`/component/${f}/canvas?ver=${E}`:`/component/${f}/canvas`;if(!(d=await u.Eo.getCanvas({canvas_url:y})))return;let b=i.NfO.deserializeProductComponentFromBuffer(f,d),v=p.get(b);v&&"SYMBOL"===v.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(v),g(r,e,l)})});(0,_.n)(async function(e,r){let n=(0,p.U2)(l.D?.getState().selectedView),a=await d.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r,file_key:n});return a.data?.meta?.should_detach??[]})},129921:(e,r,n)=>{n.d(r,{Py:()=>S,RI:()=>v,gZ:()=>T});var a=n(947239),i=n(876747),o=n(660376),s=n(818222),l=n(768618),c=n(19180),d=n(904331),u=n(468415),p=n(534386),m=n(547284),_=n(139730);function h(e){return e.classPropName??"className"}function g(e){if("INSTANCE"===e.type&&e.symbolId){let r=(0,a.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(r?.jsxName)return r.jsxName}let r=e.getSharedPluginData("jsx","type");return r&&"HStack"!==r&&"VStack"!==r?r:null}function f(e,r){let n={};if(!r.skipNodeIds&&(!r.skipNodeIdsWithoutType||g(e))&&(n.id=(0,l.UN)().developerFriendlyIdFromGuid(e.guid)),r.includeName&&(n.name=e.name),r.includeType&&!("INSTANCE"===e.type&&!r.detachInstances)){let r=g(e);r&&(n.type=r)}if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences();if(a&&"visible"in a){let e=a.visible,i=r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e);i&&(n.visible=`{${b(i.devFriendlyProp)}}`)}}return n}let E=["SYMBOL","INSTANCE","FRAME","GROUP","SECTION","RECTANGLE","ELLIPSE","LINE"];function y(e,r){let n=f(e,r);n.type=e.type;let a=(0,i.Ed)(e,{...d.LW,position:!0,size:!0});return a.length&&(n[h(r)]=a.join(" ")),`<Unhandled ${(0,m.d)(n)} />`}function b(e){let r="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=r.key;if("index"in r){if(!(0,c.k)().first_draft_ts_arrays)return r.nonArrayKey;n+=`[${r.index}]`}return"DERIVED_BOOLEAN"===e.type?`!!${n}`:n}function v(e,r){if("INSTANCE"!==e.type)throw Error(`Expected INSTANCE, got ${e.type} for node ${e.guid}`);if(!e.symbolId)throw Error(`INSTANCE has no symbolId ${e.guid}`);let n=(0,a.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!n)throw Error(`Could not get typeInfo for component ${e.symbolId}`);let o=f(e,r);if(!r.skipClassNames){let n=(0,i.Ed)(e,{...d.LW,position:!0});n.length&&(o[h(r)]=n.join(" "))}let p=(0,u.vR)(n);if(p&&e.symbolId){let r=(0,u.So)(e.symbolId,"SYMBOL");return Object.assign(o,(0,u.Kp)(p,r)),`<${(0,u.PJ)(p)} ${(0,m.d)(o)}/>`}Object.assign(o,function e(r,n,i){if(!r.symbolId)return{};let o=!!(0,c.k)().first_draft_ts_arrays,d=(0,a.getComponentInfoById)(r.symbolId,{enableTsArrays:o});if(!d)throw Error(`Could not find mainComponent for node ${r.guid}`);if(!(0,l.UN)().get(r.symbolId))throw Error(`Could not find symbol ${r.symbolId} for node ${r.guid}`);let p=(0,u.Au)(r.guid,["INSTANCE"]),m={};p.forEach(e=>{let r=e.componentPropertyReferences();"mainComponent"in r&&(m[r.mainComponent]=e.visible)});let _={};for(let[e,n]of Object.entries(r.componentProperties()))_[(0,a.cleanComponentPropNameForUsage)(e)]=n;let h={},g={};for(let e of d.parsedDefs){if("DERIVED_BOOLEAN"===e.devFriendlyProp.type)continue;let a="ARRAY"===e.devFriendlyProp.type?e.devFriendlyProp.nonArrayKey:e.devFriendlyProp.key;if(a in _){if("SIMPLE"===e.devFriendlyProp.type){let r=_[a].value;(n||e.def.defaultValue!==r)&&(g[a]=r);continue}if("SIMPLE_CHOICE"===e.devFriendlyProp.type){let r=e.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===e.def.type){let e=(0,s.c)(_[a].value);if(!e)throw Error("Could not find component for componentProp");if("SYMBOL"===e.type){let n=Object.values(e.variantProperties??{})[0];-1!==r.indexOf(n)?g[a]=n:console.error(`Could not find ${n} in ${JSON.stringify(r)}`)}continue}if("VARIANT"===e.def.type){let e=_[a].value;-1!==r.indexOf(e)?g[a]=e:console.error(`Could not find ${e} in ${JSON.stringify(r)}`)}}if("GROUPED_INSTANCE_SWAP"===e.def.type&&i){let r=_[a].value;if(n||e.def.defaultValue!==r){let n=(0,l.UN)().get(r);if(!n)throw Error(`Could not find icon symbol ${r}`);if(!m[e.rawProp])continue;let i={description:n.name};o&&"ARRAY"===e.devFriendlyProp.type?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],i]:g[a]=i}}}if("IMAGE"===e.def.type){if(i){g[a]={id:"0"};continue}let n=e.def.guidByParentComponentId[r.symbolId];if(n){let e=(0,u.uN)(r.guid,n);if(e){let r=(0,l.UN)().get(e),n=r?A(r):null;n&&(g[a]={description:n})}}}else if("NESTED_INSTANCE"===e.def.type)for(let r of Object.values(e.def.guidByParentComponentId))h[r]=e}let f=(0,l.UN)().developerFriendlyIdFromGuid(r.guid),E=f.startsWith("I")?`${f};`:`I${f};`;for(let s of(0,u.g5)(r.guid)){let r=(0,l.UN)().developerFriendlyIdFromGuid(s.guid).replace(E,"").split(";"),c=r[0];if(c&&1===r.length&&s.isBubbled&&s.symbolId){let r=e(s,n,i);if(Object.keys(r).length){let e=h[c];e&&"key"in e.devFriendlyProp?"ARRAY"===e.devFriendlyProp.type?o?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],r]:g[e.devFriendlyProp.nonArrayKey]=r:g[e.devFriendlyProp.key]=r:g[(0,a.cleanComponentPropNameForUsage)(s.name)]=r}}}if(o)for(let[e,r]of Object.entries((0,a.groupByCommonPrefixSorted)(Object.keys(g))))for(let n of(g[e]=r.map(e=>g[e]),r))delete g[n];return g}(e,r.includeDefaultValues??!1,r.includeCustomImageAndIconProps??!1));let _="";if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let i=e.componentPropertyReferences().mainComponent,s=r.componentDefinitionTypeInfo.parsedDefs.find(n=>{if(e.isBubbled&&"NESTED_INSTANCE"===n.def.type){for(let i of(0,a.getInstanceIdsForDef)(r.componentDefinitionTypeInfo?.componentId??"",n))if(i===e.guid)return!0}return!!i&&n.rawProp===i});if(s){if("SLOT"===s.def.type)return`{${b(s.devFriendlyProp)}}`;if(1===n.parsedDefs.length){let e=n.parsedDefs[0].devFriendlyProp.key;e in o?o[e]=`{${b(s.devFriendlyProp)} ?? ${JSON.stringify(o[e])}}`:o[e]=`{${b(s.devFriendlyProp)}}`}else _=`{...${b(s.devFriendlyProp)}}`}}return`<${[n.jsxName,(0,m.d)(o),_].filter(Boolean).join(" ")} />`}function T(e,r){return function(e,r={},n={includePropsType:!1},i){if(!("SYMBOL"===e.type||e.isStateGroup))throw Error(`Expected SYMBOL or isStateGroup, got: ${e.type}`);let s=i??(0,a.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!s)throw Error(`Could not find typeInfo for node: ${e.guid}`);let l=Object.values(s.prefixTypes),d={...r,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:s},m=new _.f,h=s.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?(0,c.k)().first_draft_ts_arrays?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:e.devFriendlyProp.nonArrayKey:void(0,o.xb)(e.devFriendlyProp)).filter(Boolean);if(n.includePropsType?(h.length>0&&s.propsTypeRepr.typeDefBody&&(m.append(`type ${s.jsxName}Props = `),m.append((0,p.CT)(s.propsTypeRepr.typeDefBody)),m.newline()),m.append(`function ${s.jsxName}(`),h.length>0&&(m.append(`{ ${h.join(", ")} }`),m.append(`: ${s.jsxName}Props`)),m.append(") {")):(m.append(`const ${s.jsxName}: React.FC<${s.propsTypeRepr.typeDefBody??"{}"}> = (`),h.length>0&&m.append(`{${h.join(", ")}}`),m.append(") => {")),m.newline(),"SYMBOL"===e.type)m.append(d.formatJSX?(0,p.uG)(I(e,d)):`  return ${I(e,d)}`),m.newline(),m.append("}");else if(e.isStateGroup){let r=!0;if((0,c.k)().first_draft_serialize_all_variants){for(let n of(0,u.Au)(e.guid,["COMPONENT"])){if("SYMBOL"!==n.type)continue;let e=n.variantProperties();e&&(r&&d.formatJSX&&m.append(p.BH),r||m.append(" else "),m.append("if ("),m.append(Object.entries(e).map(([e,r])=>`${(0,a.toCamelCase)(e)} === ${JSON.stringify(r)}`).join(" && ")),m.append(") {"),d.formatJSX?(m.newline(),m.append((0,p.C5)((0,p.uG)(I(n,d)),p.BH)),m.newline(),m.append(`${p.BH}}`)):(m.append(`    return ${I(n,d)}`),m.newline(),m.append("}")),r=!1)}d.formatJSX?(m.newline(),m.append(`${p.BH}return null`)):m.append("  return null;")}else{let r=e.defaultVariant;r?m.append(d.formatJSX?(0,p.uG)(I(r,d)):`  return ${I(r,d)}`):m.append("return null")}m.newline(),m.append("}")}return{nodeId:e.guid,prefixTypes:d.formatJSX?l.map(e=>(0,p.S3)(e)):l,jsxStr:m.toString()}}(e,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",tailwindOptions:{size:!0,position:!0,flex:!0,radius:!1,color:!1,typography:!1},formatJSX:!0},{includePropsType:!0},r)}function I(e,r){if("SYMBOL"!==e.type)throw Error(`Unexpected node type: ${e.type}`);return S(e,{...r,parentComponentId:e.guid,tailwindOptions:r.tailwindOptions?{...r.tailwindOptions,position:!1}:{position:!1}})||"null"}function S(e,r){if(!1===e.visible)return null;let n={indent:"",...r},o=[];switch(e.type){case"INSTANCE":case"SYMBOL":case"SECTION":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!n.detachInstances){o.push(`${n.indent}${v(e,n)}`);break}if("SYMBOL"===e.type&&"DEFINITION"!==n.componentUsageOrDefinition){o.push(`${n.indent}${function(e,r){if("SYMBOL"!==e.type)throw Error(`Expected SYMBOL, got ${e.type} for node ${e.guid}`);let n=f(e,r),i=(0,a.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!i)throw Error(`Could not find typeInfo for component: ${e.guid}`);return n.name=i.jsxName,"variantProperties"in e&&Object.assign(n,e.variantProperties),`<ComponentType ${(0,m.d)(n)} />`}(e,n)}`);break}let[r,s,l]=function(e,r){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);let n=f(e,r),o=A(e);o&&(n.description=o);let s=a.IMAGE_NAME_FORMAT.test(e.name),l=e.fills.some(e=>"IMAGE"===e.type),c=!!o||s||l,d=(0,i.Ed)(e,r.tailwindOptions);d.length&&(n[h(r)]=d.join(" "));let u=function(e,r,n,a){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);switch(e.type){case"SYMBOL":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return r?a.autoLayoutTagName??"AutoLayout":a.frameTagName??"Frame";case"SECTION":return"Section";default:return"UNKNOWN"}}(e,-1!==d.indexOf("flex"),c,r);if(c&&"DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo&&r.parentComponentId){let a=r.componentDefinitionTypeInfo,i=r.parentComponentId,o=a.parsedDefs.find(r=>"IMAGE"===r.def.type&&r.def.guidByParentComponentId[i]===e.guid);if(o){let e=`{...${b(o.devFriendlyProp)}}`;return[`<${u} ${(0,m.d)(n)} ${e}>`,`<${u} ${(0,m.d)(n)} ${e} />`,`</${u}>`]}}return[`<${u} ${(0,m.d)(n)}>`,`<${u} ${(0,m.d)(n)} />`,`</${u}>`]}(e,n),d=e.childrenNodes.map(e=>S(e,{...n,tailwindOptions:{...n.tailwindOptions,position:!0},indent:n.formatJSX?n.indent+p.BH:n.indent}));if(d.length&&d.some(e=>e)){for(let e of(o.push(`${n.indent}${r}`),d))e&&o.push(e);o.push(`${n.indent}${l}`)}else o.push(`${n.indent}${s}`);break}case"TEXT":o.push(`${n.indent}${function(e,r){if("TEXT"!==e.type)throw Error(`Expected TEXT, got ${e.type} for node ${e.guid}`);let n=f(e,r),o=(0,i.Ed)(e,r.tailwindOptions);if(o.length&&(n[h(r)]=o.join(" ")),"DEFINITION"===r.componentUsageOrDefinition){let i=e.componentPropertyReferences();if(i&&"characters"in i){let e=i.characters,o=r.componentDefinitionTypeInfo&&r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e),s=o?b(o.devFriendlyProp):(0,a.cleanComponentPropNameForUsage)(e);return`<Text ${(0,m.d)(n)}>{${s}}</Text>`}}let s=e.characters&&e.characters.includes('"')?`{${JSON.stringify(e.characters)}}`:e.characters??"";return`<Text ${(0,m.d)(n)}>${s}</Text>`}(e,n)}`);break;case"RECTANGLE":case"ROUNDED_RECTANGLE":case"LINE":case"ELLIPSE":o.push(`${n.indent}${function(e,r){if(!("ELLIPSE"===e.type||"RECTANGLE"===e.type||"ROUNDED_RECTANGLE"===e.type||"LINE"===e.type))throw Error(`Unexpected standalone node type ${e.type} for node ${e.guid}. Expected ELLIPSE, RECTANGLE, or LINE`);let n=f(e,r),a=(0,i.Ed)(e,r.tailwindOptions);switch(a.length&&(n[h(r)]=a.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${(0,m.d)(n)}/>`;case"ROUNDED_RECTANGLE":case"RECTANGLE":return`<Rectangle ${(0,m.d)(n)}/>`;case"LINE":return`<Line ${(0,m.d)(n)}/>`;default:return y(e,r)}}(e,n)}`);break;default:o.push(`${n.indent}${y(e,n)}`)}return o.length>0?n.formatJSX?o.join("\n"):o.join(""):null}function A(e){return"fills"in e&&e.fills.some(e=>"IMAGE"===e.type)&&"true"===e.getSharedPluginData("jsx","isImage")&&e.fills.find(e=>"IMAGE"===e.type)&&(e.getSharedPluginData("jsx","description")||e.getSharedPluginData("jsx","altText"))||null}},81705:(e,r,n)=>{n.d(r,{Qy:()=>m,v$:()=>_});var a=n(660376),i=n(186606),o=n(320953),s=n(940807),l=n(269466),c=n(768618),d=n(468415),u=n(303397),p=n(752214);function m(e,r=!1){let n=e[0];if(!n||"FRAME"!==n.type||n.isInstanceSublayer)return;let s=(0,c.UN)();if(r){let r=function(e){let r=function(e){switch(e){case"buildingBlocks":return p.vh;case"icons":return d.C;case"atoms":return"Atoms";case"copiedDesigns":return"Copied Designs";default:(0,a.xb)(e)}}(e),n=c.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===r);if(n)return n;{let e=g((0,c.UN)().getCurrentPage());return o.l7.user("create-section",()=>{let n=(0,c.UN)().createNode("SECTION");return n.name=r,n.relativeTransform={...n.relativeTransform,m02:e.right()+100,m12:e.top()},n})}}("icons");for(let n of e)!function(e,r){let n=i.XJn.findIcons(e.guid),a=(0,c.UN)(),o=n.map(e=>a.get(e)),s={x:g(r).right()+50,y:50},l={};for(let e of o){if(!e)continue;let n=i.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?a.get(n[0]):null;o||((o=a.createComponentFromNode(e.clone())).visible=!0,r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:s.x,m12:s.y},s.y+=o.size.y+20),l[e.guid]=o.guid,h(e,o)}}(n,r)}let l=n.absoluteBoundingBox,u=s.createComponentFromNode(n.clone());u.visible=!0,s.getCurrentPage()?.appendChild(u),u.x=l.x+l.w+200,u.y=l.y;let f=_(e,u);return{component:u,nodeMapping:f}}function _(e,r){let n=new Map;for(let a of e){let e=h(a,r);e&&(n=new Map([...n,...e]))}return u.Y5.commit(),n}function h(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer||"SYMBOL"!==r.type)return;let a=n.childrenGuids.findIndex(r=>r===e.guid),o=r.createInstance();if(!o)return;let s=i.XJn.applyOverridesToInstanceToMatchNode(o.guid,e.guid);return n.insertChild(o,a+1),"NONE"===n.stackMode&&(o.x=e.x,o.y=e.y),o.visible=e.visible,e.removeSelfAndChildren(),s}function g(e){let r=null;for(let n of e.childrenNodes){let e=new s.r(new l.M(n.x,n.y),new l.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new s.r}},33103:(e,r,n)=>{n.d(r,{Hj:()=>f});var a=n(938982),i=n(186606),o=n(19180),s=n(625358),l=n(998568),c=n(810503),d=n(269873),u=n(720722),p=n(866384),m=n(533518),_=n(937578);function h(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),a=[],i=r.removed;return e.forEach(e=>{n.has(e.key)&&a.push(e)}),{publishAssets:a,unpublishAssets:i}}function g(e){return e&&e!==u.E8.DELETED&&e!==u.E8.NOT_STAGED}async function f(e,r,n,a,s){let l=i.XJn.getKitKey(e);if(!l)return;let u=n.publishType,m=u===_.tf.LOCAL_GENERATION,f=await (0,d.LQ)(e);if(0===f.length)return;let y={},b=await (0,d.vg)(e),v={},T=i.XJn.getLocalExamples(e,f),I={},S=(0,d.pX)(),A={};!s&&(f.forEach(e=>{(u!==_.tf.LIBRARY_PUBLISH||g((n.localComponents[e.componentId]||n.localStateGroups[e.componentId])?.status))&&e.version&&(y[e.key]=e.version)}),b.forEach(e=>{(u!==_.tf.LIBRARY_PUBLISH||g(n.localComponents[e.defaultNodeId]?.status))&&e.version&&(v[e.key]=e.version)}),T.forEach(e=>{I[e.key]=e.version}),S&&(u===_.tf.LIBRARY_PUBLISH&&g(n.localVariableSets[S.nodeId]?.status),A[S.key]=S.version));let w=await p.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:y,groupedComponentKeyToVersion:v,exampleKeyToVersion:I,variableSetKeyToVersion:A,publishType:u,kitKey:l}),{publishAssets:C,unpublishAssets:N}=h(f,w.data.meta.product_component_status),{publishAssets:L,unpublishAssets:O}=h(b,w.data.meta.grouped_component_status),{publishAssets:R,unpublishAssets:P}=h(T,w.data.meta.example_status),D=await E(R),k={};for(let e of R){let n=(0,o.k)().first_draft_direct_gen?await (0,d.tV)(e.nodeId):await (0,d.au)(r,e.nodeId);n&&(k[e.key]=n)}let{publishSets:M,unpublishSets:F}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(S?[S]:[],w.data.meta.variable_set_status);if(M.length>0&&!a&&!s){(0,c.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}let x=!0===(0,o.k)().first_draft_direct_gen&&n.publishType===_.tf.LIBRARY_PUBLISH&&!1===m&&n.isDirectGenCompatible;return{kit:{name:r,key:l,is_local:m,use_direct_generation:x},publish_product_components:C.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,jsx_component_def:e.jsxComponentDef?.jsxStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:(0,o.k)().first_draft_direct_gen?_.Rd:_.Q6}})),unpublish_product_components:N,publish_grouped_components:L.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:O,publish_examples:R.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:k[e.key]??null},thumbnail_url:D[e.key]})),unpublish_examples:P,publish_variable_sets:a?M.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:_.$5,customizable_variables:a,modes:e.modes}})):[],unpublish_variable_sets:F}}async function E(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,a]=i.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=a}let o=(await m.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return o.length<Object.keys(n).length?(0,l.$D)(a.e.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],i)=>{let{url:c,fields:d}=o[i];try{let i=await (0,s.ET)(a.e.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=i}catch(e){(0,l.$D)(a.e.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},409893:(e,r,n)=>{n(320953),n(768618),n(206639),n(111427);var a=(e=>(e[e.XXXS=4]="XXXS",e[e.XXS=8]="XXS",e[e.XS=12]="XS",e[e.S=16]="S",e[e.M=24]="M",e[e.L=32]="L",e[e.XL=48]="XL",e[e.XXL=64]="XXL",e[e.XXXL=96]="XXXL",e))(a||{})},708692:(e,r,n)=>{n.d(r,{Cr:()=>o,ZO:()=>i,k_:()=>a}),n(938982),n(672154),n(186606),n(320953),n(861868),n(768618),n(989232),n(998568),n(752214),n(864277),n(468415),n(303397),n(552807),n(763467),n(818543);let a=6,i={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},902649:(e,r,n)=>{var a=(e=>(e.LIGHT="light",e.DARK="dark",e))(a||{}),i=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(i||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},763467:(e,r,n)=>{n(286536),n(206639),n(716793),n(244600),n(810503),n(902649)},818543:(e,r,n)=>{n(320953),n(861868),n(989232),n(206639),n(750294),n(691450),n(904331),n(409893),n(902649),n(763467);var a=(e=>(e.Mobile="mobile",e.Website="website",e))(a||{})},904331:(e,r,n)=>{n.d(r,{GS:()=>s,LW:()=>_,lu:()=>l,u7:()=>o,vj:()=>c});var a=n(755595);let i=a.z.object({type:a.z.string(),props:a.z.record(a.z.any())}).extend({children:a.z.lazy(()=>a.z.union([a.z.string().array(),i.array()]))});var o=(e=>(e.SPACING="spacing",e.CORNER_RADIUS="cornerRadius",e.FONT="font",e.COLOR="color",e.DARK_MODE="dark",e))(o||{}),s=(e=>(e.DEFAULT="default",e.SERIF="serif",e))(s||{}),l=(e=>(e.TITLE="title",e.BODY="body",e.LABEL="label",e))(l||{}),c=(e=>(e.BOLD="bold",e.MEDIUM="medium",e.REGULAR="regular",e))(c||{});let d=a.z.object({value:a.z.number(),units:a.z.enum(["RAW","PIXELS","PERCENT"])}),u=a.z.object({fontName:a.z.object({family:a.z.string(),style:a.z.string()}),letterSpacing:d.optional()}),p=a.z.object({r:a.z.number(),g:a.z.number(),b:a.z.number(),a:a.z.number()}),m=a.z.object({colorVariableMap:a.z.record(a.z.string(),p),numberVariableMap:a.z.record(a.z.string(),a.z.number()),fontVariableMap:a.z.record(a.z.string(),u).optional()});a.z.object({accentColor:p.optional(),darkMode:a.z.boolean(),variableMaps:m.optional()}),a.z.object({position:a.z.boolean(),size:a.z.boolean(),flex:a.z.boolean(),color:a.z.boolean(),radius:a.z.boolean(),typography:a.z.boolean()});let _={position:!1,size:!1,flex:!1,color:!1,radius:!1,typography:!1};a.z.object({nodeId:a.z.string().nullable(),jsxStr:a.z.string(),prefixTypes:a.z.array(a.z.string())});let h=a.z.object({children:a.z.string().optional(),className:a.z.string().optional()});a.z.object({componentName:a.z.string().optional(),overrides:a.z.record(h)}),a.z.object({key:a.z.string(),nodeId:a.z.string(),version:a.z.string(),descriptionLegacy:a.z.string(),componentKeys:a.z.array(a.z.string()),componentJSXNames:a.z.array(a.z.string())})},269873:(e,r,n)=>{n.d(r,{LQ:()=>b,_:()=>I,au:()=>L,pX:()=>S,tV:()=>C,vg:()=>y});var a=n(947239),i=n(593758),o=n(6406),s=n(938982),l=n(818222),c=n(186606),d=n(768618),u=n(19180),p=n(594680),m=n(998568),_=n(810503),h=n(752214),g=n(129921),f=n(468415);let E=e=>{let r=(0,d.UN)().get(e);return!!r&&(r.isStateGroup?r.childrenNodes.every(e=>e.isIconLikeContainer):r.isIconLikeContainer)};async function y(e){let{info:r}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:(0,u.k)().first_draft_publish_all_components,pageChildrenName:(0,u.k)().first_draft_publish_all_components?void 0:f.C},includeJSX:!1});return r.filter(e=>(0,u.k)().first_draft_publish_all_components?E(e.componentId):(0,a.isPartOfGroup)(e.componentGroupPath,f.C))}async function b(e){let r=(0,u.k)().first_draft_publish_all_components&&!e,{info:n}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:r},includeJSX:!!(0,u.k)().first_draft_direct_gen&&!!(0,u.k)().first_draft_full_component_def}),i=(0,h.VN)(e),o=await T(i,!0);return n.filter(e=>(0,u.k)().first_draft_publish_all_components?!E(e.componentId):(0,a.isPartOfGroup)(e.componentGroupPath,h.vh)).concat(o)}async function v(e){let r=(0,o.__)(e),n=(0,l.B)([...r],{followInstances:!1}).filter(e=>"SYMBOL"===e.type?e.isSymbolPublishable:!!e.isStateGroup&&!e.hiddenFromPublishing);return{info:await T(n,e.includeJSX)}}async function T(e,r){return(0,a.resetTypeInfoCache)(),(await Promise.all(e.map(async e=>{try{let n=(0,a.getTypeInfoCached)(e,{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r)return n;let i=(0,u.k)().first_draft_share_jsx?await (0,p.gZ)(e,{topLevelComponentProps:!0},{useDivTagsForFrames:!0,inlineVectorData:!1,useCustomGroupAndImageFormatForFirstDraft:!0}):(0,g.gZ)(e,n);return{...n,jsxComponentDef:i}}catch(r){(0,m.$D)(s.e.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}))).filter(Boolean)}function I(){return c.CWU.getLocalVariableSetsInfo().filter(e=>!e.isSoftDeleted&&(0,f.n6)(e.name,h.i2)).map(e=>({key:e.keyForPublish,name:e.name,version:e.userFacingVersion,nodeId:e.id,defaultModeId:e.defaultModeID,modes:e.modes}))}function S(){let e=I().sort((e,r)=>e.nodeId.localeCompare(r.nodeId));if(0!==e.length&&!(e.length>1))return e[0]}async function A(e){return(await (0,p.oy)(e,{tailwind:!0,includeIDs:!1,topLevelComponentProps:!0,strict:!1,transformUnhandledNodes:!!(0,u.k)().first_draft_debug,useCustomGroupAndImageFormatForFirstDraft:!0,useDivTagsForFrames:!0})).jsxStr}async function w(e){return(0,u.k)().first_draft_share_jsx?await A(e):(0,g.Py)(e,{skipNodeIds:!0,autoLayoutTagName:"Frame",frameTagName:"Frame",formatJSX:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}async function C(e){let r=(0,d.UN)().get(e);if(!r||"FRAME"!==r.type)return null;let n=await w(r);return n?{jsx:n,buildingBlockToRegion:{}}:null}function N(e){let{layoutName:r,header:n,mainContent:a,footer:i,sidebar:o}=e,s={};for(let e of(s[n.name]="header",a))s[e.name]="mainContent";if(o)for(let e of o.blocks)s[e.name]="sidebarContent";return s[i.name]="footer",{jsx:`<${r} header={${n.tag}} mainContent={[${a.map(e=>e.tag).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tag).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${i.tag}} />`,jsxWithProps:`<${r} header={${n.tagWithProps}} mainContent={[${a.map(e=>e.tagWithProps).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tagWithProps).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${i.tagWithProps}} />`,buildingBlockToRegion:s}}async function L(e,r){let n=async e=>{let r=(0,a.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r||r.componentType!==i.J.BUILDING_BLOCK)throw Error("Expected building block");return{name:r.jsxName,tag:`<${r.jsxName} />`,tagWithProps:(0,u.k)().first_draft_share_jsx?await A(e):(0,g.RI)(e,{skipNodeIds:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}},o=e=>"FRAME"===e.type&&((0,f.n6)(e.name,"spacer")||(0,f.n6)(e.name,"filler"));try{let s=function(e){let r=e.toLowerCase();return r.includes("mobile")||r.includes("app")?"mobile":r.includes("site")?"website":"vstack-only"}(e);if("vstack-only"===s)return null;let l=(0,d.UN)().get(r);if(!l||"FRAME"!==l.type)return null;for(let e of function e(r){if(r.isPrimaryInstance)return[r];if(r.isInstanceSublayer)return[];let n=[];for(let a of r.childrenNodes)n.push(...e(a));return n}(l)){let r=(0,a.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r||r.componentType!==i.J.BUILDING_BLOCK)return null}if("VERTICAL"===l.stackMode&&l.childrenNodes.filter(e=>"INSTANCE"===e.type).length>=3&&l.childrenNodes.every(e=>"INSTANCE"===e.type||o(e))){let e=l.childrenNodes.filter(e=>"INSTANCE"===e.type),r=await Promise.all(e.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:r[0],mainContent:r.slice(1,r.length-1),footer:r[r.length-1]})}if("VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"VERTICAL"===l.childrenNodes[1].stackMode&&l.childrenNodes[1].childrenNodes.every(e=>"INSTANCE"===e.type||o(e))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),a=l.childrenNodes[1].childrenNodes.filter(e=>"INSTANCE"===e.type),i=await Promise.all(a.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:e,mainContent:i,footer:r})}if("website"===s&&"VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"HORIZONTAL"===l.childrenNodes[1].stackMode&&2===l.childrenNodes[1].childCount&&l.childrenNodes[1].childrenNodes.every(e=>"FRAME"===e.type&&"VERTICAL"===e.stackMode&&e.childrenNodes.every(e=>"INSTANCE"===e.type))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),a=l.childrenNodes[1].childrenNodes[0],i=l.childrenNodes[1].childrenNodes[1];if(!a||!i)return null;let o=a.absoluteRenderBounds.w<i.absoluteRenderBounds.w,s=o?i:a,c=o?a:i,d=c.absoluteRenderBounds.w,u=await Promise.all(s.childrenNodes.map(n)),p=await Promise.all(c.childrenNodes.map(n));return N({layoutName:o?"DesktopTwoColWithLeftSidebar":"DesktopTwoColWithRightSidebar",header:e,mainContent:u,footer:r,sidebar:{width:d,blocks:p}})}}catch(n){(0,_.xi)("getNodeJSXFromExample","unhandled error",{error:n,kitName:e,exampleNodeId:r})}return null}},388902:(e,r,n)=>{n.d(r,{Gs:()=>i});var a=n(755595);function i(e){return"INSTANCE"===e.type&&"true"===e.getSharedPluginData("first_draft_make_kit","is_kit_instance")}a.z.object({componentPropertyDefinitions:a.z.array(a.z.object({name:a.z.string(),type:a.z.string()})),componentPropertyReferences:a.z.record(a.z.string(),a.z.record(a.z.string(),a.z.string()))})},468415:(e,r,n)=>{n.d(r,{Au:()=>s,C:()=>d,Kp:()=>u,PJ:()=>p,So:()=>g,_F:()=>f,g5:()=>l,iR:()=>_,n6:()=>c,uN:()=>E,vR:()=>h});var a=n(947239);n(186606);var i=n(768618);n(382902);var o=n(810503);function s(e,r,n,a){if(!e)return[];let o=a??(0,i.UN)(),s=o.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=o.get(e);r&&c.push(r)}return c}function l(e){let r=(0,i.UN)().get(e);return r?(r.update(),s(r.guid,["INSTANCE"])):[]}function c(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}n(107712),n(638345),n(748628),n(887836),n(730143);let d="Icons";function u(e,r){return{description:r.name||""}}function p(e){var r;return e=e.endsWith("s")?e.slice(0,e.length-1):e,`Custom${r=(r=(r=e).replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+r.substr(1)}`}let m=[d];function _(e){for(let r of m)if((0,a.isPartOfGroup)(e,r))return r;return null}function h(e){return _(e.componentGroupPath)}function g(e,r){let n=(0,i.UN)().get(e);if(!n||n.type!==r)throw Error(`Unexpected node type for id=${e}. Expected ${r} got: ${n?.type}`);return n}function f(e,r,n,a){let i=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),a=n.sharedPluginData.keys||[];(0===a.length&&r.length>0||r.some(e=>a.includes(e)))&&i.push(e)}}else i.push(e)}return i.push(...s(e.guid,r,n,a)),i}function E(e,r){let n=(0,i.UN)().get(r);return n?n.getSublayerIdForInstanceOfSymbol(e):((0,o.xi)("first-draft","No component sublayer found for",{symbolSublayer:n}),null)}},361323:(e,r,n)=>{n.d(r,{C_:()=>d,OC:()=>c,WU:()=>g,cw:()=>h,hx:()=>f});var a=n(848318),i=n(111975),o=n(672496),s=n(857607);n(656329),n(620105),n(764872),n(686464);let l=[];function c(){let e=a.useRef(null);return a.useCallback(r=>{e.current&&p(e.current),r&&(e.current=r,u(r))},[])}function d(e,r){a.useEffect(()=>{if(r)return;let n=e.current;if(n)return u(n),()=>{p(n)}},[e,r])}function u(e,r){let n=r?{element:e,focus:r}:{element:e};if(!l.length){l.push(n);return}for(let[r,{element:a}]of l.entries()){let i=a.compareDocumentPosition(e);if(i===Node.DOCUMENT_POSITION_PRECEDING||i===Node.DOCUMENT_POSITION_CONTAINS){if(l[r-1]?.element===e)return;l.splice(r,0,n);return}}l.push(n)}function p(e){let r=l.findIndex(r=>r.element===e);l.splice(r,1)}function m(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,i.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function _(e){for(let[r,{element:n}]of l.entries())if(n.contains(document.activeElement)){let n=l.length,a=l[(n+r+("forward"===e?1:-1))%n],i=a&&m(a);if(i)return i}let r="forward"===e?l[0]:l[l.length-1];return r?m(r):null}function h(e){_("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function g(e){_("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function f(e){let{e:r,onClickHandler:n,onEscapeHandler:a}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),a&&r.keyCode===s.Uz.ESCAPE&&a(r)}},249726:(e,r,n)=>{n.d(r,{CI:()=>h,D:()=>c,Gi:()=>u,N5:()=>g,SS:()=>E,T9:()=>d,VA:()=>m,cU:()=>y,d:()=>p,gj:()=>_,jd:()=>v,oq:()=>f,ye:()=>b}),n(410725),n(55116);var a=n(407638),i=n(720722),o=n(94831);n(970320);var s=n(499668),l=n(613733);function c(e,r){return u(e[r])}function d(e){return!!e&&""===e.path}function u(e){return!!e&&""===e.path}function p(){return`temp-${+new Date}`}function m(e){return e?.path===""}function _(e,r,n,a){if(!e)return null;if(a)return r[a.drafts_folder_id]||null;for(let a in r){let i=r[a],s=n[a]?n[a][e]:null;if(!i.teamId&&""===i.path&&null==i.orgId&&s&&s.level===o.e6.OWNER)return i}return null}function h(e){return e?.path===""?(0,i.Tb)():e?.path}function g(e,r){return null!=r&&r in e}function f(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function E(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function y(e,r,n,i,o){let c=n&&(0,a.canViewTeam)(n,i),d=(0,l.HZ)({label:l.A5.planBasedFolderUrl.hasTeamAccess,oldValue:c,newValue:o,enableFullRead:(0,s.DQ)(s.Pw.GROUP_7),maxReports:5,contextArgs:{currentTeamId:i.currentTeamId,currentOrgId:i.currentUserOrgId,currentUserId:i.user?.id??null,openFileKey:i.openFile?.key??null,teamIdArg:n}});return r?`${location.origin}/files/${r}/project/${e}`:d?`${location.origin}/files/team/${n}/project/${e}`:i.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function b(e){return!!e&&!!e.team_id&&!e.path}function v(e){return!!e&&!!e.teamId&&!e.path}},602910:(e,r,n)=>{n.d(r,{Zb:()=>I});var a=n(660376),i=n(505923),o=n(871043),s=n(803565),l=n(186606),c=n(19180),d=n(244600),u=n(461979),p=n(967688),m=n(952039),_=n(995218),h=n(259964),g=n(840683),f=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(f||{}),E=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(E||{}),y=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(y||{}),b=(e=>(e.NODE_CREATED="node_created",e.NODE_DELETED_SINGLE="node_deleted_single",e.NODE_DELETED_MULTIPLE="node_deleted_multiple",e.NODE_MOVED="node_moved",e.NODE_RESIZED="node_resized",e.TEXT_SELECTION="text_selection",e.TOOL="tool_selected",e.TABLE_CELL_TEXT_SELECTION="table_cell_text_selection",e.SELECTION_BOX_MOVED="selection_box_moved",e.SELECTION_BOX_RESIZED="selection_box_resized",e.VIEWPORT_PANNED="viewport_panned",e.VIEWPORT_ZOOMED="viewport_zoomed",e))(b||{});let v=["node_created","node_deleted_single","node_deleted_multiple","text_selection","tool_selected","table_cell_text_selection"];class T{constructor(e){this.store=e,this.coalescedDebouncedAnnounceChange=(0,i.e)(this.announceInner.bind(this),(e,r)=>(e.changeType!==r.changeType||("vectorDelta"in e&&"vectorDelta"in r&&"vectorDelta"in r&&(r.vectorDelta={x:e.vectorDelta.x+r.vectorDelta.x,y:e.vectorDelta.y+r.vectorDelta.y}),"viewport_zoomed"===e.changeType&&"viewport_zoomed"===r.changeType&&"viewport_zoomed"===r.changeType&&(r.previousZoom=e.previousZoom,r.currentZoom=r.currentZoom)),r),800),this.store=e}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getWCAG2Contrast(e,r){return(0,d.f)((0,s.aH)(e),(0,s.aH)(r))}announceNodeCreated(e,r){this.announce({changeType:"node_created",targetNodeType:e,isStamp:r})}announceSingleNodeDeleted(e){this.announce({changeType:"node_deleted_single",targetNodeType:e})}announceMultipleNodesDeleted(){this.announce({changeType:"node_deleted_multiple"})}announceTextSelection(e){this.announce({changeType:"text_selection",targetNodeType:e})}announceToolSelected(e){this.announce({changeType:"tool_selected",targetNodeType:e})}announceTableCellTextSelection(e,r){this.announce({changeType:"table_cell_text_selection",tableCellRow:e,tableCellCol:r})}announceNodeResized(e,r){this.announce({changeType:"node_resized",targetNodeType:e,vectorDelta:r})}announceNodeMoved(e,r){this.announce({changeType:"node_moved",targetNodeType:e,vectorDelta:r})}announceSelectionBoxResized(e,r){this.announce({changeType:"selection_box_resized",vectorDelta:e,numSelectedNodes:r})}announceSelectionBoxMoved(e,r){this.announce({changeType:"selection_box_moved",vectorDelta:e,numSelectedNodes:r})}announceViewportPanned(e){this.announce({changeType:"viewport_panned",vectorDelta:e})}announceViewportZoomed(e,r){this.announce({changeType:"viewport_zoomed",previousZoom:e,currentZoom:r})}announce(e){if(this.store.getState().screenreader.enabled){if(v.includes(e.changeType)){this.announceInner(e);return}this.lastUsedChangeType&&this.lastUsedChangeType!==e.changeType&&this.coalescedDebouncedAnnounceChange.flush(),this.lastUsedChangeType=e.changeType,this.coalescedDebouncedAnnounceChange(e)}}announceInner(e){let r=this.store.getState(),n=(0,_.XE)(r.selectedView),i=function(e,r,n){let i=e.changeType;switch(i){case"node_created":if(e.isStamp)return(0,p.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:S(e.targetNodeType,n)});return(0,p.t)("fullscreen.accessibility.node_created_announcement",{node_type:S(e.targetNodeType,n)});case"node_deleted_single":return(0,p.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:S(e.targetNodeType,n)});case"node_deleted_multiple":return(0,p.t)("fullscreen.accessibility.multiple_node_deleted_announcement");case"text_selection":return(0,p.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:S(e.targetNodeType,n)});case"tool_selected":if(e.targetNodeType===l.Z6A.STAMP)return;if(e.targetNodeType===l.Z6A.NONE)return(0,p.t)("fullscreen.accessibility.tool_unselected");{let r=S(e.targetNodeType,n);if(function(e,r){switch(e){case l.Z6A.LINE:case l.Z6A.VECTOR:case l.Z6A.CONNECTOR:case l.Z6A.TABLE:case l.Z6A.TABLE_CELL:case l.Z6A.MEDIA:return!1}switch(r){case h.nT.Whiteboard:return(0,c.k)().fpl_figjam_keyboard_controls;case h.nT.Design:return(0,c.k)().fpl_canvas_keyboard_controls;case h.nT.DevHandoff:return(0,c.k)().fpl_devmode_keyboard_controls;case h.nT.Slides:return(0,c.k)().fpl_slides_keyboard_controls;case h.nT.Sites:return(0,c.k)().fpl_sites_keyboard_controls;case h.nT.Illustration:return(0,c.k)().fpl_buzz_keyboard_controls}return!1}(e.targetNodeType,n))return(0,p.t)("fullscreen.accessibility.tool_selected_keyboard_accessible",{nodeType:r});return(0,p.t)("fullscreen.accessibility.tool_selected",{nodeType:r})}case"table_cell_text_selection":return(0,p.t)("fullscreen.accessibility.next_table_cell_announcement",{r:e.tableCellRow,c:e.tableCellCol});case"node_resized":return C(e.vectorDelta,S(e.targetNodeType,n));case"node_moved":return N(e.vectorDelta,S(e.targetNodeType,n));case"selection_box_moved":return(0,p.t)("fullscreen.accessibility.selection_box_changed",{selectionString:(0,p.t)("fullscreen.accessibility.num_items_selected",{num_selected:e.numSelectedNodes}),adjustmentString:N(e.vectorDelta,(0,p.t)("fullscreen.accessibility_dom.pseudonode_name_selection-box"))||""});case"selection_box_resized":return(0,p.t)("fullscreen.accessibility.selection_box_changed",{selectionString:(0,p.t)("fullscreen.accessibility.num_items_selected",{num_selected:e.numSelectedNodes}),adjustmentString:C(e.vectorDelta,(0,p.t)("fullscreen.accessibility_dom.pseudonode_name_selection-box"))||""});case"viewport_panned":{let{x:r,y:n}=e.vectorDelta,a=[A(r,()=>(0,p.t)("fullscreen.accessibility.viewport_pan.distance_right",{distance:Math.abs(r)}),()=>(0,p.t)("fullscreen.accessibility.viewport_pan.distance_left",{distance:Math.abs(r)})),A(n,()=>(0,p.t)("fullscreen.accessibility.viewport_pan.distance_down",{distance:Math.abs(n)}),()=>(0,p.t)("fullscreen.accessibility.viewport_pan.distance_up",{distance:Math.abs(n)}))].filter(o.Vq);if(0===a.length)return;{let e=(0,u.Yx)(a,"unit");return(0,p.t)("fullscreen.accessibility.viewport_pan.action",{amount:e})}}case"viewport_zoomed":let{currentZoom:s,previousZoom:d}=e;return A(Math.log(s/d),()=>(0,p.t)("fullscreen.accessibility.zoom_in",{zoomLevel:Math.round(100*s)}),()=>(0,p.t)("fullscreen.accessibility.zoom_out",{zoomLevel:Math.round(100*s)}));default:return(0,a.S9)(i,void 0)}}(e,r.mirror.appModel.keyboardShortcuts,n),s=function(e){switch(e){case"node_created":case"node_deleted_single":case"node_deleted_multiple":return"creation-deletion";case"node_resized":return"resize";case"node_moved":return"movement";case"text_selection":case"table_cell_text_selection":return"selection";case"tool_selected":return"tool";case"selection_box_moved":case"selection_box_resized":return"selection-box";case"viewport_panned":case"viewport_zoomed":return"viewport-pan";default:return}}(e.changeType);i&&s&&this.store.dispatch(m.F.enqueue({type:`accessibility-screen-reader-announcement-${s}`,message:i,role:"status",timeoutOverride:500}))}}function I(e){new T(e)}function S(e,r){let n=l.Z6A[e];return(0,g.rs)(n,r)}function A(e,r,n,a){return e>0?r():e<-0?n():a?.()}function w(e){switch(e){case 1:return(0,p.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,p.t)("fullscreen.accessibility.node_resize_increase");default:return(0,p.t)("fullscreen.accessibility.node_resize_none")}}function C(e,r){let n,a,i,o=0,s=0,l=0;switch(0!==e.x&&(o|=1,s=e.x>0?2:1),0!==e.y&&(o|=2,l=e.y>0?2:1),o){case 0:return;case 1:n=(0,p.t)("fullscreen.accessibility.node_resize_horizontal"),a=w(s),i=Math.abs(e.x);break;case 2:n=(0,p.t)("fullscreen.accessibility.node_resize_vertical"),a=w(l),i=Math.abs(e.y);break;default:let c=Math.abs(e.x),d=w(s),u=Math.abs(e.y),m=w(l);return(0,p.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:r,resizedComparisonX:d,nodeResizeXDelta:(0,p.t)("fullscreen.accessibility.node_unit",{numUnits:c}),resizedComparisonY:m,nodeResizeYDelta:(0,p.t)("fullscreen.accessibility.node_unit",{numUnits:u})})}return(0,p.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:r,nodeSizeDelta:i,resizeComparison:a,nodeDirection:n})}function N(e,r){let n,a,i=0;if(e){switch(e.x>0?i|=4:e.x<0&&(i|=8),e.y<0?i|=1:e.y>0&&(i|=2),i){case 0:return;case 1:n=(0,p.t)("fullscreen.accessibility.node_movement_up"),a=Math.abs(e.y);break;case 2:n=(0,p.t)("fullscreen.accessibility.node_movement_down"),a=Math.abs(e.y);break;case 4:n=(0,p.t)("fullscreen.accessibility.node_movement_right"),a=Math.abs(e.x);break;case 8:n=(0,p.t)("fullscreen.accessibility.node_movement_left"),a=Math.abs(e.x);break;default:let o=(4&i)==4?(0,p.t)("fullscreen.accessibility.node_movement_right"):(0,p.t)("fullscreen.accessibility.node_movement_left"),s=Math.abs(e.x),l=(1&i)==1?(0,p.t)("fullscreen.accessibility.node_movement_up"):(0,p.t)("fullscreen.accessibility.node_movement_down"),c=Math.abs(e.y);return(0,p.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:r,nodePositionXDelta:(0,p.t)("fullscreen.accessibility.node_unit",{numUnits:s}),nodeDirectionX:o,nodePositionYDelta:(0,p.t)("fullscreen.accessibility.node_unit",{numUnits:c}),nodeDirectionY:l})}return(0,p.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:r,nodePositionDelta:a,nodeDirection:n})}}},757187:(e,r,n)=>{n.d(r,{fh:()=>p,tO:()=>h});var a=n(673786),i=n(186606),o=n(382902),s=n(303397),l=n(4881),c=n(899963),d=n(720722);let u={[d.PW.CODE_COMPONENT]:{idl:i.PWo.CODE_COMPONENT,key:(0,a.Sm)(""),version:(0,a.j6)("")}},p={[d.PW.CODE_COMPONENT]:{subscribed:function(e){let r=u[e].idl,n=(0,l.Wh)(()=>(0,o.eU)({})),a=(0,o.FZ)(n,(r,n)=>{if("changed"in n){if(!(0,c.e)(e))return r;let a=n.changed;return{...r,...a.reduce((e,r)=>(e[r.key]={sourceLibraryKey:r.sourceLibraryKey,pagesByVersion:{...e[r.key]?.pagesByVersion,...function(e){let r={};for(let{version:n,consumingPages:a}of e)r[n]=a;return r}(r.pagesByVersion)}},e),{})}}return"reset"in n?{}:r}),d=`consumedAssetVersionsByKey(${i.PWo[r]})`;return a.debugLabel=d,a.onMount=n=>{var a;let o=()=>{(0,c.e)(e)&&n({changed:i.IXA?.getAllSubscribedAssetConsumptions(r)??[]})};s.Y5.isReady()?o():s.Y5.onReady().then(o);let l=(a=e=>{n(e)},m[r]=a,()=>{m[r]=null});return()=>{l(),n({reset:!0})}},a}(d.PW.CODE_COMPONENT)}},m={[i.PWo.CODE_COMPONENT]:null};class _{syncChangedSubscribedConsumptions(e,r){m[e]?.({changed:r})}resetMirrorCache(){for(let e of Object.values(m))e?.({reset:!0})}}function h(){new _}},688055:(e,r,n)=>{n.d(r,{Mk:()=>E,WY:()=>T});var a=n(186606),i=n(382902),o=n(149674),s=n.n(o),l=n(810503),c=n(303397),d=n(4881),u=n(991254),p=n(661553),m=n(114182),_=n(789640),h=n(782589),g=n(720722);g.PW.RESPONSIVE_SET,a.PWo.RESPONSIVE_SET,g.PW.CODE_LIBRARY,a.PWo.CODE_LIBRARY,g.PW.CODE_FILE,a.PWo.CODE_FILE,g.PW.CODE_COMPONENT,a.PWo.CODE_COMPONENT,g.PW.MANAGED_STRING,a.PWo.MANAGED_STRING;let f={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:h.X1,[a.Ocq.SUBSCRIBED]:h._t},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:m.V,[a.Ocq.SUBSCRIBED]:m.Q},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:p.y,[a.Ocq.SUBSCRIBED]:p.d},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:u.r,[a.Ocq.SUBSCRIBED]:u.I},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:_.fA,[a.Ocq.SUBSCRIBED]:_.cx}},E={[g.PW.RESPONSIVE_SET]:{local:y(a.PWo.RESPONSIVE_SET,a.Ocq.LOCAL),subscribed:y(a.PWo.RESPONSIVE_SET,a.Ocq.SUBSCRIBED)},[g.PW.CODE_LIBRARY]:{local:y(a.PWo.CODE_LIBRARY,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_LIBRARY,a.Ocq.SUBSCRIBED)},[g.PW.CODE_FILE]:{local:y(a.PWo.CODE_FILE,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_FILE,a.Ocq.SUBSCRIBED)},[g.PW.CODE_COMPONENT]:{local:y(a.PWo.CODE_COMPONENT,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_COMPONENT,a.Ocq.SUBSCRIBED)},[g.PW.MANAGED_STRING]:{local:y(a.PWo.MANAGED_STRING,a.Ocq.LOCAL),subscribed:y(a.PWo.MANAGED_STRING,a.Ocq.SUBSCRIBED)}};function y(e,r){let n=f[e][r],o=(0,d.Wh)(()=>(0,i.eU)({})),l=(0,i.FZ)(o,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return s()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),u=`assetByKeyAtom(${a.PWo[e]}, ${a.Ocq[r]})`;return l.debugLabel=u,l.onMount=i=>{var o;let s=()=>{i({changed:a.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};c.Y5.isReady()?s():c.Y5.onReady().then(s);let l=(o=e=>{i(e)},b[e][r]=o,()=>{b[e][r]=null});return()=>{l(),i({reset:!0})}},l}let b={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null}};class v{syncAddedOrChangedAssets(e,r,n){if(r===a.Ocq.SUBSCRIBED){let i=f[e]?.[a.Ocq.SUBSCRIBED];if(!i){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}b[e]?.[a.Ocq.SUBSCRIBED]?.({changed:n.map(i).filter(e=>null!==e)})}else if(r===a.Ocq.LOCAL){let i=f[e]?.[a.Ocq.LOCAL];if(!i){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}b[e]?.[a.Ocq.LOCAL]?.({changed:n.map(i).filter(e=>null!==e)})}else(0,l.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){b[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(b))for(let r of Object.values(e))r?.({reset:!0})}}function T(){new v}},6616:(e,r,n)=>{n.d(r,{h:()=>a});let a=(0,n(382902).eU)("ok")},660865:(e,r,n)=>{(0,n(382902).eU)(null)},887836:(e,r,n)=>{n.d(r,{UQ:()=>c,VF:()=>l,kS:()=>s,p9:()=>o});var a=n(382902),i=n(231159);let o=(0,i.bt)(e=>e.user),s=(0,a.eU)(e=>e(o)?.id);(0,a.eU)(e=>e(o)?.created_at);let l=(0,i.bt)(e=>e.userStateLoaded),c=(0,i.bt)(e=>e.isStarterUser)},982685:(e,r,n)=>{n.d(r,{xS:()=>_}),n(848318);var a=n(10967),i=n(351626),o=n(320953),s=n(967688),l=n(642935),c=n(101872),d=n(439952),u=n(592971),p=n(389109),m=n(430808);async function _({node:e,modelType:r,clientLifecycleId:n,abortController:i}){let o=await (0,m.k4)(e);if(!o)throw Error("Failed to get jsx for node");if(!i.signal.aborted&&e.isAlive)try{let s={...(0,c.Ay)(),clientLifecycleId:n},{description:d,image:u}=await l.Ay.design.imagesFill({id:e.guid,width:e.size.x,height:e.size.y,jsx:o,modelType:r},s);if(i.signal.aborted||!e.isAlive)return;await h({node:e,name:d,url:u,scaleMode:r===a.z.UNSPLASH?"FILL":void 0,abortController:i})}catch(r){await h({node:e,name:(0,s.t)("ai_image_tools.blocked"),url:u.$,scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"},abortController:i})}}async function h({node:e,name:r,url:n,scaleMode:a,backgroundFill:s,abortController:l}){let c=await (0,p.xF)(n,["*"]),u=await (0,d.UD)(c,"image/png",r);!l.signal.aborted&&e.isAlive&&o.l7.ai("editor-ai-fill-image",()=>{let n=(0,i.R)(e);if(!n)throw Error("Failed to get topmost visible image fill");let o=[...e.fills];e.insertImageInFillPaint(u);let l=e.fills[o.length];if(!l)throw Error("Failed to get image fill");l.imageScaleMode=a??n.imageScaleMode;let c=s?[s,l]:[l];e.fills=o.flatMap(e=>e===n?c:[e]),e.name=r})}n(356066),n(69946)},870344:(e,r,n)=>{n.d(r,{gh:()=>C});var a=n(186606),i=n(768618),o=n(19180),s=n(382902),l=n(989232),c=n(476254),d=n(810503),u=n(66699),p=n(967688),m=n(952039),_=n(353231),h=n(641504),g=n(516618),f=n(531657),E=n(18088),y=n(261357);let b=(0,s.eU)(new Set),v=(0,s.eU)(new Set),T=(0,s.eU)("");function I(e){let r=e=>{let n=0;for(let a of e)"FRAME"===a.type&&(n+=1),"children"in a&&(n+=r(a.children));return n};return r(e)}function S(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function A(e,r,n,a=!0,i=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=a?[...S(r[n]),...S(e[n],i)]:[...S(e[n],i),...S(r[n])];r[n]=o}}class w{async autoSegmentNodesByRegion(e,r){let n=(0,y.D)(),a=[],i=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&i.push(e),o.forEach(e=>a.push(e))}s.zl.set(b,new Set(a.map(({id:e})=>e))),s.zl.set(v,new Set(i.map(({id:e})=>e))),(0,h.z)(i,a);let o=n.currentPage;return o.selection=o.selection.concat(i),!0}async autoSegmentNodes(e,r){let n;let s=(0,y.D)();try{var u;let d=performance.now(),_=(await Promise.all(e.map(e=>s.getNodeByIdAsync(e)))).filter(e=>e),h=I(_),y=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(_),b=(n=await (0,g.N7)(_,s,r))?I([n]):0;if(u=b-h,(0,c.D.dispatch)(m.F.enqueue({type:"msal-frames-created",message:(0,p.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:u})})),(0,o.k)().ce_al_track_msal_duration&&(0,l.trackEvent)("autolayout_auto_segment_selection",{duration_ms:performance.now()-d,selectionSizeBeforeMSAL:h,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let a of r.children)e(a,n);let i=a.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===i.backgroundNodes.length)return;let o=n.getNodeById(i.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of i.backgroundNodes){let a=n.getNodeById(e);a&&function(e,r,n=!0,a="transferAndMaybeRemoveBackgroundNode",i=!0){if((0,f.Rm)(`${a}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;i&&"opacity"in e&&(o=e.opacity),A(e,r,"fills",n,o),A(e,r,"effects",n,o),A(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,E.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let a=n[e];a&&r.setBoundVariable(e,a.id)}}(e,r),i&&e.remove()}(a,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,s);let e=(0,i.UN)().get(n.id);return!e||e.isTopLevelFrame()||e.isState||(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let a=[];return n.has(r.id)||a.push(r),"children"in r&&r.children.forEach(r=>{let i=e(r,n);a=a.concat(i)}),a}(n,new Set(y))}}}catch(n){(0,d.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=c.D.dispatch;"GraphResolutionError"===n.name?((0,_.ds)("msal_error_try_again",c.D.getState().openFile?.key,c.D.getState(),{error:n,nodeIds:e}),r(m.F.enqueue({type:"msal-failure-graph-resolution",message:(0,p.t)("fullscreen.visual_bell.try_again_msal")}))):(s.commitUndo(),s.triggerUndo(),(0,_.ds)("msal_error_couldnt_suggest_auto_layout",c.D.getState().openFile?.key,c.D.getState(),{error:n,nodeIds:e}),r(m.F.enqueue({type:"msal-failure-other",message:(0,p.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,y.D)();for(let n of e)for(let e of n)await (0,g.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,y.D)();return(0,g.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,y.D)();(0,g.cx)(e,r)}trackShouldShowMSALOnboarding(e){s.zl.set(T,e),(0,u.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,y.D)(),n=await (0,g.vk)(e,r),a=c.D.dispatch,i=n>0?(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return a(m.F.enqueue({message:i})),(0,l.trackEvent)("action_destroy_all_auto_layout",{numAutoLayoutsRemoved:n}),r.commitUndo(),!0}}function C(){new w}},3193:(e,r,n)=>{n.d(r,{mQ:()=>o});var a=n(457905);class i{logShadowReadSuggestionsOnPaste(e,r){(0,a.QO)(e,r)}}function o(){new i}},307665:(e,r,n)=>{n.d(r,{z4:()=>d});var a=n(186606),i=n(476254),o=n(810503),s=n(281294),l=n(324543);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,i,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:i,newSessionID:a.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=i.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},781187:(e,r,n)=>{n.d(r,{$W:()=>E});var a=n(938982),i=n(186606),o=n(989232),s=n(476254),l=n(998568),c=n(182317),d=n(967688),u=n(952039),p=n(113752),m=n(608869);let _="text-suggestions-dismiss-count";class h{generateRequestId(){return(0,c.g)()}generateSessionId(){return(0,c.g)()}async getSuggestion(e,r,n,i){let o;try{o=await (0,m.O)(e,r,n,i)}catch(e){(0,l.$D)(a.e.AI_PRODUCTIVITY,e)}return{text:o?.text,inputTokens:o?.inputTokens,serializationLatencyMs:o?.serializationLatencyMs,requestLatencyMs:o?.requestLatencyMs}}onExplicitDismiss(e){let r=g()+1;if(r<50){localStorage.setItem(_,r.toString());return}s.D.dispatch(u.F.enqueue({type:"text-suggestion-nudge",message:(0,d.t)("fullscreen.text_suggestion_nudge_message"),icon:p.zX.SPARKLE,button:{text:(0,d.t)("fullscreen.text_suggestion_nudge_turn_off"),action:()=>{i.glU?.triggerActionEnum(i.rcl.TOGGLE_TEXT_SUGGESTIONS_PREFERENCE,{})}}})),(0,o.trackEvent)("autosuggest_text.preference_nudge_shown",{sessionId:e}),f(e)}onFullOrPartialAccept(e){f(e)}}function g(){let e=Number(localStorage.getItem(_)??"0");return isNaN(e)?0:e}function f(e){let r=g();localStorage.removeItem(_),r>0&&(0,o.trackEvent)("autosuggest_text.dismiss_count_reset",{sessionId:e,dismiss_count:r})}function E(){new h}},303397:(e,r,n)=>{let a,i;n.d(r,{$q:()=>m,QT:()=>_,XT:()=>l,Y5:()=>a,Zi:()=>p,_W:()=>d,fT:()=>u,lQ:()=>o,s$:()=>s,uF:()=>c});let o=new Promise(e=>{i=e});function s(e){a=e,window._fullscreen_=a,i()}function l(e){}function c(e){d=e}let d=null;function u(e){}function p(e){}function m(e){}function _(e){}},137999:(e,r,n)=>{n.d(r,{Iu:()=>s}),n(186606);let a=new Set;class i{nodeBoundsChanged(){for(let e of a)e()}}let o=null;function s(){return o||(o=new i),o}},444341:(e,r,n)=>{n.d(r,{n:()=>i}),n(907031),n(186606),n(292399),n(476254);var a=n(732839);function i(e){(0,a.o)()}n(578291),n(939010),n(910314),n(967688),n(952039),n(12898),n(251487),n(516515),n(80133)},188365:(e,r,n)=>{n.d(r,{A$:()=>l,X0:()=>s});var a=n(660376),i=n(186606);n(206639);var o=n(967688);function s(e){switch(e){case i.daH.CODE_BLOCK_DRACULA:return"DRACULA";case i.daH.CODE_BLOCK_DUOTONE_LIGHT:return"DUOTONE_LIGHT";case i.daH.CODE_BLOCK_DUOTONE_SEA:return"DUOTONE_SEA";case i.daH.CODE_BLOCK_DUOTONE_SPACE:return"DUOTONE_SPACE";case i.daH.CODE_BLOCK_DUOTONE_EARTH:return"DUOTONE_EARTH";case i.daH.CODE_BLOCK_DUOTONE_FOREST:return"DUOTONE_FOREST";default:return"DRACULA"}}n(728075);let l={format:e=>{switch(e){case"FIGJAM_DARK":return(0,o.t)("whiteboard.code_blocks.theme.figjam_dark");case"DRACULA":return(0,o.t)("whiteboard.code_blocks.theme.dracula");case"DUOTONE_SEA":return(0,o.t)("whiteboard.code_blocks.theme.duotone_sea");case"DUOTONE_SPACE":return(0,o.t)("whiteboard.code_blocks.theme.duotone_space");case"DUOTONE_EARTH":return(0,o.t)("whiteboard.code_blocks.theme.duotone_earth");case"DUOTONE_FOREST":return(0,o.t)("whiteboard.code_blocks.theme.duotone_forest");case"DUOTONE_LIGHT":return(0,o.t)("whiteboard.code_blocks.theme.duotone_light");default:return(0,a.xb)(e)}}}},818991:(e,r,n)=>{n.d(r,{l:()=>d});var a=n(186606),i=n(476254),o=n(303397),s=n(259964),l=n(854640),c=n(225258);let d=new class{constructor(){this.canvasColorProfile=a.RYP.SRGB}getDefaultDocumentColorProfile(){if((i.D?.getState()?.selectedView).editorType===s.nT.Whiteboard)return a.ywP.SRGB;switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return a.ywP.SRGB;case c.M.DISPLAY_P3:return a.ywP.DISPLAY_P3}}getCanvasColorProfile(){return this.canvasColorProfile}setCanvasColorProfile(e){this.canvasColorProfile=e,a.glU?.updateImageColorspaceConversions(),o.Y5?.triggerAction("redraw-canvas",{})}getUserColorProfile(){switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return a.RYP.SRGB;case c.M.DISPLAY_P3:return a.RYP.DISPLAY_P3}}}},41949:(e,r,n)=>{n.d(r,{Eh:()=>c,dM:()=>u,dX:()=>p});var a=n(19180),i=n(810503),o=n(910398),s=(e=>(e[e.Unknown=0]="Unknown",e[e.No=1]="No",e[e.Yes=2]="Yes",e))(s||{});let l=0;function c(e,r){if("srgb"===r)return e.getContext("2d");{let n=(0,o.p3)();return e.getContext("2d",{colorSpace:n?"srgb":r})}}let d=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0})?.canvas;function u({canvas:e,canvasWidth:r,canvasHeight:n,renderCanvas:c,value:u,colorSpace:p,initializeCanvasColorSpace:m=!1}){if(m&&e.getContext("2d",{colorSpace:p}),((0,a.k)().ee_color_management_force_canvas||(0,o.p3)())&&1!==l){if(d){d.width=r,d.height=n,c(d,u);let p=d.getContext("2d"),m=e.getContext("2d");if(p&&m)try{!function(e,r){if(e.canvas.width!==r.canvas.width||e.canvas.height!==r.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in r&&"display-p3"!==r.getContextAttributes().colorSpace&&!((0,a.k)().ee_color_management_force_canvas&&"srgb"===r.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[n,i]=[r.canvas.width,r.canvas.height],o=e.getImageData(0,0,n,i),s=new ImageData(o.data,o.width,o.height,{colorSpace:"getContextAttributes"in e?r.getContextAttributes().colorSpace:"srgb"});r.clearRect(0,0,n,i),r.putImageData(s,0,0)}(p,m),0===l&&(l=2)}catch{(0,i.Lo)("color management","polyfill failed",{ee_color_management_force_canvas:(0,a.k)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,o.p3)(),is2dCanvasPolyfillSupportedByBrowser:s[l]}),c(e,u),l=1}}}else c(e,u)}function p(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},301919:(e,r,n)=>{n.d(r,{q:()=>d});var a=n(186606),i=n(19180),o=n(228706),s=n(810503),l=n(975674),c=n(818991);let d=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,r)=>{let n=e.drawingBufferColorSpace;switch(r){case a.RYP.SRGB:if("srgb"===n)return;e.drawingBufferColorSpace="srgb",c.l.setCanvasColorProfile(a.RYP.SRGB);break;case a.RYP.DISPLAY_P3:if("display-p3"===n)return;e.drawingBufferColorSpace="display-p3",c.l.setCanvasColorProfile(a.RYP.DISPLAY_P3);break;default:(0,s.x1)("color management","unsupported color space",{targetColorSpace:r})}}}onFrame(){(0,l.L)(o.B3,l.K.DEFAULT,()=>{this.onFrameCb&&this.onFrameCb()})}queueSwitchWebglColorSpace(e,r,n,a){let o=()=>{this.switchWebglColorSpace(e,r),(0,i.k)().viewer_p3_fix&&a&&a.invalidateCanvas()};"mirror"===n?o():this.onFrameCb=o}}},643841:(e,r,n)=>{n.d(r,{ZH:()=>S,il:()=>L,Ep:()=>T,R6:()=>I});var a=n(848318),i=n(186606),o=n(19180),s=n(382902),l=n(650395),c=n(146968),d=n(303397),u=n(818991),p=n(353806),m=n(554326),_=n(41949),h=n(6963),g=n(584063),f=n(301919);let E=(0,s.eU)(!1);function y(e){let[r,n]=(0,s.fp)(E);return a.useEffect(()=>{r&&n(!1)},[r,n]),r?null:a.createElement(a.Fragment,null,e.children)}var b=n(854640);let v=a.createContext({canvasColorProfile:i.RYP.SRGB,documentColorProfile:i.ywP.LEGACY,documentExportColorProfile:i.RYP.SRGB});function T(){return a.useContext(v).canvasColorProfile}function I(){return a.useContext(v).documentColorProfile}let S=v.Consumer;function A(e){let{children:r,colorManagementStateJs:n}=e,o=(0,m.ut)(n?.documentColorProfile(),i.ywP.LEGACY),s=(0,h.H)(o),{colorProfilePreference:l}=(0,b.jK)(),c=a.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,g.j)(o,l),canvasColorProfile:s}),[l,o,s]);return a.createElement(v.Provider,{value:c},r)}function w(e){return(0,b.jK)(),a.createElement(A,{colorManagementStateJs:i.H4l},e.children)}function C({target:e,viewer:r}){let[n,s]=a.useState(null),c=a.useCallback(()=>{if(o.k()?.fullscreen_use_threaded_rendering)return!1;if(n)return!0;if(i.PcT?.usingWebGPU())return!1;let r=(0,_.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,l.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,l.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return s(n),!0}return!1},[e,n]);a.useEffect(()=>{if(!c())switch(e){case"fullscreen":case"mobile-viewer":d.Y5.onReady().then(()=>{c()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{c()})}},[c,e,r]);let p=T();return a.useEffect(()=>{if(i.PcT?.usingWebGPU()){u.l.setCanvasColorProfile(p);return}n&&f.q.queueSwitchWebglColorSpace(n,p,e,r)},[p,e,n,r]),null}function N({viewer:e,target:r}){return a.createElement(c.tH,{boundaryKey:"color-management",fallback:c.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:p.y4},a.createElement(s.An,null,a.createElement(y,null,a.createElement(w,null,a.createElement(C,{target:r,viewer:e})))))}function L({viewer:e}){return a.createElement(N,{target:"prototype",viewer:e})}},910398:(e,r,n)=>{n.d(r,{Av:()=>v,Pv:()=>m,VG:()=>l,p3:()=>h,tK:()=>f});var a=n(848318),i=n(186606),o=n(29188),s=n(944239);function l(e){switch(e){case i.RYP.SRGB:return"srgb";case i.RYP.DISPLAY_P3:return"display-p3";default:throw Error(`unrecognized color profile: ${e}`)}}let c=e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas").getContext("webgl");if(!r)throw Error("failed to create webgl canvas context to determine support");if(!("drawingBufferColorSpace"in r))throw Error("webgl context does not contain drawingBufferColorSpace attribute");let n=l(e);if(r.drawingBufferColorSpace=n,r.drawingBufferColorSpace!==n)throw Error(`webgl context does not support color space: ${n}`);return!0}catch(e){return!1}},d=new Map,u=(0,s.n)(e=>{if(d.has(e))return d.get(e);let r=c(e);return d.set(e,r),r}),p=(0,s.n)(e=>{try{if(e===i.RYP.SRGB)return!0;let r=document.createElement("canvas"),n=l(e),a=r.getContext("2d",{colorSpace:n});if(a){if("getContextAttributes"in a){if(a.getContextAttributes().colorSpace!==n)throw Error("2d canvas context does not match the desired color space")}else throw Error("2d canvas context does not support getContextAttributes")}else throw Error("failed to create 2d canvas context to determine support");if(h()){let e=new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1,{colorSpace:n});if(!("colorSpace"in e)||e.colorSpace!==n)throw Error(`image does not support color space: ${n}`)}return!0}catch(e){return!1}}),m=()=>"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("color","color(display-p3 1 1 1)"),_=()=>window.matchMedia("(color-gamut: p3)").matches,h=()=>!m();async function g(){if(!o.eD)return;let e=await o.eD.getActiveNSScreens();if(e){for(let r of e)if(!r.isCurrentWindow&&r.canRepresentDisplayGamutP3)return r.localizedName}}function f(e){switch(e.status){case"SupportedNatively":case"SupportedWithPolyfill":return!0;case"MonitorNotSupported":case"ClientNotSupported":return!1}}let E=()=>{let[e,r]=a.useState();return a.useEffect(()=>{g().then(r)},[]),e},y=()=>{let[e,r]=a.useState(_());return a.useEffect(()=>{let e=setInterval(()=>{r(_())},5e3);return()=>{clearInterval(e)}},[]),e},b=()=>o.eD&&"unmanaged"===o.eD.getColorSpace();function v(){let e=a.useMemo(()=>u(i.RYP.DISPLAY_P3),[]),r=a.useMemo(()=>p(i.RYP.DISPLAY_P3),[]),n=a.useMemo(()=>m(),[]),s=b(),l=E(),c=y();return e&&r?s?{status:"ClientNotSupported",diagnostics:{client:"desktop-app",shouldRestartDesktopAppInManagedColorSpace:!0}}:c?n?{status:"SupportedNatively",diagnostics:null}:{status:"SupportedWithPolyfill",diagnostics:null}:{status:"MonitorNotSupported",diagnostics:{alternativeMonitorName:l}}:{status:"ClientNotSupported",diagnostics:{client:o.eD?"desktop-app":"browser"}}}},854640:(e,r,n)=>{n.d(r,{YN:()=>E,eu:()=>h,hP:()=>f,it:()=>b,jK:()=>y}),n(848318);var a=n(186606),i=n(382902),o=n(60074),s=n(476254),l=n(429958),c=n(183603),d=n(304756),u=n(353231),p=n(318147),m=n(225258);let _={colorProfilePreference:p.E9.DEFAULT,id:""},h=(0,o.NC)("USER_UPDATE_COLOR_PROFILE"),g=(0,i.eU)(e=>{let r=e((0,l.Zx)({})),n=_.colorProfilePreference;"loading"===r.status&&void 0!==s.D&&s.D?.getState()?.user?.color_profile?n=s.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let a={colorProfilePreference:function(e){switch(e){case p.E9.DEFAULT:return m.M.DEFAULT;case p.E9.SRGB:return m.M.SRGB;case"display-p3":case p.E9.DISPLAY_P3:return m.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??_.id};return void 0!==s.D&&s.D?.getState()?.user?.color_profile!==a.colorProfilePreference&&s.D.dispatch(h({color_profile:a.colorProfilePreference})),a});function f(e){switch(e){case m.M.DEFAULT:case m.M.SRGB:return a.RYP.SRGB;case m.M.DISPLAY_P3:return a.RYP.DISPLAY_P3}}function E(){return i.zl.get(g)}function y(){return(0,i.md)(g)}function b({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:a}){if(e===_.colorProfilePreference)return;!function(e){let r=s.D.getState();(0,u.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:a});let i=d.Ay.put("/api/user",{color_profile:e});if(r)c.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},i);else{let r=s.D.getState().user?.id;if(!r)return;c.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},i)}}},850070:(e,r,n)=>{n.d(r,{YL:()=>s});var a=n(803565),i=n(716793);class o{calculateColorWithRampValue(e,r){let n=(0,i.jA)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,i.Hd)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}getRampValueForColor(e){return(0,i.Wn)((0,a.aH)(e))}}function s(){new o}},407476:(e,r,n)=>{let a;n.d(r,{AU:()=>c,T6:()=>p,lS:()=>a,on:()=>l});var i=n(476254),o=n(847461);let s={mousedown:new Set,mousemove:new Set,mouseup:new Set};function l(e,r){s[e].add(r)}function c(e,r){s[e].delete(r)}function d(e){return(r,n)=>{for(let a of s[e])a({x:r,y:n})}}function u(e,r,n){i.D.dispatch(o.vV({anchorPosition:{x:r,y:n}})),i.D.dispatch(o.CX({stablePath:e}))}function p(){a={handleMouseDown:d("mousedown"),handleMouseMove:d("mousemove"),handleMouseUp:d("mouseup"),createNewCommentAtPosition:u}}},131804:(e,r,n)=>{n.d(r,{vk:()=>p});var a=n(328813),i=n(195124),o=n(151223),s=n(303006),l=n(197696),c=n(561327);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function p(e,r,n,a){let i,o;if("CANVAS"===e)""===(i=n).trim()&&(i="Untitled"),o=i=i.replace(/\//g,"_");else{(i=r).endsWith("/")&&(i=i.substr(0,i.length-1));let e=i.lastIndexOf("/");for(let r of(o=-1!==e?i.substr(e+1,i.length):i,a)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(i=e+"/"+i)}}return{name:i,title:o}}function m(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,o.nF)(e=>{let r=e.getState(),n=[],o=[],_=r.mirror,h=_.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||m(e))&&n.push(e)};if((0,a.Im)(_.sceneGraphSelection)){let e=h.get((0,l.Nf)(_.appModel));e&&((0,i.hV)(e,g),(0,i.hV)(e,e=>{let r=e.parentNode;m(e)&&null!=r&&"CANVAS"===r.type&&o.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(h,_.sceneGraphSelection,g),(0,c.YI)(h,_.sceneGraphSelection,e=>{m(e)&&o.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,i.DS)(_.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,i.DS)(_.sceneGraph,e.guid).map(e=>e.name),{name:a,title:o}=p(e.type,e.name,f,n),s=function(e,r,n,a){let i=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${i}-${a.next(i)}`}(e.guid,a,r,b),{filename:l,isDuplicate:c}=function(e,r,n,a){let i;let o=!1;""===e.trim()&&(e="Untitled"),i=`${e}${r}${n}`;let s=a.next(`${i}`);return s>0&&(i=`${e}${r}-${s}${n}`,o=!0),{filename:i,isDuplicate:o}}(a,r.suffix||"",u[r.imageType],y);E.push({itemID:s,nodeID:e.guid,title:o,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(s.j({items:E,frames:o}))})},197202:(e,r,n)=>{n.d(r,{pH:()=>c});var a=n(19180),i=n(989232),o=n(318147),s=n(655530);class l{constructor(e){this.store=e}trackComponentAction(e,r,n){let l=this.state.openFile,c=l?.key,d=!!this.state.user;if(null==l||null==c||!d)return;let u=l.editorType;if(u===o._Y.SLIDES||u===o._Y.FIGMAKE||(0,a.k)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){e===s.Wc.DETACHMENT&&i.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:c,componentKey:Object.keys(r??{})[0],editorType:u||void 0});return}let p=Object.entries(r).map(([e,r])=>({key:e,count:r}));try{s.PT.recordComponentAction({action:e,action_source:n,fileKey:c,components:p})}catch(e){}}trackStyleAction(e,r,n){let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let i=[];for(let[e,n]of Object.entries(r))i.push({key:e,count:n});if(0!==i.length)try{s.PT.recordStylesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,styles:i})}catch(e){}}trackVariableAction(e,r,n){let a=!!this.state.user;if(!this.isInDesignFile()||!a)return;let i=[];for(let[e,n]of Object.entries(r))i.push({key:e,count:n});if(0!==i.length)try{s.PT.recordVariablesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,variables:i})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===o._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function c(e){new l(e)}},832395:(e,r,n)=>{n.d(r,{zs:()=>s}),n(540698);var a=n(304756);n(952039);var i=n(259964);class o{constructor(e){this.store=e,this.commentNotificationLogTimePerFile={},this.COMMENT_NOTIFICATION_LOG_INTERVAL_MS=36e5}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onIntentionalEdit(e){this.maybeSubscribeToCommentNotifications(e)}resetCommentNotificationLogTimes(){this.commentNotificationLogTimePerFile={}}maybeSubscribeToCommentNotifications(e){let r=this.store.getState(),n=r.openFile?.key;if(!n||"fullscreen"===r.selectedView.view&&r.selectedView.editorType===i.nT.DevHandoff)return;let o=this.commentNotificationLogTimePerFile[n],s=Date.now();if(null!=o&&s-o<this.COMMENT_NOTIFICATION_LOG_INTERVAL_MS)return;let l=Array.from(e).find(e=>{if(e.includes("StampBehavior"))return!1;switch(e){case"set-visible":case"set-locked":case"cut":case"select-frame-preset":case"update-selection-export-settings-data":case"reorder-pages":return!1;default:return!0}});l&&(a.Ay.post(`/api/user_notifications/catfile_signup/${n}`,{action_type:l}),this.commentNotificationLogTimePerFile[n]=s)}}function s(e){new o(e)}},307877:(e,r,n)=>{n.d(r,{A0:()=>b,Mc:()=>E,R4:()=>y});var a=n(848318),i=n(860676),o=n(186606),s=n(768618),l=n(19180),c=n(382902),d=n(730143),u=n(748790),p=n(880801),m=n(619534),_=n(131258),h=n(122586),g=n(714967),f=n(906314);function E(e,r=!1){let n=[];r?e.map(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&n.push(r)}):e.forEach(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&function e(r,n){if(r.visible&&0!==r.opacity)for(let a of(n.push(r),r.childrenNodes??[]))e(a,n)}(r,n)});let a=n.length>f.NB,i=[];return n.map(e=>{if((0,f.jX)(e,!1))return i.push(e.guid)}),{detectedUnnamedLayers:i.length>0,exceedingLayerLimit:a,renamableNodeGuids:i}}function y(e){let{detectedUnnamedLayers:r,exceedingLayerLimit:n,renamableNodeGuids:i}=E(e);r&&!n&&(0,h.$I)({moduleToOpen:{type:"custom",module:a.createElement(g.A,{source:o.uQ6.READY_FOR_DEV,numRenamableNodesForHandoff:i.length}),beforeModuleOpen:()=>{(0,m.B3)(p.JT.AUTO_RENAME_LAYERS)},name:_.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"ready_for_dev_auto_rename_layers"}})}function b(e){if(!(0,u.W7)())return!1;let r=c.zl.get(d.yV);if(!r?.canEdit||r.editorType!==i._YF.DESIGN)return!1;switch(e){case o.uQ6.READY_FOR_DEV:return!!(0,l.k)().aip_rename_layers_ready_for_dev;case o.uQ6.EXPORT_FRAME:case o.uQ6.EXPORT_PICKER:return!!(0,l.k)().ai_prod_rename_layers_dev_export;case o.uQ6.CREATE_COMPONENT:case o.uQ6.CREATE_FRAME:case o.uQ6.DRAW_FRAME_AROUND_NODES:case o.uQ6.STACK_SELECTION:return!!(0,l.k)().ai_prod_rename_layers_moments;case o.uQ6.LAYERS_PANEL_ACTION_ROW:return!!(0,l.k)().aip_lpe;case o.uQ6.LAYERS_PANEL_OVERFLOW_MENU:return!!(0,l.k)().aip_lpe_overflow;default:return!1}}},959750:(e,r,n)=>{n.d(r,{EU:()=>b,Ku:()=>h,RU:()=>y,UK:()=>_,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>T,qw:()=>E,sT:()=>v});var a=n(186606),i=n(19180),o=n(967688),s=n(498709),l=n(796580),c=n(554326),d=n(698429),u=n(732545),p=n(76664),m=n(42218);function _(){return a.Ez5.editorPreferences()}function h(){let e=(0,d.ks)(),r=(0,c.J2)(_().colorFormat);return r===a.NVY.CSS&&e||r===a.NVY.UIColor&&!e?a.NVY.RGB:r}function g(){return(0,c.ut)(a.Ez5?.editorPreferences()?.sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(a.Ez5?.editorPreferences()?.devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(a.Ez5?.editorPreferences()?.propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(a.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(a.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function v(e,r){let n=b(),a=y();return{smallNudgeAmount:e??n,bigNudgeAmount:r??a}}function T(){return(0,c.ut)(a.Ez5?.editorPreferences().renderRulers,!1)}let I=[{getObservable:()=>_().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>_().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>_().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>_().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,i.k)().figjam_snap_to_dot_grid_reset?_().snapToDotGridStagingReset:_().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>_().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>_().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>_().showFrameGrids,getMessage:e=>(0,p.jH)()?((0,p.Gk)(),{message:(0,o.t)("visual_bell.show_frame_guides_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),a.Ez5.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,o.t)("visual_bell.show_frame_guides_visible"):(0,o.t)("visual_bell.show_frame_guides_hidden")}}];function S(){(0,m.Mo)(I)}},604496:(e,r,n)=>{n.d(r,{XR:()=>c});var a=n(382902),i=n(151433),o=n(765330),s=n(957508);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=i.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=i.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;a.zl.set(s.ph,r)}clearEmojiTypeaheadQuery(){a.zl.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=a.zl.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){a.zl.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){a.zl.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},386700:(e,r,n)=>{let a;n.d(r,{CB:()=>a,eY:()=>p});var i=n(186606),o=n(476254),s=n(763610),l=n(127340),c=n(259964),d=n(13635);class u{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,d.q)().then(a=>{a||o.D.dispatch(s.F6({position:{x:e,y:r},source:n}))})}closeWheel(){o.D.dispatch(s.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:a,wheelType:d}){let u=o.D.getState();if("fullscreen"!==u.selectedView.view||u.selectedView.editorType!==c.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let p=u.multiplayerEmoji;"WHEEL"===p.type?(e=p.viewportX,r=p.viewportY,a=a??p.openedViaHover):a||i.glU?.triggerAction("set-tool-default",null),o.D.dispatch(s.sp({wheelType:d&&("STAMP"===d?"STAMP2":"REACTION1"),isReadonly:u.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,l.gR)(u),viewportX:e,viewportY:r,source:n,openedViaHover:a}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=o.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===c.nT.Whiteboard&&o.D.dispatch(s.sm({viewportX:e,viewportY:r}))}}function p(){a=new u}},146859:(e,r,n)=>{n.d(r,{BI:()=>f,W0:()=>p,f7:()=>E,jr:()=>g,nB:()=>h});var a=n(186606),i=n(857607),o=n(99496),s=n(238462),l=n(656329),c=n(264478),d=n(673461);n(446244);var u=n(303397),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{}),m=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(m||{});let _=s.lQ;function h(e){_=e}function g(e,r=0,n=1){return!!function(e,r=0,n=1){return!!(u.Y5&&u.Y5.isRootElementVisible())&&!f(e,r,n)}(e,r,n)&&E(e)}function f(e,r=1,n=1){let a=e.keyCode,o=(0,i.Fo)(e);if(a===i.Uz.TAB&&(0,i.sC)(e,i.xH.SHIFT));else if((0,i.wQ)(e.keyCode));else if(l.Ay.mac&&e.ctrlKey&&(a===i.Uz.A||a===i.Uz.B||a===i.Uz.D||a===i.Uz.E||a===i.Uz.F||a===i.Uz.H||a===i.Uz.K||a===i.Uz.L||a===i.Uz.N||a===i.Uz.O||a===i.Uz.P||a===i.Uz.T||a===i.Uz.V));else if(a===i.Uz.DELETE||a===i.Uz.BACKSPACE||a===i.Uz.NUMPAD_DELETE||a===i.Uz.SPACE||a===i.Uz.ENTER||a===i.Uz.HOME||a===i.Uz.END||a===i.Uz.PAGE_UP||a===i.Uz.PAGE_DOWN||a===i.Uz.A&&1===n);else if(o&&a===i.Uz.Z&&1===r);else if(o||e.ctrlKey)return!1;else if(a===i.Uz.F6)return!1;return!0}function E(e){let r;if("keydown"===e.type)r=a.Bx4.KEY_PRESS,_();else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;r=a.Bx4.KEY_RELEASE}let n=(0,o.v7)(),s={type:r,which:e.which,modifierKeys:(0,i.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:n!==a.aTn.UNKNOWN,layout:n},l=!!a.glU&&a.glU.handleKeyboardShortcut(s);return l&&e.preventDefault(),l}(0,c.ny)(g),(0,d.n)(g)},654054:(e,r,n)=>{n.d(r,{jx:()=>i});class a{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function i(e){new a(e)}},48736:(e,r,n)=>{n.d(r,{U2:()=>l,mr:()=>o});var a=n(858321);let i=new a.b("action");function o(e){i.trigger("action",e)}let s=new a.b("action");function l(e,r){s.trigger("action",[e,r])}},766930:(e,r,n)=>{var a=n(151223),i=n(31898),o=n(67308),s=n(381673),l=n(413802),c=n(361053),d=n(520779),u=n(842744),p=n(386252),m=n(15695),_=n(274016),h=n(278990);(0,a.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),a=n&&n.team_id&&r.teams[n.team_id];a&&u.Mk.every(e=>!(0,c.rR)(a,{type:c.sK.ADD_FILE,editorType:e}))?e.dispatch(i.to({type:_.DV,data:{team:a,resource:d.vL.FILE,action:p.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}})):e.dispatch(i.to({type:m.O,data:{projectId:n?.id??""}}))}),(0,a.nF)(e=>{l.F&&e.dispatch((0,h.u)({multiple:!1,accept:".sketch"}))})},576076:(e,r,n)=>{n.d(r,{B2:()=>v,al:()=>b,b6:()=>y,mK:()=>T});var a=n(848318),i=n(301168),o=n(19180),s=n(317720),l=n(97481),c=n(151223),d=n(489),u=n(413802),p=n(708942),m=n(672940),_=n(253332),h=n(842744),g=n(863875),f=n(317272),E=n(616392);let y=(0,c.nF)((e,r)=>{u.F&&((0,f.MS)(),u.F.extractFilesFromDropEvent(r,(r,n)=>{(0,o.k)().internal_only_debug_tools&&r.endsWith(".repo")?T(e,r,n):e.dispatch((0,g.z)({name:r,blob:n}))}))});function b(e){return new d.le(e).isFile()}function v(){let e=(0,i.d4)(e=>"folder"!==e.selectedView.view?null:e.folders[e.selectedView.folderId]??null),r=e?.id,n=(0,l.nt)(r),o=(0,i.d4)(e=>e.selectedView.view),c=(0,m.FC)();return(0,a.useMemo)(()=>"recentsAndSharing"===o?s.Qw.loaded(!0):"folder"===o?!e||(0,_.ZZ)(e,c)?s.Qw.loaded(!1):n.transform(e=>!!e&&h.Mk.some(r=>(0,l.d6)(e,r))):s.Qw.loaded(!1),[n,c,e,o])}function T(e,r,n){e.dispatch(p.GR()),(0,E.Gc)(n).then(a=>{a?(0,E.TA)(e,a):r=e.dispatch((0,g.z)({name:r,blob:n}))})}},190086:(e,r,n)=>{async function a(){let e;{e=await Promise.all([n.e(7177),n.e(9103)]).then(n.t.bind(n,177177,23));let r=await n.e(8243).then(n.t.bind(n,468243,23));e.GlobalWorkerOptions.workerSrc=r}return e}n.d(r,{a4:()=>c,eg:()=>o});let i=null;function o(){return i||(i=a()),i}async function s(){return(await n.e(991).then(n.bind(n,170991))).optimize}let l=null;function c(){return l||(l=s()),l}},375850:(e,r,n)=>{n.d(r,{Aq:()=>A,Ax:()=>l,Ay:()=>L,Bb:()=>v,E_:()=>_,Fx:()=>E,H0:()=>m,IM:()=>C,JT:()=>s,NY:()=>S,QU:()=>I,Re:()=>h,Ub:()=>d,Yc:()=>w,ZG:()=>N,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>T,ju:()=>c,kO:()=>g,pA:()=>p,xe:()=>f});var a=n(768618),i=n(967688),o=n(609458);let s=[],l=8,c=436,d=36,u=524,p=4,m=24,_=24,h=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],v={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},T=8*v.fontSize/14,I={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=A(e,r);navigator.clipboard.writeText(n)}}function A(e,r){let n="";return n+=`${C(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,i.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function w(e){return e.endsWith("...")?N():e+"."}function C(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function N(){return(0,i.t)("whiteboard.ai_summary.loading_text")}function L(e,r,n){let i=r.length>0,s=n&&n.length>0;if(!i||s)return!1;let l=(0,a.UN)().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},727310:(e,r,n)=>{n.d(r,{HP:()=>g,Nd:()=>w});var a=n(186606),i=n(204571),o=n(476254),s=n(967688),l=n(564837),c=n(353231),d=n(67308),u=n(577148),p=n(997275),m=n(310376),_=n(728075);function h(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,T=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,I=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S(e,r){let n=(0,p.l)(r,e,"thumbnailImageHash"),[a]=e.useSyncedState("thumbnailImageWidth",null),[i]=e.useSyncedState("thumbnailImageHeight",null);return{thumbnailImageHash:n,thumbnailAspectRatio:a&&i?a/i:void 0}}function A(e,r){let{thumbnailImageHash:n}=S(e,r),[a]=e.useSyncedState("url",null),i=a?decodeURIComponent(a):"null",[o]=e.useSyncedState("title",null),[s]=e.useSyncedState("description",null),[l]=e.useSyncedState("provider",""),c=!!o,d=!!n,u=!!s;return{url:i,rawTitle:o,rawDescription:s,rawProvider:l,hasTitle:c,hasThumbnail:d,hasTitleOrDescription:c||u,hasUrlOnly:!(c||u||d),hasTitleXorDescription:c!==u,isTwitterLinkPreview:"Twitter"===l||"X (formerly Twitter)"===l}}function w({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let w=r.useWidgetId(),{url:C,hasTitle:N,hasThumbnail:L,hasTitleXorDescription:O,hasUrlOnly:R,hasTitleOrDescription:P}=A(r,e),{thumbnailImageHash:D,thumbnailAspectRatio:k}=S(r,e),M=(0,p.l)(e,r,"faviconImageHash"),F=480-(L?112:8)-32-16,[x,U]=r.useSyncedState("orientation",R?"horizontal":"vertical"),{title:B,description:G,fullUrlProvider:V}=function({figma:e,widget:r,titleFontSize:n,titleLineHeight:a,descriptionFontSizeWithTitle:i,descriptionFontSizeWithoutTitle:o,descriptionLineHeight:s,verticalTextWidth:l,horizontalTextWidth:c,faviconDimension:d,hasTitleXorDescription:u,orientation:p}){let{hasTitleOrDescription:_,isTwitterLinkPreview:h}=A(r,e),g=(0,m.H)(r,"title",{name:"Inter Medium",size:n,lineHeight:a},"vertical"===p?l:c,("vertical"===p?2:1)+(u?1:0)+(h?4:0),!1),f=(0,m.H)(r,"description",{name:"Inter",size:g?i:o,lineHeight:s},"vertical"===p?l:c,("vertical"===p?2:1)+(u?1:0),!1);return{title:g,description:f,fullUrlProvider:(0,m.H)(r,"url",{name:"Inter",size:n,lineHeight:a},("vertical"===p?l:c)-(d+8),1+(_?0:1),!0)}}({figma:e,widget:r,titleFontSize:16,titleLineHeight:22,descriptionFontSizeWithTitle:13,descriptionFontSizeWithoutTitle:14,descriptionLineHeight:20,verticalTextWidth:240,horizontalTextWidth:F,hasTitleXorDescription:O,faviconDimension:16,orientation:x}),H=P?(0,i.Js)(C):V,z=()=>{h(u.yc.OPEN_PREVIEW,C),o.D.dispatch((0,l.RK)({rawInput:C}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===x?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===x?v:T},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":z();break;case"convert_to_text":h(u.yc.CONVERT_TO_TEXT,C),a.glU?.replaceNodeWithText(w,C);break;case"vertical":h(u.yc.SWITCH_ORIENTATION_VERTICAL,C),U("vertical");break;case"horizontal":h(u.yc.SWITCH_ORIENTATION_HORIZONTAL,C),U("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let K={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},W=r=>{let a=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:I});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:P?0:3,bottom:0}},a)},j=(r,a,i)=>e.widget.h(n,{name:"container-frame",width:r,height:a,fill:i?{type:"image",imageHash:i,scaleMode:"fill"}:_.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===x?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:z}),Y=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...K},r)},$=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...K,fill:{...K.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},q=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...K,fill:{...K.fill,color:{r:0,g:0,b:0,a:.5}},onClick:z},n);return"vertical"===x?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:_.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!L&&e.widget.h(n,{width:304,height:.01}),L&&j(304,k?Math.max(Math.min(304/k,608),160):160,D),P&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:_.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(L,Y(B),$(N,G)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(P,W(M),q(P,H))):"horizontal"===x?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:_.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(L,!L&&e.widget.h(n,{width:.01,height:.01}),L&&j(112,112,D),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:_.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(L,P&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:_.Vm,spacing:4,padding:0},...r))(Y(B),$(N,G)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:P?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))(W(M),q(P,H)))):void 0})}},452952:(e,r,n)=>{n.d(r,{Z:()=>s}),n(186606),n(19180),n(989232);var a=n(476254),i=n(140357),o=n(292855);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:i.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=i.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=a.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},181643:(e,r,n)=>{n.d(r,{qb:()=>o});var a=n(516404);class i{onFrameDistributionTrackedEvent(e){a.jp(e)}}function o(){new i}},856708:(e,r,n)=>{n.d(r,{_v:()=>o,kJ:()=>s});var a=n(227276);let i=class e{logFeatureGateExposure(e,r){a.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,i){return Math.round(a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,i){return a.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,i){return a.w$.getExperimentNumber(r,n,i,e.SourceLoggingString)}getDynamicConfigString(r,n,i){return a.w$.getDynamicConfigString(r,n,i,e.SourceLoggingString)}getExperimentString(r,n,i){return a.w$.getExperimentString(r,n,i,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,i){return a.w$.getDynamicConfigBoolean(r,n,i,e.SourceLoggingString)}getExperimentBoolean(r,n,i){return a.w$.getExperimentBoolean(r,n,i,e.SourceLoggingString)}};i.SourceLoggingString="fullscreen";let o=i;function s(){new o}},459403:(e,r,n)=>{n.d(r,{MP:()=>s,U1:()=>o,ck:()=>i,pb:()=>l});var a=n(615233);function i(){return a.Ay().frame_context?.type==="integration"}function o(){return i()&&"google-meet"===(0,a.Ay)().integration_host&&!!(0,a.Ay)().is_meet_hardware}function s(){return i()&&"zoom"===(0,a.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return i()&&"google-classroom"===(0,a.Ay)().integration_host}}},473911:(e,r,n)=>{n.d(r,{Yq:()=>s,u1:()=>l,zi:()=>c}),n(938982);var a=n(186606),i=(n(768618),n(19180),n(989232),n(476254),n(998568),n(810503),n(353231),n(138034));n(911947);let o=null;function s(){return o?.bufferedAmount||0}function l(){if(o){let e=o.url;(function(e){if(null!==o){o.onopen=null,o.onmessage=null,o.onclose=null,o.onerror=null;try{o.close()}catch(e){}o=null,(0,i.II)(),a.cgc.disconnect(e)}})("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function c(e=!1){o||(a.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${o?o.url:null}`))}},783444:(e,r,n)=>{n.d(r,{F:()=>s});var a=n(88217),i=n(66699);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,a.yZ)(s,o);(0,i.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},278711:(e,r,n)=>{n.d(r,{bJ:()=>l});var a=n(382902),i=n(338104),o=n(729213),s=n(788903);function l(){new c}class c{constructor(){this.developerRelatedLinksManager=new i.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,o.Q)()}isVariableAvailableInLibraryAsset(e){let r=a.zl.get(s.e3);return r?.status==="loaded"&&r.data.some(r=>r.node_id===e)}}},347421:(e,r,n)=>{n.d(r,{FF:()=>m,XT:()=>_,_I:()=>h});var a=n(186606),i=n(19180),o=n(7376),s=n(989232),l=n(29188),c=n(637640),d=n(967688),u=n(952039);let p="hardware_acceleration_disabled_warning_shown";var m=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e))(m||{});function _(){if(l.eD)return 0;let e=a.CeL.getGpuDeviceInfo();return e?e.vendor.includes("Google Inc.")&&e.graphicsCardName.includes("SwiftShader")?1:2:0}function h(e,r){if(0!==e&&!(0,i.k)().suppress_hardware_acceleration_notification){if(2===e){o.x4&&o.x4.getItem(p)&&((0,s.trackEvent)("Hardware Acceleration Turned On"),delete o.x4[p]);return}if(!o.x4||!o.x4.getItem(p)){let e=()=>{o.x4.setItem(p,"1")};(0,s.trackEvent)("Hardware Acceleration Warning Bell"),r(u.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,d.t)("hardware_acceleration_detector.message"),button:{text:(0,d.t)("hardware_acceleration_detector.learn_more"),action:()=>{c.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),r(u.F.dequeue({})),e(),(0,s.trackEvent)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,s.trackEvent)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},46641:(e,r,n)=>{n.d(r,{g:()=>s});var a=n(848318),i=n(382902),o=n(303397);function s(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,i.t_)(()=>o.Y5.isReady()||o.Y5.onReady())},428941:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(301168),i=n(186606);function o(){return!!(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===i.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}},849249:(e,r,n)=>{n.d(r,{T:()=>i});var a=n(577811);async function i(e,r){if(e in r){let n=r[e];switch(n.type){case"bytes":return Promise.resolve(n.bytes);case"promise":return n.promise}}let n=(0,a.Nd)(e);r[e]={type:"promise",promise:n};let i=await n;return r[e]={type:"bytes",bytes:i},i}},577811:(e,r,n)=>{let a;n.d(r,{B0:()=>V,DK:()=>F,Dl:()=>G,EC:()=>M,Nd:()=>U,d$:()=>y,w6:()=>B});var i=n(936733),o=n(186606),s=n(778122),l=n(19180),c=n(534980),d=n(656329),u=n(810503),p=n(304756),m=n(651159),_=n(546950),h=n(989709),g=n(428484),f=n(829696);let E=document.createElement("canvas"),y=4096,b=E.getContext("2d"),v=document.createElement("canvas"),T=function(){try{return v.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function I(e,r,n,a){let i=o.RYP.SRGB;if("image/png"===r){let r=(0,_.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{i=(0,m.Y)(r.iccProfileRawData)}catch(e){}}let s=null;if("image/jpeg"===r){try{let r=(0,_.yy)(e);r&&(i=(0,m.Y)(r)??o.RYP.SRGB)}catch(e){}s=c.f.getOrientation(e),P&&(s=null)}let l=!1;"image/gif"===r&&(l=(0,_.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await B({url:d,height:null,width:null});return{...S(e,n,a,s,l),colorProfile:i}}finally{URL.revokeObjectURL(d)}}function S(e,r,n,a,i){let{width:o,height:s,originalWidth:l,originalHeight:d,isRotated:u}=function(e,r,n,a,i){let o=c.f.angleFromOrientation(i),s=c.f.orientationIsFlipped(i),l=e,d=r,u=e,p=r;if(90===o||270===o){let n=r;r=e,e=n,n=p,p=u,u=n}return n>0&&a>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>a&&(e=Math.round(e*a/r),r=a),e=Math.max(1,e),r=Math.max(1,r)),E.width=e,E.height=r,b.translate(e/2,r/2),b.scale(e/u,r/p),s&&b.scale(-1,1),b.rotate(Math.PI/180*o),b.translate(-l/2,-d/2),{originalHeight:p,originalWidth:u,width:e,height:r,isRotated:0!==o}}(e.width,e.height,r,n,a);return b.drawImage(e,0,0),{width:o,height:s,originalWidth:l,originalHeight:d,isMultiFrameGIF:i,isRotated:u,bitmap:null,rgba:new Uint8Array(b.getImageData(0,0,o,s).data.buffer)}}function A(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function w(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!R.works)return 16==(await B({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([A(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function C(){if(!R.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let a=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let i=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=i}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(a.data.length!==s.data.length)return!1;for(var l=0;l<a.data.length;++l)if(a.data[l]!==s.data[l])return!1;return!0}async function N(e,r){if(!e)return!1;try{let a=await createImageBitmap(r),i=a.width,o=a.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,p=null;try{if(p=e.createTexture(),e.bindTexture(e.TEXTURE_2D,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*i*o);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(p),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function L(){P=await w(),d.Ay.webkit&&await C()}async function O(e){let r=new Blob([(0,i.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await N(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let R={works:!1,allowsOptions:!1},P=!1,D=null,k=null,M={init(e){k=(async()=>{if(e===o.UF0.YES)R={works:!0,allowsOptions:!0};else{let e=(a||(a=(0,s.iL)()),a).ctx;if(!e)throw Error("Cannot find GL context");R=await O(e)}await L()})()},reset(){null!==D&&D.forgetCallbacks()},prepareDataForEncodeInPlace(e,r,n,a,i=!1){let o=e*r*4;a&&(0,f.X)(n,o),i&&(0,f.e)(n,o)},encodeInPlace(e,r,n,a,s,l,c=o.RYP.SRGB,d=!1){let u,p=E,m=b;c===o.RYP.DISPLAY_P3&&v&&T&&(p=v,m=T),M.prepareDataForEncodeInPlace(e,r,n,l,d);let _=new ImageData(new Uint8ClampedArray(n.buffer),e,r);p.width=e,p.height=r,m.putImageData(_,0,0),u=a?p.toDataURL("image/jpeg",s):p.toDataURL();let h=";base64,";return(0,i.D4)(u.slice(u.indexOf(h)+h.length))},encode:(e,r,n,a,i,s,l=o.RYP.SRGB,c=!1)=>(n=new Uint8Array(n),M.encodeInPlace(e,r,n,a,i,s,l,c)),async decodeAsync(e,r,n,a,i){if(await k,!R.works)return await I(e,r,n,a);D??=new g.o;let o=null,{bitmap:s,isMultiFrameGIF:p,colorProfile:m}=await x(r,e);if(!s)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),(0,l.k)().sinatra_heic_conversion&&"image/heic"===r&&(0,u.x1)("image_io","Something went wrong with HEIC conversion via Upnode",{reportAsSentryError:!0}),await I(e,r,n,a);let _=!1;"image/jpeg"===r&&(_=o!==c.a.ROTATE_0,null!==o&&o!==c.a.ROTATE_0&&P&&d.Ay.chrome&&0>d.Ay.compareVersions([d.Ay.version.toString(),"86"])&&(i=!1),P&&(o=null));let h=s.width,f=s.height;return i&&(null===o||o===c.a.ROTATE_0)&&(0===n||h<=n)&&(0===a||f<=a)?{width:h,height:f,originalWidth:h,originalHeight:f,isMultiFrameGIF:p,isRotated:_,bitmap:s,colorProfile:m}:{...S(s,n,a,o,p),colorProfile:m}},thumbnailSize(e,r){let n=Math.max(e,r),a=0;for(;n>512;)a++,n=Math.floor((n+1)/2);let i=M.dropMips(e,r,a);return{w:i[0],h:i[1],mipsToDrop:a}},dropMips(e,r,n){if(0===e||0===r)return(0,u.x1)("images","Width and height should not be zero"),[e,r];for(let a=0;a<n;++a)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,a){E.width=r,E.height=n,b.translate(0,0),b.scale(1,1),b.rotate(0),b.drawImage(e,0,0,r,n);let i=E.toDataURL(a),o=i.indexOf(",");return A(i.slice(o+1))},async createCanvasAndDrawImage(e,r,n,a){let i,o;"undefined"!=typeof OffscreenCanvas?i=new OffscreenCanvas(e,r):i=G(e,r);let s=i.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),i instanceof OffscreenCanvas?o=await i.convertToBlob({type:a}):o=await new Promise((e,r)=>i.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},a)),{canvas:i,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:a,blob:i}=await this.createCanvasAndDrawImage(r,n,a=>{a.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await i.arrayBuffer(),s=await createImageBitmap(a);return{compressedData:new Uint8Array(o),bitmap:s}}{let a=e.rgba;if(!a)throw Error("Failed to decode image");let i=new ImageData(new Uint8ClampedArray(a),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,a=>{a.putImageData(i,0,0),a.drawImage(a.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encodeInPlace(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},F=128;async function x(e,r){if(!D)throw Error("Worker not initialized");if("image/heic"===e&&(0,h._)())return{bitmap:await (0,h.g)(r),isMultiFrameGIF:!1,colorProfile:o.RYP.SRGB};if("image/heic"!==e||!(0,l.k)().sinatra_heic_conversion)return await D.sendMessage({type:e,array:r,supportsCreateBitmapOptions:R.allowsOptions});try{let e=await p.Ay.post("/api/upnode/heic_convert",r,{retryCount:3,headers:{...p.Ay.requiredHeaders,"Content-Type":"image/heic"},rawBody:!0,responseType:"arraybuffer"}),n=new Uint8Array(e.data),a=new Blob([n],{type:"image/jpeg"}),i=R.allowsOptions?{premultiplyAlpha:"none"}:void 0;return{bitmap:await createImageBitmap(a,i),isMultiFrameGIF:!1,colorProfile:o.RYP.SRGB}}catch(e){return(0,u.x1)("image_io","HEIC conversion via Upnode failed",{error:e.message,reportAsSentryError:!0}),{bitmap:null,isMultiFrameGIF:!1,colorProfile:o.RYP.SRGB}}}async function U(e){return new Uint8Array((await p.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function B(e){return new Promise((r,n)=>{let a=new Image;e.height&&(a.height=e.height),e.width&&(a.width=e.width),a.crossOrigin="";let i=Error();a.onerror=e=>{e.cause=i,n(e)},a.onload=()=>r(a),a.src=e.url})}function G(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function V(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},439952:(e,r,n)=>{n.d(r,{Jr:()=>D,Mj:()=>v,UD:()=>k,xY:()=>R});var a=n(559389),i=n(938982),o=n(746937),s=n(186606),l=n(174577),c=n(19180),d=n(678915),u=n(989232),p=n(615233),m=n(611209),_=n(998568),h=n(810503),g=n(304756),f=n(577811),E=n(303397);let y=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();var b=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(b||{});async function v(e,r,n,a){let i="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await g.Ay.post(i,{sha1s:e,max_size:n,needs_compressed_textures:a},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return{s3_urls:r.data.meta.s3_urls,compressed_texture_s3_urls:r.data.meta.compressed_texture_s3_urls}}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class T extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,T.prototype)}}class I extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,I.prototype)}}class S extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,S.prototype)}}var A=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP=2]="AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP",e[e.LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY=3]="LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY",e[e.UPLOADING=4]="UPLOADING",e[e.READY=5]="READY",e[e.MISSING=6]="MISSING",e[e.FAILED=7]="FAILED",e[e.PRESENT=8]="PRESENT",e))(A||{});let w=class e{constructor(e,r){this.hash=e,this._priority=r,this.compressedTextureS3Path=null,this.shouldDownloadCompressedTexture=null,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(!this.shouldDownloadCompressedTexture&&null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");if(this.shouldDownloadCompressedTexture&&null==this.compressedTextureS3Path)throw Error("Called downloadFromS3 without compressedTextureS3Path when downloading compressed texture");return g.Ay.crossOriginGetAny(this.shouldDownloadCompressedTexture?this.compressedTextureS3Path:this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new S;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,h.x1)("image",r,{hash:this.hash,status:e.status}),(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};w.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class C{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let a=this.queue[e].retryTime;if(null==a||r>=a){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=a<n?a:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}function N(){return E.Y5.openFilePromise()}class L extends Error{constructor(e,r){super(e),this.lookupImages=r}}let O=class e{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={},this.imagesNeedingDirectUpload=new Set,this.imageTimingLog=new Map,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,c.k)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new C,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.compressedTextureLookupQueue=[],this.compressedTextureRetryCount=new Map,this.LOGGING_RATE=.1,this.flushPendingRecordImages=(0,a.s)(async(r=!1)=>{let n=this.pendingImagesToRecord,a=this.pendingRecordImagesTasks,i=this.pendingImagesToRecordByLibraryKey,o=this.pendingRecordImagesTasksByLibraryKey,l=Object.keys(n),c=Object.keys(i),d=l.map(e=>({fileKey:e,type:"fileKey"})).concat(c.map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={};let p=await this.getEditingFileKey();d.forEach(async l=>{if("fileKey"===l.type&&p===l.fileKey){a[l.fileKey].resolve();return}if("fileKey"===l.type&&!l.fileKey){a[l.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===l.type?n[l.fileKey]:i[l.libraryKey];for(;;){try{let n=await g.Ay.put(`/api/files/${p}`,{image_sha1s:d,image_origin_file_key:"fileKey"===l.type?l.fileKey:void 0,image_origin_library_key:"libraryKey"===l.type?l.libraryKey:void 0,is_playground:r}),{success:i,failed:c}=e.parseFileUpdateResponseForImages(d,n);for(let e of(s.Bko.imagePermissionsCopied(i),c))this.markImageMissing(e);for(let e of(c.length>0&&(0,u.trackEvent)("image_permission_copy_failed",{shas:c.join(",")}),d))delete this.pendingPasteRequests[e];"fileKey"===l.type?a[l.fileKey].resolve():o[l.libraryKey].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,m.Jj)(),(0,u.trackEvent)("image_permission_copy_failed",{shas:d.join(",")}),d))this.markImageMissing(e),delete this.pendingPasteRequests[e];("fileKey"===l.type?a[l.fileKey]:o[l.libraryKey]).reject(`4xx error when pasting images ${e}`);return}}let n=1e3*c*Math.random();await new Promise(e=>setTimeout(e,n)),c=Math.min(2*c,64)}})},100)}static shouldUseCompressedTextures(){return e._shouldUseCompressedTextures}getEditingFileKey(){return E.Y5.openFileKeyPromise()}getOrCreateImageLogData(e){let r=this.imageTimingLog.get(e);return r||(r={},this.imageTimingLog.set(e,r)),r}recordImagesFromLibraryKey(e,r,n=!1){if(0===r.length)return Promise.resolve();if(!e)return Promise.reject(Error("No originLibraryKey specified"));if(this.pendingImagesToRecordByLibraryKey[e]??=[],this.pendingImagesToRecordByLibraryKey[e].push(...r),!this.pendingRecordImagesTasksByLibraryKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordImagesTasksByLibraryKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasksByLibraryKey[e].promise;let a=this.pendingRecordImagesTasksByLibraryKey[e].promise;return this.flushPendingRecordImages(n),a}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)return Promise.reject(Error("No originFileKey specified"));if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordImagesTasks[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(r){let n=await N(),a=await v(r,n,this.imageMaxSize,e.shouldUseCompressedTextures()),i=r.filter(e=>!(e in a.s3_urls));if(i.length>0){let r=await E.Y5.sourceFileKeyPromise();if(r){let n=await v(i,{type:"figFile",fileKey:r},void 0,e.shouldUseCompressedTextures());return{s3_urls:{...a.s3_urls,...n.s3_urls},compressed_texture_s3_urls:{...a.compressed_texture_s3_urls,...n.compressed_texture_s3_urls}}}}return{s3_urls:a.s3_urls,compressed_texture_s3_urls:a.compressed_texture_s3_urls}}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,h.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new w(e,w.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}triggerCompressedTextureAvailabilityLookup(e,r){let n=this.allImages.get(e);n&&2===n.state&&new Promise((e,n)=>{let a=this.compressedTextureLookupQueue.splice(0,this.SINATRA_BATCH_SIZE);if(0===a.length)return null;for(let e of a)this.markImageLookingUpCompressedTextureAvailability(e);try{g.Ay.post(`/file/${r}/compressed_texture_available/batch`,{sha1s:a}).then(r=>{e(r)}).catch(e=>{n(new L(e.message,a))})}catch(e){n(new L(e.message,a))}}).then(e=>{if(!e)return;let n=e.data.meta.results;for(let e of Object.keys(n))this.resolveCompressedTextureAvailabilityLookup(e,r,n[e])}).catch(e=>{for(let n of e.lookupImages)this.resolveCompressedTextureAvailabilityLookup(n,r,null)})}resolveCompressedTextureAvailabilityLookup(e,r,n){let a=this.allImages.get(e),i=this.compressedTextureRetryCount.get(e)||0;if("generating"===n&&i<20){let n=500*(1<<Math.min(i,4));this.compressedTextureLookupQueue.push(e),this.markImageNeedsCompressedTextureAvailabilityLookup(e),this.compressedTextureRetryCount.set(e,i+1),setTimeout(()=>this.enqueueImageToCheckCompressedTextureAvailability(e,r),n)}else{this.markImagePresent(e),this.downloadQueue.push(a);let r=this.getOrCreateImageLogData(e);switch(r.compressedTextureRetryCount=i,r.compressedTextureResult=n,n){case"generated":a.shouldDownloadCompressedTexture=!0;break;case"failed":case null:case"generating":this.compressedTextureRetryCount.delete(e),a.shouldDownloadCompressedTexture=!1}this.maybeDownloadMoreImages()}}enqueueImageToCheckCompressedTextureAvailability(e,r){setTimeout(()=>{this.triggerCompressedTextureAvailabilityLookup(e,r)},0)}setImageDownloadPriority(e,r){let n=this.getOrCreateImageLogData(e);if(n.downloadPriority=r,n.downloadPriorityTimestamp=performance.now(),!e){(0,h.xi)("setImageDownloadPriority","invalid hash");return}let a=this.allImages.get(e);if(null==a){a=new w(e,r),this.allImages.set(e,a),this.queueImageForLookup(a);return}4===a.state&&(0,h.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),a.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let r=this.downloadQueue.pop(this.minPriority);if(null==r)break;if(!r.found){let e=r.retryDelay;!Number.isFinite(e)||e<=0?(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),e);break}let n=r.image,a=this.getOrCreateImageLogData(n.hash);if(n.hash){this.verbose&&(0,h.Lo)("image","download start",{hash:n.hash,ok:!this.pendingDownloads.has(n.hash)});let e=performance.now();a.downloadStartedTimestamp=e,this.pendingDownloads.add(n.hash)}n.download(this.imageMaxSize).then(r=>{if(this.cancelDownloads.delete(n.hash))return;this.verbose&&((0,h.Lo)("image","download done",{hash:n.hash,ok:!this.alreadyDownloaded.has(n.hash)}),this.getOrCreateImageLogData(n.hash).downloadFinishedTimestamp=performance.now()),this.alreadyDownloaded.add(n.hash);let a=null;if(this.imagesNeedingDirectUpload.has(n.hash))s.Bko.imageDownloadedForPaste(n.hash,r),this.imagesNeedingDirectUpload.delete(n.hash);else{let i=r;if(e.shouldUseCompressedTextures()&&r.slice(0,12).toString()===y){let e=(0,d.LF4)(r);a={width:e.pixelWidth,height:e.pixelHeight},s.Bko.setCompressedTextureMetadata(n.hash,a),i=e.levels[0].levelData,this.clearImageDecodePending(n.hash,!0)}s.Bko.imageDownloaded(n.hash,i)}a||this.pendingDecodes.has(n.hash)||((0,h.xi)("ImageManager","missing pending decode after download",{hash:n.hash}),(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),n.imageIsReady())},e=>{if(this.pendingDecodes.delete(n.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),this.cancelDownloads.delete(n.hash))return;if(e instanceof T)this.markImageMissing(n.hash);else if(e instanceof I)(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(n.hash);else if(e instanceof S)this.queueImageForLookup(n);else{if(e instanceof g.Dr&&403===e.status){this.markImageFailed(n.hash);return}let r=5e3*(1<<Math.min(n.retries,4));r+=r*Math.random(),n.retries+=1,(429===e.status||503===e.status)&&(r*=4),n.retryTime=Date.now()+r,this.downloadQueue.push(n)}let r=this.getOrCreateImageLogData(n.hash),a=this.allImages.get(n.hash);a&&(r.decodedImageState=a.state),r.errorOccurredTimestamp=performance.now()}).finally(()=>{this.pendingDownloads.delete(n.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,w.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,h.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.getOrCreateImageLogData(e).downloadFinishedTimestamp=performance.now(),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,h.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)});let n=this.getOrCreateImageLogData(e);n.decodeFinishedTimestamp=performance.now(),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?(this.markImageReady(e),n.decodedImageState=5):(this.markImageFailed(e),n.decodedImageState=7),(0,c.k)().image_log_timing&&Math.random()<this.LOGGING_RATE&&(0,u.trackEvent)("image_log_timing",{hash:e,...n})}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=8,s.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=6,s.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=7,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageNeedsCompressedTextureAvailabilityLookup(e){let r=this.allImages.get(e);r&&(r.state=2,this.lookupCompressedTextureAvailabilities(e))}markImageLookingUpCompressedTextureAvailability(e){let r=this.allImages.get(e);r&&(r.state=3)}async lookupImages(){let r=[];for(let e of this.incomingImages.values())0===e.state&&(r.push(e),e.state=1,this.verbose&&(0,h.Lo)("image","lookup",{hash:e.hash}));try{for(;r.length>0;){let n=r.splice(0,this.SINATRA_BATCH_SIZE);for(let e of n){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,h.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let a=await this.resolveImageUrls(n.map(e=>e.hash));for(let r of n){let n=a.s3_urls[r.hash],i=null;e.shouldUseCompressedTextures()&&(i=a.compressed_texture_s3_urls[r.hash]),n?(r.s3Path=n,i?(r.compressedTextureS3Path=i,this.compressedTextureLookupQueue.push(r.hash),this.markImageNeedsCompressedTextureAvailabilityLookup(r.hash),this.lookupCompressedTextureAvailabilities(r.hash)):(this.markImagePresent(r.hash),this.downloadQueue.push(r)),this.verbose&&(0,h.Lo)("image","enqueued-batch",{hash:r.hash})):(this.markImageMissing(r.hash),this.verbose&&(0,h.Lo)("image","missing",{hash:r.hash})),this.incomingImages.delete(r.hash)}}}finally{for(let e of r)this.incomingImages.delete(e.hash)&&(0,h.xi)("image","incoming fallback delete",{hash:e.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}e.shouldUseCompressedTextures()||this.maybeDownloadMoreImages()}lookupCompressedTextureAvailabilities(e){N().then(r=>{"figFile"===r.type&&this.enqueueImageToCheckCompressedTextureAvailability(e,r.fileKey)})}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,h.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.imageTimingLog.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),5!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,h.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,l.v)(),this.verbose&&(0,h.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,h.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,h.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,l.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let a=Math.round(.001*(performance.now()-r));(0,h.xi)("image","queue empty is taking a long time",{elapsedSec:a,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,h.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let i=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,i)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,h.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let a=n??s.AlE.getMutableActiveDocument();return s.Bko.findImagesUnder(a,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&5!==e.state&&4!==e.state)}loadAllImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!0,i)}waitForImagesUnder(e,r,n,a=null,i){return this.loadAllImages(e,r,n,a,!1,i)}imageIsPendingDecode(e){return this.pendingDecodes.has(e)}async loadAllImages(e,r,n,a=null,i,o){let s=performance.now();this.verbose&&(0,h.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,h.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,a&&a(c,l),s))i&&this.setImageDownloadPriority(r.hash,w.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,a&&a(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,h.Lo)("image","loadImageByHash",{hash:e});let r=this.allImages.get(e);if(r)switch(r.state){case 4:case 5:case 6:case 7:return}this.setImageDownloadPriority(e,w.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}setShouldUseCompressedTextures(r){e._shouldUseCompressedTextures=r}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,h.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,a){if(this.pendingUploads.has(a))return;this.pendingUploads.add(a);let i=new w(a,0);i.state=4,this.allImages.set(a,i);let o=`/api/upnode/image?purpose=canvas&sha1=${a}&fileKey=${e}`,l=0;g.Ay.post(o,r,{retryCount:1/0,headers:{...g.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{i.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,h.x1)("image","unexpected status code from image upload",{hash:a,status:e.status},{reportAsSentryError:!0});return}(0,h.Lo)("image","uploaded new image",{hash:a}),this.pendingUploads.delete(a),s.Bko.imageUploadFinished(a,s.d8m.SUCCESS),i.state=5,this.uploadedImagesNeedingUrl.add(a),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,h.x1)("image","image upload failed, removing invalid image",{hash:a}),r=s.d8m.UNSUPPORTED_MEDIA):r=s.d8m.OTHER_FAILURE,this.pendingUploads.delete(a),s.Bko.imageUploadFinished(a,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),a=await this.resolveImageUrls(n);for(let e of n){let r=a.s3_urls[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new w(e,0);n.s3Path=r,n.state=5,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,l.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,h.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),a=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),i=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,h.Lo)("ImageManager","ImageManager debug info",{incomingImages:a,downloadQueue:s,pendingDownloads:i,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=s.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}};O._shouldUseCompressedTextures=!1;let R=O,P=new class{constructor(){this.imageManager=new R}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}copyImagePermissionsFromLibraryKey(e,r,n){return this.imageManager.recordImagesFromLibraryKey(e,r,n)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await g.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,a){this.imageManager.startUploadingImage(e,r,n,a)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}staticAssetWithPath(e){return(0,p.CZ)(e)}};function D(){return P.imageManager}async function k(e,r,n){if(!s.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let a=await f.EC.decodeAsync(e,r,f.d$,f.d$,!0),i=await crypto.subtle.digest("SHA-1",e),o={width:a.width,height:a.height,compressedData:e,hash:new Uint8Array(i),bitmap:a.bitmap?a.bitmap:void 0,mimeType:r,rgba:a.rgba?a.rgba:new Uint8Array,name:n},l=f.EC.thumbnailSize(a.width,a.height),c=await f.EC.generateThumbnail(o,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:o,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function M(e,r){let n=!!R.includeOutsideContents(r);await D().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],s.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,o.c)(M)},383933:(e,r,n)=>{n.d(r,{ZI:()=>eB,c3:()=>eU}),n(848318);var a=n(835439),i=n(2976),o=n(863703),s=n(811055),l=n(395400),c=n(103417),d=n(678626),u=n(901383),p=n(393246),m=n(533124),_=n(383339),h=n(85542),g=n(87874),f=n(538775),E=n(715627),y=n(767226),b=n(983284),v=n(329910),T=n(684204),I=n(55372),S=n(315696),A=n(721494),w=n(869704),C=n(313122),N=n(256025),L=n(550028),O=n(981637),R=n(231e3),P=n(858139),D=n(958760),k=n(305886),M=n(462723),F=n(56629),x=n(67044),U=n(85883),B=n(298109),G=n(601021),V=n(648857),H=n(948269),z=n(247638),K=n(34015),W=n(186753),j=n(638101),Y=n(303629),$=n(579283),q=n(614872);n(186606);var X=n(664355),J=n(244951),Z=n(863187),Q=n(490416),ee=n(689253),et=n(769448),er=n(55671),en=n(395190),ea=n(766668),ei=n(563869),eo=n(574976),es=n(136271),el=n(325352),ec=n(518576),ed=n(36030),eu=n(214528),ep=n(228413),em=n(148249),e_=n(702196),eh=n(708647),eg=n(955404),ef=n(297285),eE=n(342527),ey=n(463087),eb=n(459134),ev=n(276578),eT=n(712615),eI=n(635918),eS=n(58142),eA=n(47356),ew=n(641864),eC=n(730899),eN=n(884102),eL=n(285682),eO=n(133672),eR=n(803876),eP=n(823558),eD=n(887342),ek=n(136964),eM=n(586049),eF=n(335152),ex=n(283664);ei.A,a.V,el.A,i.V,eo.A,o.c,eR.A,s.i,eR.A,s.i,eu.A,a.V,eh.A,l.U,eg.A,c.R,ef.A,d.A,eE.A,u.N,ey.A,p.n,eS.A,m.y,eP.A,a.V,_.p,h.E,eD.A,a.V,ek.A,a.V,eM.A,a.V,eF.A,a.V,Z.A,a.V,Q.A,a.V,ee.A,a.V,et.A,a.V,er.A,a.V,en.A,a.V,ec.A,a.V,ed.A,a.V,ep.A,g.p,es.A,f.K,eA.A,E.N,eA.A,E.N,J.A,y.m,eb.A,b.P,em.A,v.a,ea.A,T.O,em.A,v.a,eN.A,I.i,eN.A,S.A,e_.A,A.r,ew.A,a.V,ev.A,w.H,C.K,eI.A,w.H,C.K,eL.A,X.V,C.K,eO.A,X.y,C.K,eT.A,N.O,eI.A,N.O,N.O,ex.A,L.F,O.U,R.m,P.m,D.b,k.n,M.D,F._,x.U,U.a,B.E,G.e,V.U,H.V,z.x,K.t,K.t,K.t,O.U,W.q,j.x,Y.F,$.L,q.H,eC.A;let eU=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eB=40},537842:(e,r,n)=>{n.d(r,{fG:()=>T});var a=n(579893),i=n(400868),o=n(152347),s=n(752095),l=n(749357),c=n(478252),d=n(274704),u=n(493724),p=n(671263),m=n(694878),_=n(322121),h=n(70714),g=n(743686),f=n(52026),E=n(881787),y=n(451289);let b={ArrangeAsListBehavior:d.b,ConnectorToolBehavior:u.a,TableBehavior:g.H,TemplatePreviewBehavior:E.Z,VideoBehavior:y.s,SectionPresetBehavior:h.V,DevHandoffAnnotationsMouseBehavior:o.l,ResponsiveSetBehavior:m.j,SitesBlockBehavior:_.Y,SlideDeckAddBehavior:l.w,SlideDeckReorderRowBehavior:c.M,MoveEmbeddedPrototypeBehavior:s.W,CooperGridAddBehavior:a.u,CooperGridReorderRowBehavior:i.G,FrameQuickAddBehavior:p._};class v{createMouseBehavior(e){if(e in b)return new b[e](e);throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return f.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return f.Ro.addButtonHoveredRadius}}function T(){new v}},621350:(e,r,n)=>{n.d(r,{_p:()=>h});var a=n(258871),i=n(615233),o=n(609218),s=n(715980),l=n(738714),c=n(996046),d=n(70433),u=n(200300),p=n(112661),m=n(513806);class _{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let a=(0,c.b$)(r),o=!!(0,i.Ay)().campfire_model_enabled,s=(0,l.of)(r,{isRecovery:!1,isUserInLimitedSpace:!1,fullscreenMemoryWarningLevel:d.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:a,isPublishingModalDisabled:!1,isBillingRemodelEnabled:o}),u=n(783464).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:a,includeDisabled:!1});return new p.xm(r.mirror.appModel,r.selectedView,[...s,...u]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,s.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!u.nt.customKeyboardShortcuts.getValue())return[];let e=(0,a.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:i}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=a.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:i})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=m.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":m.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=o.NF,a=0,i=e.split("+");for(let e of(i.length>0&&""===i[i.length-1]&&(i.pop(),i.length>0&&(i[i.length-1]=i[i.length-1]+"+")),i)){if(""===e)continue;let r=o.cy[e.toUpperCase()];if(e===o.NF||r&&(a&r)>0)return null;if(r&&(r&o.QI)!=0)a|=r;else{if(n!==o.NF)return null;n=e}}return n===o.NF&&0===a?null:{key:n,modifierMask:a,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=m.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,a=[];return n.modifierMask&o.pP&&a.push(this.getDisplayStringFromKey("Control")),n.modifierMask&o.xC&&a.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&o.IL&&a.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&o.No&&a.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&o.eb&&a.push(this.getDisplayStringFromKey("RightAlt")),n.key!==o.NF&&a.push(this.getDisplayStringFromKey(n.key)),r?a.join(""):a.join("+")}}function h(e){new _({store:e})}},401424:(e,r,n)=>{n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>p,GN:()=>N,QI:()=>E,Qu:()=>k,RG:()=>O,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>w,db:()=>P,hu:()=>b,lR:()=>T,uN:()=>_}),n(848318),n(301168),n(186606),n(19180),n(813147);var a=n(231159);n(277454),n(554326);let{action:i,reducer:o}=(0,a.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,a.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,a.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:p}=(0,a.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:m,reducer:_}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:h,reducer:g}=(0,a.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,a.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:v,reducer:T}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:I,reducer:S}=(0,a.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:A,reducer:w}=(0,a.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:C,reducer:N}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:L,reducer:O}=(0,a.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:k}=(0,a.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},446745:(e,r,n)=>{n.d(r,{LC:()=>s});var a=n(337161),i=n(226601);class o{updateViolationsForNodes(e,r){let n=(0,a.r)();return n?n.updateViolationsForNodes(e,r):Promise.reject()}isDesignLinterEnabled(){return(0,i.qZ)()}}function s(){new o}},796580:(e,r,n)=>{n.d(r,{R:()=>l});var a=n(186606),i=n(7376),o=n(259964);function s(e){return 1===parseInt(e)}let l=new class{constructor(){this.defaultShowSidebar={[o.nT.Design]:!0,[o.nT.DevHandoff]:!0,[o.nT.Whiteboard]:!1,[o.nT.Slides]:!1,[o.nT.Sites]:!0,[o.nT.Cooper]:!0,[o.nT.Illustration]:!0,[o.nT.Figmake]:!0},this.defaultPropertiesPanelSplitPosition={[o.nT.Design]:241,[o.nT.DevHandoff]:321,[o.nT.Whiteboard]:241,[o.nT.Slides]:241,[o.nT.Sites]:241,[o.nT.Cooper]:241,[o.nT.Illustration]:241,[o.nT.Figmake]:241},this.prefix="",this.editorType=o.nT.Design,this.loggedIn=!0,this.showUi=!0}defaultSidebarSplitPosition(e){return({[o.nT.Design]:240,[o.nT.Whiteboard]:240,[o.nT.DevHandoff]:320,[o.nT.Slides]:200,[o.nT.Sites]:240,[o.nT.Cooper]:240,[o.nT.Illustration]:240,[o.nT.Figmake]:240})[e]}setEditorType(e){this.editorType=e,this.prefix=function(e){switch(e){case o.nT.Design:return"";case o.nT.Whiteboard:return"whiteboard-";case o.nT.Slides:return"piper-";default:return""}}(e)}setLoggedIn(e){this.loggedIn=e}getLocalStorageValue(e,r){let n=`${this.prefix}${e}`;if(i.x4){let e=i.x4.getItem(n);if(e)return r(e)}return null}get showSidebar(){return this.getLocalStorageValue("show-sidebar",s)??this.defaultShowSidebar[this.editorType]}get sidebarSplitPosition(){let e=this.editorType===o.nT.DevHandoff?"dev-handoff-sidebar-split-position":"sidebar-split-position";return this.getLocalStorageValue(e,parseFloat)||this.defaultSidebarSplitPosition(this.editorType)}get propertiesPanelSplitPosition(){return this.getLocalStorageValue("properties-panel-split-position",parseFloat)||this.defaultPropertiesPanelSplitPosition[this.editorType]}get topLevelMode(){return this.loggedIn?a.lyf.LAYOUT:a.lyf.PREVIEW}}},264790:(e,r,n)=>{n.d(r,{F4:()=>h,Yc:()=>v,aW:()=>b,bM:()=>E,cF:()=>u,dn:()=>_,le:()=>y,o_:()=>d});var a=n(186606),i=n(19180),o=n(637640),s=n(615233),l=n(810503),c=n(303397);let d=1048576,u=0x40000000,p=(0,i.k)().wasm_4gb&&o.Ay.location&&"1"===new URLSearchParams(o.Ay.location.search).get("wasm-4gb"),m=o.Ay.location&&"true"===new URLSearchParams(o.Ay.location.search).get("recovery"),_=p?a.rCR.MAXIMUM:m?a.rCR.RECOVERY:a.rCR.DEFAULT;function h(e){let r=a.hMR.setHeapMemoryMode(e);return(0,l.Lo)("memory",`setHeapMemoryMode(${e}) ${r?"success":"failed"}`),r}let g=null,f=null;function E(e,r){"fullscreen-app"===e?g=r:f=r}function y(e){return"fullscreen-app"===e?g?.()??0:"prototype-lib"===e?f?.()??0:g?.()||f?.()||0}function b(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function v(){return(a.hMR?.getTotalUsedHeapMemory()||0)+c.Y5.memorySpikeOnFileLoadBytes()}(0,i.k)().memory_profiling_local&&(0,s.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),r=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=r}),(0,s.b5)()&&(window.getTopMemoryFunctions=()=>{let e=a.YyC.getAll(),r=new Map,n=new Map,i=new Map;for(let o of e)o.includes("allocCallCount")?r.set(o,a.YyC.getCount(o)):o.includes("allocMaxDelta")?n.set(o,a.YyC.getCount(o)):o.includes("allocTotalDelta")&&i.set(o,a.YyC.getCount(o));console.log("call count events",Array.from(r).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(n).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(i).sort((e,r)=>r[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{a.YyC.resetAll()})},47727:(e,r,n)=>{n.d(r,{qZ:()=>m});var a=n(186606),i=n(382902),o=n(967688),s=n(843117),l=n(952039),c=n(880143),d=n(106641),u=n(303397);class p{setMentionsTypeaheadQuery(e){i.zl.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=i.zl.get(d.h1),n=i.zl.get(d.LQ)?.index||null,a=i.zl.get(d.wm);(0,c.W)(e,r,n,a)}i.zl.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=i.zl.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){i.zl.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return i.zl.set(d.wm,e),e}endSearchSession(){let e=i.zl.get(d.wm);return i.zl.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{a.fp8?.allowSendNotificationsForPastedMentions(e)}}}))}}function m(){new p}},702038:(e,r,n)=>{n.d(r,{Br:()=>x,D$:()=>v,Dh:()=>b,G9:()=>w,GL:()=>S,Hr:()=>y,NT:()=>k,T8:()=>B,Uc:()=>O,XP:()=>W,aB:()=>P,aY:()=>D,ax:()=>F,bw:()=>R,gX:()=>L,hq:()=>N,i:()=>A,iT:()=>C,n_:()=>K,tJ:()=>T,tw:()=>M,wr:()=>I});var a=n(887048),i=n(660376),o=n(559389),s=n(186606),l=n(553547),c=n(19180),d=n(989232),u=n(315933),p=n(29188),m=n(231277),_=n(206836),h=n(476254),g=n(303397),f=n(489082),E=n(273555);let y=l.dI(l.Hr);function b(e){s.Egt.addToSelection(e)}function v(e){s.Egt.removeFromSelection(e)}function T(e,r=!0){s.Egt.replaceSelection(e,r)}function I(){s.Egt.clearSelection()}function S(e,r){s.Egt.selectNodesInRange(e,r)}function A(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&((0,c.k)().sts_code&&(n.isCodeFile||n.isCodeInstance||n.isCodeComponent)&&n.setHasBeenManuallyRenamed(!0),n.name=r)}function w(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function C(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function N(e){s.Egt.expandUpToRoot(e)}function L(e){s.glU?.updateAppModel(e)}function O(e){L({hoveredNode:e})}function R(e){L({devHandoffCodeLanguage:e})}function P(e){L({devHandoffPreferences:e})}function D(){return s.Ez5?.propertiesPanelState()?.propertiesPanelTab}function k(e){return D()?.set(e)}function M(){return s.Ez5?.devModePropertiesPanelState()?.selectedTab}function F(e){return M()?.set(e)}function x(e){L({activeTextReviewPlugin:e})}let U=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","aspectRatioLockToggled","miterLimitAngle","terminalCap","dashCap","dynamicStrokeFrequency","dynamicStrokeSmoothen","dynamicStrokeWiggle","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","textPathStartForward","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardStrokeColor","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","codeBlockLanguage","codeBlockTheme","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","gridRowCount","gridColumnCount","gridTrackSize","gridTrackSizingType","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","videoShowControls","themeId","objectAnimationType","objectAnimationDuration","objectAnimationPhase","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","htmlWidgetGenericEmbedUrl","htmlWidgetGenericEmbedCodeType","htmlWidgetGenericEmbedIframeHtml","htmlWidgetGenericEmbedAllowFullscreen","appear","hover","press","focus","scrollParallax","scrollTransform","cursor","marquee","code"];function B(e,r,n,o,l){u.rH.start("update-selection-properties");try{!function(e,r,n,o,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of U)if(n in e){let a=e[n];a!==f.oV&&(r[n]=a),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let a=e[n];a!==f.oV&&(r[n]=a)}return r}(c);if(o=function(e){switch(e){case E.zk.YES:case E.zk.YES_FORCE_TRACKING_AS_EDIT:case E.zk.YES_WITHOUT_TRACKING_AS_EDIT:return E.zk.YES;default:return E.zk.NO}}(o),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,i.KF)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap,r=(0,E.w3)(e);u.variableConsumptionMap=r,s.glU?.shouldDualWritePcm()&&(u.parameterConsumptionMap=r)}}let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.glU?.updateSelectedStyleProperties(e,n,o===E.zk.YES),(0,i.KF)(null!=r.styleType,"unknown style type"),G(r.styleType)}else{let e=a.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.Egt.updateSelectionProperties(d,n,l,o===E.zk.YES,e)}}(e,r,n,o,l)}catch(e){throw e}finally{u.rH.stop("update-selection-properties")}}let G=(0,o.s)(e=>{(0,d.trackEvent)("Style Edited",{styleType:e})},500),V=Object.create(null);var H=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(H||{});let z=new Set([0,1,2,3]);function K(e=z){e.has(0)&&g.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",j),e.has(2)&&(g.Y5.fromFullscreen.on("selection:addSelectors",$),g.Y5.fromFullscreen.on("selection:removeSelectors",q),g.Y5.fromFullscreen.on("selection:replaceSelectors",X)),e.has(1)&&g.Y5.fromFullscreen.on("updateAppModel",J),e.has(3)&&g.Y5.fromFullscreen.on("selectionPropertiesUpdate",Z)}function W(){let e=V;return V=Object.create(null),e}function j(e){(0,i.KF)(!V.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),V.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function Y(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function $(e){(0,i.KF)(!V.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),V.selection||=Object.create(null),V.selection.add||=Object.create(null),V.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=l.dI({sessionID:n,localID:a});V.selection.add[i]=!0}}function q(e){(0,i.KF)(!V.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),V.selection||=Object.create(null),V.selection.remove||=Object.create(null),V.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=l.dI({sessionID:n,localID:a});V.selection.remove[i]=!0}}function X(e){(0,i.KF)(!V.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,i.KF)(!V.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),V.selection||=Object.create(null),V.selection.replace||=Object.create(null),V.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=Y(r,e),a=Y(r,e+4),i=l.dI({sessionID:n,localID:a});V.selection.replace[i]=!0}}function J({changes:e,shouldIgnoreUserPrefs:r}){if(p.eD){let r;let n={},a={},i="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(i))n[r.substr(i.length)]=e[r].value;else{let n=(0,m.m)(r);if(void 0!==n){let i=e[r].value;for(let{name:e,propertyValue:r}of n.actions)a[e]=i===r}}e.keyboardShortcuts&&(r=(0,_.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(a).length>0,l=void 0!==r;(o||s||l)&&p.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?a:void 0,actionShortcuts:r})}let n=Object.create(null),a=Object.create(null);for(let i in e)n[i]=e[i].value,a[i]=r?.[i];V.appModelChanges={...V.appModelChanges,...n},V.appModelChangesShouldIgnoreUserPrefs={...V.appModelChangesShouldIgnoreUserPrefs,...a}}function Z(e){let r=e.buffer&&e.buffer.length>0?a.w.decodeMessage(e.buffer):null;delete e.buffer,(0,i.KF)(!V.selectionProperties,"Updating selectionProperties multiple times on a frame"),V.selectionProperties={message:r,derivedProperties:e}}},94311:(e,r,n)=>{n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>p,vS:()=>m});var a=n(186606),i=n(476254),o=n(353231);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,_()}function p(){s=!1,l=!1,c=!1,d=!1}function m(e,r){let n=i.D.getState(),a=n.openFile?.key;a&&!d&&((0,o.ds)("Show Missing Fonts Popover",a,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function _(){if(s&&l&&!c){let e=i.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(a.jXp.GOOGLE),has_local_fonts:r.has(a.jXp.LOCAL),has_shared_fonts:r.has(a.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class h{markMissingFontScannerAsComplete(){s=!0,_()}}function g(){new h}},939019:(e,r,n)=>{n.d(r,{M:()=>s});var a=n(186606),i=n(768618),o=n(273555);class s{getValue(){let e=new Map;for(let r of(0,i.UN)().getDirectlySelectedNodes()){r.update();let n=this.getValueForNode(r);null!=n&&e.set(r.guid,n)}return e}onChange(e,r,n){let s=!1;for(let a of(0,i.UN)().getDirectlySelectedNodes()){let i=e.get(a.guid);if(null!=i)try{let e=r(i);this.setValueForNode(a,e,n===o.zk.NO),s=!0}catch(e){}}n!==o.zk.NO&&s&&a.glU?.triggerAction("commit",{})}}},461445:(e,r,n)=>{n.d(r,{AW:()=>f,Ak:()=>I,Cd:()=>E,Ff:()=>b,IL:()=>C,Ki:()=>S,LD:()=>g,PV:()=>A,W5:()=>y,WA:()=>N,Xk:()=>w,Xl:()=>O,mQ:()=>L});var a=n(186606);n(768618),n(19180);var i=n(382902),o=n(810503),s=n(540698),l=n(303397),c=n(169245),d=n(944239),u=n(734139);let p=null,m=0,_=!1,h=!1;function g(e){switch(e){case a.kul.UNJOINED:return"unjoined";case a.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case a.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case a.kul.GOT_SCHEMA:return"got_schema";case a.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case a.kul.JOINING_RECONNECT:return"joining_reconnect";case a.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case a.kul.JOINED:return"joined";case a.kul.SHOULD_UPGRADE:return"should_upgrade";case a.kul.UPGRADING:return"upgrading";case a.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case a.kul.DETACHED:return"detached";default:return"unknown"}}function f(){h||(h=!0,setInterval(()=>l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&a.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){p||(p=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),m=e,_||function e(){m&&(_=!0,p(function(){_=!1,m&&a.h3O.flush(),e()},m))}()}function y(e){let r=I(),n=S(r);return a.h3O.startLoadingAllPages(r,e),n.then(()=>{i.zl.set(c.nc,!1)}),n}let b=(0,d.n)(()=>a.h3O.isIncrementalSession()||a.h3O.isValidatingIncremental()),v=1,T=new Map,I=()=>v++;function S(e){return new Promise((r,n)=>{T.set(e,[r,n])})}function A(e){let r=T.get(e);if(r){let[n,a]=r;n(),T.delete(e)}}function w(){T.forEach((e,r)=>{let[n,a]=e;a()}),T.clear()}function C(e,r,n=a.DPQ.CONTAINING_PAGE){(0,s.nl)();let i=I(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function N(e,r,n=a.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let i=I(),o=S(i),l=n===a.DPQ.PLUGIN;return a.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,i,r,l),o}function L(e){return!!a.h3O&&a.h3O.isNodeDownloaded(e)}function O(e){let r=()=>{let n=I();return new Promise(async(r,i)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:a.NUh.ALWAYS}),await (0,u.oJ)(a.kul.JOINED),T.set(n,[r,i]),a.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},531288:(e,r,n)=>{n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s}),n(848318),n(891627);var a=n(186606);n(768618);let i={};function o(e,r,n){return i[e]=n,a.glU.addNodePositionSubscription(e,r)}function s(e){delete i[e],a.glU.removeNodePositionSubscription(e)}function l(e,r){let n=i[e];n&&n(r)}},859480:(e,r,n)=>{n.d(r,{$P:()=>v,dh:()=>T,i:()=>E,nn:()=>I,uS:()=>y}),n(848318),n(301168);var a=n(186606);n(320953);var i=n(553547),o=n(768618),s=n(952039),l=n(133685);n(31898);var c=n(529848);n(740495);var d=n(806496);n(381673),n(303397),n(702038),n(461445);var u=n(601167);n(355755);var p=n(70433);n(730143),n(318147);var m=n(253332),_=n(574422),h=n(614092),g=n(606672);n(520779),n(386252);var f=n(583484);function E(e,r){return!!e&&!!r.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/)}function y({openFile:e,loadedPageNode:r,pageName:n}){return!(!r||!e||(0,m.KI)(e))&&!!E(r,n)&&r?.childCount===0}n(274016);let b=0;async function v(e,r,n,m,h,E,y,v,T,I){let S;if(I&&(0,l._$)(m,I,"overview_set_current_page"),e===r)return;let A=performance.now(),w=b+=1;E("action_page_switch_initiated",{pageSwitchId:b,oldPageNodeId:r,newPageNodeId:e,isIncremental:a.h3O.isIncrementalSession(),isAlreadyLoaded:h,currentNodeCount:a.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let C=new Promise(e=>{S=e});a.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,d.J)(async()=>{if(await (0,o.UN)().setCurrentPageFromNodeAsync(e),r!==e){let o=(0,g.vw)(n),l=(0,p.P3)()>=75,d=l?new Set:n.fetchedPageIds||new Set;if(o&&(l&&m((0,c.EB)({fetchedPageIds:d})),m((0,c.SR)({isLoadingPage:!0})),m((0,g.yH)({version:o,currentPageNodeId:e,fetchedPageIds:d,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),T&&y&&v){let r=a.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===i.AD?m(s.F.dequeue({matchType:"view_changes"})):(a.Egt.setSelectedNodeAndCanvas(r,!0),y((0,u.QZ)({nodeId:r,...f.ob}),f.kh),v(r))}_.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:w,duration:performance.now()-A,currentNodeCount:a.CeL?.getFileNodeCount()},!0)}a.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await C}function T(e=!0){return(0,h.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}function I(){return(0,h.Fk)(e=>e.getCurrentPage()?.name||null)}},426299:(e,r,n)=>{n.d(r,{E3:()=>C,JX:()=>k,Lt:()=>B,N9:()=>O,OO:()=>M,Ou:()=>A,Tm:()=>F,XE:()=>P,Z3:()=>D,aT:()=>function e(r){if(r.effects&&r.effects.filter(e=>e.visible).length>0)return!0;for(let n of r.childrenNodes??[])if(e(n))return!0;return!1},bn:()=>w,c4:()=>V,iC:()=>G,n_:()=>U,qg:()=>R,rC:()=>E,sb:()=>N,x$:()=>S,y7:()=>L});var a=n(887048),i=n(660376),o=n(871043),s=n(803565),l=n(186606),c=n(994441),d=n(415955),u=n.n(d),p=n(206639),m=n(476254),_=n(353231),h=n(303397),g=n(942263),f=n(489082);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),v=e=>{let r=c.s.identity();return r.translate(.5,.5),e&&(T(e.leftEndCap)||T(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function T(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let I=null;function S(e){if(!w(e.type))return null;if(0===e.stops.length){let r=m.D.getState();(0,_.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:p.FN,position:0})}return e}function A(e){return N(e.type)?e:null}function w(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function C(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function N(e){return null!=e&&"SOLID"===e}function L(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function O(e){return!e||(0,f.gl)(e)?null:e.map(L).filter(o.Vq)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}function P(e){return"PATTERN"!==e.type?null:e}function D(e){return"NOISE"!==e.type?null:e}function k(e){return"CENTER"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_CENTER:"START"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_LEFT:"END"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_RIGHT:"CENTER"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_CENTER:"START"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_LEFT:"END"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_RIGHT:"CENTER"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_CENTER:"START"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_LEFT:"END"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_RIGHT:l.eVK.TOP_LEFT}function M(e){switch(e){case l.eVK.TOP_LEFT:return{horizontalAlignment:"START",verticalAlignment:"START"};case l.eVK.TOP_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"START"};case l.eVK.TOP_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"START"};case l.eVK.MIDDLE_LEFT:return{horizontalAlignment:"START",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"CENTER"};case l.eVK.BOTTOM_LEFT:return{horizontalAlignment:"START",verticalAlignment:"END"};case l.eVK.BOTTOM_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"END"};case l.eVK.BOTTOM_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"END"}}}let F=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,a,i,o)=>this.initPaintWithDefaultImagePaint(e,r,n,a,I,o??!1,i),this.getPaintStopsAndStopsVar=(e,r,n,a)=>{let i=a?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=i.map(g.Ug);return r&&(o[a?1:0].colorVar=r),{stops:i,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,a,i,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:w(e)?(l.stops=y,l.stopsVar=b,l.transform=v(s)):C(e)&&i&&("VIDEO"===e?this.transferVideoAttributes(i,l):this.transferImageAttributes(i,l)),!n)return l;let c=this.cachePaint(n,a);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(w(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=V(c.color,o),r=(s&&T(s.rightEndCap))??!1,{stops:n,stopsVar:a}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=a}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||u()(e),w(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},x=!1;function U(){x||(x=!0,h.Y5.onReady().then(()=>{let e=l.glU?.requestDefaultImageStyle(),r=e?a.w.decodeMessage(e):null;r&&r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(I=r.nodeChanges[0].fillPaints[0])}))}function B(e,r){let n=L(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=c.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(c.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function G(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=A(e);return(0,i.KF)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function V(e,r=!1){var n={...e,a:0};if(!r){let r=(0,s.qN)(e),a=r.v>=.5?r.v-.4:r.v+.4;n=(0,s.kE)({...r,v:a})}return n}},127867:(e,r,n)=>{n.d(r,{Q:()=>i,r:()=>a});var a,i,o=n(559389),s=n(186606),l=n(19180),c=n(989232),d=n(656329),u=n(140357),p=n(264790);class m{constructor(e){for(let r of(this.reported=!1,this.initializationStart=null,this.events={},["applyNodeChanges","multiplayerMessageSize","initializePrototypeLib","viewerSceneDidCompleteInitialLoad","transferSentToWorker","transferMemory","transferMemorySize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.events={}}start(e){this.logTime(e+"Start"),"initializePrototypeLib"===e&&(this.initializationStart=performance.now())}end(e){this.logTime(e+"End")}logValue(e,r){this.events[e]=r}logTime(e){this.events[e]=Math.round(performance.now())}report(){this.logTime("reportedAt");let e={version:2,firstReport:!this.reported,totalUsedHeapMemory:s.hMR?.getTotalUsedHeapMemory(),maxUsedHeapMemory:s.hMR?.getMaxUsedHeapMemory(),fileKey:u.hk()?.openFileKey(),...this.events};setTimeout(()=>{(0,c.trackEvent)("Prototype Lib Loaded",e),this.reported=!0})}}class _{constructor(e){for(let r of(this.startTimes={},this.meta={},this.track=(0,o.s)(e=>{(0,l.k)().prototype_lib_perf_report&&(0,c.trackEvent)("Prototype Lib Function",e)},200),["applyNodeChanges","getNodeChangesForSwap","multiplayerMessageSize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.startTimes={},this.meta={}}logValue(e,r){this.meta[e]=r}start(e){this.startTimes[e]=performance.now()}end(e){if(void 0!==this.startTimes[e]){let r=s.hMR?.getTotalUsedHeapMemory(),n=s.hMR?.getMaxUsedHeapMemory(),a={name:e,start:this.startTimes[e],end:performance.now(),totalUsedHeapMemory:r,maxUsedHeapMemory:n,...this.meta};this.track(a),this.reset()}}}(e=>{let r={},n=new _(r);e.loadTimer=new m(r);let a=[n,e.loadTimer];e.reset=function(){for(let e of a)e.reset()},e.start=function(e){r[e]?.forEach(r=>r.start(e))},e.end=function(e){r[e]?.forEach(r=>r.end(e))},e.logValue=function(e,n){r[e]?.forEach(r=>r.logValue(e,n))};let i=!0;e.reportOOM=function(r){if(!i)return;i=!1;let n=e.loadTimer.initializationStart?Math.round(performance.now()-e.loadTimer.initializationStart):0,a={totalMemoryInBytes:(0,p.le)(),failedSize:r,currentAllocatedBytes:s.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:s.hMR?.getMaxUsedHeapMemory(),timeSinceInitialization:n,is64BitBrowser:d.Ay.is64BitBrowser};(0,c.trackEvent)("Prototype Lib Out Of Memory",a)}})(a||(a={})),(e=>{let r=null;e.setLoadTimeTracker=function(e){r=e},e.getLoadTimeTracker=function(){return r}})(i||(i={}))},516404:(e,r,n)=>{n.d(r,{Ad:()=>J,B8:()=>$,Cd:()=>eo,Cr:()=>em,Dd:()=>Y,Dg:()=>X,E7:()=>ec,H0:()=>et,HF:()=>ee,JA:()=>ei,LH:()=>ea,P2:()=>es,PY:()=>eh,Ts:()=>eS,Ug:()=>q,V:()=>j,Zp:()=>eu,fl:()=>eT,iW:()=>Z,jp:()=>ef,k6:()=>W,kq:()=>ep,o3:()=>eg,p7:()=>en,se:()=>er,sl:()=>ed,vK:()=>Q,w4:()=>el,wl:()=>e_,ye:()=>P,zw:()=>D});var a=n(871043),i=n(328813),o=n(186606),s=n(19180),l=n(382902),c=n(989232),d=n(315933),u=n(490077),p=n(719161),m=n(615233),_=n(820780),h=n(765618),g=n(709001),f=n(353231),E=n(303397),y=n(92338),b=n(838191),v=n(439952);let T={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},I=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],S=1,A=!1,w=null,C=0,N=null,L=0,O=-1/0,R=0,P=null,D=null,k=null,M=null,F=new p.zF,x=new p.zF,U=new p.zF,B=new p.zF,G=new p.zF,V=new p.xV,H=new p.q5,z={},K=!1;function W(e,r){S=e,A=(0,a.Vq)(r),P&&P.setMultiplayerPerfInfo({multiplayerUserCount:S,ongoingSpotlight:A})}function j(){w=null,N=null,P?.stopRecordingAndLog("closing-file"),P?.setFileInfo(null,"unknown")}function Y(e,r){P&&(P.setFileInfo(e,(0,f.Dc)(r)),P.startRecording(!0),(0,v.Jr)().setPendingImagesCallback(P.pendingImagesChanged)),w=e,N=performance.now(),C++;let n=(0,m.tl)().editing_file;1===C&&n&&(0,c.trackEvent)("Cold Boot Document Load",{fileKey:w,fileVersion:o.i6g&&o.i6g.currentFileVersion()||0,loadedTime:N,fileNodeCount:o.CeL&&o.CeL.getFileNodeCount()||0,fileTeamId:n.team_id,fileParentOrgId:(0,m.tl)().org_id})}function $(e){P?.setFileInfo(w,f.Dc(e))}function q(){P?.stopRecordingAndLog("about-to-rebuild-scene")}function X(){P?.startRecording(!1)}function J(){P?.recordSingleFrameNamedEvent("tileRenderingActive")}function Z(){P?.recordSingleFrameNamedEvent("createTableActive")}function Q(){P?.recordSingleFrameNamedEvent("editTableTextActive")}function ee(){P?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function et(){P?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function er(){P?.onNodeDragStart()}function en(){P?.onNodeDragEnd()}function ea(e){P?.onTileRendererChanged(e)}function ei(){P?.onContextRestored()}function eo(e){P?.updateMaxRenderLayerCount(e)}function es(e){P?.updateMaxRenderedTileBytesUsed(e)}function el(){P?.incrementNumAnimationsFromCpp()}function ec(){P?.incrementNumAnimationsFromTs()}function ed(){F.setIsActive()}function eu(){x.setIsActive()}function ep(){U.setIsActive()}function em(){B.setIsActive()}function e_(){G.setIsActive()}function eh(){P?.recordSingleFrameNamedEvent("createStickyActive")}function eg(){P?.recordSingleFrameNamedEvent("differentSectionClicked")}function ef(e){P?.recordSingleFrameNamedEvent(u.jY(e))}let eE=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function ey(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,recentInteractions:s,secondsSinceLoaded:l,version:c,randomID:d}=e,u={fileKey:r,fileNodeCount:n,multiplayerUserCount:a,ongoingSpotlight:o,secondsSinceLoaded:l,version:c,randomID:d,reportCount:L};for(let e=0;e<s.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(s[e]);return(0,_.q)(e.gpuDeviceInfo,u),(0,i.Dy)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function eb(e){(0,c.trackEvent)("Slow Editor Interaction",e),O=performance.now(),R=e.duration}function ev(...e){}function eT(){if(!E.Y5?.isReady())return;let e={},r=d.rH.report(),n=0;for(let a of r)!function r(n,a=""){let i=a.length>0?`${a}.${n.name}`:n.name,o=z[i]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(K||(console.warn(`Too many elapsed hits of ${i} since last report`),K=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let a of(e[i]=l,z[i]=n.hitCount,n.children))r(a,i)}(a),n+=e[a.name];!function(){if(n/1e3<.2)return;let[r,a]=null===w||null===N?[null,[]]:o.CeL?[{gpuDeviceInfo:(0,_.l)(),fileKey:w,fileNodeCount:o.CeL.getFileNodeCount(),multiplayerUserCount:S,ongoingSpotlight:A,nodeTypeHistogram:o.CeL.getNodeTypeHistogram(),recentInteractions:o.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-N)/1e3,version:1,randomID:(0,y.ds)(),reportCount:L},o.CeL.getSlowInteractions()]:[{gpuDeviceInfo:(0,_.l)(),fileKey:w,fileNodeCount:0,multiplayerUserCount:S,ongoingSpotlight:A,nodeTypeHistogram:{},recentInteractions:[],secondsSinceLoaded:(performance.now()-N)/1e3,version:1,randomID:(0,y.ds)(),reportCount:L},[]];if(null==r)return;let s={};for(let r in e)-1!==I.indexOf(r)&&(s[r]=e[r]/1e3);let l=a.map(e=>{let n=e.interaction,a={kind:"interaction",type:n.type,subtype:n.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...ey(r)};if(eE.forEach(e=>a["modifier."+e]=null),"MOUSE"===n.type)for(let e of(a.collapsed=n.collapsed,eE))a["modifier."+e]=-1!==n.modifiers.indexOf(e);return(0,i.Dy)(s,a,"timer"),a});for(let n in e){let a=e[n]/1e3,o=T[n];if("number"==typeof o&&a>=o){let e={kind:"timer",type:n,subtype:null,frame:null,collapsed:!1,duration:a,...ey(r)};(0,i.Dy)(s,e,"timer"),eE.forEach(r=>e["modifier."+r]=null),l.push(e)}}if(0===l.length)return;let c=[],d=l,u=60-(performance.now()-O)/1e3;if(0===(d=d.filter(e=>u<=0||e.duration>=2*R)).length&&c.push(`we're in the report cooldown period (${u}s to go) and no reports were long enough to override it (the last report duration was ${R}s)`),u>0&&d.length,null===N)return;let p=60-(performance.now()-N)/1e3;p>0&&c.push(`we're in the document loading cooldown period (${p}s to go)`),c.length>0?function(e){if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];let r=e.slice(0,e.length-1).join(", ");return r+=", and ",r+=e[2]}(c):((d=d.sort((e,r)=>e.duration-r.duration)).forEach(eb),L++)}(),o.CeL&&(o.CeL.clearNodeTypeHistogram(),o.CeL.clearSlowInteractions())}function eI(e){let r=0,n=0,a=[];for(let i of e)1===i.path.length&&"frame"===i.path[0]?(n=i.elapsedTime,a.push(i)):i.path.length>1&&"frame"===i.path[0]?(r+=i.elapsedTime,a.push(i)):1===i.path.length&&a.push(i);if(r>0){let e=n-r;a.push({path:["frame","unaccounted-time"],elapsedTime:e})}return a}function eS(){if(!P&&(0,s.k)().frame_distribution_tracker_edit){let e=e=>{let r=o.AiE&&o.AiE.getAndClearHistogramBatchFields();if(!r||0===r.size)return;let n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(P=new u.AH("editor_frame_distributions",eI,2,!0,new g.s,r=>{e(r)},!1,(e,r=!1)=>{if(o.AiE){let r=new Map;o.AiE.getAndClearSlowFrameTrackerFields().forEach((e,n)=>{r.set(n,e>0)}),e[h.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(r))}o.yuz&&(e[h.N.gpuMetricsCurrentFrameKey]=o.yuz.getFullscreenCurrentFrameGpuMetricsJSON().toString()),o.fZb&&(e[h.N.cpuTimerTreeCurrentFrameKey]=o.fZb.getCurrentFrameCpuTimerTreeJSON().toString()),r&&(o.yuz&&(e[h.N.gpuMetricsPreviousFrameKey]=o.yuz.getFullscreenPreviousFrameGpuMetricsJSON().toString()),o.fZb&&(e[h.N.cpuTimerTreePreviousFrameKey]=o.fZb.getPreviousFrameCpuTimerTreeJSON().toString()));let n=o.Ez5&&o.Ez5.activeRunningAnimations()||[];e[h.N.activeAnimationsKey]=n;let a=l.zl.get(b.f);a>0&&(e[h.N.numberOfDevAnnotationsVisibleKey]=a)},e=>{o.AiE&&o.AiE.clearSlowFrameTrackerFields(),o.yuz&&o.yuz.nextFrame(e),o.fZb?.nextFrame(e)})).addEventTracker("selectionChanged",new p.l$),P.addEventTracker("zoomActive",new p.vu),P.addEventTracker("panActive",new p.H0),P.addEventTracker("viewportHasGaps",new p.as(o.pWM.DEFINITELY_COVERED_ONLY)),P.addEventTracker("viewportIncludingOutdatedHasGaps",new p.as(o.pWM.DEFINITELY_COVERED_AND_OUTDATED)),P.addEventTracker("multipleMultiplayerUsersInFile",new p.nc(2,()=>S)),P.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new p.Pn(2,()=>S)),P.addEventTracker("viewportHasBlurryRegions",new p.eO(1)),P.addEventTracker("viewportHasVeryBlurryRegions",new p.eO(.5)),P.addEventTracker("viewportIsBlurry",new p.I7(1)),P.addEventTracker("viewportIsVeryBlurry",new p.I7(.5)),P.addEventTracker("timeSlicedEditRenderingActive",new p.t8),P.addEventTracker("stalenessIsHigh",new p.bF(1e3)),P.addEventTracker("stalenessIsVeryHigh",new p.bF(2e3)),P.addEventTracker("moveCursorActive",new p.vw),D=new p.Ti,P.addEventTracker("cursorChatActive",D),k=new p.W,P.addEventTracker("cursorReactionActive",k),P.trackOtherUserCursorMoved(),M=new p.Fy,P.addEventTracker("devModeAnnotationsVisible",M),P.addEventTracker("independentLayerAnimationActive",F),P.addEventTracker("nonIndependentLayerAnimationActive",x),P.addEventTracker("independentLayerActive",U),P.addEventTracker("independentLayerAdded",B),P.addEventTracker("independentLayerRemoved",G),P.addEventTracker("isTypingTextActive",V),P.addEventTracker("isResizingGrid",H)}}},266144:(e,r,n)=>{n.d(r,{Ts:()=>A,Z_:()=>b,rE:()=>v,yQ:()=>y});var a=n(186606),i=n(19180),o=n(382902),s=n(989232),l=n(29188),c=n(476254),d=n(656329),u=n(540698),p=n(353231),m=n(264790),_=n(461445),h=n(6616),g=n(836666);let f={periodMs:36e5,frequentPeriodMs:6e4},E={periodMs:3e5,frequentPeriodMs:6e4};function y(e,r){return Object.keys(e).reduce((n,a)=>{let i=r[a],o=e[a];return null!=i&&null!=o&&(n[a]=i-o),n},{})}function b(){let e=v();if(!a.P2e)return{...e};let r=a.P2e.getHeapMemoryBreakdown(),n={};for(let e of Object.keys(r))n[`heap_breakdown_${e}`]=r[e];let i=a.P2e.getRendererMemoryBreakdown()||{};function o(e){return"number"==typeof e?e:parseInt(e)}return{...e,renderer_gpu_memory:o(a.P2e.getRendererGpuMemory()),renderer_textures_memory:o(i.textures),renderer_vertex_buffers_memory:o(i.vertexBuffers),renderer_render_buffers_memory:o(i.renderBuffers),renderer_uniform_buffers_memory:o(i.uniformBuffers),image_memory:o(a.P2e.getTotalImageMemory()),...n}}function v(){let e=(0,m.aW)()??0,r=a.hMR;if(!r)return{process_memory:e,emscripten_reserved_memory:(0,m.le)()};let n=r.getTotalUsedHeapMemory();return{process_memory:e,cpp_memory:n,js_memory:e>n?e-n:void 0,cpp_max_memory:r.getMaxUsedHeapMemory(),alloc_total:r.getAllocTotal(),alloc_call_count:r.getAllocCallCount(),emscripten_reserved_memory:(0,m.le)(),indirect_buffer_memory:r.getJsBufferMemory(),texture_image_memory:r.getTextureMemStatsTotal(a.aDE.IMAGE),texture_tile_atlas_memory:r.getTextureMemStatsTotal(a.aDE.TILE_ATLAS),texture_tile_stack_memory:r.getTextureMemStatsTotal(a.aDE.TILE_STACK),texture_glyph_data_memory:r.getTextureMemStatsTotal(a.aDE.GLYPH_DATA),compressed_images:r.getImageMemStatsTotal(a.fLc.BITMAP),uncompressed_images_arraybuffer:r.getImageMemStatsTotal(a.fLc.COMPRESSED),uncompressed_images_imagebitmap:r.getImageMemStatsTotal(a.fLc.BUFFER)}}async function T(){if(l.eD){let e=await l.eD.getCPUUsage();if(e)return e.percent}return null}async function I(e,r,n,i,l){let m="Fullscreen Periodic Metrics"===e;if(!(!a.hMR||"ok"!==o.zl.get(h.h)||(0,u.PN)())){if(m){let o=b();n&&(o.cpu_usage=await T());let s=(0,g.dd)(),u=(0,g.PH)();(0,p.ds)(e,i,c.D.getState(),{reporting_interval:r,file_key:i,is_hidden:document.hidden,product_type:l,is64BitBrowser:d.Ay.is64BitBrowser,multiplayer_state:a.h3O&&(0,_.LD)(a.h3O.getSessionState()),...o,...s,...u},{forwardToDatadog:!0})}else{let a=v();n&&(a.cpu_usage=await T());let o=(0,g.dd)(),l=(0,g.PH)();(0,s.trackEvent)(e,{reporting_interval:r,file_key:i,is_hidden:document.hidden,is64BitBrowser:d.Ay.is64BitBrowser,...a,...o,...l},{forwardToDatadog:!0})}}}let S=!1;function A(e,r,n){if(S)return;S=!0;let a=(0,i.k)().cpu_monitoring_enabled||!1,o="Fullscreen Periodic Metrics"===e?f:E,s=o.periodMs;(0,i.k)().frequent_periodic_metrics&&(s=o.frequentPeriodMs),setTimeout(()=>{I(e,0,a,r(),n())},3e5),setInterval(()=>{I(e,s,a,r(),n())},s)}},760032:(e,r,n)=>{n.d(r,{U:()=>o});var a=n(186606);let i=[];function o(e){for(let r of i)r(e===a.dYj.YES)}},246411:(e,r,n)=>{n.d(r,{av:()=>v});var a=n(848318),i=n(996224),o=n(868326),s=n(107563),l=n(247638),c=n(721494),d=n(914220),u=n(524173),p=n(513637),m=n(869704),_=n(149550),h=n(346197),g=n(790393),f=n(406141),E=n(759122),y=n(888189),b=n(54728);function v(e){switch(e){case"CLOSE_OVERLAY":return a.createElement(i.r,null);case"GO_BACK":return a.createElement(o.E,null);case"NAVIGATE_TO":default:return a.createElement(s.N,null);case"OPEN_OVERLAY":return a.createElement(l.x,null);case"OPEN_URL":return a.createElement(c.r,null);case"SCROLL_TO":return a.createElement(d.M,null);case"SWAP_WITH":return a.createElement(u.M,null);case"SWAP_STATE_TO":return a.createElement(p.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return a.createElement(m.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return a.createElement(_.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return a.createElement(h.s,null);case"UPDATE_MEDIA_SKIP_TO":return a.createElement(g.C,null);case"SET_VARIABLE":return a.createElement(f.u,null);case"SET_VARIABLE_MODE":return a.createElement(E.x,null);case"CONDITIONAL":return a.createElement(y.$,null);case"NONE":return a.createElement(b.i,null)}}},582283:(e,r,n)=>{n.d(r,{h:()=>i});let a=[];function i(e){for(let r of a)r(e)}},597147:(e,r,n)=>{n.d(r,{g:()=>a});function a(e){}},87599:(e,r,n)=>{n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var a=n(481009),i=n(989232),o=n(29188),s=n(476254),l=n(353231),c=n(303397),d=n(449063),u=n(568014),p=n(610279),m=n(669313),_=n(331292),h=n(249562),g=n(730283);let f=new class{constructor(){this._suggestionsCache=new a.q(100),this._textReviewPluginRunner=new h.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,p.LJ)(),a=await (0,p.N_)(),o=(0,p.oz)();await e.initialize(r,[...n,...a,...o]),this._current=e;let c=await (0,p.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=s.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,i.trackEvent)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,p.x5)(),r=(0,_.up)(e),n=(0,p.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new m.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return h.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!o.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,p.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},587206:(e,r,n)=>{n.d(r,{no:()=>c});var a=n(938982),i=n(768618),o=n(998568),s=n(375850);class l{getSummaryAsClipboardText(e){let r;let n=(0,i.UN)().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(a.e.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},613998:(e,r,n)=>{n.d(r,{hR:()=>o});var a=n(344390);class i{rgbaToThumbhash(e,r,n){if(e>100||r>100){let a=e,i=r,o=e/r;e<r?e=Math.round((r=100)*o):r=Math.round((e=100)/o);let s=new OffscreenCanvas(a,i),l=s.getContext("2d"),c=new ImageData(new Uint8ClampedArray(n),a,i);l.putImageData(c,0,0);let d=new OffscreenCanvas(e,r).getContext("2d");d.drawImage(s,0,0,a,i,0,0,e,r),n=new Uint8Array(d.getImageData(0,0,e,r).data)}return(0,a.WB)(e,r,n)}thumbhashToRgba(e){let{w:r,h:n,rgba:i}=(0,a.Oe)(e);return{width:r,height:n,rgba:i}}}function o(){new i}},46775:(e,r,n)=>{n.d(r,{ic:()=>s}),n(186606);var a=n(382902);n(989232),n(461979),n(303397),n(439952),n(7148);let i=(0,n(4881).Wh)(()=>(0,a.eU)({})),o=(0,a.Iz)(e=>(0,a.eU)(r=>r(i)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,a)=>{let o=r(i);n(i,{...o,[e]:a})}));function s(e){let r=o(e);return(0,a.md)(r)}},659502:(e,r,n)=>{n.d(r,{DH:()=>l,RF:()=>u,TY:()=>c,_o:()=>d,no:()=>o,oQ:()=>s});var a=n(186606),i=n(554326);function o(){return(0,i.ut)(a.Ez5?.uiState().showInFileMemoryPercentage,!1)}function s(){return(0,i.ut)(a.Ez5?.uiState().showAnnotationsInDevMode,!0)}function l(){return(0,i.ut)(a.Ez5?.uiState().alwaysExpandAnnotations,!1)}function c(){return(0,i.ut)(a.Ez5?.uiState().isRecovery,!1)}function d(){return(0,i.ut)(a.Ez5?.uiState().editorBannerHeight,0)}function u(){return(0,i.ut)(a.Ez5?.uiState().hideMultiplayerCursors,!1)}},778438:(e,r,n)=>{n.d(r,{fT:()=>l});var a=n(186606),i=n(19180),o=n(513806);class s{isUI3(){return a.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return a.Ez5?.uiState().showUI3Colors.getCopy()??!1}showUI3ColorsInitialValue(){return o.y.isIpad(),!!(0,i.k)().figjam_ui3_color_palette}}function l(){new s}},483057:(e,r,n)=>{n.d(r,{EA:()=>c,Zr:()=>d});var a=n(858321),i=n(476254),o=n(967572);class s{onUndo(e){l&&l.trigger("undo",{undoneCommitId:e})}onRedo(e){l&&l.trigger("redo",{redoneCommitId:e})}}let l=null;function c(){new s;let e=!1;i.D.subscribe(()=>{let r=(0,o.o)(i.D.getState());r!==e&&(r?(l&&l.removeAllListeners(),l=new a.b("fullscreen-undo-redo-events")):l&&(l.removeAllListeners(),l=null),e=r)})}function d(e,r){if(!l)return()=>{};let n=n=>{n.undoneCommitId===e&&r()};return l.on("undo",n),()=>{l?.removeListener("undo",n)}}},53222:(e,r,n)=>{n.d(r,{nd:()=>s});var a=n(186606),i=n(66699);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&a.glU.shouldNudgeComponentCreationForSelection()&&(0,i.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},590781:(e,r,n)=>{n.d(r,{Zr:()=>o});var a=n(301168);n(813009);var i=n(197696);function o(e){return(0,a.d4)(r=>(0,i.Yh)(r.mirror.appModel,e))}},395633:(e,r,n)=>{n.d(r,{_:()=>h});var a=n(186606),i=n(19180),o=n(989232),s=n(476254),l=n(637640),c=n(304756),d=n(967688),u=n(952039),p=n(303397),m=n(254028);class _{async pasteVariablesWithLocalizationPopup(e,r,n){let _=[];for(let r=0;r<e.size;r+=25){let n=Array.from(e.entries()).slice(r,r+25).map(([e,r])=>`${e}|${r}`).join(","),a=`/api/variables/publish_state?keysAndLibrary=${n}`;_.push(c.Ay.post(a))}let h={};(await Promise.all(_)).forEach(e=>{Object.assign(h,e.data.meta)});let g=new Set;if(Object.keys(h).forEach(e=>!1===h[e]?g.add(e):null),g.size>0){if((0,o.trackEvent)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,i.k)().variables_paste_remap_popup){if((0,m.YE)())return;s.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),s.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU.performVariableLocalizationFromPopup(g,r,n);if(p.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))}else s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{l.Ay.unsafeRedirect("https://help.figma.com/hc/articles/14506821864087#copy_paste","_blank")}}}))}return{}}}function h(){new _}},788903:(e,r,n)=>{n.d(r,{AZ:()=>k,BQ:()=>X,EP:()=>eh,G6:()=>z,JG:()=>es,Kd:()=>Q,L5:()=>eg,M6:()=>ef,Pt:()=>G,Rb:()=>B,SG:()=>e_,SR:()=>x,U6:()=>D,Xv:()=>Z,bL:()=>K,e3:()=>eo,hg:()=>$,iC:()=>eu,jI:()=>en,kf:()=>et,lC:()=>H,mm:()=>eE,nN:()=>F,nR:()=>V,pN:()=>el,qd:()=>q,rN:()=>M,rW:()=>P,t8:()=>J,tZ:()=>j,u:()=>Y,u5:()=>er,wM:()=>ee,wX:()=>W,yp:()=>U});var a=n(848318),i=n(871043),o=n(672154),s=n(673786),l=n(186606),c=n(320953),d=n(768618),u=n(19180),p=n(382902),m=n(349048),_=n(317720),h=n(656470),g=n.n(h),f=n(990460),E=n.n(f),y=n(810503),b=n(292024),v=n(116623);n(730143);var T=n(822879),I=n(436999),S=n(720722),A=n(273555),w=n(346288),C=n(50652),N=n(439796),L=n(64525),O=n(944239),R=n(303397);function P(e){let r=(0,p.md)(N.Gc);return ep(e?r[e]??[]:[])}function D(e){let r=P(e),n=function(e){let r=(0,p.md)(N.L9);return ep(e?r[e]??[]:[])}(e);return r.length>0?r:n}function k(e){return(0,p.md)((0,N.A6)(e))}function M(e){return(0,p.md)((0,N.XC)(e))}function F(){return(0,p.md)(N.qy)}function x(){B(),U(),(0,p.md)(N.xA),G(),V(),(0,p.md)(N.jt)}function U(){let e=ep((0,p.md)(N.TD));return(0,v.iw)(e)}function B(){return ep((0,p.md)(N.uk))}function G(){return(0,p.md)(N.bO)}function V(){return(0,p.md)(N.LC)}function H(e){return(0,p.md)((0,N.ZG)(e))}function z(e){let r=(0,a.useMemo)(()=>e?(0,N.Eo)(e):(0,p.eU)(null),[e]),n=(0,p.md)(r);if(n)return n;if(!e)return;let i=l.CWU.getSubscribedVariableSetInfo(e);if(i)return(0,S.Rn)(i)}function K(e,r){return Y(e)?.modeValues?.[r]??void 0}function W(e){let r=(0,m.wm)(()=>e,[e]),n=(0,a.useMemo)(()=>(0,p.eU)(e=>r.map(r=>(0,i.Vq)(r)?e(N.Cg)[r]??null:null)),[r]);return(0,p.md)(n)}function j(e){return Y(e)?.name||(e?l.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function Y(e){let r=(0,a.useMemo)(()=>e?(0,N.Ev)(e):(0,p.eU)(null),[e]),n=(0,p.md)(r);if(n)return n;if(!e)return null;let i=l.CWU.getSubscribedVariableInfo(e);return i?(0,S.ZI)(i):null}function $(e,r){let n=(0,m.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,p.eU)(e=>n.map(n=>{if(!n)return null;let a=e((0,N.Ev)(n));if(a)return a;if(r){let e=l.CWU.getSubscribedVariableInfo(n);if(e)return(0,S.ZI)(e)}return null})),[r,n]);return(0,p.md)(i)}function q(e,r){let n=(0,m.wm)(()=>e,[e]),i=(0,a.useMemo)(()=>(0,p.eU)(e=>{let a={};return n.forEach(n=>{if(!n)return;let i=(0,N.BJ)(n,r??{});if(i){a[n]=e(i);return}a[n]=null}),a}),[n,r]);return(0,p.md)(i)}function X(e,r){let n=(0,a.useMemo)(()=>e?(0,N.BJ)(e,r??{}):(0,p.eU)(null),[e,r]);return(0,p.md)(n)}function J(e,r){let n=X(e,r);return(0,i.Vq)(n)&&"MIXED"!==n?n:void 0}function Z(e,r){return(0,a.useMemo)(()=>{if(!e||!r)return null;let n=new Map(Object.entries(r));return l.CWU.getVariableChainForModes(e,n)},[e,r])}function Q(e){let r=Y(e),n=z(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function ee(e){let r=(0,a.useMemo)(()=>(0,N.Oj)(e),[e]),n=(0,p.md)(r);return(0,m.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,s.ey)(n.key)]=n;return e},[n])}function et(e){let r=(0,a.useMemo)(()=>!e||(0,b.wJ)(e)?(0,p.eU)(null):(0,N.cp)(e),[e]),n=(0,b.$Q)(e),i=(0,N.Ri)(n),o=(0,p.md)(r),s=(0,p.md)(i),l=(0,I.je)(),c=!!l.data?.find(r=>r.fileKey===e);return(0,m.wm)(()=>{if(!c||!o&&!s)return _.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return _.Qw.loading();let e=o&&_.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return _.Qw.loaded((0,v.cM)(r,!1))},[c,o,s])}function er(e){let r=(0,a.useMemo)(()=>!e||(0,b.wJ)(e)?(0,p.eU)(null):(0,N.cp)(e),[e]),n=(0,b.$Q)(e),i=(0,N.Ri)(n),o=(0,p.md)(r),s=(0,p.md)(i),l=(0,I.je)(),c=l.data?.find(r=>r.fileKey===e);return(0,m.wm)(()=>{if(!c||!o&&!s)return _.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return _.Qw.loading();let e=o&&_.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return _.Qw.loaded((0,v.kX)(r,!1))},[c,o,s])}function en(e={}){let r=e?.enabled??!0,n=!!(0,u.k)().dse_lk_asset_updates_vars,a=ea({enabled:r&&!n}),i=ei({enabled:r&&n});return n?i:a}let ea=(0,O.n)((e={})=>{let r=!1===e.enabled,n=(0,I.je)(),i=(0,m.wm)(()=>n.data?.map(e=>e.fileKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,N.Jo)(i):(0,N.H2)(i),[r,i]),s=(0,p.md)(o);return(0,m.wm)(()=>{let e=_.Qw.all(Object.values(s));return"loaded"!==e.status?e:_.Qw.loaded({items:g()(Object.values(s).map(e=>(0,v.kX)({type:"team",value:e},!1)))})},[s])}),ei=(0,O.n)((e={})=>{let r=!1===e.enabled,n=(0,I.je)(),i=(0,m.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,N.Jo)(i):(0,N.wh)(i),[r,i]),s=(0,p.md)(o);return(0,m.wm)(()=>{let e=_.Qw.all(Object.values(s));return"loaded"!==e.status?e:_.Qw.loaded({items:Object.values(s).flatMap(e=>(0,v.C$)(e,!1))})},[s])}),eo=(0,p.eU)(null);function es({enabled:e=!0}){let r=em({enabled:e}),[n,i]=(0,p.fp)(eo);return(0,a.useEffect)(()=>{(null===n||n.status!==r.status)&&i(r)},[r,i,n]),"loaded"===r.status}function el(e){let r=e?.enabled??!0,n=!!(0,u.k)().dse_lk_asset_updates_vars,a=ec({enabled:r&&!n}),i=ed({enabled:r&&n});return n?i:a}let ec=(0,O.n)(e=>{let r=(0,I.je)(),n=(0,m.wm)(()=>r.data?.filter(e=>!b.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),i=(0,m.wm)(()=>r.data?.filter(e=>b.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,a.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=_.Qw.disabled()}),(0,p.eU)(e)}return(0,N.Yt)(n)},[o,n]),l=(0,p.md)(s),c=(0,a.useMemo)(()=>{if(o){let e={};return i.forEach(r=>{e[r]=_.Qw.disabled()}),(0,p.eU)(e)}return(0,N.hz)(i)},[o,i]),d=(0,p.md)(c);return(0,m.wm)(()=>{let e=_.Qw.all(Object.values({...l,...d}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):_.Qw.loaded({libraryVariableSets:[...g()(Object.values(l).map(e=>(0,v.kX)({type:"team",value:e},!1))),...g()(Object.values(d).map(e=>(0,v.kX)({type:"community",value:e},!1)))],libraryVariables:[...g()(Object.values(l).map(e=>(0,v.cM)({type:"team",value:e},!1))),...g()(Object.values(d).map(e=>(0,v.cM)({type:"community",value:e},!1)))]})},[l,d])}),ed=(0,O.n)(e=>{let r=e?.enabled===!1,n=(0,I.je)(),i=(0,m.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,a.useMemo)(()=>r?(0,N.Jo)(i):(0,N.Ho)(i),[r,i]),s=(0,p.md)(o);return(0,m.wm)(()=>{let e=_.Qw.all(Object.values(s));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):_.Qw.loaded({libraryVariableSets:Object.values(s).flatMap(e=>(0,v.C$)(e,!1)),libraryVariables:Object.values(s).flatMap(e=>(0,v.q0)(e,!1))})},[s])});function eu(e,r,n){if(e)return l.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value})}function ep(e){return a.useMemo(()=>e.filter(e=>!(0,w.eF)(e)),[e])}function em(e){let r=B(),n=el(e);return(0,a.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):_.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}function e_(e,r){let n=(0,C.iG)(e),i=em(r);return(0,a.useMemo)(()=>{if("loaded"!==i.status)return i.transform(()=>[]);let r=i.data?.filter(e=>C.AQ(e,n))??[],a=[];for(let n of e){let e=w.Io[n];e&&i&&(a=a.concat(r.filter(r=>e.includes(r.resolvedType))))}return _.Qw.loaded([...a])},[e,i,n])}function eh(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,n=(0,T.U)(r?[r]:[],{enabled:!0}).data;return r?n?.[r]:void 0}function eg(e){let r=e&&(0,S.GI)(e),n=z(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function ef(){return(e_(["FONT_STYLE"]).data??[]).length>0}function eE(){let e=(0,p.Pj)();function r(e,n,a,i=A.zk.YES,o="set-variable-value-for-mode"){let s=c.l7.user(o,()=>l.CWU?.setVariableValueForMode(e,n,a)??!1);return s&&i===A.zk.YES&&R.Y5.triggerAction("commit"),s}function n(e,r,a,i,s=A.zk.YES,l="set-variable-override-for-mode"){let u=o.gr.fromString(e);if(!u){(0,y.x1)("variables","Failed to set variable override. Invalid variable set id.",{variableSetId:e});return}let p=(0,d.UN)().getVariableCollectionNode(u);if(!p){(0,y.x1)("variables","Failed to set variable override. Variable collection node not found.",{variableCollectionId:u});return}let m=i?(0,L.pr)(i):null;if(E()(m)){(0,y.x1)("variables","Failed to set variable override. Invalid variable value.",{newValue:i});return}c.l7.user(l,()=>p.setVariableOverrideForMode(r,a,m)),s===A.zk.YES&&R.Y5.triggerAction("commit")}return{setVariableValueForMode:r,setVariableOverrideForMode:n,setVariableValueOrOverrideForMode:function(a,i,o,s,l=A.zk.YES,c){let d=e.get((0,N.ZG)(a)),u=e.get((0,N.hy)(i));if(!d){(0,y.x1)("variables","Failed to set variable value or override for mode. Variable set not found.",{variableSetId:a});return}if(!u){(0,y.x1)("variables","Failed to set variable value or override for mode. Variable not found.",{variableId:i});return}let p=(0,S.GI)(d),m=u.variableSetId===a;if(p&&!m)n(a,i,o,s,l,c);else{if(null===s){(0,y.x1)("variables","Failed to set variable value for mode. Variable value is null.",{variableId:i,modeId:o});return}r(i,o,s,l,c)}}}}},173592:(e,r,n)=>{n.d(r,{RW:()=>y,Vr:()=>c,_n:()=>u,j2:()=>m,uE:()=>f,xQ:()=>T,xb:()=>h});var a=n(891627),i=n(858321),o=n(186606),s=n(553547);let l=null;function c(e){return l=e,()=>{l=null}}let d=null;function u(e){return d=e,()=>{d=null}}let p=null;function m(e){return p=e,()=>{p=null}}let _=null;function h(e){return _=e,()=>{_=null}}let g=null;function f(e){return g=e,()=>{g=null}}let E=new i.b("VariableMirrorVariableResolvedValueEmitter");function y(e,r){return o.u4j.subscribeToLocalVariableResolvedValue(e,s.AD),E.on(e,r),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,s.AD),E.removeListener(e,r)}}let b=new i.b("VariableMirrorExplicitModeEmitter");class v{localVariableSetUpdated(e){(0,a.unstable_batchedUpdates)(()=>{l?.({added:[e]})})}localVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{l?.({deleted:e}),p?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,a.unstable_batchedUpdates)(()=>{d?.({added:[e]}),g?.({setDeleted:e.id}),g?.({added:r})})}subscribedVariableSetDeleted(e){(0,a.unstable_batchedUpdates)(()=>{d?.({deleted:e}),g?.({setDeleted:e})})}localVariablesUpdated(e){p?.({added:e})}localVariableOverridesUpdated(e){_?.({added:e})}localVariableOverridesDeleted(e){_?.({deleted:e})}localVariablesDeleted(e){p?.({deleted:e}),e.forEach(e=>{E.trigger(e,{})})}variableResolvedValueUpdated(e,r){E.trigger(e,r)}explicitModeUpdated(e,r){b.trigger(e,r)}resetMirrorCache(){(0,a.unstable_batchedUpdates)(()=>{l?.(null),p?.(null),_?.(null),d?.(null),g?.(null)}),E.removeAllListeners()}}function T(){new v}},832638:(e,r,n)=>{n.d(r,{tG:()=>g});var a=n(559389),i=n(186606),o=n(19180),s=n(304756),l=n(578002),c=n(7905),d=n(303397),u=n(439952),p=n(8127),m=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(m||{});class _{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecordByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingRecordVideosTasksByLibraryKey={},this.allVideos={},this.flushPendingRecordVideos=(0,a.s)(async()=>{let e=this.pendingVideosToRecordByFileKey,r=this.pendingVideosToRecordByLibraryKey,n=this.pendingRecordVideosTasksByFileKey,a=this.pendingRecordVideosTasksByLibraryKey,o=Object.keys(e).map(e=>({fileKey:e,type:"fileKey"})).concat(Object.keys(r).map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingVideosToRecordByFileKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByLibraryKey={};let l=await this.getEditingFileKey();o.forEach(async o=>{if("fileKey"===o.type&&o.fileKey===l){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===o.type?e[o.fileKey]:r[o.libraryKey];for(;;){try{let e=await s.Ay.put(`/api/files/${l}`,{video_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:r,failed:c}=u.xY.parseFileUpdateResponseForImages(d,e);for(let e of(i.tHB.markVideoPermissionsCopied(r),c))i.tHB.videoIsMissing(e);for(let e of d)delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():a[o.libraryKey].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of d)i.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():a[o.libraryKey].resolve();return}}let e=1e3*c*Math.random();await new Promise(r=>setTimeout(r,e)),c=Math.min(2*c,64)}})},100),this.contextLostCallbacks=new Map,this.nextContextLostCallbackId=0}async getAllVideoUrls(){if(!(0,o.k)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecordByFileKey[e]=this.pendingVideosToRecordByFileKey[e]||[],this.pendingVideosToRecordByFileKey[e].push(...r),!this.pendingRecordVideosTasksByFileKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordVideosTasksByFileKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByFileKey[e].promise;let n=this.pendingRecordVideosTasksByFileKey[e].promise;return this.flushPendingRecordVideos(),n}recordVideosFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No sourceLibraryKey specified");if(this.pendingVideosToRecordByLibraryKey[e]??=[],this.pendingVideosToRecordByLibraryKey[e].push(...r),!this.pendingRecordVideosTasksByLibraryKey[e]){let r,n;let a=new Promise((e,a)=>{r=e,n=a});this.pendingRecordVideosTasksByLibraryKey[e]={promise:a,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByLibraryKey[e].promise;let n=this.pendingRecordVideosTasksByLibraryKey[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}contextLost(){for(let e of this.contextLostCallbacks.values())e()}subscribeToContextLost(e){let r=this.nextContextLostCallbackId++;return this.contextLostCallbacks.set(r,e),()=>{this.contextLostCallbacks.delete(r)}}}let h=new class{constructor(){this.videoManager=new _,this.thumbnailGenerator=p.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}copyVideoPermissionsFromLibraryKey(e,r){return this.videoManager.recordVideosFromLibraryKey(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),a=new Uint8Array(await n.arrayBuffer()),i=await d.Y5.openFileKeyPromise();(0,l.C)([{sha1:e,bytes:a}],i)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}contextLost(){this.videoManager.contextLost()}};function g(){return h.videoManager}},622788:(e,r,n)=>{n.d(r,{i:()=>i});let a=[];function i(e,r){for(let n of a)n(e,r)}},601167:(e,r,n)=>{let a;n.d(r,{$$:()=>T,$g:()=>y,Cj:()=>G,D6:()=>N,HD:()=>A,Nd:()=>E,PD:()=>C,Pl:()=>k,QZ:()=>U,Qt:()=>v,Yb:()=>I,Z0:()=>f,_X:()=>M,gc:()=>a,kE:()=>b,lc:()=>x,ni:()=>F,qc:()=>S,th:()=>w});var i=n(848318),o=n(891627),s=n(186606),l=n(418193),c=n(410441),d=n(810503),u=n(454805),p=n(134684),m=n(314774),_=n(303397),h=n(959750),g=n(786175);function f(e,r,n=!0){let a={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(a):a}function E(e,r){let n=new u.Mi(e.x,e.y);return T(e,u.Mi.subtract(r,n))}function y(e,r){let n=new u.Mi(e.x,e.y),a=f(e,r);return u.Mi.add(a,n)}function b(e,r){return Math.round(e/r-.5)}function v(e,r,n,a){return Math.round(a/2+(e-r)*n)}function T(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function I(e,r,n){let a=f(e,{x:r.x,y:r.y},n);return{x:a.x,y:a.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function S(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function A(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function w(e){return(0,l.xx)((e,r,n,a)=>({x:e,y:r,height:n,width:a}))(e.x,e.y,e.height,e.width)}function C({subscribeToUpdates_expensive:e}){let r=M({subscribeToUpdates_expensive:e}),n=i.useContext(m.QZ).current||r,a=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:a,deltaOffsetY:o,deltaZoomScale:s}}function N(e,r){i.useEffect(()=>{_.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(_.Y5.getViewportInfo()),(0,p.H)())},[r,e.subscribeToUpdates_expensive]),i.useEffect(()=>{if(_.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return _.Y5.viewport.on("onSetViewport",e),()=>{_.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function L(e){return i.useContext(e),i.useContext(m.HA).current||m.t4}function O(e){return L(e.subscribeToUpdates_expensive?m.k9:m.cY).x}function R(e){return L(e.subscribeToUpdates_expensive?m.lG:m.cY).y}function P(e){return L(e.subscribeToUpdates_expensive?m.Os:m.cY).width}function D(e){return L(e.subscribeToUpdates_expensive?m.zE:m.cY).height}function k(e){return L(e.subscribeToUpdates_expensive?m.zx:m.cY).zoomScale}function M(e){let r=O(e),n=R(e),a=P(e),o=D(e),s=L(e.subscribeToUpdates_expensive?m.j0:m.cY).offsetX,l=L(e.subscribeToUpdates_expensive?m.u7:m.cY).offsetY,c=k(e),d=L(e.subscribeToUpdates_expensive?m.l9:m.Vl).isPanning,u=L(e.subscribeToUpdates_expensive?m.b8:m.Vl).isZooming;return i.useMemo(()=>({x:r,y:n,width:a,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,a,o,s,l,c,d,u])}function F(){let e={subscribeToUpdates_expensive:!0},r=O(e),n=R(e),a=P(e),o=D(e);return i.useMemo(()=>({x:r,y:n,width:a,height:o}),[r,n,a,o])}function x(){a=void 0}function U(e){return _.Y5.onReady().then(()=>{if(!s.glU)return Promise.reject(Error("Fullscreen bindings are not initialized"));let r=new Promise(e=>{a=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r})}let B=(0,c.jz)(g.rulerThickness);function G(){let e={subscribeToUpdates_expensive:!0},r=(0,h.lK)()?B:0,n=O(e)+r,a=R(e)+r,o=P(e)-r,s=D(e)-r;return i.useMemo(()=>({x:n,y:a,width:o,height:s}),[n,a,o,s])}},478054:(e,r,n)=>{n.d(r,{Ed:()=>u,Js:()=>d,QY:()=>l,Yu:()=>m,pi:()=>p});var a=n(938982),i=n(186606),o=n(382902),s=n(998568),l=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(l||{});let c=(0,o.eU)({status:1,timeoutHandle:null});function d(){return o.zl.get(c)}function u(e){return!!(0===d().status&&i.i6g&&i.i6g.hasOnlyNewFileSystemChanges())&&!!navigator.onLine&&(function(e){let r=o.zl.get(c);r.status=2,r.timeoutHandle=e,o.zl.set(c,r)}(setTimeout(()=>{p(!0),e()},1e4)),!0)}function p(e){let r=o.zl.get(c);r.status=3,e||(r.timeoutHandle?clearTimeout(r.timeoutHandle):(0,s.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Finished waiting but no timeout handle"))),r.timeoutHandle=null,o.zl.set(c,r)}function m(e){let r=o.zl.get(c);r.status=e?0:1,r.timeoutHandle&&clearTimeout(r.timeoutHandle),r.timeoutHandle=null,o.zl.set(c,r)}},933154:(e,r,n)=>{n.d(r,{bJ:()=>c});var a=n(803565),i=n(382902),o=n(206639),s=n(418866);class l{isCustomPaletteColor(e,r){let n=i.zl.get(s.$R);if(n){let i=(0,a.aH)(e);for(let e of(0,s.Uh)(r))if(n[e].some(e=>(0,o.DA)(i,e)))return!0}return!1}}function c(){new l}},797271:(e,r,n)=>{n.d(r,{pP:()=>d});var a=n(803565),i=n(382902),o=n(418866),s=n(597933),l=n(695596);class c{getEyedropperContext(){return i.zl.get(s.B)}updateEditPaletteModalColor(e){let r=i.zl.get(o.Jq),n=i.zl.get(o.rN),s=[...n.slice(0,r),(0,a.aH)(e),...n.slice(r+1)];i.zl.set(o.rN,s)}isCustomPaletteApplied(){return!!i.zl.get(o.$R)}showSectionPresets(){return i.zl.get(l.w)}}function d(){new c}},167173:(e,r,n)=>{n.d(r,{A9:()=>o});var a=n(59296);class i{constructor(){this.getDefaultPencilStrokeWeight=()=>a.wv,this.getDefaultHighlighterStrokeWeight=()=>a.g5}}function o(){new i}},244813:(e,r,n)=>{n.d(r,{Vi:()=>u,uE:()=>d});var a=n(967688),i=n(592685),o=n(628452),s=n(836726),l=n(727310),c=n(812320);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:i.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},353806:(e,r,n)=>{n.d(r,{Bz:()=>F,F$:()=>x,bY:()=>k,e3:()=>z,g4:()=>G,wl:()=>M,y4:()=>K});var a=n(431160),i=n(938982),o=n(186606),s=n(778122),l=n(19180),c=n(989232),d=n(29188),u=n(446470),p=n(637640),m=n(656329),_=n(998568),h=n(810503),g=n(540698),f=n(123629),E=n(961675),y=n(911947),b=n(264790),v=n(280142);function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function S(e,r){await (0,u.k0)(I(r));let n={wasmBinaryFile:T(r),preRun(){(n.emscripten_realloc_buffer??n.growMemory)(0x60000000)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,v.vw)(r,e)},leakBindings:!0})}async function A(e){try{await y.xK.timeAsync("loadingCode",()=>((0,u.RM)(),window.FULLSCREEN_PRELOADS?.js||(0,u.k0)(I(e))))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function w(e,r){let n=y.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function C(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),a=y.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiate",()=>a)}let N=!1,L=null;async function O(e){(0,g.nl)()&&console.log("loadWasmBinary called for",e),!L||L===e||(0,g.nl)()||M()||("fullscreen-app"===L?(0,_.$D)(i.e.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===L&&(0,_.$D)(i.e.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen"))),(0,g.nl)()&&console.log("About to get binaryURL for",e);let r=T(e);y.xK.start("loadingBinaryStart"),(0,g.nl)()&&console.log("About to call loadJS and fetch wasm for url",r,I(e));let[n,a]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),A(e)]);(0,g.nl)()&&console.log("Finished calling loadJS and fetch wasm"),delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s,getReservedHeapSize:l}=a;if((0,b.bM)(e,l),"true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{(0,g.nl)()&&console.log("About to call instantiateWasmStreaming");let r=await w(n,o);return(0,g.nl)()&&console.log("Finished calling instantiateWasmStreaming"),L=e,{receiveInstance:s,wasmResult:r}}catch(e){if((0,g.nl)()&&console.log("Error calling instantiateWasmStreaming",e),e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,_.$D)(i.e.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,h.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let c=await C(n,o);return L=e,{receiveInstance:s,wasmResult:c}}let R=(0,a.Kt)(async()=>await O("fullscreen-app")),P=(0,a.Kt)(async()=>await O("prototype-lib")),D=async e=>{switch((0,g.nl)()&&console.log("Called loadAllForWasmBinaryType for",e),e){case"fullscreen-app":return await R();case"prototype-lib":return await P()}};function k(e){let r=e||H||L;if(r){let e=T(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function M(){let e=p.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let F=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function x(e="fullscreen-app"){return D(e).then(()=>{})}let U=document.location.pathname;function B(e){return"/preload-editor"===e||"/preload-android-proto"===e||e.startsWith("/mobile-preload")}function G(){return B(U)&&(0,m.KR)()&&m.m0||(0,f.Sh)(U)||d.eD&&d.eD.isFileBrowserTab()||d.S8||M()||B(p.Ay.location.pathname)&&!d.eD?"never":!(0,l.k)().preload_fullscreen_on_load||"complete"===document.readyState||(0,p.Cs)()?"immediately":"eventually"}let V=null,H=null;async function z(e,r="fullscreen-app"){if(H&&H!==r&&!(0,g.nl)()&&("fullscreen-app"===H?(0,_.$D)(i.e.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===H&&(0,_.$D)(i.e.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!T(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,E.QL)("asan"))return H=r,S(e,r);try{V&&V!==e&&await p.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[V.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),V=e,(0,g.nl)()&&console.log("About to call loadAllForWasmBinaryType");let{receiveInstance:n,wasmResult:a}=await D(r);(0,g.nl)()&&console.log("Finished calling loadAllForWasmBinaryType"),(0,g.nl)()&&console.log("About to call initializeWasm"),(0,s.jS)({callMain:()=>{y.xK.time("callMain",()=>n(a.instance,a.module))},tsApisForCpp:V,registerRefreshCallback:e=>{(0,v.vw)(r,e)}}),(0,g.nl)()&&console.log("Finished calling initializeWasm"),H=r,(0,g.nl)()&&o.msz.setIsRunningInteractionTests();let i=k(r);(0,c.trackEvent)("Fullscreen Loaded",{...i})}catch(e){throw(0,c.trackEvent)("Fullscreen Load Failure",{error:e+""}),(0,g.nl)()&&console.log("Failed to initialize fullscreen",e),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,_.$D)(i.e.UNOWNED,e)),e.reportedToSentry=!0,e}}function K(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},103873:(e,r,n)=>{n.d(r,{Ni:()=>i});var a=(e=>(e.COMMUNITY="community",e))(a||{}),i=(e=>(e.ALL_DISABLED="all_disabled",e.PINNED_DISABLED="pinned_disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},403253:(e,r,n)=>{n.d(r,{Tf:()=>v,Y6:()=>b,YC:()=>S,c_:()=>T,fA:()=>E,hi:()=>I,nb:()=>f}),n(848318),n(301168);var a=n(660376),i=n(382902),o=n(317720),s=n(748008),l=n(587745),c=n(106340),d=n(842579),u=n(318147),p=n(55116),m=n(938907),_=n(281294),h=n(240176),g=n(633468),f=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(f||{});function E(e,r){return{type:"FILE",file:{...c.F.toLiveGraph(e),owner:e.owner,trackTags:e.track_tags?d.Z.toLiveGraph(e.track_tags):null,UserFileRecentAny:e.accessed_at?{actionAt:new Date(e.accessed_at)}:void 0},sharedWithYouFields:r??null}}function y(e){let r=(0,l.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,l.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let b=(0,i.eU)(null);class v{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,a.xb)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,l.oj)(e.repo);default:(0,a.xb)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.UserFileRecentAny?.actionAt.toISOString();case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedAt?.toISOString()??null;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,a.xb)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":return e.file.touchedAt??e.file.updatedAt;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,a.xb)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashedAt?e.file.trashedAt.toISOString():null;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTrashedUserId(e){switch(e.type){case"FILE":return e.file.trashedUserId;case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.isFavorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return u.bk.FILE;case"PROTOTYPE":return u.bk.PROTOTYPE;default:(0,a.xb)(e)}}static getFileOrMainBranchKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,a.xb)(e)}}static getFileOrSelectedBranchKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return y(e).key;case"OFFLINE_FILE":return;default:(0,a.xb)(e)}}static getUrl(e,r){switch(e.type){case"FILE":return(0,g.to)(e.file);case"PINNED_FILE":return(0,g.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,l.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":return(0,g.rl)(e.file);case"PINNED_FILE":return(0,g.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,g.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,a.xb)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,a.xb)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getOrgId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,a.xb)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.teamId;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.id;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,a.KF)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,a.KF)(!0,"Cannot get shared by name from an offline file"),null;default:(0,a.xb)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,a.KF)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,a.xb)(e)}}static useIsRenaming(e){let r=(0,i.md)(b);return v.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,a.xb)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":return(0,h.Ph)(e.file);case"REPO":return(0,l.yR)(e.repo);case"PROTOTYPE":return(0,h.Uj)(e.prototype.fig_file)||(0,h.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,h.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,a.xb)(e)}}static getFolderId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.folderId;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getTeamId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"REPO":let r=y(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":case"PINNED_FILE":return!!e.file.thumbnailGuid;case"REPO":let r=y(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getEditorType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;case"REPO":return u._Y.DESIGN;case"PROTOTYPE":return null;default:(0,a.xb)(e)}}static getClientMeta(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.clientMeta;case"REPO":let r=y(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.file.signedPreviewThumbnailUrls:"REPO"===e.type?y(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return y(e)?.key;case"OFFLINE_FILE":return null;default:(0,a.xb)(e)}}}function T(e){let r=v.getFileKeyForAutosaveChanges(e);return(0,_.I4)(r||"")}let I=(0,i.Iz)(e=>(0,i.eU)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r(p.sMs.Query({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r(p.cfd.Query({repoId:e.repo.id})).transform(e=>!!s.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r(p.eSI.Query({prototypeId:e.prototype.id})).transform(e=>!!s.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?o.Qw.loaded(!0):void(0,a.xb)(e)),v.sameObject),S={FILE:m.F.FILES,PROTOTYPE:m.F.PROTOTYPES,REPO:m.F.REPOS,PINNED_FILE:m.F.PINNED_FILES,OFFLINE_FILE:m.F.OFFLINE_FILES}},169567:(e,r,n)=>{n.d(r,{H:()=>f});var a=n(848318),i=n(773511);n(82433);var o=n(536384),s=n.n(o),l=n(615233),c=n(720522),d=n(297638),u=n(967688),p=n(783310),m=n(209595),_=n(181630),h=n(410210),g=n(721563);function f({children:e,large:r,brandTextColor:n,...o}){let f=(0,m._6)(),E=a.useRef(null);(0,p.Z)("light",E);let y=(0,_.ju)(f);return(0,l.sL)()?null:a.createElement("div",{ref:E,"data-editor-theme":y},a.createElement(i.E,{htmlAttributes:{"data-test-id":"google-btn"},className:s()(h.x6,h.zB,r?h.as:h.Hg,n&&d.s.colorTextBrand.$),"aria-label":(0,u.t)("footer_banner.continue_with_google"),...o},a.createElement("span",{className:h._d},a.createElement(c.B,{className:h.Kk,svg:g.A,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("span",{className:h.IO},e))))}},760641:(e,r,n)=>{n.d(r,{LR:()=>b,_i:()=>T,kg:()=>v,ts:()=>y});var a=n(848318),i=n(301168),o=n(559389),s=n(186606),l=n(410441),c=n(454805),d=n(81884),u=n(986368),p=n(995218),m=n(696786),_=n(913026),h=n(130953),g=n(645445),f=n(755063),E=n(27776);function y(e,r=552,n=320){let[i,s]=a.useState(),[d,u]=a.useState(),[_,g]=a.useState(!1),b=(0,m.GS)(),v=(0,p.ow)();return a.useLayoutEffect(()=>{let a=()=>{let a,i;switch(e.kind){case"mountCenter":a=window.innerWidth/2,i=window.innerHeight/2;break;case"buttonTarget":let o=(0,h.Tc)(e.buttonTarget);if(!o)return;let d=o.getBoundingClientRect();a=d.x+d.width/2,i=d.y;break;case"sourceRect":a=e.sourceRect.x+e.sourceRect.width/2,i=e.sourceRect.y}let u=a-n/2,p=i-r-12;window.innerWidth-u<n?(_||g(!0),u=window.innerWidth-n-f.wR):_&&g(!1);let m=b?(0,l.hG)(E.kLt)+(0,l.hG)(E.M$q):(0,l.hG)(E.tui);p=Math.max((v?m:0)+f.wR,p),s(new c.Mi(u,p))};setTimeout(a,0);let i=(0,o.s)(a,100);return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e,r,n,_,b,v]),{initialModalPosition:i,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:_}}function b(){let e=(0,i.wA)();return a.useCallback((r=!0)=>{s.glU&&r&&s.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function v(e){return e.mirror.appModel.currentTool===s.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===g.t.NOT_PINNED}function T(e,r,n,o){let s=(0,i.wA)(),l=(0,i.d4)(e=>(0,_.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:a.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:a.useCallback((a,i)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:a,hideSuccessVisualBell:i,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},816760:(e,r,n)=>{n.d(r,{N:()=>_});var a=n(848318),i=n(301168),o=n(989232),s=n(410725),l=n(238462),c=n(289248),d=n(72447),u=n(31898);n(381673);var p=n(318147),m=n(55116);function _(e,r,n){let _=(0,i.wA)(),h=(0,s.Rs)(m.VTr,{planParentId:e?.parentId||"",planType:e?.type||p.OL.TEAM},{enabled:!!e?.parentId}),g="loaded"===h.status?h.data.plan:null;return(0,a.useCallback)(()=>{if(!g)return l.lQ;g&&g.connectionCount>=d.b[g.tier]&&!g.unlimitedConnectionsEnabled&&!g.testingOnlyUnlimitedConnectionsEnabled?(o.definedAnalyticsHandler.trackDefinedEvent("workflow.connected_projects_maximum_connections_paywall_hit",{planId:g.key.parentId||void 0,planType:g.key.type,planTier:g.tier,numConnections:g.connectionCount,resourceConnectionInviteId:n}),_(u.to({type:c.u,data:{plan:g}}))):r()},[g,r,_,n])}n(138528),n(679996),n(520779),n(274016)},536961:(e,r,n)=>{n.d(r,{L:()=>l});var a=n(848318),i=n(656329),o=n(454805),s=n(7148);function l(e){let{onDelayedDragSuccess:r,onDelayedDragCancelled:n}=e,l=(0,s.BI)(),c=a.useRef(void 0),d=a.useRef(-1),u=a.useCallback(e=>{e.preventDefault()},[]),p=()=>{clearTimeout(d.current),d.current=-1},m=a.useCallback(e=>{-1!==d.current&&e.pointerId===c.current?.pointerId&&o.Mi.distance(new o.Mi(c.current.clientX,c.current.clientY),new o.Mi(e.clientX,e.clientY))>10&&(n(),p(),document.removeEventListener("touchmove",u),document.removeEventListener("pointermove",m),c.current=void 0)},[n,u]),_=a.useCallback(e=>{document.removeEventListener("touchmove",u),document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",_),c.current=void 0,p()},[u,m]);return e=>{"mouse"!==e.pointerType&&(l?.shouldOptimizeForIpadApp||i.Ay.isMeetDevice)&&function(e){let r=e.target;for(;r&&"body"!==r.tagName.toLowerCase();){let e=getComputedStyle(r).overflowY;if("scroll"===e||"auto"===e)return!0;r=r.parentElement}return!1}(e)?(document.addEventListener("pointermove",m),document.addEventListener("pointerup",_),c.current=e,d.current=setTimeout(()=>{document.addEventListener("touchmove",u,{passive:!1}),r(e)},250)):r(e)}}},942963:(e,r,n)=>{n(52813),n(410725),n(540698),n(730143),n(55116);var a=(e=>(e.LOADING="LOADING",e.HAS_ACCESS="HAS_ACCESS",e.NO_ACCESS="NO_ACCESS",e))(a||{})},355755:(e,r,n)=>{n.d(r,{B9:()=>E,KH:()=>u,aV:()=>h,ax:()=>p,dH:()=>_,eY:()=>d,f4:()=>m,p8:()=>g});var a=n(848318),i=n(301168);n(354427);var o=n(328813);n(186606),n(768618),n(813009);var s=n(433166);let l=e=>e?.mirror?.sceneGraph,c=()=>(0,i.Pj)();function d(){return(0,i.d4)(l)}let u=()=>(0,i.d4)(e=>e.mirror.sceneGraphSelection);function p(){return!(0,i.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function m(e){let r=c(),n=u(),i=(0,a.useRef)();i.current=()=>{e(r.getState())},(0,a.useEffect)(()=>{i.current()},[n])}function _(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool)}function h(){return(0,i.d4)(e=>(0,s.T)(e?.progressBarState?.mode))}function g(e){return(0,i.d4)(r=>r.mirror.appModel[e])}let f=(0,a.createContext)(null);function E(){let e=(0,i.d4)(e=>e.mirror.sceneGraph);return(0,a.useContext)(f)||e}},70433:(e,r,n)=>{n.d(r,{KV:()=>y,P3:()=>h,Tm:()=>_,Wy:()=>d,Zz:()=>b,eE:()=>E,rq:()=>p,xk:()=>c});var a=n(186606),i=n(382902),o=n(264790),s=n(231159),l=n(388981);let c=60;var d=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(d||{});let u=(0,i.eU)(null);function p(e){}(0,i.eU)(e=>!!e(u));let m=(0,i.yu)((0,i.um)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,o.Yc)(),heapMemoryLimit:a.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),_=(0,i.eU)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(m),a=e(u),i=r/n*100;return a&&(i=a),i=Math.round(100*(i=Math.max(0,i=Math.min(100,i)))+Number.EPSILON)/100},(e,r)=>{r(m)});function h(){return i.zl.set(_),i.zl.get(_)}let g=(0,s.bt)(e=>e.modalShown?.type===l.Lu),f=(0,i.eU)(e=>{let r=e(_);return e(g)?3:r>=75?2:r>=c?1:0},(e,r)=>{r(_)}),E=(0,i.Hj)(f,e=>a.glU.setMemoryWarningLevel(e));function y(e,r){return(0,o.Yc)()/r*e/a.hMR.getHeapMemoryLimit()}function b(){let e=a.Hcu?.getSubtreeMemoryUsage(["0:2"],a.v4N.PRIMARY)??0;return(0,o.Yc)()/a.Hcu.getSubtreeMemoryUsage(["0:0"],a.v4N.PRIMARY)*e*100/a.hMR.getHeapMemoryLimit()}},665411:(e,r,n)=>{n.d(r,{Fy:()=>y,QR:()=>g,VI:()=>E,_Z:()=>h,lH:()=>f});var a=n(848318),i=n(301168),o=n(186606),s=n(768618),l=n(382902),c=n(323201),d=n(506428),u=n(489082),p=n(554326),m=n(181630),_=n(169245);function h(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let i=e?.view==="prototype",d=i?null:(0,s.UN)().getCurrentPage(),h=a.useMemo(()=>d?.backgroundColor,[d]),f=!!(0,p.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,l.md)(_.s6),y=(0,l.md)(_.rp),b=(0,l.md)(g),v=(0,l.md)(_.nc);return a.useMemo(()=>{let e;if(i)return{isLoading:!1};let a=(0,u.E7)(h);return(e=null!==a?c.F.format(a):n&&"dark"===(0,m.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=a?(a.a=.7,e=c.F.format(a)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||f||v||y||b,isLoadingMissingFonts:b}},[i,h,n,E,r,f,v,y,b])}({selectedView:(0,i.d4)(e=>e.selectedView),isLoadingVersionHistory:i.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,d.DP)()})}let g=(0,l.eU)(!1);function f(e){return e.some(e=>e.status!==o.xal.LOADED)}function E(e){return e.every(e=>e.status===o.xal.LOADED)}function y(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},972382:(e,r,n)=>{n.d(r,{w:()=>o});var a=n(45137),i=n(125761);function o({rolesToDefaultToOther:e}={}){let r=i.iZ()?.profile.job_title,n=(0,a.HB)(r);return e&&e.includes(n)?"other":n}},391375:(e,r,n)=>{n.d(r,{g5:()=>l});var a=n(848318),i=n(301168);n(865114),n(410725),n(813147),n(964619),n(55116);var o=n(720722);n(730143);var s=n(125761);function l(e){let r=(0,i.d4)(e=>e.library),n=(0,s.TA)(),l=(0,i.d4)(e=>e.recentlyUsed.libraryItems);return(0,a.useMemo)(()=>{let a=[];for(let i of l[e])if((null!==n?i.last_added_at_by_user_id?.[n]:void 0)&&(i.type===o.PW.COMPONENT||i.type===o.PW.STATE_GROUP)){let e=function(e,r){let n=e.library_key,a=e.team_id,i=e.node_id;return e.type===o.PW.COMPONENT?r.publishedByLibraryKey.components[a]?.[n]?.[i]||r.defaultPublished.componentsByLibraryKey[n]?.[i]:e.type===o.PW.STATE_GROUP?r.publishedByLibraryKey.stateGroups[a]?.[n]?.[i]||r.defaultPublished.stateGroupsByLibraryKey[n]?.[i]:void 0}(i,r);e&&a.push(e)}return{productComponents:a,templates:[]}},[l,e,r,n])}},896156:(e,r,n)=>{n.d(r,{p:()=>i});var a=n(301168);function i(){return(0,a.d4)(e=>e.sharingAttributionContextKey||null)}},7148:(e,r,n)=>{n.d(r,{BI:()=>c,F4:()=>d,Jj:()=>o,Jp:()=>l,Kx:()=>u,Rf:()=>i,Yi:()=>h,e8:()=>m,h4:()=>p,m0:()=>_,sc:()=>s});var a=n(656329);function i(){return window.FigmaMobile}function o(){return window.FigmaMobile}function s(){return o()}function l(){return window.FigmaMobile}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return d()}function p(){return window.FigmaMobile}function m(){return window.FigmaMobile}function _(){return window.FigmaMobile}function h(e){let r=window.FigmaMobile;return"prototype"===e.view?a.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},953985:(e,r,n)=>{n.d(r,{$P:()=>v,d0:()=>b,kn:()=>T});var a=n(848318),i=n(301168),o=n(354427),s=n(865114),l=n(238462),c=n(352317),d=n(847461),u=n(431698),p=n(303397),m=n(15105),_=n(601167),h=n(302982),g=n(119017),f=n(167546),E=n(563741),y=n(7148);function b(e,r,n,o,s){let c=(0,y.h4)(),g=(0,i.wA)(),f=(0,u.I_)(),b=(0,E.s)(),v=(0,m.Z)();a.useEffect(()=>{c&&(c._select_comment=e=>{let a=r.find(r=>r.id===e);a&&g(d.At({receiptsAPI:f.commentReceipts,thread:a,viewport:n,skipDeactivatingExistingActiveComment:!0,config:b,navigate:v}))})},[c,g,r,f,n,b,v]),a.useEffect(()=>{c&&(c._add_draft_comment=e=>{let r=(0,_.$$)(n.getViewportInfo(),e);g(d.vV({anchorPosition:r})),g(d.CX())})},[c,g,n]),a.useEffect(()=>{c&&(c._deselect_comment=e=>{g(d.UU())},c._remove_draft_comment=()=>{e===h.hm&&g(d.UU())})},[c,e,g]),a.useEffect(()=>{c&&(c._submit_comment_draft=e=>{g(d.Z5({messageMeta:e})),s()})},[c,e,g,s]),a.useEffect(()=>{c&&o&&(c._set_comments_visibility=e=>{p.Y5.triggerAction("toggle-show-comments",{source:"mobile_app"})})},[c,o]),a.useEffect(()=>{c&&(c._pan_canvas=e=>{let r=n.getViewportInfo();n.navigateTo({x:r.offsetX+e.x/r.zoomScale,y:r.offsetY+e.y/r.zoomScale},r.zoomScale)})},[c,n]),a.useEffect(()=>{c&&!c._recenter_comment&&(c._recenter_comment=l.lQ),c&&!c._recenter_draft_comment&&(c._recenter_draft_comment=l.lQ)},[c])}function v(e,r,n,l,c){let d=(0,y.sc)();a.useEffect(()=>{d?.updateCommentVisibility&&!l&&d.updateCommentVisibility(null!==c)},[d,l,c]);let u=(0,i.d4)(e=>e.comments.newComment),p=a.useMemo(()=>{if(e===h.hm){if(!u.anchorPosition)return null;{let e=(0,_.Z0)(n.getViewportInfo(),u.anchorPosition);return{x:e.x,y:e.y,width:36.8,height:36.8}}}let a=r.find(r=>r.id===e);if(!a||!a.canvasPosition)return null;let i=(0,_.Z0)(n.getViewportInfo(),a.canvasPosition),o=(0,f.c4)(a.comments).length,s=g.XC.getPinSize(o);return{x:i.x,y:i.y,width:1.15*s.width,height:1.15*s.height}},[e,u,r,n]),m=(0,s.ZC)(e),E=(0,s.ZC)(p);a.useEffect(()=>{e&&p&&e===m&&E&&!(0,o.c2)(p,E)&&(e===h.hm?d?.updateDraftCommentPinPosition?.(p):d?.updateCommentPinPosition?.(e,p))},[d,e,p,E,m])}function T(e,r){let n=(0,y.sc)(),i=a.useContext(c.W);a.useEffect(()=>{n?.updateCommentVisibility&&n.updateCommentVisibility(e)},[n,e]),a.useEffect(()=>{!e&&i&&r?.current&&(i.uninstallTapGestureRecognizer(r.current),i.uninstallMultiTouchLongPressGestureRecognizer(r.current,1))},[e,i,r])}},856731:(e,r,n)=>{n.d(r,{A8:()=>g,AD:()=>b,D4:()=>y,Py:()=>A,Q2:()=>h,Wq:()=>E,_i:()=>T,pl:()=>f,uC:()=>I,wF:()=>S});var a=n(848318),i=n(301168),o=n(871043),s=n(19180),l=n(865114),c=n(410725),d=n(748008),u=n(858160),p=n(696786),m=n(55116),_=n(730143);let h=4,g=8,f=22;function E(e,r){let n=(0,p.GS)(),a=y(),i=function(e,r){let{isPropertiesPanelCollapsed:n}=(0,u.iT)();return(0,s.k)().avatar_threshold_calculation?e&&!n&&r?Math.min(Math.floor(e/f)+1,g):3:!e||n?3:Math.max(3,Math.min(Math.floor(e/f),g))}(e,r);return n?i:a}function y(){let[e,r]=a.useState(h);return a.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(h)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function b(e){return"sessionID"in e}let v=e=>{let{user:r,sessionID:n,presenterSessionID:a,lastObservedSessionID:i,fileCreatorID:o,mostActiveSpeakerID:l,observingSessionID:c}=e;return b(r)&&r.sessionID===n?0:b(r)&&a&&r.sessionID===a?1:b(r)&&c&&r.sessionID===c?2:(0,s.k)().live_feedback_large_meetings&&b(r)&&i&&r.sessionID===i?3:b(r)&&r.userID===o?4:r.userID===l?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function T(e,r){let n=e;return r&&(n=n.filter(e=>b(e)&&e.deviceName===r)),n=n.filter(e=>!b(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function I(e,r,n,s,c){let d=(0,i.d4)(e=>e.multiplayer.sessionID),u=(0,i.d4)(e=>e.multiplayer.observingSessionID),p=(0,i.d4)(e=>e.multiplayer.presenterSessionID),m=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),h=(0,_.q5)(),[g,f]=a.useState(null),E=(0,l.ZC)(u);E!==u&&(0,o.Vq)(E)&&-1!==E&&E!==g&&f(E);let y=a.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:p,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:h?.creatorId,deviceNameFilter:m}),[d,u,p,g,c,h?.creatorId,m]),{users:I,overflowUsers:S}=a.useMemo(()=>(function(e,r,n,a,i){let{deviceNameFilter:o}=i,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=v({...i,user:e})-v({...i,user:r});if(0!==n)return n;let a=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return b(e)&&b(r)&&a===o?e.sessionID-r.sessionID:a>o?1:-1}),(l=T(l,o)).length>=a&&(s=l.slice(a-1),l=l.slice(0,a-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,s,y),[e,r,n,s,y]);return{users:I,overflowUsers:S}}function S(){let e=(0,_.q5)(),r=e?.key,n=(0,c.Rs)(m.JvY,{fileKey:r??""},{enabled:!!r});return a.useMemo(()=>{if("loaded"!==n.status)return;let e=(0,d.oA)(n.data?.file?.fileViewHistory);return(e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[]).sort((e,r)=>r.viewedAt.getTime()-e.viewedAt.getTime())},[n])}function A(e){return"viewedAt"in e}},730143:(e,r,n)=>{n.d(r,{As:()=>A,Cq:()=>U,Dz:()=>b,Hu:()=>S,K5:()=>R,Kf:()=>x,MY:()=>v,XJ:()=>N,_G:()=>O,_S:()=>L,bv:()=>B,l3:()=>k,q5:()=>M,sS:()=>w,tB:()=>T,tS:()=>F,vu:()=>P,yV:()=>I,ze:()=>C});var a=n(301168),i=n(562027),o=(n(39153),n(19180)),s=n(382902),l=n(317720),c=(n(989232),n(865114),n(813009)),d=n(458608),u=n(410725),p=(n(329228),n(238462)),m=n(128106),_=n(468709),h=n(231159);n(318147);var g=n(55116),f=n(715880),E=n(944239),y=n(125761);async function b(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,d.Ek)(g.ehp,{fileKey:n})).file||null}function v(){let e=(0,a.d4)(e=>{if(e.selectedView?.view==="fullscreen")return e.selectedView.fileKey}),r=(0,u.Rs)(g.ehp,{fileKey:e||""},{enabled:!!e});return l.Qw.useTransform(r,({file:e})=>e)}function T(e){return e.openFile}let I=(0,h.bt)(T),S=(0,s.eU)(e=>{let r=e(I),n=e(f.m);return r?.teamId?n[r.teamId]??null:null}),A=(0,s.mg)(I,e=>e?.teamId??void 0);function w(e){return e.openFile?.key||null}let C=(0,h.bt)(w);function N(e){let r=T(e);return r?(0,i.l)(r.libraryKey):null}let L=(0,h.bt)(N),O=(0,E.D)(()=>(0,s.md)(L));function R(){let e=F(),r=O();return(0,m.i)(e,r)}function P(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}function D(){return(0,a.d4)(T)}function k(){let e=(0,a.d4)(e=>e.selectedView?.view==="prototype"),r=function(){let e=(0,a.d4)(e=>e.selectedView?.view==="fullscreen"?e.selectedView.fileKey:null),r=(0,u.rp)((0,g.ehp)(e?{fileKey:e}:null));return l.Qw.useTransform(r,({file:e})=>e)}(),n=D();return e?n:r.data??null}let M=(0,o.k)().preload_open_editor_file_data?k:D,F=(0,E.D)(()=>M()?.key||null);function x(){let e=M(),r=(0,y.iZ)();return e?.creatorId===r?.id}function U(e){return B((0,c.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function B(e,r){let n=P(e);return r?.useSinatraType?n:n?(0,_.UE)(n):null}(0,o.k)().preload_open_editor_file_data||p.lQ},672940:(e,r,n)=>{n.d(r,{AF:()=>l,FC:()=>s});var a=n(301168),i=n(280255),o=n(407638);function s(){return(0,a.d4)(o.getPermissionsState,a.bN)}function l(){return(0,a.d4)(e=>(0,i.Pq)({copyExportRestrictedArgs:e.openFile}))}},493228:(e,r,n)=>{n.d(r,{$0:()=>M,By:()=>G,D_:()=>N,HG:()=>B,Lt:()=>O,Pi:()=>U,S$:()=>C,VA:()=>x,Ww:()=>k,c3:()=>L,dR:()=>F,oW:()=>D,y:()=>V});var a=n(848318),i=n(301168),o=n(660376),s=n(871043),l=n(186606),c=n(382902),d=n(865114),u=n(656329),p=n(753269),m=n(540698),_=n(140357),h=n(967688),g=n(952039),f=n(363367),E=n(361964),y=n(151223),b=n(244534),v=n(338104),T=n(702038),I=n(127340),S=n(254028),A=n(209595),w=n(424227);let C=(0,m.nl)()?0:4e3;var N=(e=>(e.INITIAL="initial",e.NEXT="next",e))(N||{});let L=(0,y.nF)((e,r)=>{let n=e.getState().multiplayer.allUsers.find(e=>e.sessionID===r.presenterSessionID),a=n?.name??"",i=n?(0,h.t)("collaboration.spotlight.visual_bell.user_left_the_spotlight",{userName:a}):(0,h.t)("collaboration.spotlight.visual_bell.the_presenter_left_the_spotlight");e.dispatch(g.F.enqueue({message:i,type:"presentation_stopped_alert"}))}),O=(0,y.nF)((e,r)=>{e.dispatch(g.F.dequeue({matchType:"presentation_stopped_alert"}))}),R=(e,r,n,a)=>{let i=(0,s.Vq)(r)&&e!==r,o=n===r,l=a===r;return i&&!o&&!l};function P(){let e=(0,A.z3)(),r=(0,i.wA)(),n=(0,i.d4)(e=>e.multiplayer),o=a.useCallback(e=>{r(b.J4({...n,observingSessionID:e}))},[n,r]),s=a.useCallback(e=>{l.h3O.observeUser(e)},[]);return"prototype"===e?o:s}function D(e){let{multiplayer:{observingSessionID:r,presenterSessionID:n,sessionID:l}}=e,u=(0,i.wA)(),m=(0,A.z3)(),_=(0,c.md)(p.Dv),[h,g]=a.useState("initial"),f=(0,d.ZC)(n),E=r===n,y=l===n||_,b=R(f,n,r,l),[v,I]=a.useState(null);a.useEffect(()=>{let e=null;return null!=v&&(e=setTimeout(()=>I(null),1e3)),()=>{e&&clearTimeout(e)}},[v]);let S=P(),N=a.useCallback(()=>{(0,s.Vq)(n)&&("prototype"!==m&&(0,T.wr)(),S(n))},[n,S,m]),D=a.useCallback(()=>{N(),n&&I(n)},[n,N]);v===r&&I(null);let{isActive:k,start:M,cancel:F,complete:x}=(0,w.Z)(D),U=a.useCallback(()=>{F(),I(null)},[F]),B=b&&r===f,G=b&&!B,V=(0,s.uy)(n)&&(0,s.Vq)(f)&&r===f;k&&y&&U(),a.useEffect(()=>{B&&(u(O()),M(2e3),g("next"))},[u,B,M]),a.useEffect(()=>{G&&(u(O()),M(C),g("initial"))},[u,G,M]),a.useEffect(()=>{V&&(S(-1),U(),u(L({presenterSessionID:f})))},[U,u,f,V,e.multiplayer,S]),a.useEffect(()=>{k&&E&&U()},[E,U,k]);let H=(()=>{switch(h){case"next":return 2e3;case"initial":return C;default:(0,o.xb)(h)}})();return{isAutoFollowPending:!y&&(G||B||k||null!=v),cancelAutoFollowCallback:U,completeAutoFollowCallback:x,observeCurrentPresenter:N,autoFollowType:h,autoFollowDelayMs:H}}function k(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.sessionID)??null}function M(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.observingSessionID)??null}function F(){let e=(0,i.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.presenterSessionID)??null}function x({multiplayer:e}){let r=function(){let e=(0,S.Oc)(),r=B(),n=(0,I.XM)(),a=(0,E.hA)(),i=(0,E.l7)(),o=(0,f.e)(),s=(0,E.ZO)();return!!r&&!n&&!a&&!i&&!o&&!s&&!e}(),n=e.presenterSessionID===e.sessionID,i=(0,A.z3)(),o=a.useCallback(()=>{"prototype"===i?_.hk()?.stopPresenting():l.h3O.stopPresenting()},[i]);a.useEffect(()=>{!r&&n&&o()},[r,n,o])}function U({multiplayer:e}){let r=P(),n=!G(),i=-1!==e.observingSessionID;a.useEffect(()=>{!n&&i&&r(-1)},[n,i,r])}function B(){let e=(0,S.Oc)();return!((0,u.o4)()&&(0,u.Q1)()&&!(0,u.wg)()||v.z4?.getIsExtension())&&!e}function G(){let e=(0,S.Oc)(),r=(0,I.XM)(),n=(0,I.e2)(),a=(0,E.hA)(),i=(0,E.l7)();return!!r||!!n||!!a||!!i||!!e}function V(){let e=(0,i.d4)(e=>e.multiplayer),r=e.sessionsNominatingCurrentUser[0];return r?e.allUsers.find(e=>e.sessionID===r)??null:null}},468787:(e,r,n)=>{n.d(r,{TN:()=>l});var a=n(301168),i=n(407638),o=n(800802),s=n(319689);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,a.d4)(r=>r.teams[e]),l=(0,a.d4)(e=>(0,i.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},636524:(e,r,n)=>{n.d(r,{Fl:()=>b,ug:()=>T,wW:()=>E});var a=n(848318),i=n(301168),o=n(813009);n(508328);var s=n(540698),l=n(35597),c=n(190950),d=n(125761),u=n(922484),p=n(425451),m=n(795234);new class{constructor(){this.BatchedSchemaValidator=(0,m.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",m.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let _=e=>r=>e&&r.publicUsers.byId[e]||null,h=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?v(n):null},g=e=>r=>{let n=r.user,a=h(e)(r);return n&&n.id===e?n:a||null},f=e=>r=>{let n=g(e)(r),a=_(e)(r);return n||a||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,i.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,i.d4)(e=>e.loadingState),s=(0,i.d4)(_(e)),p=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),m=!!s,h=!m&&(0,u.VP)(o,n),g=!m&&(0,u.aF)(o,n),f=!m&&p&&!h&&!g;return(0,a.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:h,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>p.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),v=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function T({state:e,dispatch:r,userId:n}){let a=f(n)(e);if(a)return a;if(b(n))return null;let i=e.user,o=b(n);if(!(!a&&!o&&i))return null;let s=await y(n);return r(c.yJ({user:s})),s}},681140:(e,r,n)=>{n.d(r,{N:()=>i});var a=n(848318);function i(e,r=!0){(0,a.useEffect)(()=>{if(!r)return;let n=!0,a=performance.now(),i=r=>{if(!n)return;let o=r-a;a=r,e(o),requestAnimationFrame(i)};return requestAnimationFrame(i),()=>{n=!1}},[r,e])}},848751:(e,r,n)=>{n.d(r,{M:()=>u});var a=n(848318),i=n(891627),o=n(536384),s=n.n(o),l=n(230618),c=n(534619),d=n(357202);function u(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,c.AE)(e.dragState.draggingResource);return(0,i.createPortal)(void 0!==e.icon?a.createElement("div",{className:s()(d.Az,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):a.createElement(l.oW,{src:n,alt:"",className:s()(d._D,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},882486:(e,r,n)=>{n.d(r,{M:()=>o,Y:()=>s});var a=n(454805),i=n(303397);function o(){return Array.from(document.querySelectorAll('[data-cancel-insertable-resource-drag-and-drop="true"]')).map(e=>e.getBoundingClientRect())}function s(e,r){return(0,a.gR)(i.Y5.getViewportInfo(),e)&&!r.some(r=>(0,a.gR)(r,e))}},501636:(e,r,n)=>{n.d(r,{M5:()=>p,Nq:()=>u,zR:()=>d});var a=n(848318),i=n(865114),o=n(454805),s=n(303397),l=n(15105),c=n(601167);function d(e){let r=s.Y5.getViewportInfo(),n=e?e.subtract(r):new o.Mi(r.width/2,r.height/2),a=(0,c.$$)(r,n);return new o.Mi(a.x,a.y)}let u=5;function p(e,r,n){let c=(0,i.ZC)(e?.isDraggingOverCanvas),d=(0,l.Z)(),[u,p]=a.useState(null);return a.useEffect(()=>{if(!c&&e?.isDraggingOverCanvas&&r&&n){let r=function(e,r){if(void 0===e||void 0===r)return null;let{width:n,height:a}=s.Y5.getViewportInfo();return Math.min(n/e*.5,a/r*.5)}(...n);if(null!==r){let{zoomScale:a,offsetX:i,offsetY:l}=s.Y5.getViewportInfo();r<a&&(p(new o.Mi(...n).scale(r)),setTimeout(()=>{d({centerX:i,centerY:l,scale:r})?.then(()=>{p(null)}),e.grabbedPointerPercentageOffset=new o.Mi(.5,.5)},0))}}},[e,d,n,r,c]),u}},89729:(e,r,n)=>{n.d(r,{V7:()=>s});var a=n(660376);let i=["Table","CodeBlock","MindMap","Text","Section"],o=["Timer","Image","Link"];function s(e){return"string"==typeof e&&i.includes(e)||"string"==typeof e&&o.includes(e)?e:"object"==typeof e&&e.id&&e.name&&e.img?"FaceStamp":void(0,a.xb)(e)}},534619:(e,r,n)=>{n.d(r,{AE:()=>h,E:()=>g,Ik:()=>f});var a=n(660376),i=n(615233),o=n(464950),s=n(781239),l=n(967688),c=n(995218),d=n(102382),u=n(106420),p=n(625844),m=n(982323),_=n(89729);function h(e){switch(e){case"Table":return(0,i.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,i.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,i.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function g(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,a.xb)(e)}}function f(e){let r="whiteboard"===(0,c.lg)(),n=(0,u.F5)(),a=(0,_.V7)(e.resource),i=async i=>(e.insertAction(i),r&&(0,u.oM)({type:d.p.MORE,id:a,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,p.t)(e,{insertAction:i,dragPreviewPointerPosition:m.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,o.F)(e.icon):()=>h(e.resource),recordingKey:s.Pt(e.triggeredFrom,"whiteboardResource",a)})}},131650:(e,r,n)=>{n(301168),n(28351)},413238:(e,r,n)=>{n.d(r,{S:()=>a}),n(848318),n(301168),n(186606),n(195124),n(813009),n(972402),n(361964),n(353231),n(698429),n(730143);function a(e){}},404486:(e,r,n)=>{n.d(r,{Xo:()=>s}),n(848318);var a=n(301168),i=n(382902);n(244534);let o=(0,n(231159).bt)(e=>e.pickerShown);function s(){return(0,a.d4)(e=>e.pickerShown)}(0,i.Iz)(e=>(0,i.eU)(r=>{let n=r(o);return n?.id===e}))},319533:(e,r,n)=>{n.d(r,{J:()=>i});var a=n(848318);function i(e){let[r,n]=a.useState(e),i=a.useRef(e);return a.useEffect(()=>{i.current=r},[r]),[i,r,n]}},463117:(e,r,n)=>{n.d(r,{U3:()=>s,aq:()=>o});var a=n(848318),i=n(354427);function o(){let e=a.useRef(!1);return a.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),a.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=a.useRef(null),i=r(e,n.current);return a.useEffect(()=>{i||(n.current=e)}),i?n.current:e}(n,i.c2);a.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},819624:(e,r,n)=>{n.d(r,{Au:()=>d,P:()=>u,eO:()=>c}),n(848318),n(430385);var a=n(317720),i=n(410725),o=n(748008);n(318147);var s=n(55116);n(74666);var l=n(213374);function c(e){let r=e?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null}function d(e){let r=(0,i.Rs)(s.TKM,{orgId:e});return a.Qw.useTransform(r,e=>c(e.currentUser))}function u(e,r){let n=(0,i.Rs)(s.aON,{orgId:e??"",workspaceId:r??""},{enabled:!!e&&!!r});return null===r?(0,o.gB)(l.O):n.transform(e=>e.workspace)}var p=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(p||{})},543177:(e,r,n)=>{n.d(r,{HF:()=>x,M3:()=>A,Rj:()=>P,Vz:()=>B,a6:()=>w,al:()=>D,bH:()=>M,cU:()=>k,cp:()=>L,ow:()=>N,pt:()=>I,re:()=>T,t0:()=>F,vK:()=>R,x0:()=>C,yS:()=>O,zv:()=>U});var a=n(660376),i=n(186606),o=n(238444),s=n(637640),l=n(857607),c=n(461979),d=n(967688),u=n(809543),p=n(900003),m=n(162934),_=n(318147),h=n(477548),g=n(553709),f=n(175957),E=n(825241),y=n(913026),b=n(633468);let v={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},T={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:_.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",thumbnail_is_set:!1,comments_setting:null,publishing_status:_.KB.APPROVED_PUBLIC,badges:[]};var I=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(I||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function A(e,r){return(0,y.Hc)(e,r,T)}function w(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,v)}function C(e){if(!e)return _.y4.CANVAS;switch(e){case _._Y.DESIGN:return _.y4.CANVAS;case _._Y.WHITEBOARD:return _.y4.WHITEBOARD;case _._Y.SLIDES:return _.y4.SLIDE_TEMPLATE;case _._Y.SITES:return _.y4.SITE_TEMPLATE;case _._Y.COOPER:return _.y4.COOPER_TEMPLATE_FILE;case _._Y.FIGMAKE:return _.y4.FIGMAKE_TEMPLATE;default:(0,a.xb)(e)}}function N(e,r,n,a){let o;let s=e.figFilePublishedAsHubFile[r],l=A(s,e.hubFiles),c=w(l),g=y.b,f=e.fileByKey[r];!a&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(o=(0,m.Tn)(e.authedActiveCommunityProfile));let b=(0,m.gO)(l,f,e,o),v=n?l.viewer_mode:C(f.editor_type);!n&&l.viewer_mode===_.y4.PROTOTYPE&&a&&i.X3B?.firstPagePrototypeStatus()===i.bOM.VALID&&(v=_.y4.PROTOTYPE);let T={...(0,E.Rs)(),tokens:(l.community_publishers?[...l.community_publishers.accepted,...l.community_publishers.pending||[]]:[]).reduce((r,n)=>{let a=e.authedProfilesById[n.id];return(0,m.Ii)(a,b)?r:r.concat([{state:h.d.OK,content:n}])},[])};return{name:c.name||(f.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":f.name),description:c.description||g.description,categoryId:l.category_id,creatorPolicy:c.creator_policy||g.creatorPolicy,tags:s&&l?.tags?l.tags:f?.editor_type==="whiteboard"?["figjam"]:void 0,tagsV2:l.tags_v2&&Object.keys(l.tags_v2),viewerMode:v,scalingMode:l.scaling_mode,author:b,publishers:T,commentsSetting:l.comments_setting||g.commentsSetting,blockPublishingOnToS:(0,m.xw)(e),price:(0,p.vf)(l.monetized_resource_metadata),isPaid:!!l.monetized_resource_metadata,supportContact:l.support_contact||e.user?.email,carouselMedia:(0,u.N6)(l),coverImageCarouselMediaId:l.cover_image_carousel_media_id}}function L(e,r){return e?r?(0,p.Yp)(r)?r<p.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,p.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function O(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function R(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function D(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function k(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function M(e){let r={name:O(e.name),description:R(e.description),creatorPolicy:P(e.creatorPolicy)};e.publisherIds&&(r.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),r.carouselMedia=(0,m.vC)(e.carouselMedia),r.categoryId=k(e.categoryId);let n="isPaid"in e&&!!e.isPaid;return r.price=L(n,e.price),r.supportContact=D(n,e.supportContact),Object.keys(r).forEach(e=>!r[e]&&delete r[e]),r}function F(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function x(e){return!!e&&!e.unpublished_at}function U(e){return!!e&&e.publishing_status===_.KB.APPROVED_PUBLIC}function B(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},274430:(e,r,n)=>{n.d(r,{FB:()=>l,UA:()=>a,W4:()=>o,Wg:()=>s,s3:()=>c,sf:()=>i});let a=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kosovo","XK"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],i=["CU","IR","KP","SY"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,r)=>e[1].localeCompare(r[1])),s=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,r)=>e[1].localeCompare(r[1])),l=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,r)=>e[1].localeCompare(r[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},4881:(e,r,n)=>{n.d(r,{Wh:()=>l,rt:()=>d});var a=n(382902),i=n(476254),o=n(730143);let s={preserveValue:!1};function l(e,r=s){let n=(0,a.Iz)(e);return(0,a.eU)(e=>{let a=i.D?e(o.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==a),e(n(a))},(e,r,...a)=>r(n(e(o.ze)),...a))}let c=[];function d(e){let r=(0,a.eU)(e);return c.push({atomRef:new WeakRef(r),initialValue:e}),r}},672201:(e,r,n)=>{n.d(r,{ZN:()=>s,dO:()=>o});var a=n(29188),i=n(445506);async function o(e){try{let e=null;if(a.eD&&(e=await a.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:i.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,i.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&i.g7[e.detectedLayouts[0]]?i.g7[e.detectedLayouts[0]]:null)}},155148:(e,r,n)=>{n.d(r,{n:()=>i}),n(848318),n(301168);var a=n(238444);function i(e,r){return!!(e?.is_ipad_user||(0,a.jm)(r))}n(476254),n(410725),n(656329),n(182317),n(967688),n(829897),n(659717),n(995218),n(318147),n(55116),n(353231),n(463117)},152449:(e,r,n)=>{n.d(r,{Bh:()=>f,SS:()=>y,bO:()=>E,oz:()=>b,z5:()=>v});var a=n(848318);n(301168);var i=n(871043),o=n(562027);n(19180),n(382902);var s=n(418193);n(983401),n(239910),n(626715);var l=n(410725),c=n(748008);n(834428),n(757109);var d=n(271326),u=n(730143);n(277454);var p=n(55116),m=n(806349);n(295156),n(953413);var _=n(292024),h=n(128106);n(788903);let g=a.createContext(null);function f(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,i.sR)(a.useContext(g),"Must call `useLibraryData` from within <LibraryDataProvider>"),s=e?.fileKey;return a.useEffect(()=>{if(s)return n(s),()=>o(s)},[n,o,s]),s&&r[s]||(0,c.Xm)()}function E(){let{subscriptions:e}=(0,i.sR)(a.useContext(g),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function y({fileKey:e,libraryKey:r}){return f((0,h.i)(e,r)),null}function b(e,r){let n=[];for(let a of e.libraryHierarchyPaths)for(let e of a.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function v(e,r){return b(e.data,r)}a.memo(function({fileKey:e,onChange:r}){let n=e!==(0,u.tS)(),i=(0,_.wJ)(e),o=(0,d.n1)(),{view:s,args:c,options:m}=i?{view:p.Acj,args:{hubFileId:e},options:{enabled:o}}:{view:n?p.tIY:p.s5n,args:{fileKey:e},options:void 0},h=(0,l.Rs)(s,c,m);return a.useEffect(()=>{r(e,h)},[r,e,h]),null}),(0,s.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,c.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,m.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,c.gB)({fileKey:e.hubFileId,libraryKey:(0,o.l)(e.libraryKey),name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n="libraryKeyToFile"in r?r.libraryKeyToFile?.file:r.file;if(!n)return(0,c.e1)([]);let a=n.libraryHierarchyPaths.map(e=>({components:"components"in e?e.components.map(e=>(0,m.Qp)(e,{type:"team",file:n})):[],stateGroups:"stateGroups"in e?e.stateGroups.map(e=>(0,m.SS)(e,{type:"team",file:n})):[],styles:e.styles.map(e=>(0,m.KC)(e,{type:"team",file:n}))}));return(0,c.gB)({fileKey:n.key,libraryKey:(0,o.l)(n.libraryKey),name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:a})})},277454:(e,r,n)=>{n.d(r,{$N:()=>eg,$j:()=>ey,A0:()=>eI,Av:()=>el,Bt:()=>ek,CG:()=>tV,Cj:()=>tU,Dg:()=>eu,E2:()=>tH,ET:()=>ts,El:()=>e4,FS:()=>t$,Fl:()=>tY,G$:()=>tk,GA:()=>eU,Gg:()=>te,Gj:()=>t1,Gp:()=>tp,HF:()=>ei,HK:()=>eh,Hb:()=>tM,IW:()=>ep,J1:()=>e8,Jc:()=>ea,KQ:()=>e$,LB:()=>eZ,LC:()=>tE,LI:()=>tB,LT:()=>tj,LX:()=>eH,Lk:()=>eV,MA:()=>tW,MF:()=>es,Mb:()=>e2,Mj:()=>eR,NW:()=>ty,NY:()=>tK,QO:()=>tv,QT:()=>eN,Q_:()=>t5,Qb:()=>eb,RQ:()=>tf,T4:()=>tq,UB:()=>e7,VJ:()=>ec,VO:()=>tF,Ve:()=>e5,WV:()=>t_,X0:()=>ev,X7:()=>ed,Ys:()=>e3,_B:()=>tb,_Q:()=>tD,aD:()=>en,ad:()=>tz,ah:()=>tQ,bd:()=>tN,bp:()=>th,cU:()=>tr,dx:()=>tG,eD:()=>t2,eS:()=>tc,f0:()=>tJ,f2:()=>ta,fc:()=>eF,gA:()=>ez,gi:()=>tR,gy:()=>tP,iP:()=>e_,i_:()=>eJ,iw:()=>e9,kG:()=>tA,kw:()=>tw,lG:()=>tS,lg:()=>eo,nJ:()=>t7,nn:()=>t6,oH:()=>tC,og:()=>ew,ov:()=>to,pD:()=>t4,pq:()=>ti,r9:()=>tO,rC:()=>eY,rt:()=>eA,sv:()=>t3,t$:()=>t8,td:()=>td,th:()=>ef,ti:()=>eT,uH:()=>tm,uJ:()=>eK,uN:()=>tX,v2:()=>tZ,vu:()=>eE,w$:()=>t0,w3:()=>eP,w8:()=>eQ,wn:()=>eD,yh:()=>em,zE:()=>tg});var a=n(848318),i=n(301168),o=n(430385),s=n(660376),l=n(559389),c=n(938982),d=n(673786),u=n(186606),p=n(562027);n(693108);var m=n(19180),_=n(382902),h=n(418193),g=n(260986),f=n.n(g),E=n(989232),y=n(476254),b=n(813009),v=n(748008),T=n(757685),I=n(998568),S=n(608323),A=n(810503),w=n(461979),C=n(304756),N=n(66699),L=n(967688),O=n(403355),R=n(6068),P=n(829897),D=n(659717),k=n(640483),M=n(807949),F=n(834428),x=n(438071),U=n(35597),B=n(67308),G=n(526867),V=n(555958),H=n(160769),z=n(720722),K=n(366485),W=n(293493),j=n(94294),Y=n(780922),$=n(730143),q=n(180294),X=n(964619),J=n(318147),Z=n(677334),Q=n(719801),ee=n(786835),et=n(436999),er=n(606672),en=(e=>(e.CURRENT="current",e.ALL="all",e))(en||{});let ea=a.createContext(null);function ei(e){return e===z.E8.CURRENT||e===z.E8.CHANGED||e===z.E8.DELETED}function eo(e){return e===z.E8.NEW||e===z.E8.CHANGED||e===z.E8.DELETED}function es(e){switch(e.type){case z.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case z.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case z.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case z.PW.VARIABLE_SET:case z.PW.VARIABLE:case z.PW.MODULE:return{type:e.type,key:e.key,version:e.version};case z.PW.RESPONSIVE_SET:case z.PW.CODE_COMPONENT:if("LOCAL"===e.subscriptionStatus)return{type:e.type,key:e.keyForPublish,version:e.version};return{type:e.type,key:e.key,version:e.version};case z.PW.MANAGED_STRING:return{type:e.type,key:e.keyForPublish,version:e.version};default:(0,s.xb)(e,`Unknown type ${e?.type}`)}}function el(e){let{key:r}=es(e);return(0,s.KF)(void 0!==r,"Asset had no key",{asset:e}),r}function ec(e){switch(e.type){case z.PW.CODE_COMPONENT:case z.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?e.sourceLibraryKey:null;case z.PW.COMPONENT:case z.PW.STATE_GROUP:case z.PW.STYLE:case z.PW.VARIABLE:case z.PW.VARIABLE_SET:case z.PW.MODULE:case z.PW.MANAGED_STRING:return e.library_key}}function ed(e){return e.map(el)}function eu(e){return es(e).version}function ep(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function em(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function e_(e,r){let n=Object.create(null);if(!r||!r.library_key)return n;let a=(0,p.l)(r.library_key),i=r.team_id||z.Yu,o=e[i]?.[a]??Object.create(null);for(let e in o)null==o[e].unpublished_at&&(n[e]=o[e]);return n}function eh(e,r){return r?ef(e)[r]??{}:{}}function eg(e,r){return Object.values(eh(e,r))}function ef(e){let r={};for(let n of Object.values(e))for(let[e,a]of Object.entries(n))r[(0,p.l)(e)]=a;return r}function eE(e){let r=[];return eb(e,(e,n,a,i)=>{r.push(i)}),r}function ey(e){let r=[];for(let n of Object.keys(e))for(let a of Object.values(e[(0,p.l)(n)]??{}))r.push(a);return r}function eb(e,r){for(let[n,a]of Object.entries(e))for(let[e,i]of Object.entries(a)){let a=(0,p.l)(e);for(let[e,o]of Object.entries(i))r(n,a,e,o)}}function ev(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function eT(e,r){let n=[];for(let a in e){let i=e[a];i.style_type!==r||i.deletedFromSceneGraph||n.push(i)}return n}function eI(e,r,n,a){let i=[];for(let o of Object.keys(r)){let s=(0,p.l)(o);if(ex(e.defaultPublished,n,s,a)){let e=r[s]??{};i.push(...Object.values(e))}}return i}let eS=new Set;async function eA(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!G.Eo.hasKeyInCache((0,Y.P)(e.canvas_url).url)&&!eS.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>eS.add(e)),(0,m.k)().ds_file_proxy_for_style_assets)await Promise.all(n.map(e=>G.Eo.getCanvas({canvas_url:r.get(e)})));else{if(0===n.length)return;try{let e=await C.Ay.post("/style/canvases",{style_keys:n});for(let[n,a]of Object.entries(e.data.meta.urls))C.Ay.crossOriginGetAny(a,null,{responseType:"arraybuffer"}).then(({data:e})=>{let a=r.get((0,d.n3)(n));if(a){let r=(0,Y.P)(a).url;G.Eo.putCanvas(r,e)}eS.delete((0,d.n3)(n))}).catch(()=>{eS.delete((0,d.n3)(n))})}catch(e){n.forEach(e=>eS.delete(e))}}}let ew=["TEXT","FILL","EFFECT","GRID"],eC=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,L.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,L.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,L.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,L.t)("design_systems.styles.guide_style",{numStyles:n});case"EXPORT":return(0,L.t)("design_systems.styles.export_style");case"STROKE":return(0,L.t)("design_systems.styles.stroke_style");default:return(0,E.trackEvent)("Unknown style type",{styleType:e}),(0,L.t)("design_systems.styles.styles",{numStyles:n})}};function eN(e){return eC(e,!1)}function eL(e,r,n){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides,buzz:!!e[r]?.buzz,subscriptionType:n,subscriptionId:e[r]?.subscriptionId}:{design:null,figjam:null,slides:null,buzz:null,subscriptionType:null}}let eO=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eR(e){let r=(0,_.md)(j.GO),n=function(e){let r=(0,j.Nn)();return a.useMemo(()=>e?r?(0,v.gB)(eL(r,e,et.Qh.COMMUNITY)):(0,v.Xm)():(0,v.gB)({design:!1,figjam:!1,slides:!1,buzz:!1,subscriptionType:null}),[e,r])}(e);return a.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,buzz:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let a=eL(r.data,e,et.Qh.ORGANIZATION);return eO(a)?(0,v.gB)(a):n},[e,r,n])}function eP(e,r){let n=(0,_.md)((0,j.pD)(r)),i=eR(e);return a.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,buzz:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==i.status)return i;let r=eL(n.data,e,et.Qh.WORKSPACE);return eO(r)?(0,v.gB)(r):i},[e,n,i])}function eD(e,r){let n=(0,_.md)((0,j.Lr)(r)),i=eP(e,r);return a.useMemo(()=>{if(!e||!r)return(0,v.gB)({design:!1,figjam:!1,slides:!1,buzz:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==i.status)return i;let a=eL(n.data,e,et.Qh.TEAM);return eO(a)?(0,v.gB)(a):i},[e,n,i,r])}function ek(e){let r=(0,_.md)(j.zK),n=eR(e);return a.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,buzz:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let a=eL(r.data,e,et.Qh.USER);return eO(a)?(0,v.gB)(a):n},[e,r,n])}let eM=(e,r)=>(0,O.$)(e.key)===r||!!e.source_file_key&&(0,O.$)(e.source_file_key)===r;function eF(){let e=(0,$.q5)(),r=(0,i.d4)(e=>e.library),n=(0,et.He)();return a.useCallback(a=>!!e&&ex(r.defaultPublished,{key:e.key,team_id:e.teamId,editor_type:e.editorType,source_file_key:e.sourceFileKey},a,n),[e,r.defaultPublished,n])}function ex(e,r,n,a){return!(!r||!n||eM(r,n))&&(!!td(e,n)||a.has(n))}function eU(e,r,n,a,i,o){if(n.length)return!0;for(let n of a){let a;let s=i[n];if(s&&(a="library_key"in s?s.library_key:"loaded"===s.status&&s.data.library_key)&&ex(e.defaultPublished,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},a,o))return!0}return!1}let eB=(e,r)=>e.style_type===r.style_type?0:ew.indexOf(e.style_type)<ew.indexOf(r.style_type)?-1:1,eG=(e,r)=>-(0,T.Ez)(e.sort_position||"",r.sort_position||"");function eV(e,r){let n=eB(e,r);return 0===n?eG(e,r):n}function eH(e){e.sort(eG)}function ez(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",a=e.containing_frame||{},i=r.containing_frame||{};return a.pageId!==i.pageId?n(a.pageName)<n(i.pageName)?-1:1:a.nodeId!==i.nodeId?n(a.name)<n(i.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eK(e){let r=[...e];return eH(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,V.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,K.wM)(r)}}let eW=!0;function ej(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let a=e[n],i=r[n];for(let e in a)if(a[e]!==i[e])return!0;for(let e in i)if(!(e in a))return!0}for(let n in r)if(!(n in e))return!0;return!1}function eY(e,r,n,a,i,o,s,l,c,d){let u=Object.create(null),p=0;for(let m in r.forEach(r=>{let c=r.nodeId,m=a[c];o[c]=e1(i[c]),u[c]=e(m,n[c],r,s,l,d);let _=u[c];_.status===z.E8.NEW&&_.type===z.PW.COMPONENT&&(p+=1)}),a)if(!(m in u)){let e=i[m];e&&e.url&&(0,G.qv)(e.url);let r=a[m];if(r.type===z.PW.COMPONENT||r.type===z.PW.STATE_GROUP){let e=(r.type,z.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=e1(i[r]),u[r]=e(a[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:p}}function e$(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==er.V_||!r.mirror?.sceneGraph)return;let n=(0,B.d1)(r),a=n?n.key:"",i=n?.library_key?(0,p.l)(n.library_key):(0,p.l)(""),o=new Set,s=(0,k.im)(r),l={},{newLocal:c,numNewComponents:d}=eY((e,r,n,a,i)=>eJ(e,r,n,a,i,s),r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,l,a,i,o,z.PW.COMPONENT),{newLocal:u}=eY(eZ,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,l,a,i,o,z.PW.STATE_GROUP),{newLocal:_}=eY(eQ,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,l,a,i,o,z.PW.STYLE),{newLocal:h}=eY(e0,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,l,a,i,o,z.PW.MODULE);if(ej(r.library.local.components,c)&&e.dispatch(F.I0({local:c,type:z.PW.COMPONENT})),ej(r.library.local.stateGroups,u)&&e.dispatch(F.I0({local:u,type:z.PW.STATE_GROUP})),ej(r.library.local.styles,_)&&e.dispatch(F.I0({local:_,type:z.PW.STYLE})),ej(r.library.local.modules,h)&&(0,m.k)().dse_module_publish&&e.dispatch(F.I0({local:h,type:z.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,l)&&e.dispatch(x.xp({thumbnails:l})),d>0&&eW&&((0,N.YQ)({id:"Parsed first components"}),eW=!1),o.size>0){let n=r.notifications.filter(e=>e.type===D._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===D._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,S.Bq)(r,o)&&e.dispatch(P.$.dequeue({type:D._.MOVE_COMPONENTS_PROMPT}))}}}let eq="Generating a local library item that is neither in the library nor in the scene graph. Why.",eX=(e,r,n,a,i,o)=>{var s;if(!n){if(r)return{...r,status:z.E8.DELETED,deletedFromSceneGraph:!0};throw Error(eq)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=z.E8.NOT_STAGED;l&&!c?d=z.E8.DELETED:!l&&c?d=z.E8.NEW:l||c||(d=z.E8.NOT_STAGED);let{description:u,description_rt:p}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:p,file_key:a,file_key_source:R.P.LOCAL_FILE,library_key:i,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function eJ(e,r,n,a,i,o){let s={...eX(e,r,n,a,i,z.PW.COMPONENT),type:z.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??d.F7.INVALID,old_key:n?.oldKey||void 0,sort_position:n?.sortPosition??null};if(!r)return s;let l=null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r&&r.content_hash===s.content_hash&&!t5(r.containing_frame,n?.containingFrame,{compareSortPositions:o})&&t4(r.name,n?.name)&&t4(r.description,s.description)&&(!o||t4(r.sort_position,s.sort_position))?s.status=z.E8.CURRENT:s.status=z.E8.CHANGED),s}function eZ(e,r,n,a,i){let o=eX(e,r,n,a,i,z.PW.STATE_GROUP);if(!r){if(!n)throw Error(eq);return{...o,type:z.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:z.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||u.bwI.NONE,componentPropDefError:n?.componentPropDefError||u.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t5(r.containing_frame,n?.containingFrame)&&t4(r.name,n?.name)&&t4(r.description,s.description)?s.status=z.E8.CURRENT:s.status=z.E8.CHANGED),s}function eQ(e,r,n,a,i){let o=eX(e,r,n,a,i,z.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&t4(r.name,n?.name)&&t4(r.description,o.description)?t4(r.sort_position,n?.sortPosition)?o.status=z.E8.CURRENT:(o.status=z.E8.CHANGED,c=!0):o.status=z.E8.CHANGED),n)return{...o,type:z.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:z.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(eq)}function e0(e,r,n,a,i){let o=eX(e,r,n,a,i,z.PW.MODULE);if(!r){if(!n)throw Error(eq);return{...o,type:z.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:z.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t5(r.containing_frame,n?.containingFrame)&&t4(r.name,n?.name)&&t4(r.description,s.description)?s.status=z.E8.CURRENT:s.status=z.E8.CHANGED),s}function e1(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}function e2(e){return`GET_PUBLISHED_COMPONENTS_FOR_${e}`}let e3=new Set;function e8(e){for(let r of e3)e(U.yH({key:r}))}let e6=new Set;function e4(e,r){return e6.has(e)||e6.has(r)}function e5(e){e6.add(e)}function e7(){e6.clear()}let e9=e=>`GET_DEFAULT_LIBRARIES_FOR_${e}`;function te(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let tt=new Set;async function tr(e,r=[],n,a,i,o,s){if(!r.length)return{usedStylesByLibraryKey:{}};let l={};for(let n of r){let r=e.get(n);r&&r.styleKeyForPublish&&0!==u.glU.getNumUsagesOfStyle(r.styleKeyForPublish,!0)&&(l[r.styleKeyForPublish]=n)}let c=Object.keys(l).map(d.n3),m=await Z.M4.fetch(Q._x.UnpublishedStylesQuery({styleKeys:c,orgId:i})),_=f()([...m,...Object.values(n).filter(e=>e.key in l)],e=>e.key),h=new Set(_.map(e=>e.key)),g=c.filter(e=>e&&!h.has((0,d.n3)(e))),E=await Z.M4.fetch(Q.qE.MissingStyleKeyToLibraryKeyQuery({styleKeys:g}));o&&delete E[o.libraryKey];let y=[],b={};for(let e of _){let r=e.library_key;(b[r]??=[]).push(e),a[r]||tt.has(r)||(tt.add(r),y.push(r))}for(let[r,n]of Object.entries(E)){let a=(0,p.l)(r),i=b[a]??=[];for(let r of n){let n=l[r]&&e.get(l[r]);n&&i.push({type:z.PW.STYLE,name:n.name,key:r,thumbnail_url:tn(r,n.styleVersionHash),canvas_url:tn(r,n.styleVersionHash),content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}}return await ta(y,s),{usedStylesByLibraryKey:b}}function tn(e,r){return`/style/${e}/thumbnail?ver=${r}`}async function ta(e,r){if(e.length>0){let a=[];async function n(e){try{let n=await C.Ay.post("/api/files/batch",{library_keys:e});n.data.meta||(0,A.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(M.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,I.$D)(c.e.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let i=e.slice(r,r+200);a.push(n(i))}await Promise.all(a)}}async function ti(e,r,n){if(0===r.length)return[];let{styles:a,files:i}=(await C.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(M.uo({files:i,subscribeToRealtime:!0})),a}function to(e,r=[],n=[],a,i,o,s=!1){let l={},c=r.concat(n),p=ef(a.components),m=ef(a.stateGroups),_=[];for(let r of c){let n=e.get(r);if(!n)continue;let a=n.sourceLibraryKey,o=n.publishID;if(!o||!a)continue;m[a]||p[a]||tt.has(a)||(tt.add(a),_.push(a));let c=n.isStateGroup,h=c?n.sharedStateGroupVersion:n.sharedSymbolVersion,g=c?n.stateGroupKey:n.componentKey,f=(c?m[a]??{}:p[a]??{})[o];if(f?.type===z.PW.COMPONENT){let e=f.containing_frame?.containingStateGroup?.nodeId;if(e){let r=m[a];f=r?.[e],c=!0}}if(f)l[el(f)]=f;else if(c){if(!g||l[g]||!n.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!l[n]}))continue;let a=u.glU.getDefaultStateForLocalStateGroup(r),s=e.get(a),[c,p]=s?[s.size.x,s.size.y]:[0,0];l[g]={type:z.PW.STATE_GROUP,name:n.name,library_key:n.sourceLibraryKey,key:g,thumbnail_url:`/state_group/${g}/thumbnail?ver=${h}&fv=${i}`,canvas_url:`/state_group/${g}/canvas?ver=${h}&fv=${i}`,node_id:o||"",isLocal:!1,version:h||d.Rf.INVALID,userFacingVersion:(0,d.Rf)(n.userFacingVersion),containing_frame:{},min_node_width:p,min_node_height:c,default_state_key:""}}else{if(!g||l[g]||n.isState&&!s||null===i)continue;l[g]={type:z.PW.COMPONENT,name:n.name,library_key:n.sourceLibraryKey,component_key:g,thumbnail_url:`/component/${g}/thumbnail?ver=${h}&fv=${i}`,canvas_url:`/component/${g}/canvas?ver=${h}&fv=${i}`,node_id:o||"",content_hash:n.sharedSymbolVersion||void 0,userFacingVersion:(0,d.F7)(n.userFacingVersion),isLocal:!1,min_node_height:n.size.x,min_node_width:n.size.y}}}return ta(_,o),Object.values(l)}function ts(e,r){return new Set(to(e.mirror.sceneGraph,(0,ee.C9)(e),(0,ee.jf)(e),e.library.publishedByLibraryKey,e.fileVersion,r).map(e=>el(e)))}let tl=(e,r,n,a,i,o)=>to(e,r,n,a,i,o,!0).reduce((e,r)=>(r.type===z.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function tc(e){let r=(0,i.wA)(),{library:n,sceneGraph:o,fileVersion:s,subscribedComponents:l,subscribedStateGroups:c,subscribedComponentsOnCurrentPage:d,subscribedStateGroupsOnCurrentPage:u}=(0,b.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,ee.C9)(e),subscribedStateGroups:(0,ee.jf)(e),subscribedComponentsOnCurrentPage:(0,ee.J5)(e),subscribedStateGroupsOnCurrentPage:(0,ee.EY)(e)})),[p,m]="current"===e?[d,u]:[l,c];return a.useMemo(()=>tl(o,p,m,n.publishedByLibraryKey,s,r),[o,p,m,n.publishedByLibraryKey,s,r])}function td(e,r){let n=e.libraryKeys.includes(r),a=_.zl.get(W.e3).has(r);return!!n||!!a}let tu=(0,h.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let a=n[e];r[a.key]=a}return r});function tp(e,r,n){let a=tu(n)[e];if(a)return{kind:z.AT.LOCAL,value:a};let i=n.used__LIVEGRAPH.styles[e];return i?.status==="loaded"?{kind:z.AT.SUBSCRIBED_WITH_LIBRARY,value:i.data}:r&&r.length?{kind:z.AT.SUBSCRIBED_WITHOUT_LIBRARY,value:{key:e,node_id:r[0]}}:void 0}function tm(e,r){if(!e)return"";if(e.kind!==z.AT.SUBSCRIBED_WITHOUT_LIBRARY)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}function t_(e){let r={};for(let n in e){let a=e[n];a.containing_frame?.containingStateGroup&&(r[n]={...a})}return r}function th(e,r,n,a){let i=r?a[r]:null;if(!i||!e)return null;let o=i[e];return o?o[n]:null}function tg(e){let r=e.type===z.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==u.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===u.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===u.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===u.uXg.UNUSED_DEF_ERROR)||r)}function tf(e){return e.variableSetError!==u.HG$.NONE}let tE=()=>{},ty=new Promise(e=>{tE=e}),tb=()=>{},tv=new Promise(e=>{tb=e}),tT=()=>{},tI=new Promise(e=>{tT=e}),tS=e=>({callback:tT,promise:tI,resetPromise:tL,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tA=()=>{},tw=new Promise(e=>{tA=e}),tC=new Promise(e=>{});function tN(){tE(),tb(),tA(),ty=new Promise(e=>{tE=e}),tv=new Promise(e=>{tb=e}),tw=new Promise(e=>{tA=e}),tL()}function tL(){tT(),tI=new Promise(e=>{tT=e})}function tO(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tR(e,r,n){return e.sort((e,a)=>{var i;let o=(i=n?.groupByFolders,e.team_id!==a.team_id?tO(e,a,r):i&&e.file.folder_id!==a.file.folder_id?e.folder_name<a.folder_name?-1:1:(e.library_file_name||"").localeCompare(a.library_file_name||""));return n?.isDescending?o:-o})}function tP(e,r,n,a){return e.sort((e,i)=>{var o,s,l,c,d;let u=(o=e,s=i,l=r,c=n,d=a?.groupByFolders,o.team_id!==s.team_id?o.team_id===l?-1:s.team_id===l?1:(o.team_name||"").localeCompare(s.team_name||""):d&&o.folder_id!==s.folder_id?(c[o.folder_id]?.path??"")<(c[s.folder_id]?.path??"")?-1:1:(o.library_name||"").localeCompare(s.library_name||""));return a?.isDescending?u:-u})}function tD(e,r,n){let a;let i=e.node_id,o=r[i]||{},l=o.url||null;switch(e.type){case z.PW.COMPONENT:case z.PW.STYLE:a=e.content_hash;break;case z.PW.VARIABLE:case z.PW.VARIABLE_SET:case z.PW.STATE_GROUP:case z.PW.MODULE:case z.PW.RESPONSIVE_SET:case z.PW.CODE_COMPONENT:case z.PW.MANAGED_STRING:a=e.version;break;default:(0,s.xb)(e)}return(n||o.content_hash!==a||!(0,G.OM)(l))&&(e.type===z.PW.COMPONENT||e.type===z.PW.STATE_GROUP||e.type===z.PW.MODULE||e.type===z.PW.RESPONSIVE_SET||e.type===z.PW.CODE_COMPONENT?l=(0,G.r2)(i):e.type===z.PW.STYLE?l=(0,H.fP)(e)?(0,G.jh)():(0,G.aV)(i,e.style_type):e.type===z.PW.VARIABLE||e.type===z.PW.VARIABLE_SET||e.type===z.PW.MANAGED_STRING?l=(0,G.jh)():(0,s.xb)(e)),l}function tk({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:a}){let i=r>0?(0,L.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,s=e>0?(0,L.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,l=n>0?(0,L.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,c=0===n&&a>0?(0,L.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:a}):null,d=(0,o.WI)([s,i,l,c]);return 0===d.length?(0,L.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,w.Yx)(d,"unit")}let tM=e=>e!==z.E8.DELETED&&e!==z.E8.NOT_STAGED;function tF(e,r,n,a){let i=r[e];if(!i)return null;let o=eE(n).find(e=>e.type===z.PW.COMPONENT?e.component_key===i:e.key===i),s="another file";if(!o)return s;let l=a[o.library_key];return l?l.name:s}function tU(e,r,n){let a=e.reduce((n,a)=>(r[a]?n[a]=r[a]:(0,s.KF)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,i=r[e.node_id];if(!n||!i)continue;let o=!!r[n];a[n]||!o?a[e.node_id]=i:a[e.node_id]&&delete a[e.node_id]}return{moveRemappings:a,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!a[e]))}}function tB(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState||e.isCodeComponent}function tG(e){return z.YJ.includes(e.type)}function tV(e){return e.isLocal?u.Egt.getAssetKeyForPublish(e.node_id):el(e)}function tH(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function tz(e){return!!tH(e)}function tK(e,r,n,a){let i;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(o.isSubscribedAsset){let e=o.componentKey??o.stateGroupKey;e&&(i=a?.[e])}else i=n?.[o.guid];return i}}function tW(e,r){function n(e){return e.toLowerCase()}let a=n(e.name),i=n(r.name);return a<i?-1:a>i?1:0}function tj(e){switch(e){case z.jg.THIRTY_DAYS:return(0,L.t)("design_systems.libraries_modal.30_days");case z.jg.SIXTY_DAYS:return(0,L.t)("design_systems.libraries_modal.60_days");case z.jg.NINETY_DAYS:return(0,L.t)("design_systems.libraries_modal.90_days");case z.jg.YEAR:return(0,L.t)("design_systems.libraries_modal.year");default:(0,s.xb)(e)}}function tY(e){return!!((0,m.k)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function t$(e){return!!((0,m.k)().dse_module_publish&&"MODULE"===e.type)}function tq(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides||null!==e.buzz)&&(!!e.design||!!e.figjam||!!e.slides||!!e.buzz)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed||!!e.buzz&&!r.buzzSubscribed)}function tX(e,r){return e?(r||(r=tQ(y.D.getState().library.publishedByLibraryKey.components)),r[e]?.library_key??null):null}function tJ(e,r){return e?(r||(r=tQ(y.D.getState().library.publishedByLibraryKey.stateGroups)),r[e]?.library_key??null):null}function tZ(e){let r={};return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(a=>{Object.keys(e[n][a]).forEach(i=>{r[a]=r[a]||{},r[a][i]=e[n][a][i]})})}),r}function tQ(e){let r={};return eb(e,(e,n,a,i)=>{r[el(i)]=i}),r}function t0(e){let r=(0,i.wA)(),n=a.useMemo(()=>(0,l.s)(()=>{e&&e.value.node_id&&r(x.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);a.useEffect(n)}function t1(e){switch(e.type){case z.PW.CODE_COMPONENT:case z.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?`${e.sourceLibraryKey}:${e.assetId}`:`${e.library_key}:${e.node_id}`;default:return`${e.library_key}:${e.node_id}`}}function t2(e){return(0,X.ag)(e.openFile,e.currentUserOrgId)}function t3(){let e=(0,X.LH)(),r=(0,i.d4)(e=>e.orgById);return(0,q.td)(e,r)}function t8(e){let r=(0,et.je)();return a.useMemo(()=>{if(e&&"loaded"===r.status)return r.data?.find(r=>r.libraryKey===e)?.id},[e,r.data,r.status])}function t6(e){return e===J.pk.ORG||e===J.pk.WORKSPACE}function t4(e,r){return!e&&!r||e===r}function t5(e,r,n){let a=e?e.nodeId:void 0,i=e?e.name:void 0,o=e?e.backgroundColor:void 0,s=e?e.pageId:void 0,l=e?e.sortPosition:void 0,c=r?r.nodeId:void 0,d=r?r.name:void 0,u=r?r.backgroundColor:void 0,p=r?r.pageId:void 0,m=r?r.sortPosition:void 0,_=!n?.compareSortPositions||l===m;return(a!==c||i!==d||o!==u||!_||!!s||!p)&&!(null==e&&null==r||!(null==e||null==r||!t4(e.nodeId,r.nodeId)||!t4(e.name,r.name)||!t4(e.backgroundColor,r.backgroundColor)||!t4(e.pageName,r.pageName)||!t4(e.pageId,r.pageId)||n?.compareSortPositions&&!t4(e.sortPosition,r.sortPosition))&&function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!t4(e[n],r[n]))return!1;return!0}(e.containingStateGroup,r.containingStateGroup))}function t7(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}},689347:(e,r,n)=>{n.d(r,{B0:()=>E,BG:()=>h,Og:()=>_,PS:()=>g,Sv:()=>v,UQ:()=>p,eB:()=>y,eu:()=>m,ko:()=>f,u2:()=>b});var a=n(382902);n(946678);var i=n(989232),o=n(879263),s=n(227276),l=n(720722),c=n(168852),d=n(937629),u=n(221344);let p=e=>e.library.assetsPanelSearch;function m(e){return e.type===c.I.ALL||e.type===c.I.LOCAL||e.type===c.I.FILE||e.type===c.I.SITE_KIT}async function _(e,r,n,a,o,s,l,p){let m=E(),_=await (0,u.KK)(e,r,n??"",a??"",o,s,l,p),h=await (0,d.Ci)(!0),g=(0,u.AG)([],_,c.I.FILE,h),{elapsedTime:f,backgrounded:y}=m();return i.definedAnalyticsHandler.trackDefinedEvent("asset_search.get_search_results_for_file_time",{elapsedTime:f,searchSessionId:a??"",backgrounded:y}),{normalizedSearchResults:g,unsubscribedSearchResults:[]}}async function h(e,r,n,a,o,s,l,c,p,m,_,f,y,b,v,T=!1,I){let S=E(),A=(0,u.dm)(m,e),w=new Set(_);void 0!==v&&w.add(v);let C=(0,u.ik)(e,n,a,o,s,l,w,c??"",p,f,y,I),N=(0,u.hH)(e,w,r,p,T,c??""),L=(0,d.Ci)(!0),[O,{subscribedSearchResults:R,unsubscribedSearchResults:P},{communitySearchResults:D,unsubscribedCommunitySearchResults:k},M]=await Promise.all([A,C,N,L]),{elapsedTime:F,backgrounded:x}=S();i.definedAnalyticsHandler.trackDefinedEvent("asset_search.get_search_results_for_all_promise_time",{elapsedTime:F,searchSessionId:c??"",backgrounded:x});let U=E(),B=g(O,R,P,D,k,e,b??!1,M),{elapsedTime:G,backgrounded:V}=U();return i.definedAnalyticsHandler.trackDefinedEvent("asset_search.combine_fuse_and_server_results_time",{elapsedTime:G,searchSessionId:c??"",backgrounded:V}),B}function g(e,r,n,a,i,o,s,l){let d=e,p=r;s?(p=(0,u.Yl)(r,e,a||[]),d=e.filter(e=>!e.server_score&&!e.ai_score&&!e.lexical_score||(e.score=e.lexical_score||e.ai_score||e.server_score||e.score,p.push(e),!1))):d=(0,u.Yl)(e,r,a||[]);let m=(0,u.AG)(d,p,c.I.ALL,l),_=(0,u.Yl)(a||[],m),h=(0,u.Yl)(n,d),g=(0,u.Yl)(i||[],h);return{normalizedSearchResults:[...m,..._],unsubscribedSearchResults:[...h,...g]}}function f(e,r,n){return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}function E(){let e=new o.rw;return()=>{let r;return e.stop(e=>{r=e},{skipIfIdle:!1}),{elapsedTime:r,backgrounded:e.backgrounded||e.offlined}}}async function y(e){let{results:r,subscribedLibraryKeys:n,sessionId:a,queryId:o,entryPoint:l,queryType:c,aiResultsEnabled:d,productType:u,libraryKey:p,fileKey:m,query:_,searchType:h}=e,g=(await (0,s.w0)("max_asset_search_results_to_log")).get("count",20);r.slice(0,g).forEach((e,r)=>{let s=e.library_key,g=f(s,p,n),E=e.server_score||e.ai_score||e.lexical_score?"server":"fuse";i.definedAnalyticsHandler.trackDefinedEvent("asset_search.top_k_results",{sessionId:a,queryId:o,entryPoint:l,fileKey:m,position:r,aiResultsEnabled:d,assetKey:b(e),assetLibraryKey:s,libraryType:g,assetType:e.type,queryType:c,isInSubscribedLibrary:!!s&&n.has(s),productType:u,query:_,source:E,score:"score"in e?e.score:void 0,scoreFuse:e.fuse_score??void 0,scoreServer:e.server_score??void 0,searchType:h})})}function b(e){if((0,l.Do)(e))return"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key;switch(e.type){case l.PW.COMPONENT:return e.component_key;case l.PW.STATE_GROUP:case l.PW.MODULE:return e.key}}let v=(0,a.eU)(0)},221344:(e,r,n)=>{n.d(r,{AG:()=>B,Al:()=>V,Cc:()=>N,K4:()=>L,KK:()=>G,UR:()=>w,Yl:()=>U,cu:()=>D,d5:()=>M,dm:()=>x,f$:()=>z,hH:()=>k,ik:()=>C,lR:()=>F});var a=n(562027),i=n(382902),o=n(946678),s=n.n(o),l=n(241899),c=n.n(l),d=n(989232),u=n(476254),p=n(879263),m=n(227276),_=n(271326),h=n(360430),g=n(587745),f=n(277454),E=n(160769),y=n(318147),b=n(677334),v=n(693246),T=n(720722),I=n(208624),S=n(168852),A=n(901175);let w=40;async function C(e,r,n,a,i,o,s,l,c,u,m,_){let h=new p.rw,g=L(await N(e,r,n,a,i,s,l,u,m,_),a,new Set(Object.keys(o)),s,c);return h.stop(e=>{d.definedAnalyticsHandler.trackDefinedEvent("asset_search.fetch_all_server_side_search_results_time",{elapsedTime:e,searchSessionId:l,backgrounded:h.backgrounded||h.offlined})}),g}async function N(e,r,n,i,o,s,l,c,p,m){try{let d=i?.editorType===y._Y.WHITEBOARD,_=s.size<w,h=o?.view==="fullscreen"&&o?.fileKey||i?.key||"",g=i?.libraryKey?(0,a.l)(i?.libraryKey):null,f=new Set(s),{usedProductComponentsOnPage:E,usedProductComponentsFromUnsubscribedLibrary:b}=await D(u.D.getState(),s,g),v={query:e,openFileKey:h,fv:r||0,orgId:n||void 0,excludeAIResults:d,subscribedLibraryKeys:_?Array.from(f):void 0,searchSessionId:l,isUi3:!0,productType:i?.editorType?.toString(),queryId:c,selectedItems:m,usedProductComponents:E,usedProductComponentsFromUnsubscribedLibrary:b,entryPoint:p,tier:V()};return(await I.$W.postComponents(v)).data.meta}catch(r){return d.definedAnalyticsHandler.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),[]}}function L(e,r,n,a,i){let o=r&&((0,g.Kz)(r)?r.sourceFileKey:""),l=e.filter(e=>!(0,h.Oo)(e,o)&&n.has(e.library_key)).map(e=>({...e,server_score:e.score})),[c,d]=s()(l,e=>a.has(e.library_key)||r?.libraryKey===e.library_key||i.has((0,f.Av)(e)));return{subscribedSearchResults:c,unsubscribedSearchResults:d}}function O(e,r,n){let a=e/2,i=Math.min(r.length,a),o=Math.min(n.length,a);return[...r.slice(0,i),...n.slice(0,o),...r.slice(i),...n.slice(o)].slice(0,e)}function R(e){let r=e.mirror.sceneGraph;return{components:e.library.subscribedSymbolsOnCurrentPage.filter(e=>{let n=r.get(e.nodeId);return!n?.containingStateGroupId}).map(e=>({key:e.key,type:T.PW.COMPONENT})),stateGroups:e.library.subscribedStateGroupsOnCurrentPage.map(e=>({key:e.key,type:T.PW.STATE_GROUP}))}}function P(e,r){let n=e=>new Set(e.map(e=>e.key)),a=(e,r)=>e.filter(e=>!r.has(e.key)),i=n(e),o=r.filter(e=>i.has(e.key)),s=n(o);return{itemsOverlapping:o,itemsOnPageFromSubscribedLib:a(e,s),itemsNotOnPageFromUnsubscribedLib:a(r,s)}}async function D(e,r,n){let{components:a,stateGroups:i}=R(e),{components:o,stateGroups:s}=function(e,r,n){let a=(0,f.ah)(n.library.publishedByLibraryKey.components),i=(0,f.ah)(n.library.publishedByLibraryKey.stateGroups),o=n.mirror.sceneGraph;return{components:n.library.subscribedSymbolsFromLoadedPages.filter(n=>{let i=o.get(n.nodeId),s=(0,f.uN)(n.key,a);return!i?.containingStateGroupId&&s&&!e.has(s)&&s!==r}).map(e=>({key:e.key,type:T.PW.COMPONENT})),stateGroups:n.library.subscribedStateGroupsFromLoadedPages.map(e=>({key:e.key,type:T.PW.STATE_GROUP})).filter(n=>{let a=(0,f.f0)(n.key,i);return a&&!e.has(a)&&a!==r})}}(r,n,e),{itemsOverlapping:l,itemsOnPageFromSubscribedLib:c,itemsNotOnPageFromUnsubscribedLib:d}=P(a,o),{itemsOverlapping:u,itemsOnPageFromSubscribedLib:p,itemsNotOnPageFromUnsubscribedLib:_}=P(i,s),h=(await (0,m.w0)("max_product_components_to_log")).get("count",1e3),g=(await (0,m.w0)("percent_used_product_components_on_page")).get("percent",.5),E=O(h,l,u),y=h-E.length,b=O(Math.max(Math.floor(g*y),y-d.length-_.length),c,p),v=O(h-(E=E.concat(b)).length,d,_);return{usedProductComponentsOnPage:E,usedProductComponentsFromUnsubscribedLibrary:v}}async function k(e,r,n,a,i=!1,o){let s=new p.rw,l=F(await M(e,n,i),r,a);return s.stop(e=>{d.definedAnalyticsHandler.trackDefinedEvent("asset_search.fetch_community_component_search_results_time",{elapsedTime:e,backgrounded:s.backgrounded||s.offlined,searchSessionId:o})}),l}async function M(e,r,n=!1){if(!r)return[];try{if(!i.zl.get(_.JB))return[];let{results:r}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)([T.PW.COMPONENT,T.PW.STATE_GROUP]).join(","),includeVisualAssets:!!n||void 0})).data.meta;return r}catch(r){return d.definedAnalyticsHandler.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function F(e,r,n){let[a,i]=s()(e,function(e){return!!n.has((0,f.Av)(e))||r.has(e.library_key)});return{communitySearchResults:a,unsubscribedCommunitySearchResults:i}}function x(e,r){let n=new p.rw;return Promise.all([(0,A.Z)(),e.search(r)]).then(([e,r])=>(n.stop(r=>{e||d.definedAnalyticsHandler.trackDefinedEvent("asset_search.fuse_search_results_time",{elapsedTime:r,backgrounded:n.backgrounded||n.offlined})}),r.map(e=>({...e.item,score:e.score,fuse_score:e.score}))))}function U(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,f.Av)(e)]=e})});let a=[];return e.forEach(e=>{let r=(0,f.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score),e.server_score&&(n[r].server_score=e.server_score),e.fuse_score&&(n[r].fuse_score=e.fuse_score)):a.push(e)}),a}function B(e,r,n,a){return 0===r.length?e:n!==S.I.FILE||a?[...e.map(e=>{let r=e.server_score||1-e.fuse_score;return{...e,score:r}}),...r].sort((e,r)=>r.score-e.score):r}async function G(e,r,n,a,i,o,s,l){try{let{components:c,stateGroups:d}=R(u.D.getState()),p=(await (0,m.w0)("max_product_components_to_log")).get("count",1e3),_={query:e,libraryKey:r,openFileKey:n,searchSessionId:a,isUi3:!0,productType:i,queryId:o,selectedItems:l,usedProductComponents:O(p,c,d),entryPoint:s,tier:V()};return(await I.$W.postComponentsFromFile(_)).data.meta}catch(n){return d.definedAnalyticsHandler.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,libraryKey:r}),[]}}function V(){let e=i.zl.get((0,v.KK)(!0));return e.data?.tier}b.M4.Query({fetch:async({query:e,libraryId:r,assetTypes:n})=>{let{results:a}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)(n).join(","),hubFileIds:[r]}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return a},output:({data:e})=>e.map(E.aV),enabled:({query:e})=>null!=e&&e.trim().length>0});var H=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(H||{});function z(e){return e?c()(e,["key","libraryKey","fileRepoId","sourceFileKey","editorType","name","_name","parentOrgId"]):null}},34780:(e,r,n)=>{n.d(r,{u5:()=>o,vQ:()=>l});var a=n(907031);n(967688),n(860145);var i=n(850768);let o="originTab",s=[i.J7.BILLING];function l(e){let r=(0,a.K)(i.J7,e);if(r)return s.includes(r)?r:void 0}},637603:(e,r,n)=>{n.d(r,{EO:()=>a}),n(848318),n(301168),n(430385),n(918777),n(314979),n(967688),n(376132),n(683703),n(180294),n(738105);let a=e=>`LICENSE_GROUP_GET_${e}`},318147:(e,r,n)=>{n.d(r,{$n:()=>eP,Ag:()=>el,D:()=>f,E9:()=>b,El:()=>X,FE:()=>c,GC:()=>i,GP:()=>k,G_:()=>x,Go:()=>eM,Il:()=>p,K:()=>er,KB:()=>eE,Lc:()=>u,Mr:()=>a,NW:()=>d,OL:()=>ec,P4:()=>eO,P5:()=>eS,PQ:()=>U,PW:()=>o,Pn:()=>e_,Pu:()=>eh,QK:()=>ef,Qh:()=>ew,Rc:()=>g,Sm:()=>S,U0:()=>R,UX:()=>es,Uu:()=>ee,XI:()=>eF,Xn:()=>eo,ZP:()=>y,Zf:()=>eR,_5:()=>et,_D:()=>Z,_Y:()=>L,bQ:()=>ep,bU:()=>q,bk:()=>O,bp:()=>eB,dQ:()=>ea,eD:()=>eN,h4:()=>eu,h9:()=>h,hM:()=>en,hh:()=>eG,iS:()=>ex,iX:()=>ei,kI:()=>eC,kU:()=>eA,o6:()=>C,pk:()=>M,sA:()=>E,sC:()=>eL,sm:()=>ey,tK:()=>N,ud:()=>l,un:()=>v,vt:()=>eb,wl:()=>em,xw:()=>s,y4:()=>eU,zI:()=>$});var a=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(a||{}),i=(e=>(e.TEAM="team",e.COMMUNITY="community",e))(i||{}),o=(e=>(e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_COMPONENT="code_component",e))(o||{}),s=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.CONTENT="content",e))(l||{}),c=(e=>(e.STANDALONE="standalone",e.BUNDLE="bundle",e.ADD_ON="add_on",e))(c||{}),d=(e=>(e.MONTH="month",e.YEAR="year",e))(d||{}),u=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(u||{}),p=(e=>(e.ORG="Org",e))(p||{}),m=(e=>(e.PENDING="Pending",e.ACTIVE="Active",e.EXPIRED="Expired",e.DEACTIVATED="Deactivated",e))(m||{}),_=(e=>(e.PLAN="plan",e.PRODUCT="product",e))(_||{}),h=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(h||{}),g=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(g||{}),f=(e=>(e.MOTION="motion",e.MOUSE="mouse",e.SCROLLING="scrolling",e))(f||{}),E=(e=>(e.LIGHTBOX="lightbox",e.SPIN="spin",e.TYPEWRITER="typewriter",e.SCRAMBLE="scramble",e.DRAG="drag",e.MOUSEPARALLAX="mouseParallax",e))(E||{}),y=(e=>(e.FRAME="FRAME",e.IMAGE="IMAGE",e.TEXT="TEXT",e.GROUP="GROUP",e.ROUNDED_RECTANGLE="ROUNDED_RECTANGLE",e.INSTANCE="INSTANCE",e.SYMBOL="SYMBOL",e.VECTOR="VECTOR",e.STAR="STAR",e.LINE="LINE",e.ELLIPSE="ELLIPSE",e.REGULAR_POLYGON="REGULAR_POLYGON",e))(y||{}),b=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(b||{}),v=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(v||{}),T=(e=>(e.PENDING="pending",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.REFUNDED="refunded",e.TRIALING="trialing",e.SUBSCRIPTION_PAYMENT_FAILED="subscription_payment_failed",e.INVOICE_FINALIZATION_FAILED="invoice_finalization_failed",e.DISPUTED="disputed",e))(T||{}),I=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(I||{}),S=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(S||{}),A=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))(A||{}),w=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(w||{}),C=(e=>(e.STATUS_CHANGE="status_change",e))(C||{}),N=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(N||{}),L=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e.FIGMAKE="figmake",e))(L||{}),O=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(O||{}),R=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(R||{}),P=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(P||{}),D=(e=>(e.ALLOWED="allowed",e.MEMBERS_ONLY="members_only",e.BANNED="banned",e))(D||{}),k=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(k||{}),M=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(M||{}),F=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(F||{}),x=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e.FIGMAKE="figmake",e.COOPER="cooper",e))(x||{}),U=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(U||{}),B=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(B||{}),G=(e=>(e.INCOMPLETE="incomplete",e.BUNDLE_UPLOADED="bundle_uploaded",e.READY_FOR_INGESTION="ready_for_ingestion",e.COMPLETE="complete",e.FAILED="failed",e))(G||{}),V=(e=>(e.DESIGN="design",e.SCREENSHOT="screenshot",e))(V||{}),H=(e=>(e.PENDING="pending",e.NEEDS_REVIEW="needs_review",e.REVIEW_REJECTED="review_rejected",e.REVIEW_ACCEPTED="review_accepted",e.AUTO_ACCEPTED="auto_accepted",e))(H||{}),z=(e=>(e.NOT_STARTED="not_started",e.MATCH="match",e.MISMATCH="mismatch",e))(z||{}),K=(e=>(e.APPROVED="approved",e.REJECTED="rejected",e.UNREVIEWED="unreviewed",e))(K||{}),W=(e=>(e.NOT_STARTED="not_started",e.AWAITING_BUILDS="awaiting_builds",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CLOSED="closed",e.FAILED="failed",e))(W||{}),j=(e=>(e.BUILD_FAILED="build_failed",e.DIFF_IMAGE_FAILED="diff_image_failed",e.JNDIFF_NOT_FOUND="jndiff_not_found",e.MISSING_VARIANTS="missing_variants",e.S3_ACCESS_ERROR="s3_access_error",e.TIMED_OUT="timed_out",e.TIMED_OUT_WAITING_FOR_BUILDS="timed_out_waiting_for_builds",e.UNKNOWN="unknown",e))(j||{}),Y=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))(Y||{}),$=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))($||{}),q=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(q||{}),X=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(X||{}),J=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(J||{}),Z=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(Z||{}),Q=(e=>(e.AUTO="AUTO",e.GOOD="GOOD",e.DELINQUENT="DELINQUENT",e.SUSPENDED="SUSPENDED",e.DEACTIVATED="DEACTIVATED",e.INCOMPLETE="INCOMPLETE",e))(Q||{}),ee=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e.SEAT_MANAGEMENT_AT_SELF_SERVE_CHECKOUT="seat_management_at_self_serve_checkout",e.DEV_MODE="dev_mode",e.SUPPORT_DRIVEN_ORG_MIGRATION="support_driven_org_migration",e.SUPPORT_DRIVEN_ORG_MERGE="support_driven_org_merge",e.SUPPORT_DRIVEN_TEAM_ADDITION="support_driven_team_addition",e.PUBLISH_SITES="publish_sites",e.CODE_CHAT_LIMIT="code_chat_limit",e.RESTRICTED_DRAFT_SHARED_EMAIL="restricted_draft_shared_email",e.IN_EDITOR_RESTRICTED_DRAFT="in_editor_restricted_draft",e.DOWNGRADE_EMAIL="downgrade_email",e.LIFECYCLE_REUPGRADE_EMAIL="lifecycle_reupgrade_email",e))(ee||{}),et=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(et||{}),er=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(er||{}),en=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(en||{}),ea=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(ea||{}),ei=(e=>(e.ORG="Org",e.TEAM="Team",e))(ei||{}),eo=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(eo||{}),es=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.SUSPENDED_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="suspended_monthly_sub_editor_count_exceeded",e.DEACTIVATED="deactivated",e))(es||{}),el=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(el||{}),ec=(e=>(e.ORG="organization",e.TEAM="team",e))(ec||{}),ed=(e=>(e.ASSET_TRANSFER="asset_transfer",e.AUTO_UPGRADE="auto_upgrade",e.BACKFILL="backfill",e.COMMENT_MENTION="comment_mention",e.CONNECTED_PROJECT_INVITE="connected_project_invite",e.CREATE_TEAM="create_team",e.DOMAIN_CAPTURE="domain_capture",e.DOMAIN_INSIGHTS="domain_insights",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.FIGMA_ADMIN="figma_admin",e.FILE_MOVE="file_move",e.FILE_RESTORE="file_restore",e.FILE_VIEW="file_view",e.FOLDER_MOVE="folder_move",e.INVITE_REDEEM="invite_redeem",e.JOIN_LINK_REDEEM="join_link_redeem",e.ORG_DOWNGRADE="org_downgrade",e.ORG_MERGE="org_merge",e.ORG_MIGRATION="org_migration",e.PERSONAL_DRAFTS_MIGRATION="personal_drafts_migration",e.PLAN_INVITE="plan_invite",e.PLAN_JOIN_REQUEST_APPROVAL="plan_join_request_approval",e.PROJECT_EXTRACTION="project_extraction",e.REQUEST_UPGRADE="request_upgrade",e.RESOURCE_MOVE="resource_move",e.ROLE_CREATE="role_create",e.SAML_SSO="saml_sso",e.TEAM_ADDITION="team_addition",e.TEAM_EXTRACTION="team_extraction",e.TEAM_TRANSFER="team_transfer",e.TEST="test",e.TEST_MATERIALS="test_materials",e.USERS_ORG_MOVE="users_org_move",e.VOICE_CALL="voice_call",e))(ed||{}),eu=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(eu||{}),ep=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(ep||{}),em=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(em||{}),e_=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(e_||{}),eh=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(eh||{}),eg=(e=>(e.ACTIVE="active",e.DEACTIVATED="deactivated",e.EXPIRED="expired",e))(eg||{}),ef=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e.PLAN_DENY_CAN_CONNECT_IF_AT_CONNECTION_LIMIT="plan_deny_can_connect_if_at_connection_limit",e.FOLDER_CREATE_FILE_DENY_FOR_TRASHED_FOLDER="folder_create_file_deny_for_trashed_folder",e.FOLDER_CREATE_FILE_DENY_PRODUCT_DISABLED_BY_ORG="folder_create_file_deny_product_disabled_by_org",e.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS="folder_create_file_deny_unlicensed_users",e.FOLDER_CREATE_SITE_FILE_DENY_K12_ORG="folder_create_site_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_PLAN_NOT_ENABLED="folder_create_figmake_file_deny_plan_not_enabled",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_K12_ORG="folder_create_figmake_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STARTER_TEAM="folder_create_figmake_file_deny_starter_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STUDENT_TEAM="folder_create_figmake_file_deny_student_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_AI_DISABLED="folder_create_figmake_file_deny_ai_disabled",e.FOLDER_EDIT_DENY_EXTERNAL_RESTRICTED_USERS="folder_edit_deny_external_restricted_users",e.FOLDER_VIEW_DENY_ANOTHER_USERS_DRAFTS="folder_view_deny_another_users_drafts",e.FOLDER_DENY_DELETED="folder_deny_deleted",e.FOLDER_DENY_ORG_MFA_RESTRICTED_GUESTS="folder_deny_org_mfa_restricted_guests",e.FOLDER_DENY_UNVALIDATED_USER_EMAIL="folder_deny_unvalidated_user_email",e.FILE_DENY_EDIT_SITE_FILE_K12_ORG="file_deny_edit_site_file_k12_org",e.FILE_DENY_EDIT_FIGMAKE_FILE_K12_ORG="file_deny_edit_figmake_file_k12_org",e.FILE_DENY_EDIT_SITE_FILE_SITES_DISABLED="file_deny_edit_site_file_sites_disabled",e.FILE_DENY_EDIT_FIGMAKE_FILE_FIGMAKE_DISABLED="file_deny_edit_figmake_file_figmake_disabled",e.FILE_DENY_EDIT_COOPER_FILE_COOPER_DISABLED="file_deny_edit_cooper_file_cooper_disabled",e.FILE_DENY_EDIT_FIGMAKE_FILE_STARTER="file_deny_edit_figmake_file_starter",e.FILE_DENY_EDIT_FIGMAKE_FILE_STUDENT="file_deny_edit_figmake_file_student",e.FILE_DENY_EDIT_SITE_FILE_STARTER="file_deny_edit_site_file_starter",e.FILE_DENY_EDIT_SITE_FILE_STUDENT="file_deny_edit_site_file_student",e.FILE_DENY_PUBLISH_SITE_LACKS_LICENSE="file_deny_publish_site_lacks_license",e.FILE_DENY_EDIT_NIL_PLAN_USER="file_deny_edit_nil_plan_user",e.FILE_DENY_EDIT_SITE_FILE_DRAFTS_TO_MOVE="file_deny_edit_site_file_drafts_to_move",e.FILE_DENY_PUBLISH_SITE_ORG_DISABLED_PUBLISHING="file_deny_publish_site_org_disabled_publishing",e.FILE_DENY_PUBLISH_SITE_USER_RESTRICTED="file_deny_publish_site_user_restricted",e.FILE_DENY_PUBLISH_STARTER_TEAM="file_deny_publish_starter_team",e.FILE_DENY_EDIT_NIL_PLAN_USER_VR_BY_DEFAULT="file_deny_edit_nil_plan_user_vr_by_default",e.FILE_DENY_EDIT_DRAFTS_OWNER_RESTRICTED="file_deny_edit_drafts_owner_restricted",e.FILE_DENY_EDIT_RESTRICTED_PLAN_USER="file_deny_edit_restricted_plan_user",e.FILE_DENY_DELETED_FILE="file_deny_deleted_file",e.FILE_DENY_IN_DELETED_FOLDER="file_deny_in_deleted_folder",e.FILE_DENY_EDIT_ARCHIVED_FILE="file_deny_edit_archived_file",e.FILE_DENY_EDIT_TRASHED_BRANCH="file_deny_edit_trashed_branch",e.FILE_DENY_EDIT_EXTERNAL_RESTRICTED_USER="file_deny_edit_external_restricted_user",e.FILE_DENY_EDIT_EXPIRED_EDU_GRACE_PERIOD="file_deny_edit_expired_edu_grace_period",e.FILE_DENY_EDIT_LOCKED_TEAM="file_deny_edit_locked_team",e.FILE_DENY_EDIT_SLIDES_DISABLED_ORG="file_deny_edit_slides_disabled_org",e.FILE_DENY_ORG_MFA_RESTRICTED_GUEST="file_deny_org_mfa_restricted_guest",e.FILE_PROTO_DENY_ORG_MFA_RESTRICTED_GUEST="file_proto_deny_org_mfa_restricted_guest",e.FILE_DENY_SITES_NON_SITES_USER="file_deny_sites_non_sites_user",e.FILE_DENY_FIGMAKE_NON_FIGMAKE_USER="file_deny_figmake_non_figmake_user",e.FILE_DENY_SANCTIONED_TEAM_ACCESS="file_deny_sanctioned_team_access",e.FILE_DENY_UNVALIDATED_USER_EMAIL="file_deny_unvalidated_user_email",e.FILE_DENY_FIGMA_AI_USAGE_NOT_ALLOWED="file_deny_figma_ai_usage_not_allowed",e.FILE_DENY_FIGMA_AI_FOR_NO_TEAM_OR_ORG="file_deny_figma_ai_for_no_team_or_org",e.FILE_DENY_AI_FOR_AI_DISABLED_TEAM_OR_ORG="file_deny_ai_for_ai_disabled_team_or_org",e.FILE_DENY_AI_IN_K12_ORG="file_deny_ai_in_k12_org",e.FILE_DENY_FIGMA_AI_FOR_NON_PAID_PLAN_USER_V2="file_deny_figma_ai_for_non_paid_plan_user_v2",e.FILE_DENY_FIGMA_AI_FOR_NON_PAID_PLAN_USER="file_deny_figma_ai_for_non_paid_plan_user",e.FILE_DENY_FIGMAKE_AI_USAGE_NOT_ALLOWED="file_deny_figmake_ai_usage_not_allowed",e))(ef||{}),eE=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_3P_M10N_CHECK="pending_3p_m10n_check",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(eE||{}),ey=(e=>(e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.REVOKED="revoked",e))(ey||{}),eb=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(eb||{}),ev=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.VIEW="view",e.CONTENT="content",e))(ev||{}),eT=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(eT||{}),eI=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(eI||{}),eS=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(eS||{}),eA=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(eA||{}),ew=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(ew||{}),eC=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(eC||{}),eN=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(eN||{}),eL=(e=>(e.VIEW="view",e.EDIT="edit",e))(eL||{}),eO=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e.GLOBAL_FILES_LIMITED="global_files_limited",e.GLOBAL_FILES_LIMITED_LEGACY="global_files_limited_legacy",e.GLOBAL_FILES_MUST_CHECK="global_files_must_check",e))(eO||{}),eR=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(eR||{}),eP=(e=>(e.RESOURCE_MOVED_TO_TEAM="resource_moved_to_team",e.RESOURCE_RESTORED_FROM_TRASH="resource_restored_from_trash",e.JOIN_LINK_REDEEM="join_link_redeem",e.SELF_UPGRADE="self_upgrade",e.CHECKOUT="checkout",e.DEV_MODE="dev_mode",e.TEAM_DOWNGRADED_TO_STARTER="team_downgraded_to_starter",e.DEVELOPER_BUNDLE_OPT_IN="developer_bundle_opt_in",e.ADMIN_UPGRADE="admin_upgrade",e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.CREATE_FILE="create_file",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_BUTTON="edit_button",e.ACTIVE_EDIT_ACTION="active_edit_action",e.DEFAULT_PAID_STATUS="default_paid_status",e.DRAFTS_SHARE="drafts_share",e.RESOURCE_MOVED_FROM_PLAN_DRAFTS="resource_moved_from_plan_drafts",e.CONVERTED_FROM_LICENSE_TYPE="converted_from_license_type",e.RESOURCE_MOVE="resource_move",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.FIGMA_ADMIN="figma_admin",e.NUX_SEAT_CHOICE="nux_seat_choice",e.PUBLISH_SITES="publish_sites",e.CODE_CHAT_LIMIT="code_chat_limit",e.RESTRICTED_DRAFT_SHARED_EMAIL="restricted_draft_shared_email",e.IN_EDITOR_RESTRICTED_DRAFT="in_editor_restricted_draft",e.DOWNGRADE_EMAIL="downgrade_email",e.LIFECYCLE_REUPGRADE_EMAIL="lifecycle_reupgrade_email",e.EDIT_LINK_EDIT_ACTION="edit_link_edit_action",e.DEPART_TEAM="depart_team",e.CREATE_TEAM="create_team",e.RUN_PLUGIN="run_plugin",e.TEAM_ADMIN_UPGRADE="team_admin_upgrade",e.FJ_GA_UPGRADE="fj_ga_upgrade",e.EDIT_ACTION="edit_action",e))(eP||{}),eD=(e=>(e.SEATS_MODEL_BILLING_2025="seats_model_billing_2025",e))(eD||{}),ek=(e=>(e.FLAGGED="flagged",e.MIGRATING="migrating",e.PENDING_AUTO_VALIDATION="pending_auto_validation",e))(ek||{}),eM=(e=>(e.FOLDER="folder",e))(eM||{}),eF=(e=>(e.AUTO_APPROVED="auto_approved",e.AUTO_APPROVED_AVAILABLE_SEAT="auto_approved_available_seat",e.AUTO_APPROVED_EDU="auto_approved_edu",e.ADMIN_INITIATED="admin_initiated",e.ADMIN_SELF_UPGRADE="admin_self_upgrade",e.FIGMA_ADMIN="figma_admin",e.MANUAL_APPROVED="manual_approved",e.MANUAL_APPROVED_NO_AVAILABLE_SEAT="manual_approved_no_available_seat",e.SCIM="scim",e))(eF||{}),ex=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(ex||{}),eU=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e.SITE_TEMPLATE="site_template",e.COOPER_TEMPLATE_FILE="cooper_template_file",e.FIGMAKE_TEMPLATE="figmake_template",e))(eU||{}),eB=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(eB||{}),eG=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(eG||{})},55116:(e,r,n)=>{n.d(r,{$cq:()=>tl,$kt:()=>ed,AXx:()=>tp,AbW:()=>eZ,Acj:()=>D,Aqu:()=>rH,BB3:()=>e7,BVX:()=>O,BXv:()=>g,B_E:()=>rC,BbB:()=>ty,Bu2:()=>tt,CfA:()=>P,CrP:()=>B,DSh:()=>rP,DtB:()=>rR,DuV:()=>rT,EW:()=>r7,EZU:()=>tO,Ej3:()=>T,EmG:()=>rc,F$0:()=>ey,FBc:()=>t9,FHz:()=>ei,FWW:()=>re,FqP:()=>tY,Fr3:()=>e8,G0Y:()=>c,G9Z:()=>nr,GEO:()=>en,GgD:()=>eP,GyZ:()=>rY,H1b:()=>r$,H2R:()=>ee,H5I:()=>rW,H6B:()=>tn,HSg:()=>t$,HdA:()=>eN,Hhe:()=>rm,I2e:()=>e1,ISl:()=>nn,IUX:()=>S,IiJ:()=>tL,Ipg:()=>tb,J2w:()=>ew,JJY:()=>t1,JM$:()=>rE,JRW:()=>tV,JS_:()=>r4,J_J:()=>em,JgS:()=>tH,JuA:()=>tW,JvY:()=>ex,Jwp:()=>tJ,KLE:()=>L,KiY:()=>tj,L1I:()=>eM,Lbw:()=>tc,Lew:()=>tf,Lom:()=>r5,Lqr:()=>rG,M5e:()=>eD,M7X:()=>F,M9I:()=>p,M9q:()=>tB,N63:()=>rg,N8H:()=>rF,NI1:()=>t2,NSA:()=>eu,NqM:()=>rK,Nvo:()=>er,OCJ:()=>eS,OiG:()=>Z,Opb:()=>tq,P0r:()=>U,P4:()=>K,P8Q:()=>eQ,PG0:()=>eY,PRB:()=>w,QD8:()=>ef,QEv:()=>rZ,QrR:()=>v,Qxm:()=>tF,Ra2:()=>r1,RcX:()=>tk,Ruc:()=>eT,SK$:()=>rD,SLN:()=>C,SMQ:()=>ep,SWF:()=>tQ,Sq1:()=>e9,Std:()=>tD,Stx:()=>ez,T0:()=>rh,TKM:()=>z,TNJ:()=>rU,Tej:()=>r0,Thl:()=>e3,UAQ:()=>ry,Uhv:()=>N,UpR:()=>et,V15:()=>rl,VTr:()=>tz,Vny:()=>rI,WIM:()=>te,WKb:()=>rd,WND:()=>X,X$D:()=>rw,X9s:()=>ns,XKS:()=>rx,XRH:()=>s,XRI:()=>eH,Xw7:()=>ro,Y9I:()=>tS,YN5:()=>r8,YOu:()=>eL,Yfd:()=>rp,Yh6:()=>W,Yrz:()=>ek,ZBn:()=>ru,ZzU:()=>eA,_iU:()=>b,a8q:()=>ej,aNI:()=>eG,aON:()=>ni,aRw:()=>e5,abL:()=>y,apG:()=>e6,bEy:()=>_,bUF:()=>rL,bUn:()=>nl,bel:()=>rV,bsh:()=>r9,c2_:()=>rA,cBJ:()=>eV,cQi:()=>eC,cfd:()=>ra,cmY:()=>ne,d0w:()=>eB,dA6:()=>eF,dDF:()=>e_,dTR:()=>eO,dq_:()=>t0,dxg:()=>r2,eHy:()=>k,eSI:()=>t4,ehp:()=>tw,f19:()=>tg,ftA:()=>x,fy7:()=>tm,g0U:()=>rv,gB$:()=>es,gDr:()=>h,gk5:()=>tA,gkf:()=>ev,grH:()=>tT,h3E:()=>tZ,hCR:()=>rJ,hbX:()=>rN,hj8:()=>I,i1D:()=>na,iAs:()=>to,iJD:()=>j,iL6:()=>rS,iY3:()=>eR,ib2:()=>ec,imP:()=>r3,jXq:()=>tv,jl4:()=>tM,jmg:()=>J,k$m:()=>e2,kJx:()=>E,kQI:()=>rB,kS$:()=>u,k_1:()=>tK,kdQ:()=>V,khT:()=>rj,lrh:()=>nt,ly7:()=>e4,m0h:()=>e$,mCn:()=>eJ,n8_:()=>eE,n8j:()=>eq,nD6:()=>m,nKj:()=>$,nXJ:()=>tN,nlH:()=>eg,nn0:()=>eW,o27:()=>ts,o6H:()=>t3,o8f:()=>tG,o9k:()=>tE,oGE:()=>t8,oe:()=>tI,ohc:()=>ti,op7:()=>ri,oro:()=>M,pFu:()=>t6,qBf:()=>Y,qNg:()=>eX,qRE:()=>eo,qYc:()=>rt,qZS:()=>eK,qjT:()=>ea,qn8:()=>rM,rRb:()=>rf,rwE:()=>rs,s0Z:()=>f,s5A:()=>tP,s5h:()=>tR,s5n:()=>tr,sBU:()=>th,sBg:()=>tX,sMZ:()=>rQ,sMs:()=>eb,saW:()=>no,sdp:()=>rr,sn$:()=>e0,t8B:()=>rX,tIY:()=>t_,tWm:()=>q,toW:()=>eh,u6n:()=>td,uXs:()=>ta,vE:()=>t5,vgO:()=>Q,vnC:()=>rn,vsj:()=>R,vtM:()=>tU,vvS:()=>r6,w2r:()=>tC,wVD:()=>rb,wZi:()=>el,wj_:()=>G,wtK:()=>d,x8f:()=>t7,xSN:()=>A,yFE:()=>rO,yQw:()=>rk,yU5:()=>rz,y_L:()=>rq,yf7:()=>eU,zCd:()=>eI,zkh:()=>tu,zqW:()=>H,zz3:()=>r_});var a=n(196008),i=n(157949);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_data:null,_args:null};o.add(s);let l=null;return Object.assign(r=>({view:s,args:r,name:e,[a.rP]:void 0}),{...s,Query:(...e)=>(l||(l=(0,i.gc)(s)),l(...e)),_name:e})}let c=l("AccessibleFoldersV2",["orgId"],"bf7255beb6b2478c5e4f0d5cf1e59aa499fc1bfba8ca167c2003c22440a47196"),d=l("AddWorkspacePinnedFileView",["fileKey"],"1648424b511f682dd4aabf774146e1196655949cd62859f5c5da7224e1223c4b"),u=l("AiMeterUsageView",["fileKey"],"16b519f662c94181768d088122b0be44bf41f8f53166865f7f1e7f58f47923b6"),p=l("AllowlistPluginsSectionView",["orgId"],"7d506cb057ad0fa8520a6c6e297bf695a3692a9535f7e0a731f54b811b447f95"),m=l("AppliedColorPaletteForFile",["fileKey"],"aaa92b09ffebd39a703272c21740dd39c2746197f5096a2bf3f34a7cac2248b8"),_=l("ApprovedLibrariesForOrgViewV2",["orgId"],"b99af2707ec541171a162036f37dcb936f78e1728a831387199ad95b318791bf"),h=l("ApprovedLibrariesForWorkspaceView",["workspaceId"],"6552920e298f34a3b7322962990db225ff8394d53dccd8869dc669db60e61a4f"),g=l("BillingTrialForResource",["resourceId","resourceType"],"c1b16e47b9f97b468aea7d2d9e08f2d7bf3eb2c96fc07ad23eeff4edd863bf9b"),f=l("BlockConnectedFileMove",["fileKey"],"61ac2d85ca067a4dbe8ccf75e1f283fed01bcff1472224f9e642594e8aab2dc5"),E=l("BlockingPrototypeData",["fileKey"],"fedae2cad9ffe55336c1e09eb72284ab3c85678cc2ab99de6da9586ce7dc4082"),y=l("BlockingUserState",[],"184bc954b089e6661c75bb61d9bb7d6372d95511c54dc39cf8f3916d1d662a3b"),b=l("BranchOpenMergeRequest",["branchFileKey"],"c2174fee093ba302328b8714eea177e4785b1c912bc4061f1bf7365881618c38"),v=l("BranchingPermissionsView",["fileKey"],"424517598c7e2bd21713283f9f3a996835d00e4ec546e7f2cd865bf23d9aa9b1"),T=l("BranchingSourceViewSidebarView",["branchKey"],"03b751e2218409e16aebb13fe34d39e168bfc9951127ae7ed2a185d8e45a2af8"),I=l("ChurnFrictionPersonalizedModalView",["teamId"],"627361bec516982145ee94690b9a205923bd4da435171058e208bd9ab2dd8512"),S=l("CodeComponentsInLibrary",["libraryKey"],"258f8813d8cdded557d697c726502c91a8d9955ad2c7290a618054cd4c978b2f"),A=l("CollectionFieldSchemaView",["id"],"cdb95e8e6419879277256af99cf990a59ceffe6cad545a525a41c9f1d499f162"),w=l("CollectionItemByStableIdCollectionIdView",["collectionId","stableId"],"f389ba4591d76e30f842da4bacb497ad72c3f045a2b38c19a7aefc6861806b9b"),C=l("CollectionItemsView",["collectionId"],"81afcf6fcb3e89e74d91692e1028c933a3a57b88a3bdd44b1afd068963c860b6"),N=l("CollectionV2View",["id"],"870bcc4f3f24be9c527bd3bb1e056dbccec634d3a5c1f62f185bb1f39777cda9"),L=l("CommunityHubLikeForProfile",["hubFileId","pluginId","profileId"],"e7b1cd676e4b60ddadf01ff132eebb269291a7b440e3ac7858121a1b3aba1da3"),O=l("CommunityHubLikeForProfileFromResourceId",["profileId","resourceId"],"84e136e8449de50a856db49dcfcba37629e123d58526c18ad9278dbc7ceb80bf"),R=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"8af41b316a39c6d2ff9df8aff357573be011a7b2827309a3cfd13b3aedc3d808"),P=l("CommunityLibraryModules",["hubFileId"],"15600f764dfaa35830ada094b58ff721b3ffbc641e5d0a8e5b3c00d9599f6fa5"),D=l("CommunityLibraryStyleData",["hubFileId"],"9126099cf5d26969a32cfef82df8fcab973b8a9844d3d44fe99a737dbaa7c2f7"),k=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"15bdde10e3ca23e5c46db41e419d0f56cecc1e50ccd321e8fac1aadf66c32e1d"),M=l("CommunityPayment",["monetizedResourceMetadataId"],"2af323ea3d2f477e42cc0994f1fb5bf25d4be6283d3ec9e623185585bdd0739a"),F=l("CommunityPaymentsForRealtimeShim",[],"1366f230cc0e4dc015521524b4e198a4e90067b7df851b64f55f08f95d626bea"),x=l("ComponentAttribution",["key"],"f80a434469a191e0972d3e99a9f043ad2d636b682615da7830409888dc855eb5"),U=l("ComponentUpdatesForFile",["fileKey"],"a7b635da26c6922b68cf714cb1369ec7e857c5a7ab5d5b676f6c9a81fc091472"),B=l("ComponentUpdatesForProject",["projectId"],"ed33fbb793d4d23373cd67dfb85a234b4f02920fcf50c4b9c1986fc2efbd2eda"),G=l("ComponentUpdatesForTeam",["teamId"],"22894ad7259b61458db5d18928ec7285b19fd95f4b8cea57c1d2fc7eff0b42f2"),V=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"b512c23324f0e30f360588f5d9d9e574725652e889c997a1879a3579c0582efd"),H=l("CurrentOrgBillingPeriodView",["orgId"],"1ec44e66973bcbdb76317dc27260228c1145f41c4aab9df36ea51705d137048d"),z=l("CurrentUserAssignedWorkspaceView",["orgId"],"b71bef59abd6e5ce766b977623eae73de44191f62f2e22773ea36ac7595b98b0"),K=l("CurrentUserInStudentPlusPlanView",[],"d67f174300205a6ac054ba3515219b3234f15aab289dbdb8a420772a783d5f5a"),W=l("CurrentUserIsMfaRequiredByMembershipOrgView",[],"fa4f6b62631cdd8a2ebc1a5f7a8b0753f1a26bcd3275072f499da4a66088619c"),j=l("CurrentWorkspaceView",["fileKey"],"71a3db6bb64d2e94bb914475a2e1d9ba4ed58b4ef9614578ceced5cb56a7c984"),Y=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"f3ad94fa48f21d527e1582d2ecaa8fdcb16218d5470a3a879f1537bb503be24a"),$=l("DesktopTabPreviewView",["fileKey"],"b82e7077411f6d78fc4e35772099052a66cb4cf9b0466242d3aed1b3fd5f0a95"),q=l("DestinationProjectsForTeam",["teamId"],"040e0cec5137b357b00d4ced6e0f0c37b8d07ef67b71074ad0a456b2813f5e31"),X=l("DevModeActivity",["fileKey","nodeId"],"4508fd51c4ab35b7ba1af876074ffb329f97b9029945693cee01999eb18d50e9"),J=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),Z=l("EditButtonView",["fileKey","orgId"],"0acfc5ed0504be3edbf6133baf2dfd0702d6f54dca0dba671d57bbf9a2b15172"),Q=l("EditWorkspacePinnedFileView",["pinnedFileId"],"6bc3739df88324461f68a551d6edce80ac9e22e24878ac3ed60a7bece4a25b5a"),ee=l("EduGracePeriodsForUser",["updatedAtTimestamp"],"41e2b08f041b6550406b58126ff133269214f733a89ee88949b271d2263b272c"),et=l("EduOffboardingData",[],"142e22b55e058172ed60177c7ba0d8053b7efa4a50d5eaf11ee7645b90a95707"),er=l("ExpOneClickAskToEditOrgView",["orgId"],"02043ac9d20fd9b6648bef5f298b6b43d16edf4e1617b169b95a4f30b765eeb7"),en=l("ExpOneClickAskToEditTeamView",["teamId"],"508bb97fdbe04a23441d7d9a0bb8822065011f2283cd2a300ffbd2e86a764e39"),ea=l("FavoritesByResourceId",["orgId","resourceId","resourceType","teamId"],"0b6f0dbf15ea615cd3775d0c56928976467582a2765448d589ae7958ba181bda"),ei=l("FeedPostWithDetails",["publicUuid"],"f4013e80d2857291d46921e8c88932f0d4f27a1e6389f2e8083c1c34795a6181"),eo=l("FeedPostsByFileKey",["fileKey"],"8bc74ea3835b692b9c1c3e38939d0dd881eb82ad310ef246d3991fe7dff062c7"),es=l("FileBrowserRecentFilesByEditorTypeView",["_editorTypeRaw"],"45df0c93a7a8eff68ee206606a738174d751ee8935cf127ab52437af72c20f9a"),el=l("FileBrowserRecentFilesView",[],"c208f76985131ea17ddf269f307bd15fd088aaa3061d535778d0e8443b84b82b"),ec=l("FileBrowserSearchBarData",["currentOrgId"],"386767aad56b079fccc0c7edb22ffc192d73383bd92f429f783bb0ae5e2b96e5"),ed=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"19d214f51e03d143fd5b1a0458dd6a38c56a73955797721d1f6283ec9939de43"),eu=l("FileByKey",["fileKey"],"d16b839eba0f66cebf73d78af169b40272b02632ae9cc7815bc0eccfcb9f6d65"),ep=l("FileByKeyForRealtimeShim",["fileKey"],"53ebde4038e264d556cefcf87dfb40cc22638f475a4c3b2aec5b7149af1c705f"),em=l("FileCanAccessFullCodeConnect",["key"],"41c5bc7b8be10035dd94f8cd4924eee89bd051d28d7976f5a701a884fe62fdf8"),e_=l("FileCanEdit",["key"],"b04d2d758c0466ba911bd854f2a3cf2cba96e5ecd63b21b49abcba7e332ec7cf"),eh=l("FileCanEditIgnorePaidStatus",["key"],"b05a14a50b77bf080f07834c638058a51eefb9340a8705b1cac6aae829d338b4"),eg=l("FileCanExport",["key"],"bfc11ef5eb57054a87491d32aba1e486d8eb2b80fd92665fede018268a8852b2"),ef=l("FileCanManage",["key"],"ddac42bcf2b619019a1b2ede42683431f14c2e8e547e0345f17836f23d9476d4"),eE=l("FileCanMoveWithReasons",["key"],"1c136da38f2f3fe275ee561bf876d49ffeec3b5d821592a267260383acecccb1"),ey=l("FileCanUseDevModeDemoFile",["key"],"417320997fd8c2fee10e5d9c1bca216318d005f7ba9bd1306b93d64ee9e356e4"),eb=l("FileCanView",["key"],"eb764fff478028cae97ce090c2f2a043a11faf790a8f3b7beed459d64fc5c46d"),ev=l("FileCanvasMentionsByFileKey",["fileKey"],"ed54487efd2aa9904cbf2d2a230d05ae378d7096ead02feff14ac56fff411325"),eT=l("FileCmsCollectionView",["fileKey"],"99c07e4a84f7e1b38cf956c3eb32ea8e68378f761e35977f12bbe831eff428fe"),eI=l("FileCreationPermissionsView",["projectId"],"bab136e74701d811a755a63212d6331e8dffc5c882713697df670af77540db05"),eS=l("FileEditRequestExistence",["fileKey"],"a2552309577a6eec06c892686a7114d6f89a5fa6536d34acf8d34cf7b974e98a"),eA=l("FileExpirationView",["figFileKey"],"16656fca5adcba0390c0807246f043832d76095caa298c06491d04d04370aa5e"),ew=l("FileFeaturesEnabled",["fileKey"],"db9786619f57dc1275d40f8e8bb8ba7cc5949ee638cf82b33f220dafc5ae8c84"),eC=l("FileImport",["projectId"],"9370a0475a7b3130e1110d0e4e6f62d3305bee5eec813370d44b9f5a6a088958"),eN=l("FileIsEligibleForDevModeTrial",["key"],"eb035a0ea4135def4bb735be5b7ff9fee6ae3d78562fb2586e4dc92e19c3295b"),eL=l("FileLastPublishedAt",["fileKey"],"fb3f1b1dc0675f16f3fd81fd964222e35f382749992eeff84844ef7a5ba8ba23"),eO=l("FileManagePermission",["fileKey"],"bbab13dd40bc19e13743a41ef4df7cdd2d47607306c3b264af2fddcc0e11896a"),eR=l("FileNameViewDropdown",["branchFileKey"],"74f10ce256ea971b44a2b52a0e91a83e81237f0d8b25d1988e3fd40f7586a955"),eP=l("FileNameViewRepoFiles",["repoId"],"dc4a198b26c874f8130eb7bb6b60b2259acfb9f641889c35f3f454999b52f024"),eD=l("FileOperationsView",["fileKey"],"99d5dedc93d78d029e3d692ffe0f44a9bbc59b82cfae8e28821c9104703c6bb2"),ek=l("FileOrgExtensionSettingsView",["fileKey"],"1f2b84679c40111142139aa3e82706f73a7e6a45744e7d836f369a4fa7f17b44"),eM=l("FilePermissionsV2",["currentOrgId","fileKey","projectId","repoId","teamId"],"c628c22342952ea2c789946addabf4b7f952c10347673cced3f90383d2a70df1"),eF=l("FilePresenterData",["fileKey"],"470fa033ddd80fa19065da92271204f8314333694c1db87564a6f0263f53923e"),ex=l("FileRecentViewers",["fileKey"],"aeeba8763efdd5378bcf96ffbfe87ab899b1dfcf090a44a1e22b4b19ff3c854d"),eU=l("FileSearchResult",["projectId"],"5772523f6ac484d88b7d02f902bf5fe4419b87a01cec0dfe14d0b25a8718341a"),eB=l("FileShareModalCurrentUserPermissions",["fileKey"],"443777d3f37243938bf64e68bf58f0921fd15611be43d424f7a307214b5480b2"),eG=l("FileShareModalPermissionsV3",["currentOrgId","fileKey","projectId","repoId","teamId"],"049155e79e73f0c9600796c4470e559e4baf547ea3224c6fa7508ee18b8fed81"),eV=l("FileTemplateView",["fileKey"],"146ee61bd4a40b687fb9c0febf6da905505811152f395496c0b44786b934e1ff"),eH=l("FileTilePermissions",["fileKey"],"2fefe9264a9505df3ad0fffe9742ce8eec28281a3672f3307d4ac1a75a4f2e60"),ez=l("FileVersions",["fileKey"],"739fa521439429631331a57338cd52ff45df79099d4b59813ea98a5f5c1dd432"),eK=l("FileWithCommentsAndReactions",["fileKey"],"bddcdba11682a3cbfa03433edaa9711893957defc7f08d5ead9ca161ff42d122"),eW=l("FileWithRoleRequests",["fileKey"],"26d73587af3510bb8ed470c144f7779a9a5db1adccba7557081b2194a5fb98b1"),ej=l("FileWorkshopMode",["fileKey"],"03c41ae834e3e855f331489a3c84dbd9044466e7b6cfc8b6788aa392d071c138"),eY=l("FileWorkspacePinActionsView",["fileKey","orgId"],"9188a5ea64a9fddeffe6285eaf56f69e83fb7eaeaf11aaa1f7723c8b168c3c6e"),e$=l("FilesForProject",["projectId","updatedAtTimestamp"],"5393b37f7f5a55147c1c83772183588f98d8a1ec3cec6362943fddf61f0b62b4"),eq=l("FilesForRepo",["repoId"],"47a0e3d5788c32ffa0e18cba0c78fe0a1acb81bac8318192b0f587819996bb75"),eX=l("FilesForTeam",["teamId","updatedAtTimestamp"],"0eccc6e66e9a8ee21fad843769074faef72a67f70fc0de4182258dee335b0cf1"),eJ=l("FolderCreation",["teamId"],"c68e4d7a68c273b060e2aefcf6682266ce2e93ffeb56ee9d1af9a73e3cdc0e06"),eZ=l("FolderMoveModalView",["currentOrgId","currentTeamId","folderId"],"200c62f39f7583bedd1838a62c7d3d1a5d9232fc160b2e9ad21a99d1fb361416"),eQ=l("FolderPermissions",["currentOrgId","projectId"],"e4fb5a722f74978672471da062b32fff006cf7a9cc54bb2961285d37e517d5b2"),e0=l("FolderSearchResult",["teamId"],"2ebd0a8b8ccbbda8101245583d2c6808ed415073ff2f2efd4cc588eaa5d1e661"),e1=l("FolderUntrashedFilesAndSitesView",["projectId"],"37cc0bb168e2e322b64c4b447b0ae5546d2da92fc2c50c2637acb7c67c19c1d3"),e2=l("FontFileForOrgView",["orgId","updatedAtTimestamp"],"324ae763a501526c1700b40ccdac7431ac0a3a728e795442be4bfe44c30714ef"),e3=l("FontFileForTeamView",["teamId","updatedAtTimestamp"],"19811dd196b88bcb9b6594f86574daec62978a0818202c4952fc16e43c04a57c"),e8=l("FrecencyHistoryView",[],"2961d39c324c66b95366f3004eeee4c65b4a7481ba2d71b18f15bab0f92babf5"),e6=l("GraftingUpdateSloData",["id"],"7a8d81b59a88816b12349b489d3be848ed5086caff723551cd96df9cacb94f25"),e4=l("HasConnectedPlanUserInOrg",["license_type","org_id"],"809d53701a4ae0afd100fb21083239f1d7cc8a66eb233c4ae9d1d0dd025c2e99"),e5=l("IdpUserView",["orgId"],"7d558ee5071f305ac1aeace49be936f851b664f139ed89c20b31a7b4fd35b119"),e7=l("InstalledPlugins",["orgId"],"d08b1664274831a1d3585f41872f7e3b79edd6c7cb26436fb64378fe13cf6796"),e9=l("LibrariesViewFilterStatesView",["orgId"],"93cdae6354ee31395f409657e97c5db5c5e941d67b493834271fe6726204a71e"),te=l("LibraryAssetByKey",["key","libraryKey"],"16dee0521ee0a5d9f118a7f64b8158fb7a2417e977acf0c441781c79dc6e543c"),tt=l("LibraryAssetDataOfType",["assetType","libraryKey"],"752b71c55ab8cbb528f2ad90b687c1980397473cd5dbfd024de43daa89218d2e"),tr=l("LibraryData",["fileKey"],"8bd770c5f53bade491da075b65bca329b4f6b606d849550271173872e70dd1ee"),tn=l("LibraryDataByLibraryKey",["libraryKey"],"61f3f46709ff63e6f4c709593aead57397eec5fccd7f5ff586f6cdf5255e81cf"),ta=l("LibraryFileSelect",["projectId"],"ce06f52487dabce0499dc85b49d35bbaeefb680ec4a2c3ea2fd9db24b944d238"),ti=l("LibraryIsBranch",["libraryKey"],"49202d792e43e53e3d3be4834398ac95b02d0d1a13f346c57eacedbca3c0d795"),to=l("LibraryKeyToFileLink",["libraryKey"],"95b3597d27c5a6b3ab57244de132a746e408077e5d6d6e1a9b3c971d9cfb8263"),ts=l("LibraryMetadataByLibraryKey",["libraryKey"],"8ada83185ffdf305fd1f22bdf0b70e424f55a055cf190c529813872ac3730c81"),tl=l("LibraryModalAssetsDataByLibraryKey",["libraryKey"],"4b41e2f75b830192033182890e437ba24c3b3357fab6d2adbaa60114eb5b57bf"),tc=l("LibraryModalVariablesDataByLibraryKey",["libraryKey"],"489927ce9df6a48744198997c759cca9f7177a0201c390263c2e3d0bdc9c36a9"),td=l("LibraryModuleData",["fileKey"],"6f2843c922060ea508ebb896d256553378bcc9030328602a4f998986c9972c7d"),tu=l("LibraryModuleDataByLibraryKey",["libraryKey"],"ac2718282db663b8d94f2323ef7a3d187161524fe1a07d54c4147bc5f93ec660"),tp=l("LibraryOrgSubscriptions",["orgId"],"e8a8b9f49bc896911b17dafbb5ab9fd8f5b200c8a3fc1cc30614388a89f4135c"),tm=l("LibraryPresetSubscriptionsV2",["group"],"af14c174276af4821193e594cf09b1bbf3180b7dc973882894dbae9e26b715c9"),t_=l("LibraryStyleData",["fileKey"],"5c9b205351d9c6f5ebef3460cd59d7fe0d44698ccdd1e342b27095cc5241b197"),th=l("LibrarySubscriptionsForTeam",["teamId"],"c6b2ec81a5ede5ca031fbfdbc29604f3ea3603d893a4a4bab0ed2e6ccc260aa9"),tg=l("LibraryTeamSubscriptions",[],"f647d2f095fbe42e00fe4f963a58c299975f872d853c44546096051fd66affe0"),tf=l("LibraryUserSubscriptions",[],"23d403f44764cb8f80f0121922e092af3be50a772b7f090f82b1bb3937dc595c"),tE=l("LibraryVariableCollectionData",["fileKey"],"f593f1299a1fe69e02b4dca8ce4d9ee1e6dba9118809807ecf2d0f8e81d6bb81"),ty=l("LibraryVariableCollectionDataByLibraryKey",["libraryKey"],"9dc013731eb5e06ef29c9d6d0691fa1a73f598e0c60427f58cbd5687861e1389"),tb=l("LibraryVariableCollectionDataByLibraryKeyWithVariables",["libraryKey"],"43ef6a053258f1755768c8d8a90375251813ef93fb4615e68a07ff8a189b43c0"),tv=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"0af4bf54116c08efa3b7a00f807055212c296a75de5e329fa397a53eec4745d3"),tT=l("MergeStatusRepoFiles",["repoId"],"92697a2007529c1a87aedf80c2d8ced0366b6e9be6e2230dd681cd5a218bbcb5"),tI=l("ModifyPlanUserSeatModalView",["planType","targetPlanUserId","targetUserId"],"22bcccf122e1ecc7c47eaeb1a8aaf48456ec2231263203c5c47208a9e5b48b49"),tS=l("MoveFileCurrentProject",["projectId"],"037c6e951738e02a939b840cec60ea7cc3685f4599f0440c0a9653c0f2c5f650"),tA=l("MoveFileDestination",["projectId"],"78ff972dd5fa200e3f2e1617f858461c74d42a7b043c3bc2860f404605be3913"),tw=l("OpenEditorFileData",["fileKey"],"d04b5caf48cfce31f37da2c9e1ef89f641cfeed9cb4d2b3efb22e552291ec29a"),tC=l("OrgAdminUserView",["firstPageSize","orgId","queryParams","refetchToken"],"85aecd1bc72c956607f27a7d5579e0ddd8395f9d26ffd7fe53bbb8a73d24da65"),tN=l("OrgByIdForPlanUserView",["orgId"],"4630249a0f26a58baee385969284d74a7dcb24d7c3b5baeff2f3d41dd627c79b"),tL=l("OrgByIdForPlanView",["orgId"],"bf8ae26840051f2aa35efea88f451bc3e10d67f192bd50a4aaed1eef82faf3ad"),tO=l("OrgByIdForRealtimeShim",["orgId"],"0d6dcc336201134307c58470666d00ac8e5421bb99779dfb6d4925e3418ebbeb"),tR=l("OrgHasWorkspacesView",["orgId"],"43335cefae937cdc351a1915ae3445b9d664f4c053e3d51b5405cc16f5002398"),tP=l("OrgInviteModalView",["workspaceId"],"416a0c0f59819b140dce25242e8c895875e680f788461372bb432da386acd7a1"),tD=l("OrgJoinRequestExistence",["orgId"],"fa785d914fb48bfdb4817e34b521c9ae08652b74e05d0338cc3247ebc5a0f15d"),tk=l("OrgSharedSettingView",["orgId"],"e81f7a5e165ae19607d5e878c139ccc8fe49628852f95bc1eace4e56e253cdcc"),tM=l("OrgTeamView",["extraTeamIds","firstPageSize","orgId","queryParams"],"798d4065934220f5a7beb7be23ed76736824cf8f08ea35b29488cd294e1aa77f"),tF=l("OrgTeamsInAdminView",["extraTeamIds","firstPageSize","orgId","queryParams"],"661abad8851d0481805a7d157187e5bc0aba9c36c014b3e407b25fa812880044"),tU=l("OrgUserDraftFolder",["orgId"],"656b5eee5c96afd84ef4d8f0c7d45ed32056453f6893edfe661c7c7bf5f9e828"),tB=l("OrgUserIsMfaRestrictedView",["orgId"],"5464d61e3db24d16e6104b9dc85732fa9bbe7742bd0bbfa8866c6ab396eadb35"),tG=l("OrgUsersForRealtimeShim",[],"2d72c3a6c32f02eb171be4dffae693253d98c53d4d1e642929ddb0918fa4bc9d"),tV=l("PendingConfirmedRenewalSeatCountsView",["billingInterval","planParentId","planParentType"],"ab531cfe4acce15986329d6a320d0e0c5bc6d5daaeccfb75e62558d070c81e4c"),tH=l("PersistentUserNotificationBellData",[],"88a32875f096628dca6878388b8b210fbb36c1664f60444a71b468f536dea7f2"),tz=l("PlanCanConnectView",["planParentId","planType"],"12011d3ffdd3c984a3c00bdd951d06cccc8ed1e583db96b9e91774aae2891685"),tK=l("Plugin",["orgId","pluginId"],"73119d76931a7b88b2a223f38e4f3a206d845bf98908ad282e3f3ca3731f0750"),tW=l("PluginPreferencesView",["targetOrgId","targetUserId"],"046a257f73aa854a4878ea1e0f21b7f35e00853c75d0d850d0607f37a55e8027"),tj=l("PluginRequests",["orgId"],"f51331df46a2598769b1334a7bb1b20bb7141ec6ef6907ea282052898764fc45"),tY=l("PluginSecurityFormResponse",["pluginId"],"37483618df3083a7448e1d3a000e4bf0a58736833bd5e277b74bf5206298a404"),t$=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"1f108b4f6d91abc335a2c3fef816441d1e1683977ba256b5ac38120121ba0cbd"),tq=l("PreloadCodeConnectLk",["nodes","openFileKey"],"525a01a800f8091e4f9ccea1d904f7b0da0251a059d12671ea058353437d1924"),tX=l("ProRequestUpgradeModalData",["teamId"],"48e461aaa5580f6b60d0dbd6b169b946ec5ed7db57b8acd737fa0daf0eee713a"),tJ=l("ProjectActiveResourceConnections",["projectId"],"66d9d712debb175260223a3244ed2d8123f736e87c0f059dc1e6626c678c35b7"),tZ=l("ProjectByIdForConnectedProjectStatus",["projectId"],"19f51400e04ff54ed53c321b725bd1aca0070c5698c570ba7622445c9683815b"),tQ=l("ProjectByIdForFolderSettings",["projectId"],"ea3993ab4b60344f9a9c67e34a60518ca85a601ec29c1c4bc3ca88ece801d456"),t0=l("ProjectByIdForRealtimeShim",["projectId"],"dc32e25283d2d1dffab0e3de9ab839f9e992b7c787e50945d5c95ce7cbd3f271"),t1=l("ProjectFileCount",["projectId"],"fb7602771925aba9daee0c54da0ae5b19e112f419af3561b23186b9ab8edae75"),t2=l("ProjectNameById",["projectId"],"71c82b2f8b4a8a88bcefcbb86d92e50a486be1e335cb71a3d0a22092efdb6b48"),t3=l("ProjectNameForFile",["fileKey"],"ca17562b7fe6967828df6b9d5e75fb4fc7e4de958baaada69f0665792d5113aa"),t8=l("ProjectTilePermissions",["projectId"],"e2c37723480d3e7ee67345d3bb24a126d0ef86f71d35f3ee51646bb5e6b5f590"),t6=l("ProjectsForTeam",["teamId"],"ac8e7c7e8c7f5cd0efe49b9ab17dee5e2494fa3007d9d0948bf7fb6fa4760e48"),t4=l("PrototypeCanView",["prototypeId"],"39b6cb87330b27137dfe9ed80a64b3b264e26f8429d5144fb040372acf31b437"),t5=l("PrototypeTilePermissions",["prototypeId"],"686bb44822bd234fb3b8e7407935f4f3a8c4cc479f7826e075744c8dcfc39b8b"),t7=l("PublishUpsellTeamRoles",[],"e5f4e71dea66d8b75e5ada7d8a7a0bbefb0c042a933d1d03efb6fd7b20e15623"),t9=l("PublishedHubFileForFile",["fileKey"],"a82713eefd6ceb7fbd02d3de4052a359d16194dee87d082359327707cbe4068e"),re=l("PublishingModalView",["fileKey"],"8231b039938610f5a3143f9d98ef8dd5ee80022e624741aa49c860e23de5714f"),rt=l("RepoByIdForRealtimeShim",["repoId"],"e47c13772b98f3d704233af4abe7f0f9cfa4e8fbda3ac9096a424b5991d54709"),rr=l("RepoCanMove",["id"],"a87a1cec41725cb8d5f717cb42aba3efa5f10174b94a55ac83368065e993bac0"),rn=l("RepoCanMoveWithReasons",["id"],"58d3ed324b0fb335270b9a4017a497c72a61b987f24221181cc4172a1e42149e"),ra=l("RepoCanView",["repoId"],"f25a56bf74b724efc41118fabbbd8029682f5ce97a97db3ac5cf7c8117b07d82"),ri=l("RepoFiles",["repoId"],"3d25377c754367bb9d5f5b46005df05671af45dbdb537e5b09722e2dfa8c6866"),ro=l("RepoReviewerSuggestions",["repoId"],"00a150b6b24d02a9be19f0f7d564147419eb690e585d07493f4f93d1c497c547"),rs=l("RepoTilePermissions",["repoId"],"0f48a5b2d7236ad95c081b9240a898963da4b16d34ff12cf42f461f06cd0fe7f"),rl=l("ReposForFile",["fileKey"],"cdffd0fec08be265d27e7c23312a45d59fb5c512fd4dc18999b36530f3d99105"),rc=l("ReposForProject",["folderId","updatedAtTimestamp"],"2c0d9b289096f0d9de911e0830601fa513514ce91dfe484a5186838df2ffae5d"),rd=l("ReposForTeam",["teamId","updatedAtTimestamp"],"e9f4229805e5712b14b53f5f36376f04ef52c4cf05da0b5c9cf9c3538b1f1e4d"),ru=l("ResolvedComments",["fileKey"],"b83ddc9171fafaae8bac5cdbe024d0e34ddd3e8b54faaa69d1df7fba6cd1d4f7"),rp=l("ResourceConnectedUsers",["id","isHostPlanAdmin"],"427bbc965bc44755c41970e6d78add04774f3b986034157b5fa06c12c763d121"),rm=l("ResourceConnectionSharingGroupUsersByFile",["fileKey"],"ecbb6d74d2aa036f933d0d65ae365b6ce590e73a88302c2ca4961af9ed7a0063"),r_=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"95b4a2e83cdc0dd596dd52efd06b7ebf4ed36d97033c6c4c0f2f432d1377f47d"),rh=l("RoleUpdatesForUser",["updatedAtTimestamp"],"22d41a2e3c8feac43eef7ab813005709efcd554d0397153ce5d5f34d2478ac41"),rg=l("SearchFilterWorkspaceView",["orgId"],"e1690e5b59052f65ab1e98fbd14356b263f7eeec40a4f03ba33cc3130f282cf4"),rf=l("SeatCountDataForPlan",["planParentId","planType"],"c4cdd01e02d897ea342482538ad766647adc9f2e64c7640c89acf0b598124666"),rE=l("SharedFontsModalOrgPermissions",["orgId"],"a46eb218576f562a97506d614998ce064bbb504276b0fc3b65525b4617948ffb"),ry=l("SharedFontsModalTeamPermissions",["teamId"],"5602f0653629aed8d112f6493fbca9e1ced7f0d814c30c46865d2294ff424ec2"),rb=l("SharingGroupsByLibraryKey",["libraryKey"],"0198fea9ec5e08bf09ef5295059d5faaf675a5db31fbcece8eebe2317600246a"),rv=l("SharingGroupsByResourceConnection",["resourceConnectionId"],"56492c3620c56c2e5b453c5d68f2697d2577a2df5af76cfffbae8ab319650750"),rT=l("SiteBundles",["fileKey"],"c866419a2a2771830db6feeda57f2334c13ba73d61988ac82119daac07b71894"),rI=l("SiteMount",["fileKey"],"ca90794c556c52b7bc72d743db46430021aa911fcd26cec07e7b4685f82f4dce"),rS=l("StateGroupAttribution",["key"],"26a68430bcef690fd5b294f8c9273dd04ef28130d5e011047190c4b0b793d42c"),rA=l("StateGroupUpdatesForFile",["fileKey"],"dd19590ac05345a7cd77d71b4828f0997bb1ecd95ec6928f16d28831e56dbcf0"),rw=l("StateGroupUpdatesForProject",["projectId"],"a4ecf1902352a18794016c396d997aef8ffa9cfc86ddcb7a61aca07defa973da"),rC=l("StateGroupUpdatesForTeam",["teamId"],"8a351dd329781ab95cd0d4587407b9e1823fb8410f6c0fb420993fe0cc61613f"),rN=l("StatsigTeamsOrderView",["currentOrgId"],"86c7baabe479a2212899935d82c96490e72045e2869cc5b60bd6299a523b73fc"),rL=l("StyleAttribution",["key"],"57411025d99ce0fbe016a7c85c0519f83e39aa46bdb3075c9a01c4266aac5582"),rO=l("StyleByKey",["key","openFileKey"],"bca835c77d4a244484844b3ab8b8d6e25495b40826a2d9de597bd23f9914b9cd"),rR=l("SubscribedLibrariesForFile",["fileKey","group","orgId","teamId","workspaceId"],"fa1a7d5495a8b29f09b44b95c7bbe6c75c051d4553515fd3eacbacceba5a115a"),rP=l("SubscriptionUpdateSloData",["id"],"85603882b711eeacdbd2c903c6491bb3779a3781cd443cc532c9f6929bf388df"),rD=l("SupabaseAuthView",["fileKey"],"7fe00069356ba025e435853077254d87767e284fc1cbf66f4231ea1953c57c23"),rk=l("TeamById",["teamId"],"4abdd218f6b4464e31ca74a00f1a656c1e0fe7b76dd1c51483db8782a600696e"),rM=l("TeamByIdForPlanUserView",["teamId"],"f1e9733d7b4000bfa9ef990814e5af6ef2efee374356755782dc2135b688b00d"),rF=l("TeamByIdForPlanView",["teamId"],"eaf161e07cf79b3ddf995c8a84068b25f38149f4140c09edbab02200a52d36c0"),rx=l("TeamByIdForRealtimeShim",["teamId"],"876740dbc49f6317f9fea69f05ccea7ae399f65dd4024d0d77ce35cc6e7e9656"),rU=l("TeamCanAdmin",["id"],"a15d8b8af116e99e982bde58a443fa38d3f51756c266019952f16d6de898286d"),rB=l("TeamCanEdit",["id"],"bda96537d0ca79878c42caa722d235331db0954d2df1a32cbe0681af9bca3881"),rG=l("TeamCreationWorkspaceView",["orgId"],"d13686ce2c80731820b24473472ede39e6dc131201e0c789743d0f565e1d0c3a"),rV=l("TeamFileCountsByTeamId",["teamId"],"b0da1c6932c88ac9be470a3e6f73749ffab79013895f7a7b94f64975f4edde6d"),rH=l("TeamFileLimitsInfo",["teamId"],"906372482112efaab5e4d5074e8f801807854d3d3c32e23b697c921187dd1068"),rz=l("TeamFileLimitsInfoByProject",["projectId"],"8facdfbdfc1807ff4f1a0b8fdcf64b35b44ebe9bb907355196260c589389a17d"),rK=l("TeamHasPublishedSite",["teamId"],"0cf97a87ee12f99ef626ed7066b3ac09b83b9686fe520451a3a6499d15e8dec5"),rW=l("TeamOrphanedStatus",["teamId"],"2805618ee305853637591f1e5f287aed2d89f4e4a3c2caf44ac7cc9c62c607d2"),rj=l("TeamPeopleTableView",["teamId"],"80f08072b05be85d58c00f9c9c83f93b243d2a2da4ea729f36366e6f656d9f97"),rY=l("TeamPermissions",["teamId"],"7875ef1cc511ca1088c0f881787c7bbff980b6e972a8d520cce795683d4726fe"),r$=l("TeamRoles",["teamId"],"197daa6511953705e44c665819a013d82c28a82514266c5f969449f09a8f4315"),rq=l("TeamTilePermissions",["teamId"],"4d771ef5c8274770a15d71e66ba91d9de52b66d867baa70bc575e16305b43f3e"),rX=l("UpgradeEligibilityFolderView",["permissionArguments","projectId"],"6a40390a4dbddd76b0e29c143bd861a818e741477fc84967c041b66c97bc9d09"),rJ=l("UpgradeEligibilityView",["fileKey","planParentId","planType","projectId"],"72387f41bf081239208e62f2364ec299e527b15a6aebd63151855327e68fe6e9"),rZ=l("UserColorProfilePreferenceView",[],"d63161ffc7150ae6d1010ec70ba9a4d2082ddb1426e097a472eb98eae521eb5c"),rQ=l("UserFlagByName",["name"],"dd08182a733f3cbd3d0815eb4574fc268a9dc1f4fe2f8c1d314bd806c98fa87d"),r0=l("UserForRcs",[],"45ee65596c77e2a02bbdc852e30c49215947f76e48eb1896d58c90174a063f35"),r1=l("UserForRealtimeShim",[],"6eb6767b765d789f69e66b0b9e0da0b30bfb46833df78253392df819165eaff7"),r2=l("UserLicensesForFile",["fileKey","userId"],"791dc54b7a2db602043f0d552045646e45157e61178a3b4de5c3d44ac80b578c"),r3=l("UserPreferences",[],"d413c96cd93779816ef501e3520d665c7f6e4ad2e7aeb4999edd60f287bd2ef3"),r8=l("UserSettingsPlanRow",["planParentId","planType"],"bc73df582dbed16c07fc6f2190bff7b4bcd76e252aaabcc2161b6cc303d6a288"),r6=l("UserTeamFlagsForRealtimeShim",[],"f4f8d69cc98235fb3bd112bccc02681338e66e7337fe16f88d44ddb92c091566"),r4=l("UserTeamRoleRequestView",["updatedAtTimestamp"],"4d4825452cf41818cc4118acf4867f7161dcaa2f68b63b13bb47ef0e962b7c98"),r5=l("VariableByKey",["key"],"799c8074ce427a280ea8c1073006f6ef4cfb70f601f6cd9e38da10d8c8eb2811"),r7=l("VariableCollectionAttribution",["key"],"abaa94884f952327786c44f386b20a8630bc311bb9971c43659c884963d526cc"),r9=l("VariableCollectionByKey",["key"],"96576403b2f5a73dcb7825e1d6b780ce80b9b9d67ff1c3a5a790535bf10cecc0"),ne=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"fb4f283238824e4caa28a5b0be8774dfacf265af2f2d47f18f4474fcb67e708a"),nt=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId","teamId"],"9d8bb151165df2965f8ae04bb79bb169342879fc53b76bd4ce54e59ae7426051"),nr=l("WhitelistedPluginsForOrg",["orgId"],"8d225a26fcb53ff99c368f566f42529602c163fa00f1e23182b9dacff718aab8"),nn=l("WidgetUpdatesForOrg",["orgId","updatedAtTimestamp"],"5f662446c86f544fa3bfa1dc9c293cdc1c221c335a12971a0109749a96f3bd30"),na=l("WorkspaceModalPluginRequests",["orgId"],"09e49c1d071cb7a048dfbd41ff480667be899b03aff71db49ab9344a49cea0d5"),ni=l("WorkspacePageView",["orgId","workspaceId"],"4b0a4f64bb4804e200c5f54589802bce783e1d83447fecdf75f887168352d087"),no=l("WorkspaceSelectorView",["orgId"],"3e57d9a0edc4f7b82d83093187902ade15f296f06ff742484915bc6537e807ab"),ns=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"a8d40d722c56d2802a41fd5a1a6b633a5de85af187d36ff3151ea5e7a2643e11"),nl=l("WorkspacesDirectoryView",["orgId"],"5700171c687701dec5abc103a8768b23bb4d4d691f24e09778110fbb609da929")},806349:(e,r,n)=>{n.d(r,{Bp:()=>z,GA:()=>B,KC:()=>F,Nl:()=>W,Ns:()=>b,Qp:()=>k,SS:()=>M,TP:()=>I,Td:()=>K,U5:()=>O,U7:()=>P,Um:()=>w,WP:()=>L,WW:()=>T,Xs:()=>N,YN:()=>q,ZW:()=>R,Zt:()=>Y,aU:()=>C,aX:()=>x,cE:()=>G,ge:()=>A,iP:()=>$,uW:()=>V,vy:()=>j,yT:()=>S});var a=n(660376),i=n(673786),o=n(186606),s=n(553547),l=n(562027),c=n(286536),d=n(432121),u=n(19180),p=n(52813);n(461979);var m=n(6068),_=n(318147),h=n(720722),g=n(273555),f=n(74666),E=n(842579),y=n(160769);function b(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name,n.name=e.name),n&&r)?{File:{[r]:n}}:null}let v=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function T(e){if(!e.id)return null;let r=v(e);return r?(e.default_file_key&&Object.assign(r,b(e,e.default_file_key)),r):null}function I(e,r,n){let a=void 0!==e.default_file_key?e.default_file_key:e.key;return a&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${a}`]:{figFileKey:a,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:_.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function S(e,r,n){let a=e.link_access===_.PQ.VIEW||e.link_access===_.PQ.EDIT||e.proto_link_access===_.Pu.VIEW;return r&&"optimistic"!==r&&(!a||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function A(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function w(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function C(e,r,n,a){let i={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{id:n.id,design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||_.El.STARTER,user_id:n.userId,permission:n.permission,updated_at:n.updatedAt.toString()}:void 0,team_user:a?{id:a.id,design_paid_status:a.designPaidStatus,whiteboard_paid_status:a.whiteboardPaidStatus,user_id:a.userId,team_id:a.teamId}:void 0};return e.pending?{...i,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...i,pending:!1,user_id:r.id,user:r}}function N(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function L(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function O(e){let r={};return e.forEach(e=>r[e.id]=e),r}function R(e){switch(e){case _.vt.FILE:return"FileRole";case _.vt.FILE_REPO:return"RepoRole";case _.vt.FOLDER:return"ProjectRole";case _.vt.TEAM:return"TeamRole"}}function P(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0,sortPosition:(0,p.oA)(e.sortPosition,null)}}function D(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,updated_at:e.updatedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:m.P.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:m.P.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function k(e,r){return{...D(e,r),type:h.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,i.ii)(e.componentKey),containing_frame:P(e.containingFrame),content_hash:(0,i.F7)(e.contentHash),userFacingVersion:(0,i.F7)(e.userFacingVersion)===i.F7.INVALID?(0,i.F7)(e.contentHash):(0,i.F7)(e.userFacingVersion),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`,sort_position:(0,p.oA)(e.sortPosition,null)}}function M(e,r){return{...D(e,r),type:h.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:P(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,i.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,i.Rf)(e.version),userFacingVersion:(0,i.Rf)(e.userFacingVersion)===i.Rf.INVALID?(0,i.Rf)(e.version):(0,i.Rf)(e.userFacingVersion),thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function F(e,r){return{...D(e,r),type:h.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,i.IA)(e.contentHash),userFacingVersion:(0,i.IA)(e.userFacingVersion)===i.IA.INVALID?(0,i.IA)(e.contentHash):(0,i.IA)(e.userFacingVersion),key:(0,i.n3)(e.key),meta:e.meta?(0,y.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function x(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,a.wc)(`Unhandled livegraph type: ${e}`)}}function U(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function B(e,r,n){let a="",o="";return n?(a=c.wL(s.sH(e.nodeId)??s.Hr),o=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(a=c.Hc((0,i.ey)(e.key),(0,i.nK)(e.version)),o=d.Hc((0,i.yG)(e.variableCollection.key),(0,i.Vt)(e.variableCollection.version))),{...D({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:h.PW.VARIABLE,node_id:a,variableSetId:o,variableCollectionKey:(0,i.yG)(e.variableCollection.key),resolvedType:x(e.variableType),version:(0,i.nK)(e.version),userFacingVersion:(0,i.nK)(e.userFacingVersion)===i.nK.INVALID?(0,i.nK)(e.version):(0,i.nK)(e.userFacingVersion),sortPosition:e.sortPosition,key:(0,i.ey)(e.key),scopes:(0,g.gK)(e.scopes),canvas_url:U(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function G(e,r,n){let a="";a=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,i.yG)(e.key),(0,i.Vt)(e.version));let o={...D({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:h.PW.VARIABLE_SET,node_id:a,version:(0,i.Vt)(e.version),userFacingVersion:(0,i.Vt)(e.userFacingVersion)===i.Vt.INVALID?(0,i.Vt)(e.version):(0,i.Vt)(e.userFacingVersion),canvas_url:U(e.key,e.checkpoint.key),key:(0,i.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name,sortPosition:n.sortPosition,parentModeId:(0,p.oA)(n.parentModeId,null),parentVariableSetId:(0,p.oA)(n.parentVariableSetId,null)});return r}(e.modes),isExtendable:e.isExtendable??!1,sortPosition:(0,p.oA)(e.sortPosition,null)},l=(0,p.oA)(e.rootVariableSetKey,null);return l?{...o,isExtension:!0,rootVariableSetKey:(0,i.yG)(l),variableSetExtensionChain:((0,p.oA)(e.variableSetExtensionChain,[])??[]).map(e=>(0,i.yG)(e))}:{...o,isExtension:!1}}function V(e,r){return{...D({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:h.PW.MODULE,node_id:e.nodeId,key:(0,i.mW)(e.key),version:(0,i.Pg)(e.version),userFacingVersion:(0,i.Pg)(e.userFacingVersion)===i.Pg.INVALID?(0,i.Pg)(e.version):(0,i.Pg)(e.userFacingVersion),canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:P(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:H(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}let H=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,a.wc)(`Unhandled livegraph module source: ${e}`)}};function z(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function K(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration,file_export_setting:n?.fileExportSetting??r?.fileExportSetting??f.zB.ALLOWED}:null}function W(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?w(e.setByUser):null}:null}function j(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function Y(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function $(e){return e?e.filter(e=>null!==e.file&&!e.file.trashedAt&&!e.file.deletedAt&&(!!(0,u.k)().sites||"sites"!==e.file.editorType)):[]}function q(e){let r=$(e),n=[],a=new Map,i=[];for(let e of r){let r=e.file,o=r.trackTags?.isTemplate,s={accessed_at:e.actionAt.toISOString(),branch_checkpoint_id:r.branchCheckpointId,client_meta:r.clientMeta,created_at:r.createdAt.toISOString(),creator_id:r.creatorId,deleted_at:null,description:r.description,edit_url:r.editUrl,editor_type:r.editorType,file_repo_id:r.fileRepoId,folder_access_enabled:r.folderAccessEnabled,folder_id:r.folderId,handoff_url:r.handoffUrl,has_file_link_password:r.hasFileLinkPassword,has_proto_link_password:r.hasProtoLinkPassword,is_favorited:r.isFavorited,is_new_user_playground_library:r.newUserPlaygroundLibrary||void 0,is_published_site:r.isPublishedSite,is_team_template:r.isTeamTemplate,is_template:o||void 0,is_try_file:r.isTryFile,key:r.key,library_key:r.libraryKey,last_published_at:r.lastPublishedAt||null,license:r.license,link_access:r.linkAccess,name:r._name||"Untitled",org_audience:r.orgAudience??void 0,org_browsable:r.orgBrowsable,parent_org_id:r.parentOrgId,proto_link_access:r.protoLinkAccess,prototype_url:r.prototypeUrl,scheme:r.scheme,source_checkpoint_id:r.sourceCheckpointId,source_file_key:r.sourceFileKey,starter_library_src_file_key:r.trackTags?.starterLibrarySrcFileKey||void 0,team_id:r.teamId,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl,thumbnail_url_override:r.thumbnailUrlOverride,preview_thumbnail_urls:null,touched_at:r.touchedAt,track_tags:r.trackTags?E.Z.toSinatra(r.trackTags):null,trashed_at:null,trashed_user_id:r.trashedUserId,updated_at:r.updatedAt?.toISOString(),url:r.url,viewer_export_restricted:r.viewerExportRestricted};if(r.fileRepoId&&r.repo){let n=a.get(r.fileRepoId);n?n.files.push(s):(n={repo:{created_at:r.repo.createdAt.toISOString(),default_file_key:r.repo.defaultFileKey,deleted_at:r.repo.deletedAt?.toISOString()||null,folder_id:r.repo.folderId,has_active_branches:r.repo.hasActiveBranches,has_file_link_password:r.repo.hasFileLinkPassword,has_proto_link_password:r.repo.hasProtoLinkPassword,id:r.repo.id,is_favorited:r.repo.isFavorited,link_access:r.repo.linkAccess,name:r.repo.name,org_audience:r.repo.orgAudience,org_browsable:r.repo.orgBrowsable,parent_org_id:r.repo.parentOrgId,proto_link_access:r.repo.protoLinkAccess,team_id:r.repo.teamId,trashed_at:r.repo.trashedAt?.toISOString()||null,updated_at:r.repo.updatedAt.toISOString()},files:[s],timestamp:e.actionAt.toISOString()},a.set(r.fileRepoId,n),i.push(n))}else n.push(s)}return{recent_files:n,recent_repos:i}}},794025:(e,r,n)=>{n.d(r,{M:()=>c});var a=n(29188),i=n(14837),o=n(716181),s=n(738395);let l=null;function c(){return l||(a.eD&&(l=new o.k),(0,i.T)()&&(l=new s.y)),l}},834612:(e,r,n)=>{n.d(r,{B9:()=>m,JK:()=>c,LN:()=>u,_Z:()=>_,vr:()=>d,wU:()=>p}),n(848318);var a=n(19180),i=n(615233),o=n(998568),s=n(944239);let l=["jpy","usd","gbp","cad","eur"],c=(0,s.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"});class d{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,o.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=c()}formatMoney(e,r){let n={currency:this.currency,currencySign:r?.currencySign,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let a=e.toLocaleString(this.locale,n);return(a.startsWith("CA$")||a.startsWith("US$"))&&(a=a.slice(2)),r?.showFullFormat?`${a} ${this.fullFormat[this.currency]}`:a}}function u(){let e=(0,i.Ay)().user_currency_from_ip;return _()?e:"usd"}function p(){return new d(u())}function m(){let e=new Set;return(0,a.k)().internal_cart_allow_all_currencies,e.add("usd"),e.add(u()),Array.from(e)}function _(){(0,a.k)().internal_cart_allow_all_currencies;let e=(0,i.Ay)().user_currency_from_ip;if(!e||!l.includes(e)||"usd"===e)return!1;let r=(0,i.Ay)().user_data;return!!r&&!!r.id}},584347:(e,r,n)=>{n.d(r,{Lb:()=>i});var a=n(7376);function i(e){let r=(0,a.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},526594:(e,r,n)=>{n.d(r,{D8:()=>i,Lh:()=>o}),n(989232),n(633468);var a=n(944239);n(730143),n(125761),n(752181),(0,a.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var i=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(i||{});function o(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}},523443:(e,r,n)=>{n.d(r,{OA:()=>u,rT:()=>d}),n(918777);var a=n(287105),i=n(960503),o=n(209857),s=n(360860);let l=(e,r,n)=>{switch(e){case"seatType":case"seatChanges":return r;case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let a=decodeURIComponent(r),i=Object.keys(n).find(e=>n[e]?.name===a);if("unassigned"===r||"Unassigned"===r)return o.s;if(i)return i;return null;case"newEditor":return"true"===r;default:return null}},c=(e,r,n)=>{switch(e){case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":case"seatTypeFilter":case"seatChangesFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,i.CC)(r,n));default:return null}};function d(e,r){if(!e)return null;let n=(0,a.qg)(e);return Object.keys(n).reduce((e,a)=>{if(!(a in s.Oo))return e;{let i=s.GX[a],o=n[a],c=l(a,o,r);return{...e,...c&&{[i]:c}}}},s.J0)}function u(e,r){return Object.keys(e).reduce((n,a)=>{let i=s.cC[a],o=e[a];return{...n,...o&&{[i]:c(a,o,r)}}},{})}},738105:(e,r,n)=>{n(918777),n(238444),n(318147),n(698359),n(594950);var a=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(a||{})},960503:(e,r,n)=>{n.d(r,{CC:()=>o});var a=n(967688);n(72464),n(318147),n(474132);var i=n(209857);function o(e,r){return e===i.s?(0,a.t)("license_group.unassigned"):r[e]?.name??""}n(360860)},610345:(e,r,n)=>{n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d});var a=n(318147),i=n(407638),o=n(94831),s=n(654793),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,i.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let a=r.roles.byTeamId[e.id];return!a||Object.values(a).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===a.bU.PRIVATE&&d&&l||e.org_access===a.bU.SECRET&&d&&l)return 4;if((0,i.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===a.bU.PUBLIC)return 2;if(e.org_access===a.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},51377:(e,r,n)=>{n.d(r,{Hw:()=>s});var a=n(238444);n(533737),n(499668),n(504131),n(253332),n(407638),n(613733),n(403014);var i=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(i||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,a.qe)(e.email)}},403014:(e,r,n)=>{n.d(r,{LM:()=>s,x9:()=>l,xw:()=>o}),n(430385),n(476254),n(129170),n(967688),n(578590),n(318147),n(376132),n(17753);var a=n(975887),i=n(231159);function o(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,i.bt)(o);let s=(0,i.bt)(function(e){let r=o(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),l=a.x},474132:(e,r,n)=>{n.d(r,{Aj:()=>h,H_:()=>s,Oe:()=>f,Ts:()=>l,eE:()=>c,kA:()=>g,mg:()=>m,nX:()=>_,wA:()=>u,yK:()=>d}),n(848318),n(301168);var a=n(19180),i=n(238444),o=n(615233);function s(e,r){let n=e.map(e=>e.domain.toLowerCase()),a=(0,i.zN)(r);return 0!==n.length&&!!a&&n.indexOf(a)>-1}function l(e){return e?.id!==void 0}function c(e,r){let n=l(r)?r.email:r;return!!n&&(0,i.xf)(n)&&e.domains.length>0&&!s(e.domains,n)}function d(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function u(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(410725),n(611057),n(314979),n(967688),n(318147),n(477548),n(156495),n(683703),n(55116),n(280255),n(138528);let p=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/(\d+)/);function m(e){return p.test(e)}function _(e){let r=e.match(p);return r?r[1]:null}function h(){return!!(0,o.sL)()||!!(0,o.b5)()&&!!(0,a.k)().fig_gov_magic_links}function g(e){return!!e?.bigma_enabled}function f(e){return g(e)}},253332:(e,r,n)=>{n.d(r,{BR:()=>j,Ht:()=>y,J9:()=>D,KI:()=>P,Kg:()=>M,Ky:()=>W,LF:()=>v,PS:()=>k,PX:()=>S,Rq:()=>K,Rx:()=>G,S$:()=>x,UE:()=>H,WQ:()=>C,WW:()=>T,Wf:()=>b,XX:()=>O,ZZ:()=>F,cW:()=>A,dN:()=>V,fD:()=>z,h:()=>I,n0:()=>N,oc:()=>U,w5:()=>L,zZ:()=>E}),n(938982);var a=n(19180),i=n(116389),o=n.n(i),s=n(918777),l=n(238444);n(998568);var c=n(987591),d=n(314979),u=n(967688),p=n(210853),m=n(249726),_=n(318147),h=n(407638),g=n(156495),f=n(872240);let E="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",y=2,b=1,v={[_._Y.DESIGN]:3,[_._Y.WHITEBOARD]:1,[_._Y.SLIDES]:3,[_._Y.SITES]:3,[_._Y.COOPER]:3,[_._Y.FIGMAKE]:3},T=3,I=0,S=0,A=5;function w(e){return e>new Date}function C(e){let r=e&&!e.org_id&&e.grace_period_end&&s.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function N(e){return!!e&&null!=e.subscription&&e.subscription!==_.Qh.INCOMPLETE}function L(e){return!!e&&(N(e)||e.student_team||!!e.grace_period_end&&w(new Date(e.grace_period_end)))}function O(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:a}=e;return!!r&&r!==_.Qh.INCOMPLETE||!!n||a&&w(a)}function R(e){let r=e.editorType,n=!!e.team&&!O(e.team),a=!e.teamId&&!e.parentOrgId,i=(0,m.jd)(e.project),o=v[r??_._Y.DESIGN];return r===_._Y.WHITEBOARD?n||a?o:1/0:n&&!i?o:1/0}function P(e){return R(e)<1/0}function D({openFile:e,pageCount:r}){return r>=R(e)}function k(e){return Object.values(e.teams).filter(r=>(0,h.canEditTeam)(r.id,e)&&(!L(r)||r.student_team))}function M(e){return Object.values(e.teams).filter(r=>(0,h.canEditTeam)(r.id,e)&&!L(r))}function F(e,r,n){var a,i,o;return a=e.team_id?r.teams[e.team_id]:null,i=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,m.Gi)(e)||e.team_id&&(!n&&B(a,i,o)||!L(a)&&(e.is_invite_only||e.is_view_only)))}function x(e,r,n){return!(e.teamId||(0,m.VA)(e))||!!e.teamId&&(!!(r&&n&&(r.studentTeamAt?!((0,c.cn)(n)||r.eduGracePeriod?.isValid):r.restrictionsList?.includes(_.P4.LOCKED)))||(e.inviteOnlyAt||e.viewOnlyAt)&&!O(r))}function U(e,r){return B(r.teams[e],r.user,r.userEduGracePeriods)}function B(e,r,n){return!!e&&!!r&&(e.student_team?!((0,c.cn)(r)||(0,c.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(_.P4.LOCKED))}function G(e){return Object.values(e.teams).some(r=>U(r.id,e)&&(0,h.canEditTeam)(r.id,e))}function V(e,r){let n=r.orgById[e],i=o()([g.ZG.SUSPENDED,(0,a.k)().scheduled_cancellation_enabled&&g.ZG.DEACTIVATED]);return n&&i.includes(n.standing)}function H(e,r){if(e.data&&e.data.message){let n=(0,p.J)(e);n&&r(d.s.error(n))}else{let n=(0,p.J)(e,(0,u.YD)("error.unknown_contact_support"));r(d.s.error(n))}}function z(e,r){return e===f.tY.MONTHLY?0:r}function K(e,r){return e===f.tY.MONTHLY?r:0}function W(e,r,n){let a="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,l.nD)(e.email)&&(e[a]===_.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function j(e,r){let n=!1,a=null!==e?Object.values(e).reduce((e,a)=>{if(!a.user)return e;let i={id:a.user.id,design_paid_status:a.design_paid_status,whiteboard_paid_status:a.whiteboard_paid_status,email:a.user.email||"",handle:a.user.handle||"",img_url:a.user.img_url||""};return a.user?.id===r?.id?(n=!0,e.unshift(i)):e.push(i),e},[]):[];return!n&&r&&a.unshift({id:r.id,design_paid_status:_.Zf.STARTER,whiteboard_paid_status:_.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),a}},216476:(e,r,n)=>{n.d(r,{k:()=>o});var a=n(660376),i=n(989232);class o{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(s(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(s(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let r={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...l(this.queriesTs,"query",5),...l(this.nodeChangesTs,"node",5),...l(this.repliesTs,"reply",5)};(0,i.trackEvent)(this.eventName,r),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,a.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function s(e){return[...e].sort().join(",")}function l(e,r,n){let a={};return e.forEach((e,i)=>{i<n&&(a[`${r}.${i}`]=e)}),a}},280255:(e,r,n)=>{n.d(r,{Ay:()=>T,C1:()=>S,D8:()=>w,DN:()=>A,Eh:()=>y,F1:()=>f,OL:()=>N,Pe:()=>v,Pq:()=>E,Qn:()=>L,R$:()=>I,cb:()=>b});var a=n(19180),i=n(540698),o=n(967688),s=n(640483),l=n(972402),c=n(456028),d=n(587745),u=n(459403),p=n(318147);n(641002);var m=n(94831);n(386252);var _=n(698429),h=n(254028),g=n(596224);function f(){return(0,u.MP)()&&!(0,a.k)().integ_zoom_allow_extensions?{canRun:!1,message:(0,o.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function E({copyExportRestrictedArgs:e}){return!(e&&v(e))}function y(e){return(0,_.$A)(e.selectedView)?(0,l.tn)(e)&&E({copyExportRestrictedArgs:e.openFile}):!((0,u.MP)()&&!(0,a.k)().integ_zoom_allow_extensions||(0,g.Vj)(e.selectedView)||(0,s.eM)(e.selectedView)&&!(0,a.k)().buzz_plugins||(0,h.Jh)(e.selectedView))&&(!(0,a.k)().ext_require_appropriate_seat||!!(0,i.nl)()||!!e.openFile?.teamId||!!e.openFile?.parentOrgId)&&!e.mirror.appModel.isReadOnly}function b(e){if((0,i.nl)()||!(0,a.k)().ext_require_appropriate_seat)return!0;if(!e.user?.id)return!!(0,c.dk)(e.openFile);if(!e.openFile)return!1;let{canRunExtensions:r,canAccessFullDevMode:n}=e.openFile;return(0,_.$A)(e.selectedView)?n:r}function v(e){return!e.canExport}let T=n(237161).A;function I(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function S(e,r){switch(e){case m.e6.OWNER:return r?(0,o.t)("permissions.level_name.branch_owner"):(0,o.t)("permissions.level_name.owner");case m.e6.ADMIN:return(0,o.t)("permissions.level_name.admin");case m.e6.EDITOR:return(0,o.t)("permissions.level_name.can_edit");case m.e6.VIEWER:return(0,o.t)("permissions.level_name.can_view");case m.e6.VIEW_PROTOTYPES:return(0,o.t)("permissions.level_name.can_view_prototypes");default:return(0,o.t)("permissions.level_name.none")}}function A({role:e,file:r,folder:n=null,isInDraftsFolder:a=!1}){if(e.level!==m.e6.VIEWER&&e.level!==m.e6.VIEW_PROTOTYPES)return null;let i=(0,d.Pn)(r);switch(e.level){case m.e6.VIEWER:{if(r.link_access===p.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});if(r.link_access===p.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==p._D.GUEST)return(0,o.t)("permissions.can_still_edit_org_member_with_link",{noun:i});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return C(!!e.teamLevel&&!a&&e.teamLevel>m.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>m.e6.VIEWER,!!e.repoLevel&&e.repoLevel>m.e6.VIEWER)}case m.e6.VIEW_PROTOTYPES:{if(r.link_access===p.PQ.EDIT)return(0,o.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:i});if(r.link_access===p.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==p._D.GUEST)return(0,o.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:i});if(e.pending)break;let a=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>m.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:i});if(e.folderLevel&&e.folderLevel>m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:i});if(e.repoLevel&&e.repoLevel>m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:i});if(r.link_access===p.PQ.VIEW)return(0,o.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:i});if(r.link_access===p.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==p._D.GUEST)return(0,o.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:i});if(e.teamLevel&&e.teamLevel>=m.e6.VIEWER&&(!n||a))return(0,o.t)("permissions.can_still_see_permission_team_file_is_on",{noun:i});if(e.folderLevel&&e.folderLevel>=m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_permission_project_file_is_on",{noun:i});if(e.repoLevel&&e.repoLevel>=m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:i})}}return null}function w({file:e,seenState:r,folder:n=null,isInDraftsFolder:a}){let i=(0,d.Pn)(e);if(e.link_access===p.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});let s=!!n&&!n.is_invite_only&&!n.is_view_only;return C(!!r.teamLevel&&!a&&r.teamLevel>m.e6.VIEWER&&(!n||s),!!r.folderLevel&&r.folderLevel>m.e6.VIEWER,!!r.repoLevel&&r.repoLevel>m.e6.VIEWER)}function C(e,r,n){return e?(0,o.t)("permissions.can_still_edit_team_permissions"):r?(0,o.t)("permissions.can_still_edit_folder_permissions"):n?(0,o.t)("permissions.can_still_edit_edit_permissions"):null}function N(e,r,n){return e.level!==m.e6.OWNER&&(e.level===m.e6.ADMIN?r:n)}function L(e){return!!e&&!!e.canEdit&&!!e.plan&&![p.Ag.STARTER].includes(e.plan.tier)}},407638:(e,r,n)=>{n.d(r,{canAdminOrg:()=>B,canAdminTeam:()=>P,canEditTeam:()=>R,canManageNonSecretOrgTeam:()=>H,canMemberOrg:()=>U,canViewFolder_DEPRECATED:()=>L,canViewTeam:()=>O,getExplicitRoleForUserAndFile:()=>A,getPermissionsState:()=>E,getPermissionsStateMemoized:()=>y,getReadOnlyOverrideMessageForFolder:()=>K,getResourceTeamId:()=>b,getRolesForResource:()=>w,hasAdminRoleAccessOnTeam:()=>M,hasEditorRoleAccessOnTeam:()=>k,hasViewerRoleAccessOnTeam:()=>D,isOrgUserExternallyRestrictedFromState:()=>z,userIsAMemberOfAnOrg:()=>V});var a=n(19180),i=n(418193),o=n(470499);n(476254);var s=n(987591),l=n(967688),c=n(249726),d=n(318147),u=n(403014);n(253332);var p=n(504906),m=n(376132),_=n(94831),h=n(280255);function g(e,r,n,a,i,o,s,l,c,d,u,p,m,_,h){return{currentUserOrgId:e,user:r,fileByKey:n,repos:a,folders:i,teams:o,roles:s,orgById:l,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:p,orgTeams:m,openFile:_,currentTeamId:h}}let f=(0,i.xx)(g);function E(e){return g(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function y(e){return f(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function b(e,r){switch(e.resource_type){case d.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case d.vt.FILE_REPO:let a=r.repos[e.resource_id_or_key],i=r.folders[a?.folder_id];return i?.team_id??null;case d.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case d.vt.TEAM:return e.resource_id_or_key}}function v(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function T(e,r){let n=r.user?.id,a=r.roles;return e in a.byTeamId&&n&&n in a.byTeamId[e]?[a.byTeamId[e][n]]:[]}function I(e,r){let n=r.user&&r.user.id,a=[],i=r.roles;e in i.byFolderId&&n&&n in i.byFolderId[e]&&a.push(i.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(a=a.concat(T(o.team_id,r))),a}function S(e,r){let n=r.user&&r.user.id,a=r.roles,i=[];e in a.byRepoId&&n&&n in a.byRepoId[e]&&i.push(a.byRepoId[e][n]);let o=r.repos[e];return o&&(i=[...i,...I(o.folder_id,r)]),i}function A(e,r){let n=r.user&&r.user.id,a=r.roles;return e in a.byFileKey&&n&&n in a.byFileKey[e]?a.byFileKey[e][n]:null}function w(e,r,n){switch(e){case d.vt.FILE:return function(e,r){let n=[],a=A(e,r);null!==a&&n.push(a);let i=r.fileByKey[e];return i&&i.folder_id&&(n=n.concat(I(i.folder_id,r))),i&&i.file_repo_id&&(n=[...n,...S(i.file_repo_id,r)]),n}(r,n);case d.vt.FILE_REPO:return S(r,n);case d.vt.FOLDER:return I(r,n);case d.vt.TEAM:return T(r,n)}}function C(e,r,n){let i=(0,p._)(e,n);if(!i)return!1;let o=n.user?.id,s=i.org_id,l=(0,a.k)().sc_open_team_deprecation,c=i.sharing_audience_control;if(s){let a=!l&&r<=_.e6.EDITOR&&U(s,n)&&i.org_access===d.bU.PUBLIC&&i.default_permission===d.sC.EDIT,u=v(T(e,n),r),p=r<=_.e6.ADMIN&&(u||H(i,n,o)),m=!l&&r<=_.e6.VIEWER&&U(s,n)&&i.org_access===d.bU.PUBLIC,h=U(s,n)&&(r<=_.e6.VIEWER&&c===d.PQ.ORG_VIEW||r<=_.e6.EDITOR&&c===d.PQ.ORG_EDIT);return(p||m||u||a||h)&&x(s,n)}return N(e,r,n)}function N(e,r,n){return v(T(e,n),r)&&!function(e,r,n){if(n.user&&!(0,s.cn)(n.user))return!1;let a=(0,p._)(e,n);if(!a)return!1;let i=!!n.user&&(0,s.GU)(n.userEduGracePeriods,(0,s.cn)(n.user),a.id,a.student_team).showAccessRestricted;return r>_.e6.VIEWER&&i}(e,r,n)}function L(e,r){return function(e,r,n){let i;let o=n.user&&n.user.id,s=n.folders[e];if(!o||!s)return!1;let l=(0,c.oq)(s.id,n);if(l&&!x(l,n))return!1;let u=s.team_id&&n.teams[s.team_id],p=(0,a.k)().sc_open_team_deprecation,m=s.sharing_audience_control;if(!p&&l&&U(l,n)&&r<=_.e6.VIEWER&&u&&u.org_access===d.bU.PUBLIC&&!s.is_invite_only||!p&&l&&U(l,n)&&r<=_.e6.EDITOR&&u&&u.org_access===d.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&u.default_permission===d.sC.EDIT||l&&U(l,n)&&(r<=_.e6.EDITOR&&m===d.PQ.ORG_EDIT||r<=_.e6.VIEWER&&m===d.PQ.ORG_VIEW))return!0;let h=I(e,n);return(h.forEach(e=>{e.resource_type===d.vt.FOLDER&&(i=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=_.e6.EDITOR)?!!i&&i.level>=r:v(h,r)}(e,_.e6.VIEWER,r)}function O(e,r){return C(e,_.e6.VIEWER,r)}function R(e,r){return C(e,_.e6.EDITOR,r)}function P(e,r){return C(e,_.e6.ADMIN,r)}function D(e,r){return N(e,_.e6.VIEWER,r)}function k(e,r){return N(e,_.e6.EDITOR,r)}function M(e,r){return N(e,_.e6.ADMIN,r)}function F(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,o.J)(e,"org_user",r):null}function x(e,r){let n=r.user;if(!e||!n)return!1;let a=r.orgById[e]??(0,o.J)(r,"org",e);return G(F(r,e,n.id),a,m.jh.GUEST)}function U(e,r,n){if(!e)return!1;n=n||r.user?.id;let a=r.orgById[e]??(0,o.J)(r,"org",e);return G(F(r,e,n),a,m.jh.MEMBER)}function B(e,r,n){if(!e)return!1;let a=r.orgById[e]??(0,o.J)(r,"org",e);return n=n||r.user?.id,G(F(r,e,n),a,m.jh.ADMIN)}function G(e,r,n){return!!r&&!!e&&(0,h.Ay)(e.permission)>=n}function V(e,r){return(0,u.x9)(e.orgUsersByOrgId,r).some(n=>U(n.org_id,e,r))}function H(e,r,n){return e.org_access!==d.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let a=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===a&&(a=(0,o.J)(r,"org_user",r.currentUserOrgId));let i=(0,p._)(e,r);if(!i||!a||r.currentUserOrgId!==i.org_id)return!1;if(M(e,r))return!0;let s=B(r.currentUserOrgId,r,n);return i.org_access!==d.bU.SECRET&&(s||!!(i.workspace_id&&function(e,r,n){n=n||r.user?.id;let a=r.currentUserOrgId;return!!(e&&n&&a&&r.orgUsersByOrgId?.[a]?.[n].workspace_users?.find(r=>r.permission===d.bp.ADMIN&&r.workspace_id===e))}(i.workspace_id,r,n)))}(e.id,r,n)}function z(e){return(0,h.R$)(e.user,e.currentUserOrgId)}function K(e,r){if(e.level!==_.e6.VIEWER&&e.level!==_.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let a=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],i=!n.is_invite_only&&!n.is_view_only;return a&&a.level>_.e6.VIEWER&&i?(0,l.t)("permissions.can_still_edit_team_project_is_in"):null}},138528:(e,r,n)=>{n.d(r,{A8:()=>B,Az:()=>L,D6:()=>v,EV:()=>A,H3:()=>R,Kd:()=>k,No:()=>f,S2:()=>g,T5:()=>y,Um:()=>P,X$:()=>T,XP:()=>b,YY:()=>C,j_:()=>D,px:()=>E,q8:()=>N,sI:()=>M,vj:()=>w,zQ:()=>O});var a=n(848318),i=n(301168),o=n(660376),s=n(19180),l=n(382902);n(997401);var c=n(813009),d=n(329228),u=n(998568),p=n(613733),m=n(97239),_=n(318147),h=n(693246);function g(){return(0,l.md)((0,h.mZ)(!0))}function f(){return(0,l.md)((0,h.T_)(!0))}function E(){return(0,l.md)((0,h.Ji)(!0))}function y(e,r){let n=(0,l.md)((0,h.zl)(!0)),a=(0,l.md)((0,h.mZ)(!0));return S(n.transform(e=>e?.key),a.transform(e=>e?.key),p.A5.PlanHooks.useCurrentPrivilegedPlan,e,r?.sampleRate),(0,s.k)().plan_hook_migration&&r?.useSidebarOrOpenFile?a:n}function b({reportErrorsToTeam:e}){let r=y("useSuspendCurrentPrivilegedPlan"),[n]=(0,d.mI)(r);if("loaded"!==n.status){let r=Error("disabled"===n.status?"Plan fetching disabled":"Error fetching plan");throw(0,u.$D)(e,r),r}let a=n.data;if(!a){let r=Error("No Plan found");throw(0,u.$D)(e,r),r}return a}function v(e,r){let n=(0,l.md)((0,h.gq)(!0)),a=(0,l.md)((0,h.Ji)(!0));return S(n.transform(e=>e.planKey),a.transform(e=>e.planKey),p.A5.PlanHooks.useCurrentPlanUser,e,r?.sampleRate),(0,s.k)().plan_hook_migration&&r?.useSidebarOrOpenFile?a:n}function T(e,r){let n=(0,l.md)((0,h.KK)(!0)),a=(0,l.md)((0,h.T_)(!0));return S(n.transform(e=>e?.key),a.transform(e=>e?.key),p.A5.PlanHooks.useCurrentPublicPlan,e,r?.sampleRate),(0,s.k)().plan_hook_migration&&r?.useSidebarOrOpenFile?a:n}function I(e){return`${e.type}::${e.parentId}`}let S=(e,r,n,o,s=.1)=>{let l=(0,i.d4)(e=>e.selectedView?.view==="folder"),d=(0,c.R)(e=>({currentUserOrgId:e.currentUserOrgId,currentTeamId:e.currentTeamId,getTeamIdResult:(0,m.Z)(e),selectedView:e.selectedView?.view,openFileKey:e.openFile?.key,openFileParentOrgId:e.openFile?.parentOrgId,openFileTeamId:e.openFile?.teamId})),[u,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{setTimeout(()=>_(!0),2e3)},[]),(0,p.MF)({oldValue:e.transform(e=>I(e)),newValue:r.transform(e=>I(e)),label:n,contextArgs:{callsite:o,...d},sampleRate__UNSTABLE:s,trackLatency:!1,enableShadowRead:!l||u})};function A(e){return a.useMemo(()=>e.transform(e=>w(e)),[e])}function w(e){return!!e&&[_.Ag.PRO,_.Ag.STUDENT].includes(e.tier)}function C(e){return a.useMemo(()=>e.transform(e=>e.tier===_.Ag.STARTER),[e])}function N(e){return a.useMemo(()=>e.transform(e=>[_.Ag.STARTER,_.Ag.STUDENT].includes(e.tier)),[e])}function L(e){return a.useMemo(()=>e.transform(e=>O(e)),[e])}function O(e){return!!e&&[_.Ag.ORG,_.Ag.ENTERPRISE].includes(e.tier)}function R(e){return e?.key.type===_.OL.ORG?e?.key.parentId??void 0:void 0}function P(e){return a.useMemo(()=>e.transform(e=>e?.permission===_.Xn.ADMIN),[e])}function D(e){return a.useMemo(()=>e.transform(e=>F(e)),[e])}function k(e){return a.useMemo(()=>e.transform(e=>x(e)||F(e)),[e])}function M(e){return a.useMemo(()=>e.transform(e=>U(e)),[e])}function F(e){return e?.key.type===_.h4.ORG_USER&&e?.permission===_.Xn.ADMIN}function x(e){return e?.key.type===_.h4.ORG_USER&&e?.permission===_.Xn.MEMBER}function U(e){return e?.key.type===_.h4.ORG_USER&&e?.permission===_.Xn.GUEST}function B(e,r){switch(r){case _.Xn.ADMIN:return F(e);case _.Xn.MEMBER:return x(e)||F(e);case _.Xn.GUEST:return U(e)||x(e)||F(e);default:(0,o.xb)(r)}}},709884:(e,r,n)=>{n.d(r,{LC:()=>l,OL:()=>i.OL,i5:()=>s,s$:()=>o});var a=n(755595),i=n(318147),o=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(o||{}),s=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(s||{}),l=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(l||{});let c=a.z.object({supports:a.z.nativeEnum(s),enabled:a.z.nativeEnum(l)});a.z.object({disable_figjam:c,voice:c,disable_workshop:c,disable_ai_features:c})},955393:(e,r,n)=>{n.d(r,{Ef:()=>p,HT:()=>d,RB:()=>u,e0:()=>m});var a=n(660376);n(238444);var i=n(318147),o=n(709884);let s={[o.s$.VOICE]:{environments:{gov:o.i5.INELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.ELIGIBLE,[i.Ag.STUDENT]:o.i5.ELIGIBLE,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_WORKSHOP]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.UPSELL,[i.Ag.STUDENT]:o.i5.UPSELL,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_FIGJAM]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.UPSELL,[i.Ag.STUDENT]:o.i5.UPSELL,[i.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_AI_FEATURES]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[i.Ag.ORG]:o.i5.ELIGIBLE,[i.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[i.Ag.PRO]:o.i5.ELIGIBLE,[i.Ag.STUDENT]:o.i5.ELIGIBLE,[i.Ag.STARTER]:o.i5.ELIGIBLE}}};function l(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&s[r].environments.gov?s[r].environments.gov:e&&s[r]?.tiers[e.tier]?s[r].tiers[e.tier]:o.i5.INELIGIBLE}function c(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(l(e,r,n)===o.i5.INELIGIBLE||!e)return o.LC.DISABLED;let i=l(e,r,n);switch(r){case o.s$.VOICE:if(i===o.i5.ELIGIBLE)return e.voiceEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_FIGJAM:if(i===o.i5.ELIGIBLE)return e.figjamDisabledAt?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_WORKSHOP:if(i===o.i5.ELIGIBLE)return e.workshopEnabled?o.LC.DISABLED:o.LC.ENABLED;return o.LC.DISABLED;case o.s$.DISABLE_AI_FEATURES:if(i===o.i5.ELIGIBLE)return e.aiFeaturesEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;default:(0,a.xb)(r,"Unknown plan feature")}}function d(e){return{...e,voice:{supports:l(e,o.s$.VOICE),enabled:c(e,o.s$.VOICE)},disable_figjam:{supports:l(e,o.s$.DISABLE_FIGJAM),enabled:c(e,o.s$.DISABLE_FIGJAM)},disable_workshop:{supports:l(e,o.s$.DISABLE_WORKSHOP),enabled:c(e,o.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:l(e,o.s$.DISABLE_AI_FEATURES),enabled:c(e,o.s$.DISABLE_AI_FEATURES)}}}function u(e,r){switch(e){case i.OL.TEAM:return r.team;case i.OL.ORG:return r.org;default:(0,a.xb)(e)}}function p(e,r){return{...u(e,r),planType:e}}function m(e){return![i.Ag.STARTER,i.Ag.STUDENT].includes(e)}},847877:(e,r,n)=>{let a;n.d(r,{$y:()=>X,BT:()=>Y,B_:()=>eI,Bs:()=>Q,Cu:()=>ep,G1:()=>el,H4:()=>eS,I2:()=>M,IM:()=>ei,It:()=>eP,KB:()=>D,LL:()=>C,ME:()=>eE,Mw:()=>z,OD:()=>em,Q4:()=>U,Ql:()=>G,Qx:()=>eo,Rp:()=>x,Sf:()=>R,Sx:()=>en,Ty:()=>k,VM:()=>B,Vb:()=>ee,W5:()=>F,Xx:()=>L,_C:()=>J,b_:()=>K,cI:()=>O,d1:()=>a,dG:()=>eR,dM:()=>et,f$:()=>eu,f2:()=>er,fS:()=>eO,fd:()=>j,hY:()=>eT,i1:()=>q,iP:()=>W,jG:()=>eL,jS:()=>V,n4:()=>ef,nf:()=>Z,o5:()=>ed,oZ:()=>es,po:()=>P,q$:()=>$,qC:()=>ek,sd:()=>ea,wk:()=>N,xi:()=>w});var i=n(559389),o=n(938982),s=n(186606),l=n(693108),c=n(768618),d=n(998568),u=n(777055);let p=[],m=[],_=[],h=[],g=[],f=[],E=[],y=[],b=[],v=[],T=[],I=[],S=null,A=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=(0,c.UN)().get(e.id);n&&(e.type===s.iIc.STYLE_PROPERTY_CHANGE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_DELETE?n.styleKeyForPublish&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,l.nM)({key:n.styleKeyForPublish,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:(0,c.UN)().developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let a=(0,c.UN)().get(e.id);if(a){if(a.styleKeyForPublish){let n=r.events.filter(e=>e.type===s.iIc.STYLE_DELETE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE||e.type===s.iIc.DELETE).map(e=>{let r="";return e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE?r=a.containingCanvas||"":e.type===s.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(o.e.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=(0,c.UN)().get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===s.iIc.CREATE||r.type===s.iIc.DELETE||r.type===s.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function w(){a={selectionChange(e){for(let r of p)e?r.boxSelection():r.normal()},boxSelectionEnded(){for(let e of p)e.boxSelection.flush()},currentPageChange(){for(let e of m)e()},timerChange(e){for(let r of _)r(e)},documentChange(e){A.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},slidesViewChange(e){for(let r of b)r({view:e})},stackInvariantsEnforced(e){eD?.(e)},pluginPageLoaded(e){for(let r of v)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of I)r().forEach(r=>e.add(r));return Array.from(e)}}}function C(e){p.push({normal:e,boxSelection:(0,i.s)(e,500)})}function N(e){p=p.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function L(e){m.push(e)}function O(e){m=m.filter(r=>r!==e)}function R(e){_.push(e)}function P(e){_=_.filter(r=>r!==e)}function D(e){h.push(e)}function k(e){h=h.filter(r=>r!==e)}function M(e){for(let r of h)if(!1===r(e))return!1;return!0}function F(e){v.push(e)}function x(e){v=v.filter(r=>r!==e)}function U(e){T.push(e)}function B(e){T=T.filter(r=>r!==e)}function G(e){I.push(e)}function V(e){I=I.filter(r=>r!==e)}function H(){g.length||f.length||E.length?s.NfO.setIsDocumentChangeCallbackRegistered(!0):s.NfO.setIsDocumentChangeCallbackRegistered(!1)}function z(e){g.push(e),H()}function K(e){g=g.filter(r=>r!==e),H()}function W(e){f.push(e),H()}function j(e){f=f.filter(r=>r!==e),H()}function Y(e){E.push(e),H()}function $(e){E=E.filter(r=>r!==e),H()}function q(e){y.push(e)}function X(e){y=y.filter(r=>r!==e)}function J(e){b.push(e),H()}function Z(e){b=b.filter(r=>r!==e),H()}let{set:Q,remove:ee,has:et,runOrTimeout:er}=eM(),{set:en,remove:ea,has:ei,run:eo}=eM(),{set:es,remove:el,has:ec,run:ed,reset:eu,runOrTimeout:ep}=eM(),{set:em,remove:e_,has:eh,run:eg,reset:ef}=eM(),{set:eE,remove:ey,has:eb,run:ev,reset:eT}=eM(),{set:eI,remove:eS,has:eA,run:ew,reset:eC,runOrTimeout:eN}=eM();function eL(e){S=e}function eO(){return!!S}function eR(){S=null}async function eP(){return!S||await S()}let eD=null;function ek(e){return eD=e,()=>eD=null}function eM(){let e;let r=new Promise(r=>{e=r}),n=null,a=()=>{r=new Promise(r=>{e=r}),n=null},i=async(...e)=>{let n=await r;return await n(...e)};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&a()},has:()=>!!n,run:i,runOrTimeout:async(e,...r)=>{let n=!1,a=new Promise(r=>{setTimeout(()=>{n=!0,r()},e)}),o=await Promise.race([i(...r),a]);return n?{didRun:!1}:{didRun:!0,returnValue:o}},reset:a}}},20687:(e,r,n)=>{n.d(r,{$H:()=>eq,$u:()=>tu,AG:()=>te,Ar:()=>eT,Bw:()=>eQ,CA:()=>el,CB:()=>ew,DM:()=>td,Df:()=>Q,EK:()=>en,EY:()=>eD,GX:()=>J,Gc:()=>eJ,JT:()=>eZ,L1:()=>ez,L8:()=>e0,LW:()=>tl,M5:()=>e6,MB:()=>e_,MH:()=>eX,Mi:()=>e1,Ms:()=>eu,NW:()=>e9,Oe:()=>eh,Pl:()=>ei,Pz:()=>ee,Q4:()=>eP,Qx:()=>eS,Rd:()=>eL,Rt:()=>eO,Ru:()=>e7,SW:()=>eY,Sb:()=>et,T:()=>er,Tk:()=>eC,UH:()=>e4,VQ:()=>tp,W4:()=>ta,WC:()=>e3,YG:()=>ti,YQ:()=>tm,ZB:()=>e$,ZT:()=>ek,_H:()=>e8,_V:()=>ts,c2:()=>$,fR:()=>e2,i8:()=>ej,ky:()=>eR,lT:()=>eE,mI:()=>eK,mm:()=>ep,mx:()=>tc,my:()=>eN,nW:()=>eU,nf:()=>eW,oD:()=>ex,ou:()=>eG,pk:()=>e5,qH:()=>ec,t3:()=>em,tH:()=>eH,u0:()=>eV,uF:()=>eI,vj:()=>eF,wf:()=>eM,xC:()=>tt}),n(352004),n(301168);var a=n(430385),i=n(660376),o=n(938982),s=n(19180),l=n(621464),c=n(238444),d=n(476254),u=n(656329),p=n(210185),m=n(998568),_=n(810503),h=n(461979),g=n(540698),f=n(304756),E=n(967688),y=n(952039),b=n(809543),v=n(900003),T=n(823898),I=n(978181),S=n(162934),A=n(303397);n(489082);var w=n(103873),C=n(318147),N=n(280255),L=n(811085),O=n(477548),R=n(259964),P=n(553709),D=n(261354),k=n(764474),M=n(475166),F=n(906360),x=n(450586),U=n(722091),B=n(949064),G=n(825241),V=n(698429),H=n(913026),z=n(391720),K=n(577811),W=n(14837),j=n(741308),Y=n(794025);async function $(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:a}){let i=await em(e,{resourceType:n});if(r&&i.error?.text===eo)return i.manifest;if(i.error)throw Error((0,k.am)(i.error));return i.manifest}function q({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let a=!1;for(let{key:r,optional:n}of e){if(a&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(a=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let X={[R.nT.Design]:k.FW.FIGMA,[R.nT.DevHandoff]:k.FW.DEV,[R.nT.Whiteboard]:k.FW.FIGJAM,[R.nT.Slides]:k.FW.SLIDES,[R.nT.Sites]:k.FW.SITES,[R.nT.Figmake]:k.FW.SITES,[R.nT.Cooper]:k.FW.FIGMA,[R.nT.Illustration]:k.FW.FIGMA};function J(e){return X[e]}let Z={[k.FW.FIGMA]:R.nT.Design,[k.FW.DEV]:R.nT.DevHandoff,[k.FW.INSPECT]:R.nT.DevHandoff,[k.FW.FIGJAM]:R.nT.Whiteboard,[k.FW.SLIDES]:R.nT.Slides,[k.FW.SITES]:R.nT.Sites};function Q(e){return Z[e]}function ee(e){switch(e){case k.FW.FIGMA:case k.FW.DEV:case k.FW.INSPECT:return C._Y.DESIGN;case k.FW.FIGJAM:return C._Y.WHITEBOARD;case k.FW.SLIDES:return C._Y.SLIDES;case k.FW.SITES:return C._Y.SITES;default:(0,i.xb)(e)}}function et(e){switch(e){case k.FW.FIGMA:return M.$A.Design;case k.FW.FIGJAM:return M.$A.FigJam;case k.FW.DEV:case k.FW.INSPECT:return M.$A.Handoff;case k.FW.SLIDES:return M.$A.Slides;case k.FW.SITES:return M.$A.Design;default:(0,i.xb)(e)}}function er(){let e=d.D.getState().selectedView;if("fullscreen"===e.view)return X[e.editorType]}function en(e,r){return Array.isArray(r)?r.includes(e):e===k.FW.FIGMA}class ea extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function ei(){return eo}let eo='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function es(e,r){let n=new Set(k.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function el(e){return k.Kd.some(r=>e.includes(r))}class ec{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new ec([],void 0)}static forTest(e){return new ec(e||k.XS,void 0)}static forConsoleGlobal(){let e=[...k.pR];return(0,s.k)().first_draft_debug&&e.push("firstdraft"),new ec(e,void 0)}static forFirstPartyPlugin(){return new ec(k.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,s.k)().plugins_internal_apis)return new ec(r,"*");let n=es(r);return n.length<r.length&&(0,m.$D)(o.e.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new ec(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,L.eZ)(e.plugin_id))return new ec(es(r,(0,L.xp)(e.plugin_id)),(0,L.HB)(e.plugin_id));let n=es(r);return n.length<r.length&&(0,m.$D)(o.e.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new ec(n,void 0)}}function ed(e){try{return new URLPattern(e)}catch(e){return null}}function eu(e,r){let n=[],a=0;for(let[i,o]of r)n.push(e.substring(a,i)),a=o;return n.push(e.substring(a,e.length)),n.join("")}function ep(e,r,n){var a,i,o;let s,l,c,d,u;let p="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:k.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:k.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)p=c.containsWidget;else if("manifest"in r)try{p=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,U.MG)(c.editorType,F.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,U.MG)(c.capabilities,F.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let m=(0,Y.M)();if("manifest"in r&&m?.updateCachedContainsWidget({id:e,cachedContainsWidget:p}),!l)try{s=function(e,r){try{(0,U.MG)(e,"widget"===r.resourceType?F.Vf:F._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let a=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${a}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new ea(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(q(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,k.Av)(n)?q(n,n.name):(0,k.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new ea(eo,e);if(e.editorType.some(e=>!k.Ye.includes(e))||e.editorType.length<1||e.editorType.length>k.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!k.XS.includes(e));if(void 0!==r)throw new ea(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(k.Dk.includes(r)||function(e,r){throw new ea(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!(0,k.Pe)(e.editorType))throw new ea(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new ea(`Capability "${r}" is not supported for widgets`,e)}if((0,W.T)()&&!e.capabilities.includes("vscode"))throw new ea('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new ea("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new ea("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new ea("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],a=new Set;for(let i=0;i<e.codegenPreferences.length;i++){let o=e.codegenPreferences[i];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new ea(`Unknown language "${n}" in codegenPreferences[${i}].includedLanguages`,e);if((0,k.MP)(o)&&n.push(o),(0,k.Wt)(o)){if(a.has(o.propertyName))throw new ea('codegenPreferences "action" itemType settings must have unique propertyName values',e);a.add(o.propertyName)}if((0,k.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new ea('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new ea('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&(function(e){if(e.widgetApi&&e.editorType?.includes(k.FW.SLIDES))throw new ea("Widgets are not supported in Figma Slides",e)}(e),"1.0.0"!==e.widgetApi))throw new ea("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,x.pI)(e.networkAccess);if(!r.isValid)throw new ea(r.validationErr,e)}if(e.relatedLinkDomains){if(!(0,k.Pe)(e.editorType))throw new ea("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new ea(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ed(r))throw new ea(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!(0,k.Pe)(e.editorType))throw new ea("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new ea(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ed(r))throw new ea(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:p?"widget":"plugin"})}catch(e){l={type:k.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let _=p?(a=d,{...ef,editorType:a||void 0}):(i=d,o=u,{...eg,editorType:i||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??_,localFileId:e,localFilePath:r.path,error:l}}async function em(e,r){let n=(0,Y.M)();try{if(!n)throw Error("desktopApp not available");let a=await n.getLocalFileExtensionManifest(e);return ep(e,a,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?ef:eg,localFileId:e,localFilePath:"",error:{type:k.ho.LOAD,text:n.message}}}}async function e_(e){let r;let n=(0,Y.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let a=r.source;return r.html&&(a=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let a=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${a}};${e}`}(a,r.html)),a}function eh(e){return e.error?.text===eo?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let eg={id:"",name:"",api:"",main:""},ef={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},eE={id:"",plugin_id:"",manifest:{...eg},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1},ey={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:P.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,community_publishers:{accepted:[],pending:[]},comments_setting:w.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eb={...ey,is_widget:!0},ev={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:w.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:I.J.Actions.NOOP};function eT(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function eI(e){let r=eT(e);return null===r?eE:r}function eS(e,r){if((0,j.ZY)(r))return(0,j.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let eA=e=>e?.containsWidget?eb:ey;function ew(e,r,n,a){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(a){if(e&&e[a])return e[a];if(r&&r[a])return r[a]}return eA(n?.manifest)}function eC(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eN(e,r){return(0,H.Hc)(e,r,ey)}function eL(e,r){return(0,H.Hc)(e,r,eb)}function eO(e){return!!e?.roles?.org}function eR(e,r,n=!0){let a={};return Object.keys(e).forEach(i=>{let o=e[i],s=n?z.jY:z.Ro;((0,S.Dd)(o,r)||s(o,r))&&(a[i]=e[i])}),a}function eP(e){return(0,a.LN)(Object.keys(e).map(r=>eI(e[r]))).map(r=>e[r.plugin_id])}function eD(e,r){let n=e.roles,a=!r.is_public&&(0,T.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||a}function ek(e){if(!e)throw Error("Code string cannot be empty");let r=(0,h.YH)(e).length;if(r>H.yO)throw Error(`plugin code exceeds max size of ${Math.floor(H.yO/1e6)}MB`);return r}function eM(e){return(0,S.Wl)(e,(0,E.t)("community.publishing.extension_icon_image"))}async function eF(e,r){return eM(e),await eB(e,{width:K.DK,height:K.DK},r,(0,E.t)("community.publishing.error_icon_image_dimensions"))}function ex(e){return(0,S.Wl)(e,"Artwork image")}function eU(e){let r=e?.[0];if(!r)throw Error((0,E.t)("community.publishing.error_file_not_found"));return r}async function eB(e,r,n,a){let{width:i,height:o}=r,s=URL.createObjectURL(e),l=await (0,S.l8)(s);try{if(!function(e,r,n){let{width:a,height:i}=r;return e.width===a&&e.height===i||n&&e.width%a==0&&e.height%i==0&&e.width/a==e.height/i}(l,r,n))throw Error(a);if(l.width===i&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=i,n.height=o,n.getContext("2d").drawImage(l,0,0,i,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eG(e){let r=(await f.Ay.post(`/api/${(0,H.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function eV(e,r,n){return e?.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function eH(e,r){return r===k.Lu.ORG?e?{org:e}:(l.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function ez(e){return e.name===ev.name&&e.newVersionReleaseNotes===ev.newVersionReleaseNotes&&e.supportContact===ev.supportContact&&e.description===ev.description&&e.iconSrc===ev.iconSrc&&e.coverImageSrc===ev.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function eK(e,r,n,a,i){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=ew(e.publishedPlugins,e.publishedWidgets,s,n),d=eI(c),u=l?.permissions?.includes("payments");try{o=(0,S.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:p,pending:m}=c.community_publishers,_={...(0,G.Rs)(),tokens:(c.community_publishers?[...p.map(e=>({...e,isPending:!1})),...m?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,S.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:O.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||ev.name,currentVersionReleaseNotes:d.release_notes||ev.newVersionReleaseNotes,newVersionReleaseNotes:ev.newVersionReleaseNotes,tags:c.tags,tagsV2:c.tags_v2&&Object.keys(c.tags_v2),supportContact:c.support_contact||e.user?.email||ev.supportContact,description:d.description||ev.description,tagline:d.tagline||ev.tagline,creatorPolicy:d.creator_policy??ev.creatorPolicy,iconSrc:d.redirect_icon_url||ev.iconSrc,widgetSnapshotImageSrc:a||d.redirect_snapshot_url||ev.widgetSnapshotImageSrc,widgetSnapshotImageBlob:i||ev.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||ev.coverImageSrc,iconImageError:ev.iconImageError,coverImageError:ev.coverImageError,widgetSnapshotImageError:ev.widgetSnapshotImageError,twoFactorAuthDisabledError:ev.twoFactorAuthDisabledError,emailNotVerifiedError:ev.emailNotVerifiedError,accountDetailsChangedError:ev.accountDetailsChangedError,freemiumRequiredForMigrating:ev.freemiumRequiredForMigrating,author:o,publishers:_,creators:p.map(e=>({...e,isPending:!1})).concat((m??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,S.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===P.o1.USER),commentsSetting:c.comments_setting||ev.commentsSetting,categoryId:c.category_id||ev.categoryId,blockPublishingOnToS:(0,S.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:I.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||u,price:(0,v.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:u,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,b.N6)(c)}}function eW(e){return!!eI(e).id&&!e.unpublished_at}function ej(e){if(!e)return{};let r={};return e.forEach(e=>{eW(e)&&(r[e.id]=e)}),r}function eY(e,r,n,a){let i={};return(e.email_validated_at||(i.emailNotVerifiedError=(0,E.t)("community.publishing.please_verify_your_email_address_to_publish")),a||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==P.aP.FAILURE||r.error!==(0,E.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!a&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===P.aP.FAILURE&&r.error===(0,E.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?i.accountDetailsChangedError=(0,E.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===P.aP.FAILURE&&r.error&&(i.other=r.error):i.twoFactorAuthDisabledError=n?(0,E.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,E.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),i}function e$(e,r,n,a){if(!e)return{};let i={};0===(0,H.Yp)(e.name).length&&(i.name=(0,E.t)("community.publishing.name_must_not_be_empty")),0===(0,H.Yp)(e.tagline).length&&(i.tagline=(0,E.t)("community.publishing.add_a_tagline")),(0,p.ZB)(e.description)&&(i.description=(0,E.t)("community.publishing.add_a_description"));let o=(0,H.Yp)(e.supportContact);if(0===o.length?i.supportContact=(0,E.t)("community.publishing.support_contact_must_not_be_empty"):(0,c.xf)(o)||(0,h.gU)(o)||(i.supportContact=(0,E.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,H.Yp)(e.iconSrc).length&&(i.iconImageError=(0,E.t)("community.publishing.icon_cant_be_empty")),i.carouselMedia=(0,S.vC)(e.carouselMedia),e.categoryId||(i.categoryId=(0,E.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||a?.third_party_m10n_status!==D.PN.FLAGGED||(i.freemiumRequiredForMigrating=(0,E.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let a=r.editorType[0],o=e.playgroundFigFile.editor_type;if(a===k.FW.FIGMA&&"design"!==o||a===k.FW.FIGJAM&&"whiteboard"!==o){let e=a===k.FW.FIGMA?(0,E.t)("community.publishing.playground_file.figma"):(0,E.t)("community.publishing.playground_file.figjam");i.playgroundFigFile=n?(0,E.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,E.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,H.Yp)(e.widgetSnapshotImageSrc).length&&(i.widgetSnapshotImageError=(0,E.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,E.t)("community.publishing.price_is_required_for_paid_resources");if((0,v.Yp)(e.price))return e.price<v.mZ?(0,E.t)("community.seller.paid_resource_minimum_err"):(0,E.t)("community.seller.paid_resource_maximum_err");if((0,v.F8)(e.price))return(0,E.t)("community.seller.prices_must_follow_format");if(!r||(0,T.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,v.Mj)(n/100,e.price)?(0,E.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,v.WD)(n/100,e.price)?(0,E.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,a);s&&(i.price=s);let l=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,E.t)("community.seller.discount_must_follow_format"):null;return l&&(i.annualDiscount=l),i}function eq(e){if(!e)return{};let r={},n=(0,H.Yp)(e.name).length;n<4?r.name=(0,E.t)("community.publishing.name_must_be_4_characters_long"):n>100&&(r.name=(0,E.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,H.Yp)(e.description).length>1e4&&(r.description=(0,E.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,H.Yp)(e.newVersionReleaseNotes).length>1e4&&(r.newVersionReleaseNotes=(0,E.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,H.Yp)(e.creatorPolicy).length>1e4&&(r.creatorPolicy=(0,E.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long"));let a=(0,H.Lg)(e.tagline);return a&&(r.tagline=a),(0,H.Yp)(e.supportContact).length>100&&(r.supportContact=(0,E.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(r.iconImageError=e.iconImageError),e.coverImageError&&(r.coverImageError=e.coverImageError),r}function eX(e){return(0,k.k0)(e.plugin)}function eJ(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:a,publishedWidgets:i}=d.D.getState(),s=!e.widgetVersionId,l=e.widgetId;if(l){if(s){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e2((0,E.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=a[l]?.[e.widgetVersionId]||i[l]&&eI(i[l])))return;r.id===e.widgetVersionId||(0,g.nl)()||(0,g.Lg)()||(0,m.$D)(o.e.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function eZ(e){let r=e.canRunPluginState?e.canRunPluginState:d.D.getState();if(!(0,N.Eh)(r))return{canRun:!1,message:"Cannot run plugin because canViewPlugins returned false"};if(!eQ(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:a}=e;if((0,k.ZQ)(n))return(0,k.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(a){if(!en(X[a],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(a===R.nT.DevHandoff&&!e6(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"};if(a===R.nT.Slides&&!tn(n))return{canRun:!1,message:"Cannot run non-slides plugin in slides mode"}}return{canRun:!0}}function eQ(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,k.ZQ)(r)||(0,k.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let a=(0,k.k0)(r);return(a?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(a?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e0(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e1(e,r){return r?.localFileId||e?.id||""}function e2(e){(0,B.pN)({shouldShowVisualBell:!0});let r=(0,Y.M)();A.Y5.dispatch(y.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e3(){A.Y5.dispatch(y.F.dequeue({matchType:"plugins-runtime-error"}))}function e8(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e6(e,r){return!!(!(0,W.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&(0,k.Pe)(e.manifest.editorType)&&!(0,k.k0)(e)}function e4(e){return e6(e)&&tu(e.manifest.capabilities)}function e5(e){return e6(e)&&e.manifest?.capabilities?.includes("codegen")}function e7(e){return e.manifest?.capabilities?.includes("textreview")}function e9(e,r,n){return Object.fromEntries(Object.entries(r).filter(([r,a])=>tr(e,a,n)))}function te(e,r){return r.filter(r=>tr(e,r))}function tt(e,r){return Object.fromEntries(Object.entries(r).filter(([r,n])=>tr(e,eI(n))))}function tr(e,r,n){if(!e)return!0;switch(e){case R.nT.Whiteboard:case R.nT.Design:case R.nT.Illustration:return en(X[e],r.manifest.editorType);case R.nT.DevHandoff:return e6(r,n);case R.nT.Slides:return tn(r);case R.nT.Figmake:case R.nT.Sites:case R.nT.Cooper:return!1;default:(0,i.xb)(e)}}function tn(e){return en(k.FW.SLIDES,e.manifest.editorType)&&!(0,k.k0)(e)}function ta(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=d.D.getState().selectedView;return(0,V.$A)(r)}function ti(e){return e?.manifest.editorType?.length===1&&(0,k.Pe)(e.manifest.editorType)}function to(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function ts(e){return ti(e)&&to(e)}function tl(e){return(0,k.Pe)(e.manifest.editorType)&&to(e)}function tc(e){let r=d.D.getState().selectedView;return(0,V.$A)(r)&&tl(e)}function td({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let a=r&&r[e];if(a)return a;let i=n?.[e];return i?eT(i):null}function tu(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tp(e){let r=er(),n=e&&e?.plugin&&ts(e?.plugin);return e&&r&&en(r,e.plugin.manifest.editorType)&&("dev"!==r||e6(e.plugin))&&("slides"!==r||tn(e.plugin))&&!n}function tm(){return(0,W.T)()?"plugins-menu-open-directory-vscode":u.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},578461:(e,r,n)=>{n.d(r,{C3:()=>i,SH:()=>o}),n(20687);let a=null;function i(e){a=e}function o(){return a}},567587:(e,r,n)=>{n.d(r,{R:()=>o}),n(918777);var a=n(566726),i=n(922484);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=a.uF.loadingKeyForPayload();(0,i.Sc)(r,n)&&e.dispatch(a.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.LP.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&await e.dispatch(a.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=a.a8.loadingKeyForPayload(n);(0,i.Sc)(r,o)&&e.dispatch(a.a8(n))}}},280361:(e,r,n)=>{n.d(r,{R:()=>h}),n(848318);var a=n(680136),i=n(660376),o=n(334704),s=n(621464),l=n(476254),c=n(540698),d=n(677103);n(578590),n(730143);var u=n(847877);n(532511);var p=n(698429);n(710923);var m=n(452011);let _=class e{constructor(){this.runQueue=[],this.currentRunState=null,this.MAX_RESOLVE_ITERATIONS=10,this.upgradeHandler=null}setUpgradeHandler(e){this.upgradeHandler=e}handleUpgrade(e){this.upgradeHandler&&this.upgradeHandler(e)}enqueue(e){let{runPluginArgs:r,onStart:n,mode:i,reuseExistingRunState:o=!0}=e,{plugin:s}=r;if(!(0,p.$A)(l.D.getState().selectedView))return(0,a.bT)(r);if(s.manifest.containsWidget)throw Error("Cannot enqueue a plugin that contains a widget");let c=this.createTask(n),d=this.findExistingRunState(e);if(o&&d)this.log("enqueue","Found existing run state, pushing runTask onto existing runState",{existingRunState:d,runTask:c}),d.runTasks.push(c),d===this.currentRunState&&"settled"===d.status&&this.resolveAllPromises(this.currentRunState);else{let e={runPluginArgs:r,runTasks:[c],mode:i,status:"idle"};this.log("enqueue","Creating new run state and adding to queue",{runState:e}),this.addToQueue(e),this.runNextPlugin()}return c.promise}getCurrentRunStatusOrNull(){return this.currentRunState?.status??null}getRunQueueLength(){return this.runQueue.length}async runNextPlugin(){if(await this.maybeTerminatePluginBeforeRun(),(0,m.hw)())return;let e=this.runQueue.shift();if(!e)return;this.currentRunState=e,this.prepPluginForRun(e.runPluginArgs.plugin);let r=this.runPlugin(e);await this.resolveAllPromises(e),await r,this.log("runNextPlugin","Finished running plugin",{runState:e}),this.runNextPlugin()}runPlugin(e){this.log("runNextPlugin","Running plugin",{runState:e});let{runPluginArgs:r}=e;return(0,a.bT)(r)}setRunPluginForTest(e){if(!(0,c.nl)())throw Error("Cannot set run plugin for test when not running interaction tests");this.runPlugin=e}createTask(e){let r=()=>{},n=()=>{};return{promise:new Promise((e,a)=>{r=e,n=a}),resolve:r,reject:n,onStart:e}}async resolvePromise({resolve:e,reject:r,onStart:n}){try{let r=await n?.();e(r)}catch(e){r(e)}}async resolveAllPromises(e){this.log("runNextPlugin","Resolving all promises",{runState:e}),e.status="resolving";let r=0;for(;r<this.MAX_RESOLVE_ITERATIONS;){let n=e.runTasks;if(0===n.length)break;e.runTasks=[],await Promise.allSettled(n.map(e=>this.resolvePromise(e))),r++}await this.maybeTerminatePluginAfterRunSettled(e),e.status="settled",this.log("runNextPlugin","Resolved all promises",{runState:e})}addToQueue(e){switch(this.log("addToQueue","Adding to queue",{toAdd:e}),e.mode){case"run-forever":case"run-and-terminate":this.runQueue.push(e);break;default:(0,i.xb)(e.mode)}}async maybeTerminatePluginBeforeRun(){let e=(0,m.hw)();(!!e!=!!this.currentRunState||this.currentRunState?.status==="settled"&&this.currentRunState?.runPluginArgs.plugin.plugin_id===e?.plugin_id)&&(this.log("maybeTerminatePluginBeforeRun","Terminating plugin"),await this.terminatePlugin())}async maybeTerminatePluginAfterRunSettled(e){let{mode:r}=e;switch(this.log("maybeTerminatePluginAfterRunSettled","Maybe terminating plugin",{toMaybeTerminate:e}),r){case"run-forever":this.runQueue.length>0&&await this.terminatePlugin();break;case"run-and-terminate":await this.terminatePlugin();break;default:(0,i.xb)(r)}}async terminatePlugin(){this.log("terminatePlugin","Terminating plugin"),this.currentRunState=null,await (0,m.wY)(),await (0,o.yQ)()}findExistingRunState({runPluginArgs:e,mode:r}){let n=this.currentRunState?.runPluginArgs.plugin.plugin_id;return n===e.plugin.plugin_id&&m.hw()?.plugin_id===n?this.currentRunState:this.runQueue.find(n=>n.runPluginArgs.plugin.plugin_id===e.plugin.plugin_id&&n.mode===r)}isCurrentlyRunning({runPluginArgs:e,mode:r}){return!!this.findExistingRunState({runPluginArgs:e,mode:r})}prepPluginForRun(e){this.log("prepPluginForRun","Prepping plugin for run",{plugin:e}),(0,d.dW)(e,null),(0,u.f$)(),(0,u.n4)(),(0,u.hY)()}log(r,n,a={}){if(!e.debug)return;let i={currentRunState:this.currentRunState,runQueue:this.runQueue,runningPluginState:m.iu,...a};s.k.log("[PluginManager]",`[${r}]`,n,i)}};_.instance=new _,_.debug=!1;let h=_},811085:(e,r,n)=>{n.d(r,{HB:()=>x,Ph:()=>m,T0:()=>v,Up:()=>B,eZ:()=>F,sA:()=>G,xp:()=>U,yb:()=>V});var a=n(615233),i=n(540698),o=n(764474);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",p="1100947233945489758",m="1274481464484630971",_="1220512233196109878",h="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",v="1268676638869538880",T="1217135789855512677",I="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[_]:["analytics","openexternal"],[h]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[p]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[m]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},A={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[p]:"https://www.figma.com"},w={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[T]:["analytics","openexternal"],[I]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1441501928920333946":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[v]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},C={[T]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},N={[_]:(0,a.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},L={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},O=new Set([T,I]),R=new Set([_,h,g,"1220851659530313303"]),P=["1286790870036328880"],D=["1286792998372727741","1471237098317254321","1499098169301830432","1497629632442770130"],k={},M={};function F(e){return"prod"===(0,a.tl)().cluster_name?e in A||e in S:"staging"===(0,a.tl)().cluster_name?e in L||e in w:(0,i.nl)()||(0,i.Lg)()?e in k:!!(0,a.IX)()}function x(e){return"prod"===(0,a.tl)().cluster_name?e in A?A[e]:void 0:"staging"===(0,a.tl)().cluster_name?e in L?L[e]:void 0:(0,i.nl)()||(0,i.Lg)()?e in k?k[e]:void 0:(0,a.IX)()?"*":void 0}function U(e){if(!F(e))throw Error("Untrusted pluginID");return"prod"===(0,a.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,a.tl)().cluster_name?new Set(w[e]??[]):(0,i.nl)()||(0,i.Lg)()?new Set(M[e]??[]):(0,a.IX)()?new Set(o.UX):new Set}function B(){return"prod"===(0,a.tl)().cluster_name?R:"staging"===(0,a.tl)().cluster_name?O:((0,i.nl)()||(0,i.Lg)()||(0,a.IX)(),new Set)}function G(e){return"prod"===(0,a.tl)().cluster_name?N[e]:"staging"===(0,a.tl)().cluster_name?C[e]:void 0}function V(e){return"prod"===(0,a.tl)().cluster_name?D.includes(e):"staging"===(0,a.tl)().cluster_name?P.includes(e):!!((0,i.nl)()||(0,i.Lg)())||!!(0,a.IX)()}},800802:(e,r,n)=>{n.d(r,{ng:()=>a,uU:()=>f});var a,i=n(430385),o=n(19180),s=n(918777),l=n(30575),c=n(318147),d=n(253332),u=n(407638),p=n(957273),m=n(504131),_=n(656320);let h="pro_trials_v3",g=c.GP.PRO_TRIAL,f="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,o.k)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.k)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.k)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,a,i){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:a,userCanEditTeam:(0,u.canEditTeam)(c,i),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let a=Object.values(n.teams),o=(0,i.WI)(a.map(a=>e.getProTrial(a,!!r[a.id]?.[f],n))),l=o.filter(e=>e.status===p.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,s.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=o.filter(e=>e.status===p.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,s.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,a,i){let o=(0,d.Rx)(a),s=Object.values(a.teams).filter(s=>e.canStartProTrial(r,n,o,s,a,i));return s.sort((e,r)=>(r.editors??0)-(e.editors??0)),s},e.canStartProTrial=function(r,n,a,i,o,l){return!(!r||!e.entryEnabled()||(0,d.w5)(i)||i.stripe_customer_id||!n||a||!(0,u.canEditTeam)(i.id,o)||30>(0,s.A)().utc().diff((0,s.A)(r.created_at).utc(),"days",!0)||(0,s.A)().utc().diff((0,s.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(i)||Object.keys(l).some(e=>!!l[e][f]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,s.A)(e).diff((0,s.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&g===r.grace_period_type?new Date(r.grace_period_end)<new Date?p.a.TRIAL_EXPIRED:p.a.IN_TRIAL:null}function a(e){return!!e&&e.status===p.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.getProTrialStatusLG=function(e){return n(m.w.toSinatra(e))},e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,_.K)(e)},e.canSeeProTrialUx=a,e.canSeeProTrialUxInFile=function(e,r){return a(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==p.a.TRIAL_EXPIRED)return!1;let n=(0,s.A)().utc().diff((0,s.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,a){if(!n)return!1;let i=!!r[n.id]?.[f],o=e.getProTrial(n,i,a);return e.canSeeProTrialExpiryUx(o)}})(a||(a={}))},213457:(e,r,n)=>{n.d(r,{Q:()=>a});let a=(0,n(848318).createContext)({useLargePreviewRows:!1,showTransformModifiersSelectionActions:!1,showEntrypointMenusInPropertyLists:!1,noLayoutPanel:!1,mergeLayerHeaderWithTransformPanel:!1,hideVariableEntrypoints:!1,showIllustrationSliderInputs:!1})},313405:(e,r,n)=>{n.d(r,{Bx:()=>T,CV:()=>C,Cs:()=>R,Hs:()=>b,Jr:()=>N,KJ:()=>L,M9:()=>E,RL:()=>y,Rv:()=>f,Zh:()=>k,_P:()=>D,e:()=>I,eA:()=>A,fz:()=>v,mf:()=>P,qb:()=>g,ql:()=>w,t0:()=>O,yE:()=>S});var a=n(660376),i=n(938982),o=n(186606),s=n(159563),l=n(857607),c=n(656329),d=n(998568),u=n(151223),p=n(453370);n(899386);var m=n(353231);n(303397),n(489082);var _=n(318147),h=n(656320);function g(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function f(e){return"fixed"}function E(e){let r=function(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,a.xb)(e)}}(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??g(r),contentScalingMode:n?.contentScalingMode??f(r)}}function y(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function b(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function v(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let T=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,I=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==_._Y.SLIDES,S=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,A=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function w(e){return!1}function C(e){return e.keyCode===l.Uz.X&&e.metaKey&&e.ctrlKey&&e.altKey}let N=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(D({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let a=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(p.$T(a))}}),L=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let a={...n,showHotspots:r};e.dispatch(p.$T(a))}}),O=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to show device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to show device frame");let i={...n,showDeviceFrame:r};e.dispatch(p.$T(i))}),R=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set initial device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set initial device frame");let i={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(p.$T(i))}),P=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,a.B1)(n,"selectedView must be defined to set override device frame"),(0,a.vA)("prototype"===n.view,"must be in the view to set override device frame");let i={...n,overrideDevice:r};e.dispatch(p.$T(i))}),D=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},i=(0,h.U2)(n.selectedView);m.ds(r.name,i,n,a)}),k=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),a=r.params||{},o=(0,h.U2)(n.selectedView);if(!o){(0,d.$D)(i.e.PROTOTYPING,Error("No file key for prototype event"));return}m.GS(r.name,o,n,a)});return({name:r,params:n})=>e({name:r,params:n})})()},244979:(e,r,n)=>{n.d(r,{Ik:()=>g,LT:()=>p,ZK:()=>_,lD:()=>u,qI:()=>h,vp:()=>m});var a=n(328813),i=n(186606),o=n(553547),s=n(637640),l=n(287105),c=n(764286),d=n(318147);function u(e,r,n,a,d){let u={},p=(0,l.qg)(s.Ay.location.search);for(let e in p)""!==e&&(u[e]=p[e]);return e.scalingInfo?.viewportScalingMode&&(u.scaling=e.scalingInfo.viewportScalingMode),e.scalingInfo?.contentScalingMode&&(u["content-scaling"]=e.scalingInfo?.contentScalingMode),e.pageId&&o.fn(o.sH(e.pageId))&&(u["page-id"]=e.pageId),e.nodeId&&o.fn(o.sH(e.nodeId))&&(u["node-id"]=(0,c.EO)(e.nodeId)),e.startingPointNodeId&&o.fn(o.sH(e.startingPointNodeId))&&(u["starting-point-node-id"]=e.startingPointNodeId),r&&n&&(u["prev-plan-id"]=r,u["prev-plan-type"]=n),e.prevSelectedView&&(u["prev-selected-view"]=e.prevSelectedView.view,"recentsAndSharing"===e.prevSelectedView.view?u["prev-tab"]=e.prevSelectedView.tab:"folder"===e.prevSelectedView.view&&(u["folder-id"]=e.prevSelectedView.folderId)),e.share&&(u.share="1"),e.disableDefaultKeyboardNav?u["disable-default-keyboard-nav"]="1":delete u["disable-default-keyboard-nav"],e.hideUI?u["hide-ui"]="1":delete u["hide-ui"],e.showProtoSidebar||void 0===e.showProtoSidebar&&i.X3B?.isViewerSidebarShownByDefault()?u["show-proto-sidebar"]="1":delete u["show-proto-sidebar"],null==e.showHotspots||e.showHotspots?delete u["hotspot-hints"]:u["hotspot-hints"]="0",null==e.showDeviceFrame||e.showDeviceFrame?delete u["device-frame"]:u["device-frame"]="0",e.inlinePreview?u["inline-viewer"]="1":delete u["inline-viewer"],e.versionId&&(u["version-id"]=e.versionId),e.isAudienceViewPopout&&(u.popout=!0),delete u.mode,delete u.fuid,a&&(u.t=a),d&&(u["open-popout"]="true"),u}function p(e,r,n){var i;let o=u(e,r,n),s=[];return(r||n)&&(s.push("prev-plan-id"),s.push("prev-plan-type")),e.prevSelectedView&&(s.push("prev-selected-view"),"recentsAndSharing"===e.prevSelectedView.view?s.push("prev-tab"):"folder"===e.prevSelectedView.view&&s.push("folder-id")),e.isAudienceViewPopout&&s.push("popout"),e.share&&s.push("share"),i=o,s.forEach(e=>{delete i[e]}),o=i,(0,a.Im)(o)?"":`?${(0,l.lF)(o)}`}function m(e,r,n,i,o){let s=u(e,r,n,i,o);return(0,a.Im)(s)?"":`?${(0,l.lF)(s)}`}function _(e){return e?`#${encodeURIComponent(e)}`:""}function h(e,r){return r===d._Y.SLIDES?e.replace(/proto/,"deck"):e}function g(e){if(!e)return!1;try{new URL(e)}catch(e){return!1}var r=window.location.origin;return e.startsWith(r+"/proto")}},28589:(e,r,n)=>{n.d(r,{C$:()=>s,Cp:()=>d}),n(848318),n(301168);var a=n(186606);n(382902);var i=n(7376);n(244534),n(995218),n(887836),n(546021);var o=n(944239);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(292024),n(730143),n(526594);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){i.x4&&i.x4.setItem(l,e===a.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(i.x4){let e=i.x4.getItem(l);if(e)return e===c?a.xae.ASSETS:a.xae.LAYERS}return null})},394882:(e,r,n)=>{n.d(r,{H4:()=>u,Ud:()=>d,cZ:()=>m});var a=n(848318),i=n(301168),o=n(660376),s=n(536384),l=n.n(s),c=n(764872);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:i=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...i):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,i)=>e&&a.createElement(p,{key:e.key??i,isVisible:s,className:r,displayAs:n},e)):o&&a.createElement(p,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class p extends a.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.xb)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return a.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}function m(e,r){"function"==typeof e?e(r):e&&(e.current=r)}p.defaultProps={displayAs:"contents"},p.displayName="CachedSubtreeComponent",(0,i.Ng)(void 0,e=>({dispatch:e}))},722563:(e,r,n)=>{n.d(r,{JG:()=>_,Jl:()=>h,SO:()=>m,U_:()=>p,X2:()=>E,gJ:()=>g,ul:()=>f});var a=n(660376),i=n(7376),o=n(995218),s=n(318147),l=n(324747),c=n(259964),d=n(475166),u=n(20687);function p(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:(0,c.yY)(e)?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:e===c.nT.Cooper?d.$A.Cooper:null}let m="recent-face-stamps-figjam",_="recent-whiteboard-tools-figjam";function h(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return m;case d.dB.WHITEBOARD_TOOL:return _;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}if(e===d.$A.Handoff)return r===l.bD.PLUGIN?"recent-plugins-handoff":null;if(e===d.$A.Slides)switch(r){case l.bD.HUB_FILE:return"recent-templates-piper";case l.bD.PLUGIN:return"recent-plugins-slides"}return null}function g(e,r){if(!i.x4)return[];let n=[],a=h(e,r),o=a&&i.x4.getItem(a);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,a.xb)(e)}}},671989:(e,r,n)=>{n.d(r,{Aw:()=>b,XV:()=>f,v9:()=>y}),n(430385);var a=n(186606);n(320953);var i=n(382902),o=n(989232),s=n(813147),l=n(526867),c=n(277454),d=n(555958),u=n(720722),p=n(475166);n(184226),n(739321);var m=n(360430),_=n(106358),h=n(337609);let g=e=>null==e||e.type===u.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function f(e,r,n){if(!e)return{selectedItem:null,selectedLibraryKey:null,relatedItems:[]};let a=(0,h.QL)(e,n);if(!a)return function(e,r){let n=(0,l.Qx)(r),a=r.local.components[e]??r.local.stateGroups[e],i=g(a),o=i?n[i]:a,s=E(o,Object.values(n??{}));return{selectedItem:o,selectedLibraryKey:o?.library_key??null,relatedItems:s}}(e,r);let{publishID:o,libraryKey:s}=a,d=i.zl.get(_.qp)[s],u=(0,c.iP)(r.publishedByLibraryKey.components,{library_key:s,team_id:d?.team_id??null}),p=(0,c.iP)(r.publishedByLibraryKey.stateGroups,{library_key:s,team_id:d?.team_id??null}),m={...(0,l.Jl)(u),...p},f=function(e,r){let n=g(e);return n?r[n]:e}(u[o]??p[o],m),y=E(f,Object.values(m??{}));return{selectedItem:f,selectedLibraryKey:s,relatedItems:y}}function E(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,d.ke)(e.name).length)return[];let n=(0,d.In)(e.name);return r.filter(r=>(0,c.nJ)(r.containing_frame,e?.containing_frame)&&(0,d.In)(r.name)===n)}function y(e,r,n,i,l,c,d,_){if(e){if((0,m.Oo)(e,n)){if(e.type===u.PW.COMPONENT){let r=e.node_id;a.glU.replaceSymbolBackingInstances({[r]:i},c)}else{let r=a.glU.getSimilarStates(i,e.node_id,"");a.glU.replaceSymbolBackingInstances(r,c)}(0,o.trackEvent)("Instance Swapped To Local Component",{source:l,...d,queryId:_})}else r(s.uO({item:e,instanceGUIDs:i,sourceForTracking:l,storeInRecentsKey:p.$A.Design,usedSwapInstanceKeyboardShortcut:c,queryId:_??void 0}))}}function b(e){a.glU.replaceSymbolBackingInstances(e,!1)}},172797:(e,r,n)=>{n.d(r,{Dc:()=>F,hI:()=>R,hV:()=>C.h,mU:()=>M});var a=n(818995),i=n(938982),o=n(186606),s=n(19180),l=n(656470),c=n.n(l),d=n(989232),u=n(29188),p=n(238444),m=n(476254),_=n(998568),h=n(810503),g=n(304756),f=n(225495),E=n(844525),y=n(967688),b=n(952039),v=n(113752),T=n(151223),I=n(197665),S=n(439952),A=n(911947),w=n(665411),C=n(9631),N=n(7905),L=n(303397),O=n(328640);let R={downloadFile(e,r=null){let n=document.createElement("a");n.setAttribute("href",e),r&&(n.download=r),document.body.appendChild(n),n.click(),document.body.removeChild(n)},async addAssetsToZip(e,r,n,a,i){let o=[],s=[],l={},c={};if(0===r.length&&0===n.size)return;async function d(r){let n=2e3;for(;;)try{return await r()}catch(r){if(e())return;await new Promise(e=>setTimeout(e,n)),n<32e3&&(n*=2)}}for(let n=0;n<r.length&&!e();n+=100)await d(async()=>{let e=await g.Ay.post(`/file/${a}/image/batch`,{sha1s:r.slice(n,n+100)});o=o.concat(Object.keys(e.data.meta.s3_urls)),l={...l,...e.data.meta.s3_urls}});n.size>0&&await d(async()=>{let e=(await N.S.getVideos({fileKey:a})).data.meta.videos;for(let r in e)n.has(r)&&(c[r]=e[r]);s=Object.keys(c)});let u=o.length+s.length,p=u;P(u,u);let m=[];async function _(r){for(;r.nextIdx<r.queue.length&&!e();){let n=r.queue[r.nextIdx];r.nextIdx++,await d(async()=>{let a=(await g.Ay.crossOriginGetAny(r.urls[n],null,{responseType:"blob"})).response;if(P(--u,p),e())return;let o=await (0,f.v)();i.zipPromise=i.zipPromise.then(()=>i.zipWriter.add(`${r.prefix}/${n}`,new o.BlobReader(a),{level:0}))})}}let h={prefix:"images",queue:o,nextIdx:0,urls:l};for(let e=0;e<5;e++)m.push(_(h));m.push(_({prefix:"videos",queue:s,nextIdx:0,urls:c})),await Promise.all(m)}};function P(e,r){m.D.dispatch(I.VQ({pendingImageDownload:e,totalImages:r}))}function D(e,r,n){let a=m.D.dispatch,i=m.D.getState(),o=i.mirror.appModel,s=i.saveAsState.waitTime,l=(0,w.VI)(o.pagesList),c=2e4-s,d=!navigator.onLine||c<=0;a(x({mode:e,pagesAllLoaded:l,showSkipButton:d,completeSaveAction:r,cancelCallback:n})),d||setTimeout(()=>{a(U({mode:e,pagesAllLoaded:l,showSkipAfterWaitingMs:2e4,completeSaveAction:r,cancelCallback:n}))},c)}async function k(e,r){let n=(0,f.v)(),l=m.D.dispatch,u=m.D.getState(),h=!1,g=()=>{},E=!1,T=()=>{},I=new Promise(e=>{T=e}),S=new Promise(e=>{g=e}),w=()=>{g(),h=!0},N=0,L=0;function P(){return{downloadSkipped:h,attemptId:r,canceled:E,reason:"save-as",exportV2:!0,imageCount:N,videoCount:L,loadId:A.xK.loadID()}}let k=()=>{T(),E=!0,(0,d.trackEvent)("File Export V2 Canceled",P())};D(C.h.SaveLocalFile,w,k);let M=(0,O.q)(o._em.SAVE_LOCAL_COPY);M.catch(()=>{(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("saveAs: waitForAllPagesPromise rejected")),l(b.F.dequeue({matchType:"save-as-progress"})),l(b.F.enqueue({error:!0,message:(0,y.t)("visual_bell.save_as_error")}))}),await Promise.race([M,I,S]),l(b.F.dequeue({matchType:"save-as-progress"}));let F=o.AlE.getMutableActiveDocument(),x=o.Bko.findImagesUnder(F,["0:0"],o.MoD.ALL),U={},B=[];for(let e of x){let r=o.Bko.getCompressedImage(e);r?U[e]=r:B.push(e)}let G=new Set(o.Bko.findAllVideos());if(N=x.length,L=G.size,E)return;l(b.F.enqueue({type:"save-as-actual",message:(0,y.t)("visual_bell.saving"),icon:v.zX.SPINNER})),await new Promise(e=>setTimeout(e,0));let V=o.glU.attemptActiveDocumentSave(r);if(!V)return;let H=await n,z=new H.ZipWriter(new H.BlobWriter("application/zip"));async function K(){if(!V)return;let r=c()(Array.from(o.glU.getDeveloperRelatedLinks().values()));for(let n in await z.add("canvas.fig",new H.Uint8ArrayReader(V.canvas),{level:0}),await z.add("thumbnail.png",new H.Uint8ArrayReader(V.thumbnail),{level:0}),await z.add("meta.json",new H.TextReader(JSON.stringify({client_meta:JSON.parse(V.clientMeta),file_name:e.name,developer_related_links:r}))),await z.add("images",null,{directory:!0}),U){let e=U[n];await z.add(`images/${n}`,new H.Uint8ArrayReader(e),{level:0})}}l(b.F.dequeue({matchType:"save-as-actual"})),h||D(C.h.SaveLocalFile,w,k);let W={zipWriter:z,zipPromise:K()};if((0,s.k)().export_image_download_logging&&(0,d.trackEvent)("Image Download For Export",{stage:"start",...P()}),await Promise.race([R.addAssetsToZip(()=>h||E,B,G,e.key,W),S,I]),(0,s.k)().export_image_download_logging&&(0,d.trackEvent)("Image Download For Export",{stage:"finished",...P()}),l(b.F.dequeue({matchType:"save-as-progress"})),E)return;l(b.F.enqueue({type:"save-as-actual",message:(0,y.t)("visual_bell.saving"),icon:v.zX.SPINNER})),await W.zipPromise;let j=await z.close();if((0,p.fT)(u.user?.email)){let e="",r=u.authedUsers?.byId;if(r){Object.values(r).forEach(r=>{let n=r.email;(0,p.jm)(n)&&!(0,p.fT)(n)&&(e=n)});let n=new FileReader;n.onloadend=()=>{let r=n.result,i=(0,a.Et)(new Uint8Array(r));(0,d.trackEvent)("Support Share Download",{sha1Hash:i,internalEmail:e})},n.readAsArrayBuffer(j)}}let Y=URL.createObjectURL(j),$=o.glU.fileExtension(),q=`${e.name}${$}`,X=(0,y.t)("save_as_actions.save_partial_file_name_suffix",{date:new Date().toLocaleDateString().replace(/_|\//g,"-")}),J=`${e.name} - ${X}${$}`;R.downloadFile(Y,h?J:q),URL.revokeObjectURL(Y),(0,d.trackEvent)("File Export V2 Completed",P()),l(b.F.dequeue({matchType:"save-as-actual"}))}function M(e,r,n){F(C.h.Export,e,r,n,[o.mSn?.getCurrentPage(o.Sie.REDUX,o.AlE.getActiveDocument())||""],"export-all-frames-to-pdf")}async function F(e,r,n,a,l,c,p){(0,h.Lo)("initiateSaveAs","begin",{completeSaveAction:a,nodesToLoad:l,mode:e}),n(I.Dc());let f=m.D.getState(),E=f.saveAsState.attemptId;if((0,s.k)().antiabuse_file_download_check)try{let e=f.openFile?.key||"",r=await g.Ay.post(`/api/file_download_log/${e}`,{is_desktop:!!u.eD});r.data?.meta?.download_err&&await N.S.getWAFValidator()}catch(e){if(429===e.status)throw e;(0,d.trackEvent)("File Download Log Error",{attemptId:E,error:e})}if(e===C.h.SaveLocalFile&&((0,d.trackEvent)("File Export Initiated",{attemptId:E,reason:c,exportV2:!0,loadId:A.xK.loadID()}),f.openFile)){k(f.openFile,E);return}D(e,a);let y=e===C.h.SaveLocalFile?o.MoD.ALL:o.MoD.NON_ANIMATED_ONLY;(0,s.k)().export_image_download_logging&&(0,d.trackEvent)("Image Download For Export",{stage:"start",attemptId:E,reason:c}),await (0,S.Jr)().loadAllImagesUnder(l,y,c,P),(0,s.k)().export_image_download_logging&&(0,d.trackEvent)("Image Download For Export",{stage:"finished",attemptId:E,reason:c});try{m.D.getState().saveAsState.startTime?(n(B({mode:e,completeSaveAction:a,settings:p})),n(I.hf({skipped:!1}))):(0,d.trackEvent)("File Export V1 Canceled",{attemptId:E})}catch(e){(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,e)}}let x=(0,T.nF)((e,r)=>{let n={text:(0,y.t)("save_as_actions.cancel"),action:r.cancelCallback||(()=>{e.dispatch(I.Mt())})},a=function(e,r,n){switch(e){case C.h.SaveLocalFile:if(r)return(0,y.t)("save_as_actions.save_partial_file");return n?(0,y.t)("save_as_actions.save_without_images"):(0,y.t)("save_as_actions.save_partial_file");case C.h.Export:if(r)return null;return n?(0,y.t)("save_as_actions.export_without_images"):(0,y.t)("save_as_actions.export_without_content");default:return null}}(r.mode,navigator.onLine,r.pagesAllLoaded),i=null;a&&(i={text:a,action:()=>{(0,d.trackEvent)("image_loading_canceled",{mode:r.mode}),e.dispatch(B({mode:r.mode,completeSaveAction:r.completeSaveAction})),e.dispatch(I.hf({skipped:!0}))}});let o={type:"save-as-progress",progressKey:"save-as",message:function(e,r){return e?r?(0,y.t)("save_as_actions.downloading_images"):(0,y.t)("save_as_actions.downloading_content"):r?(0,y.t)("save_as_actions.cannot_download_images"):(0,y.t)("save_as_actions.cannot_download_content")}(navigator.onLine,r.pagesAllLoaded),icon:v.zX.PROGRESS,button:n};e.dispatch(b.F.enqueue({...o,button:i?{primary:n,secondary:i}:n}))}),U=(0,T.nF)((e,r)=>{let n=e.getState();if(!n.visualBell.find(e=>"save-as-progress"===e.type)||!n.saveAsState?.startTime)return;let a=(n.saveAsState.waitTime||0)+Date.now()-n.saveAsState.startTime;(!navigator.onLine||a>r.showSkipAfterWaitingMs)&&(e.dispatch(b.F.clearAllExcept(["plugins-status"])),e.dispatch(x({mode:r.mode,pagesAllLoaded:r.pagesAllLoaded,showSkipButton:!0,completeSaveAction:r.completeSaveAction,cancelCallback:r.cancelCallback})))}),B=(0,T.nF)((e,r)=>{e.dispatch(b.F.clearAllExcept(["plugins-status"]));let n=e.getState().saveAsState;e.dispatch(E.n.set({message:function(e){switch(e){case C.h.SaveLocalFile:return(0,y.t)("visual_bell.saving");case C.h.Export:return(0,y.t)("visual_bell.exporting");case C.h.CopyAsPNG:return(0,y.t)("save_as_actions.copy_as_png_progress");case C.h.CopyAsSVG:return(0,y.t)("save_as_actions.copy_as_svg_progress");case C.h.RasterizeSelection:return(0,y.t)("save_as_actions.rasterize_selection_progress")}}(r.mode),showLoadingSpinner:!1,callback:()=>{"string"==typeof r.completeSaveAction?L.Y5.triggerAction(r.completeSaveAction,{source:"menu",attemptId:n.attemptId,settings:r.settings}):r.completeSaveAction()}}))})},19242:(e,r,n)=>{n.d(r,{J:()=>l,m:()=>c});var a=n(527546),i=n(304756),o=n(529848),s=n(933658);async function l(e,r="",n="",c,d=!1){d&&await (0,s.l)();let{data:{meta:u}}=await i.Ay.post(`/api/multiplayer/${e}/create_savepoint`,{label:r,description:n});return c(o.BC({history:{versions:[u]},direction:a.mL})),c(o.A9({status:!1})),u}async function c(e,r="",n="",a,i=!1){return null!=e?await l(e,r,n,a,i):null}},656320:(e,r,n)=>{n.d(r,{$Z:()=>w,IE:()=>V,Iu:()=>G,K:()=>W,Mo:()=>j,Np:()=>N,Tk:()=>B,U2:()=>K,YP:()=>x,bW:()=>M,s5:()=>z,vU:()=>U,xS:()=>C,yn:()=>F,zg:()=>H});var a=n(39153),i=n(19180),o=n(767339),s=n(903166),l=n(16204),c=n(39005),d=n(853164),u=n(259964),p=n(129723),m=n(26435),_=n(157602),h=n(924997),g=n(338130),f=n(841201),E=n(698429),y=n(163809),b=n(146443),v=n(56680),T=n(372529),I=n(174985),S=n(521229),A=n(411910);let w=new d.k([new o.$T,new I.f,new E.YY,new y.y,new T.a,new s.m,new h.B,new l.G,new c._,new v.N,new b.u,new f.i,new S.T,...(0,i.k)().show_new_abuse_report_form?[new _.v]:[]]);function C(e,r){return new URL(N(e,r),document.baseURI).href}function N(e,r){return w.selectedViewToPath(r,e)}let L=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(o.nw),O=RegExp(`^/files/([0-9]+)/(?:${L.join("|")})(.*)$`),R=RegExp("^/files/([0-9]+)/?$"),P=RegExp(`^/files/team/([0-9]+)/(?:${L.join("|")})(.*)$`),D=(e,r,n)=>{let a=e.split("/");return a[1]&&"files"===a[1]&&(6!==a.length||"files"!==a[1]||"team"!==a[2]||"restore"!==a[5])&&(e.match(O)?a.splice(2,1):e.match(P)?a.splice(2,2):(a.length>=3&&r&&a[2]===r&&a.splice(2,1),a.length>=3&&n&&a[3]===n&&a.splice(2,2))),a},k=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(O)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function M(e){let r=e.match(O);if(r)return r[1];let n=e.match(R);return n?n[1]:null}function F(e){let r=e.match(P);return r?r[1]:null}function x(e){let r=k(e,(0,A.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function U(e,r,n,a,i={view:"recentsAndSharing"}){let o=[];return""===(o=D(r,e.currentUserOrgId,e.currentTeamId))[o.length-1]&&o.splice(o.length-1,1),w.pathToSelectedView(e,o,n,a)||i}function B(e,r,n,a,i){if(r===a&&n===i)return e;let o=r===p.O.ORG?n:`team/${n}`,s=a===p.O.ORG?i:`team/${i}`;return e.replace(o,s)}function G(e,r){return w.selectedViewName(r,e)}function V(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function H(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===u.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function z(e){return"fullscreen"===e.view&&e.nodeId||null}function K(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&a.Z({data:{selectedView:e}}),e.file.key;default:return null}}function W(e){return"recentsAndSharing"===e.view&&(void 0===e.tab||e.tab===m.G.RECENTLY_VIEWED)}function j(e){return"resourceHub"===e.view||(0,g.V)(e)}},890522:(e,r,n)=>{n.d(r,{Z:()=>f});var a=n(354427),i=n(186606),o=n(708959),s=n(382902),l=n(910314),c=n(244534),d=n(500974),u=n(142896),p=n(277454),m=n(462835),_=n(180495),h=n(303010);let g=(0,s.eU)({});class f{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,a,i,o,s,l,d,u){this.dispatch(c.Gm({color:e,width:r,height:n,rgba:a,grid:i,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:d,dropperData:u}))}hideEyedropper(){this.dispatch(c.Gm(null))}updateSelectionImages(e){let r=s.zl.get(g),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let a in r)if(!e[a]){n=!0;break}}n&&s.zl.set(g,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,i,o,s,l,c){let u=(0,m.S)(e,r,n,i,o,s,c),p=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(p.paints,u)||p.emptyDueToLimitExceeded||l)&&(this.store.dispatch(d.QA(u)),l&&this.store.dispatch(d.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,m.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let i=this.store.getState().mirror.selectionPaints;(!(0,a.c2)(i.paintsDirectlyOnSingleNode,n)||i.emptyDueToLimitExceeded)&&this.store.dispatch(d.n0(n))}updatePaintStyles(e,r,n){let i=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,p.Gp)(e.key,e.guids,i);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,p.uH)(r,o),variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,a.c2)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,d.Lh)}updateSelectionTextAndEffectStyles(e){l.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,d.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(d.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){l.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,m.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(i.Osy?.updatePaint(o.GP(r.originalPaint),e,!0,null),this.store.dispatch(d.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===i.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(u.Yr),a=s.zl.get(h.E_);return n&&a?a:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===u.o$}validateCopyBuffer(e,r){let n=this.store.getState().openFile?.key;n&&_.Z.postValidateCopy({nodeIds:e,fileKey:n,copyType:r})}}},620964:(e,r,n)=>{n.d(r,{h:()=>o});var a=n(925040),i=n(28351);let o=e=>e.selectedView;(0,a.Mz)(o,e=>"workspace"===e.view&&e.subView===i.V0.DIRECTORY?e.workspaceId:void 0)},535884:(e,r,n)=>{n.d(r,{$c:()=>eL,AC:()=>tO,Dc:()=>tt,F9:()=>et,FZ:()=>ev,GS:()=>ex,Io:()=>G,Iy:()=>tN,JI:()=>ts,MH:()=>ec,MW:()=>eZ,Mh:()=>H,Pd:()=>z,Pg:()=>$,Qp:()=>tL,Sh:()=>eR,Wz:()=>e_,bh:()=>em,cM:()=>ea,dM:()=>ed,dU:()=>eF,e_:()=>B,fA:()=>te,jO:()=>eb,ju:()=>eQ,oB:()=>to,p6:()=>tP,p9:()=>eM,qG:()=>tF,qN:()=>tM,tK:()=>eu,vQ:()=>tR,x$:()=>tC,x6:()=>ey,y6:()=>eY});var a=n(430385),i=n(328813),o=n(672154),s=n(186606),l=n(562027),c=n(19180),d=n(382902),u=n(223926),p=n.n(u),m=n(890446),_=n.n(m),h=n(946678),g=n.n(h),f=n(149674),E=n.n(f),y=n(925040),b=n(615233),v=n(38542),T=n(6068),I=n(640483),S=n(1271),A=n(249726),w=n(688055),C=n(730143),N=n(231159),L=n(277454),O=n(253332),R=n(144487),P=n(899963),D=n(504509),k=n(720722),M=n(229395),F=n(944239),x=n(700436),U=n(715880);let B=e=>e.library,G=e=>e.library.libraryPublishingMode,V=e=>e.openFile?.publishedHubFile,H=e=>e.library.openHubFilePublished__LIVEGRAPH.components,z=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,K=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,W=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,j=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,Y=e=>e.library.openHubFilePublished__LIVEGRAPH.modules,$=(0,y.Mz)([H,K,W,j,z],(e,r,n,a,o)=>!(0,i.Im)(e)||!(0,i.Im)(r)||!(0,i.Im)(n)||!(0,i.Im)(a)||!(0,i.Im)(o)),q=(0,y.Mz)([C.XJ,R.qV],(e,r)=>e&&r[e]||{}),X=(0,y.Mz)([C.XJ,R.ZA],(e,r)=>e&&r[e]||{}),J=e=>e.library.local.thumbnails,Z=e=>e.library.openFilePublished__LIVEGRAPH.styles,Q=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,ee=e=>e.library.openFilePublished__LIVEGRAPH.modules,et=(0,y.Mz)([q,Z,Q,ee],(e,r,n,a)=>!(0,i.Im)(r)||!(0,i.Im)(e)||!(0,i.Im)(n)||!(0,i.Im)(a)),er=(0,y.Mz)([e=>e.library.local.styles,C.sS,G,e=>e.library.publishableStyles,K,V,J],(e,r,n,a,i,o,s)=>{if(n===k.o.HUBFILE&&o){let n=(0,l.l)(o.libraryKey),{newLocal:c}=(0,L.rC)(L.w8,a,i,e,s,{},r||"",n,new Set,k.PW.STYLE);return c}return e}),en=(0,y.Mz)([Z,K,G],(e,r,n)=>n===k.o.HUBFILE?r:e),ea=(0,y.Mz)([er,en],(e,r)=>{if(!(0,c.k)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eB(a,r[a.node_id],eV);n[a.node_id]={...a,status:e}}return n}),ei=(0,y.Mz)([e=>e.library.local.components,C.sS,G,H,V,e=>e.library.publishableSymbols,J,I.im],(e,r,n,a,i,o,s,c)=>{if(n===k.o.HUBFILE&&i){let n=(0,l.l)(i.libraryKey),{newLocal:d}=(0,L.rC)((e,r,n,a,i)=>(0,L.i_)(e,r,n,a,i,c),o,a,e,s,{},r||"",n,new Set,k.PW.COMPONENT);return d}return e}),eo=(0,y.Mz)([q,H,G],(e,r,n)=>n===k.o.HUBFILE?r:e),es=(0,y.Mz)([function(e){return e.library.local.stateGroups},C.sS,G,z,V,e=>e.library.publishableStateGroups,J],(e,r,n,a,i,o,s)=>{if(n===k.o.HUBFILE&&i){let n=(0,l.l)(i.libraryKey),{newLocal:c}=(0,L.rC)(L.LB,o,a,e,s,{},r||"",n,new Set,k.PW.STATE_GROUP);return c}return e}),el=(0,y.Mz)([X,z,G],(e,r,n)=>n===k.o.HUBFILE?r:e),ec=(0,y.Mz)([ei,eo,es,el,I.im],(e,r,n,a,i)=>{if(!(0,c.k)().ds_remove_redux_library_status)return e;let o={},s=(e,r)=>{if((0,c.k)().ds_user_facing_version_publishing){if(r?.userFacingVersion!==e.userFacingVersion)return!0}else if(r?.content_hash!==e.content_hash)return!0;if(!(0,L.pD)(r.name,e?.name)||!(0,L.pD)(r.description,e.description)||i&&!(0,L.pD)(r.sort_position,e.sort_position)||(0,L.Q_)(r.containing_frame,e?.containing_frame,{compareSortPositions:i}))return!0;let o=(0,L.E2)(e),s=o&&n[o]||null,l=(0,L.E2)(r),d=l&&a[l]||null;return s?!d||eH(s,d):null!=d};for(let n of Object.values(e)){let e=eB(n,r[n.node_id],s);o[n.node_id]={...n,status:e}}return o}),ed=(0,y.Mz)([es,el],(e,r)=>{if(!(0,c.k)().ds_remove_redux_library_status)return e;let n={};for(let a of Object.values(e)){let e=eB(a,r[a.node_id],eH);n[a.node_id]={...a,status:e}}return n}),eu=(0,v.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,C.tB,G,V,W],(e,r,n,a,i,o)=>{let s={},c=a===k.o.HUBFILE&&i?o:r,d=n?.key??"",u=a===k.o.HUBFILE&&i?(0,l.l)(i.libraryKey):(0,l.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(s[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:k.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:T.P.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=eB(r,e,ez),a=(0,b.u4)("ds_user_facing_version_publishing",r.userFacingVersion===e?.userFacingVersion,r.version===e?.version),i=!!(r&&e&&a&&r.sortPosition!==e.sortPosition);s[r.node_id]={...r,status:n,file_key:d,file_key_source:T.P.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:i}}return s}),ep=(0,y.Mz)([eu],e=>p()(Object.values(e),e=>e.variableSetId)),em=(0,v.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},Q,ep,C.tB,G,V,j],(e,r,n,a,i,d,u)=>{let p=i===k.o.HUBFILE&&d?u:r,m=a?.key??"",_=i===k.o.HUBFILE&&d?(0,l.l)(d.libraryKey):(0,l.l)(a?.libraryKey??""),h={};for(let[r,n]of Object.entries(p)){if(e.hasOwnProperty(r))continue;let a={subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:k.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:m,file_key_source:T.P.LOCAL_FILE,library_key:_,variableSetError:s.HG$.NONE,hasOnlyBeenReordered:!1};n.isExtension?h[r]={...n,...a,rootVariableSetId:o.gr.INVALID,backingVariableSetId:o.gr.INVALID}:h[r]={...n,...a}}for(let r of Object.values(e)){let e=p[r.node_id],a=function(e,r,n){let a=eB(e,r,eK);if(a!==k.E8.CURRENT)return a;for(let e of n)if(e.status!==k.E8.CURRENT&&e.status!==k.E8.NOT_STAGED)return k.E8.CHANGED;return k.E8.CURRENT}(r,e,n[r.node_id]??[]),i=!!(r&&e&&r.version==r.version&&r.sortPosition!==e.sortPosition);(0,c.k)().ds_user_facing_version_publishing&&(i=!!(r&&e&&r.userFacingVersion===e.userFacingVersion&&r.sortPosition!==e.sortPosition)),h[r.node_id]={...r,status:a,file_key:m,file_key_source:T.P.LOCAL_FILE,library_key:_,key:e?.key,hasOnlyBeenReordered:i}}return h}),e_=(0,y.Mz)([ec],e=>{let r={};for(let n of Object.values(e)){let e=(0,L.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),eh=(0,y.Mz)([ec],e=>E()(e,e=>!(0,L.ad)(e))),eg=e=>e.library.local.modules;function ef(e,r){if(!r)return!1;if((0,c.k)().ds_user_facing_version_publishing){if(r.userFacingVersion!==e.userFacingVersion)return!0}else if(r.version!==e.version)return!0;return!((0,L.pD)(r.name,e?.name)&&(0,L.pD)(r.description,e.description))}function eE(e,r,n,a,i){if(!(0,c.k)().dse_module_publish)return{};let o={};if(i===k.o.HUBFILE&&a)for(let[r,a]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...a,status:k.E8.DELETED,deletedFromSceneGraph:!0});let s=i===k.o.HUBFILE?n:r;for(let r of Object.values(e)){let e=eB(r,s[r.node_id],ef);o[r.node_id]={...r,status:e}}return o}let ey=(0,y.Mz)([eg,ee,Y,V,G],(e,r,n,a,i)=>(0,c.k)().dse_module_publish?eE(e,r,n,a,i):{}),eb=(0,y.Mz)([eg,ee,Y,V,(e,r)=>r],(e,r,n,a,i)=>eE(e,r,n,a,i)),ev=(0,y.Mz)([eh,ed],(e,r)=>({...e,...r})),eT=(0,y.Mz)([ev],e=>_()(e,e=>(0,L.CG)(e))),eI=(0,y.Mz)([ev],e=>Object.values(e).some(e=>(0,L.HF)(e.status))),eS=(0,y.Mz)([ey],e=>Object.values(e).some(e=>(0,L.HF)(e.status)));(0,y.Mz)([eI,eS],(e,r)=>e||r);let eA=(0,y.Mz)([ev,x.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),ew=(0,y.Mz)([ey,x.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eC=(0,y.Mz)([ea,ev,em,ey],(e,r,n,a)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(a).length>0),eN=(0,N.bt)(eC),eL=(0,d.eU)(e=>{if(e(eN))return!0;for(let r of Object.keys(w.Mk))if((0,P.O)(r)&&w.Mk[r].local){for(let n of Object.values(e(w.Mk[r].local)))if(!n.isSoftDeleted)return!0}return!1}),eO=(0,F.n)((0,y.Mz)([ev,ey],(e,r)=>Object.keys(e).length>0||Object.keys(r).length>0)),eR=(0,N.bt)(eO),eP=(e,r)=>null!=e.status&&(!!(0,L.lg)(e.status)||!!(0,L.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),eD=(e,r)=>eP(e,r)&&(0,L.HF)(e.status),ek=(0,N.bt)(e=>e.userStateLoaded),eM=(0,d.eU)(e=>e(ek)&&e(C.yV)?.canEdit&&(e(tM)||e(eL))),eF=(0,y.Mz)([ec,ed,ea,(e,r)=>r],eU),ex=(0,y.Mz)([ec,ed,ea],(e,r,n)=>eU(e,r,n,void 0));function eU(e,r,n,a){let i={...e,...r,...n},o=new Set(a?Object.keys(a).filter(e=>"FORCED_COPY"!==a[e].publishType):Object.values(i).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,L.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let eB=(e,r,n)=>{let a=r&&null==r.unpublished_at,i="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!i;return a&&!o?k.E8.DELETED:!a&&o?k.E8.NEW:a||o?n(e,r)?k.E8.CHANGED:k.E8.CURRENT:k.E8.NOT_STAGED},eG=(e,r)=>{let n=(0,b.u4)("ds_user_facing_version_publishing",e.userFacingVersion===r.userFacingVersion,e.content_hash===r.content_hash);return!(r&&n&&(0,L.pD)(r.name,e.name)&&(0,L.pD)(r.description,e.description))},eV=(e,r)=>eG(e,r)||!(0,L.pD)(r.sort_position,e.sort_position),eH=(e,r)=>(0,c.k)().ds_user_facing_version_publishing?!(r&&r.userFacingVersion===e.userFacingVersion&&!(0,L.Q_)(r.containing_frame,e?.containing_frame)&&(0,L.pD)(r.name,e?.name)&&(0,L.pD)(r.description,e.description)):!(r&&r.version===e.version&&!(0,L.Q_)(r.containing_frame,e?.containing_frame)&&(0,L.pD)(r.name,e?.name)&&(0,L.pD)(r.description,e.description)),ez=(e,r)=>{if(!e||!r)return!0;if((0,c.k)().ds_user_facing_version_publishing){if(r.userFacingVersion!==e.userFacingVersion)return!0}else if(r.version!==e.version)return!0;return r.sortPosition!==e.sortPosition},eK=(e,r)=>(0,c.k)().ds_user_facing_version_publishing?!(r&&r.userFacingVersion===e?.userFacingVersion&&r.sortPosition===e.sortPosition):!(r&&r.version===e?.version&&r.sortPosition===e.sortPosition);function eW(e,r,n,i){let[o,s]=g()(r,r=>eP(r,e)),[l,c]=g()(o,n),[d,u]=g()(s,e=>(0,L.HF)(e.status));return{modified:{erroneous:(0,a.Ul)(l,...i),wellFormed:(0,a.Ul)(c,...i)},unmodified:{published:(0,a.Ul)(d,...i),unpublished:(0,a.Ul)(u,...i)}}}function ej(e,r){return null==r?eq(e):e$(e,r)}let eY=(0,d.Iz)(e=>{let r=e?(0,N.bt)(r=>ej(r,e)):(0,N.bt)(eq),n=e?(0,N.bt)(r=>eF(r,e)):(0,d.eU)(new Set);return(0,d.eU)(e=>{let a=e(r),i=e(n),o=Object.values(e(M.t).data??{}),s=e(D.dv);return{...a,libraryAssets:{[k.PW.RESPONSIVE_SET]:eW(i,(0,P.O)(k.PW.RESPONSIVE_SET)?o.filter(e=>e.type===k.PW.RESPONSIVE_SET):[],()=>!1,[L.gA]),[k.PW.CODE_COMPONENT]:eW(i,(0,P.O)(k.PW.CODE_COMPONENT)?o.filter(e=>e.type===k.PW.CODE_COMPONENT):[],()=>!1,[L.gA])},pageThumbnails:(0,D.tj)(s)}})}),e$=(0,y.Mz)([ea,ec,ed,ev,em,eu,ey,eF,(e,r)=>r],eX),eq=(0,y.Mz)([ea,ec,ed,ev,em,eu,ey,ex],(e,r,n,a,i,o,s,l)=>eX(e,r,n,a,i,o,s,l,void 0));function eX(e,r,n,a,i,o,s,l,c){let d=(e,r)=>{if(!c)return 0;let n=c[e.node_id],a=c[r.node_id];return n&&a?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==a.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===a.publishType?-1:0:0},u=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>i[e]).filter(e=>!!e);return{styles:eW(l,Object.values(e),()=>!1,[L.Lk,d]),components:eW(l,Object.values(r),L.zE,[L.gA,d]),stateGroups:eW(l,Object.values(n),L.zE,[L.gA,d]),productComponents:eW(l,Object.values(a),L.zE,[L.gA,d]),variableSets:eW(l,Object.values(i),L.RQ,[L.MA]),variableSetsWithHiddenVariables:eW(l,u,()=>!1,[L.MA]),variables:eW(l,Object.values(o),()=>!1,[L.MA]),modules:eW(l,(0,P.O)(k.PW.MODULE)?Object.values(s):[],()=>!1,[L.gA])}}let eJ=(0,v.P8)([ep],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,eW(new Set,r,()=>!1,[L.MA])]))),eZ=()=>(0,v.P8)([eJ,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eQ=()=>(0,v.P8)([eJ,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),e0=(0,y.Mz)([ej],e=>e.styles.modified.wellFormed),e1=(0,y.Mz)([ea],e=>Object.values(e).filter(e=>eD(e))),e2=(0,y.Mz)([ej],e=>e.components.modified.wellFormed),e3=(0,y.Mz)([ej],e=>e.stateGroups.modified.wellFormed),e8=(0,y.Mz)([ej],e=>e.productComponents.modified.wellFormed),e6=(0,y.Mz)([e8],e=>e.filter(e=>(0,L.HF)(e.status))),e4=(0,y.Mz)([ej],e=>e.variableSets.modified.wellFormed),e5=(0,y.Mz)([e4],e=>e.filter(e=>(0,L.HF)(e.status))),e7=(0,y.Mz)([ej],e=>(0,P.O)(k.PW.MODULE)?e.modules.modified.wellFormed:[]),e9=(0,y.Mz)([e7],e=>e.filter(e=>(0,L.HF)(e.status))),te=(0,y.Mz)([C.tB,U.P],(e,r)=>!!((0,c.k)().cmty_lib_admin_publish&&e?.publishedHubFile)||!(0,A.jd)(e?.project)&&!!(e&&(0,O.w5)(e.teamId?r[e.teamId]:null))),tt=e0,tr=(0,y.Mz)([tt],e=>e.length>0),tn=(0,d.Iz)(e=>(0,N.bt)(r=>tr(r,e))),ta=(0,y.Mz)([e1],e=>e.length>0),ti=(0,N.bt)(ta),to=(0,y.Mz)([e2,te],(e,r)=>r?e:[]),ts=(0,y.Mz)([e3,te],(e,r)=>r?e:[]),tl=(0,y.Mz)([e8,te],(e,r)=>r?e:[]),tc=(0,y.Mz)([tl],e=>e.length>0),td=(0,d.Iz)(e=>(0,N.bt)(r=>tc(r,e))),tu=(0,y.Mz)([e6,te],(e,r)=>r?e:[]),tp=(0,y.Mz)([tu],e=>e.length>0),tm=(0,d.Iz)(e=>(0,N.bt)(r=>tp(r,e))),t_=(0,y.Mz)([e4],e=>e),th=(0,y.Mz)([t_],e=>e.length>0),tg=(0,d.Iz)(e=>(0,N.bt)(r=>th(r,e))),tf=(0,y.Mz)([e5],e=>e),tE=(0,y.Mz)([tf],e=>e.length>0),ty=(0,d.Iz)(e=>(0,N.bt)(r=>tE(r,e))),tb=(0,y.Mz)([e7,te],(e,r)=>r?e:[]),tv=(0,y.Mz)([tb],e=>e.length>0),tT=(0,d.Iz)(e=>(0,N.bt)(r=>tv(r,e))),tI=(0,y.Mz)([e9],e=>e.length>0),tS=(0,d.Iz)(e=>(0,N.bt)(r=>tI(r,e))),tA=(0,d.Iz)(e=>(0,d.eU)(r=>{for(let n of Object.values(r(eY(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,P.O)(n.modified.wellFormed[0].type))return!0;return!1})),tw=(0,d.Iz)(e=>(0,d.eU)(r=>{for(let n of Object.values(r(eY(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,P.O)(n.modified.wellFormed[0].type)&&n.modified.wellFormed.some(e=>(0,L.HF)(e.status)))return!0;return!1})),tC=(0,d.Iz)(e=>{let r=(0,N.bt)(r=>tt(r,e)),n=(0,N.bt)(r=>tl(r,e)),a=(0,N.bt)(r=>t_(r,e)),i=(0,N.bt)(r=>tb(r,e));return(0,d.eU)(o=>{let s=o(r),l=o(n),c=o(a),d=o(i),u=o(eY(e)),p=Object.keys(u.libraryAssets).flatMap(e=>(0,P.O)(e)?u.libraryAssets[e].modified.wellFormed:[]),m=o(D.dv);return[...s.map(e=>e.node_id),...l.map(e=>e.node_id),...c.map(e=>e.node_id),...d.map(e=>e.node_id),...p.map(e=>e.node_id),...m?.map(e=>e.node_id)]})}),tN=(0,d.Iz)(e=>(0,d.eU)(r=>r(tn(e))||r(td(e))||r(tg(e))||r(tT(e))||r(tA(e))));(0,d.Iz)(e=>(0,d.eU)(r=>r(ti)||r(tm(e))||r(ty(e))||r(tS(e))||r(tw(e)))),(0,y.Mz)([eA,tl],(e,r)=>r.some(r=>e[r.node_id])),(0,y.Mz)([ew,tb],(e,r)=>r.some(r=>e[r.node_id]));let tL=(0,y.Mz)([eT,R.c5],(e,r)=>({...r,...e})),tO=(0,y.Mz)([tb],e=>e.map(e=>e.node_id));(0,y.Mz)([ts],e=>e.map(e=>e.node_id));let tR=(0,y.Mz)([to,()=>(0,S.XR)()],(e,r)=>e.filter(e=>e.deletedFromSceneGraph||r.includes(e.node_id)).map(e=>e.node_id));(0,y.Mz)([tR,()=>(0,S.Wn)()],(e,r)=>e.concat(r.filter(e=>"SYMBOL"!==e.type).map(e=>e.guid)));let tP=(0,y.Mz)([ec,()=>(0,S.XR)()],(e,r)=>E()(e,e=>r.includes(e.node_id))),tD=(0,d.eU)(e=>Object.values(e(M.t).data??{}).some(e=>(0,L.HF)(e.status))),tk=(0,N.bt)(et),tM=(0,d.eU)(e=>e(tk)||e(tD));function tF(e,r){return n=>e({...n,library:{...n.library,libraryPublishingMode:r}})}},84849:(e,r,n)=>{n.d(r,{Bw:()=>X,P1:()=>en,S9:()=>er,WE:()=>ed,WJ:()=>eo,Yy:()=>q,bA:()=>ea,cb:()=>el,ij:()=>V,j_:()=>Z,jk:()=>Q,kK:()=>et,lm:()=>G,mO:()=>J,nm:()=>eu,pk:()=>es,t_:()=>ec,wy:()=>ep});var a=n(672154),i=n(673786),o=n(186606),s=n(19180),l=n(382902),c=n(983401),d=n.n(c),u=n(925040),p=n(615233),m=n(38542),_=n(810503),h=n(6068),g=n(67308),f=n(587745),E=n(748628),y=n(489082),b=n(231159),v=n(277454),T=n(824113),I=n(720722),S=n(339716),A=n(144487),w=n(700436),C=n(786835),N=n(354703);function L(e,r,n,a,o){let l=Object.create(null);for(let{key:r,version:a,userFacingVersion:i}of e)if(r){if((0,s.k)().ds_user_facing_version_publishing&&(a=i),r in n){let e=r;r=n[r],a=o?.[e]===a?a:"FAKE_VERSION_FOR_MOVED_ITEM"}l[r]=l[r]||new Set,l[r].add(a)}for(let e of r)if(e in a){let r=a[e];l[r]=l[r]||new Set,l[r].add((0,i.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return l}let O=(0,u.Mz)([N.PX,e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle],(e,r)=>Object.values(e).reduce((e,n)=>{if("loaded"!==n.status||!r[n.data.key])return e;if((0,s.k)().ds_user_facing_version_publishing){let{key:a,userFacingVersion:i}=r[n.data.key];e[a]=i}else{let{key:a,version:i}=r[n.data.key];e[a]=i}return e},Object.create(null))),R=(0,u.Mz)([C._Q,w.O1,S.aR,S.BE,O],L),P=(0,u.Mz)([C.m0,w.T_,S.aR,S.BE],L),D=(0,u.Mz)([C.v3],e=>L(e,[],{},{})),k=(0,u.Mz)([C.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function M(e,r,n){if(0===e.size)return!1;if(1===e.size){let a=Array.from(e)[0],i=n(r);return i?.toLowerCase()!==a.toLowerCase()}return!0}let F=(0,h.f)();function x({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:a,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,i.sg)(l)];!(!c||n&&(0,f.dp)(n,F(c)))&&M(r[(0,i.sg)(l)],c,a)&&s.push(o(c))}return s}let U=(0,u.Mz)([N.wi,R,g.d1,S.uB,S.tp,S.J8,C.tY,w.tX],(e,r,n,a,i,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:x({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>(0,p.u4)("ds_user_facing_version_publishing",e.userFacingVersion,e.content_hash),getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in a&&(r.oldSubscribedKeysToUpdate=Array.from(a[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in i){for(let n of(r.localIdsToUpdate=Array.from(i[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),B=(0,m.P8)([A.Ls,P],(e,r)=>{let n=Object.keys(r),a=Object.keys(e);return d()(n,a)}),G=(0,u.Mz)([B,A.m3,C.S_,w.dK],(e,r,n,a)=>{let i=new Map;for(let o of e){let e=n[o];if(!e)continue;let s=a.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&i.set(o,e)}}return i}),V=(0,u.Mz)([A.Ls,A.ZA,P,g.d1,S.uB,S.tp,C.aD,w.BA],(e,r,n,a,i,o,s,l)=>{let c=!1,d=!1,u=new Set(s.map(e=>e.key)),m=x({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:a,getVersion:e=>(0,p.u4)("ds_user_facing_version_publishing",e.userFacingVersion,e.content_hash),getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in i)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(i[n]),c=!0,r.oldSubscribedKeysToUpdate))u.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),_=[],h=[],g=[],f=[],E=new Set;for(let e of m){let n=s.some(r=>{let n=(0,p.u4)("ds_user_facing_version_publishing",r.userFacingVersion!==e.userFacingVersion,r.version!==e.content_hash);return r.key===e.component_key&&n}),a=e.containing_frame?.containingStateGroup?.nodeId;if(a){let i=r[e.library_key]?.[a];if(i){let r=g.find(e=>e.key===i.key);if(null==r&&(r={...i,newStateKeyToOutdatedItems:{}},g.push(r)),e.component_key){let a=e.component_key;r.newStateKeyToOutdatedItems[a]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(n||e.oldSubscribedKeysToUpdate.some(e=>u.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!E.has(i.key)&&(f.push(r),E.add(i.key))}}}else _.push(e),(n||e.oldSubscribedKeysToUpdate.some(e=>u.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&h.push(e)}return{componentUpdatesForAllPages:_,stateGroupUpdatesForAllPages:g,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:h,stateGroupUpdatesForCurrentPage:f,includesMoveUpdatesOnCurrentPage:d}}),H=(0,h.f)(),z=(0,m.P8)([A.a3,A.gJ,D,g.d1,k,e=>e.mirror.appModel.currentPage],(e,r,n,a,s,l)=>{let c={},d=new Set,u=o.glU?.getInternalCanvasNodeId();for(let o of Object.keys(n)){let m=e[(0,i.ey)(o)];if(!m||a&&(0,f.dp)(a,H(m)))continue;let h=r[(0,i.yG)(m.variableCollectionKey)];if(!h)continue;let g=c[(0,i.yG)(m.variableCollectionKey)]||{...h,libraryVariableIdsForUpdate:[]};if((0,I.GI)(g)){(0,_.x1)("variables","Encountered variable bound to variable set extension");continue}let E=n[m.key],y=e=>(0,p.u4)("ds_user_facing_version_publishing",e.userFacingVersion,e.version);if(E&&M(E,m,y)&&g.libraryVariableIdsForUpdate.push(m.node_id),g.libraryVariableIdsForUpdate.length>0&&(c[(0,i.yG)(h.key)]=g,s.has(h.key))){let e=s.get(h.key);(e?.has(l)||u&&e?.has(u))&&d.add(h.key)}}let m=Object.values(c),h=m.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:m,variableSetUpdatesForCurrentPage:h}}),K=(0,b.bt)(V),W=(0,b.bt)(U),j=(0,b.bt)(z),Y=(0,l.eU)(e=>{let r=[],n=new Set;for(let a of Object.values(e(ee)))for(let e of a)if(e.type===I.PW.CODE_COMPONENT){if(n.has(e.key))continue;n.add(e.key),r.push(e)}return r}),$=(0,l.eU)(e=>{let r=e(E.z);return e(ee)[r]??[]}),q=(0,l.Iz)(e=>(0,l.eU)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:a}=r(K);return e===v.aD.ALL?n:a})),X=(0,l.Iz)(e=>(0,l.eU)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:a}=r(K);return e===v.aD.ALL?n:a})),J=(0,l.Iz)(e=>(0,l.eU)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:a}=r(W);return e===v.aD.ALL?n:a})),Z=(0,l.mg)(W,e=>e.styleUpdatesForAllPages),Q=(0,l.Iz)(e=>(0,l.eU)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:a}=r(j);return e===v.aD.ALL?n:a})),ee=(0,l.eU)(e=>{let r={};for(let n of Object.values(T.i))for(let[a,i]of Object.entries(e(n)))r[a]=r[a]||[],r[a].push(...i);return r}),et=(0,l.Iz)(e=>(0,l.eU)(r=>{switch(e){case v.aD.ALL:return r(Y);case v.aD.CURRENT:return r($)}})),er=(0,l.eU)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:a}=e(K),{styleUpdatesForAllPages:i,includesMoveUpdatesOnAnyPage:o}=e(W),{variableSetUpdatesForAllPages:s}=e(j);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:s,libraryAssetUpdatesForAllPages:e(Y),includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:a}}),en=(0,l.eU)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:a}=e(K),{styleUpdatesForCurrentPage:i,includesMoveUpdatesOnCurrentPage:o}=e(W),{variableSetUpdatesForCurrentPage:s}=e(j);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:i,variableSetUpdatesForCurrentPage:s,libraryAssetUpdatesForCurrentPage:e($),includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:a}}),ea=(0,l.Iz)(e=>(0,l.eU)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:a,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:o,libraryAssetUpdatesForAllPages:s}=r(er),{componentUpdatesForCurrentPage:l,stateGroupUpdatesForCurrentPage:c,styleUpdatesForCurrentPage:d,variableSetUpdatesForCurrentPage:u,libraryAssetUpdatesForCurrentPage:p}=r(en);return e===v.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:a,scopedStyleUpdates:i,scopedVariableSetUpdates:o,scopedLibraryAssetUpdates:s}:{scopedComponentUpdates:l,scopedStateGroupUpdates:c,scopedStyleUpdates:d,scopedVariableSetUpdates:u,scopedLibraryAssetUpdates:p}})),ei=(0,l.mg)(er,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a,libraryAssetUpdatesForAllPages:i,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s})=>{let l=e.length+r.length+n.length+a.length+i.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s}}),eo=(0,l.mg)(en,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:a,libraryAssetUpdatesForCurrentPage:i,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s})=>{let l=e.length+r.length+n.length+i.length+a.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s}});(0,l.mg)(ei,({hasUpdates:e})=>e),(0,l.mg)(eo,({hasUpdates:e})=>e);let es=(0,l.Iz)(e=>(0,l.eU)(r=>r(e===v.aD.ALL?ei:eo).hasUpdates)),el=(0,l.mg)(ei,({updateCount:e})=>e);(0,l.mg)(eo,({updateCount:e})=>e);let ec=(0,l.p6)([er],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:a,libraryAssetUpdatesForAllPages:i})=>({componentUpdateKeys:(0,v.X7)(e),stateGroupUpdateKeys:(0,v.X7)(r),styleUpdateKeys:(0,v.X7)(n),variableSetKeys:(0,v.X7)(a),libraryAssetKeys:(0,v.X7)(i)})),ed=(0,b.bt)(e=>e.library.libraryUpdatesBannerDismissed);function eu(e,r){let n=(0,w.dK)(e),i=(0,y.E7)(r),o=i?a.PK.fromKiwi(i):null,s=o?n.getStyleNode(o):null;if(!s)return null;let l=s.guid,c=s.styleKeyForPublish,d=s.styleVersionHash;return c&&d?{GUID:l,key:c,version:d,isLocalStyle:s.isLocalStyle}:null}let ep=(0,l.eU)(!1)},144487:(e,r,n)=>{n.d(r,{Ls:()=>h,ZA:()=>_,a3:()=>y,c5:()=>E,gJ:()=>b,m3:()=>g,qV:()=>m});var a=n(871043),i=n(870567),o=n(149674),s=n.n(o),l=n(925040),c=n(277454),d=n(806349);let u=e=>e.library.publishedByLibraryKey.components,p=e=>e.library.publishedByLibraryKey.stateGroups,m=(0,l.Mz)([u],c.v2),_=(0,l.Mz)([p],c.v2),h=(0,l.Mz)([u],c.ah),g=(0,l.Mz)([p],c.ah);(0,l.Mz)([u],c.vu),(0,l.Mz)([p],c.vu);let f=(0,l.Mz)([h],e=>s()(e,e=>!(0,c.ad)(e))),E=(0,l.Mz)([g,f],(e,r)=>({...e,...r}));function y(e){return Object.fromEntries(Object.entries(e.library.knownUsedLibraryVariablesByKey).filter(([e,r])=>"loaded"===r.status&&(r.data?.variable?.file||r.data?.variable?.hubFile.status==="loaded"&&r.data.variable.hubFile.data)).map(([e,r])=>{let n=r.data.variable,a=n.file,o=null!=n.hubFile?(0,i.oA)(n.hubFile):void 0,s=(0,d.Zt)(a,o);if(s)return[e,(0,d.GA)(n,s,!1)]}).filter(a.Vq))}let b=(0,l.Mz)([e=>e.library.knownUsedLibraryVariableSetsByKey],e=>Object.fromEntries(Object.entries(e).filter(([e,r])=>"loaded"===r.status&&(r.data?.variableCollection?.file||r.data?.variableCollection?.hubFile.status==="loaded"&&r.data.variableCollection.hubFile.data)).map(([e,r])=>{let n=r.data.variableCollection,a=n.file,o=null!=n.hubFile?(0,i.oA)(n.hubFile):void 0,s=(0,d.Zt)(a,o);if(s)return[e,(0,d.cE)(n,s,!1)]}).filter(a.Vq)))},700436:(e,r,n)=>{n.d(r,{$4:()=>h,$u:()=>g,AF:()=>p,BA:()=>S,F4:()=>y,O1:()=>b,Sh:()=>c,T_:()=>I,Xt:()=>s,a$:()=>u,dK:()=>l,dT:()=>f,f5:()=>A,rT:()=>E,t:()=>_,tX:()=>v,tn:()=>T,vD:()=>d});var a=n(925040),i=n(38542),o=n(231159);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,i.Zm)(e=>Object.keys(s(e)));function d(e){let r=c(e),n=r[0];return 1===r.length&&n?n:null}function u(e){let r=c(e);return r.length>1?r:null}let p=(0,a.Mz)([l,d],(e,r)=>r?e.get(r):null),m=()=>(e,r)=>l(e).get(r);function _(){let e=m();return(0,i.Zm)((r,n)=>{let a=e(r,n);return null==a?null:{key:a.styleKeyForPublish,version:a.styleVersionHash}})}function h(){let e=_();return(0,i.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function g(e){return e.mirror.selectionProperties.numSelected||0}let f=(0,i.P8)([c,l],E);function E(e,r){let n=[];return e.forEach(e=>{let a=r.get(e);(a?.type==="INSTANCE"||a?.isInstanceSublayer)&&n.push(e)}),n}let y=(0,a.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let a=e.get(r);a&&n.push(a)}),n});(0,i.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let b=(0,i.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),v=(0,i.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),T=(0,o.bt)(b),I=(0,i.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),S=(0,i.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function A(e,r){let n=l(e);return!n.get(r)?.visible}},671346:(e,r,n)=>{n.d(r,{b:()=>i,e:()=>o});var a=n(553547);function i(e,r,n){if(!r)return null;let i=(()=>{let i;let o=e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey[r];if(o)return o;if(!n)return null;if("type"in n){let r=e.library.local.styles[n.node_id];if(r?.key!==n.key)return null;i=r.node_id}else i=(0,a.dI)(n.guid);return i?e.library.used__LIVEGRAPH.localNodeIdToDestinationKey[i]:null})();return e.library.used__LIVEGRAPH.styles[i??r]??null}function o(e,r){let{stylePreviewShown:n}=e;return n.isShown&&!n.isCreating&&n.style===r}},786835:(e,r,n)=>{n.d(r,{C9:()=>w,Co:()=>T,Du:()=>h,EY:()=>L,J5:()=>C,LL:()=>D,MH:()=>R,No:()=>f,OQ:()=>P,S_:()=>g,_Q:()=>y,aD:()=>m,jf:()=>N,kc:()=>O,m0:()=>p,sm:()=>F,tY:()=>M,v3:()=>_});var a=n(239910),i=n.n(a),o=n(626715),s=n.n(o),l=n(925040),c=n(38542),d=n(231159);function u(e){return(0,c.Vh)(e=>e.library,e)}let p=u(e=>e.subscribedSymbolsFromLoadedPages),m=u(e=>e.subscribedSymbolsOnCurrentPage),_=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),h=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([p],e=>i()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),v=u(e=>e.indirectlySubscribedStylesFromLoadedPages),T=(0,l.Mz)([v],e=>e.length>0),I=(0,l.Mz)([y,v],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function A(e){return s()(e.map(e=>e.key))}let w=(0,l.Mz)([p],S),C=(0,l.Mz)([m],S),N=(0,l.Mz)([f],S),L=(0,l.Mz)([E],S),O=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([I],S),P=(0,l.Mz)([p],A);(0,l.Mz)([m],e=>new Set(e.map(e=>e.key)));let D=(0,l.Mz)([f],A),k=(0,l.Mz)([y],A),M=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),F=(0,d.bt)(k);(0,l.Mz)([I],A)},30371:(e,r,n)=>{n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(967688);var a=n(74666);function i(e){switch(e){case null:case void 0:return a.w_.ALLOWED;default:return e}}function o(e){return i(e?.public_link_controls_setting)===a.w_.BANNED}function s(e){return[a.w_.EXPIRATION_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}function l(e){return[a.w_.PASSWORD_REQUIRED,a.w_.EXP_AND_PWD_REQUIRED].includes(i(e?.public_link_controls_setting))}},36942:(e,r,n)=>{n.d(r,{Ey:()=>h,To:()=>g,zY:()=>_}),n(241899);var a=n(989232),i=n(446470),o=n(615233),s=n(235252),l=n(114486),c=n(944239);let d=(0,o.tl)().stripe_api_public;var u=(e=>(e.CARD="card",e.SEPA="sepa_debit",e.IDEAL="ideal",e.SOFORT="sofort",e))(u||{});let p=null;function m(){return new Promise((e,r)=>{p?e(p):d?(0,i.k0)("https://js.stripe.com/v3/",{cors:!1}).then(()=>{e(p=Stripe(d,{locale:(0,s.Gq)().getPrimaryLocale(!1)}))}).catch(r):r("No Stripe api key")})}let _=(0,c.D)(e=>new Promise((r,n)=>{m().then(n=>{r(n.elements().create("card",e))}).catch(n)})),h=(0,c.D)((e,r)=>new Promise((n,a)=>{m().then(i=>{i.createToken(e,r).then(e=>{n(e)}).catch(a)}).catch(a)})),g=(0,c.D)(async(e,r,n)=>{let i=await m(),{data:{meta:{client_secret:o}}}=await l.m.getSetupIntentSecret({subtotal_estimate:r,currency:n}),s=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,c=s(),d=!1,u=setInterval(()=>{c!==s()&&((0,a.trackEvent)("Stripe Authentication Modal"),clearInterval(u),d=!0)},1e3),p=await i.confirmCardSetup(o,{payment_method:{card:{token:e}}});if(clearInterval(u),p.error)throw(0,a.trackEvent)("Payment Confirmation Error",{error_message:p.error.message}),p.error;return(0,a.trackEvent)("Payment Confirmation Success"),p.setupIntent.is3DS=d,p.setupIntent})},436999:(e,r,n)=>{n.d(r,{Qh:()=>h,m1:()=>I,Sp:()=>C,$p:()=>f,gM:()=>T,je:()=>E,Ly:()=>v,He:()=>y,fi:()=>b});var a=n(848318),i=n(430385),o=n(871043),s=n(562027);n(19180);var l=n(382902),c=n(349048),d=n(260986),u=n.n(d);n(410725);var p=n(748008),m=n(540698);n(481406),n(271326);var _=n(587745);n(730143),n(55116),n(256387),n(300656),n(802240),n(249726),n(138528);var h=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(h||{});let g=a.createContext(null),f=(0,l.eU)(void 0);function E(){let{subscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");a.useEffect(()=>{r()},[r]);let n=a.useMemo(()=>(0,p.gB)([]),[]);return(0,m.nl)()?n:e}function y(){let e=E();return(0,c.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.libraryKey)),r},[e.data])}function b(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return a.useEffect(()=>{r()},[r]),e}function v(){let{untransformedSubscription:e}=(0,o.sR)(a.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),r}function T(e,r,n,a,s,l){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let c=e.data.file;if(null==c)return(0,p.gB)([]);let d=e.data.libraryPresetSubscriptionsV2,m=c.libraryOrgSubscriptions,h=c.computedWorkspacePublicInfo?.workspace?.librarySubscriptions,g=c.libraryTeamSubscriptions,f=c.libraryUserSubscriptions,E=c.libraryFileSubscriptions,y=[...m.filter(e=>a||!e.communityLibrary).filter(e=>n?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>I(e,"organization")),...E.filter(e=>a||!e.communityLibrary).map(e=>I(e,"file"))];if(!s&&!l&&a){let e=(d??[]).filter(e=>{let r=e.default_subscribed;return(n?!(c?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||c?.teamId&&null!=e.libraryTeamSubscriptionOverride)&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride))&&r}).map(e=>S(e,"community"));y.push(...e)}if(n){let e=f.filter(e=>a||!e.communityLibrary).filter(e=>e.communityLibrary?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===s).map(e=>I(e,"user"));y.push(...e)}if(r){let e=g.filter(e=>a||!e.communityLibrary).filter(A).map(e=>I(e,"team")),r=(h||[]).filter(e=>a||!e.communityLibrary).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>I(e,"workspace"));y.push(...e),y.push(...r)}else{let e=(function(e){let r=e?.teamId;return r?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===r).map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq)})(c)?.map(e=>e.filter(e=>a||!e.communityLibrary).filter(w).map(e=>I(e,"team")))??[];y.push(...(0,i.Bq)(e))}let b=u()(y.filter(o.Vq),e=>e.libraryKey).filter(e=>!(0,_.LP)(c,e.libraryKey));return(0,i.KQ)(b,"name"),(0,p.gB)(b)}function I(e,r){let n=e.communityLibrary;return n?S({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid,libraryType:"team"}:null}function S(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null,libraryType:"community"}:null}function A(e){return null==e.libraryFileSubscriptionOverride}function w(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function C(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},809351:(e,r,n)=>{n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>i});var a=n(304756);function i(e,r){return a.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(961675),n(280255);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},361053:(e,r,n)=>{n.d(r,{BU:()=>C,Cl:()=>B,Ct:()=>Y,Cz:()=>S,Eq:()=>G,FQ:()=>D,H7:()=>K,HE:()=>U,Me:()=>z,PS:()=>k,R5:()=>I,UQ:()=>M,_L:()=>W,aW:()=>R,cD:()=>V,jv:()=>$,mx:()=>A,n$:()=>j,ol:()=>H,rR:()=>P,sK:()=>N});var a=n(301168);n(430385);var i=n(660376),o=n(19180),s=n(418193),l=n(458608),c=n(748008);n(967688);var d=n(499668),u=n(613733),p=n(318147),m=n(55116),_=n(253332),h=n(407638),g=n(548277),f=n(94831);n(831429),n(773293);var E=n(944239),y=n(249726),b=n(97239),v=n(231159),T=n(677334);async function I(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a=await T.M4.fetchFile(e);if(!a?.trashed_at||!a?.team_id)return;r.push(a);let i=(await (0,l.Ek)(m.Aqu,{teamId:a.team_id})).team;i?.id&&(n[i.id]=i)})),await w(r,n)}n(280255);let S=Object.freeze({designFileCount:0,whiteboardFileCount:0,slideFileCount:"0",totalFileCount:(0,c.Wk)(0)});async function A(e){let r=[],n={};return await Promise.all(e.map(async e=>{let a={...await T.M4.fetchFile(e.key),folder_id:e.folderId};if(a&&r.push(a),!e.folderId)return;let i=await (0,l.Ek)(m.yU5,{projectId:e.folderId}),o=i.project?.team;o?.id&&(n[o.id]=o)})),await w(r,n)}let w=(0,E.D)(async(e,r)=>{let n={},a={};for(let r of e){let{folder_id:e,team_id:i,editor_type:o}=r;if(!e||!i||!o)continue;let s=a[e]??await T.M4.fetchFolder(e);a[e]=s,n[i]=n[i]??{},n[i][o]=n[i][o]??{draft:0,nonDraft:0},(0,y.ye)(s)?n[i][o].draft+=1:n[i][o].nonDraft+=1}let i=Object.entries(n).find(([e,n])=>{let a=r[e];return!!a&&Object.entries(n).some(([e,r])=>!R(a,{type:3,editorType:e,teamFileCounts:a.teamFileCounts||S,nNonDraftFilesToAdd:r.nonDraft}))});return i?.[0]});function C(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var N=(e=>(e[e.ADD_PROJECT=0]="ADD_PROJECT",e[e.ADD_EDITOR=1]="ADD_EDITOR",e[e.ADD_FILE=2]="ADD_FILE",e[e.ADD_N_FILES=3]="ADD_N_FILES",e))(N||{}),L=(e=>(e.NO_RESTRICTIONS="noRestrictions",e.FULLY_RESTRICTED="fullyRestricted",e.FILE_COUNT_LIMIT="fileCountLimit",e))(L||{});function O(e){switch(e){case p._Y.DESIGN:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.FILES_LIMITED_LEGACY,p.P4.FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"designFileCount"};case p._Y.WHITEBOARD:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.WHITEBOARD_FILES_LIMITED_BETA,p.P4.WHITEBOARD_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"whiteboardFileCount"};case p._Y.SLIDES:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.SLIDE_FILES_LIMITED_BETA,p.P4.SLIDE_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"slideFileCount"};case p._Y.SITES:return(0,o.k)().sts_starter_enabled?{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"totalFileCount"}:{starterRestrictionType:"fullyRestricted"};case p._Y.COOPER:return(0,o.k)().cooper?{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"totalFileCount"}:{starterRestrictionType:"fullyRestricted"};case p._Y.FIGMAKE:return(0,o.k)().bake_starter_limit?{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([p.P4.GLOBAL_FILES_LIMITED,p.P4.GLOBAL_FILES_LIMITED_LEGACY]),teamFileCountsKey:"totalFileCount"}:{starterRestrictionType:"fullyRestricted"};default:(0,i.xb)(e)}}function R(e,r){if(!e||e.restrictionsList?.includes(p.P4.LOCKED))return!1;if((0,_.XX)(e))return!0;switch(r.type){case 0:return!e.restrictionsList?.includes(p.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(p.P4.PROJECTS_LIMITED_LEGACY);case 1:return!e.restrictionsList?.includes(p.P4.EDITORS_LIMITED);case 2:{let n=O(r.editorType);switch(n.starterRestrictionType){case"fullyRestricted":return!1;case"noRestrictions":return!0;case"fileCountLimit":if(r.isDestinationTeamDrafts)return!0;if(e.restrictionsList?.some(e=>n.teamRestrictions.has(e))||p.P4.GLOBAL_FILES_MUST_CHECK&&e.restrictionsList?.includes(p.P4.GLOBAL_FILES_MUST_CHECK)&&r.teamFileCounts&&((0,c.oA)(r.teamFileCounts.totalFileCount)??0)>=_.WW||r.teamFileCounts&&Number(r.teamFileCounts[n.teamFileCountsKey])>=_.WW)return!1;return!0;default:(0,i.xb)(n)}}case 3:{let n=O(r.editorType);switch(n.starterRestrictionType){case"fullyRestricted":return!1;case"noRestrictions":return!0;case"fileCountLimit":if(0===r.nNonDraftFilesToAdd)return!0;if(e.restrictionsList?.some(e=>n.teamRestrictions.has(e))||p.P4.GLOBAL_FILES_MUST_CHECK&&e.restrictionsList?.includes(p.P4.GLOBAL_FILES_MUST_CHECK)&&r.teamFileCounts&&((0,c.oA)(r.teamFileCounts.totalFileCount)??0)>=_.WW||Number(r.teamFileCounts[n.teamFileCountsKey])+r.nNonDraftFilesToAdd>_.WW)return!1;return!0;default:(0,i.xb)(n)}}default:(0,i.xb)(r)}}function P(e,r){return R({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function D(e,r){if(!e.teams||!e.authedTeamsById)return null;let n=Object.values(e.teams),a=Object.values(e.authedTeamsById);if((0,u.HZ)({oldValue:1===n.length&&(0,h.canAdminTeam)(n[0].id,e),newValue:r?.canAdmin,label:u.A5.gen0OnboardingOnlyTeam.canAdmin,enableFullRead:(0,d.DQ)(d.Pw.GROUP_7),maxReports:1,contextArgs:{currentTeamId:r?.id,userId:e.user?.id,teams:String(n.map(e=>e.id))}}))return(0,u.HZ)({oldValue:n[0],newValue:n.find(e=>e.id===r?.id)||null,label:u.A5.gen0OnboardingOnlyTeam.currentTeamFromState,enableFullRead:(0,d.DQ)(d.Pw.GROUP_7),maxReports:1,contextArgs:{currentTeamId:r?.id,userId:e.user?.id,teams:String(n.map(e=>e.id))}});if(0===n.length&&1===a.length){let r=e.user?.id;if(r)return e.teamAdminRolesForAuthedUsers&&e.teamAdminRolesForAuthedUsers[r].find(e=>e.team_id===a[0].id)?a[0]:null}return null}function k(e){return!!e.student_team||!!e&&!!e.subscription&&[p.Qh.OK,p.Qh.GRACE_PERIOD].includes(e.subscription)}function M(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let a=e.fileByKey?.[n]?.team_id;return a?e.teamUserByTeamId?.[a]?.[r]:null}let F=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),x=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/team\/(\d+)/);function U(e){return F.test(e)}function B(e){return x.test(e)}function G(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}function V(){return(0,a.d4)(e=>(0,b.Z)(e))||""}function H(){return(0,a.d4)(e=>{let r=(0,b.Z)(e);return""===r||null==e.teams?null:e.teams[r]})||null}let z=(0,v.bt)(e=>e.teams[(0,b.Z)(e)]||null);function K(e){return e.teams[(0,b.Z)(e)]||null}function W(e,r,n){return e?Object.keys((0,g.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function j(e,r){let n=[],a={};for(let r of e)r&&(a[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let a=r.indexOf(e.id),i=r.indexOf(n.id);return -1===a&&-1===i?e.createdAt<n.createdAt?1:-1:a-i}),e.map(e=>e.id)}function Y(e,r,n){let a=0,i={};for(let o of(r.forEach(e=>i[e.id]=e),Object.keys(n))){let r=i[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===f.e6.OWNER&&a++}}return a>1}function $(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,s.xx)(function(e,r,n){return e?W(e,r,n).map(e=>n[e]):[]})},251487:(e,r,n)=>{n.d(r,{H1:()=>_,X0:()=>p,XJ:()=>d,z:()=>c});var a=n(186606),i=n(989232),o=n(476254),s=n(353231),l=n(193743);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function p(e,r,n){let i=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&m(c[s-1])||l<e.value.length&&m(c[l]))||i.push({start:s,end:l,matchType:a.Ifi.TEXT_MATCH})}return i}function m(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let _=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type","annotationTextContent"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let i=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.searchAnnotationTextContent&&s.push({annotationTextContent:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,m=0;for(let n of l){let i=[];for(let o of n.matches){let s=p(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===a.Z6A.CANVAS?a.Ifi.PAGE_MATCH:a.Ifi.LAYER_MATCH,i=[e,...i]}else i.push(...s)}if(i.length){u+=i.length,m++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:i};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:m,numMatches:u,queryTimeMs:Math.round(performance.now()-i)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=a.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,i.trackEvent)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},388053:(e,r,n)=>{n.d(r,{$I:()=>c,YA:()=>d});var a=n(848318),i=n(479074),o=n(893115),s=n(967688),l=n(298386);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme","dark mode"],iconType:a.createElement(i.Z),hideForQuickCommand:"light"===e},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme","light mode"],iconType:a.createElement(o.a),hideForQuickCommand:"dark"===e},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},779388:(e,r,n)=>{n.d(r,{Cp:()=>y,LU:()=>h,Px:()=>f,jB:()=>v,xd:()=>b,yH:()=>g,zS:()=>E});var a=n(848318),i=n(382902),o=n(410725),s=n(748008),l=n(967688),c=n(578590),d=n(318147),u=n(55116),p=n(692853),m=n(532511);let _={[d.G_.DESIGN]:1,[d.G_.SITES]:2,[d.G_.FIGMAKE]:3,[d.G_.WHITEBOARD]:4,[d.G_.SLIDES]:5,[d.G_.DEV_MODE]:6,[d.G_.COOPER]:7};var h=(e=>(e.UPGRADE_NOT_NEEDED="UPGRADE_NOT_NEEDED_STATE",e.PROVISIONAL_ACCESS="PROVISIONAL_STATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE_STATE",e.REQUESTED="REQUESTED_STATE",e.REQUEST="REQUEST_STATE",e.CANNOT_UPGRADE_DISABLE="CANNOT_UPGRADE_DISABLE",e.ADMIN_SELF_UPGRADE="ADMIN_SELF_UPGRADE_STATE",e))(h||{});let g=(0,i.eU)([]);function f(e,r,n){let{destinationPlan:a,requiresManualUpgrade:i,upgradeRequested:o}=e;return!!a&&a.type===d.OL.ORG&&(!!r||!n&&!!i&&!!o)}function E(e,r,n){let{destinationPlan:a,requiresManualUpgrade:i,upgradeRequested:o}=e;if(!n&&void 0!==n&&a&&a.type===d.OL.ORG&&i){if(o)return(0,l.t)("upgrades.request_sent");if(!r)return(0,l.t)("upgrades.request")}}function y(e,r){let n=e?.parentId||"",a=e?.type===d.OL.ORG,i=(0,o.Rs)(u.ly7,{org_id:n,license_type:r},{enabled:!!e&&!!n&&a&&!!r}),l=(0,s.oA)(s.oA(i.data)?.hasConnectedPlanUserInOrgFolder),c=l&&l[0]?.hasConnectedPlanUserInOrg;return null===c?void 0:c}function b(e){let{hasProvisionalAccess:r,licenseType:n,destinationPlan:a,upgradeRequested:i,canAutoUpgrade:o,requiresUpgrade:s,cannotUpgradeDisableAction:l,isAdminSelfUpgrade:c}=e??{};return s&&c?"ADMIN_SELF_UPGRADE_STATE":r?"PROVISIONAL_STATE":n&&s&&a&&a.key.parentId?o?"CAN_AUTO_UPGRADE_STATE":i?"REQUESTED_STATE":l?"CANNOT_UPGRADE_DISABLE":"REQUEST_STATE":"UPGRADE_NOT_NEEDED_STATE"}function v({files:e,repos:r,destinationFolderId:n,isDestinationDrafts:i}){let{hasPendingRequest:s,getUpgradePathway:l,getUpgradeEligibility:h,getPlanAndPlanUser:g,getHasProvisionalAccess:f,getShouldShowCurf:E,getShouldShowScim:y,getIsUpgradeHandlerLoading:b,getIsEligibleForProvisionalAccess:v}=(0,m.wH)({folderId:n,isDraftsMove:!0}),T=function(e){let r=e.filter(e=>null!=e).map(e=>({projectId:e})),n=(0,o.p)(u.NI1,r);return(0,a.useMemo)(()=>n.reduce((e,r)=>(r.args.projectId&&e.set(r.args.projectId,r?.result?.data?.project?.path??null),e),new Map),[n])}([...new Set([...e,...r].map(e=>e.folder_id).filter(e=>null!==e))]);return function({files:e,repos:r,isDestinationDrafts:n,originFolderIdToPath:a,hasPendingRequest:i,getUpgradePathway:o,getUpgradeEligibility:s,getPlanAndPlanUser:l,getHasProvisionalAccess:u,getShouldShowCurf:h,getShouldShowScim:g,loading:f,getIsEligibleForProvisionalAccess:E}){let y=function(e,r,n){let a=e=>""===n.get(String(e.folder_id)),i=e.filter(a).map(e=>(0,c.wR)(e.editor_type));return r.filter(a).length>0&&i.push(d.G_.DESIGN),i.reduce((e,r)=>null===e||_[r]<_[e]?r:e,null)}(e,r,a);if(null===y||n||f)return{requiresUpgrade:!1,canAutoUpgrade:!1,requiresManualUpgrade:!1,upgradeRequested:!1,cannotUpgradeDisableAction:!1,hasProvisionalAccess:!1,licenseType:null,destinationPlan:null,destinationPlanUser:null,shouldShowCurf:!1,shouldShowScim:!1,getIsEligibleForProvisionalAccess:null,loading:f,isAdminSelfUpgrade:!1};let b=o(y),{plan:v,planUser:T}=l(y)||{},I=(0,m.Cy)(T?.permission),S=s(y)!==p.q.UPGRADE_NOT_NEEDED,A=S&&s(y)===p.q.CANNOT_UPGRADE&&i(y),w=s(y)===p.q.CANNOT_UPGRADE&&!A;return{requiresUpgrade:S,canAutoUpgrade:S&&b===p.J.AUTO_PATHWAY,requiresManualUpgrade:S&&b!==p.J.AUTO_PATHWAY,upgradeRequested:A,cannotUpgradeDisableAction:w,hasProvisionalAccess:u(y),licenseType:y,destinationPlan:v??null,destinationPlanUser:T??null,shouldShowCurf:h(y),shouldShowScim:g(y),getIsEligibleForProvisionalAccess:E,loading:f,isAdminSelfUpgrade:I}}({files:e,repos:r,isDestinationDrafts:i,originFolderIdToPath:T,hasPendingRequest:s,getUpgradePathway:l,getUpgradeEligibility:h,getPlanAndPlanUser:g,getHasProvisionalAccess:f,getShouldShowCurf:E,getShouldShowScim:y,loading:b(),getIsEligibleForProvisionalAccess:v})}},532511:(e,r,n)=>{n.d(r,{Cy:()=>Q,KI:()=>Z,Y9:()=>Y,fm:()=>X,wH:()=>H});var a=n(848318),i=n(301168),o=n(860676),s=n(660376),l=n(938982),c=n(19180),d=n(349048),u=n(317720),p=n(870567),m=n(626715),_=n.n(m),h=n(637640),g=n(615233),f=n(410725),E=n(998568),y=n(103661),b=n(946778),v=n(967688),T=n(952039),I=n(31898),S=n(877146),A=n(594950),w=n(578590),C=n(559372),N=n(730143),L=n(125761),O=n(318147),R=n(55116),P=n(138030),D=n(74666),k=n(692853),M=n(890221),F=n(844462),x=n(119866),U=n(852548),B=n(212478),G=n(208598),V=n(640747);function H(e){let r=(0,N.q5)(),n=(0,i.wA)(),o=(0,L.iZ)(),u=null,m=null;if(!e?.isDraftsMove){let n=e?.fileInBrowser??r;u=n?.key??null,m=n?.editorType?(0,w.wR)(n?.editorType):null}let h=e?.folderId??null,g=e?.plan,y=(0,f.Rs)((0,R.hCR)({projectId:h,fileKey:u,planParentId:g?.id??null,planType:g?.type??null}),{enabled:!!o&&(!!h||!!u||!!g)}),b=function(e,r){let n=[O.G_.DESIGN,O.G_.WHITEBOARD,O.G_.SLIDES,O.G_.DEV_MODE,O.G_.SITES,O.G_.FIGMAKE],a=n.map(r=>({projectId:e,permissionArguments:{licenseType:r.toString()}})),i=(0,f.p)(R.t8B,a,{enabled:(0,c.k)().use_upgrade_eligibility_folder_view&&r&&!!e}),o={};return i.forEach((e,r)=>{let a=n[r];if(!a)return;let i=e.result.data;o[a]={plan:(0,p.oA)(i?.project?.resolvedHostOrConnectedPlanPermissions)||null,planUser:(0,p.oA)(i?.project?.resolvedHostOrConnectedPlanUser)||null}}),o}(h,!!o),I=function(e,r,n,a,i){let o={};for(let r of Object.values(O.G_))a===S.tc.NUX&&e?.file?o[r]={plan:(0,p.oA)(e.file.resolvedHostOrConnectedPlanPermissions)||null,planUser:(0,p.oA)(e.file.resolvedHostOrConnectedPlanUser)||null}:(a===S.tc.USER_SETTINGS||a===S.tc.DOWNGRADE_EMAIL||a===S.tc.LIFECYCLE_REUPGRADE_EMAIL)&&e?.planUser&&e.planPermissions?o[r]={plan:(0,p.oA)(e.planPermissions)||null,planUser:(0,p.oA)(e.planUser)||null}:o[r]={plan:null,planUser:null};if(e?.file&&n)o[n]={plan:(0,p.oA)(e.file.resolvedHostOrConnectedPlanPermissions)||null,planUser:(0,p.oA)(e.file.resolvedHostOrConnectedPlanUser)||null},n===O.G_.DESIGN&&(o[O.G_.DEV_MODE]={plan:(0,p.oA)(e.file.resolvedHostOrConnectedPlanDevModePermissions)||null,planUser:(0,p.oA)(e.file.resolvedHostOrConnectedPlanUserDevMode)||null});else if(e?.project&&r){let r=(0,c.k)().use_upgrade_eligibility_folder_view,n=e=>({plan:i?.[e]?.plan||null,planUser:i?.[e]?.planUser||null});o[O.G_.DESIGN]=r?n(O.G_.DESIGN):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanDesignPermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserDesign)||null},o[O.G_.WHITEBOARD]=r?n(O.G_.WHITEBOARD):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanFigjamPermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserFigjam)||null},o[O.G_.SLIDES]=r?n(O.G_.SLIDES):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanSlidesPermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserSlides)||null},o[O.G_.DEV_MODE]=r?n(O.G_.DEV_MODE):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanDevModePermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserDevMode)||null},o[O.G_.SITES]=r?n(O.G_.SITES):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanSitesPermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserSites)||null},o[O.G_.FIGMAKE]=r?n(O.G_.FIGMAKE):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanFigmakePermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserFigmake)||null},o[O.G_.COOPER]=r?n(O.G_.DESIGN):{plan:(0,p.oA)(e.project.resolvedHostOrConnectedPlanDesignPermissions)||null,planUser:(0,p.oA)(e.project.resolvedHostOrConnectedPlanUserDesign)||null}}return o}(y.data,h,m,e?.entryPoint,b),C=function({licenseTypeToPlanAndPlanUser:e,loaded:r}){if(!r)return{provisionalAccessEligibility:null,isValueReady:!1};let n=Object.values(O.G_),a={};return n.forEach(function(r){let{plan:n}=e[r],i=n?.key.parentId,o=n?.key.type;if(i&&o){let e=n.campfireProvisionalAccessEnabled;a[r]={[A.ud.COLLABORATOR]:e&&n.isEligibleProvisionalAccessCollaborator,[A.ud.DEVELOPER]:e&&n.isEligibleProvisionalAccessDeveloper,[A.ud.EXPERT]:e&&n.isEligibleProvisionalAccessExpert,[A.ud.CONTENT]:e&&n.isEligibleProvisionalAccessExpert}}else a[r]=null}),{provisionalAccessEligibility:a,isValueReady:!0}}({licenseTypeToPlanAndPlanUser:I,loaded:"loaded"===y.status||"disabled"===y.status}),P=(0,d.k9)(()=>C.provisionalAccessEligibility,[C.provisionalAccessEligibility]),M=(0,d.k9)(()=>Object.fromEntries(Object.entries(I).map(([e,r])=>{let n=r.planUser?.provisionalLicenseTypes??[],a=r.planUser?.seatTypeLicenseTypes??[];return[e,n.filter(e=>!a.includes(e))]})),[I]),F=function({licenseTypeToPlanAndPlanUser:e,loaded:r}){let n=_()(Object.values(e).map(e=>e.plan?.key.parentId).filter(e=>!!e)).map(e=>({orgId:e})),a=(0,f.p)(R.aRw,n,{enabled:r}),i=a.every(e=>"loaded"===e.result.status&&e.result.data?.currentUser.idpUsersInOrg.status==="loaded");if(!r||!i)return null;let o={},s={};return a.forEach(e=>{let r=(0,p.oA)(e.result.data?.currentUser.idpUsersInOrg,[]),n=r.length>0&&r[0]?.seatType!==null;s[e.args.orgId]=n}),Object.values(O.G_).forEach(r=>{let n=!1,a=e[r]?.plan?.key.parentId;a&&a in s&&(n=s[a]??!1),o[r]=n}),o}({licenseTypeToPlanAndPlanUser:I,loaded:"loaded"===y.status||"disabled"===y.status}),x=(0,d.k9)(()=>F,[F]),U=function({licenseTypeToPlanAndPlanUser:e,loaded:r}){let n=_()(Object.values(e).filter(e=>e.plan?.key.parentId&&e.planUser?.permission).map(e=>({orgId:e.plan?.key.parentId||"",permission:e.planUser?.permission||""}))),a=(0,f.p)(R.kdQ,n,{enabled:r}),i=a.every(e=>"loaded"===e.result.status);if(!r||!i)return null;let o={},s={};return a.forEach(e=>{let r=e.result.data?.currentUser?.baseOrgUser?.org,n=r?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting,a=e.args.permission===O._D.GUEST,i=n===D.Sm.ALL_USERS||n===D.Sm.MEMBERS&&!a;s[e.args.orgId]=i}),Object.values(O.G_).forEach(r=>{let n=!1,a=e[r]?.plan?.key.parentId;a&&a in s&&(n=s[a]??!1),o[r]=n}),o}({licenseTypeToPlanAndPlanUser:I,loaded:"loaded"===y.status||"disabled"===y.status}),B=(0,d.k9)(()=>U,[U]),G=(0,a.useCallback)(({afterUpgradeCallback:e,licenseType:r,upgradeReason:a,entryPoint:i})=>{let{plan:o,planUser:s}=I[r],c=(r,n)=>{e&&(n?e(r,n):e(r))},d=i===S.i$.BlockingModal||i===S.PE.FileMoveUpsell&&o?.tier===O.Ag.PRO;return function({onUpgrade:e,licenseType:r,dispatch:n,upgradeReason:a,entryPoint:i,plan:o,planUser:s,fileKey:c,onRequestWithProvisionalAccess:d,provisionalAccessEligibility:u,skipAutoPathwayConfirmationModal:p,isSeatManagedViaScim:m,folderId:_,curfContext:h}){let g=K({licenseType:r,plan:o,provisionalAccessEligibility:u,isSeatManagedViaScim:m,planUser:s,entryPoint:i,curfContext:h});if(null===o)return(0,E.$D)(l.e.MONETIZATION_EXPANSION,Error("Error fetching plan in handleUpgrade"),{extra:{licenseType:r,fileKey:c,folderId:_,upgradePathway:g}}),()=>n(T.F.enqueue({message:"Error fetching plan"}));switch(g){case k.J.ADMIN_AUTO_PATHWAY:return Y({licenseType:r,dispatch:n,upgradeReason:a,upgradePathway:k.J.ADMIN_AUTO_PATHWAY,plan:o,planUser:s,entryPoint:i,onUpgrade:e,fileKey:c,skipConfirmationModal:p,folderId:_});case k.J.AUTO_PATHWAY:return Y({licenseType:r,dispatch:n,upgradeReason:a,upgradePathway:k.J.AUTO_PATHWAY,plan:o,planUser:s,entryPoint:i,onUpgrade:e,fileKey:c,skipConfirmationModal:p,folderId:_});case k.J.PROVISIONAL_PATHWAY:case k.J.RE_REQUEST_PATHWAY:default:return X({licenseType:r,dispatch:n,entryPoint:i,plan:o,planUser:s,fileKey:c,onRequestWithProvisionalAccess:d,folderId:_,getIsEligibleForProvisionalAccess:e=>W({licenseType:e,provisionalAccessEligibility:u,entryPoint:i})})}}({onUpgrade:c,onRequestWithProvisionalAccess:c,licenseType:r,dispatch:n,upgradeReason:a,plan:o,planUser:s,fileKey:u,entryPoint:i,provisionalAccessEligibility:P,skipAutoPathwayConfirmationModal:d,isSeatManagedViaScim:!!x&&x[r],folderId:h,curfContext:B})},[I,n,u,P,x,h,B]),V=(0,a.useCallback)((r,n)=>{let{plan:a}=I[r],i=J(r,M,e?.entryPoint);return function({licenseType:e,plan:r,canPerformAction:n,hasProvisionalAccess:a,entryPoint:i}){return n||a?k.q.UPGRADE_NOT_NEEDED:r?r.tier===O.Ag.STARTER||r.activeTrialLicenseTypes?.includes(e)&&(0,c.k)().product_trials_lg||!function(e,r,n){let a=$({licenseType:e,entryPoint:n});if(!a)return!1;switch(a){case A.ud.DEVELOPER:return r.needUpgradeDeveloper;case A.ud.COLLABORATOR:return r.needUpgradeCollaborator;case A.ud.EXPERT:case A.ud.CONTENT:return r.needUpgradeExpert;default:(0,s.xb)(a)}}(e,r,i)?k.q.UPGRADE_NOT_NEEDED:!function(e,r,n){let a=$({licenseType:e,entryPoint:n});if(!a)return!1;switch(a){case A.ud.DEVELOPER:return r.canUpgradeDeveloper;case A.ud.COLLABORATOR:return r.canUpgradeCollaborator;case A.ud.EXPERT:case A.ud.CONTENT:return r.canUpgradeExpert;default:(0,s.xb)(a)}}(e,r,i)?k.q.CANNOT_UPGRADE:k.q.CAN_UPGRADE:k.q.CANNOT_UPGRADE}({licenseType:r,plan:a,canPerformAction:n,hasProvisionalAccess:i,entryPoint:e?.entryPoint})},[I,M,e?.entryPoint]),H=(0,a.useCallback)(r=>{let n=q({licenseType:r,entryPoint:e?.entryPoint}),{planUser:a}=I[r];return z({licenseType:n,planUser:a})},[I,e?.entryPoint]),j=(0,a.useCallback)(r=>{let n=q({licenseType:r,entryPoint:e?.entryPoint}),{planUser:a}=I[r];return function({licenseType:e,planUser:r}){return null!==z({licenseType:e,planUser:r})}({licenseType:n,planUser:a})},[I,e?.entryPoint]),Z=(0,a.useCallback)(r=>J(r,M,e?.entryPoint)??!1,[M,e?.entryPoint]),Q=(0,a.useCallback)(r=>{let{plan:n,planUser:a}=I[r];return K({licenseType:r,plan:n,planUser:a,provisionalAccessEligibility:P,entryPoint:e?.entryPoint,isSeatManagedViaScim:!!x&&x[r],curfContext:B})},[I,P,e?.entryPoint,x,B]),ee=(0,a.useCallback)(()=>"loading"===y.status||null===P||null===x||null===B,[y.status,P,x,B]),et=(0,a.useCallback)(e=>I[e],[I]),er=(0,a.useCallback)(e=>!!B&&B[e],[B]);return{handleUpgrade:G,getUpgradeEligibility:V,getPendingRequest:H,getHasProvisionalAccess:Z,hasPendingRequest:j,getUpgradePathway:Q,getIsUpgradeHandlerLoading:ee,getPlanAndPlanUser:et,getShouldShowCurf:er,getShouldShowScim:(0,a.useCallback)(e=>!!x&&x[e],[x]),getProvisionalAccessBanner:(0,a.useCallback)(r=>{let n=J(r,M,e?.entryPoint),a=!!B&&B[r];return{showBanner:n,text:function(e,r){if(r)switch(e){case O.G_.DEV_MODE:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.dev_mode");case O.G_.DESIGN:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.design");case O.G_.SLIDES:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.slides");case O.G_.WHITEBOARD:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.figjam");case O.G_.SITES:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.sites");case O.G_.FIGMAKE:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.figmake");case O.G_.COOPER:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.curf.design");default:return(0,s.xb)(e)}else switch(e){case O.G_.DEV_MODE:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.dev_mode");case O.G_.DESIGN:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.design");case O.G_.SLIDES:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.slides");case O.G_.WHITEBOARD:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.figjam");case O.G_.SITES:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.sites");case O.G_.FIGMAKE:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.figmake");case O.G_.COOPER:return(0,v.t)("fullscreen.toolbar_banner.provisional_access.design");default:return(0,s.xb)(e)}}(r,a),shouldShowCurf:a}},[M,B,e?.entryPoint]),getIsEligibleForProvisionalAccess:(0,a.useCallback)(r=>W({licenseType:r,provisionalAccessEligibility:P,entryPoint:e?.entryPoint}),[P,e?.entryPoint])}}function z({licenseType:e,planUser:r}){if(!r)return null;let n=r.pendingAccountTypeRequest;return n?.billableProduct?.licenseTypes.includes(e)&&"pending"===n.status?n:null}function K({licenseType:e,plan:r,provisionalAccessEligibility:n,isSeatManagedViaScim:a,planUser:i,entryPoint:s,curfContext:l}){let c=$({licenseType:e,entryPoint:s});if(!c)return k.J.RE_REQUEST_PATHWAY;let d=!1;if(!a){let n=Q(i?.permission),a=!!l&&l[e];if(n&&!a)return k.J.ADMIN_AUTO_PATHWAY;let s=null;switch(c){case A.ud.DEVELOPER:d=!!(0,p.oA)(r?.canUpgradeAutoPathwayDeveloper),s=(0,p.oA)(r?.upgradeApprovalSettingsDeveloper);break;case A.ud.COLLABORATOR:d=!!(0,p.oA)(r?.canUpgradeAutoPathwayCollaborator),s=(0,p.oA)(r?.upgradeApprovalSettingsCollaborator);break;case A.ud.EXPERT:d=!!(0,p.oA)(r?.canUpgradeAutoPathwayExpert),s=(0,p.oA)(r?.upgradeApprovalSettingsExpert)}d||s!==o.zRx.INSTANT_APPROVAL||console.warn(`PlanUser ${i?.id} in plan ${r?.id} has instant-approval upgrade approval setting for billable product ${c} but did not pass permission for canUpgradeAutoPathway`)}return d?k.J.AUTO_PATHWAY:n&&n[e]?.[c]?k.J.PROVISIONAL_PATHWAY:k.J.RE_REQUEST_PATHWAY}function W({licenseType:e,provisionalAccessEligibility:r,entryPoint:n}){let a=$({licenseType:e,entryPoint:n});return!!a&&!!r?.[e]?.[a]}function j(e,r){return{planType:e.key.type,planParentId:e.key.parentId,planTier:e.tier,isOrgGuest:r?.permission===O.Xn.GUEST&&e.key.type===O.OL.ORG}}function Y({licenseType:e,dispatch:r,upgradeReason:n,upgradePathway:a,plan:i,planUser:o,onUpgrade:s,onError:c,skipConfirmationModal:d,entryPoint:u,fileKey:p,folderId:m,extraErrorContext:_}){let g=$({licenseType:e,entryPoint:u});if(!g)return(0,E.$D)(l.e.MONETIZATION_EXPANSION,Error(`Invalid ${a===k.J.ADMIN_AUTO_PATHWAY?"admin self":"auto"} upgrade: missing billable product key`),{extra:{licenseType:e,fileKey:p,folderId:m,entryPoint:n,upgradePathway:a,extraErrorContext:_??null}}),()=>r(T.F.enqueue({message:"Encountered an error"}));let f=i?.key.type,v=i?.key.parentId;if(null===i||!f||!v)return(0,E.$D)(l.e.MONETIZATION_EXPANSION,Error("Error fetching plan in handleUpgradeAutoPathway"),{extra:{licenseType:e,fileKey:p,folderId:m,planId:v,planType:f,upgradePathway:a,extraErrorContext:_??null}}),()=>r(T.F.enqueue({message:"Error fetching plan"}));let A=j(i,o),w=e=>{e.message.includes("Org access needed")?(r(y.Ts({origin:"edit_button_click",formState:b.qB.JOIN_ORG,redirectUrl:h.Ay.location.pathname})),r(I.to({type:F.x,data:{}}))):c?c(e):r(T.F.enqueue({message:e.data?.message||"Encountered an error",error:!0}))};if(u===S.tc.NUX)return async i=>{try{await M.R.upgrade(f,v,n,a,g,p,m,e),s(i,{autoApproved:!0}),r(I.to({type:V.u,data:{autoApproved:!0,seatType:g}}))}catch(e){w(e)}};if(u===S.tc.ASK_TO_EDIT_ONE_CLICK)return async o=>{try{r(I.to({type:U.$,data:{planName:i?.name}})),await M.R.upgrade(f,v,n,a,g,p,m,e),s(o,{autoApproved:!0})}catch(e){r(I.ES(U.$)),w(e)}};if(d)return async r=>{try{await M.R.upgrade(f,v,n,a,g,p,m,e),s(r)}catch(e){w(e)}};let C={licenseType:e,entryPoint:u,billableProductKey:g};f===O.OL.ORG?C.orgId=v:f===O.OL.TEAM&&(C.teamId=v);let N=i?.tier===O.Ag.STUDENT,L=a===k.J.ADMIN_AUTO_PATHWAY?x.D:B.t;return()=>{r(I.to({type:L,showModalsBeneath:u===S.tc.USER_SETTINGS,data:{licenseType:e,trackingProperties:C,onRequest:async(r,i)=>{try{await M.R.upgrade(f,v,n,a,g,p,m,e),i(),s(r)}catch(e){i(),w(e)}},planName:i.name,entryPoint:u,isEduTeam:N,planDataForSocialProof:A}}))}}function $({licenseType:e,entryPoint:r}){let n=q({licenseType:e,entryPoint:r});return(0,C.F2)(n)}function q({licenseType:e,entryPoint:r}){return r===S.tc.PUBLISH_SITES&&(e===O.G_.SITES||e===O.G_.FIGMAKE)?O.G_.SITES:e}function X({licenseType:e,dispatch:r,entryPoint:n,plan:a,planUser:i,fileKey:o,onRequestWithProvisionalAccess:s,folderId:c,getIsEligibleForProvisionalAccess:d}){let u=$({licenseType:e,entryPoint:n});if(!u)return(0,E.$D)(l.e.MONETIZATION_EXPANSION,Error("Invalid upgrade request: missing billable product key"),{extra:{licenseType:e,fileKey:o,folderId:c,entryPoint:n}}),()=>r(T.F.enqueue({message:"Encountered an error"}));let p=a?.key.type,m=a?.key.parentId;if(null===a||!p||!m)return(0,E.$D)(l.e.MONETIZATION_EXPANSION,Error("Error fetching plan in handleUpgradeManualPathway"),{extra:{licenseType:e,fileKey:o,folderId:c}}),()=>r(T.F.enqueue({message:"Error fetching plan"}));if(n===S.tc.NUX)return async e=>{try{let n=await (0,P.b)({dispatch:r,planUser:i,fileKey:o??null,folderId:c??null,plan:a,seatType:u});r(I.to({type:V.u,data:{autoApproved:!1,seatType:u,requestId:n}})),s(e,{autoApproved:!1,requestId:n})}catch(e){r(T.F.enqueue({message:"Error fetching plan"}))}};let _=j(a,i);if(p===O.OL.ORG){let l=i?.fromOrgUser?.licenseGroupMember?.licenseGroupId;return p=>{r(I.to({type:G.YG,showModalsBeneath:n===S.tc.USER_SETTINGS,data:{orgId:m,orgUser:i?{...i,org_id:m,user_id:i.userId,license_group_member:l?{license_group_id:l}:void 0}:null,licenseType:e,entryPoint:n,seatTypeKey:u,fileKey:o,actionOnProvisionalAccessGranted:()=>s(p),planName:a?.name,folderId:c,getIsEligibleForProvisionalAccess:d,planDataForSocialProof:_}}))}}return p===O.OL.TEAM?i=>{r(I.to({type:G.PK,showModalsBeneath:n===S.tc.USER_SETTINGS,data:{team:{id:m},editorType:(0,C.AU)(e),entryPoint:n,seatTypeKey:u,licenseType:e,fileKey:o,actionOnProvisionalAccessGranted:()=>s(i),planName:a?.name,folderId:c,getIsEligibleForProvisionalAccess:d,planDataForSocialProof:_}}))}:()=>r(T.F.enqueue({message:"Encountered an error"}))}function J(e,r,n){let a=q({licenseType:e,entryPoint:n});return r?.[e]?.includes(a)??!1}function Z(e){let r=(0,f.Rs)((0,R.dxg)({fileKey:e.fileKey,userId:e.userId}),{enabled:!!(e.fileKey&&e.userId&&e.enabled)}),n=(0,a.useMemo)(()=>e.enabled?u.Qw.from(r).transform(e=>{let r=[...e.file?.currentPlanUser?.seatTypeLicenseTypes??[],...e.file?.currentPlanUser?.provisionalLicenseTypes??[]];return r.push(...e.file?.connectedPlanUser?.seatTypeLicenseTypes??[],...e.file?.connectedPlanUser?.provisionalLicenseTypes??[]),(0,c.k)().product_trials_lg&&(r.push(...e.file?.plan?.activeTrialLicenseTypes??[]),r.push(...e.file?.connectedPlan?.activeTrialLicenseTypes??[])),{availableLicenses:_()(r)}}):u.Qw.loaded(null),[e.enabled,r]);return{userLacksLicenseAccess:(0,a.useCallback)(e=>{if(!n||"loaded"!==n.status)return null;if(e===O._Y.COOPER)return!1;let r=(0,w.wR)(e);return!n.data?.availableLicenses?.includes(r)},[n])}}function Q(e){return e===O.Xn.ADMIN&&!!(0,g.Ay)().admin_self_upgrades_enabled}},793944:(e,r,n)=>{n.d(r,{w:()=>a}),n(461979);function a(){return!!window.INITIAL_OPTIONS?.user_data}},223134:(e,r,n)=>{let a;n.d(r,{wy:()=>d});var i=n(989232),o=n(405531),s=n(192063);class l{constructor(){this.rafFrameTimings={},this.pendingCallbacks={},this.rafFrameTimingCallback=()=>{for(let[e,r]of Object.entries(this.rafFrameTimings))r.length<5?r.push(performance.now()):this.onFrameTimingReady(e);if(Object.keys(this.rafFrameTimings).some(this.isWorkLeft))requestAnimationFrame(this.rafFrameTimingCallback);else for(let e of Object.keys(this.pendingCallbacks))this.onFrameTimingReady(e)},this.isWorkLeft=e=>(this.rafFrameTimings[e]?.length??0)<5,this.onFrameTimingReady=e=>{let r=this.getFrameTimings(e);this.pendingCallbacks[e]?.(r),delete this.pendingCallbacks[e],delete this.rafFrameTimings[e]},this.getFrameTimings=e=>{let r=this.rafFrameTimings[e];return r?function(e){return e.map((r,n)=>0===n?0:r-(e[n-1]??r)).slice(1)}(r):[]},this.whenFrameTimingIsReady=(e,r)=>{this.rafFrameTimings[e]?this.isWorkLeft(e)?this.pendingCallbacks[e]=r:r(this.getFrameTimings(e)):r([])}}requestFrameTiming(e){this.rafFrameTimings[e]=[performance.now()],requestAnimationFrame(this.rafFrameTimingCallback)}}class c{trackUserActionTimings(e){Array.from(e.values()).forEach(e=>{a.whenFrameTimingIsReady(e.id,r=>{i.definedAnalyticsHandler.trackDefinedMetric("user_action_timing.action",{editScopeName:e.name,wallTimeMs:e.wallTime.end-e.wallTime.start,editScopeCount:e.editScopeCount,editScopeSyncTimeMs:e.editScopeSyncTime,editScopeAsyncTimeMs:e.editScopeAsyncTime,editScopeTimeMs:e.editScopeSyncTime+e.editScopeAsyncTime,userActionTimingScopes:JSON.stringify(e.userActionTimingScopes),isPartialEvent:!!e.isPartialEvent,containsSymbolUpdaterWork:e.userActionTimingScopes.some(e=>"SymbolUpdater"===e.scopeName),nextFrameTimings:JSON.stringify(r),wallTimePlusNextFrameMs:e.wallTime.end-e.wallTime.start+(r[0]??0)}),o.J6.logVital(`user_action_timing.action.${e.name}`,{level:s.$.INFO,startTime:performance.timeOrigin+e.wallTime.start,duration:e.wallTime.end-e.wallTime.start,description:e.userActionTimingScopes.map(e=>`${e.scopeName}: ${e.duration}ms (${e.count})`).join(", "),context:{editScopeSyncTimeMs:e.editScopeSyncTime,editScopeAsyncTimeMs:e.editScopeAsyncTime,isPartialEvent:e.isPartialEvent,editScopeCount:e.editScopeCount,userActionTimingScopes:Object.fromEntries(e.userActionTimingScopes.map(e=>[e.scopeName,{duration:e.duration,count:e.count}]))}})})})}requestFrameTiming(e){a.requestFrameTiming(e)}}function d(){a=new l,new c}},392903:(e,r,n)=>{n.d(r,{td:()=>c}),n(183603);var a=n(751561),i=n(304756),o=n(967688),s=n(151223),l=n(337752);n(706688);let c="-1";(0,s.nF)((e,r)=>{if(!r.userInitiated){e.dispatch(l.Q$(r));return}return(0,a.Q)({requestPromise:i.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.Q$(r)})})},411910:(e,r,n)=>{n.d(r,{I2:()=>M,Il:()=>F,Ri:()=>b,Um:()=>R,Y9:()=>x,YH:()=>y,_X:()=>w,kb:()=>f,pk:()=>L,tb:()=>E,tp:()=>C,yk:()=>U});var a=n(174577),i=n(625956),o=n(415955),s=n.n(o),l=n(128080),c=n.n(l),d=n(383886),u=n(29188),p=n(615233),m=n(879263),_=n(129723),h=n(478654),g=n(425451);let f=(0,a.v)(),E=(0,a.v)(),y=!window.EARLY_ARGS?.file_minimal_user_state;function b(){y=!0}let v={REQUESTED:"web.api_user_state.requested"},T=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,m.BO)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,i.g)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:v.REQUESTED,tags:{source:e,client_visibility:document.visibilityState}})}},I=null,S=null,A=null;function w(e,r){b();let n=L(),a=R();return I&&n===S&&a===A||(T.reportUserStateCall(e),I=g.k.getState({orgId:n||void 0,teamId:a||void 0},r),S=n,S=a,I.then(()=>{I=null,S=null,A=null}).catch(()=>{I=null,S=null,A=null})),I}function C(e){return h.H.getState(e)}let N=null;function L(){return N?"personal"===N?null:N:N=(0,p.tl)().org_id||null}let O=null;function R(){return O||(O=(0,p.tl)().team_id||null),O}let P="recent_user_data",D=e=>btoa(JSON.stringify(e)),k=e=>JSON.parse(atob(e));function M(e){x(e,!0)}function F(e){let r=U(),n=s()(r),a=(0,d.UG)();if(n.communityProfileId=e,!c()(r,n))try{a.set(P,D(n))}catch(e){console.error("Failed to set community profile",e)}}function x(e,r,n,a,i){if(u.S8)return;let o=U(),l=s()(o),p=(0,d.UG)();if(r?l.communityUserId=e:l.fileBrowserUserId=e,void 0!==n&&(l.userIdToOrgId||(l.userIdToOrgId={}),l.userIdToOrgId[e]=n),(void 0!==n||void 0!==i)&&(l.userIdToPlan||(l.userIdToPlan={}),n?l.userIdToPlan[e]=[_.O.ORG,n]:i&&(l.userIdToPlan[e]=[_.O.TEAM,i])),a&&(l.communityProfileId=a),!c()(o,l))try{p.set(P,D(l))}catch(e){console.error("Failed to set recent workspace",e)}}function U(){let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{}},r=(0,d.UG)();try{let n=r.get(P);n&&(e=k(n))}catch(e){console.error("Failed to get recent workspace",e)}return e}},606672:(e,r,n)=>{n.d(r,{Eg:()=>ec,HF:()=>Z,Ht:()=>H,Nb:()=>eu,Ul:()=>et,V_:()=>V,_b:()=>el,_h:()=>eo,_t:()=>j,cn:()=>W,hZ:()=>ee,kT:()=>K,tP:()=>z,un:()=>er,vF:()=>em,vw:()=>X,w_:()=>Y,yH:()=>ep});var a=n(938982),i=n(186606),o=n(553547),s=n(19180),l=n(382902),c=n(481009),d=n(989232),u=n(918777),p=n(476254),m=n(527546),_=n(998568),h=n(810503),g=n(182317),f=n(304756),E=n(314979),y=n(659717),b=n(731991),v=n(952039),T=n(151223),I=n(453370),S=n(244534),A=n(529848),w=n(587745),C=n(702038),N=n(259964),L=n(895222),O=n(444521),R=n(7905),P=n(58253),D=n(596224),k=n(159016),M=n(780922),F=n(303397),x=n(461445),U=n(746903),B=n(677334),G=n(656320);let V="current_version",H=new c.q(40),z=(0,l.eU)(""),K=B.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),a=await P.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),i=performance.now()-n;return(0,d.trackEvent)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:i}),a.data.meta?.versions||[]},key:"fileVersionsPaginated"});function W(e,r,n,a){return`${e}-${r}-${n.id}-${a}`}function j(e,r){let n=p.D.getState(),a=n.openFile?.key,i=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!a||!r)return null;let o=W(a,r,e,(0,L.NK)(n.fileVersion));if(H.has(o))return H.get(o);let s=new Promise((n,s)=>(0,M.n)(`${e.canvas_url}&nodes_to_extract=${i.join(",")}`).then(([i,s,l])=>{let c=W(a,r,e,l),d=Promise.resolve({canvas:i,key:c});H.delete(o),H.set(c,d),n(d)}).catch(s));return H.set(o,s),s}function Y(e){let r=p.D.getState(),n=r.openFile?.key,a=r.mirror.appModel.currentPage;if(!n||!a)return null;let i=W(n,a,e,(0,L.NK)(r.fileVersion));H.delete(i)}let $=async(e,r,n,a)=>{let i=new URLSearchParams;i.set("diff_version",(0,w.C2)().toString()),i.set("from_file_version_id",r),i.set("migration_version",`${n}`),a&&a.length>0&&i.set("nodes_to_diff",a.join(","));let{data:{meta:{checkpoint_diff:o}}}=await f.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${i.toString()}`);return o},q=async e=>{let r=new Date().getTime(),{data:n}=await f.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),a=new Date().getTime();return(0,d.trackEvent)("versioning_performance_metrics",{name:"download_diff",durationMs:a-r},{forwardToDatadog:!0}),n};function X(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function J(e,r,n){let a=await $(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!a.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,s=new Date().getTime(),[l]=await Promise.all([q(a.signed_url),(0,x.W5)(i._em.DEBUG_TOOL)]),c=new Date().getTime();return((0,d.trackEvent)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:c-s,isEditor:o},{forwardToDatadog:!0}),i.glU.loadHistoryChangesState(l))?"":"Error loading HistoryChangesState into memory."}function Z(e,r){if(e)return r.versions.find(r=>r.id===e)}async function Q(e,r){let n=Date.now(),a=Z(e,r.getState().versionHistory);if(!a)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await J(a.id,r),s=Date.now()-n;if(o)throw(0,h.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:i.glU.getPagesWithChanges().length}}let ee=(0,T.nF)(async(e,r)=>{let n,a;let o=e.getState(),l=()=>{e.dispatch(I.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(S.Y6({mode:i.Oin.OFF})),l()},d=o.user;if(!(0,s.k)().version_diffing||!(0,s.k)().xr_debounce_threshold||!d||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===N.nT.Whiteboard||o.mirror.appModel.topLevelMode===i.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return c();let{openFileKey:p}=r;try{let e=await R.S.getLastInteraction({openFileKey:p});n=e.data.meta.last_view_at,a=e.data.meta.last_edit_at}catch{c()}let m=(0,u.A)(n),_=(0,u.A)(a),h=m>_?m:_;if(!h.isValid()||h<(0,u.A)().subtract(7,"days"))return c();let g=P.W.getPaginatedVersions({fileKey:p,createdAtOrBefore:h.toISOString()}),f=P.W.getPaginatedVersions({fileKey:p}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,v=y.data.meta.versions;if(!(b.length>0&&v.length>0))return c();let T=b[0],A=v[0];if(!((0,u.A)(A.created_at)>(0,u.A)(T.created_at))||A.user_id===d.id||A.participating_users_array?.includes(d.handle))return c();e.dispatch(el()),e.dispatch(em({fromVersionId:T.id}))}),et=(0,T.nF)(async(e,r)=>{let n=e.getState(),a=n.user;if(!(0,s.k)().version_diffing||!a||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===N.nT.Whiteboard||n.mirror.appModel.topLevelMode===i.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,l=(0,u.A)(r.versionHistory.lastEdited),c=(0,u.A)(r.versionHistory.lastViewed),p=c>l?c:l;if(!p.isValid()||p<(0,u.A)().subtract(7,"days"))return;let m=Date.now(),_=P.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:p.toISOString()}),h=P.W.getPaginatedVersions({fileKey:o,pageSize:1}),[f,E]=await Promise.all([_,h]),y=f.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,u.A)(n.created_at)>(0,u.A)(r.created_at)&&n.user_id!==a.id&&!n.participating_users_array?.includes(a.handle)){let a={fileKey:o,eventId:(0,g.g)(),lastEdited:l.toISOString(),lastViewed:c.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,d.trackEvent)("Version Diffing Changed Since Last View",{...a,durationMs:Date.now()-m},{forwardToDatadog:!0}),e.dispatch(ei({lastSeenVersionId:r.id,trackingProps:a}))}}});function er(){let e=p.D,r=e.getState().versionHistory,n=X(r),a=r.fetchedPageIds||new Set,i=e.getState().mirror.appModel.currentPage;return n&&n.id!==V?ea(n,e,a,i,o.Xy):Promise.reject("Version history inactive")}let en=null;function ea(e,r,n,a,s,c){return new Promise((d,u)=>{let p=e.canvas_url;p||u("Couldn't get canvas URL for version.");let m=s===o.Xy,_=!m&&n.size>0,h=s??a,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===c&&g&&!s&&(h=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(h);if(!f)return r.dispatch(A.SR({isLoadingPage:!1})),d();p+=`&nodes_to_extract=${h}`;let E=r.getState().selectedView;U.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,c);let y=(0,M.n)(p).then(([e])=>{if(y===en){var o;en=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===i.lyf.HISTORY||o===i.lyf.DEV_HANDOFF){let o;if(_)i.glU.applyFileToCurrentScene(e);else if(l.zl.set(z,""),!i.glU.loadFigFileForPreview(e))return u("Error loading this version into memory.");U.C.markVersionHistoryLoadEnd();let c=r.getState().selectedView.fileKey;o=s===N.nT.Whiteboard?"figjam":s===N.nT.Design||s===N.nT.Slides?(0,N.CO)(s):"unknown";let p=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";U.C.report(c,o,p),f&&(m?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(h),r.dispatch(A.EB({fetchedPageIds:n})),r.dispatch(A.SR({isLoadingPage:!1})),d()),E.nodeId&&E.nodeId!==a&&C.tJ([E.nodeId]),E.devModeFocusId&&i.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(S.Y6({mode:i.Oin.OFF}))}}});en=y})}let ei=(0,T.nF)(async(e,r)=>{let n,a;let{lastSeenVersionId:i,trackingProps:o}=r;try{let r=await Q(i,e);n=r.elapsedTime,a=r.numPagesWithChanges}catch(e){return}if(0===a){(0,d.trackEvent)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,d.trackEvent)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:a,durationMs:n},{forwardToDatadog:!0}),e.dispatch(b.Q.enqueueFront({notification:{type:y._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,d.trackEvent)("Version Diffing Notification Opened",o),e.dispatch(el()),e.dispatch(em({fromVersionId:i}))},dismissCallback:()=>{(0,d.trackEvent)("Version Diffing Notification Dismissed",o)}}}))}),eo=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),a=(0,G.U2)(n.selectedView);a&&!n.versionHistory.loading&&(e.dispatch(A.ne({loading:!0})),(0,m.En)(`/api/versions/${a}`,30,n.versionHistory,r).then(n=>{a===(0,G.U2)(e.getState().selectedView)&&e.dispatch(A.BC({history:n,direction:r}))}))}),es=(0,T.nF)(e=>{e.dispatch(A.p0()),e.dispatch(eo({direction:m.mL}))}),el=(0,T.nF)((e,r)=>{F.Y5.triggerAction("enter-history-mode"),F.Y5.triggerAction("deselect-all"),e.dispatch(es()),(0,D.Vj)(e.getState().selectedView)&&l.zl.set(k.s0,i.Nfd.FILE),i.Ez5?.uiState().showPropertiesPanel.set(!0),(0,d.trackEvent)("Toggle Version History",{source:r?.source||null})}),ec=(0,T.nF)(e=>{e.dispatch(ed()),e.dispatch(v.F.dequeue({matchType:"versions"})),i.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),ed=(0,T.nF)(e=>{e.dispatch(eu({id:V})),e.dispatch(em({fromVersionId:void 0})),i.Egt.clearSelection(),e.dispatch(v.F.dequeue({matchType:"comparing"})),e.dispatch(v.F.dequeue({matchType:"view_changes"})),e.dispatch(S.Y6({mode:i.Oin.OFF}))}),eu=(0,T.nF)(async(e,r)=>{if(r.id===V){l.zl.set(z,""),i.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(I.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(A.Fm({id:r.id}));return}e.dispatch(A.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):X(n.versionHistory);if(!o)return;e.dispatch(I.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,c=r.eventType,d=!!e.getState().selectedView.devModeFocusId;await ea(o,e,new Set,s,r.nodeId,c).catch(r=>{if(d){let e=`[${c}] Failed load version for preview in focus view: ${r}`;(0,_.$D)(a.e.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(E.s.error(r))})}),ep=(0,T.nF)((e,r)=>{let n=r.version,i=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;ea(n,e,o,i,void 0,s).then(()=>e.dispatch(A.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,_.$D)(a.e.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(E.s.error(r))})}),em=(0,T.nF)(async(e,r)=>{if(!(0,s.k)().version_diffing){e.dispatch(A.TO(r));return}let n=r.fromVersionId;if(!n)return;let a=Z(n,e.getState().versionHistory);if(!a)return;let o=new Date().getTime(),l=await J(a.id,e);if(l){e.dispatch(E.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,p=O.lE[O.lE.COMPARE_CHANGES];if((0,d.trackEvent)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:a.checkpoint_key,nodesToDiff:"all",editorType:u,source:p},{forwardToDatadog:!0}),a.canvas_url){let e=i.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(","),n=`${a.canvas_url}&nodes_to_extract=${r}`;(0,M.n)(n).then(([e])=>{i.glU.loadPartialHistoryScene(e)})}}let m=i.glU.startComparingChanges()?"":"Error starting history compare";if(m){e.dispatch(E.s.error(m));return}let _=e.getState();e.dispatch(I.$T({..._.selectedView,compareVersionId:n,compareLatest:void 0})),(0,d.trackEvent)("Version History Compare Start",{fromVersionId:n}),e.dispatch(A.TO(r))})},314774:(e,r,n)=>{n.d(r,{Bj:()=>R,HA:()=>N,Os:()=>y,Pe:()=>p,QZ:()=>L,Vl:()=>C,aF:()=>O,b8:()=>A,cY:()=>w,f5:()=>_,j0:()=>v,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>h,u7:()=>T,zE:()=>b,zx:()=>I});var a=n(848318),i=n(354427),o=n(174577),s=n(238462),l=n(540698),c=n(454805),d=n(681140);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),p={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},m=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...p,...r}}navigateTo(r,n,a={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let i=this.getViewportInfo();if(n||(n=i.zoomScale),u.matches||(0,l.nl)()||0===a.duration)return this.updateViewport(i,r,n),u.matches&&a.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),p=null,m=[],_=a.duration??this.config.navigationDurationMs;if(a.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:i.offsetX,y:i.offsetY});n=c.Mi.scale(1/i.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(i.height,i.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/i.zoomScale);if(c.Mi.max(n)<o-s)return a.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let h=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(a.metricsCallback){let r=0,n=0;m.length&&(n=Math.round(m.reduce((e,n,a)=>((0===a&&e>17||n>17)&&r++,e+n))/m.length)),a.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:m.length,prefersReducedMotion:!1})}f(),h.resolve({cancelled:e})},y=n-i.zoomScale,b=c.Mi.scale(i.zoomScale,{x:i.offsetX,y:i.offsetY}),v=c.Mi.scale(n,r),T=c.Mi.subtract(v,b),I=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=I).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||a.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=p&&m.push(Math.round(s-p)),p=s;let u=Math.min(l/_,1),h=this.config.animationTimingFunction(u);if(h>=1){E(!1),this.updateViewport(o,r,n);return}let f=i.zoomScale+y*h,v=c.Mi.add(b,c.Mi.scale(h,T)),A=c.Mi.scale(1/f,v);this.updateViewport(o,A,f),requestAnimationFrame(S),I=this.getViewportInfo()};return a.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},a.delay):S(),h.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};m.DEFAULT_NAVIGATE_BUFFER=60;let _=m,h={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=a.createContext(new _({getViewportInfo:()=>h,getRawViewportInfo:()=>h,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=a.createContext(h.x),E=a.createContext(h.y),y=a.createContext(h.width),b=a.createContext(h.height),v=a.createContext(h.offsetX),T=a.createContext(h.offsetY),I=a.createContext(h.zoomScale),S=a.createContext(h.isPanning),A=a.createContext(h.isZooming),w=a.createContext(0),C=a.createContext(!1),N=a.createContext({current:h}),L=a.createContext({current:h});function O({latestViewport:e,children:r}){let n=a.useRef(e),i=a.useRef(e);return i.current=n.current,n.current=e,a.createElement(L.Provider,{value:i},a.createElement(N.Provider,{value:n},a.createElement(f.Provider,{value:e.x},a.createElement(E.Provider,{value:e.y},a.createElement(y.Provider,{value:e.width},a.createElement(b.Provider,{value:e.height},a.createElement(v.Provider,{value:e.offsetX},a.createElement(T.Provider,{value:e.offsetY},a.createElement(I.Provider,{value:e.zoomScale},a.createElement(S.Provider,{value:e.isPanning},a.createElement(A.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=a.useState(r()||h),s=a.useCallback(()=>{o(e=>{let n=r()||h;return(0,i.c2)(e,n)?e:n})},[r,o]);return(0,d.N)(s),a.createElement(O,{latestViewport:n},e.children)}},844123:(e,r,n)=>{n.d(r,{AM:()=>s,qr:()=>l});var a=n(848318),i=n(301168);n(186606),n(533737);var o=n(80024);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=a.useState(null),n=(0,i.d4)(e=>e.voice.showWidget);return a.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},605885:(e,r,n)=>{n.d(r,{_2:()=>i,w$:()=>o}),n(848318);var a=n(989232);n(536490),n(967688),n(730143),n(472287);let i="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,a.trackEvent)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,a.trackEvent)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},80024:(e,r,n)=>{n.d(r,{h:()=>S,q:()=>b});var a=n(938982),i=n(19180),o=n(989232),s=n(29188),l=n(615233),c=n(656329),d=n(295534),u=n(998568),p=n(353231),m=n(286003),_=n(827524),h=n(323040),g=n(119554),f=n(810807),E=n(641400);let y=e=>e>.1,b=.05,v=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),T=0,I=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,g._)({}),this.activeSpeakerIdStore=(0,g._)(null),this.recentlySpokeIdStore=(0,g._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{s.eD&&(this.microphonePermissionDenied&&s.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(s.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),s.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let a=r.audioTrack?.getVolumeLevel()||0,i=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(i||0)+a,e[n]={isMuted:!r.audioTrack,volumeLevel:a}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(E.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>b).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{m.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),s.eD?.setIsInVoiceCall(!1),s.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&c.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new _.b,this.audioCaptionStream=new h.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,i.k)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,i.k)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),v[T++%v.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let a=document.createElement("script");a.src=(0,l.ck)("0706b46bdc09a419282285b791ea1dd3c019ecd6"),a.setAttribute("nonce",(0,l.tl)().csp_nonce),a.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},a.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(a)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:a,callUserId:i,userId:l,encryptionKey:d,userEncryptionKey:u,setParticipantIdsCallback:m,callEventCallback:_,store:h,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=m,this.userId=l,this.userEncryptionKey=u,this.callEventCallback=_;try{let e="vp8";c.Ay.safari&&+c.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=l,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,a,l,d,_),await this.client.join(r,n,a,i),s.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(i){(0,o.trackEvent)("Voice Call - Error",{callId:n,token:a,userId:l,encryptionKey:d,message:`${i.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${i.message}`);throw await e.leave(),r}finally{(0,p.ds)("voice_user_joined",g,h.getState(),{callId:n,userId:l,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,o.trackEvent)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),s.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,f.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),s.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,f.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&y(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,a,i){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),f.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!s.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let a=new Set;for(let r of this.client?.remoteUsers||[]){let i=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;i===n&&o&&a.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,a)});let l=!0;this.client?.on("network-quality",function(i){l&&(i.downlinkNetworkQuality>=4||i.uplinkNetworkQuality>=4)?(o.trackEvent("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:a,message:`Bad call quality detected. downlink = ${i.downlinkNetworkQuality}, uplink = ${i.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&i(E.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&i(E.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(m.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=E.$E.CONNECTED_WITH_MIC_DISABLED;break}n=E.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=E.$E.DISCONNECTED;break;case"CONNECTING":n=E.$E.CONNECTING;break;case"DISCONNECTING":n=E.$E.DISCONNECTING;break;case"RECONNECTING":n=E.$E.RECONNECTING}void 0!==n&&i(n)}),this.client?.on("exception",s=>{let l;switch(s.code){case 2001:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=E.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=E.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=E.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=E.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&i(l),s.code>=3e3?(console.error(s),o.trackEvent("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:s.msg,code:s.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):o.trackEvent("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:a,message:s.msg,code:s.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){i(E.$E.CALL_INACTIVE),o.trackEvent("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a,callInactive:!0});return}i(E.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),o.trackEvent("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:a})}}),this.client?.on("token-privilege-did-expire",()=>{i(E.$E.TOKEN_EXPIRED),o.trackEvent("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:a})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,d.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,u.$D)(a.e.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(E.$E.ERROR)}}async setMicrophonePermissions(){if(s.eD){this._microphonePermissionDenied=!await s.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};I.instance=null;let S=I},472287:(e,r,n)=>{n.d(r,{Eo:()=>h,W5:()=>_,bF:()=>g});var a=n(848318),i=n(301168),o=n(354427),s=n(349048),l=n(865114),c=n(979533),d=n(286003),u=n(856731),p=n(125761);function m(){let e=(0,i.d4)(e=>e.multiplayer).allUsers,r=d.R9.useVoiceMetadataBySessionId();function n(e,r){return e.sessionID===r.sessionID&&e.sawMouse===r.sawMouse&&e.deviceName===r.deviceName&&e.name===r.name&&e.imageURL===r.imageURL}return{multiplayerUsersInVoiceCall:(0,s.Op)(()=>e.filter(e=>r[e.sessionID]?.connectedCallId),[e,r],n),multiplayerUsersNotInVoiceCall:(0,s.Op)(()=>e.filter(e=>!r[e.sessionID]?.connectedCallId),[e,r],n)}}function _(e,r){let n=(0,p.iZ)(),o=(0,i.d4)(e=>e.multiplayer.deviceNameFilter),s=(0,i.d4)(r=>e&&r.voice.activeCall[e]),{multiplayerUsersInVoiceCall:c,multiplayerUsersNotInVoiceCall:d}=m(),_=(0,i.d4)(e=>e.voice.userIdsInCallFromProvider),[h,g]=(0,a.useState)(new Set),[f,E]=(0,a.useState)([]),[y,b]=a.useState(),v=(0,l.ZC)(s);return a.useEffect(()=>{s&&!v&&!y&&r&&(b(!0),setTimeout(()=>{b(!1)},2e3))},[s,v,r,y]),a.useEffect(()=>{!function(){if(s&&_.length>1&&!y){let e=new Set(_);g(e);let r=[];for(let n of[...d,...c])e.has(n.userID)||r.push(n);E((0,u._i)(r,o))}else g(new Set(c.map(e=>e.userID))),E((0,u._i)(d,o))}()},[s,c,d,n,o,_,y]),{userIdsInCall:h,usersNotInCall:f}}function h(e,r){let n=(0,i.wA)(),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:l}=m(),d=a.useMemo(()=>s.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[s]),u=a.useMemo(()=>l.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[l]),p=(0,i.d4)(e=>r&&r in e.activeFileUsers?e.activeFileUsers[r]:void 0,i.bN),_=(0,i.d4)(e=>e.voice.voiceUsersById),[h,g]=(0,a.useState)([]),[f,E]=(0,a.useState)([]),[y,b]=(0,a.useState)([]);return a.useEffect(()=>{let r=[],n=[],a=[];for(let i of e)if(i in d)n.push(...d[i]);else if(i in u)n.push(...u[i]);else if(p&&i in p){let e=p[i];r.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else i in _?r.push(_[i]):a.push(i);(0,o.c2)(y,n)||b(n),(0,o.c2)(f,r)||E(r),(0,i.bN)(h,a)||g(a)},[p,e,d,u,_,h,y,f]),a.useEffect(()=>{r&&h.length>0&&n(c.NS({fileKey:r,userIds:h}))},[h,n,r]),{voiceUsersInMultiplayer:y,voiceUsersNotInMultiplayer:f}}function g(e,r){let{voiceUsersInMultiplayer:n,voiceUsersNotInMultiplayer:i}=h(e,r);return a.useMemo(()=>[...n,...i],[n,i])}n(80024),n(810807)},810807:(e,r,n)=>{n.d(r,{HJ:()=>b,Lk:()=>_,Mw:()=>E,WO:()=>f,YL:()=>g,gW:()=>h,nN:()=>y});var a=n(848318),i=n(301168),o=n(29188),s=n(865114),l=n(656329);n(235252);var c=n(979533),d=n(730143),u=n(361053),p=n(641400);let m=()=>!((0,l.wg)()||(0,l.o4)());function _(){let e=(0,d.q5)(),r=(0,i.d4)(e=>e.orgById),n=(0,i.d4)(e=>e.teams),o=e?.key,l=(0,i.d4)(e=>o&&!!e.voice.activeCall[o]),[c,u]=a.useState(!1),p=(0,s.ZC)(c);return a.useEffect(()=>{let a=m()&&4===g({openFile:e,teams:n,orgById:r});!0===p&&!a&&l||u(a)},[e,r,n,p,l]),c}var h=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(h||{});function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,u.PS)(n)?4:3:0}return 2}function f(){return!!o.eD}function E(e){return e>=p.MK.STARTED&&e<p.MK.DONE}function y(e){return e<p.MK.NOT_STARTED}function b(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},904749:(e,r,n)=>{n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>i});var a=n(848318);function i(e,r){let[n,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let a=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(a),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(a)}}function s(e,r){let[n,i]=(0,a.useState)(),[o,s]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(r&&!o){let n=function(r){i(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},422232:(e,r,n)=>{n.d(r,{$g:()=>A,Au:()=>g,BG:()=>m,Bt:()=>d,GD:()=>T,LF:()=>I,N$:()=>w,Qn:()=>v,_L:()=>h,bf:()=>i,fL:()=>u,hQ:()=>y,le:()=>b,mX:()=>f,oF:()=>p,pY:()=>_,rx:()=>S,sZ:()=>E,u_:()=>c,wS:()=>C,w_:()=>N});var a,i,o=n(810503),s=n(182317);function l(e){window.parent.postMessage(e,"*")}function c(){l({type:"FIGMA_READY"})}function d(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function u(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function p(e){l({type:"TEXT",data:{text:e}})}function m(e,r){l({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function _(e){l({type:"ASSET",data:{asset:e}})}function h(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function g(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function f(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function E(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function y(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function b(e){l({type:"GENERATED_CODE",data:{sections:e}})}let v=(0,n(944239).n)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function T(e){l({type:"FILE_NAME",data:{name:e}})}function I(e,r,n){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function S(){l({type:"PAGE_LOADED"})}function A(){l({type:"IDLE_LOGOUT"})}function w(e){l({type:"MAPPING_SUGGESTION",data:{requestId:e.requestId,mappings:e.mappings||null,error:e.error||null}})}(a||(a={})).sendGenerateFigmadocMessage=function(e){return C.sendMessage({type:"GENERATE_FIGMADOC",request:{userCode:e}})},(e=>{e.sendGetLocalFileExtensionManifest=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return C.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return C.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return C.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return C.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return C.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(i||(i={}));let C=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,s.g)(),n={...e,requestId:r};return new Promise((e,a)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:a},l(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,o.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},N=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,s.g)();return this.callbacksById[n]=r,l({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,o.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await C.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},957845:(e,r,n)=>{n.d(r,{wM:()=>a}),n(848318),n(300322),n(861813),n(748008),n(967688),n(683703),n(318147);function a(e){let r={},n=0,a=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:a++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:a}}},83432:(e,r,n)=>{n.d(r,{Ay:()=>R});var a=n(637640),i=n(615233),o=n(767339),s=n(809543),l=n(514019),c=n(566726),d=n(807949),u=n(453370),p=n(679111),m=n(244534),_=n(699547),h=n(858839),g=n(353231),f=n(587745),E=n(499668),y=n(257270),b=n(516404),v=n(253332),T=n(656320),I=n(793944),S=n(411910),A=n(259964),w=n(773293),C=n(34134),N=n(778681);let L=(e,r)=>T.$Z.selectedViewHasMissingResources(e,r),O=0,R=e=>r=>function(n){var R,P;let D=e.getState().selectedView;r(n);let k=e.getState();if(u.Qv.matches(n)){let r=k.selectedView;if(r===C.o0&&(r=(0,i.Ay)().selected_view||(0,T.vU)(k,a.Ay.location.pathname,a.Ay.location.search,a.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:a}=r,i=e.getState().fileByKey[a];i&&!n.payload.fromRealtime&&(0,A.oD)(r.editorType)!==i.editor_type&&(r.editorType=(0,A.wN)(i.editor_type??"design"))}if("abandonedDraftFiles"===r.view||"licenseGroup"===r.view||"orgAdminSettings"===r.view||"orgDomainManagement"===r.view||"orgIdpManagement"===r.view||"seatRequests"===r.view||"teamAdminConsole"===r.view&&(0,E.DQ)(E.Pw.GROUP_6)||L(k,r)&&(r={view:"resourceUnavailable",resourceType:(R=r,new o.$T().selectedViewMissingResourceType(R))}),"teamUpgrade"===r.view&&r.teamId){let e=k.teams[r.teamId];e&&e.pro_team&&!(0,v.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:w.A$.SETTINGS})}r!==C.o0?e.dispatch(u.$T(r)):k.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:k.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentsAndSharing"}))}else if(m.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,T.Np)(k,e);a.Ay.replace(r,{...e,jsCommitHash:(0,y.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==D.view&&"prototype"===n.payload.view&&(0,N.q)()){let e=(0,T.Np)(k,n.payload);a.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==D.view||n.payload.editorType!==D.editorType)&&b.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,T.Np)(k,n.payload);a.Ay.location.pathname+a.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==i.Ay().editing_file?.key)&&!S.YH&&(0,I.w)()&&(0,S._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&(a.Ay.location.state||(0,T.Mo)(D))&&(P=n.payload,null==D||null==P?D!==P:T.$Z.requireHistoryChange(D,P))?a.Ay.push(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()}):a.Ay.replace(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()})):null==a.Ay.location.state&&a.Ay.replace(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&a.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,y.hL)((0,s.Ag)(e))}else(0,y.OR)(k,n.payload)}else if(l.Af.matches(n)&&"hubFile"===k.selectedView.subView)(0,y.OR)(k,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,i=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&i&&i.some(e=>e.id===o)){if(a.Ay){let e=(0,T.Np)(k,r);a.Ay.replace(e)}(0,y.OR)(k,r)}}else if(p.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,y.OR)(k,r)}else if(p.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,y.OR)(k,r);let e=(0,T.Np)(k,r);a.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}else if(_.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&k.fileByKey[r.fileKey];if(e){let i=(0,f.L8)(e,k.repos);if(i&&i.id===n.payload.repo.id){(0,y.OR)(k,r);let e=(0,T.Np)(k,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,y.OR)(k,r);let e=(0,T.Np)(k,r);a.Ay&&a.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}else if(h.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(a.Ay.replace((0,T.Np)(k,r),{...r,jsCommitHash:(0,y.Qr)()}),(0,y.OR)(k,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===O&&(O=setTimeout(function(){O=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentsAndSharing"}))},0));return n}},431063:(e,r,n)=>{n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var a=n(755595),i=n(102382),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e))(o||{});let s=a.z.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case i.p.ALL:return"universal-insert-figjam-all";case i.p.TEMPLATES:return"universal-insert-figjam-templates";case i.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case i.p.WIDGETS:return"universal-insert-figjam-widgets";case i.p.PLUGINS:return"universal-insert-figjam-plugins";case i.p.MORE:return"universal-insert-figjam-more";case i.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},516515:(e,r,n)=>{n.d(r,{_V:()=>o,b4:()=>i,kM:()=>a});var a=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(a||{});let i=[0,1,2,3,4,5,6],o=[7,8]},537256:(e,r,n)=>{n.d(r,{Yv:()=>i,fJ:()=>a});let a="f195f195-f195-f195-f195-f195f195f195";var i=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(i||{})},324747:(e,r,n)=>{n.d(r,{I0:()=>y,KS:()=>m,PM:()=>I,Qv:()=>h,U:()=>v,Ug:()=>p,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>C,hE:()=>l,m3:()=>T,mr:()=>b,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>S});var a=n(755595),i=n(302982),o=n(261354),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),p=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(p||{});let m=i.iG.extend({author:a.Ip.ignore(),parent_id:a.z.string().nullable(),reply_count:a.z.number(),last_replied_at:a.z.string().nullable(),resource_version_id:a.z.string(),message_meta:a.z.array(a.Ip.ignore()),rating_value:a.z.number().optional()});a.z.object({plugin:a.Ip.ignore().nullish(),plugin_install:a.Ip.ignore().nullish(),whitelisted_plugin:a.Ip.ignore().nullish(),hub_file:a.Ip.ignore().nullish(),profile:a.Ip.ignore().nullish(),community_comment:a.Ip.ignore().nullish(),widget:a.Ip.ignore().nullish(),community_resource_payment:a.Ip.ignore().nullish()});var _=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(_||{}),h=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(h||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.SLIDES_TEMPLATE_MODAL="slides_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e.SITES_TEMPLATE_MODAL="sites_template_modal",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return null!=e&&"is_widget"in e&&e.is_widget}function y(e){return null!=e&&"current_plugin_version_id"in e&&!e.is_widget}function b(e){return"is_widget"in e||"current_plugin_version_id"in e}function v(e){return null!=e&&"client_meta"in e}function T(e){return!!e?.monetized_resource_metadata}function I(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function S(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED||"is_3rd_party_monetized"in e&&!!e.is_3rd_party_monetized}var A=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(A||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),C=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(C||{}),N=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(N||{});a.z.object({id:a.z.string().nullish(),hubFileId:a.z.string().nullish(),pluginId:a.z.string().nullish(),widgetId:a.z.string().nullish(),oneStars:a.z.number(),twoStars:a.z.number(),threeStars:a.z.number(),fourStars:a.z.number(),fiveStars:a.z.number(),totalRatings:a.z.number(),avgRating:a.z.number().nullish(),createdAt:a.z.date().nullish(),updatedAt:a.z.date().nullish()})},456977:(e,r,n)=>{n.d(r,{w:()=>a});let a={displayText:"",disabled:!0,separator:!0}},259964:(e,r,n)=>{n.d(r,{$t:()=>p,Bu:()=>S,CO:()=>w,GJ:()=>c,Nw:()=>h,YP:()=>v,co:()=>g,fB:()=>A,fP:()=>f,nT:()=>E,oD:()=>b,oQ:()=>l,sq:()=>u,wN:()=>I,xi:()=>d,xq:()=>y,y9:()=>T,yY:()=>_});var a=n(660376),i=n(186606),o=n(810503),s=n(318147);let l="si"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-2-n)}).join("")}(45,149,163)+"s",c="fig"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-31-n)}).join("")}(55,195,184,195)+"e",d=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-0-n)}).join("")}(50,159)+"ak"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-57-n)}).join("")}(18,176),u="co"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-36-n)}).join("")}(2,149)+"per",p=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-63-n)}).join("")}(35,196)+"u"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-48-n)}).join("")}(15,186,185),m=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-61-n)}).join("")}(32,202,198)+"lu"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-5-n)}).join("")}(4,119,129,109,125,126,124)+"o"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-30-n)}).join("")}(39,179);function _(e){return 1===e||7===e}function h(e){return 2===e||_(e)}function g(e){return 4===e||h(e)}function f(e,r){switch(e){case 1:case 7:case 3:return r===s._Y.DESIGN;case 2:return r===s._Y.WHITEBOARD;case 4:return r===s._Y.SLIDES;case 5:return r===s._Y.SITES;case 8:return r===s._Y.FIGMAKE;case 6:return r===s._Y.COOPER;default:return(0,o.x1)("editorType","Unknown editor type",{editorType:e}),!1}}var E=(e=>(e[e.Design=1]="Design",e[e.Whiteboard=2]="Whiteboard",e[e.DevHandoff=3]="DevHandoff",e[e.Slides=4]="Slides",e[e.Sites=5]="Sites",e[e.Cooper=6]="Cooper",e[e.Illustration=7]="Illustration",e[e.Figmake=8]="Figmake",e))(E||{});function y(e){switch(e){case 1:return i._YF.DESIGN;case 2:return i._YF.WHITEBOARD;case 3:return i._YF.DEV_HANDOFF;case 4:return i._YF.SLIDES;case 5:return i._YF.SITES;case 6:return i._YF.COOPER;case 7:return i._YF.ILLUSTRATION;case 8:return i._YF.FIGMAKE;default:return(0,o.x1)("editorType","Unknown editor type",{editorType:e}),i._YF.DESIGN}}function b(e){switch(e){case 2:return s._Y.WHITEBOARD;case 4:return s._Y.SLIDES;case 5:return s._Y.SITES;case 8:return s._Y.FIGMAKE;case 3:case 1:case 7:return s._Y.DESIGN;case 6:return s._Y.COOPER;default:return(0,o.x1)("editorType","Unknown editor type",{editorType:e}),s._Y.DESIGN}}function v(e){switch(e){case 2:return"whiteboard";case 4:return"slides";case 5:return"sites";case 8:return c;case 3:return"dev_handoff";case 7:return"draw";case 6:return"cooper";case 1:return"design";default:return(0,a.S9)(e,"design")}}function T(e){if(null==e)return null;switch(e){case s._Y.DESIGN:return"DESIGN";case s._Y.WHITEBOARD:return"WHITEBOARD";case s._Y.SLIDES:return"SLIDES";case s._Y.SITES:return"SITES";case s._Y.COOPER:return"COOPER";case s._Y.FIGMAKE:return"FIGMAKE"}}function I(e){if(null==e)return 1;switch(e){case s._Y.DESIGN:return 1;case s._Y.WHITEBOARD:return 2;case s._Y.SLIDES:return 4;case s._Y.SITES:return 5;case s._Y.COOPER:return 6;case s._Y.FIGMAKE:return 8}}function S(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return l;case 8:return c;case 6:return u;case 7:return m;default:return e}}function A(e){switch(e){case i._YF.DESIGN:return 1;case i._YF.WHITEBOARD:return 2;case i._YF.DEV_HANDOFF:return 3;case i._YF.SLIDES:return 4;case i._YF.SITES:return 5;case i._YF.FIGMAKE:return 8;case i._YF.COOPER:return 6;case i._YF.ILLUSTRATION:return 7;default:return(0,o.x1)("editorType","Unknown editor type",{editorType:e}),1}}function w(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return l;case 8:return c;case 6:return u;case 7:return m;default:return(0,o.x1)("editorType","Unknown editor type",{editorType:e}),""}}},230432:(e,r,n)=>{n.d(r,{A:()=>a,b:()=>i});var a=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(a||{}),i=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(i||{})},434289:(e,r,n)=>{n.d(r,{M8:()=>l,ai:()=>s,av:()=>h,f6:()=>o,kF:()=>c,lF:()=>m,zy:()=>g});var a=n(755595),i=n(764474),o=(e=>(e.FILE_BROWSER_COMMUNITY_HOME_SHELF="file_browser_community_home_shelf",e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE="file_browser_connect_folder_empty_page",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.FULLSCREEN_FILE_DRAWER="fullscreen_file_drawer",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.CONFIG_25_FEATURE_ANNOUNCEMENT_MODAL="config_25_feature_announcement_modal",e.FIGMAKE_LAUNCH_BANNER="figmake_launch_banner",e.FIGMAKE_PROMO_MODAL="figmake_promo_modal",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.DESIGN_TO_SITES_ENTRYPOINT="design_to_sites_entrypoint",e.DESIGN_COPY_TO_SITES_ENTRYPOINT="design_copy_to_sites_entrypoint",e.DESIGN_TO_BUZZ_ENTRYPOINT="design_to_buzz_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e.RESOURCE_HUB_FEW_TEMPLATES_UPSELL="resource_hub_few_templates_upsell",e.RESOURCE_HUB_NO_RESOURCES_UPSELL="resource_hub_no_resources_upsell",e.EDITOR_MENU="editor_menu",e.EDITOR_QUICK_ACTIONS="editor_quick_actions",e.LIBRARY_EXTRACT_TOAST="library_extract_toast",e))(o||{}),s=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(s||{});let l="multiplayer_user_state_change";var c=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(c||{});let d=a.z.object({extensionId:a.z.string(),extensionType:a.z.enum(["plugin","widget"]),currentExtensionVersionId:a.z.string().nullable(),localFileId:a.z.number().nullable()}),u=a.z.object({displayName:a.z.string(),runPluginArgs:i.Ps.optional(),extensionInfo:d.optional().nullable()}),p=a.z.object({parameterValues:a.z.record(a.z.string()).optional().nullable()});u.omit({runPluginArgs:!0}).extend({selectedRunPluginArgs:p.optional().nullable()});var m=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(m||{}),_=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(_||{});class h{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasAutosaveChanges=!1,this.hasMultiplayerChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges,this.hasAutosaveChanges=r.hasAutosaveChanges,this.hasMultiplayerChanges=r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var g=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(g||{})},895222:(e,r,n)=>{n.d(r,{NK:()=>i,Ob:()=>a});let a=80;function i(e){return"number"==typeof e&&e>0?e:a}},553709:(e,r,n)=>{n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>_});var a=n(755595),i=n(49984),o=n(404883),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.UPLOADING=1]="UPLOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE",e))(l||{});let c=a.z.object({"500_500":a.z.string().optional(),"120_120":a.z.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=a.z.object({email:a.z.string().optional(),user_id:a.z.string(),is_primary_user:a.z.boolean(),can_sell_on_community:a.z.boolean().optional()}),p=i.n.and(a.z.object({id:a.z.string(),name:a.z.string(),profile_handle:a.z.string(),img_url:a.z.coerce.string().optional(),img_urls:c,current_user_is_following:a.z.coerce.boolean(),current_user_is_followed:a.z.coerce.boolean(),is_restricted_by_current_user:a.z.coerce.boolean(),entity_type:a.z.nativeEnum(d),primary_user_id:a.z.string().nullable(),location:a.z.string().nullable(),follower_count:a.z.number(),following_count:a.z.number(),isPending:a.z.boolean().optional(),associated_users:a.z.array(u).optional(),has_published:a.z.boolean().optional(),description:a.z.string().nullish()})),m=a.z.object({accepted:a.z.array(p),pending:a.z.array(p).optional()}),_=a.z.object({creator:o.aw,publisher:p,community_publishers:m}),h=o.aw.pick({id:!0,email:!0}),g=a.z.object({accepted:a.z.array(o.aw),pending:a.z.array(h).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},194081:(e,r,n)=>{n.d(r,{QT:()=>o});var a=n(755595);n(594950);var i=(e=>(e.COLLAB="collab",e.DEV="dev",e.FULL="full",e.VIEW="view",e.CONTENT="content",e))(i||{});let o=a.z.nativeEnum(i)},273555:(e,r,n)=>{n.d(r,{Ae:()=>_,Gf:()=>d,PW:()=>m,ZI:()=>c,gK:()=>h,w3:()=>g,zk:()=>p});var a=n(672154),i=n(186606),o=n(553547),s=n(705237),l=n(755595);let c=l.z.string();l.z.string();let d={isInitialized:!1,hasMissingFonts:!1,activeUserAction:i.QOV.DEFAULT,currentTool:i.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:i.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:i.lyf.LAYOUT,urlNodeId:"-1:-1",showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:i.vRS.NONE,index:-1},currentSelectedProperty:{type:i.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:i.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:i.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1,axis:i._0v.X,trackId:"",isTLF:!1,initialText:"",varWidthNodeId:"",varWidthIndex:-1,varWidthTextDirection:{x:0,y:0}},votingSessionInfo:{sessionId:"",votingStage:i.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:i.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:i.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var u=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(u||{}),p=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(p||{}),m=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e[e.ASSET_ILLUSTRATION=32]="ASSET_ILLUSTRATION",e[e.ASSET_ANCESTOR=64]="ASSET_ANCESTOR",e))(m||{});function _(e){return e.map(e=>i.j0r[e])}function h(e){return e?e.map(e=>i.j0r[e]):[i.j0r.ALL_SCOPES]}function g(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let l=e[n];if(l){if(l.isMixed)return;{let e=function(e){function r(e){if(e.type!==i.Z_n.ALIAS)return null;let r=a.sD.fromString(e.value);return r?a.sD.toKiwi(r):null}switch(e.type){case i.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case i.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case i.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case i.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case i.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{alias:n}}}case i.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,o.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,a=e.value.indexOrKey;if(!r||!n||!a)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:a}}};return null}case i.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case i.Z_n.MAP:case i.Z_n.EXPRESSION:case i.Z_n.SYMBOL_ID:case i.Z_n.TEXT_DATA:case i.Z_n.MANAGED_STRING_ALIAS:case i.Z_n.CMS_ALIAS:case i.Z_n.IMAGE:case i.Z_n.LINK:case i.Z_n.JS_RUNTIME_ALIAS:case i.Z_n.SLOT_CONTENT_ID:case i.Z_n.DATE:return null}}(l);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},196034:(e,r,n)=>{n.d(r,{O:()=>s});var a=n(660376),i=n(967688),o=n(850768);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,i.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,i.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,i.t)("org_admin_tab.members");case o.J7.BILLING:switch(r){case o.G_.OVERVIEW:return(0,i.t)("org_admin_tab.overview");case o.G_.BILLING_GROUPS:return(0,i.t)("org_admin_tab.billing_groups");case o.G_.INVOICES:return(0,i.t)("org_admin_tab.invoices");default:return(0,i.t)("org_admin_tab.billing")}case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,i.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,i.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,i.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,i.t)("resources_tab.approved_widgets");default:return(0,i.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,i.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,i.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,i.t)("org_admin_tab.abandoned_drafts");case o.SN.CONNECTED_PROJECTS:return(0,i.t)("org_admin_tab.connected_projects");case o.SN.FILE_LIST_BETA:return"File list (beta)";case o.SN.ACCESS_INSIGHT:return"Access insights (beta)";default:return(0,i.t)("org_admin_tab.content")}default:(0,a.xb)(e)}}},850768:(e,r,n)=>{n.d(r,{G_:()=>s,J7:()=>a,SN:()=>i,_d:()=>o});var a=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(a||{}),i=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e.FILE_LIST_BETA="file-list-beta",e.ACCESS_INSIGHT="access-insight",e))(i||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e.BILLING_GROUPS="billing-groups",e))(s||{})},698359:(e,r,n)=>{n.d(r,{pd:()=>p});var a=n(755595),i=n(594950),o=n(501104),s=n(882695),l=(e=>(e.SKIP_TRUE_UP="skip_true_up",e.MANUAL_PLAN_ADMIN="manual_plan_admin",e.CONTRACTUAL_LOCK_QUANTITY="contractual_lock_quantity",e.MANUAL_INTERNAL_ADMIN="manual_internal_admin",e.FREE_PERIOD="free_period",e))(l||{}),c=(e=>(e.Locked="locked",e.Floor="floor",e.None="none",e))(c||{});let d=(0,i.g7)(a.z.number()).required(o.Oq.dict(()=>!0)),u=a.z.object({is_eligible_for_cancellation:a.z.boolean(),scheduled_cancellation_date:a.z.string().nullable(),cancel_at_period_end:a.z.boolean()}),p=a.z.object({invoices:a.z.custom(),account_credit:a.z.number(),currency:s.D,admin_email:a.z.string(),shipping_address:a.z.custom(),legal_name:a.z.string(),has_billing_address:a.z.boolean(),billable_seats:d,analyze_data_contract_v2_start:a.z.string().nullable().optional(),annual_renewal:a.z.string().nullable().optional(),non_adjustable_renewal_seats:(0,i.g7)(a.z.number()).nullish(),scheduled_cancellation:u.optional()})},360860:(e,r,n)=>{n.d(r,{GX:()=>p,J0:()=>u,LU:()=>s,Od:()=>o,Oo:()=>d,U9:()=>h,cC:()=>m,dy:()=>i,oU:()=>l,rk:()=>g});var a=n(318147),i=(e=>(e.ASC="asc",e.DESC="desc",e))(i||{}),o=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e.UPGRADE_REASON="upgrade_reason",e.UPGRADE_DATE="upgrade_date",e))(o||{});let s=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date","upgrade_date"],l={columnName:"name",isReversed:!1};var c=(e=>(e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e.seatTypeFilter="seatTypeFilter",e.seatChangesFilter="seatChangesFilter",e))(c||{}),d=(e=>(e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.lastEdit="lastEdit",e.newEditor="newEditor",e.seatType="seatType",e.seatChanges="seatChanges",e))(d||{});let u={licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,lastEditFilter:null,newEditorFilter:!1,seatTypeFilter:null,seatChangesFilter:null},p={billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter",seatType:"seatTypeFilter",seatChanges:"seatChangesFilter"},m={licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",lastEditFilter:"lastEdit",newEditorFilter:"newEditor",seatTypeFilter:"seatType",seatChangesFilter:"seatChanges"},_={IDP:"provisional",UNVERIFIED:"unverified"},h={[a._D.ADMIN]:a._D.ADMIN,[a._D.GUEST]:a._D.GUEST,[a._D.MEMBER]:a._D.MEMBER,[_.IDP]:_.IDP,[_.UNVERIFIED]:_.UNVERIFIED},g={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},560265:(e,r,n)=>{n.d(r,{Kq:()=>o,hJ:()=>i,ig:()=>s});var a=n(755595);n(318147);let i=n(386252).kE.extend({orphaned:a.z.boolean().optional(),member_count:a.z.number().optional()});var o=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(o||{}),s=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(s||{})},376132:(e,r,n)=>{n.d(r,{Ru:()=>v,WU:()=>T,Wd:()=>b,jh:()=>y});var a=n(755595),i=n(594950),o=n(318147),s=n(920648),l=n(194081),c=n(278045),d=n(565967),u=n(404883),p=n(588865);let m=(0,a.fc)(o.El),_=(0,a.fc)(o._D);var h=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(h||{});let g=a.z.nativeEnum(h),f=a.z.object({id:a.z.string(),license_group_id:a.z.string().nullable(),org_user_id:a.z.string(),assigned_at:a.z.string(),created_at:a.z.string(),actor_user_id:a.z.string().nullable(),update_reason:g,updated_at:a.z.string(),idp_group:c.m.nullable().optional(),idp_group_uuid:a.z.string().nullish()}),E=a.z.object({id:a.z.string(),license_group_id:a.z.string().nullable(),org_user_id:a.z.string(),created_at:a.z.string(),updated_at:a.z.string()});o.El.FULL,o.El.STARTER,o.El.RESTRICTED;var y=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(y||{}),b=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(b||{});let v=a.z.object({design_paid_status:m,whiteboard_paid_status:m,dev_mode_paid_status:m,id:a.z.string(),org_id:a.z.string(),user_id:a.z.string(),user:u.aw,permission:_,description:a.z.string().nullish(),drafts_folder_id:a.z.string(),created_at:a.z.string(),updated_at:a.z.string(),disabled_at:a.z.string().nullish(),account_type:a.z.string().optional(),account_type_changed_at:a.z.string().optional(),last_edit:a.z.string().nullish(),last_seen:a.z.string().nullish(),last_design_edit:a.z.union([a.z.string(),s.t]).nullish(),last_whiteboard_edit:a.z.union([a.z.string(),s.t]).nullish(),last_design_seen:a.z.union([a.z.string(),s.t]).nullish(),last_whiteboard_seen:a.z.union([a.z.string(),s.t]).nullish(),last_dev_mode_seen:a.z.union([a.z.string(),s.t]).nullish(),scim_account_type:a.z.string().nullish(),scim_whiteboard_paid_status:a.z.string().nullish(),scim_dev_mode_paid_status:a.z.string().nullish(),scim_is_admin:a.z.boolean().nullish(),scim_seat_type:l.QT.nullish(),user_state_changed_at:a.z.string().optional(),design_upgrade_reason:d.P.nullish(),whiteboard_upgrade_reason:d.P.nullish(),dev_mode_upgrade_reason:d.P.nullish(),scim_metadata:a.z.record(a.z.string().nullish()).nullish(),agreed_to_community_tos_at:a.z.string().nullish(),license_group_member:f.nullish(),license_group_admins:a.z.array(E).optional(),license_admin:a.z.boolean().optional(),is_email_validated:a.z.boolean().optional().nullable(),show_figjam_user_onboarding:a.z.boolean().nullable(),has_shown_figjam_admin_onboarding:a.z.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:a.z.boolean().nullable(),ecc_upgrading_locked:a.z.boolean().nullish(),type:a.z.literal("org_user").default("org_user"),workspace_users:a.z.array(p.C).optional(),is_dev_mode_beta_user:a.z.boolean().optional(),active_seat_type:i.cD.nullish(),active_seat_upgrade_date:a.z.string().optional(),active_seat_upgrade_method:d.P.nullish()}),T=v},641002:(e,r,n)=>{n.d(r,{V:()=>o});var a=n(967688),i=n(318147);function o(e){switch(e){case i._D.GUEST:return(0,a.t)("general.guest");case i._D.MEMBER:return(0,a.t)("general.member");case i._D.ADMIN:return(0,a.t)("general.admin")}}},565967:(e,r,n)=>{n.d(r,{P:()=>d});var a=n(755595),i=n(318147);let o=(0,a.fc)(i._Y),s=(0,a.fc)(i.Uu),l=(0,a.fc)(i._5),c=(0,a.fc)(i.XI),d=a.z.object({org_user_id:a.z.string(),reason:s,created_at:a.z.string(),actor_id:a.z.string().nullable(),actor_name:a.z.string().nullable(),resource_type:l.nullable(),resource_id_or_key:a.z.string().nullable(),resource_name:a.z.string().nullable(),editor_type:a.z.union([o,a.z.literal("dev_mode")]).nullable(),upgrade_method:c.nullable()})},156495:(e,r,n)=>{n.d(r,{CT:()=>A,Gv:()=>y,X1:()=>I,ZG:()=>g});var a=n(755595),i=n(318147),o=n(981554),s=n(882695),l=n(869862),c=n(588014),d=n(74666);let u=(0,a.fc)(i.U0),p=(0,a.fc)(i.El),m=(0,a.fc)(i.kI);var _=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(_||{});let h=a.z.union([a.z.literal("AUTO"),a.z.literal("GOOD"),a.z.literal("DELINQUENT"),a.z.literal("SUSPENDED"),a.z.literal("DEACTIVATED")]),g={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var f=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(f||{});let E=a.z.nativeEnum(f);var y=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(y||{});let b=a.z.nativeEnum(y);var v=(e=>(e.US="US",e.EU="EU",e))(v||{});let T=a.z.nativeEnum(v);a.z.object({name:a.z.string(),img_url:a.z.string().optional(),id:a.z.string()});var I=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(I||{}),S=(e=>(e.DEPROVISION="deprovision",e))(S||{}),A=(e=>(e.GUESTS="guests",e.MEMBERS="members",e.ALL_USERS="all_users",e))(A||{});let w=a.z.object({scheduled_run_at:a.z.string().optional().nullable(),operation_state:a.z.string()});l.bV.extend({id:a.z.string(),name:a.z.string(),legal_name:a.z.string().optional(),domain_capture:a.z.boolean(),created_at:a.z.string().optional(),updated_at:a.z.string().optional(),deleted_at:a.z.string().optional(),img_url:a.z.string().optional(),handle:a.z.string().optional(),figjam_disabled_at:a.z.date().nullable(),realtime_token:a.z.string().optional(),standing:h,stripe_customer_id:a.z.string().optional(),invite_whitelist_guest_invite_setting:b.nullable(),invite_whitelist_member_allowlist_enabled:a.z.boolean().nullable(),ip_ranges:a.z.array(a.z.string()),past_due_at:a.z.string().nullable(),plugins_whitelist_enforced:a.z.boolean(),widgets_whitelist_enforced:a.z.boolean(),plugin_requests_allowed:a.z.boolean(),widget_requests_allowed:a.z.boolean(),public_plugins_allowed:a.z.boolean(),voice_enabled:a.z.boolean().optional(),billing:E.nullable(),google_sso_only:a.z.boolean(),saml_sso_only:a.z.boolean(),featured_scim_metadata:u.nullable(),community_profile_id:a.z.string().optional(),community_profile_handle:a.z.string().optional(),template_picker_disabled:a.z.boolean().optional(),experiment_eligible:a.z.boolean().optional(),bigma_enabled:a.z.boolean().optional(),bigma_enabled_at:a.z.number().optional(),file_export_setting:a.z.string().nullable().optional(),mfa_required:a.z.string().optional(),discovery_enabled:a.z.boolean().optional(),workshop_enabled:a.z.boolean().optional(),cursor_chat_disabled:a.z.boolean().optional(),design_default_paid_status:p.optional(),whiteboard_default_paid_status:p.optional(),k12_google_org:a.z.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:a.z.string().optional().nullable(),tax_id_verification_status:m.optional(),are_custom_templates_allowed:a.z.boolean(),should_auto_renew:a.z.boolean(),has_automatic_upcoming_invoice:a.z.boolean(),target_locality:T.optional(),org_domains:c.N4.optional().nullable(),workspaces_count:a.z.number().optional(),cmty_publish_as_user_enabled:a.z.boolean().optional(),license_groups_count:a.z.number().optional(),workspaces_nux_active_at:a.z.string().optional(),ai_features_disabled:a.z.boolean().optional(),ai_features_disabled_at:a.z.string().optional(),ai_data_sharing_enabled:a.z.boolean().optional(),is_dev_mode_opt_in_accepted:a.z.boolean().optional(),has_invalid_upgrades:a.z.boolean().optional(),figma_provided_libraries_disabled:a.z.boolean().optional(),billing_api:o.z,stripe_memo:a.z.string().optional(),self_serve:a.z.boolean().optional(),invoice_currency:a.z.nativeEnum(s.S).optional(),is_slides_disabled:a.z.boolean().optional(),activity_logs_max_query_duration_in_days:a.z.number().optional(),tier:a.z.nativeEnum(i.Ag),billing_tier:a.z.nativeEnum(i.Ag),security_add_on_enabled_at:a.z.number().optional().nullable(),all_domains_verified:a.z.boolean().optional(),can_use_multi_idp:a.z.boolean(),is_non_admin_tos_banner_disabled:a.z.number().optional().nullable(),org_downgrade:w.optional().nullable()})},872240:(e,r,n)=>{n.d(r,{$V:()=>_,CO:()=>u,EB:()=>m,NW:()=>l,R$:()=>d,TN:()=>o,UW:()=>p,oO:()=>s,tY:()=>i,tn:()=>c});var a=n(679996),i=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(i||{}),o=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PLAN_COMPARISON_MODAL=1]="PLAN_COMPARISON_MODAL",e[e.NUX=2]="NUX",e[e.CONSUMPTION_MODAL=3]="CONSUMPTION_MODAL",e[e.PRICING_PAGE=4]="PRICING_PAGE",e[e.DEV_MODE_MODAL=5]="DEV_MODE_MODAL",e[e.SITES_MODAL=6]="SITES_MODAL",e[e.RESOURCE_HUB=7]="RESOURCE_HUB",e[e.FIGMAKE_MODAL=8]="FIGMAKE_MODAL",e[e.MCP_MODAL=9]="MCP_MODAL",e[e.PAGE_TRACKER_UPSELL=10]="PAGE_TRACKER_UPSELL",e[e.CODE_CHAT_LIBRARY_IMPORT=11]="CODE_CHAT_LIBRARY_IMPORT",e[e.FIGMAKE_METER_LIMIT_TOAST=12]="FIGMAKE_METER_LIMIT_TOAST",e[e.FIGMAKE_PUBLISH_SITE=13]="FIGMAKE_PUBLISH_SITE",e))(o||{});function s({upsellSource:e,fallbackEntryPoint:r=0}){if(!e)return r;switch(e){case a.b.FIGMAKE_PUBLISH_SITE:return 13;case a.b.FIGMAKE_METER_LIMIT_TOAST:return 12;case a.b.CODE_CHAT_LIBRARY_IMPORT:return 11;case a.b.PAGE_TRACKER_UPSELL:return 10;case a.b.MCP_MODAL:return 9;default:return r}}var l=(e=>(e.MONTH="month",e.YEAR="year",e))(l||{});let c={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var d=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(d||{});let u="US",p="JP",m=e=>({line1:"",line2:"",country:e||u,city:"",region:"",postal_code:""});function _(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var h=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(h||{})},764474:(e,r,n)=>{n.d(r,{Ag:()=>b,Au:()=>ed,Av:()=>ec,C:()=>en,Dk:()=>L,FW:()=>W,Gb:()=>e_,HK:()=>E,Kd:()=>T,LR:()=>Z,Lu:()=>em,Lz:()=>ea,MP:()=>k,Pe:()=>ee,Ps:()=>eE,Px:()=>$,R2:()=>er,UX:()=>I,Wt:()=>P,XS:()=>N,Ye:()=>j,ZQ:()=>X,ZV:()=>F,am:()=>ep,bH:()=>J,f5:()=>eo,ho:()=>y,k0:()=>Q,n_:()=>eh,ow:()=>et,pL:()=>Y,pR:()=>A,sM:()=>ei,u8:()=>f,xg:()=>eu});var a,i=n(755595),o=n(962637),s=n(103873),l=n(318147),c=n(553709),d=n(431063),u=n(49984),p=n(231804),m=n(987076),_=n(342463),h=n(261354),g=n(715668),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let v=i.z.object({type:i.z.nativeEnum(y),text:i.z.string()}),T=["camera","microphone","displaycapture"],I=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...T],S=i.z.object({command:i.z.string(),name:i.z.string(),multipleSelection:i.z.boolean().optional()}),A=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],w=i.z.object({name:i.z.string(),key:i.z.string(),description:i.z.string().optional(),optional:i.z.boolean().optional(),allowFreeform:i.z.boolean().optional()}),C=i.z.array(w),N=[...A,...I];[...N];let L=["textreview","panel","inspect","codegen","linkpreview","vscode"],O=i.z.object({label:i.z.string(),value:i.z.string(),isDefault:i.z.boolean().optional()}),R=i.z.object({itemType:i.z.literal("action"),propertyName:i.z.string(),includedLanguages:i.z.array(i.z.string()).optional(),label:i.z.string().optional()});function P(e){return R.safeParse(e).success}let D=i.z.object({itemType:i.z.literal("unit"),scaledUnit:i.z.string(),defaultScaleFactor:i.z.number().optional(),default:i.z.boolean().optional(),includedLanguages:i.z.array(i.z.string()).optional()});function k(e){return D.safeParse(e).success}let M=i.z.object({itemType:i.z.literal("select"),propertyName:i.z.string(),label:i.z.string().optional(),options:i.z.array(O),includedLanguages:i.z.array(i.z.string()).optional()});function F(e){return M.safeParse(e).success}let x=i.z.union([R,D,M]),U=i.z.array(x),B=i.z.object({label:i.z.string(),value:i.z.string()}),G=i.z.object({command:i.z.string(),name:i.z.string(),parameters:C.optional(),parameterOnly:i.z.boolean().optional()}),V=i.z.object({separator:i.z.literal(!0)}),H=i.z.object({name:i.z.string()}).extend({menu:i.z.lazy(()=>i.z.array(i.z.union([G,V,H])))}),z=i.z.object({allowedDomains:i.z.array(i.z.string()),reasoning:i.z.string().optional(),devAllowedDomains:i.z.array(i.z.string()).optional()}),K=i.z.union([H,G,V]);var W=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))(W||{});let j=Object.values(W),Y=i.z.object({id:i.z.string().optional(),name:i.z.string(),api:i.z.string(),main:i.z.string(),ui:i.z.union([i.z.string(),i.z.record(i.z.string(),i.z.string())]).optional(),build:i.z.string().optional(),enableProposedApi:i.z.boolean().optional(),enablePrivatePluginApi:i.z.boolean().optional(),menu:K.array().optional(),networkAccess:z.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:i.z.array(i.z.string()).optional(),devResourceDomains:i.z.array(i.z.string()).optional(),parameters:C.optional(),parameterOnly:i.z.boolean().optional(),editorType:i.Ip.filteredArray(i.z.nativeEnum(W)).optional(),containsWidget:i.z.boolean().optional(),widgetApi:i.z.string().optional(),permissions:i.Ip.filteredArray(i.z.union([i.z.enum(A),i.z.enum(I)])).optional(),enableReadOnly:i.z.boolean().optional(),capabilities:i.Ip.filteredArray(i.z.enum(L)).optional(),codegenLanguages:i.z.array(B).optional(),codegenPreferences:U.optional(),documentAccess:i.z.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=i.z.object({id:i.z.string(),name:i.z.string().nullable(),version:i.z.string().nullable(),releaseNotes:i.z.string().nullable(),description:i.z.string().nullable(),tagline:i.z.string().nullable(),creatorPolicy:i.z.string().nullable(),manifest:i.z.string().nullable(),createdAt:i.z.date(),iconPath:i.z.string().nullable(),coverImagePath:i.z.string().nullable(),codePath:i.z.string().nullable(),plugin:i.z.object({currentPluginVersionId:i.z.string().nullable()})}),e.PluginInstallSchema=i.z.object({id:i.z.string(),pluginId:i.z.string(),pinnedStatus:i.z.nativeEnum(l.hM),createdAt:i.z.date(),plugin:i.z.object({id:i.z.string(),currentPluginVersionId:i.z.string().nullable(),publishingStatus:i.z.nativeEnum(l.KB).nullable(),isWidget:i.z.boolean().nullable(),viewableInEditor:i.z.boolean(),orgId:i.z.string().nullable(),approvedAt:i.z.date().nullable(),approvalStatus:i.z.number().nullable(),communityPublishers:i.z.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=i.z.object({id:i.z.string(),installedPlugins:i.z.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=i.z.object({id:i.z.string(),name:i.z.string()}),e.OrgInfoSchema=i.z.object({id:i.z.string(),name:i.z.string()}),e.CommunityProfileSchema=i.z.object({id:i.z.string(),profileHandle:i.z.string(),user:i.z.object({id:i.z.string(),name:i.z.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=i.z.object({role:i.z.nativeEnum(l.un),isPending:i.z.boolean(),profile:e.CommunityProfileSchema})})(a||(a={}));let $=i.z.object({id:i.z.string(),plugin_id:i.z.string(),name:i.z.string(),version:i.z.string(),current_plugin_version_id:i.z.string().optional(),release_notes:i.z.string(),description:i.z.string(),tagline:i.z.string().nullable(),creator_policy:i.z.string().nullable(),is_private:i.z.boolean(),manifest:Y,created_at:i.z.string(),org_id:i.z.string().optional(),redirect_icon_url:i.z.string(),redirect_cover_image_url:i.z.string(),redirect_code_url:i.z.string(),redirect_snapshot_url:i.z.string().nullish(),community_publishers:i.z.array(a.CommunityPublisherSchema).optional(),installed_by:i.z.union([i.z.literal("user"),i.z.literal("org")]).nullish(),playground_fig_file:i.Ip.ignore().optional(),playground_file_version_id:i.z.string().nullish()}),q=i.z.object({plugin_id:i.z.string(),name:i.z.string(),manifest:Y,localFileId:i.z.number(),localFilePath:i.z.string(),error:v.optional(),cachedContainsWidget:i.z.boolean().optional(),lastKnownPluginId:i.z.string().optional(),testCode:i.z.string().optional()});function X(e){return void 0!==e.localFileId}function J(e){return!X(e)&&!!e.is_private}function Z(e){return!X(e)&&!J(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e){return!!(e?.includes("dev")||e?.includes("inspect"))}function et(e,r,n){return!!(!n||!e||J(e)||X(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let er=i.z.object({org:i.z.object({id:i.z.string(),name:i.z.string()}).optional(),is_public:i.z.boolean().optional()}),en=i.z.object({id:i.z.string(),versions:i.z.record($),current_plugin_version_id:i.z.string().nullable(),is_widget:i.z.coerce.boolean()}),ea=en.merge(i.z.object({install_count:i.z.number(),view_count:i.z.number(),like_count:i.z.number(),comment_count:i.z.number(),category_id:i.z.string().nullable(),roles:er,org_id:i.z.string().nullable(),realtime_token:i.z.string(),created_at:i.z.string(),redirect_thumbnail_url:i.z.string().nullable(),thumbnail_url:i.z.string().nullable(),tags:i.z.array(i.z.string()).optional(),tags_v2:i.z.record(i.z.string()).optional(),current_user_has_run:i.z.boolean().optional(),current_user_first_ran_at:i.z.string().nullish(),unique_run_count:i.z.number(),editor_type:i.z.nativeEnum(E),unpublished_at:i.z.string().nullable(),support_contact:i.z.string().nullable(),comments_setting:i.z.nativeEnum(s.Ni).nullable(),related_content:(0,o.M)(i.z.lazy(()=>ea)),hide_related_content_by_others:i.z.coerce.boolean().optional(),publishing_status:i.z.nativeEnum(l.KB).nullable(),score:i.z.number().optional(),install_status:i.z.nativeEnum(f).optional(),profile_install_status:i.z.nativeEnum(f).optional(),commenting_is_restricted:i.z.boolean(),monetization_status:i.z.nativeEnum(h.UC).nullish(),community_resource_payment:_.fe.optional(),third_party_m10n_status:i.z.nativeEnum(h.PN).nullish(),creator_policy:i.z.string().optional(),plugin_publishers:c.I7.optional(),carousel_media_urls:i.z.optional(g.fE),carousel_videos:i.z.optional(g.Fy)})).and(c.xK).and(u.n).and(m.Y).and(p.q),ei=ea.and(i.z.object({is_widget:i.z.literal(!0)}));function eo(e){return e.third_party_m10n_status===h.PN.MIGRATING}let es=i.z.object({name:i.z.string(),data:i.z.unknown().optional(),icon:i.z.union([i.z.string(),i.z.instanceof(Uint8Array)]).optional(),iconUrl:i.z.string().optional()}),el=i.z.record(es);function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}function ep({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var em=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(em||{});function e_(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function eh(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let eg=i.z.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),ef=i.z.union([i.z.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),eE=i.z.object({plugin:i.z.union([$,q]),command:i.z.string(),queryMode:i.z.boolean(),runMode:eg,triggeredFrom:ef,openFileKey:i.z.string(),ignoreForRunLastPlugin:i.z.boolean().optional(),deferRunEvent:i.z.boolean().optional(),parameterValues:el.optional(),isWidget:i.z.boolean(),widgetAction:i.z.string().nullable().optional(),forcePluginVersionId:i.z.string().nullable().optional()})},382140:(e,r,n)=>{n.d(r,{$:()=>c,E:()=>l});var a=n(660376),i=n(19180),o=n(967688),s=n(318147);function l(e){switch(e){case s.G_.DESIGN:return(0,o.t)("general.figma_design");case s.G_.WHITEBOARD:return(0,o.t)("general.figjam");case s.G_.DEV_MODE:return(0,o.t)("general.dev_mode");case s.G_.SLIDES:return(0,o.t)("general.figma_slides");case s.G_.SITES:return(0,o.t)("general.figma_sites");case s.G_.FIGMAKE:return(0,o.t)("general.figma_rev");case s.G_.COOPER:return(0,o.t)("general.figma_buzz");default:(0,a.xb)(e)}}function c(e){switch(e){case s.G_.DESIGN:return(0,o.t)("general.figma_design_short");case s.G_.SLIDES:return(0,o.t)("general.figma_slides_short");case s.G_.WHITEBOARD:return(0,o.t)("general.figjam");case s.G_.DEV_MODE:return(0,o.t)("general.dev_mode");case s.G_.SITES:return(0,o.t)("general.sites");case s.G_.FIGMAKE:return(0,i.k)().product_trials_figmake?(0,o.t)("general.figma_rev_short"):(0,o.t)("general.figma_rev");case s.G_.COOPER:return(0,o.t)("general.figma_buzz");default:(0,a.xb)(e)}}},844872:(e,r,n)=>{n.d(r,{o:()=>a});let a={r:0,g:0,b:0,a:255}},26435:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(970320),i=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(i||{});a.C0.NAME,a.C0.CREATED_AT,a.C0.ACCESSED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT,a.C0.NAME,a.C0.CREATED_AT,a.C0.SHARED_AT},715668:(e,r,n)=>{n.d(r,{Fy:()=>m,P1:()=>s,Sq:()=>h,dE:()=>_,fE:()=>d});var a=n(755595),i=n(322787),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.EMBED=1]="EMBED",e))(o||{});let s=a.z.record(a.z.string().refine(e=>Object.keys(i.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),a.z.string().url()),l=a.z.object({url:a.z.string().url()}),c=l.extend({id:a.z.string(),sha1:a.z.string(),resized_thumbnail_urls:a.z.optional(s),created_at:a.z.coerce.date()}),d=a.z.record(a.z.string(),c);l.extend({sha1:a.z.string(),buffer:a.z.instanceof(Uint8Array)});let u=a.z.object({url:a.z.string().url(),thumbnail_url:a.z.string().url()}),p=u.extend({id:a.z.string(),sha1:a.z.string(),thumbnail_sha1:a.z.string(),video_file_uuid:a.z.string().uuid()}),m=a.z.record(a.z.string(),p);function _(e){return"buffer"in e}function h(e){return"id"in e}u.extend({sha1:a.z.string(),buffer:a.z.instanceof(Uint8Array),thumbnail_sha1:a.z.string(),thumbnail_buffer:a.z.instanceof(Uint8Array)})},263336:(e,r,n)=>{n.d(r,{N:()=>a});var a=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(a||{})},603592:(e,r,n)=>{n.d(r,{$L:()=>u,Du:()=>M,Ej:()=>U,Hn:()=>F,KB:()=>_,L0:()=>P,Lk:()=>w,Lr:()=>y,MU:()=>z,Mm:()=>V,Mp:()=>G,OZ:()=>B,Or:()=>H,Rr:()=>m,Rx:()=>b,Rz:()=>K,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>I,Xr:()=>h,Zr:()=>E,_M:()=>O,a7:()=>L,dC:()=>s,dt:()=>S,f9:()=>p,fS:()=>v,gw:()=>A,hf:()=>x,j9:()=>T,jD:()=>d,mp:()=>C,q6:()=>k,qm:()=>N,qy:()=>l,tC:()=>D,uH:()=>i,uR:()=>c});var a=n(967688),i=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(i||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e.BUZZ="BUZZ",e.MAKE="MAKE",e))(u||{}),p=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(p||{}),m=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(m||{});function _(e){switch(e){case"files":return(0,a.t)("search.preview_section.files_capitalized");case"projects":return(0,a.t)("search.preview_section.projects_capitalized");case"users":return(0,a.t)("search.preview_section.people_capitalized");case"teams":return(0,a.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,a.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,a.t)("search.preview_section.community_capitalized");default:return""}}function h(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":case"BUZZ":case"MAKE":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e.FIGMAKE="figmake",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";case"BUZZ":return"cooper";case"MAKE":return"figmake";default:return}}function y(e){if(!e)return null;let r={};for(let[n,a]of Object.entries(e))a&&("creatorIds"===n?r["creator_ids[]"]=a:"folderIds"===n&&a.length>0?r["folder_ids[]"]=a:"teamIds"===n&&a.length>0?r["team_ids[]"]=a:"orgIds"===n&&a.length>0?r["org_ids[]"]=a:r[n]=a);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let v={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var T=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(T||{}),I=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(I||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),A=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(A||{}),w=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(w||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(C||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(N||{}),L=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(L||{}),O=(e=>(e.RELEVANCY="relevancy",e))(O||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function k(e){switch(e){case"files":return(0,a.t)("search.search_model_type_header.files");case"projects":return(0,a.t)("search.search_model_type_header.projects");case"teams":return(0,a.t)("search.search_model_type_header.teams");case"users":return(0,a.t)("search.search_model_type_header.people");case"hub_files":return(0,a.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,a.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type_header.creators");case"public_widgets":return(0,a.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type_header.private_widgets")}}function M(e){switch(e){case"teams":return(0,a.t)("file_browser.team");case"hub_files":return(0,a.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,a.t)("community.plugins.plugin");case"public_profiles":return(0,a.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,a.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,a.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,a.t)("search.search_model_type.empty_state_files");case"projects":return(0,a.t)("search.search_model_type.empty_state_projects");case"teams":return(0,a.t)("search.search_model_type.empty_state_teams");case"users":return(0,a.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,a.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,a.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,a.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,a.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,a.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,a.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],G=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],V=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,z=10,K=30},175957:(e,r,n)=>{n.d(r,{A5:()=>i,Ft:()=>_,G4:()=>u,QB:()=>b,SC:()=>h,Sc:()=>g,U6:()=>p,bN:()=>m,bb:()=>s,ck:()=>E,f0:()=>o,g3:()=>d,gu:()=>y,jX:()=>f,kV:()=>l,ou:()=>c});var a=n(872240),i=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.COLLABORATORS=3]="COLLABORATORS",e[e.EMBED_CODE=4]="EMBED_CODE",e[e.SHARE_SETTINGS=5]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=6]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=7]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=8]="SHARE_TO_GOOGLE_CLASSROOM",e[e.CONNECTED_PROJECT_USERS=9]="CONNECTED_PROJECT_USERS",e[e.UPDATE_SEAT=10]="UPDATE_SEAT",e))(i||{}),o=(e=>(e.FILE="file",e.FULLSCREEN_PREVIEW="fullscreen_preview",e.SETTINGS="settings",e))(o||{}),s=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(s||{});function l(e){return"search"===e.view}let c={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var d=(e=>(e.RESOURCES="resources",e.FOLLOWERS="followers",e.FOLLOWING="following",e.METRICS="metrics",e.SAVES="saves",e))(d||{}),u=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(u||{}),p=(e=>(e.ONBOARDING="onboarding",e))(p||{});function m(e){return"org"===e.view}var _=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(_||{}),h=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(h||{}),g=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(g||{});function f(e){return"upgrade_existing_team"===e}function E(e,r){return"create"===e&&(r===a.tn.CREATE_TEAM||r===a.tn.ADD_COLLABORATORS)||r===a.tn.PLAN_COMPARISON}let y=["deletedFiles","trashedFolders","teamCreation","folder","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","orgIdpManagement","abandonedDraftFiles","litmus","componentBrowserLibrary","seatRequests","resourceHub"];function b(e){return y.includes(e.view)}},74666:(e,r,n)=>{n.d(r,{Sm:()=>s,Vh:()=>m,w_:()=>c,zB:()=>u});var a=n(755595),i=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(i||{});let o=a.z.nativeEnum(i);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=a.z.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=a.z.nativeEnum(c);var u=(e=>(e.ALLOWED="allowed",e.MEMBERS_ONLY="members_only",e.BANNED="banned",e))(u||{});let p=a.z.nativeEnum(u),m=a.z.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:a.z.boolean(),ip_account_restriction:a.z.boolean().optional(),ip_allowlist:a.z.boolean().optional(),idle_timeout_duration_in_secs:a.z.number().optional().nullable(),autogen_password_controls:a.z.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:a.z.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:a.z.string().optional().nullable(),file_export_setting:p.optional().nullable()})},831429:(e,r,n)=>{var a=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(a||{})},654793:(e,r,n)=>{n.d(r,{c:()=>a});let a={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},386252:(e,r,n)=>{n.d(r,{Fb:()=>b,ZN:()=>I,bL:()=>T,kE:()=>v,pE:()=>S,qg:()=>E});var a=n(755595),i=n(193841),o=n(318147),s=n(869862),l=n(209857);let c=(0,a.fc)(o.GP),d=(0,a.fc)(o.PQ),u=(0,a.fc)(o.bU),p=(0,a.fc)(o.El),m=(0,a.fc)(o.kU),_=(0,a.fc)(o.Qh),h=(0,a.fc)(o.kI),g=(0,a.fc)(o.sC),f=(0,a.fc)(o.P4),E=118;var y=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e.REQUIRES_ACTION="requires_action",e))(y||{}),b=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(b||{});let v=(0,i.S8)("Team",s.bV.extend({created_at:a.z.string(),id:(0,i.ie)(),img_url:a.z.string().optional(),org_id:a.z.string().nullable(),name:a.z.string(),description:a.z.string(),projects:a.z.number().nullish(),editors:a.z.number().nullish(),realtime_token:a.z.string().optional(),restrictions_list:a.z.array(f).nullable(),subscription:_.nullable(),subscription_raw:_.nullable(),org_access:u.nullable(),stripe_customer_id:a.z.string().nullable(),student_team_at:a.z.string().nullable(),student_team_state:m,student_autoverifying_team_at:a.z.string().nullable(),student_team:a.z.boolean(),pro_team:a.z.boolean(),org_team:a.z.boolean(),starter_team:a.z.boolean(),grace_period_end:a.z.string().nullable(),grace_period_type:c.nullable(),last_upgraded_at:a.z.string().nullable(),updated_at:a.z.string().nullable().optional(),deleted_at:a.z.string().nullable(),community_profile_id:a.z.string().optional(),community_profile_handle:a.z.string().optional(),license_group_id:a.z.string().nullable(),license_group:l.W.nullable(),workspace_id:a.z.string().nullable(),default_permission:g.optional().nullable(),is_favorited:a.z.boolean().optional(),vat_gst_id:a.z.string().optional(),tax_id_verification_status:h.optional(),cmty_publish_as_user_enabled:a.z.boolean().optional(),ai_features_disabled:a.z.boolean().optional(),figma_provided_libraries_disabled:a.z.boolean().optional(),legal_name:a.z.string().nullable(),design_default_paid_status:p.optional(),whiteboard_default_paid_status:p.optional(),sanctioned_at:a.z.string().nullable(),sharing_audience_control:d.optional(),org_browsable:a.z.boolean().optional(),hidden:a.z.boolean().optional()}));function T(e,r){return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}/all-projects`}var I=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e.INSERT_ADVANCED_SHAPE="insert_advanced_shape",e.ACCEPT_PROJECT_CONNECTION_INVITE="accept_project_connection_invite",e.ENABLE_MCP="enable_mcp",e))(I||{}),S=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(S||{})},970320:(e,r,n)=>{n.d(r,{C0:()=>a,Jh:()=>s,XU:()=>c,cT:()=>d,mo:()=>u,rJ:()=>o,rR:()=>p,t2:()=>l,ue:()=>i});var a=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(a||{}),i=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(i||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.CAN_BE_VIEWED=0]="CAN_BE_VIEWED",e[e.CAN_BE_RESTORED_DELETED=1]="CAN_BE_RESTORED_DELETED",e))(s||{}),l=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e[e.COOPER=6]="COOPER",e[e.MAKE=7]="MAKE",e))(l||{}),c=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(c||{}),d=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(d||{});function u(e){switch(e){case 1:default:return"can_be_restored_deleted";case 0:return"can_be_viewed"}}var p=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(p||{})},404883:(e,r,n)=>{n.d(r,{D6:()=>o,P5:()=>i,aw:()=>d,pl:()=>u,vA:()=>c,z4:()=>l});var a=n(755595),i=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(i||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}var c=(e=>(e.ALWAYS="always",e.NEVER="never",e))(c||{});let d=a.z.object({id:a.z.string(),name:a.z.string().optional(),handle:a.z.string(),img_url:a.z.string(),email:a.z.string().optional(),description:a.z.string().nullish(),org_id:a.z.string().optional()});var u=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(u||{})},961359:(e,r,n)=>{n.d(r,{V5:()=>a});let a=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},706688:(e,r,n)=>{var a;(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(a||(a={}))},641400:(e,r,n)=>{n.d(r,{$E:()=>a,MK:()=>s,bU:()=>i});var a=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(a||{}),i=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(i||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},28351:(e,r,n)=>{n.d(r,{Fi:()=>o,V0:()=>a,dN:()=>i,m2:()=>s,rj:()=>l});var a=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(a||{}),i=(e=>(e.TEAMS="teams",e))(i||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["members","teams","libraries","settings"];l[0]},169245:(e,r,n)=>{n.d(r,{$f:()=>u,GR:()=>l,d4:()=>c,nc:()=>o,rp:()=>s,s6:()=>i,vT:()=>d});var a=n(382902);let i=(0,a.eU)(!1),o=(0,a.eU)(!1),s=(0,a.eU)(!1),l=(0,a.eU)(null),c=(0,a.eU)(null),d=(0,a.eU)(null),u=(0,a.eU)(null);(0,a.eU)(!1),(0,a.eU)(e=>e(c)?e(l):null)},562826:(e,r,n)=>{var a=n(848318),i=n(301168);n(382902),n(410725);var o=n(31898);n(652576),n(730143),n(125761);var s=n(318147);n(55116);var l=n(138528);n(20687),n(280361),n(169245);var c=n(308522);n(698429);var d=n(660376),u=n(93275),p=n(531788),m=n(162796),_=n(309488),h=n(967688),g=n(87463),f=n(446951),E=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(E||{});let y=(0,f.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n,open:f}){let E,b;let v=(0,i.wA)(),T=()=>{c.s.updateUserAutoRunPluginId(e.pluginID,s.xw.NONE),v(o.Lo())},I=()=>v(o.Lo()),S=(0,l.T5)("AutoRunConfirmModal").unwrapOr(null),A=S?.key.type===s.OL.ORG?S.name:void 0,w={currentAutoRunPluginName:a.createElement(g.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},C={orgName:a.createElement(g.E,null,A||""),orgPluginName:a.createElement(g.E,{fontWeight:"bold"},e.orgPluginName)},N={orgPluginName:a.createElement(g.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:a.createElement(g.E,{fontWeight:"bold"},r),orgName:a.createElement(g.E,null,A||"")};switch(n){case"stop-auto-run-from-user":E=a.createElement(a.Fragment,null,a.createElement(u.nB,null,a.createElement(g.E,{color:"default",fontWeight:"medium"},(0,h.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",w))),a.createElement(u.wi,null,a.createElement(u.jk,null,a.createElement(p.$n,{variant:"secondary",onClick:I},(0,h.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(p.$n,{variant:"primary",onClick:()=>{T(),v((0,o.to)({type:y,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,h.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":E=a.createElement(a.Fragment,null,a.createElement(u.nB,null,a.createElement(g.E,{color:"default",fontWeight:"medium"},(0,h.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",C))),a.createElement(u.wi,null,a.createElement(u.jk,null,a.createElement(p.$n,{variant:"secondary",onClick:I},(0,h.t)("dev_handoff.autorun_confirm_modal.dont_enable")),a.createElement(p.$n,{variant:"primary",onClick:()=>{c.s.updateUserAutoRunPluginId(e.pluginID,s.xw.INHERIT),v(o.Lo())}},(0,h.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":E=a.createElement(a.Fragment,null,a.createElement(u.nB,null,a.createElement(g.E,{color:"default",fontWeight:"medium"},(0,h.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",N))),a.createElement(u.wi,null,a.createElement(u.jk,null,a.createElement(p.$n,{variant:"secondary",onClick:I},(0,h.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(p.$n,{variant:"primary",onClick:()=>{c.s.updateUserAutoRunPluginId(e.pluginID,s.xw.OVERRIDE),v(o.Lo())}},(0,h.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":E=a.createElement(a.Fragment,null,a.createElement(u.nB,null,a.createElement(g.E,{color:"default",fontWeight:"medium"},(0,h.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",C))),a.createElement(u.wi,null,a.createElement(u.jk,null,a.createElement(p.$n,{variant:"secondary",onClick:I},(0,h.t)("dev_handoff.autorun_confirm_modal.cancel")),a.createElement(p.$n,{variant:"primary",onClick:T},(0,h.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,d.xb)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":b=(0,h.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":b=(0,h.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":b=(0,h.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,d.xb)(n)}let L=m.hS({open:f,onClose:()=>v(o.Lo())});return a.createElement(_.bL,{manager:L,width:"md",htmlAttributes:{"data-testid":"autorun-confirm-modal"}},a.createElement(u.vo,null,a.createElement(u.Y9,null,a.createElement(u.hE,null,b)),E))},"AutoRunConfirmModal")},281406:(e,r,n)=>{n.d(r,{Q:()=>d});var a=n(848318),i=n(354427);n(967688);var o=n(43322),s=n(220260),l=n(318147);n(17753);var c=n(960306);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=a.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,i.he)(r?.language,n)&&(0,i.he)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:a.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}},765625:(e,r,n)=>{n.d(r,{Ew:()=>a.E,IN:()=>l.IN,VY:()=>o.V,Wh:()=>l.Wh,Yx:()=>s.Y,_x:()=>i._x,gH:()=>l.gH,mN:()=>i.mN});var a=n(314126),i=n(370512);n(507787);var o=n(393190),s=n(613297),l=n(735976)},507787:(e,r,n)=>{n(848318),n(938982),n(989232);var a=n(29188);n(615233);var i=n(656329);n(998568),n(540698),n(952039),n(303397);var o=n(14837);n(317006);var s=n(735976);n(450586),n(613297);let l=!!a.eD||(0,o.T)();i.Ay.mac,s.IN,JSON.stringify(l),i.Ay.mac,JSON.stringify((0,o.T)()),JSON.stringify((0,o.T)()),JSON.stringify((0,o.T)()),s.NO},100984:(e,r,n)=>{n.d(r,{D:()=>s}),n(848318);var a=n(382902),i=n(454805);n(230618),n(720522),n(297638),n(696786),n(327139);var o=n(735976);n(507787),n(79979),n(581520),n(634218);let s=(0,a.eU)({titleIconURL:"",titleIconSvgSrc:void 0,title:"",displayed:!1,width:o.bA,height:o.Yw,initialPosition:new i.Mi(0,0),cancelCallback:void 0,onDragEnd:e=>{}})},960306:(e,r,n)=>{n.d(r,{VR:()=>N});var a=n(848318),i=n(301168),o=n(871043);n(382902);var s=n(996202);n(865500);var l=n(410725),c=n(304756);n(113618);var d=n(972402),u=n(584961);n(677103),n(220260);var p=n(533737),m=n(652576),_=n(991694);n(702038),n(730143);var h=n(125761),g=n(318147),f=n(55116),E=n(138528);n(20687),n(811085);var y=n(698429),b=n(660376),v=n(186606),T=n(19180),I=n(159563);let S={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:g.tK.PIXEL,scaleFactor:null},behavior:g.Rc.INHERIT};class A{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:a,pinnedPluginsEnabled:i}={...n},o={...r};a||(o.codegenSettings=null),!i&&(0,T.k)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||w(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==g.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new A((0,I.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):w(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),w(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let a=w(this.workingPreferences,e),i=w(this.parentPreferences,e),o=!!(!a&&i);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let a=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==a)n.pins.splice(a+1,0,{pluginId:e,inherited:o});else{let a=this.orgPinsNotInUserPins(),i=a.findIndex(e=>e.pluginId===r.id);if(-1===i)throw Error("Invalid pin to move after");n.pins.push(...a.slice(0,i+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,a=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:a},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let a={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:a,preferences:this.codegenSettings?.preferences||S.preferences,behavior:this.codegenSettings?.behavior||S.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let a=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:a,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let a=this.localLanguageTypeToLgLanguageType(e.type);if(!a)throw Error("Invalid language type");let i={...e,type:a,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:i,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:a,preferences:i}=e,o=this.localLanguageTypeToLgLanguageType(a.type);if(!o)throw Error("Invalid language type");let s={...a,type:o,pluginLanguage:a.pluginLanguage??null},l={unit:this.localUnitToLgUnit(i.unit),customSettings:i.customSettings??null,scaleFactor:i.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case v.tKW.PIXEL:return g.tK.PIXEL;case v.tKW.SCALED:return g.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case g.tK.PIXEL:return v.tKW.PIXEL;case g.tK.SCALED:return v.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return g.h9.FIRST_PARTY;case"published-plugin":return g.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case g.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case g.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,b.xb)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function w(e,r){return e?.pins.some(e=>e.pluginId===r)}let C={pins:[],removedInheritedPins:[],codegenSettings:null};function N(){let{loaded:e,preferences:r}=function(){let e=(0,h.TA)(),{loaded:r,preferences:n}=O((0,l.Rs)(f.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:_,pinnedPluginsEnabled:b}=function(){let e=(0,E.X$)("useLGOrgPluginPreferences").unwrapOr(null),r=(0,E.H3)(e)??null;return O((0,l.Rs)(f.JuA,{targetOrgId:r,targetUserId:null}))}(),v=(0,i.wA)(),T=(0,s.U)(),I=(0,y.ks)(),S=(0,d._I)(),w=I&&!S;(0,a.useEffect)(()=>{r&&P(null)},[r]);let N=(0,a.useMemo)(()=>new A(r??C,c??null,{codegenEnabled:_,pinnedPluginsEnabled:b}),[r,c,_,b]),[R,P]=(0,a.useState)(null),D=(0,a.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),k=(0,a.useMemo)(()=>R?.pinnedPluginIDs??N.pinnedPluginIDs,[N,R]),M=(0,E.X$)("usePluginPreferences").unwrapOr(null),F=(0,E.H3)(M)??null,x=(0,h.TA)(),U=(0,m.YN)(),B=(0,a.useMemo)(()=>k.map(e=>{let r=D.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==g.KB.APPROVED_PUBLIC&&r.publishingStatus!==g.KB.ORG_PRIVATE)return null;let n=(0,m.mf)(r,F,x,null);return n&&(w||U(n))?n:null}).filter(o.Vq),[k,D,F,x,w,U]),G=e=>{P(e),L(e.serialize()).catch(()=>{P(null)})};return{pinnedPlugins:B,unpinPlugin(e){G(N.unpinPlugin(e)),T("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){v(p.b({[u.xb]:!0})),G(N.pinPlugin(e)),T("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){G(N.movePin(e,r)),T("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:N.localCodegenSettings,setCodegenSettings(e){G(N.setCodegenSetting(e))},setCodegenSettingsLanguage(e){G(N.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){G(N.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){G(N.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function L(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function O(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:a}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:a??!1}}_.qZ.CSS,g.h9.FIRST_PARTY,g.tK.PIXEL,g.Rc.INHERIT},825241:(e,r,n)=>{n.d(r,{F5:()=>o,Rs:()=>c,Z:()=>l,nx:()=>d,um:()=>s});var a=n(407639),i=n(477548);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===i.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===i.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens)r.push(n.content.toLowerCase());return e.inputValue&&r.push(e.inputValue.trim().toLowerCase()),r}function l(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.trim().toLowerCase()),r}function c(){return{inputValue:"",tokens:[],errorMessage:""}}function d(e=c(),r){return a.cL.matches(r)?c():a.hZ.matches(r)?{...r.payload}:a.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:a.pf.matches(r)?{...e,inputValue:r.payload}:a.g.matches(r)?{...e,errorMessage:r.payload}:e}},197696:(e,r,n)=>{n.d(r,{Nf:()=>E,Rn:()=>h,TY:()=>p,Yh:()=>g,c1:()=>f,fj:()=>d,jv:()=>m,pi:()=>u});var a=n(186606),i=n(656329),o=n(967688),s=n(453370),l=n(244534),c=n(273555);function d(e={...c.Gf},r){return s.Ts.matches(r)?c.Gf:(l.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:a.vRS.COLOR}),e)}let u="fullscreen-menu-dropdown";function p(e){return e?.type===u}let m="quick-actions-dropdown",_=Object.create(null);function h(e){let r=_[e];return r||(r=_[e]=`actionEnabled__${e}`),r}function g(e,r){return!!e[h(r)]}function f(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return i.Ay.mac?"\u2318":"Ctrl";case"set-tool-vector-lasso":return"Q";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-code-component":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return i.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":case"toggle-inline-html-preview":return"\u21E7"+(0,o.t)("whiteboard.keyboard_shortcuts.key_label.space");case"set-tool-sites-responsive-set":return"W";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if(i.Ay.mac)return n+"\u2193";break;case"page-previous":if(i.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function E(e){return e&&e.currentPage?e.currentPage:"0:1"}},561327:(e,r,n)=>{n.d(r,{K3:()=>p,YI:()=>u,bp:()=>c,sp:()=>m,y2:()=>d});var a=n(660376),i=n(195124),o=n(453370),s=n(244534),l=n(301589);function c(e=Object.create(null),r){if(o.Ts.matches(r)||l.a.matches(r))return Object.create(null);if(s.p5.matches(r)&&r.payload.selection){let{add:n,remove:i,replace:o}=r.payload.selection;if((0,a.KF)(!((n||i)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in i)delete s[e];return s}return e}function d(e,r,n){for(let a in r){let r=e.get(a);r&&(0,i.hV)(r,n)}}function u(e,r,n){for(let a in r){let r=e.get(a);r&&n(r)}}function p(e,r){return!!e[r]}function m(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let a=null;return(0,i.Si)(e,n,e=>{if(!a&&r[e.guid]&&(a=e),a)return"stop"}),a}(e,r,n)}},335950:(e,r,n)=>{n.d(r,{A:()=>s});var a=n(151223),i=n(804853),o=n(668777);function s(e={},r){if(i.D.matches(r)){let n={...e};for(let a of r.payload)n[a.file_key]={...e[a.file_key],...a};return n}return e}(0,a.nF)(async(e,{fileKey:r})=>{let n=e.getState(),a=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!a&&!s)return;let l=await o.q.getRecents({fileKeys:r,...a?{orgId:a}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(i.D([l.data.meta.templates[0]]))})},516502:(e,r,n)=>{n.d(r,{Yb:()=>d,kQ:()=>p,nm:()=>u,z4:()=>c});var a=n(615233),i=n(103661),o=n(453370),s=n(15120),l=n(854640);function c(e,r){return r&&r.id===e.id?"You":e.handle}function d(e=!0,r){return o.Qv.matches(r)&&null!=r.payload.is_free_user?r.payload.is_free_user:e}function u(e=!0,r){return o.Qv.matches(r)&&null!=r.payload.is_starter_user?r.payload.is_starter_user:e}function p(e=null,r){if(o.Ts.matches(r))return(0,a.tl)().user_data||null;if(i.n4.matches(r))return{...e,...r.payload.user};if(s.yJ.matches(r)){if(e&&e.id===r.payload.user.id){let n=new Map(e.dev_tokens?.map(e=>[e.id,e])),a=[];for(let e of r.payload.user.dev_tokens||[])if(n.has(e.id)){let r=n.get(e.id);a.push({...r,...e})}else a.push(e);return{...e,...r.payload.user,dev_tokens:a}}}else if(s.WJ.matches(r))return e?{...e,two_factor_secret_loaded:!1,password_token:void 0,temp_phone:void 0,phone_token:void 0,backup_codes:void 0}:null;else if(s.C$.matches(r))return e?{...e,two_factor_app_enabled:r.payload.enabled}:null;else if(s.hz.matches(r))return e?{...e,delete_user_loading:r.payload.loading}:null;else if(o.Qv.matches(r))return e?{...e,drafts_folder_id:r.payload.drafts_folder_id,personal_drafts_folder_id:r.payload.personal_drafts_folder_id}:null;else if(l.eu.matches(r))return e?{...e,color_profile:r.payload.color_profile}:null;return e}},232977:(e,r,n)=>{var a=n(755595),i=n(795234),o=n(304756),s=n(38467);let l=a.z.object({id:a.z.string(),name:a.z.string().nullable(),creatorId:a.z.string(),teamId:a.z.string(),baseColors:a.z.array(a.z.string()),uuid:a.z.string().uuid(),isTeamDefault:a.z.boolean()});new class{constructor(){this.ColorPaletteSchemaValidator=(0,i.YV)("ColorPaletteSchemaValidator",(0,s.D)(l),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",i.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,i.td.toAPIParameters(e)))}async deleteColorPalette(e){await o.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return o.Ay.post(`/api/files/${e}/color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await o.Ay.post(`/api/teams/${e}/default_color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await o.Ay.del(`/api/teams/${e}/default_color_palette`)}}},762977:(e,r,n)=>{n.d(r,{U:()=>o});var a=n(795234),i=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(i||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,a.vh)(),this.AtMentionsSchemaValidator=(0,a.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",a.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,a.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",a.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,a.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",a.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,a.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",a.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,a.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",a.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",a.td.toAPIParameters(e)))}}},71173:(e,r,n)=>{var a=n(755595),i=n(795234),o=n(38467);let s=a.z.object({id:a.z.string().uuid(),collectionId:a.z.string().uuid(),position:a.z.string(),status:a.z.string(),createdAt:a.z.string(),updatedAt:a.z.string(),lastPublishedAt:a.z.string().nullable(),statusUpdatedAt:a.z.string().nullable()}),l=a.z.object({id:a.z.string().uuid(),itemId:a.z.string().uuid(),fieldSchemaId:a.z.string().uuid(),value:a.z.string(),version:a.z.number(),createdAt:a.z.string(),updatedAt:a.z.string()}),c=a.z.object({valid:a.z.boolean(),failure_info:a.z.object({errors:a.z.array(a.z.string()),i18n_keys:a.z.array(a.z.string())}).optional()});new class{constructor(){this.CollectionItemResponseSchemaValidator=(0,i.YV)("CollectionItemResponseSchemaValidator",(0,o.D)(s),null),this.CollectionFieldResponseSchemaValidator=(0,i.YV)("CollectionFieldResponseSchemaValidator",(0,o.D)(l),null),this.ItemValidateResponseSchemaValidator=(0,i.YV)("ItemValidateResponseSchemaValidator",c,null)}createItem({collection:e,itemId:r}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:n})=>await n.post(`/api/collections/${e.databaseId}/items`,i.td.toAPIParameters({itemId:r})))}updateItem({collection:e,item:r,updatedItemAttributes:n}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:a})=>await a.put(`/api/collections/${e.databaseId}/items/${r.databaseId}`,i.td.toAPIParameters({index:n.position,status:n.status})))}updateSingleItemData({fieldId:e,fieldSchema:r,item:n,newValue:a}){return this.CollectionFieldResponseSchemaValidator.validate(async({xr:o})=>await o.put(`/api/items/${n.databaseId}/fields/${r.databaseId}`,i.td.toAPIParameters({value:a,uuid:e})))}deleteItem({collection:e,item:r}){return this.CollectionItemResponseSchemaValidator.validate(async({xr:n})=>await n.del(`/api/collections/${e.databaseId}/items/${r.databaseId}`))}validateItemData({fieldSchema:e,item:r,newValue:n}){return this.ItemValidateResponseSchemaValidator.validate(async({xr:a})=>await a.put(`/api/items/${r.databaseId}/fields/${e.databaseId}/validate`,i.td.toAPIParameters({value:n})))}}},179101:(e,r,n)=>{var a=n(795234);new class{constructor(){this.TotalActiveDevModeUsersSchemaValidator=(0,a.vh)(),this.ActiveDevModeUserAvatarsSchemaValidator=(0,a.vh)()}getTotalActiveDevModeUsers(e){return this.TotalActiveDevModeUsersSchemaValidator.validate(async({xr:r})=>await r.get("/api/dev_handoff/social_proof/total_active_users",{team_id:e.teamId,org_id:e.orgId}))}getActiveDevModeUserAvatars(e){return this.ActiveDevModeUserAvatarsSchemaValidator.validate(async({xr:r})=>await r.get("/api/dev_handoff/social_proof/active_user_avatars",a.td.toAPIParameters(e)))}}},771981:(e,r,n)=>{n.d(r,{$x:()=>c,Eu:()=>d,tc:()=>l});var a=n(382902);n(476254);var i=n(182317);n(795234);var o=n(304756),s=n(730143),l=(e=>(e[e.RAW_VARIABLES=0]="RAW_VARIABLES",e[e.RAW_TEXT_STYLES=1]="RAW_TEXT_STYLES",e[e.COMPONENT=2]="COMPONENT",e[e.FRAGMENT=3]="FRAGMENT",e[e.GENERATED_VARIABLES=4]="GENERATED_VARIABLES",e[e.GENERATED_TYPOGRAPHY=5]="GENERATED_TYPOGRAPHY",e[e.GUIDELINES_MD=6]="GUIDELINES_MD",e[e.GLOBAL_CSS=7]="GLOBAL_CSS",e[e.COMPONENTS_LIST_VARIABLES=8]="COMPONENTS_LIST_VARIABLES",e[e.COMPONENTS_LIST_TYPOGRAPHY=9]="COMPONENTS_LIST_TYPOGRAPHY",e))(l||{});async function c({type:e,blob:r,components_list:n,key:i}){let l=a.zl.get(s.ze)??void 0,c=a.zl.get(s._S)??void 0;if(!l||!c)throw Error("Missing file_key or library_key");if(!r&&!n)throw Error("Need atleast a blob or component_list to be uploaded");await o.Ay.post("/api/make/create_ds_import",{artifact_type:e,artifact_blob:r,components_list:n,artifact_key:i,file_key:l,library_key:c})}async function d(){let e=a.zl.get(s.ze)??void 0,r=a.zl.get(s._S)??void 0;if(!e||!r)throw Error("Missing file_key or library_key");return(await o.Ay.post("/api/recommend/components",{subscribed_library_keys:[r],source:"figma_make",open_file_key:e,query_id:(0,i.g)(),session_id:(0,i.g)()})).data.meta.components}},441932:(e,r,n)=>{n.d(r,{If:()=>s});var a=n(755595),i=n(795234);let o=a.z.object({save_location:a.z.string(),folder_name:a.z.string().optional(),org_id:a.z.string().optional()}),s=(0,i.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>e.folderId?await r.put(`/api/file/claim/${e.fileKey}`,{folder_id:e.folderId}):await r.put(`/api/file/claim/${e.fileKey}`))}}},7905:(e,r,n)=>{n.d(r,{S:()=>s});var a=n(795234),i=n(304756),o=n(163554);let s=new class{constructor(){this.RelatedLinksSchemaValidator=(0,a.vh)(),this.FilesSchemaValidator=(0,a.vh)(),this.FilesSchemaValidatorWithPerms=(0,a.vh)(),this.VideosSchemaValidator=(0,a.vh)(),this.RealtimeTokenSchemaValidator=(0,a.vh)(),this.SourceCheckpointCreatedAtSchemaValidator=(0,a.vh)(),this.SourceFileUpdatedInfoSchemaValidator=(0,a.vh)(),this.MetaSchemaValidator=(0,a.vh)(),this.LastInteractionSchemaValidator=(0,a.vh)(),this.VideosUploadSchemaValidator=(0,a.vh)(),this.VideoDownloadSchemaValidator=(0,a.vh)(),this.IncludeFolderTeamCanEditSchemaValidator=(0,a.vh)(),this.PageCheckpointThumbnailsSchemaValidator=(0,a.vh)(),this.GetHubFileDuplicatesSchemaValidator=(0,a.vh)(),this.GetTaggedUserFileSchemaValidator=(0,a.vh)(),this.PageWAFValidatorSchemaValidator=(0,a.vh)(),this.CopyFileSchemaValidator=(0,a.YV)("CopyFileSchemaValidator",o.L,null)}getRelatedLinks(e){let{fileKey:r,...n}=e;return this.RelatedLinksSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}/related_links`,a.td.toAPIParameters(n)))}getFiles(e){let{fileKey:r,args:n,...i}=e;return e.includePerms?this.FilesSchemaValidatorWithPerms.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}`,a.td.toAPIParameters(i),n)):this.FilesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}`,a.td.toAPIParameters(i),n))}getVideos(e){return this.VideosSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}/videos`))}getRealtimeToken(e){return this.RealtimeTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}/realtime_token`))}getSourceCheckpointCreatedAt(e){return this.SourceCheckpointCreatedAtSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.currentFileKey}/source_checkpoint_created_at`))}getSourceFileUpdatedInfo(e){return this.SourceFileUpdatedInfoSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.branchFileKey}/source_file_updated_info`))}getMeta(e){return this.MetaSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}/meta`))}getLastInteraction(e){return this.LastInteractionSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.openFileKey}/last_interaction`))}getVideosUpload(e){return this.VideosUploadSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}/videos/${e.sha1}/upload`))}getVideosDownload(e){return this.VideoDownloadSchemaValidator.validate(({xr:r})=>r.get(`/api/files/${e.fileKey}/videos/${e.hexHash}`))}getIncludeFolderTeamCanEdit(e){return this.IncludeFolderTeamCanEditSchemaValidator.validate(async({xr:r})=>await r.get(`/api/files/${e.fileKey}`,a.td.toAPIParameters({includeFolderTeamCanEdit:e.includeFolderTeamCanEdit?1:0})))}putFile(e){return i.Ay.put(`/api/files/${e.file.key}`,e.file)}updatePageCheckpointThumbnails(e){return this.PageCheckpointThumbnailsSchemaValidator.validate(async({xr:r})=>await r.post(`/api/files/${e.fileKey}/page_thumbnails`))}getHubFileDuplicates(e){return this.GetHubFileDuplicatesSchemaValidator.validate(async({xr:r})=>await r.post("/api/files/hub_file_duplicates",a.td.toAPIParameters({fileKeys:e.fileKeys})))}getTaggedUserFiles(e){return this.GetTaggedUserFileSchemaValidator.validate(async({xr:r})=>await r.post("/api/tagged_file",a.td.toAPIParameters({fileTags:e.fileTags,currentOrgId:e.currentOrgId,currentTeamId:e.currentTeamId,shouldRecreate:e.shouldRecreate})))}getWAFValidator(){return this.PageWAFValidatorSchemaValidator.validate(async({xr:e})=>await e.get("/waf-validation-captcha"))}copyFile(e,r){return this.CopyFileSchemaValidator.validate(async({xr:n})=>await n.post(`/api/multiplayer/${e}/copy`,a.td.toAPIParameters({...r||{}})))}}},866384:(e,r,n)=>{n.d(r,{Gh:()=>_});var a=n(19180),i=n(755595),o=n(476254),s=n(795234),l=n(304756),c=n(937578),d=n(656320),u=n(944239);let p=i.z.object({userPromptRaw:i.z.string(),jsx:i.z.string().optional(),theme:i.z.record(i.z.any()).optional(),trace:i.z.any().optional(),layoutJsx:i.z.string().optional(),v3Components:i.z.record(i.z.string()).optional(),userPrompt:i.z.string().optional(),userPromptFull:i.z.string().optional(),systemPrompt:i.z.string().optional()}),m=i.z.object({prompt_version:i.z.string().optional(),eval_results:i.z.array(p)});i.z.union([i.z.object({status:i.z.literal("pending")}),i.z.object({status:i.z.literal("failed")}),m.extend({status:i.z.literal("success")})]);let _=new class{constructor(){this.FirstDraftKitStatusSchemaValidator=(0,s.vh)(),this.FirstDraftPublishStatusSchemaValidator=(0,s.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,s.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,s.vh)(),this.FirstDraftKitKeyFromLibraryKeySchemaValidator=(0,s.vh)(),this.getFirstDraftKitKeyFromLibraryKey=(0,u.n)(({libraryKey:e})=>this.FirstDraftKitKeyFromLibraryKeySchemaValidator.validate(async({xr:r})=>await r.get("/api/first_draft/kit_key_from_library_key",s.td.toAPIParameters({file_key:(0,d.U2)(o.D?.getState().selectedView),library_key:e}),{headers:this.buildHeaders()}))),this.FirstDraftMatchPresetModesSchemaValidator=(0,s.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,s.vh)(),this.FirstDraftUpdataMetadataSchemaValidator=(0,s.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,s.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,s.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,s.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,s.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,s.vh)()}buildHeaders(){return{...l.Ay.defaults.headers}}getFirstDraftKitStatus(){let e=(0,d.U2)(o.D?.getState().selectedView);return this.FirstDraftKitStatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/first_draft/kit_status/${e}`,null,{headers:this.buildHeaders()}))}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:i,publishType:s,kitKey:l}){let u=(0,d.U2)(o.D?.getState().selectedView);return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:o})=>await o.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:i,is_local:s===c.tf.LOCAL_GENERATION,kit_key:l,type_info_version:(0,a.k)().first_draft_direct_gen?c.Rd:c.Q6,theme_info_version:c.$5,file_key:u},{headers:this.buildHeaders()}))}getFirstDraftAllKits(){let e=(0,d.U2)(o.D?.getState().selectedView),r=o.D?.getState().currentUserOrgId,n=o.D?.getState().currentTeamId,i={file_key:e};return(0,a.k)().first_draft_show_direct_gen_kits&&(i={...i,org_id:r,team_id:n}),this.FirstDraftAllKitsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_kits",s.td.toAPIParameters(i),{headers:this.buildHeaders()}))}getFirstDraftMatchGroup(e){let r=(0,d.U2)(o.D?.getState().selectedView);return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:n})=>await n.get("/api/first_draft/match_group",s.td.toAPIParameters({file_key:r,...e}),{headers:this.buildHeaders()}))}postFirstDraftMatchPresetModes(e){let r=(0,d.U2)(o.D?.getState().selectedView);return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:n})=>await n.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt,file_key:r},{headers:this.buildHeaders()}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftUpdateMetadata({fileKey:e,publishMetadata:r}){return this.FirstDraftUpdataMetadataSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/update_metadata/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){let a=(0,d.U2)(o.D?.getState().selectedView);return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n,file_key:a},{headers:this.buildHeaders()}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets",null,{headers:this.buildHeaders()}))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:a,evalPrompts:i}){let o={model:e,is_local:n,kit_key:a};return i?o.eval_prompts=i:o.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",o,{headers:this.buildHeaders()}))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e},{headers:this.buildHeaders()}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n},{headers:this.buildHeaders()}))}}},683264:(e,r,n)=>{n.d(r,{j:()=>i});var a=n(795234);let i=new class{constructor(){this.AutoAcceptResponseValidator=(0,a.vh)(),this.UpdateInviteBillableProductKeyValidator=(0,a.vh)()}putAcceptInvite(e){return this.AutoAcceptResponseValidator.validate(async({xr:r})=>await r.put("/api/invites/accept",e))}updateInviteBillableProductKey(e){let{inviteId:r,billableProductKey:n}=e;return this.UpdateInviteBillableProductKeyValidator.validate(async({xr:e})=>await e.patch(`/api/invites/${r}/billable_product_key`,{billable_product_key:n}))}}},941244:(e,r,n)=>{n.d(r,{G:()=>l,h:()=>s});var a=n(755595),i=n(795234),o=n(376132),s=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e.FILE_PERMISSIONS_MODAL="file_permissions_modal",e))(s||{});let l=new class{constructor(){this.GuestResourcesSchemaValidator=(0,i.vh)(),this.OrgUserSchemaValidator=(0,i.YV)("OrgUserSchemaValidator",o.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,i.YV)("UpdateOrgUsersSchemaValidator",a.z.array(o.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,i.vh)(),this.requestUpgradeSchemaValidator=(0,i.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:r,changes:n}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${r}`,i.td.toAPIParameters(n)))}updateOrgUsers(e){let{orgId:r,...n}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.orgId}/org_users`,i.td.toAPIParameters(n)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:r,flags:n}=e;return i._5.validate(({xr:e})=>e.post(`/api/org_users/${r}/flags`,{flags:n}))}requestOrgAccountTypeRequest(e){return this.requestUpgradeSchemaValidator.validate(async({xr:r})=>await r.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return i._5.validate(({xr:r})=>r.post(`/api/orgs/${e.orgId}/export_members`))}}},683703:(e,r,n)=>{n.d(r,{Eh:()=>f});var a,i=n(755595),o=n(795234),s=n(304756),l=n(677334),c=n(912782),d=n(630819),u=n(698359),p=n(738642),m=n(376132);(e=>{e.isOrgInvite=function(e){return e.type===m.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===m.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===m.Wd.IDP_USER}})(a||(a={}));let _=m.Ru.pick({id:!0,user:!0,type:!0}),h=i.z.discriminatedUnion("type",[m.WU,d.S,p.n]),g=i.z.object({users:i.z.array(i.z.union([h,_])).optional(),cursor:i.Ip.ignore(),totalUserCount:i.z.number()}),f=new class{constructor(){this.IdpUsersSchemaValidator=(0,o.vh)(),this.LicenseGroupsSchemaValidator=(0,o.vh)(),this.BillingDataSchemaValidator=(0,o.YV)("BillingDataSchemaValidator",u.pd.nullable(),null),this.UpdateOrgSchemaValidator=(0,o.vh)(),this.TeamsSchemaValidator=(0,o.vh)(),this.TeamSchemaValidator=(0,o.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,o.vh)(),this.OrgNameSchemaValidator=(0,o.vh)(),this.DomainsSchemaValidator=(0,o.vh)(),this.AdminsSchemaValidator=(0,o.YV)("AdminsSchemaValidator",e=>e.array(m.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,o.YV)("OrgUsersPaginatedSchemaValidator",g,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,o.vh)(),this.UserSchemaValidator=(0,o.YV)("UserSchemaValidator",m.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,o.vh)(),this.ShowVatGstSchemaValidator=(0,o.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,o.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,o.vh)(),this.OrgUsersCountSchemaValidator=(0,o.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,o.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,o.vh)(),this.OrgAdminsSchemaValidator=(0,o.vh)(),this.OrgAdminsQuery=l.M4.Query({fetch:async({orgId:e})=>(await this.getOrgAdmins({orgId:e})).data.meta}),this.OrgTeamsCountSchemaValidator=(0,o.vh)(),this.SetDomainCaptureSchemaValidator=(0,o.vh)(),this.EligibleUpgradesSchemaValidator=(0,o.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(c._),eligible_team_users:e.array(c.P)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return s.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}updateOrgRenewalCounts(e){return this.UpdateOrgSchemaValidator.validate(async({xr:r})=>await r.put(`/api/orgs/${e.orgId}/renewal_counts`,{renewal_seats:e.unassignedSeatCounts}))}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...a}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,o.td.toAPIParameters(a))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}addDomainUsers(e){return s.Ay.post(`/api/orgs/${e.currentOrgId}/add_domain_users`,{user_ids:e.userIds})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,o.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:a,pageSize:i,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,o.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:a||void 0,pageSize:i||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,o.td.toAPIParameters({searchQuery:e.searchQuery,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,seatType:e.seatType})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:a,teamsWithoutOwners:i,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:a||void 0,teams_without_owners:i?String(i):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return s.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return s.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return s.Ay.post(`/api/orgs/${e.orgId}/validate_trial`,{billing_trial_id:e.billingTrialId})}selfAssignWorkspace(e){return s.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return s.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return s.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}putToggleSitesPublishingDisabled(e){return s.Ay.put(`/api/orgs/${e.orgId}/toggle_sites_publishing_disabled`,{sites_publishing_disabled:e.sitesPublishingDisabled})}putToggleSupabaseDisabled(e){return s.Ay.put(`/api/orgs/${e.orgId}/toggle_supabase_disabled`,{supabase_disabled:e.supabaseDisabled})}updateAiDataSharing(e){return s.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}scheduleCancellation(e){return o._5.validate(async({xr:r})=>await r.post(`/api/orgs/${e.orgId}/scheduled_cancellation`))}unscheduleCancellation(e){return o._5.validate(async({xr:r})=>await r.del(`/api/orgs/${e.orgId}/scheduled_cancellation`))}}},308522:(e,r,n)=>{n.d(r,{s:()=>o});var a=n(795234),i=n(304756);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...a}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=a.auto_run_plugin_id,o.auto_run_enabled=a.auto_run_enabled,o.codegen_enabled=a.codegen_enabled,o.pinned_plugins_enabled=a.pinned_plugins_enabled):!1===a.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),i.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return i.Ay.put("/api/plugin_preferences/user",a.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},897163:(e,r,n)=>{n.d(r,{a:()=>g});var a=n(938982),i=n(755595),o=n(998568),s=n(795234),l=n(304756),c=n(506752),d=n(109014),u=n(238445),p=n(677334),m=n(764474),_=(e=>(e.HOMEPAGE="homepage",e.CATEGORY="category",e.PROFILE="profile",e.PLUGINS="plugins",e.SUGGESTED_EXTENSIONS="suggested_extensions",e.RESOURCE_HUB="resource_hub",e.COOPER_TEMPLATE_PICKER="cooper_template_picker",e.SITES_TEMPLATE_PICKER="sites_template_picker",e.EDITOR_COMMUNITY_VIEW="editor_community_view",e))(_||{});let h=i.z.object({resource:u.Q3.optional(),private_plugin:i.Ip.ignore(m.Lz).optional()}),g=new class{constructor(){this.ResourceWithContentIDSchemaValidator=(0,s.YV)("ResourceWithContentIDSchemaValidator",h,null,!0),this.CommunityResourcesSchemaValidator=(0,s.Rq)("CommunityResourcesSchemaValidator",u.Y9,null,!0),this.ResourcesPaginatedQuery=p.M4.PaginatedQuery({fetch:async(e,{pageParam:r})=>{try{let n=await this.CommunityResourcesSchemaValidator.validate(async({xr:n})=>{let a=s.td.toAPIParameters({sort_by:(0,c.H)(),...e,resourceType:e.resourceType&&e.resourceType.join(","),tags:e.tags&&e.tags.join(","),cursor:r,resourceIds:e.resourceIds&&e.resourceIds.join(",")});return await n.getPaginated("/api/resources",a)});return{data:n.data.meta,nextPage:n.data.pagination.nextPage,prevPage:n.data.pagination.prevPage}}catch(e){throw(0,o.$D)(a.e.COMMUNITY,e),e}}}),this.AdminResourceRecommendationsSchemaValidator=(0,s.YV)("CommunityAdminResourceRecommendationsSchema",u._s,null),this.CommunityHomeShelfContentSchemaValidator=(0,s.YV)("CommunityHomeShelfContentSchema",u.Bn,null),this.getHomeShelfContent=p.M4.Query({fetch:({seenResourceIds:e})=>this.CommunityHomeShelfContentSchemaValidator.validate(async({xr:r})=>{try{return await r.get("/api/resources/home_shelf",s.td.toAPIParameters({seenResourceIds:e?.join(",")}),{timeout:1e4})}catch(e){throw(0,o.$D)(a.e.COMMUNITY,e),e}})})}getResourceWithContentID(e){return this.ResourceWithContentIDSchemaValidator.validate(async({xr:r})=>{let{resourceType:n,contentId:a,skipRelatedContent:i}=e;return await r.get(`/api/resources/${d.S[n]}/${a}`,s.td.toAPIParameters({skipRelatedContent:i}))})}likeResource(e){return l.Ay.post(`/api/resource/${e.resourceId}/like`)}unlikeResource(e){return l.Ay.del(`/api/resource/${e.resourceId}/like`)}saveResource(e){return l.Ay.post(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}unsaveResource(e){return l.Ay.del(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}getAdminResourceRecommendations(){return this.AdminResourceRecommendationsSchemaValidator.validate(async({xr:e})=>await e.get("/api/admin/resource/recommendations"))}}},63767:(e,r,n)=>{n.d(r,{G:()=>i});var a=n(795234);let i=new class{constructor(){this.FileUsersSchemaValidator=(0,a.vh)(),this.TeamSchemaValidator=(0,a.vh)(),this.RolesSchemaValidator=(0,a.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},853535:(e,r,n)=>{n.d(r,{B:()=>o,H:()=>s});var a=n(795234),i=n(173847),o=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e.FILE_PERMISSIONS_MODAL="file_permissions_modal",e))(o||{});let s=new class{constructor(){this.UpdateTeamUsersSchemaValidator=(0,a.YV)("UpdateTeamUsersSchemaValidator",i.wF.array(),null)}updateTeamUsers(e){return this.UpdateTeamUsersSchemaValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/team_user_batch`,e))}}},668777:(e,r,n)=>{n.d(r,{q:()=>o});var a=n(795234),i=n(304756);n(677334).M4.Query({fetch:async e=>await o.getNumTemplatesByTeam({teamId:e.teamId,editorType:e.editorType}).then(e=>e.data.meta.total)});let o=new class{constructor(){this.RecentsSchemaValidator=(0,a.vh)(),this.TeamBrowseFromSize10SchemaValidator=(0,a.vh)(),this.SearchPaginatedSchemaValidator=(0,a.vh)(),this.TeamTemplateLimitValidator=(0,a.vh)(),this.TeamTemplateCountValidator=(0,a.vh)(),this.UploadTemplateCoverImage=(0,a.vh)(),this.UpsertTemplateValidator=(0,a.vh)()}getRecents(e){return this.RecentsSchemaValidator.validate(async({xr:r})=>await r.get("/api/templates",{org_id:e.orgId,team_id:e.teamId,file_keys:e.fileKeys}))}getTeamBrowsePaginated(e){return this.TeamBrowseFromSize10SchemaValidator.validate(async({xr:r})=>await r.get(`/api/templates/${e.orgId}/team/${e.teamId}/browse`,a.td.toAPIParameters({from:e.from,size:e.size,templateType:e.templateType})))}getSearchPaginated(e){let{orgId:r,...n}=e;return this.SearchPaginatedSchemaValidator.validate(({xr:r})=>r.get(`/api/templates/${e.orgId}/search`,a.td.toAPIParameters(n)))}getFilteredTeamTemplates(e){let{orgId:r,...n}=e;return i.Ay.post(`/api/templates/${r}/browse`,n)}getTeamTemplateLimitReached(e){return this.TeamTemplateLimitValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/limits`,a.td.toAPIParameters({editorType:e.editorType})))}getNumTemplatesByTeam(e){return this.TeamTemplateCountValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/count`,a.td.toAPIParameters({editorType:e.editorType})))}uploadTemplateCoverImage(e){return this.UploadTemplateCoverImage.validate(({xr:r})=>r.post(`/api/templates/file/${e.fileKey}/upload`))}upsertTemplate(e){let{fileKey:r,payload:n,params:i}=e;return this.UpsertTemplateValidator.validate(({xr:e})=>e.post(`/api/templates/file/${r}`,n,a.td.toAPIParameters({params:i})))}}},41795:(e,r,n)=>{n.d(r,{J4:()=>i,vF:()=>a});var a=(e=>(e[e.INCLUDE=0]="INCLUDE",e[e.CHILDREN=1]="CHILDREN",e[e.OMIT=2]="OMIT",e))(a||{});function i(e){return e&&0===e.inclusion?e:void 0}},684246:(e,r,n)=>{n.d(r,{L:()=>A});var a=n(848318),i=n(301168),o=n(861424),s=n(162796),l=n(309488),c=n(93275),d=n(94766),u=n(544405),p=n(730455),m=n(19180),_=n(672496),h=n(615233),g=n(297638),f=n(967688),E=n(87463),y=n(298386),b=n(995218),v=n(620105),T=n(318147),I=n(446951),S=n(764872);let A=(0,I.Ju)(function({open:e,onClose:r}){let[n,I]=(0,v.y)(),A=(0,o.X)(),w=(0,i.wA)(),C=(0,i.d4)(e=>e.screenreader.errorType),N=(0,b.lg)(),{enhancedContrast:L,color:O,brand:R}=(0,p.GA)(),P=(0,a.useCallback)(()=>{N===T._Y.WHITEBOARD&&S.F2.focusCustomCanvasFocusElement(),r()},[r,N]),D=s.hS({open:e,onClose:P}),k=(0,m.k)().slides_editor_a11y&&N===T._Y.SLIDES,M=(0,h.u4)("a11y_design_dom_mirror",(0,f.t)("fullscreen.accessibility_settings.enable_screenreader_description_design_beta"),(0,f.t)("fullscreen.accessibility_settings.enable_screenreader_description_figjam_beta"));k&&(M=(0,f.t)("fullscreen.accessibility_settings.enable_screenreader_description_slides"));let F=(0,h.u4)("fpl_enhanced_contrast_toggle",{"data-preferred-theme":O,"data-editor-theme":R,"data-enhanced-contrast":""},{}),x=N===T._Y.WHITEBOARD||(0,m.k)().a11y_design_dom_mirror&&N===T._Y.DESIGN||k;return a.createElement(l.bL,{manager:D,width:"md",...F},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,(0,f.tx)("fullscreen.accessibility_settings.dialog_title"))),a.createElement(c.nB,null,a.createElement("div",{className:g.s.pb8.$},x&&a.createElement(d.d,{disabled:"platform_error"===C,checked:n,onChange:(e,{source:r})=>{(0,_.f)(e?_.h.TOGGLE_DOM_ON_MENU:_.h.TOGGLE_DOM_OFF_MENU,{isMouseEvent:"mouse"===r}),I(e)},label:a.createElement(u.J,null,(0,f.tx)("fullscreen.accessibility_settings.enable_screenreader_label")),ref:A},"platform_error"===C?(0,f.t)("fullscreen.accessibility.platform_error"):M,"render_error"===C&&a.createElement("span",{role:"alert",className:g.s.block.mt8.$},a.createElement(E.E,{color:"danger"},(0,f.tx)("fullscreen.accessibility.dom_error")))),(0,m.k)().fpl_enhanced_contrast_toggle&&a.createElement(d.d,{checked:L,onChange:(e,{source:r})=>{(0,_.f)(e?_.h.TOGGLE_ENHANCED_CONTRAST_ON:_.h.TOGGLE_ENHANCED_CONTRAST_OFF,{isMouseEvent:"mouse"===r}),w(y.fK({enhancedContrast:e,userInitiated:!0}))},label:a.createElement(u.J,null,(0,f.tx)("fullscreen.accessibility_settings.enhanced_contrast_label")),ref:A},(0,f.t)("fullscreen.accessibility_settings.enhanced_contrast_description"))))))},"ACCESSIBILITY_SETTINGS",I.ZU.YES)},680655:(e,r,n)=>{n.d(r,{N:()=>l,Y:()=>c});var a=n(19180),i=n(382902),o=n(977543);let s="showFigmentDebugger";function l(e,r){try{if(!(0,a.k)().internal_only_debug_tools||!(0,a.k)().figment_debugger||null==e)return;i.zl.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),i.zl.set(o.eE,!r)}},661699:(e,r,n)=>{n.d(r,{C:()=>o});var a=n(848318);n(865114),n(209595);let i=a.createContext(null);function o(){return a.useContext(i)}},125952:(e,r,n)=>{n.d(r,{az:()=>eT,pw:()=>Q,Ro:()=>ed,w7:()=>ep,CH:()=>em,fZ:()=>et,rE:()=>eI,z6:()=>eu,Sw:()=>j,Pq:()=>W});var a=n(848318),i=n(773511),o=n(78223);n(82433);var s=n(536384),l=n.n(s),c=n(230618),d=n(129170),u=n(720522),p=n(967688),m=n(87463),_=n(17753),h=n(541731);let g="avatar--avatar--fFibd",f="avatar--dim--UbqLc",E="avatar--avatarWithHandle--Z3934",y="avatar--avatarWithOutwardBorder--3JJ57",b="avatar--avatarWithInwardBorder--L469R",v="avatar--clickableAvatarWithHandle--d90vX";var T=n(321914),I=n(666729),S=n(741368),A=n(586295),w=n(197318),C=n(529093),N=n(31844),L=n(795123),O=n(391394),R=n(388456),P=n(900825),D=n(151530),k=n(303995),M=n(842644),F=n(964277),x=n(743990),U=n(690855),B=n(810288),G=n(488285),V=n(296555);let H=[T.A,I.A,S.A,A.A,w.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A,U.A,B.A],z=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],K=[];for(let e=0;e<H.length*z.length;e+=1){let r=e%H.length,n=H[r],a=(e+Math.floor(e/H.length))%z.length,i=z[a];K.push({svgSrc:n,className:i})}function W(e){return e.startsWith("https://www.gravatar.com/avatar/")}function j(e){return e&&!W(e)?e:void 0}let Y={CIRCLE:`${g} avatar--circle--ag36Q`,SQUARE:`${g} avatar--square--p4eL1`,ROUNDED_SQUARE:`${g} avatar--roundedSquare--cq522`};function $(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class q{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let X=new q(65,91),J=new q(97,123),Z=new q(48,58);class Q extends a.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,h.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:i}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${i??n/2}px`);let o=Y[this.props.shape||"CIRCLE"];return a.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:l()(o,this.props.className||"",{[f]:!r,[y]:"outward"===this.props.borderStyle,[b]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class ee extends a.Component{render(){return a.createElement(Q,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function et(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,h.Xx)(e.color);r.fill=n}return a.createElement(Q,{...e},a.createElement("div",{style:r},a.createElement(u.B,{svg:e.svg,autosize:!0,ariaLabel:e.label})))}class er extends a.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=Y[this.props.shape||"CIRCLE"],i=this.props.enabled||!0;return a.createElement(u.B,{className:`${n} ${this.props.className||""} ${i?"":f}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar",ariaLabel:this.props.label})}}class en extends a.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?$(this.props.size)?.fallbackSize:$(this.props.size)?.imgSize,a=`${n}px`;e.width=a,e.height=a,r.width=a,r.height=a}let n=this.props.enabled||!0,i=Y[this.props.shape||"CIRCLE"],o=this.state.loadError||!this.props.imgUrl?this.props.children:a.createElement(c.oW,{"data-testid":"image-avatar",className:`${n?"":f}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:this.props.label??""});return a.createElement("div",{className:l()(i,this.props.className,{[f]:!n,[y]:"outward"===this.props.borderStyle,[b]:"inward"===this.props.borderStyle}),style:r},o)}}let ea=[X,J,Z],ei={colors:h.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:G.A},eo=["fallback_text","handle","name","email"],es=(e,r=ei)=>class extends a.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=eh((this.props.initializableEntityProperties?this.props.initializableEntityProperties:eo).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,h.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),i=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return a.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:i,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class el extends a.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:i,svgSizeRatio:o}=this.props,s=$(e)?.fallbackSize;if(i)return a.createElement(et,{color:this.props.fallbackColor,enabled:this.props.enabled,fontSize:r,label:this.props.label,opacity:this.props.opacity,shape:this.props.shape,size:s,svg:i,svgSizeRatio:o,tint:this.props.fallbackTintColor});if(n)return a.createElement(er,{size:$(e)?.fallbackSize,src:n,shape:this.props.shape,label:this.props.label});if(this.props.hideFallbackInitial)return a.createElement(Q,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?a.createElement(ee,{borderStyle:this.props.borderStyle,className:this.props.className,color:this.props.fallbackColor,enabled:this.props.enabled,fontSize:r,initial:l,shape:this.props.shape,size:$(e)?.fallbackSize,tint:this.props.fallbackTintColor}):this.props.defaultFallbackAvatarSvg?a.createElement(er,{className:this.props.className,size:$(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape,label:this.props.label}):a.createElement(Q,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||W(this.props.imgUrl)?this.renderFallback():a.createElement(en,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle,label:this.props.label},this.renderFallback())}}el.displayName="Avatar";let ec=es(el,{...ei,getInitial:e=>{let r=e.charCodeAt(0);return ea.some(e=>e.contains(r))?e[0]:null}}),ed=ec;function eu({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return a.createElement(ec,{shape:n,entity:e,size:r});let i=(0,h.sC)(e?.id,K);return a.createElement(er,{src:i.svgSrc,size:r,shape:n,className:i.className})}let ep=es(el,{...ei,defaultFallbackAvatarSvg:V.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function em(e){return a.createElement(ep,{shape:"SQUARE",...e})}class e_ extends a.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return a.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&a.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}e_.displayName="AvatarBellWrapper";let eh=(e=[],r="?")=>e.find(e=>e)||r,eg=(e,r)=>class extends a.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`,o=this.props.onClick?i.E:"div";return a.createElement(o,{className:l()(E,this.props.className,{[v]:this.props.onClick,"avatar--disabledDimAvatarWithHandle--5l6cM":this.props.enabled}),onClick:this.onClick,"data-tooltip-proxy-element-id":n,"data-onboarding-key":this.props["data-onboarding-key"]},a.createElement("div",{id:n,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&a.createElement(e,{...this.props,className:void 0})),a.createElement(r,{...this.props}),this.props.children)}};var ef=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(ef||{});let eE={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ey extends a.Component{render(){let{labelSize:e="default"}=this.props,r=eE[e],n=this.props.showTruncatedTextTooltip?a.createElement(m.E,{truncate:!0},this.props.text):a.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),i=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return a.createElement("div",{className:l()("avatar--info--vDGTn",r),title:i},a.createElement("div",{className:l()("avatar--handleRow--0K2-H",E,r,{[v]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&a.createElement("span",{className:l()("avatar--isMe--LeNkH",r)},(0,p.tx)("avatar.tooltip.you")),this.props.badge&&a.createElement(d.Ex,{...this.props.badge}),this.props.isScimUser&&a.createElement(d.Ex,{color:d.zE.DEFAULT,text:(0,p.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&a.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick,title:this.props.emailTitle??void 0},a.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eb=e=>class extends a.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=eh(r,this.props.defaultText),i=this.props.includeUserEmailAddress?this.props.entity.email:null,{title:o,emailTitle:s}=n?{title:`${n}${i?`
${i}`:""}`,emailTitle:null}:{title:null,emailTitle:i},{onEmailClick:l,onLabelClick:c,...d}=this.props;return a.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?o:null,emailTitle:this.props.showTooltip?s:null,onEmailClick:l,onLabelClick:c,...d})}},ev=eb(ey),eT=eg(ec,ev),eI=eg(em,eb(ey));eg(function(){return a.createElement(o.A,{className:"xe5c7bq"})},ev)},97790:(e,r,n)=>{n.d(r,{Id:()=>_});var a=n(848318),i=n(50429),o=n(720522),s=n(967688),l=n(926198),c=n(7373),d=n(125952),u=n(687467),p=n(754897);let m=(e,r={})=>function(n){let d=null==n.size?120:n.size,m=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},_={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},h=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=a.createElement(i.x,{isLoading:h,className:`${u.Lq} ${g}`},()=>a.createElement(e,{size:d,...n})),E=a.createElement("div",{className:`${g} ${n.overlayClass||""}`},a.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||p.A}));return r.withButton?a.createElement("div",{className:`${u.iE} ${u.n1}`,style:_},f,E,a.createElement("div",{className:u.hc,onClick:m},(0,s.tx)("avatar_editor.edit"))):a.createElement("div",{className:`${u.iQ} ${g}`,onClick:m,style:_},f,E)};m(d.Ro);let _=m(d.Ro,{withButton:!0});m(d.CH,{editorShape:"SQUARE",className:u.Ew}),m(d.z6,{editorShape:"SQUARE",className:u.Ew})},541731:(e,r,n)=>{n.d(r,{$L:()=>s,Xx:()=>l,sC:()=>o,us:()=>i});var a=n(728075);let i=[a.w3,a.dV,a.$r,a.JT,a.Me,a.$C,a.Wn];function o(e,r){if(!e)return r[0];try{let n=e.substring(e.length-4),a=parseInt(n);if(Number.isNaN(a))return r[Math.abs(function(e){var r=0;if(0===e.length)return r;for(var n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r&=r;return r}(e)%r.length)];return r[a%r.length]}catch(e){return r[0]}}function s(e,r){return o(e,r)}function l(e){return e===a.$C?"var(--color-textonmultiplayeryellow)":"var(--color-textonmultiplayerblue)"}},688577:(e,r,n)=>{n(848318),n(186606),n(82433),n(382902),n(536384),n(354175),n(898700),n(656329),n(133318),n(264478),n(720522),n(967688),n(259964),n(566287),n(887868),n(600310)},887868:(e,r,n)=>{var a=(e=>(e[e.starterViewOnlySitesBanner=0]="starterViewOnlySitesBanner",e[e.TestThemeBanner=1]="TestThemeBanner",e[e.TestWarningBanner=2]="TestWarningBanner",e[e.TestOOMBanner=3]="TestOOMBanner",e[e.TestInfoBanner=4]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=5]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=6]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=7]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=8]="OrphanedOrgDraftsFile",e[e.TeamAbandonedDraftsFile=9]="TeamAbandonedDraftsFile",e[e.TeamAdminOpenInvoiceReminder=10]="TeamAdminOpenInvoiceReminder",e[e.PersonalProjectDeprecatedFile=11]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=12]="ProTeamPastDue",e[e.ProTeamChargeFailed=13]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=14]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=15]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=16]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=17]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=18]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=19]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=20]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=21]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=22]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=23]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=24]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=25]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=26]="ExternalContentControlBanner",e[e.MemoryWarningBanner=27]="MemoryWarningBanner",e[e.MemoryErrorBanner=28]="MemoryErrorBanner",e[e.MemorySafeBanner=29]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=30]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=31]="FileIsTeamTemplate",e[e.DowntimeBanner=32]="DowntimeBanner",e[e.FreemiumPreviewBanner=33]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=34]="FileCreationFailureBanner",e[e.DevModePaywallBanner=35]="DevModePaywallBanner",e[e.DevModeInTrialBanner=36]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=37]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=38]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=39]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=40]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=41]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=42]="DesktopDeprecationBanner",e[e.LoggedOutCta=43]="LoggedOutCta",e[e.SeatBillingTermsReminder=44]="SeatBillingTermsReminder",e[e.CooperOldFileBanner=45]="CooperOldFileBanner",e[e.InteropPagesBanner=46]="InteropPagesBanner",e[e.ForceClientReload=47]="ForceClientReload",e[e.TemplatePublishingNudgeBanner=48]="TemplatePublishingNudgeBanner",e[e.DevModeDemoFileUpsellBanner=49]="DevModeDemoFileUpsellBanner",e[e.OrderFormBillingTermsBanner=50]="OrderFormBillingTermsBanner",e[e.NonAdminBillingTermsBanner=51]="NonAdminBillingTermsBanner",e[e.OrgDowngradeBanner=52]="OrgDowngradeBanner",e))(a||{}),i=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e.BRAND_STRONG="brand_strong",e.DANGER="danger",e.INFO_SOFT="info_soft",e.FPL_DEFAULT="fpl_default",e.FPL_DANGER="fpl_danger",e.FPL_BRAND="fpl_brand",e.FPL_SUCCESS="fpl_success",e.FPL_WARN="fpl_warn",e))(i||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},474935:(e,r,n)=>{n.d(r,{jn:()=>o}),n(410725);var a=n(318147);n(55116);var i=n(138528);function o(){let e=(0,i.T5)("useIsCurrentTeamProLocked").unwrapOr(null);return!!(e&&e.tier===a.Ag.PRO&&e?.planSubscription?.status===a.UX.SUSPENDED)}},140497:(e,r,n)=>{n.d(r,{FK:()=>g});var a,i,o=n(848318),s=n(536384),l=n.n(s),c=n(656329),d=n(279144),u=n(967688),p=n(318147),m=n(125952),_=n(224306),h=n(410784);function g(e){let r={backgroundClip:c.Ay.safari?"padding-box":""};return e.backgroundColor&&(r.backgroundColor=e.backgroundColor),o.createElement("div",{className:l()(h.nN,e.className,e.removeBorder&&_.ev),onClick:e=>{e.preventDefault()},style:r},o.createElement("div",{className:e.customRatioClassName??_.ll}),o.createElement("div",{className:_.nK},e.children))}o.memo(function(e){return o.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:l()(h.Wg,e.containerStyle)},o.createElement("div",null,e.image),o.createElement("div",{className:e.bottomRowStyle??h.yE},e.bottomRow))}),(e=>{e.Center=function(e){return o.createElement("div",{className:h.pn},e.children)},e.Cover=function(e){return o.createElement("div",{className:h.bh},e.children)},e.BottomLeft=function(e){return o.createElement("div",{className:h.wb},e.children)},e.BottomRowRight=function(e){return o.createElement("div",{className:h.vw},e.children)}})(a||(a={})),(e=>{e.NameAndFileIconMetadata=function(e){let r=o.useMemo(()=>{switch(e.viewerMode){case p.y4.WHITEBOARD:return d.y1.WHITEBOARD;case p.y4.SLIDE_TEMPLATE:return d.y1.SLIDES;case p.y4.CANVAS:case p.y4.LIBRARY:return d.y1.DESIGN;case p.y4.PROTOTYPE:return d.y1.PROTOTYPE;default:return null}},[e.viewerMode]);return o.createElement("div",{className:`${h.QQ} ${e.className}`},o.createElement("div",{className:h.Hw},o.createElement("div",{className:e.textClassName||h.oY},e.name)),r&&o.createElement("div",{className:h.kR},o.createElement(d.w4,{type:r,size:16})))},e.AvatarAndNameMetadata=function(e){let r=e.publishers&&e.publishers.length>0&&e.publishers[0];return o.createElement("div",{className:`${h.QQ} ${e.className}`},r&&o.createElement("div",{className:h.$7},o.createElement(m.Ro,{entity:r,size:32,className:h.ez})),o.createElement("div",{className:h.Hw},o.createElement("div",{className:e.textClassName||h.oY},e.name)))},e.FullMetadata=function(e){if(!e.publishers||0===e.publishers.length)return null;let r=e.publishers.length-1,n=e.publishers.length>1?(0,u.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r}):"";return o.createElement("div",{className:h.QQ,onClick:e.onClick},o.createElement("div",{className:h.$7},o.createElement(m.Ro,{entity:e.publishers[0],size:32,className:h.ez})),o.createElement("div",{className:h.Hw},o.createElement("div",{className:h.ac},e.name),o.createElement("div",{className:e.hoverText?h.Jk:h.Rb},(0,u.t)("community.cards.by")," ",e.publishers[0].name," ",n),e.hoverText&&o.createElement("div",{className:h.yG},e.hoverText)))}})(i||(i={}))},313398:(e,r,n)=>{n.d(r,{bX:()=>w});var a=n(848318),i=n(301168),o=n(41099),s=n(250838),l=n(544405),c=n(19180),d=n(989232),u=n(238462),p=n(304756),m=n(133318),_=n(264478),h=n(509567),g=n(297638),f=n(967688),E=n(900003),y=n(265130),b=n(31898),v=n(261354),T=n(446951),I=n(706488),S=n(414607),A=n(639088);let w=(0,T.Ju)(function(e){let{name:r,user:n,monetizedResource:u}=e,[m,_]=a.useState(!1),[y,T]=a.useState(null),[A,w]=a.useState(""),L=(0,i.wA)(),O=()=>{L((0,b.to)({type:C,data:{user:n}}))},R=()=>{L((0,b.to)({type:N,data:{user:n}}))};return a.createElement(S.Rw,{autoFocusCta:!1,cancelText:(0,f.tx)("general.close"),confirmText:(0,f.tx)("general.confirm"),confirmationTitle:(0,f.tx)("community.buyer.need_a_refund"),content:a.createElement("div",{className:g.s.flexColumn.colorText.$},(0,f.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:a.createElement("span",{className:g.s.fontBold.$},r)}),(0,c.k)().cmty_refund_modal_radio_input_migration?a.createElement("form",{className:g.s.my16.$},a.createElement(o.b,{value:y??void 0,onChange:e=>{T(e)},legend:a.createElement(s.q,null,(0,f.tx)("community.buyer.refund_reason"))},Object.values(v.bG).map(e=>a.createElement(o.c,{key:e,value:e,label:a.createElement(l.J,null,(0,E.vi)(e))}))),y===v.bG.OTHER?a.createElement("div",{className:g.s.mt8.$},a.createElement(I.v,{value:A,onChange:e=>w(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null):a.createElement("div",{className:g.s.my16.$},a.createElement(h.z,{value:y,onChange:e=>{T(e)}},Object.values(v.bG).map(e=>a.createElement(h.Z,{className:g.s.font11.selectNone.$,key:e,value:e},(0,E.vi)(e)))),y===v.bG.OTHER?a.createElement("div",{className:g.s.mt8.$},a.createElement(I.v,{value:A,onChange:e=>w(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null)),disableConfirm:!y,hideOnConfirm:!1,isLoading:m,onConfirm:()=>{_(!0),(0,d.trackEvent)("Request Refund Modal Confirm",{refundReason:y,refundOtherReasonText:A,monetizedResourceMetadataId:u.id}),p.Ay.post(`/api/community/buyer/${u.id}/refund`,{refund_reason:y,refund_other_reason_text:A}).then(()=>{_(!1),L(b.Ce()),O()}).catch(e=>{_(!1),L(b.Ce()),R()})},popStack:!0,size:"small"})},"CommunityRequestRefundModal"),C=(0,T.Ju)(function(e){let{user:r}=e,n=(0,i.wA)();return a.createElement(S.Nb,{size:"small",hide:u.lQ,title:(0,f.t)("community.buyer.refund_requested")},a.createElement(m.s_,{dispatch:n}),(0,f.tx)("community.buyer.keep_an_eye_out",{here:a.createElement(_.CY,{onClick:()=>{(0,y.c9)(r),n(b.Ce())},trusted:!0},(0,f.tx)("community.buyer.here"))}),a.createElement("div",{className:A.v0},a.createElement(_.tM,{onClick:()=>n(b.Ce())},(0,f.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),N=(0,T.Ju)(function(e){let{user:r}=e;return a.createElement(S.Rw,{size:"small",confirmationTitle:(0,f.tx)("community.buyer.unable_to_process_refund"),content:a.createElement("span",{className:g.s.colorText.$},(0,f.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,f.tx)("community.buyer.get_support"),onConfirm:()=>(0,y.oW)(r),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},362148:(e,r,n)=>{n.d(r,{IW:()=>P,fV:()=>O,fp:()=>R});var a=n(848318),i=n(301168),o=n(317720),s=n(82009),l=n(857607),c=n(410725),d=n(439382),u=n(345964),p=n(847240),m=n(720522),_=n(967688),h=n(809543),g=n(858839),f=n(162934),E=n(403253),y=n(672940),b=n(106340),v=n(55116),T=n(603592),I=n(208624),S=n(47054),A=n(312949),w=n(586892),C=n(821527),N=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(N||{});function L(e){return a.createElement("div",{className:A.bx},a.createElement("div",{className:A.Uz},"FILES"===e.tab?(0,_.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,_.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,_.t)("community.universal_posting_modal.resource_empty.widgets_title")),a.createElement("div",{className:A.SL},"FILES"===e.tab?(0,_.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,_.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,_.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function O(e){var r,n,l,c;let d=(0,i.d4)(e=>e.currentUserOrgId),u=(n=(0,s.lP)(d||null),l=a.useMemo(()=>{let e=n.data||[];return o.Qw.loaded(e.filter(e=>e.file?.parentOrgId===d))},[n,d]),c=e.editorTypes,r=a.useMemo(()=>{if(!c||0===c.length)return l;let e=l.data||[];return o.Qw.loaded(e.filter(e=>e.file?.editorType!=null&&c.includes(e.file.editorType)))},[l,c]),a.useMemo(()=>"loaded"!==r.status?[]:r.data.flatMap(e=>null!==e.file?[{type:E.nb.FILE,file:{...e.file,signedPreviewThumbnailUrls:null,UserFileRecentAny:{actionAt:e.actionAt}},sharedWithYouFields:null}]:[]),[r]));return 0===u.length?a.createElement(L,{tab:"FILES"}):a.createElement("div",{className:A.Vg,onClick:e.deselectActiveFile},u.map(r=>{if(r.type!==E.nb.FILE)return null;let{file:n}=r;return e.filterFn&&!e.filterFn(n)?null:a.createElement(D,{key:n.key,file:n,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function R({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:l}){let d=(0,y.FC)(),p=(0,i.d4)(e=>e.authedProfilesById),m=(0,i.d4)(e=>e.figFileDuplicatedFromHubFile),g=a.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,c.p)(v.dDF,g),T=a.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return a.createElement("div",{className:A.g4},a.createElement(u.kt,{size:"small"}));let I=s.filter((e,r)=>e.model.editorType&&(void 0===l||l?.includes(e.model.editorType))&&!(0,f.JJ)(b.F.toSinatra(e.model),T[r].unwrapOr(!1),{...d,authedProfilesById:p,figFileDuplicatedFromHubFile:m},null));return 0===I.length?a.createElement("div",{className:A.bx},a.createElement("div",{className:A.Uz},(0,_.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:a.createElement("span",{className:A.ZF},e)}))):a.createElement("div",{className:A.Vg,onClick:o},I.map(e=>{let i=e.model,o=i.hub_file&&(0,h.r7)(i.hub_file);return a.createElement(D,{key:i.key,file:i,disabled:o,setActiveFile:n,activeFileKey:r})}))}function P(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:s=!0}=e,c=(0,i.wA)(),u=a.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),I.$W.getFullResults({query:r,desc:!0,sort:T.Lk.RELEVANCY,orgId:void 0,isGlobal:!0,searchModelType:T.uH.FILES}).then(({data:{meta:e}})=>{o(e.results.map(e=>({...e,model:{...b.F.toLiveGraph(e.model),fileRepo:e.model.file_repo,fragments:e.model.fragments,owner:e.model.owner}})))}))},[r,c,o]),h=a.useCallback(()=>{n("")},[n]),f=a.useCallback(e=>(e.keyCode===l.Uz.ENTER&&u(),!0),[u]),E=a.useCallback(e=>{n(e)},[n]);a.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=a.useRef(null),{searchInputRef:v,onMouseDown:S,onMouseUp:N,onBlur:L,onClearSearchClick:O,onSearchKeyDown:R,onSearchChange:P}=(0,p.ne)({...e,focusOnMount:!1,clearSearch:h,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return a.createElement("div",{className:A.Tm},a.createElement(m.B,{className:A.qc,svg:w.A}),a.createElement(d.L,{ref:v,className:A.Rt,onBlur:L,onChange:P,onKeyDown:R,onMouseDown:S,onMouseUp:N,placeholder:e.placeholderText??(0,_.t)("community.universal_posting_modal.search_bar.placeholder"),spellCheck:!1,value:r}),!!r&&s&&a.createElement(m.B,{className:A.i3,svg:C.default,onClick:O}))}function D(e){let{file:r,disabled:n,setActiveFile:i,activeFileKey:o}=e,s=a.useMemo(()=>b.F.toSinatra(r),[r]);return a.createElement(S.GQ,{onClick:e=>{e.stopPropagation(),n||i(r)},file:s,subtitle:a.createElement(S.lJ,{file:s}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,_.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},970408:(e,r,n)=>{n.d(r,{Qi:()=>g,U6:()=>f});var a=n(848318),i=n(301168),o=n(637640),s=n(857607),l=n(577888),c=n(453370),d=n(656320),u=n(125952),p=n(167803);let m={underline:p.ah,noUnderline:p.HU};class _ extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=h(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=a.createElement(a.Fragment,null,this.props.showAvatar&&a.createElement("div",{className:this.props.avatarClassName||p.Du},a.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&a.createElement("span",{className:this.props.childrenClassName||p.fh},this.props.publisher.name));return a.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?a.createElement("span",{className:this.props.childrenClassName||p.oY},r):a.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let h=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,i.Ng)((e,r)=>{let n=h(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:m.underline}})(_);function f(e){let r=(0,i.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,i.d4)(e=>(0,d.Np)(e,n));return a.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:p.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,i.Ng)((e,r)=>({hrefView:h(r),hrefPath:(0,d.Np)(e,h(r)),authorLinkStyle:m.underline}))(_)},347242:(e,r,n)=>{n.d(r,{T:()=>b});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(19180),d=n(989232),u=n(63163),p=n(178806),m=n(967688),_=n(533737),h=n(730143),g=n(125761),f=n(446951),E=n(601616),y=n(393328);let b=(0,f.Ju)(function({onAgree:e,onDecline:r,onClose:n,eulasToShow:f,eulaShown:b,...v}){let T=(0,i.wA)(),I=(0,g.iZ)(),S=(0,h.q5)();!function(){let e=(0,g.iZ)(),r=(0,h.q5)();(0,u.h)(()=>{d.definedAnalyticsHandler.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let A=a.useCallback(e=>{d.definedAnalyticsHandler.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:I?.id??void 0,fileTeamId:S?.teamId??void 0,fileParentOrgId:S?.parentOrgId??void 0,fileKey:S?.key,asyncModal:!1})},[S,I]),w=a.useCallback(()=>{A("x"),r?.(),n()},[r,n,A]),C=o.hS({...v,onClose:w,preventUserClose:!1}),N=(0,c.k)();return a.createElement(s.bL,{manager:C,width:600},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,N.dse_sf_pro_font?(0,m.tx)("community.eula.component_license_agreement"):(0,m.tx)("community.eula.license_agreement_v2"))),a.createElement(l.nB,null,a.createElement("div",{style:{maxHeight:"360px"}},N.dse_sf_pro_font?a.createElement("div",{style:{color:"var(--color-text-secondary)",padding:"8px 0px"}},(0,m.tx)("community.eula.subtext.component_license_agreement")):a.createElement("div",{className:y.r},(0,m.tx)("community.eula.license_agreement_preamble")),a.createElement(E.N,null))),a.createElement(l.wi,null,void 0!==f&&void 0!==b&&f>1&&a.createElement("div",null,(0,m.tx)("community.eula.i_of_count",{i:b,count:f})),a.createElement(l.jk,null,a.createElement(p.$z,{onClick:()=>{A("decline"),r?.(),n()},variant:"secondary"},(0,m.tx)("community.eula.disagree")),a.createElement(p.$z,{onClick:()=>{A("accept"),T(_.b({apple_eula_accepted:!0})),e(),n()},variant:"primary"},(0,m.tx)("community.eula.agree"))))))},"APPLE_EULA_MODAL_TYPE",f.ZU.YES)},522258:(e,r,n)=>{n.d(r,{Pn:()=>u});var a=n(848318),i=n(559389),o=n(149841),s=n(967688),l=n(593713),c=n(704410),d=n(336229);let u="seen_community_comments_compose";function p({dismissModal:e}){let r=a.useRef(null),n=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=a.useCallback((0,i.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);a.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=a.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return a.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},a.createElement(o.a,{onIntersectionChange:u}),a.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>a.createElement(p,{...e}),c.q3.SELF_CONTAINED},361420:(e,r,n)=>{n.d(r,{h:()=>W});var a=n(848318),i=n(301168),o=n(989232),s=n(543981),l=n(476254),c=n(857607),d=n(133318),u=n(264478),p=n(720522),m=n(967688),_=n(952039),h=n(718284),g=n(566726),f=n(490970),E=n(31898),y=n(995218),b=n(794025),v=n(732550),T=n(20687),I=n(749682),S=n(324747),A=n(259964),w=n(764474),C=n(17753),N=n(446951),L=n(698429),O=n(102382),R=n(731889),P=n(414607),D=n(138111),k=n(335054),M=n(424197),F=n(645333),x=n(696513);let U=(0,b.M)();var B=(e=>(e.CHOOSE_EDITOR_TYPE="choose_editor_type_step",e.CHOOSE_TEMPLATE="choose_template_step",e.SUCCESS_SCREEN="success_screen_step",e.HIDDEN="hidden",e))(B||{});function G({children:e,onClick:r}){return a.createElement("div",{role:"button",onClick:r,tabIndex:0},e)}function V({resourceType:e,showFigmaDesignOption:r,showFigJamOption:n,showSlidesOption:i,selectedEditorTypes:o,setSelectedEditorTypes:s}){return a.createElement(a.Fragment,null,e===S.bD.PLUGIN?a.createElement(K,{isSelected:o.includes(w.FW.FIGMA)&&o.includes(w.FW.FIGJAM)&&o.includes(w.FW.SLIDES),image:a.createElement(k.A.editorTypes.multiProduct,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_editor_option_multi_product"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_editor_option_multi_product_description"),onSelect:()=>s([w.FW.FIGMA,w.FW.FIGJAM,w.FW.SLIDES])}):a.createElement(K,{isSelected:o.includes(w.FW.FIGMA)&&o.includes(w.FW.FIGJAM),image:a.createElement(k.A.editorTypes.multiProduct,null),titleText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_and_figjam":"community.plugin_development.plugin_creation_editor_option_figma_design_and_figjam"),descriptionText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_and_figjam_description":"community.plugin_development.plugin_creation_editor_option_figma_design_and_figjam_description"),onSelect:()=>s([w.FW.FIGMA,w.FW.FIGJAM])}),r&&a.createElement(K,{isSelected:o.includes(w.FW.FIGMA)&&1===o.length,image:a.createElement(k.A.editorTypes.figmaDesign,null),titleText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design":"community.plugin_development.plugin_creation_editor_option_figma_design"),descriptionText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_description":"community.plugin_development.plugin_creation_editor_option_figma_design_description"),onSelect:()=>s([w.FW.FIGMA])}),n&&a.createElement(K,{isSelected:o.includes(w.FW.FIGJAM)&&1===o.length,image:a.createElement(k.A.editorTypes.figJam,null),titleText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figjam":"community.plugin_development.plugin_creation_editor_option_figjam"),descriptionText:(0,m.t)(e===S.bD.WIDGET?"community.plugin_development.widget_creation_editor_option_figjam_description":"community.plugin_development.plugin_creation_editor_option_figjam_description"),onSelect:()=>s([w.FW.FIGJAM])}),i&&a.createElement(K,{isSelected:o.includes(w.FW.SLIDES)&&1===o.length,image:a.createElement(k.A.editorTypes.slides,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_editor_option_slides"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_editor_option_slides_description"),onSelect:()=>s([w.FW.SLIDES])}))}function H({selectedTemplate:e,setSelectedTemplate:r}){let n=(0,i.d4)(e=>(0,L.$A)(e.selectedView));return a.createElement(a.Fragment,null,n?a.createElement(a.Fragment,null,a.createElement(K,{isSelected:"tab"===e,onSelect:()=>r("tab"),image:a.createElement(k.A.templates.tab,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_tab"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_tab_description")}),a.createElement(K,{isSelected:"codegen"===e,onSelect:()=>r("codegen"),image:a.createElement(k.A.templates.codegen,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_codegen"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_codegen_description")})):a.createElement(a.Fragment,null,a.createElement(K,{isSelected:"empty"===e,onSelect:()=>r("empty"),image:a.createElement(k.A.templates.empty,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_default"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_default_description")}),a.createElement(K,{isSelected:"runOnce"===e,onSelect:()=>r("runOnce"),image:a.createElement(k.A.templates.runOnce,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_run_once"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_run_once_description")}),a.createElement(K,{isSelected:"withUI"===e,onSelect:()=>r("withUI"),image:a.createElement(k.A.templates.withUI,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_with_ui"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_with_ui_description")})))}function z({widgetCreationType:e,setWidgetCreationType:r}){return a.createElement(a.Fragment,null,a.createElement(K,{isSelected:"empty"===e,image:a.createElement(k.A.widgetOptions.empty,null),titleText:(0,m.t)("community.plugin_development.widget_creation_option_default"),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_default_description"),onSelect:()=>r("empty")}),a.createElement(K,{isSelected:"simple"===e,image:a.createElement(k.A.widgetOptions.simple,null),titleText:(0,m.t)("community.plugin_development.widget_creation_option_simple"),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_simple_description"),onSelect:()=>r("simple")}),a.createElement(K,{isSelected:"with_iframe"===e,image:a.createElement(k.A.widgetOptions.withIframe,null),titleText:a.createElement("span",{style:{letterSpacing:"-0.5px"}},(0,m.t)("community.plugin_development.widget_creation_option_with_iframe")),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_with_iframe_description"),onSelect:()=>r("with_iframe")}))}function K({isSelected:e,onSelect:r,image:n,titleText:i,descriptionText:o}){return a.createElement("div",{className:e?M.n0:M.we,onClick:r},a.createElement("div",{className:e?M.pv:M.YJ},a.createElement("div",{className:M.Ow},e?a.createElement(p.B,{svg:x.A}):a.createElement("div",{className:M.lg})),n,a.createElement("div",{className:M.lJ},a.createElement("div",{className:M.Lk},i),a.createElement("div",null,o))))}let W=(0,N.Ju)(function({resourceType:e}){let r=(0,i.wA)(),n=(0,i.d4)(e=>(0,L.$A)(e.selectedView)),[b,N]=a.useState(""),[x,B]=a.useState(-1),[K,W]=(0,s.l)(n?"choose_template_step":"choose_editor_type_step",`${e}_create_flow_change_step`,{productType:(0,T.T)()===w.FW.FIGMA?"design":"whiteboard"}),[j,Y]=a.useState(n?"tab":"runOnce"),[$,q]=a.useState(n?[w.FW.DEV]:[w.FW.FIGMA,w.FW.FIGJAM]),[X,J]=a.useState("simple"),[Z,Q]=a.useState(!1),ee=()=>b.replace(/[^0-9a-zA-Z\.\-\+!%&_ =]/g,"_").trim(),et=async({resourceId:n,template:a})=>{if(""===ee())return r(_.F.enqueue({message:(0,m.t)("community.plugin_development.please_add_some_alphanumeric_text_to_your_resource_name"),error:!0})),null;a.name=ee();try{let i=await ((0,I.Bs)()?U.writeNewExtensionDirectoryToDisk(a):U.writeNewExtensionToDisk(ee(),a.files));if(i)return(0,o.trackEvent)(`Added New ${e}`,{how:"created",[e+"Id"]:n,version:v.pS,isWidget:e===S.bD.WIDGET,productType:(0,T.T)()===w.FW.FIGMA?"design":"whiteboard"}),r(h.QF({localFileId:i,resourceType:e})),i}catch(e){console.error(e)}return r(_.F.enqueue({message:(0,m.t)("community.plugin_development.unable_to_write_resource_to_disk"),error:!0})),null},er=async()=>{if(!b){Q(!0);return}let n="";try{let a=await (0,T.ou)(e);r(g.Qi({publishedPlugins:[a],src:"onGenerateNewClick"})),W("hidden"),n=a.id}catch(e){r(_.F.enqueue({message:(0,m.t)("community.plugin_development.unable_to_generate_resource_id"),error:!0}));return}let a=e===S.bD.PLUGIN?I.d_[j]:I.cj[X],i=await et({resourceId:n,template:a(b,n,$)});null!=i?(W("success_screen_step"),B(i)):r(E.Ce())},en=()=>{r(E.Ce()),(0,f.s)({initialX:0,initialY:0,initialTab:el?"widget"===e?O.p.WIDGETS:O.p.PLUGINS:void 0,initialFdResourceTab:es?"widget"===e?R.s.WIDGET:R.s.PLUGIN:void 0,initialFdView:es?"development":void 0,scrollDevelopmentSectionIntoView:el,source:"extension-new-develompent-modal"})},ea=()=>{U.openExtensionDirectory(x)},ei=(0,i.d4)(e=>"fullscreen"===e.selectedView.view),eo=(0,y.E3)(),es=eo===A.nT.Design||eo===A.nT.DevHandoff,el=eo===A.nT.Whiteboard,ec=eo===A.nT.Slides,ed=!ei||es,eu=!ei||el,ep=!ei||ec,em=e=>{"Enter"===e.key||e.keyCode===c.Uz.ENTER?"choose_editor_type_step"===K?W("choose_template_step"):"choose_template_step"===K?er():"success_screen_step"===K&&en():("Escape"===e.key||e.keyCode===c.Uz.ESCAPE)&&en()},e_=a.createElement(a.Fragment,null,a.createElement(u.$$,{className:M.x6,onClick:er,disabled:""===b},a.createElement("span",{"data-tooltip":e===S.bD.PLUGIN?(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_plugin"):(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_widget"),"data-tooltip-type":""===b?C.Ib.TEXT:null},(0,m.tx)("community.plugin_development.save_as")))),eh=a.createElement("div",null,a.createElement("div",{className:M.aP},(0,m.tx)("community.general.name")),a.createElement(u.ks,{autoFocus:!0,className:M.$O,"data-tooltip":e===S.bD.PLUGIN?(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_plugin"):(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_widget"),"data-tooltip-ignore-mouse":!0,"data-tooltip-key":"plugin-new-development-modal","data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.TEXT,onChange:e=>{e.currentTarget.value&&Z&&Q(!1),N(e.currentTarget.value)},placeholder:e===S.bD.PLUGIN?(0,m.t)("community.plugin_development.plugin_name"):(0,m.t)("community.plugin_development.widget_name"),value:b}),a.createElement(D.$v,{visible:Z,tooltipKey:"plugin-new-development-modal"}));return"choose_editor_type_step"===K?(()=>{let n=ei?M.Qp:M.IO;return a.createElement(G,{onClick:()=>Q(!1)},a.createElement(P.aF,{className:M.re,onKeyDown:em,disableClickOutsideToHide:!0,onModalClick:e=>e.stopPropagation()},a.createElement(d.s_,{dispatch:r}),a.createElement("div",{className:M.gn},a.createElement("div",null,e===S.bD.PLUGIN?(0,m.t)("community.plugin_development.create_plugin"):(0,m.t)("community.plugin_development.create_widget"))),a.createElement("div",{className:M.Bb},eh,a.createElement("div",{className:n},a.createElement(V,{resourceType:e,showFigmaDesignOption:ed,showFigJamOption:eu,showSlidesOption:ep,selectedEditorTypes:$,setSelectedEditorTypes:q}))),a.createElement("div",{className:M.fY},a.createElement("div",{className:M.GT},a.createElement(u.$$,{className:M.x6,onClick:()=>W("choose_template_step")},(0,m.tx)("general.next"))))))})():"choose_template_step"===K?(()=>{let i=n?M.Qp:M.IO;return a.createElement(G,{onClick:()=>Q(!1)},a.createElement(P.aF,{className:M.re,onKeyDown:em,disableClickOutsideToHide:!0},a.createElement(d.s_,{dispatch:r}),a.createElement("div",{className:M.gn},a.createElement("div",null,e===S.bD.PLUGIN?(0,m.tx)("community.plugin_development.create_plugin"):(0,m.tx)("community.plugin_development.create_widget"))),a.createElement("div",{className:M.Bb},eh,a.createElement("div",{className:i},e===S.bD.PLUGIN?a.createElement(H,{selectedTemplate:j,setSelectedTemplate:Y}):a.createElement(z,{widgetCreationType:X,setWidgetCreationType:J}))),a.createElement("div",{className:M.fY},a.createElement("div",{className:M.pn},!(0,L.$A)(l.D.getState().selectedView)&&a.createElement(u.nR,{className:M.x6,onClick:()=>W("choose_editor_type_step")},a.createElement(p.B,{svg:F.A,className:M.Fn}),(0,m.tx)("general.back")),e_))))})():"success_screen_step"===K?(()=>{let n=a.createElement(u.CY,{href:`https://www.figma.com/${e}-docs/`,trusted:!0},(0,m.tx)("community.plugin_development.setup_guide")),i=a.createElement(u.CY,{href:"https://discord.gg/xzQhe2Vcvx",trusted:!0},(0,m.tx)("community.plugin_development.join_our_discord"));return a.createElement(P.aF,{className:M.Tp,onKeyDown:em,disableClickOutsideToHide:!0},a.createElement(d.s_,{dispatch:r}),a.createElement("div",{className:M.WG},a.createElement("div",{className:M.GK},e===S.bD.PLUGIN?(0,m.t)("community.plugin_development.new_plugin_created"):(0,m.t)("community.plugin_development.new_widget_created")),a.createElement("div",{className:M.Bb},a.createElement("span",{className:M.Cb},e===S.bD.PLUGIN?(0,m.tx)("community.plugin_development.follow_our_setup_guide_plugin",{setupGuideLink:n}):(0,m.tx)("community.plugin_development.follow_our_setup_guide_widget",{setupGuideLink:n})),a.createElement("div",{className:M.dH},e===S.bD.PLUGIN?(0,m.tx)("community.plugin_development.connect_with_other_plugin_developers",{joinOurDiscordLink:i}):(0,m.tx)("community.plugin_development.connect_with_other_widget_developers",{joinOurDiscordLink:i}))),a.createElement("div",{className:M.fY},a.createElement("div",{className:M.hG},a.createElement(u.nR,{onClick:ea},(0,m.tx)("community.plugin_development.open_folder")),a.createElement(u.$$,{className:M.x6,onClick:en},(0,m.tx)("general.done"))))),a.createElement("div",{className:M.x9},e===S.bD.WIDGET?a.createElement(k.A.widgetSuccess,null):a.createElement(k.A.pluginSuccess,null)))})():a.createElement(a.Fragment,null)},"PluginNewDevelopmentModal")},508826:(e,r,n)=>{n.d(r,{WW:()=>G});var a=n(848318),i=n(301168),o=n(660376),s=n(989232),l=n(63163),c=n(238462),d=n(279144),u=n(720522),p=n(967688),m=n(352185),_=n(775204),h=n(809543),g=n(550456),f=n(453370),E=n(31898),y=n(511067),b=n(463117),v=n(318147),T=n(138528),I=n(20687),S=n(324747),A=n(259964),w=n(764474),C=n(463783),N=n(442022),L=n(335744),O=n(753474);n(575378);var R=n(884637),P=n(930602),D=n(954184);function k(e,r,n,a){(0,s.trackEvent)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:a})}function M(e,r,n,a,i){n((0,I.Rt)(e)&&a?g.lx({extension:e,fullscreenEditorType:r}):g.aI({resource:e,fullscreenEditorType:r,isPlaygroundFile:i}))}function F(e){return a.createElement("button",{type:"button",className:R.t,onClick:e.onClick,onTouchEnd:r=>{r.preventDefault(),e.onClick&&e.onClick(r)},"data-testid":e.dataTestId},a.createElement("div",{className:R.Z3},a.createElement("div",{className:R.y7},e.icon),a.createElement("div",{className:R.CA},e.text)),e.rightIcon)}function x(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,p.t)("community.using.playground_file"):e.fileIconType===d.y1.WHITEBOARD?(0,p.t)("community.using.figjam_board"):(0,p.t)("community.using.figma_file");return a.createElement(F,{onClick:e.onClick,"data-testid":e.dataTestId,icon:a.createElement("div",{className:R.dD},a.createElement(d.w4,{size:16,type:e.fileIconType})),text:r})}function U(e){let r=(0,i.wA)(),{files:n,resource:s,editorTypes:l}=e,c=(0,_.Jm)(),u=e=>{if(!e.org_id)return;let n=(0,h.qD)(s),a={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:s.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};r((0,E.to)({type:O.S,data:a}))},m=e=>{k(s.id,"existing_file",(0,A.wN)(e.editor_type),c),r(g.aI({resource:s,fullscreenEditorType:e.editor_type===v._Y.DESIGN&&(0,w.Pe)(l)?A.nT.DevHandoff:(0,A.wN)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return n?.length===0?null:a.createElement(a.Fragment,null,a.createElement("div",{className:R.Dh},(0,p.tx)("community.detail_view.recent_files")),a.createElement("div",{className:R.Dr},n?n.map(e=>a.createElement(x,{key:e.key,fileIconType:function(e){switch(e.editor_type){case v._Y.DESIGN:return e.last_published_at?d.y1.PUBLISHED:d.y1.DESIGN;case v._Y.WHITEBOARD:return d.y1.WHITEBOARD;case v._Y.SLIDES:return d.y1.SLIDES;case v._Y.SITES:case v._Y.COOPER:case v._Y.FIGMAKE:return d.y1.DESIGN;default:(0,o.xb)(e.editor_type)}}(e),fileName:e.name,onClick:()=>{r(f.oB()),e.can_run?(0,S.zF)(s)?g.s0(r,()=>m(e)):m(e):e.requests_allowed&&u(e)}})):a.createElement("div",{className:R.d1},[...Array(6)].map((e,r)=>a.createElement("div",{key:r,className:R.iM})))))}function B({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,i.wA)(),l=(0,I.uF)(o),c=(0,_.Jm)(),d=(0,m.AG)();return a.createElement(F,{onClick:()=>{if(!e){let e=!!(l.playground_file_version_id||n===A.nT.DevHandoff);k(o.id,e?"playground":"new_file",n,c),s(f.oB());let r=()=>{M(o,n,s,d,e)};(0,S.zF)(o)?g.s0(s,r):r()}},icon:a.createElement(u.B,{svg:D.A,className:R.K1}),text:r,rightIcon:e?a.createElement(u.B,{svg:P.A,className:R.Yr}):void 0})}function G(e,r,n){let u=(0,i.wA)(),h=(0,y.Um)(),g=h?.type===V&&h.data.resourceId===e.id&&h.data.viewContext===n,E=(0,m.AG)(),S=a.memo(function({primaryFullscreenEditorType:n}){let i=(0,T.T5)("usePluginTrySwitchEditorDropdown").unwrapOr(null),m=i?.figjamDisabledAt??null,y=i?.type===v.OL.ORG?i?.key.parentId:void 0,S=(0,_.Jm)(),[O,P]=a.useState();(0,l.h)(()=>{!async function(){let r=await C.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,s.trackEvent)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:S}),P(r.data.meta.filter(r=>(!(0,I.Rt)(e)||r.org_id===y)&&(r.can_run||r.requests_allowed)).slice(0,6))}()});let D=(0,I.uF)(e),F=D.manifest.editorType?.sort()??[],G=!!D.playground_file_version_id||n===A.nT.DevHandoff,V=Array.from(new Set(F.map(e=>{switch(e){case w.FW.FIGMA:case w.FW.DEV:case w.FW.INSPECT:return n===A.nT.DevHandoff?A.nT.DevHandoff:A.nT.Design;case w.FW.FIGJAM:return m?null:A.nT.Whiteboard;case w.FW.SLIDES:return A.nT.Slides;case w.FW.SITES:return null;default:(0,o.xb)(e)}}))).filter(e=>null!=e),H=V.map(r=>({displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>a.createElement(x,{fileIconType:function(e){switch(e){case A.nT.Design:return d.y1.DESIGN;case A.nT.Whiteboard:return d.y1.WHITEBOARD;case A.nT.DevHandoff:return d.y1.DESIGN;case A.nT.Slides:return d.y1.SLIDES;case A.nT.Sites:case A.nT.Figmake:case A.nT.Cooper:case A.nT.Illustration:return d.y1.DESIGN;default:(0,o.xb)(e)}}(r),onClick:()=>{k(e.id,"new_file",r,S),u(f.oB()),M(e,r,u,E,!1)}})})),z={displayText:(0,p.t)("community.using.new_file"),className:R.pz,preventDismissOnSelected:!0,render:()=>a.createElement(B,{hasSecondaryDropdown:H.length>1,text:(0,p.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:H.length>1?H:void 0},K={displayText:(0,p.t)("community.using.playground_file"),className:R.pz,preventDismissOnSelected:!0,render:()=>a.createElement(B,{hasSecondaryDropdown:!1,text:(0,p.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,b.U3)("resize",()=>{g&&u(f.oB())});let W=(()=>{let r=[];if(void 0===O||O.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>a.createElement(U,{files:O,resource:e,editorTypes:F})});else if(!G&&V.length>1)return H;return G?r.push(K):r.push(z),r})();return a.createElement(N.j,{autoHeight:!0,className:R.qN,dispatch:u,hidePointWhenContentOffScreen:!0,items:W,lean:r,minWidth:280,onSelectItem:c.lQ,parentRect:h?.data.targetRect,rootAndSubmenuMaxWidth:280,showPoint:!1,subMenuClassName:R._3,type:L.it.MATCH_BACKGROUND})});return{dropdownIsShown:g,toggleSwitchEditorDropdown:(r,a)=>{let i=r.current?.getBoundingClientRect();i&&((void 0!==a?a:!g)?u(f.j7({type:V,data:{resourceId:e.id,viewContext:n,targetRect:i}})):u(f.oB()))},PluginTrySwitchEditorDropdown:S}}let V="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},414864:(e,r,n)=>{n.d(r,{KM:()=>p,YJ:()=>g,fJ:()=>h,x5:()=>m});var a=n(848318),i=n(536384),o=n.n(i),s=n(297638),l=n(967688),c=n(696786),d=n(656954),u=n(70909),p=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(p||{});let m=["publish","data_security","permissions"],_=[{tab:m[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:m[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:m[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:d.k,isVisible:()=>!0}];function h(e){let r=(0,c.GS)();return a.createElement("div",{className:e.tab===e.selectedTab?o()(u.xR,{[u.E3]:r}):o()(u.Mf,{[u.E3]:r}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function g(e){return a.createElement("div",{className:s.s.flex.itemsCenter.$,role:"tablist"},_.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?a.createElement(h,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},877686:(e,r,n)=>{n.d(r,{X$:()=>i,YW:()=>s,ab:()=>l,ho:()=>o,ox:()=>c});var a=n(3649);function i(e,r){return new a.Tg({resourceId:e,urlSlug:r}).href}function o(e,r){return new a.ax({apiResourceType:a.Uo.PLUGIN,resourceId:e,urlSlug:r}).href}function s(e,r){return new a.ax({apiResourceType:a.Uo.WIDGET,resourceId:e,urlSlug:r}).href}function l(e,r){return new URL(o(e,r),location.href).href}function c(e,r){return new URL(s(e,r),location.href).href}},575378:(e,r,n)=>{n.d(r,{dn:()=>D,li:()=>a});var a,i=n(848318),o=n(4564),s=n(872247),l=n(465440),c=n(341483),d=n(966260),u=n(586471),p=n(775402),m=n(476963),_=n(68955),h=n(502456),g=n(720522);n(297638);var f=n(967688),E=n(805608),y=n(933614),b=n(764474),v=n(17753),T=n(452765),I=n(358654),S=n(689688),A=n(844625),w=n(309527),C=n(43986),N=n(545324),L=n(502369),O=n(84263),R=n(662754),P=n(903292);function D({editorType:e,is16x16:r,isPlaygroundFileInsertBadge:n}){if(!e)return null;let a=T.$E;if(r?a=T.cL:n&&(a=T.is),!(e instanceof Array))return k(e,a,r);if(e.includes(b.FW.FIGMA)&&e.includes(b.FW.FIGJAM)&&(0,b.Pe)(e))return i.createElement(g.B,{svg:r?R.A:P.A,className:a,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.universal"),dataTestId:"editor-type-badge-universal"});if(e.includes(b.FW.FIGMA)&&e.includes(b.FW.FIGJAM))return i.createElement(g.B,{svg:r?L.A:O.A,className:a,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_figma_design_and_figjam"),dataTestId:"editor-type-badge-figma-figjam"});if(e.includes(b.FW.FIGMA)&&(0,b.Pe)(e))return i.createElement(g.B,{svg:r?C.A:N.A,className:a,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.figma_design_and_dev_mode"),dataTestId:"editor-type-badge-figma-devmode"});if(e.includes(b.FW.FIGJAM)&&(0,b.Pe)(e))return i.createElement(g.B,{svg:r?A.A:w.A,className:a,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_fig_jam_and_dev_mode"),dataTestId:"editor-type-badge-figjam-devmode"});let o=e[0];return o?k(o,a,r):null}function k(e,r,n){switch(e){case b.FW.FIGJAM:case y.LE.FIGJAM:case E.q.WHITEBOARD:return i.createElement("div",{className:r,"data-testid":"editor-type-badge-figjam","data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_fig_jam")},n?i.createElement(o.j,null):i.createElement(s.C,null));case b.FW.FIGMA:case y.LE.FIGMA:case E.q.DESIGN:return i.createElement("div",{className:r,"data-testid":"editor-type-badge-figma","data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_figma_design")},n?i.createElement(l.H,null):i.createElement(c.e,null));case b.FW.INSPECT:case b.FW.DEV:case E.q.DEV_HANDOFF:return i.createElement(g.B,{svg:n?I.A:S.A,className:r,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.dev_mode_only"),dataTestId:"editor-type-badge-devmode"});case y.LE.SLIDES:case E.q.SLIDES:case b.FW.SLIDES:return i.createElement("div",{className:r,"data-testid":"editor-type-badge-slides","data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_slides")},n?i.createElement(d.p,null):i.createElement(u.K,null));case E.q.SITES:return i.createElement("div",{className:r,"data-testid":"editor-type-badge-sites","data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_sites")},n?i.createElement(p.v,null):i.createElement(m.k,null));case E.q.COOPER:return i.createElement("div",{className:r,"data-testid":"editor-type-badge-cooper","data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("community.detail_view.made_for_buzz")},n?i.createElement(_._,null):i.createElement(h.B,null));default:return null}}(e=>{e.IconAndBadgeContainer=function({children:e,className:r}){return i.createElement("div",{className:T.G+(r?` ${r}`:"")},e)},e.BadgeContainer=function({children:e,fromBrowseResourceModal:r,resourceType:n}){let a=T.Wv;return r&&"plugin"===n?a=T.p2:r&&"widget"===n&&(a=T.QF),i.createElement("div",{className:a},e)}})(a||(a={}))},990652:(e,r,n)=>{n.d(r,{H:()=>p});var a=n(848318),i=n(301168),o=n(967688),s=n(823898),l=n(566726),c=n(324747),d=n(446951),u=n(414607);let p=(0,d.Ju)(function({plugin:e}){let r,n,d,p;let m=(0,i.wA)(),_=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),h=()=>{m(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:_,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:_}),d=(0,o.t)("community.plugins.withdraw"),p=()=>{e.roles.org?m(l.zn({pluginId:e.id,role:e.roles})):h()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:_}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:_}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:_}),d=(0,o.t)("community.resource.unpublish")),p=h),a.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:p,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,enableEscapeToClose:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},889630:(e,r,n)=>{n(947239),n(988402),n(320953),n(19180),n(989232)},848180:(e,r,n)=>{n(947239);var a=n(755595);n(642935),n(889630),n(883079);var i=(e=>(e.GOOGLE="google",e.OPENAI="openai",e))(i||{});a.z.object({suggestions:a.z.array(a.z.object({propertyName:a.z.string().describe("Name of the property on the component that you are modifying"),propertyValue:a.z.string().describe("Suggested value for the property"),confidence:a.z.number().min(0).max(1).describe("Confidence score between 0 and 1")}))})},307986:(e,r,n)=>{n(848318),n(947239),n(988402),n(19180),n(996202),n(730143),n(848180),n(182317),n(304756),n(867499),n(883079)},870545:(e,r,n)=>{n.d(r,{fu:()=>o,xB:()=>i}),n(848318),n(938982),n(768618),n(19180);var a=n(382902);n(989232),n(865114),n(615233),n(508328),n(998568),n(227276),n(540698),n(42725),n(145951),n(748790),n(889630),n(848180),n(307986);let i=(0,a.eU)(null),o=(0,a.eU)(void 0)},883079:(e,r,n)=>{n(186606),n(307650)},42725:(e,r,n)=>{n.d(r,{B_:()=>V,Fv:()=>j,Pp:()=>F,Ql:()=>G,Rq:()=>Q,T1:()=>ee,Xp:()=>en,Yi:()=>$,ZH:()=>q,_P:()=>W,aO:()=>J,dl:()=>U,eM:()=>B,f3:()=>X,fx:()=>er,k4:()=>Y,lg:()=>et,qe:()=>D,ui:()=>K,wd:()=>z,wh:()=>O,xP:()=>H,xb:()=>x,zn:()=>M});var a=n(848318),i=n(272392),o=n(466539),s=n(856125),l=n(234188),c=n(774038),d=n(30552),u=n(893731),p=n(9106),m=n(347857),_=n(229382),h=n(552694),g=n(521699),f=n(988402),E=n(186606);n(19180);var y=n(989232),b=n(88217),v=n(967688),T=n(360430),I=n(489082),S=n(925144),A=n(839808),w=n(213162),C=n(275646),N=n(754946),L=n(911168);let O=304;var R=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(R||{}),P=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(P||{});function D(e){switch(e){case E.J0O.BOOL:return C.A;case E.J0O.NUMBER:return L.A;case E.J0O.TEXT:return w.A;case E.J0O.INSTANCE_SWAP:return A.A;case E.J0O.IMAGE:return N.A;case E.J0O.SLOT:return A.A}}let k={[E.J0O.BOOL]:{SIZE_24_SMALL:i.$,SIZE_16:o.X},[E.J0O.TEXT]:{SIZE_24_SMALL:s.p,SIZE_16:l.T},[E.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.V,SIZE_16:d.m},[E.J0O.NUMBER]:{SIZE_24_SMALL:u.O,SIZE_16:p.c},[E.J0O.IMAGE]:{SIZE_24_SMALL:m.s,SIZE_16:_._},[E.J0O.SLOT]:{SIZE_24_SMALL:h.h,SIZE_16:g.R}};function M(e,r=!1){let n=k[e][r?"SIZE_16":"SIZE_24_SMALL"];return a.createElement(n,null)}function F(e,r,n,a){e&&(0,y.trackEvent)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:E.J0O[n],source:a})}function x(e){switch(e){case E.J0O.BOOL:return(0,v.t)("design_systems.component_properties.boolean");case E.J0O.TEXT:return(0,v.t)("design_systems.component_properties.text");case E.J0O.INSTANCE_SWAP:return(0,v.t)("design_systems.component_properties.instance_swap");case E.J0O.VARIANT:return(0,v.t)("design_systems.component_properties.variant");case E.J0O.NUMBER:return(0,v.t)("design_systems.component_properties.number");case E.J0O.IMAGE:return(0,v.t)("design_systems.component_properties.image");case E.J0O.SLOT:return(0,v.t)("design_systems.component_properties.slot")}}function U(e,r){if((0,I.gl)(r))return I.oV;if(r&&"object"==typeof r&&"type"in r&&r.type===E.Z_n.ALIAS)return r;switch(e){case E.J0O.BOOL:return"true"===r;case E.J0O.IMAGE:case E.J0O.TEXT:case E.J0O.INSTANCE_SWAP:case E.J0O.NUMBER:case E.J0O.SLOT:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function B(e){switch(e){case f.RR.VISIBLE:return{defaultType:E.J0O.BOOL,types:[E.J0O.BOOL]};case f.RR.TEXT:return{defaultType:E.J0O.TEXT,types:[E.J0O.TEXT,E.J0O.NUMBER]};case f.RR.OVERRIDDEN_SYMBOL_ID:return{defaultType:E.J0O.INSTANCE_SWAP,types:[E.J0O.INSTANCE_SWAP]};case f.RR.SLOT_CONTENT_ID:return{defaultType:E.J0O.SLOT,types:[E.J0O.SLOT]}}}function G(e){switch(e){case E.J0O.BOOL:return!0;case E.J0O.TEXT:return"";case E.J0O.INSTANCE_SWAP:return null;case E.J0O.VARIANT:return(0,v.t)("design_systems.states_panel.default_property_value");case E.J0O.NUMBER:return"0";case E.J0O.IMAGE:return null}}function V(e,r){switch(e){case E.J0O.INSTANCE_SWAP:return!!r;case E.J0O.TEXT||E.J0O.VARIANT:return!!r?.length;case E.J0O.NUMBER:return Q(r);default:return!0}}function H(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function z(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:a}=(0,S.nD)(new Set(e),r);return a&&(0,I.hS)(a)?r.get(a):n&&(0,I.hS)(n)?r.get(n):I.oV}function K(e,r,n){return(0,T.Oo)(e,n)?E.glU.getDefaultStateForLocalStateGroup(r):E.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function W(e){if(e)try{return new URL(e).hostname}catch(e){}}var j=(e=>(e.PILL="pill",e.ICON="icon",e))(j||{});function Y(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(e){if(e.isInstance){let r=e.symbolId;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeInstance){let r=e.backingCodeComponent?.guid;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}}}return n}}function $(e,r){let n;if(e.length){for(let a of e){let e=r.get(a);if(!e||"INSTANCE"!==e.type)continue;let i=e.symbolId;if(!i)continue;let o=r.get(i);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function q(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,b.iR)(e,new Set(r[n].hiddenProps)):e,n)}function X(e,r){return e?r[e]?.componentPropDefError??E.uXg.NONE:E.uXg.NONE}function J(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let Z=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function Q(e){if(!Z.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function ee(e){return Q(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function et(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function er(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return f.RR.TEXT;case"VISIBLE":return f.RR.VISIBLE;default:return}}let en={[E.J0O.BOOL]:{variableType:E.rXF.BOOLEAN,requestedTypes:[E.rXF.BOOLEAN],variableScope:E.j0r.ALL_SCOPES},[E.J0O.TEXT]:{variableType:E.rXF.TEXT_DATA,requestedTypes:[E.rXF.STRING],variableScope:E.j0r.TEXT_CONTENT},[E.J0O.NUMBER]:{variableType:E.rXF.FLOAT,requestedTypes:[E.rXF.FLOAT],variableScope:E.j0r.ALL_SCOPES}}},184226:(e,r,n)=>{n.d(r,{s:()=>i});var a=n(489082);function i(e,r,n){if(!e)return{};let i={};for(let o of r){let r=e[o]?.stateVariantProps?.propertyValues;if(r)for(let e of n)e in i&&i[e]!==r[e]?i[e]=i[e]&&r[e]?a.oV:"":i[e]=r[e]||""}return i}},394077:(e,r,n)=>{n.d(r,{pN:()=>o});var a=n(988402),i=n(614092);function o(e){return(0,i.Fk)((e,r)=>{let n=e.get(r);return n?function(e){if(!e.isSlotReactive)return null;let r=e.componentPropsJsonForNode,n=r[e.guid];if(!n)return null;let i=n.correspondingSymbolSublayer??e.guid,o=n.containingInstanceBackingSymbol??n.containingComponent;if(!i||!o)return null;let s=r[i]?.refs?.[a.RR.SLOT_CONTENT_ID];return s&&s.isLinked?r[o]?.defs?.[s.explicitDefID]??null:null}(n):null},e)}},145951:(e,r,n)=>{n(848318),n(301168),n(186606),n(553547),n(19180),n(349048),n(489082),n(700436),n(42725),n(184226),n(499025),n(417338)},894751:(e,r,n)=>{n.d(r,{J0:()=>S,Kn:()=>P,_A:()=>N,bq:()=>M,dl:()=>F,fN:()=>I,i0:()=>k,wS:()=>U,xP:()=>D});var a=n(848318),i=n(301168),o=n(988402),s=n(186606),l=n(19180),c=n(349048),d=n(925040),u=n(151223),p=n(813147),m=n(277454),_=n(535884),h=n(339716),g=n(144487),f=n(720722),E=n(17753),y=n(877765),b=n(944239),v=n(499025);function T(e){return e===s.J0O.INSTANCE_SWAP||!!(0,l.k)().dse_slots&&e===s.J0O.SLOT}let I=e=>["preferredValuesInstancePicker",...e],S=e=>({"data-tooltip-type":E.Ib.TEXT,"data-tooltip-show-left":!0,...(0,y.pf)(e)}),A=()=>{},w=new Promise(e=>{A=e});function C(){A(),w=new Promise(e=>{A=e})}let N=e=>`GET_MISSING_PREFERRED_PRODUCT_COMPONENTS_FOR_${e}`,L=(e,r)=>({callback:A,promise:w,resetPromise:C,loadingKey:N(e.getState().openFile?.key),callbackForComponent:r}),O=(0,u.nF)((e,{stateGroupKeys:r,componentKeys:n,callback:a})=>{p.tL(n,r,e,L(e,a))}),R=()=>(0,d.Mz)([_.Qp,(e,r)=>r],(e,r)=>{let n=[],a=[];return r.forEach(r=>{let i=e[r.key];i?n.push(i):a.push(r)}),{preferredProductComponents:n,missingValues:a}});var P=(e=>(e.ADD="ADD",e.REMOVE="REMOVE",e))(P||{});function D(e){let r=(0,c.k9)(()=>{var r,n;return T(e?.type)?(r=e.type,n=e.preferredValues,T(r)?n.filter(e=>"key"in e&&"string"==typeof e.key&&"type"in e&&e.type in s.fOf):[]):[]},[e]),n=(0,i.d4)(h.aR),l=(0,a.useMemo)(()=>r.map(e=>{let r=n[e.key];return r?{type:e.type,key:r}:e}),[n,r]),d=(0,a.useMemo)(R,[]),{preferredProductComponents:u,missingValues:p}=(0,i.d4)(e=>d(e,l)),_=(0,i.wA)(),g=(0,a.useRef)(new Set),[E,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(0),I=(0,a.useCallback)(()=>v(e=>e+1),[]);return(0,a.useEffect)(()=>{let e=[],r=[];p.forEach(n=>{g.current.has(n.key)||(n.type===s.fOf.COMPONENT?e.push(n.key):r.push(n.key))}),e.length>0||r.length>0?_(O({componentKeys:e,stateGroupKeys:r,callback:n=>{n?([...e,...r].forEach(e=>g.current.add(e)),y(!1)):y(!0)}})):y(!1)},[p,_,b]),{preferredValues:u,togglePreferredValues:(0,a.useCallback)((a,i)=>{if(e&&e.kind===o.uN.TYPED){let o=[...r];a.forEach(e=>{let r=(0,m.CG)(e),a=o.findIndex(e=>e.key===r||n[e.key]===r);-1!==a&&"ADD"!==i?o.splice(a,1):-1===a&&"REMOVE"!==i&&o.push({key:r,type:e.type===f.PW.COMPONENT?s.fOf.COMPONENT:s.fOf.STATE_GROUP})}),Object.keys(n).length>0&&o.forEach((e,r)=>{let a=n[e.key];a&&(o[r].key=a)}),s.glU.editInstanceSwapPreferredValues(e.explicitDefID,o)}},[e,n,r]),handleSetPreferredValues:(0,a.useCallback)(r=>{if(e?.kind!==o.uN.TYPED)return;let a=r.map(e=>{let r=(0,m.CG)(e);return{key:n[r]??r,type:e.type===f.PW.COMPONENT?s.fOf.COMPONENT:s.fOf.STATE_GROUP}});s.glU.editInstanceSwapPreferredValues(e.explicitDefID,a)},[e,n]),preferredValuesFetchError:E,retryPreferredValuesFetch:I}}function k(e,r){let n=(0,i.d4)(_.FZ),o=(0,i.d4)(g.c5),[s,l]=(0,a.useState)(()=>{let a=[];if("string"==typeof e){let i=(0,m.NY)(e,r,n,o);i&&a.push(i)}return a});return[s,l]}function M(e){return(0,a.useCallback)((r,n)=>{e(e=>{let a=[...e];return r.forEach(e=>{let r=(0,m.CG)(e),i=a.findIndex(e=>r===(0,m.CG)(e));i>-1&&"ADD"!==n?a.splice(i,1):-1===i&&"REMOVE"!==n&&a.push(e)}),a})},[e])}function F(e){return(0,a.useCallback)(r=>{e([...r])},[e])}let x=(0,b.n)(e=>(!!e.component_key||!!e.key)&&!e.unpublished_at);function U(e){let r=(0,i.d4)(v.Lg),n=(0,i.d4)(_.FZ),o=(0,a.useMemo)(()=>!!r&&x(n[r]??{}),[r,n]);return(0,c.k9)(()=>o?new Set(e.filter(e=>!x(e)).map(e=>e.node_id)):new Set,[o,e])}},839407:(e,r,n)=>{n.d(r,{Yc:()=>A,yQ:()=>w});var a=n(848318),i=n(301168),o=n(774038),s=n(988402),l=n(813009),c=n(781239),d=n(401970),u=n(967688),p=n(453370),m=n(31898),_=n(511067),h=n(17753),g=n(52463),f=n(16808),E=n(95628),y=n(42725),b=n(657948),v=n(499025),T=n(105857),I=n(731035);let S=e=>e.stopPropagation();function A(e,r){let n=a.useMemo(T.On,[]),i=a.useMemo(v.Ms,[]),{containingProductComponent:o,defReferencedBySelection:c,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,l.R)(a=>{let o=(0,v.Lg)(a),s=o?a.mirror.sceneGraph.get(o):null,l=i(a,r);return{containingProductComponent:s,defReferencedBySelection:n(a,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,v.Ln)(a)}});return!a.useMemo(()=>!!o?.guid&&!d&&(!u||e!==s.RR.VISIBLE),[o,d,u,e])||!!c}function w({nodeField:e,defaultValue:r,guids:n}){let s=a.useRef(null),w=A(e,n),C=function(e){let r=(0,l.R)(e=>e.modalShown),n=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]),i=E.sD.concat("-",e),o=(0,_.Um)(),s=!!o&&o.type===i&&o.data.nodeField===e,c=!!r&&r.type===b.n.type&&r.data?.propType===n;return s||c}(e),N=function(e,r,n,o){let s=(0,i.wA)(),c=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]),d=a.useMemo(T.p1,[]),{containingProductComponent:u,hasExistingDefs:_}=(0,l.R)(r=>{let n=(0,v.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!d(r,n,e).length}});return a.useCallback(()=>{if(r?.current){if(_)s(p.j7({type:E.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}}));else{(0,y.Pp)(u,!0,c,y.Fv.ICON);let a=r.current,i=a?(0,g.cn)(a,y.wh):{};s(m.to({type:b.n,data:{prePopulatedDefaultValue:n,propType:c,refField:e,initialX:i?.x??0,initialY:i?.y??0}}))}}},[r,_,void 0,s,e,u,c,n])}(e,s,r),L=function(e){let r=a.useMemo(T.p1,[]),{hasExistingDefs:n}=(0,l.R)(n=>{let a=(0,v.Lg)(n);return{hasExistingDefs:!!r(n,a,e).length}}),i=a.useMemo(()=>(0,y.eM)(e).defaultType,[e]);return n?(0,u.t)("design_systems.component_properties.apply_component_property",{propType:(0,y.xb)(i).toLocaleLowerCase()}):(0,u.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,y.xb)(i).toLocaleLowerCase()})}(e);return w?null:a.createElement(a.Fragment,null,a.createElement("div",{ref:s},a.createElement(f.YW,{recordingKey:c.Pt("applyPropRefButton",e),selected:C,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":L,onMouseDown:S,onClick:N},a.createElement(d.U,{svg:I.A},a.createElement(o.V,null)))),a.createElement(E.Xn,{source:y.Fv.ICON,nodeField:e,newPropDefaultValue:r}))}},308422:(e,r,n)=>{n.d(r,{L:()=>J});var a=n(848318),i=n(301168),o=n(262989),s=n(762217),l=n(658029),c=n(400233),d=n(315696),u=n(981637),p=n(150934),m=n(988402),_=n(186606),h=n(320953),g=n(536384),f=n.n(g),E=n(410441),y=n(813009),b=n(781239),v=n(156974),T=n(119244),I=n(401970),S=n(994924),A=n(967688),w=n(62314),C=n(453370),N=n(696786),L=n(702038),O=n(200300),R=n(700436),P=n(17753),D=n(232084),k=n(699848),M=n(419756),F=n(749211),x=n(95628),U=n(42725),B=n(499025),G=n(105857),V=n(27776),H=n(246565),z=n(435789),K=n(985908),W=n(388041),j=n(546131);let Y=v.ms,$=v.c$,q="component-prop-pill-dropdown",X=e=>{e.preventDefault(),e.stopPropagation()};function J(e){let r;let{nodeField:n,currentValue:l,instanceGUIDs:d,label:u}=e,p=(0,N.GS)(),h=a.useMemo(G.en,[]),g=a.useContext(M.p),{containingProductComponentGUID:v,containingInstanceGUID:D,def:k,selectionHasInstanceSublayer:z,zombieRefNameFromSelection:K,dropdownShown:j}=(0,y.R)(e=>{let r=(0,R.Sh)(e);return{containingProductComponentGUID:(0,B.Lg)(e),containingInstanceGUID:(0,B.UR)(e),def:h(e,d??r,n),selectionHasInstanceSublayer:(0,B.PY)(e),zombieRefNameFromSelection:(0,G.pN)(e,n),dropdownShown:e.dropdownShown}}),X=(0,i.wA)(),J=a.useCallback(e=>{v&&k&&X(C.j7({type:q,data:{position:{top:e.clientY,left:Math.min(e.clientX,window.innerWidth-(0,E.hG)(V.uj0)/2)}}}))},[v,k,X]),en=a.useRef(null),ea=x.sD.concat("-",n),ei=a.useRef(null),eo=b.rf(`propPill.${n}`,"click",()=>{!z&&k&&ei.current&&(ei.current&&(n===m.RR.TEXT||n===m.RR.VISIBLE)?g?.showBindingUI(ei.current):X(C.j7({type:ea,data:{nodeField:n,targetRect:ei.current.getBoundingClientRect()}})))}),es=a.useCallback(()=>{let e=k?.explicitDefID;v&&e&&(L.wr(),L.Dh([v]),X(w.n0({propDefId:e})))},[v,k,X]),el=j?.type===q,ec=(0,O.o3)(O.nt.variablePillA11y)&&p,ed=a.useRef(null),eu=(0,o.R)(ed);if(!k)return null;let ep=v?(0,A.t)("design_systems.component_properties.link_unlinked_property_help_text"):(0,A.t)("design_systems.component_properties.unlinked_property_help_text");k?.type===_.J0O.BOOL?r="BOOLEAN":k?.type===_.J0O.TEXT?r="STRING":k?.type===_.J0O.NUMBER&&(r="FLOAT");let em=a.createElement(T.a,{className:f()({[H.Q_]:z,[H.LC]:!z,[H.RH]:j?.type===ea,[H.YM]:k?.type===_.J0O.INSTANCE_SWAP}),onClick:eo,pillRef:ei},a.createElement("div",{ref:en},k?a.createElement(I.U,{svg:(0,U.qe)(k.type)},r?a.createElement("div",{className:H.K8},a.createElement(F.i,{type:r})):a.createElement("div",null)):a.createElement("div",{"data-testid":"zombie-prop-icon"},a.createElement(I.U,{svg:W.A},a.createElement(c.G,null)))),a.createElement("p",{className:H.Me},k?.name??K)),e_=a.createElement(s.o,{eventListeners:["onMouseDown"]},a.createElement("div",{className:H.V_,"data-tooltip-type":P.Ib.TEXT,"data-tooltip-offset-x":(()=>{if(en.current&&ei.current)return en.current.offsetLeft+en.current.offsetWidth/2-(ei.current.offsetLeft+ei.current.offsetWidth/2)})(),"data-tooltip":k?k&&eu?k.name:null:ep,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0,ref:ed},em)),eh=a.createElement(Z,{containingInstanceGUID:D,containingProductComponentGUID:ec?v:void 0,propDefId:k?.explicitDefID}),eg=a.createElement(Q,{nodeField:n}),ef=a.createElement(ee,{nodeField:n,zombieRefNameFromSelection:K,currentValue:l}),eE=a.createElement(er,{goToPropertyButton:eh,detachPropertyButton:eg,addPropertyButton:ef,selectionHasInstanceSublayer:z,containingProductComponentGUID:v,zombieRefNameFromSelection:K}),ey=a.createElement(et,{input:e_,ui2RefButton:eE,goToPropertyButton:eh,detachPropertyButton:eg,addPropertyButton:ef,selectionHasInstanceSublayer:z,containingProductComponentGUID:v,zombieRefNameFromSelection:K,def:k,onContextMenu:J,nodeField:n,label:u}),eb=a.createElement(S.n.div,{className:H.t$,onContextMenu:J,"data-test-id":"component-prop-pill"},e_,eE);return a.createElement(a.Fragment,null,p?ey:eb,el&&!ec&&a.createElement(Y,{style:j?.data.position,positionFixed:!0},a.createElement($,{onClick:es,recordingKey:"go-to-property"},(0,A.tx)("design_systems.component_properties.go_to_property"))),a.createElement(x.Xn,{source:U.Fv.PILL,nodeField:n,iconWidth:en?.current?en.current.getBoundingClientRect().width/2+10:void 0}))}function Z(e){let{containingInstanceGUID:r,containingProductComponentGUID:n,propDefId:o}=e,s=(0,i.wA)(),c=r||n,u=a.useCallback(()=>{c&&o&&(L.wr(),L.Dh([c]),s(w.n0({propDefId:o})))},[c,o,s]);return a.createElement(l.K,{onClick:u,"aria-label":(0,A.t)("design_systems.component_properties.go_to_property"),recordingKey:"selectContainingInstance",htmlAttributes:{"data-tooltip":(0,A.t)("design_systems.component_properties.go_to_property"),"data-tooltip-type":P.Ib.TEXT}},a.createElement(I.U,{svg:K.A},a.createElement(d.A,null)))}function Q(e){let{nodeField:r}=e,n=a.useCallback(()=>{h.l7.user("delete-prop-ref",()=>_.glU.deleteComponentPropRef(r))},[r]);return a.createElement(l.K,{onClick:n,"aria-label":(0,A.t)("design_systems.component_properties.detach_property"),recordingKey:"deleteComponentPropRef",htmlAttributes:{"data-tooltip":(0,A.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":P.Ib.TEXT,"data-onboarding-key":D.FX}},a.createElement(I.U,{svg:z.A},a.createElement(u.U,null)))}function ee(e){let{nodeField:r,zombieRefNameFromSelection:n,currentValue:i}=e,o=a.useCallback(()=>{n&&h.l7.user("add-prop-ref",()=>{switch(r){case m.RR.TEXT:_.glU.addTextComponentPropDef(n,i,r,null);break;case m.RR.VISIBLE:_.glU.addBoolComponentPropDef(n,i,r,null);break;default:throw Error(`Unexpected node field for component prop: ${r}`)}})},[r,n,i]);return a.createElement(l.K,{onClick:o,"aria-label":(0,A.t)("design_systems.component_properties.link_unlinked_property"),recordingKey:"addComponentPropDefFromZombieRef",htmlAttributes:{"data-tooltip":(0,A.t)("design_systems.component_properties.link_unlinked_property"),"data-tooltip-type":P.Ib.TEXT}},a.createElement(I.U,{svg:j.A},a.createElement(p.x,null)))}function et(e){let{input:r,ui2RefButton:n,goToPropertyButton:i,detachPropertyButton:o,addPropertyButton:s,selectionHasInstanceSublayer:l,containingProductComponentGUID:c,zombieRefNameFromSelection:d,def:u,onContextMenu:p,nodeField:h,label:g}=e,E=(0,O.o3)(O.nt.variablePillA11y),{ui3FirstButton:y,ui3SecondButton:b}=a.useCallback(()=>E?{ui3FirstButton:i,ui3SecondButton:o}:{ui3FirstButton:l?a.createElement("span",{onContextMenu:X},i):a.createElement("span",{onContextMenu:X},o),ui3SecondButton:!l&&c&&d?a.createElement("span",{onContextMenu:X},s):null},[i,o,s,E,l,c,d])();return a.createElement(S.n.div,{onContextMenu:p},b?a.createElement(k.pG,{dataTestId:"component-prop-pill",appendedClassName:f()(H.t$,{[H.uZ]:u?.type===_.J0O.INSTANCE_SWAP,[H.fd]:h===m.RR.TEXT}),label:g,input:r,leftIcon:y,rightIcon:b}):a.createElement(k.DE,{dataTestId:"component-prop-pill",appendedClassName:f()(H.t$,{[H.uZ]:u?.type===_.J0O.INSTANCE_SWAP,[H.fd]:h===m.RR.TEXT}),input:r,icon:n,label:g}))}function er(e){let{goToPropertyButton:r,detachPropertyButton:n,addPropertyButton:i,selectionHasInstanceSublayer:o,containingProductComponentGUID:s,zombieRefNameFromSelection:l}=e;return a.createElement("span",{onContextMenu:X},o?r:a.createElement("div",{className:H.UD},n,s&&l&&i))}},625479:(e,r,n)=>{n.d(r,{Ae:()=>u});var a=n(73823),i=n.n(a),o=n(925040),s=n(38542),l=n(700436),c=n(499025);(0,s.P8)([c.C1,c.S8,c.TJ],(e,r,n)=>{if(!n&&e&&r&&e[r])return e[r].primaryInstances});let d=(0,s.P8)([l.dK,c.C1,c.S8,c.TJ,c.QW],(e,r,n,a,o)=>{if(a)return;let s=[],l=new Set;if(r&&n&&r[n]){let a=e.get(n);if(!a)return;if(!a.isStateGroup||0===o.length)return i()(r[n].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of o)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!l.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)l.add(e);s.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!l.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)l.add(r);s.push(e.connectedGUIDs)}}return s}}),u=(0,s.P8)([c.C1,l.AF],(e,r)=>{if(!r||!r.isAlive||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([d,u],(e,r)=>e||r||[])},288597:(e,r,n)=>{n.d(r,{UT:()=>u,z4:()=>p});var a=n(925040),i=n(489082),o=n(700436),s=n(105857),l=n(417338);let c=(0,a.Mz)([s.W0],e=>e.length>0),d=(0,a.Mz)([l.x1],e=>e.length>0);(0,a.Mz)([c,d],(e,r)=>e||r);let u=(0,a.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:i.oV});function p(){return(0,a.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,a.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},499025:(e,r,n)=>{n.d(r,{C1:()=>c,Lg:()=>h,Ln:()=>P,Ms:()=>O,Nw:()=>u,PY:()=>R,QW:()=>p,S8:()=>g,TJ:()=>L,UR:()=>I,VC:()=>m,X9:()=>A,d:()=>N,nM:()=>k,tK:()=>y,tc:()=>S,y7:()=>d});var a=n(925040);n(578291);var i=n(741592);n(489082);var o=n(277454),s=n(700436),l=n(42725);let c=e=>e.mirror.selectionProperties.componentProps,d=(0,a.Mz)([s.dK,s.Sh],D),u=(0,a.Mz)([s.dK,s.Sh],k),p=(0,a.Mz)([s.dK,s.Sh],(e,r)=>{let n=new Set;for(let a of r){let r=e.get(a)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),m=()=>(0,a.Mz)([s.dK,(e,r)=>r],_);function _(e,r){return k(e,r)??D(e,r)}let h=(()=>{let e=m();return r=>e(r,(0,s.Sh)(r))})(),g=(0,a.Mz)([d,u],(e,r)=>e??r),f=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let a of e){let e=r.get(a),i=e?.containingStateGroupId??e?.containingSymbolId;if(i&&i!==n)return}return n??void 0}),E=()=>(0,a.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,i.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=f();return r=>e(r,(0,s.Sh)(r))})();let y=()=>(0,a.Mz)([m(),f()],(e,r)=>e??r),b=()=>(0,a.Mz)([E()],e=>e),v=(()=>{let e=y();return r=>e(r,(0,s.Sh)(r))})();(0,a.Mz)([v,s.dK],(e,r)=>e?r.get(e):null);let T=(()=>{let e=b();return r=>e(r,(0,s.Sh)(r))})();(0,a.Mz)([T,s.dK],(e,r)=>e?r.get(e):null);let I=(0,a.Mz)([c,s.Sh],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),S=()=>(0,a.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),A=()=>(0,a.Mz)([c,s.dK,(e,r)=>r],(e,r,n)=>{if(!e)return;let a=n.map(r=>e[r]?.containingInstance||r);return M(e,a,r)}),w=(0,a.Mz)([c,s.Sh],(e,r)=>{if(e)return F(e,r)}),C=(0,a.Mz)([c,s.Sh,s.dK],(e,r,n)=>{if(e)return M(e,r,n)}),N=()=>(0,a.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let a=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&a.push(e)}return M(e,a,n)??F(e,a)}),L=(0,a.Mz)([C,w],(e,r)=>r??e),O=()=>(0,a.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),R=(()=>{let e=O();return r=>e(r,(0,s.Sh)(r))})(),P=(0,a.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function D(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function k(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function M(e,r,n){return(0,l.xP)(r=>{let a=e[r]?.backingSymbol;if(a)return n.get(a)?.containingStateGroupId},r)??void 0}function F(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}(0,a.Mz)([s.F4],e=>e.every(e=>"SYMBOL"===e.type||"INSTANCE"===e.type||!!e.isSymbolSublayer||!!e.isInstanceSublayer))},105857:(e,r,n)=>{n.d(r,{Ee:()=>N,On:()=>S,Tn:()=>A,W0:()=>y,en:()=>T,p1:()=>v,pN:()=>b,vS:()=>C});var a=n(186606),i=n(925040),o=n(38542),s=n(461979),l=n(967688),c=n(489082),d=n(742245),u=n(700436),p=n(42725),m=n(739321),_=n(499025);let h=(0,o.P8)([_.C1,(e,r)=>r],(e,r)=>e&&r&&e[r]?.defs||{}),g=(0,o.P8)([_.C1,_.Lg],(e,r)=>e&&r?e[r]?.defs??{}:{}),f=(0,o.P8)([g],e=>Object.values(e).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1).map(e=>e.name)),E=()=>(0,o.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{let a=n??r;return e&&a?Object.values(e[a]?.defs||{}).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}),y=(()=>{let e=E();return r=>e(r,(0,u.Sh)(r))})(),b=(0,i.Mz)([_.C1,u.Sh,(e,r)=>r],(e,r,n)=>{});function v(){return(0,o.P8)([h,(e,r,n)=>n],(e,r)=>{let n=(0,p.eM)(r).types,a=Object.values(e).filter(({type:e})=>n.includes(e));return(0,s.DV)(a,e=>e.name.toLocaleLowerCase()),a})}let T=()=>(0,i.Mz)([_.C1,(0,_.VC)(),(0,_.tc)(),(0,_.X9)(),(e,r,n)=>r,(e,r,n)=>n],(e,r,n,a,i,o)=>{if(!e)return null;if(r){let n=(0,p.xP)(r=>{let n=e[r]?.refs?.[o];if(n?.isLinked)return n.explicitDefID},i);if(n)return e[r]?.defs?.[n]||null}let s=I(e,i,o);return s&&n?e[n]?.defs?.[s]||null:s&&a&&e[a]?.defs?.[s]||null}),I=(e,r,n)=>{let a=[];for(let n of r){let r=e[n]?.correspondingSymbolSublayer;if(!r)return null;a.push(r)}return(0,p.xP)(r=>{let a=e[r]?.refs?.[n];if(a?.isLinked)return a.explicitDefID},a)};function S(){let e=T();return(r,n)=>e(r,(0,u.Sh)(r),n)}let A=()=>(0,i.Mz)([_.C1,(e,r,n)=>r,(e,r,n)=>n],(e,r,n)=>{if(!e)return!1;let a=[];for(let n of r){a.push(n);let r=e[n]?.correspondingSymbolSublayer;r&&a.push(r)}return a.some(r=>!!e[r]?.refs?.[n]?.explicitDefID)}),w=()=>(0,o.P8)([_.C1,u.dK,(e,r)=>r],(e,r,n)=>{if(!e||0===n.length)return{};let a=(0,p.k4)(n,r),i=(0,p.Yi)(n,r)??a;if(!i)return{};let o=Object.keys(e[i]?.defs??{});if(0===o.length)return{};let s={};for(let a of o){let i=null;for(let o of n){let n=r.get(o);if(n?.type!=="INSTANCE")continue;let s=e[n.guid]?.assignments;if(!s)continue;let l=s[a];if(null!=l){if(l.isMixed){i={isMixed:!0};break}if(null===i)i={isMixed:!1,value:l.value};else if(i.value!==l.value){i={isMixed:!0};break}}}i&&(s[a]=i)}return s}),C=(0,i.Mz)([(e,r)=>r,(e,r,n)=>n,f,u.AF],(e,r,n,i)=>{if(e===a.J0O.BOOL&&r){let e=i?.name?(0,l.t)("design_systems.component_properties.boolean_property_default_name",{selectedNodeName:i.name}):(0,l.t)("design_systems.component_properties.boolean_property_default_name_fallback",{numSelected:i?1:2});return(0,d.g)(e,n)}if(e===a.J0O.NUMBER&&r){let e=(0,l.t)("design_systems.component_properties.number_property_default_name");return(0,d.g)(e,n)}if(e===a.J0O.SLOT){let e=(0,l.t)("design_systems.component_properties.slot_property_default_name");return(0,d.g)(e,n)}{let r=e===a.J0O.INSTANCE_SWAP?(0,l.t)("design_systems.component_properties.instance_swap_property_default_name"):(0,p.xb)(e);return(0,d.g)(r,n)}});function N(){return(0,o.P8)([u.dK,E(),w(),_.C1,(e,r)=>r],(e,r,n,i,o)=>{if(!i)return[];let s=(0,p.ZH)(o,i);return r.filter(e=>!s.has(e.explicitDefID)).map(r=>{let i=r.defaultValue;if(null!=n[r.explicitDefID]){let e=n[r.explicitDefID];i=e?e.isMixed?c.oV:null==e.value?m.xJ:e.value:m.xJ}if(r.type===a.J0O.INSTANCE_SWAP&&i!==m.xJ&&i!==c.oV){let r=(0,p.wd)([i],e);i=r&&(0,c.hS)(r)?r.name:m.xJ}return{name:r.name,value:i,type:r.type}})})}},417338:(e,r,n)=>{n.d(r,{Cu:()=>g,YH:()=>y,x1:()=>E});var a=n(988402),i=n(186606),o=n(925040),s=n(38542),l=n(967688),c=n(489082),d=n(742245),u=n(700436),p=n(42725),m=n(184226),_=n(739321),h=n(499025);function g(){return(0,s.P8)([_.uL,h.C1,u.dK,(e,r)=>r],(e,r,n,a)=>{if(!r||0===a.length)return[];let o=(0,p.Yi)(a,n)??(0,h.nM)(n,a);if(!o||a.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,m.s)(r,a,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of _.NE){let n=r.indexOf(e[0]),a=r.indexOf(e[1]);if(-1!==n&&-1!==a)return!0}}return!1}(s.propertyValues[e])?i.J0O.VARIANT:i.J0O.BOOL,n=d[e]||_.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([h.C1,(0,h.tK)(),(0,h.d)()],(e,r,n)=>{if(!e)return[];let o=n??r;return o?function(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,p.aO)(e,r),s=(0,p.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:i.J0O.VARIANT,kind:a.uN.VARIANT,error:r?i.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:i.uXg.NONE,uguid:n.propertyUguids[e]}})}(o,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.Sh)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)})},232958:(e,r,n)=>{n.d(r,{$j:()=>O,Ht:()=>N,Jl:()=>B,M4:()=>U,Pd:()=>F,Se:()=>P,Zp:()=>x,fl:()=>w,gq:()=>L,ig:()=>R,j5:()=>A,qd:()=>D,vD:()=>C,w2:()=>M});var a=n(848318),i=n(536384),o=n.n(i),s=n(967688),l=n(498709),c=n(372566),d=n(67188),u=n(696786),p=n(489082),m=n(273555),_=n(17753),h=n(144118),g=n(213832),f=n(753644),E=n(524752),y=n(934151),b=n(312522),v=n(350560),T=n(779179);let I={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:l.bA,bigNudgeAmount:l._q};function S({children:e,onNormalClick:r}){let{setScrubbableElement:n}=(0,a.useContext)(v.s),i=(0,a.useRef)(null),o=(0,a.useRef)(null),s=(0,a.useRef)(!1),l=(0,a.useRef)(null),c=(0,a.useRef)(null);(0,a.useEffect)(()=>(n(i.current),()=>n(null)),[n]);let d=(0,a.useCallback)(e=>{s.current=!1,l.current={x:0,y:0},c.current={x:e.clientX,y:e.clientY};let r=window.setTimeout(()=>{o.current=null},500);o.current=r},[]),u=(0,a.useCallback)(()=>{null===o.current||s.current||(clearTimeout(o.current),r?.()),o.current=null,l.current=null,c.current=null},[r]),p=(0,a.useCallback)(e=>{if(!l.current)return;let r=e.movementX,n=e.movementY;null==r&&null==n&&c.current&&(r=e.clientX-c.current.x,n=e.clientY-c.current.y,c.current={x:e.clientX,y:e.clientY}),l.current.x+=r,l.current.y+=n;let{x:a,y:i}=l.current;Math.sqrt(a*a+i*i)>5&&(s.current=!0)},[]);return(0,a.useEffect)(()=>()=>{null!==o.current&&clearTimeout(o.current)},[]),a.createElement("div",{ref:i,onPointerDown:d,onPointerUp:u,onPointerMove:p},e)}function A(e){let{onValueChange:r,forwardedRef:n,onKeyDown:i}=e,s=(0,a.useRef)(null),l=n??s,c=(0,y.Qu)(),_=(0,a.useCallback)(e=>{c(e),i?.(e)},[c,i]),g=(0,a.useCallback)(e=>r?.(e,m.zk.YES),[r]),b=(0,a.useCallback)(()=>{l.current?.focus(),l.current?.select()},[l]),A=(0,u.GS)(),w=e.isTokenizable?E.$:f.p_,C=(0,a.useCallback)(e=>a.createElement(S,{onNormalClick:b},e),[b]),N=A&&!e.minimizeScrubTargetWidth;return a.createElement(v.b,{...I,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===p.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:a.createElement(h.e,{condition:(!!e.children||!!N)&&A,wrapper:C},a.createElement(a.Fragment,null,e.children?e.children:N?a.createElement("div",{className:T.V}):null)),a.createElement(w,{allowEmpty:e.allowEmpty,autoFocus:e.autoFocus,className:o()(e.inputClassName,{[T.sC]:!0,[T.WC]:!e.childrenAtEnd&&A&&!e.children&&N}),dataTestId:e.dataTestId,disabled:e.disabled??null===e.value,ellipsis:A,formatter:e.formatter,forwardedRef:l,mixedMathCallback:e.mixedMathCallback,mixedMathHandler:e.mixedMathHandler,noBorderOnFocus:!0,noLeftBorder:e.noLeftBorder,onBlur:e.onBlur,onChange:g,onClick:e.onClick,onFocus:e.onFocus,onKeyDown:_,onKeyUp:e.onKeyUp,onMixedMathNudge:e.onMixedMathNudge,onMouseDown:d.dG,placeholder:e.placeholder,property:e.value??null,recordingKey:e.recordingKey,softDisabled:e.softDisabled,squareRightBorder:e.squareRightBorder}),e.childrenAtEnd?a.createElement(h.e,{condition:!!e.children&&A,wrapper:C},a.createElement(a.Fragment,null,e.children)):null,e.endNode)}function w({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...i}){let o={...I,...i,noBorderOnFocus:i.noBorderOnFocus||i.disableSelectFocus};return a.createElement("div",{className:i.className},a.createElement(g.a3,{allowEmpty:i.allowEmpty,ariaLabel:i.ariaLabel,autoFocus:i.autoFocus,chevronClassName:i.chevronClassName,dataTestId:i.dataTestId,disableSelectFocus:i.disableSelectFocus,disabled:i.disabled,dispatch:i.dispatch,dropdownAlignment:i.dropdownAlignment,dropdownClassName:i.dropdownClassName,dropdownShown:i.dropdownShown,dropdownWidth:i.dropdownWidth,enablePreview:i.enablePreview,formatter:i.formatter,forwardedRef:i.forwardedRef,hasIconStyle:i.hasIconStyle,icon:i.icon,id:i.id,inputClassName:i.inputClassName,isTokenizable:i.isTokenizable,mixedMathHandler:i.mixedMathHandler,noPlaceholderLine:i.noPlaceholderLine,omitValueFromDropdown:i.omitValueFromDropdown,onChange:(e,r=m.zk.YES)=>{i.onValueChange?.(e,r)},onInputBlur:i.onBlur,onInputFocus:i.onFocus,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,onboardingKey:i.onboardingKey,openBelowTarget:i.openBelowTarget,optionsWithDisabledPreviews:i.optionsWithDisabledPreviews,placeholder:i.placeholder,property:i.value,recordingKey:i.recordingKey,scrubbableControlProps:o,targetDomNode:i.targetDomNode,unNamespacedInputRecordingKey:i.unNamespacedInputRecordingKey,willShowDropdown:i.willShowDropdown},i.children))}function C(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,formatter:s}=e,l=(0,a.useMemo)(()=>new c.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(w,{...e,formatter:s??l})}function N(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}=e,s=(0,a.useMemo)(()=>new c.X9({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o}),[r,n,i,o]);return a.createElement(A,{...e,formatter:s})}function L(e){let{min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,a.useMemo)(()=>new c.Lk({min:r,max:n,smallNudgeAmount:i,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,i,o,s]);return a.createElement(A,{...e,formatter:l})}function O({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,d=(0,a.useMemo)(()=>new c.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:i}),[e,r,s,l,n,i]);return a.createElement(A,{...o,formatter:d})}function R({min:e=0,max:r,...n}){let{smallNudgeAmount:i,bigNudgeAmount:o}=n,s=(0,a.useRef)(!1),l=(0,a.useMemo)(()=>new c.NB({min:Math.max(e,0),max:r,smallNudgeAmount:i,bigNudgeAmount:o}),[e,r,i,o]),d=(0,p.gl)(n.value)&&n.mixedMathHandler,u=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!d,_=n.isTokenizable?E.$:f.p_;return a.createElement(v.b,{...I,...n,formatter:l,scrubbingDisabled:u,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,a.createElement(_,{className:n.inputClassName,dataTestId:n.dataTestId,disabled:n.disabled,formatter:l,forwardedRef:n.forwardedRef,mixedMathHandler:n.mixedMathHandler,noBorderOnFocus:!0,onBlur:n.onBlur,onChange:e=>n.onValueChange(e,m.zk.YES),onClick:n.onClick,onFocus:n.onFocus,onKeyDown:n.onKeyDown,onMixedMathNudge:n.onMixedMathNudge,onNudge:n.onNudge,onPaste:n.onPaste,placeholder:n.placeholder,property:n.value??null,recordingKey:n.recordingKey,shouldClearOnFocus:n.shouldClearOnFocus,source:s.current?"scrub":"document"}))}function P({min:e,max:r,allowEmpty:n,...i}){let{smallNudgeAmount:o,bigNudgeAmount:s}=i,l=(0,a.useRef)(!1),d=(0,a.useMemo)(()=>new c.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),u=(0,p.gl)(i.value)&&i.mixedMathHandler,_=i.disabled||i.scrubbingDisabled||"number"!=typeof i.value&&!u,h=i.isTokenizable?E.$:f.p_;return a.createElement(v.b,{...I,...i,formatter:d,scrubbingDisabled:_,onScrubBegin:e=>{l.current=!0,i.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,i.onScrubEnd?.(e)},className:i.className},i.children,a.createElement(h,{allowEmpty:n,className:i.inputClassName,dataTestId:i.dataTestId,disabled:i.disabled,formatter:d,forwardedRef:i.forwardedRef,mixedMathHandler:i.mixedMathHandler,noBorderOnFocus:!0,onBlur:i.onBlur,onChange:e=>i.onValueChange(e,m.zk.YES),onFocus:i.onFocus,onKeyDown:i.onKeyDown,onMixedMathNudge:i.onMixedMathNudge,onNudge:i.onNudge,onPaste:i.onPaste,placeholder:i.placeholder,property:i.value??null,recordingKey:i.recordingKey,shouldClearOnFocus:i.shouldClearOnFocus,source:l.current?"scrub":"document"}))}function D({max:e=3600,displayFractions:r=!1,...n}){let i=(0,a.useMemo)(()=>new c.f0(e,r),[e,r]);return a.createElement(A,{...n,formatter:i})}let k={...I,scrubMultiplier:4,wheelMultiplier:2};function M({min:e=0,max:r=1,decimals:n,hidePercentSign:i,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,d=(0,a.useMemo)(()=>new c.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:i}),[e,r,s,l,n,i]);return a.createElement(A,{...k,...o,formatter:d,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function F(e){let r=(0,u.GS)(),{inputClassName:n,...i}=e,l=e.ui3RightJustifyPercentSign??!0,c=(0,b.P)((0,s.t)("fullscreen.scrubbable.opacity"));return r?a.createElement(M,{...i,inputClassName:o()(n,{[T.Ww]:l}),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":c,hidePercentSign:l,childrenAtEnd:l},l?a.createElement("span",{className:T.QK},(0,s.tx)("fullscreen.scrubbable.percent")):e.children):a.createElement(M,{...e,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,s.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function x(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=e,i=(0,a.useMemo)(()=>new c.cu({smallNudgeAmount:r,bigNudgeAmount:n}),[r,n]);return a.createElement(A,{...e,formatter:i,postScrubMultiplier:e.reverseScrub?.5:-.5,postWheelMultiplier:e.reverseScrub?.2:-.2,postBigNudgeAmount:.1})}function U(e){let r=(0,a.useMemo)(()=>new c.cu({min:7.16,max:180}),[]);return a.createElement(A,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function B(e){let{min:r,smallNudgeAmount:n=l.bA,bigNudgeAmount:i=l._q,formatter:o}=e,s=(0,a.useRef)(!1),d=(0,a.useMemo)(()=>o??new c.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:i}),[r,n,i,o]),u=e.isTokenizable?E.$:f.p_;return a.createElement(v.b,{...I,bigNudgeAmount:i,className:e.className,"data-tooltip":e["data-tooltip"],"data-tooltip-type":e["data-tooltip-type"],disabled:e.disabled,dispatch:e.dispatch,formatter:d,noBorderOnHover:e.noBorderOnHover,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},onValueChange:e.onValueChange,scrubMultiplier:e.scrubMultiplier,scrubbingDisabled:e.disabled,smallNudgeAmount:n,tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,value:e.value},e.children,a.createElement(u,{className:e.inputClassName,disabled:e.disabled,formatter:d,noBorderOnFocus:!0,onChange:r=>e.onValueChange(r,m.zk.YES),placeholder:e.placeholder,property:e.value,recordingKey:e.recordingKey,shouldClearOnFocus:e.shouldClearOnFocus,source:s.current?"scrub":"document"}))}},529865:(e,r,n)=>{n.d(r,{sA:()=>N,sJ:()=>C});var a=n(848318),i=n(658029),o=n(773511),s=n(81940),l=n(166116),c=n(536384),d=n.n(c),u=n(979309),p=n(781239),m=n(979890),_=n(720522),h=n(967688),g=n(431054),f=n(788903),E=n(511067),y=n(17753),b=n(620512),v=n(419756),T=n(42421),I=n(779179),S=n(838262),A=n(764361);let w=a.forwardRef(function({children:e,disabled:r,icons:n,iconLayout:i="absolute",inputClassName:o,isActive:s,nonTextChild:l,noBorder:c,fullHeight:u,onMouseDownCapture:_,onContextMenuCapture:h,onFocus:g,onBlur:f,onKeyDown:E,recordingKey:y},b){return a.createElement(m.D8,{forwardedRef:b,recordingKey:p.Pt(y,"comboInputControl","container"),className:d()(o,{[S.mc]:!0,[S.vu]:s,[S.li]:c,[S.KH]:!c,[S.r9]:r,[S.fE]:l}),onMouseDownCapture:_,onContextMenuCapture:h,onFocus:g,onBlur:f,onKeyDown:E},a.createElement("div",{className:d()(S.I6,{[S.Nb]:u})},e),!r&&a.createElement("span",{className:d()(S.zm,{[S.wQ]:"absolute"===i})},n))}),C=a.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:i,disabled:o,children:s,hideIcon:l=!1,iconLayout:c="absolute",nonTextChild:m,isActive:_,onPickerOpen:h,disableEntryPoint:g=!1,noBorder:f,fullHeight:y,hasBindingContextMenu:b,onClickDetachButton:S,onFocus:A,onBlur:C,handleClearOverride:N},R){let P=a.useId(),D=(0,a.useContext)(v.p),k=D?.boundVariableId,M=(0,a.useRef)(null),{showing:F,show:x,data:U,hide:B}=(0,E.BK)(T.v+P),G=a.useCallback(()=>{h?h():D?.showBindingUI(M.current,{currentFieldValue:n}),B()},[n,B,h,D]),V=a.useCallback(()=>{D?.onVariableSelected?.(void 0),B(),S?.()},[B,D,S]),H=p.rf(p.Pt(i,"detachIcon"),"click",V),z=p.rf(i,"mousedown",e=>{if(e&&!g&&e.shiftKey){G(),e.preventDefault(),e.stopPropagation();return}}),K=p.rf(i,"contextmenu",e=>{e&&!g&&b&&r?.current&&(x({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())}),W=[N&&a.createElement(L,{key:"clearOverrideButton",handleClearOverride:N,recordingKey:p.Pt(i,"clearOverrideButton")}),!(l||g)&&a.createElement(O,{key:"variableBindingButton",boundVariableId:k,handleUnbind:H,handlePickerOpen:G,recordingKey:i})].filter(Boolean);return a.createElement(a.Fragment,null,a.createElement(w,{ref:(0,u.A)(R,M),disabled:o,fullHeight:y,iconLayout:c,icons:W,inputClassName:d()(e,{[I.Gp]:W.length>0&&"absolute"===c}),isActive:null!=_?_:!!D?.isShowingBindingUI,noBorder:f,nonTextChild:m,onBlur:C,onContextMenuCapture:K,onFocus:A,onMouseDownCapture:z,recordingKey:i},s),b&&r&&F&&"number"==typeof U?.position?.top&&"number"==typeof U?.position?.left&&a.createElement(T.G,{inputRef:r,isBound:!!D?.boundVariableId,left:U.position.left,onClose:B,onOpenVariablePicker:G,onUnbindVariable:H,recordingKey:p.Pt(i,"contextMenu"),top:U.position.top}))}),N=a.memo(function({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:i,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:p,children:m,hasBindingContextMenu:_,fullHeight:h,onClickDetachButton:g,onBlur:E,onFocus:y}){let v=(0,f.SG)(e).data??[];return a.createElement(b._X,{fields:e,resolvedType:n,editingStyleGuid:i},a.createElement(C,{currentFieldValue:r,disableEntryPoint:!!d||0===v.length,disabled:l,fullHeight:h,hasBindingContextMenu:_,hideIcon:u,inputClassName:o,inputRef:s,noBorder:p,onBlur:E,onClickDetachButton:g,onFocus:y,recordingKey:c},m))});function L({handleClearOverride:e,recordingKey:r}){return a.createElement(i.K,{key:"clearOverrideButton","aria-label":(0,h.t)("variables.authoring_modal.table.clear_override"),actionOnPointerDown:!0,onClick:e,recordingKey:r,htmlAttributes:{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("variables.authoring_modal.table.clear_override")}},a.createElement(s.m,null))}function O({boundVariableId:e,handleUnbind:r,handlePickerOpen:n,recordingKey:i}){return e?a.createElement(o.E,{className:d()(S.AM,S.Ab),htmlAttributes:{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("variables.binding_ui.detach_variable_tooltip")},"aria-label":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),onClick:r},a.createElement(l.o,null)):a.createElement(o.E,{className:S.UU,htmlAttributes:{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("fullscreen.properties_panel.apply_variable"),"data-test-id":p.Pt("variable-control-icon",i??""),tabIndex:-1},"aria-label":(0,h.t)("fullscreen.properties_panel.apply_variable"),onClick:n,recordingKey:p.Pt(i,"comboBoxButton")},a.createElement(_.B,{svg:A.default}))}a.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:i,children:o,onPickerOpen:s,dataTestId:l,openOnRightClick:c,inputClassName:m,tooltip:_},h){let f=(0,a.useContext)(v.p),E=(0,a.useRef)(null),b=a.useCallback(()=>{s?s():f?.showBindingUI(E.current,{currentFieldValue:e})},[e,s,f]),T=p.rf(i,"mousedown",e=>{if(e&&!r){if(c){if((0,g.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}}),I=p.rf(i,"contextmenu",e=>{e&&!r&&(b(),e.preventDefault(),e.stopPropagation())});return a.createElement("div",{ref:(0,u.A)(h,E),className:d()(m,{[S.jX]:!0,[S.NH]:n&&!m}),onMouseDownCapture:T,onContextMenu:I,"data-testid":l,"data-tooltip-type":_?y.Ib.TEXT:void 0,"data-tooltip":_??void 0},o)})},837988:(e,r,n)=>{n.d(r,{p:()=>s});var a=n(848318),i=n(301168),o=n(19180);function s(e){return(0,i.d4)(e=>!!e.user?.id)&&(!e.featureFlag||(0,o.k)()[e.featureFlag])?a.createElement(a.Fragment,null,e.children):null}},55276:(e,r,n)=>{n.d(r,{A:()=>R});var a=n(848318),i=n(19180),o=n(656329),s=n(672045),l=n(301168),c=n(382902),d=n(989232),u=n(918777),p=n(615233),m=n(304756),_=n(967688),h=n(952039),g=n(957872),f=n(34542),E=n(517776),y=n(263336),b=n(45937),v=n(481651),T=n(370715),I=n(136169);let S=(0,E.r1)("seen_mobile_proto_download_modal_prompt");function A(){let e=(0,l.wA)(),r=(0,c.md)(S),n=(0,l.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),o=(0,l.d4)(e=>e.user?.created_at),s=(0,u.A)(o).add(14,"day").isSameOrAfter((0,u.A)()),{isShowing:E,show:A,complete:w}=(0,f.e)({overlay:I.y3_,priority:y.N.DEFAULT_MODAL},[r]);if((0,a.useEffect)(()=>{A({canShow:e=>!!(0,i.k)().mobile_download_modal_prompts&&!s&&!e&&!n})},[A,n,s]),!E)return null;let C=()=>{m.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),(0,d.trackEvent)("post_proto_mobile_app_download_prompt_email_me_cta_clicked"),w(),e(h.F.enqueue({message:(0,_.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return a.createElement(v.X,{description:(0,_.tx)("mobile_download_prompts.run_your_mobile_prototypes"),isShowing:E,media:a.createElement(b.y,{aspectRatio:1.75,alt:"A graphic show mobile prototypes with a qr code",src:(0,p.ck)("b50fba0faeea245feed92fe60337297d827e4984")}),onClose:()=>{w()},position:T.Q.BOTTOM_RIGHT,primaryCta:{label:(0,_.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>C(),ctaTrackingDescriptor:g.c.MOBILE_APP_DOWNLOAD_PROTOTYPE_PROMPT_CLICKED},secondaryCta:{label:(0,_.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:g.c.LEARN_MORE},title:(0,_.tx)("mobile_download_prompts.mobile_interactions"),trackingContextName:"Mobile Prototype Download Modal Prompt",userFlagOnShow:"seen_mobile_proto_download_modal_prompt"})}var w=n(211128),C=n(980686);let N=a.lazy(()=>Promise.all([n.e(9616),n.e(3031)]).then(n.bind(n,659654)).then(e=>({default:e.NuxOnboardingOverlay})));function L(){return a.createElement(a.Suspense,{fallback:null},a.createElement(N,null))}var O=n(837988);let R=a.memo(function(){return a.createElement(a.Fragment,null,a.createElement(O.p,null,a.createElement(L,null)),a.createElement(O.p,null,a.createElement(w.w,null)),!o.Xb&&a.createElement(O.p,null,a.createElement(A,null)),a.createElement(O.p,null,a.createElement(C.b,null)),(0,i.k)().fallback_tos_modal_outside_global&&a.createElement(O.p,null,a.createElement(s.h,null)))})},288711:(e,r,n)=>{n.d(r,{wH:()=>l}),n(848318),n(301168);var a=n(29188),i=n(533737);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!a.eD)return;let r=a.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:a,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};a&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=a&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(i.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(752181)},175685:(e,r,n)=>{n.d(r,{Q:()=>f});var a=n(848318),i=n(382902),o=n(63163),s=n(967688),l=n(957872),c=n(34542),d=n(517776),u=n(263336),p=n(391301),m=n(370715),_=n(556049),h=n(136169);let g=(0,d.r1)("seen_connected_projects_admin_settings_content_tab_overlay");function f(){let e=(0,i.md)(g),{show:r,isShowing:n,complete:d}=(0,c.e)({overlay:h.QzE,priority:u.N.DEFAULT_MODAL},[e]);return(0,o.h)(()=>{r({canShow:e=>!e})}),a.createElement(p.rq,{arrowPosition:_.F_.TOP,description:a.createElement("p",null,(0,s.tx)("resource_connection.onboarding.connect_an_external_team_to_a_project_to_share_designs_and_resources")),emphasized:!0,isShowing:n,onClose:d,primaryCta:{label:(0,s.tx)("file_browser.modal.got_it"),type:"button",onClick:()=>{d()},ctaTrackingDescriptor:l.c.DONE},secondaryCta:{label:(0,s.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",ctaTrackingDescriptor:l.c.LEARN_MORE},targetKey:"org_admin_connected_projects_tab_onboarding_key",title:(0,s.tx)("project_creation.introducing_connected_projects"),trackingContextName:"Connected Projects Admin Settings Content Tab Onboarding",width:350,zIndex:m.R.MODAL})}},177755:(e,r,n)=>{n(186606)},375718:(e,r,n)=>{n(848318),n(301168);var a=n(382902);n(63163),n(533737),n(34542),n(385711),n(658796),n(539829),n(709292);var i=n(517776);n(986761),n(249726),n(730143),n(318147),n(526594),n(263336),n(991675),n(518383),n(18584),n(89743),n(704410),n(136169),(0,a.eU)(!1),(0,i.r1)("dismissed_move_drafts_nudge")},97410:(e,r,n)=>{n.d(r,{s:()=>a}),n(848318),n(301168),n(768618),n(382902),n(533737),n(34375),n(34542),n(539829),n(709292),n(517776),n(986761),n(249726),n(730143),n(318147),n(55116),n(526594),n(263336),n(991675),n(18584),n(375718),n(89743),n(704410),n(136169);let a="Node Count Reached for Draft"},734974:(e,r,n)=>{n.d(r,{l5:()=>s});var a=n(382902),i=n(664068),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,a.eU)("NOT_STARTED");let s=(0,a.eU)(i.fD.NONE);(0,a.eU)(!1)},960161:(e,r,n)=>{n.d(r,{q:()=>a});let a="zoom-menu"},244780:(e,r,n)=>{n.d(r,{Iv:()=>a,at:()=>i});let a="sites-preview",i="seen_sites_onboarding"},219990:(e,r,n)=>{n.d(r,{zM:()=>i}),n(848318),n(301168);var a=n(967688);n(744577),n(87463),n(462794),n(995218),n(696786),n(34375),n(34542),n(730143),n(259964),n(263336),n(391301),n(122586),n(566090),n(175393),n(226455),n(136169),n(921478),n(62053);let i="open-playground-file-onboarding-event";(0,a.tx)("rcs.playground_file.switch_devmode_to_design_title")},938486:(e,r,n)=>{n.d(r,{oE:()=>o,zK:()=>i}),n(848318),n(382902),n(967688),n(34375),n(34542);var a=n(517776);n(263336),n(18584),n(704410),n(136169);let i="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,a.r1)("seen_plugin_publish_invite_publishers_onboarding")},43258:(e,r,n)=>{n.d(r,{Ih:()=>a,pN:()=>i}),n(533737);let a="seen_ready_for_dev_callout",i="seen_ui3_design_onboarding_steps"},841758:(e,r,n)=>{n.d(r,{uQ:()=>i}),n(848318);var a=n(382902);n(561258);let i=1;(0,a.eU)(null),(0,a.eU)(null)},698429:(e,r,n)=>{n.d(r,{$A:()=>y,LS:()=>T,Uq:()=>b,YY:()=>I,ks:()=>v});var a=n(301168),i=n(186606),o=n(382902),s=n(287105),l=n(461979),c=n(967688),d=n(903969),u=n(273561),p=n(484720),m=n(153167),_=n(587745),h=n(764286),g=n(903660),f=n(259964),E=n(649631);function y(e){return e?.view==="fullscreen"&&e?.editorType===f.nT.DevHandoff}function b(e){return"fullscreen"===e.view&&e.editorType===f.nT.Design}function v(){return(0,a.d4)(e=>y(e.selectedView))}function T(){return(0,a.d4)(e=>y(e.selectedView)&&(0,d.Mx)(e)&&(e.mirror.appModel.currentTool===i.NLJ.SELECT||e.mirror.appModel.currentTool===i.NLJ.DROPPER_COLOR||e.mirror.appModel.currentTool===i.NLJ.ANNOTATE||e.mirror.appModel.currentTool===i.NLJ.MEASURE))}class I{pathToSelectedView(e,r,n,a){let i=n?(0,s.v6)(n):{},l=r[1];if(("design"===l||"file"===l)&&("1"===i["ready-for-dev"]||("dev"===i.mode||"dev"===i.m)&&"auto"!==i.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],s={view:"fullscreen",editorType:e?.user?f.nT.DevHandoff:f.nT.Design,fileKey:n};(0,E.d8)(a,s),(0,E.qi)(i,s);let l=e?.openFile?.canAccessFullDevMode;i["cc-version-id"]&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&l&&(s.compareChangesVersionId=i["cc-version-id"]),i["cc-activity-id"]&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&l&&(s.compareChangesActivityId=i["cc-activity-id"]),i["cc-filter-status"]&&(i["cc-version-id"]||i["cc-activity-id"])&&(i["node-id"]||i["cc-node-id"])&&!i.vars&&l&&(s.filterStatusVersions="1"===i["cc-filter-status"]),i["cc-node-id"]&&i["cc-version-id"]&&!i.vars&&l&&(s.compareChangesNodeId=i["cc-node-id"]);let c=(0,u.b)(e);return"1"===i.vars?(s.showDevModeVariablesTable=!0,o.zl.set(m.$,p.Nh.DirectUrl),i["var-id"]&&(s.devModeVariablesTableSelectedVariable=i["var-id"])):c&&"1"===i["ready-for-dev"]?s.showOverview=!0:c&&"1"===i["component-browser"]&&(s.showDevModeComponentBrowser=!0,s.componentKey=i["component-key"]||void 0,s.showGithubRepositorySelector="1"===i["gh-repo-selector"]),s.showDevModeVariablesTable||o.zl.set(m.$,null),y(s)&&("dev"===i.mode||"dev"===i.m)&&(s.mode="dev",!c||!i["focus-id"]||s.showOverview||i.vars||(s.devModeFocusId=i["focus-id"],i["node-id"]||(s.nodeId=i["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(y(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===g.Zt)return(0,E.oU)();let a=this.selectedViewName(e,r),i=a?(0,l.sy)(a):"",o={},s=e.fileKey,c=e.fileKey&&r.fileByKey[e.fileKey],d="design";return c?n=(0,E.ZH)(d,s||"",i,c,(0,_.L8)(c,r.repos)):(n=`/${d}/${s}`,i?n+=`/${i}`:n+="/Untitled"),(0,E.gR)(o,e.nodeId),(0,E.H_)(o,e.nodeId),(0,E.Wi)(o,e.versionId),e.compareChangesVersionId&&(o["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(o["cc-filter-status"]=1),e.compareChangesNodeId&&(o["cc-node-id"]=(0,h.EO)(e.compareChangesNodeId)),e.devModeFocusId&&(o["focus-id"]=(0,h.EO)(e.devModeFocusId)),e.showOverview&&(o["ready-for-dev"]="1"),e.showDevModeVariablesTable&&(o.vars="1",e.devModeVariablesTableSelectedVariable&&(o["var-id"]=(0,h.Ml)(e.devModeVariablesTableSelectedVariable))),e.showDevModeComponentBrowser&&(o["component-browser"]="1",e.componentKey&&(o["component-key"]=e.componentKey),e.showGithubRepositorySelector&&(o["gh-repo-selector"]="1")),o.m="dev",n=(0,E.sR)(n,o),n=(0,E.qr)(n,e.commentThreadId)}return null}selectedViewName(e,r){if(y(e)){let n=null;if(e.fileKey){let a=r.fileByKey[e.fileKey];if(a){let e=(0,_.L8)(a,r.repos);n=e?(0,_.At)(a,e):a.name}}return n??(0,c.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!y(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},90224:(e,r,n)=>{n.d(r,{QJ:()=>f,sF:()=>y,zJ:()=>E});var a=n(848318),i=n(301168),o=n(162796),s=n(93275),l=n(531788),c=n(309488),d=n(19180),u=n(637640),p=n(952039),m=n(31898),_=n(446951),h=n(912407);let g="figma_ff_bisector_state";function f(){let e=(0,i.wA)();return a.useCallback(()=>{e(m.to({type:y}))},[e])}let E="FeatureFlagBisectorModal",y=(0,_.Ju)(function(e){let r=o.hS(e),n=(0,i.wA)(),[m,_]=a.useState(""),[f,E]=a.useState(""),[y,b]=a.useState(null);a.useEffect(()=>{let e=localStorage.getItem(g);if(e)try{let r=JSON.parse(e);Date.now()<r.expiry?b(r):localStorage.removeItem(g)}catch(e){localStorage.removeItem(g)}},[]);let v=a.useCallback(e=>{localStorage.setItem(g,JSON.stringify(e))},[]),T=a.useCallback(e=>{let r={expiration:Date.now()+144e5,flags:e};localStorage.setItem(d.M,JSON.stringify(r)),u.Ay.reload("Feature flag bisector applying new flags")},[]),I=a.useCallback(()=>{try{let e=JSON.parse(m),r={};for(let[n,a]of Object.entries(e)){if("boolean"==typeof a){r[n]=a;continue}if("object"==typeof a&&a&&"value"in a&&"boolean"==typeof a.value)r[n]=a.value;else{E(`Value for "${n}" must be a boolean`);continue}}if(null===r){E("Input must be a JSON object");return}for(let[e,n]of Object.entries(r))if("boolean"!=typeof n){E(`Value for "${e}" must be a boolean`);return}E("");let n=Object.keys(r),a={originalFlags:r,currentSubset:n,currentComplement:[],testingComplement:!1,history:[],phase:"bisecting",expiry:Date.now()+144e5};b(a),v(a),T(r)}catch(e){E("Invalid JSON format")}},[m,v,T]),S=a.useCallback(e=>{let r,a;if(!y)return;let i=y.testingComplement?y.currentComplement:y.currentSubset,o=i.reduce((e,r)=>(void 0===y.originalFlags[r]?console.error(`Flag ${r} is undefined in the original flags`):e[r]=y.originalFlags[r],e),{}),s=[...y.history],l=s[s.length-1];if(l&&"pending"===l.result?l.result=e?"success":"failure":s.push({subset:[...i],isComplement:y.testingComplement,result:e?"success":"failure",testedFlags:o}),1===i.length&&e){let e={...y,history:s,phase:"complete",culpritFlag:i[0]};b(e),v(e),n(p.F.enqueue({message:`Culprit found: ${i[0]}`,type:"feature-flag-bisector-culprit-found"}));return}if(1===i.length&&y.testingComplement&&!e){let e={...y,history:s,phase:"complex_interaction",lastWorkingSet:y.originalFlags};b(e),v(e),n(p.F.enqueue({message:"Complex interaction detected - multiple flags may be involved",type:"feature-flag-bisector-complex-interaction"}));return}let c=!1;if(e){let e=Math.floor(i.length/2);r=i.slice(0,e),a=i.slice(e),c=!1}else{if(y.testingComplement){let e=s.slice().reverse().find(e=>"success"===e.result),r={...y,history:s,phase:"complex_interaction",lastWorkingSet:e?.testedFlags||y.originalFlags};b(r),v(r),n(p.F.enqueue({message:"Complex interaction detected - multiple flags may be involved",type:"feature-flag-bisector-complex-interaction"}));return}r=y.currentSubset,a=y.currentComplement,c=!0}let d=c?a:r,u=d.reduce((e,r)=>(void 0===y.originalFlags[r]?console.error(`Flag ${r} is undefined in the original flags`):e[r]=y.originalFlags[r],e),{}),m={...y,currentSubset:r,currentComplement:a,testingComplement:c,history:[...s,{subset:d,isComplement:c,result:"pending",testedFlags:u}]};b(m),v(m),T(u),n(p.F.enqueue({message:`Moving to next subset: ${d.length} flags, refreshing...`,type:"feature-flag-bisector-culprit-found"}))},[y,v,T,n]),A=a.useCallback(()=>{localStorage.removeItem(g),localStorage.removeItem(d.M),b(null),_(""),E(""),n(p.F.enqueue({message:"Feature flag bisector reset successfully",type:"feature-flag-bisector-reset"})),u.Ay.reload("Feature flag bisector applying new flags")},[n]),w=a.useCallback(()=>{if(!y)return;let e={...y,timestamp:new Date().toISOString()};navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>{n(p.F.enqueue({message:"History copied to clipboard",type:"feature-flag-bisector-history-copied"}))}).catch(e=>{console.error("Failed to copy history:",e),n(p.F.enqueue({message:"Failed to copy history",type:"feature-flag-bisector-copy-failed",error:!0}))})},[y,n]),C=()=>a.createElement(a.Fragment,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,"Feature Flag Bisector")),a.createElement(s.nB,null,a.createElement("div",{className:h.section},a.createElement("h3",{className:h.sectionTitle},"Feature Flag Configuration"),a.createElement("p",{className:h.description},"Enter a JSON object from the Feature Flag differ tool in the Admin Statsig plugin."),a.createElement("textarea",{value:m,onChange:e=>_(e.target.value),placeholder:`{
  "flag_name_1": true,
  "flag_name_2": false,
  "flag_name_3": true
}`,rows:10,className:h.jsonInput,"aria-label":"Feature Flags JSON Input"}),f&&a.createElement("div",{className:h.error},f))),a.createElement(s.wi,null,a.createElement(s.jk,null,a.createElement(l.$n,{variant:"secondary",onClick:()=>r.props.close({source:"button"})},"Cancel"),a.createElement(l.$n,{variant:"primary",onClick:I,disabled:!m.trim()},"Start Bisection")))),N=()=>{if(!y)return null;let e=y.testingComplement?y.currentComplement:y.currentSubset;return a.createElement(a.Fragment,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,"Feature Flag Bisector - Testing")),a.createElement(s.nB,null,a.createElement("div",{className:h.section},a.createElement("h3",{className:h.sectionTitle},"Is the bug present with this set of feature flags?"),a.createElement("p",{className:h.description},'Test the current behavior and click "Yes" if the bug is present, or "No" if it\'s not.',y.testingComplement&&a.createElement("span",{className:h.complementNote},"(Testing complement - the other half of the previous split)")),a.createElement("div",{className:h.currentState},a.createElement("h4",null,`Current Test Set (${e.length} flags)${y.testingComplement?" - Complement":""}:`),a.createElement("div",{className:h.flagList},e.map(e=>a.createElement("span",{key:e,className:h.flagItem},`${e}: ${y.originalFlags[e]?"true":"false"}`)))),y.history.length>0&&a.createElement("div",{className:h.history},a.createElement("div",{className:h.historyHeader},a.createElement("h4",null,"Test History:"),a.createElement(l.$n,{variant:"secondary",onClick:w},"Copy History")),y.history.map((e,r)=>a.createElement("div",{key:r,className:h.historyItem},a.createElement("span",{className:h.historySubset},`${e.subset.length} flags${e.isComplement?" (complement)":""}`),a.createElement("span",{className:`${h.historyResult} ${h[e.result]}`},"success"===e.result?"Bug Present":"failure"===e.result?"Bug Not Present":"Testing...")))))),a.createElement(s.wi,null,a.createElement(s.jk,null,a.createElement(l.$n,{variant:"secondary",onClick:A},"Reset"),a.createElement(l.$n,{variant:"destructive",onClick:()=>S(!0)},"Yes - Bug Present"),a.createElement(l.$n,{variant:"primary",onClick:()=>S(!1)},"No - Bug Not Present"))))},L=()=>y?a.createElement(a.Fragment,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,"Feature Flag Bisector - Complete")),a.createElement(s.nB,null,a.createElement("div",{className:h.section},a.createElement("h3",{className:h.sectionTitle},"\u{1F389} Culprit Found!"),a.createElement("p",{className:h.description},"The bisection algorithm has identified the feature flag responsible for the bug."),a.createElement("div",{className:h.currentState},a.createElement("h4",null,"Culprit Feature Flag:"),a.createElement("div",{className:h.flagList},a.createElement("span",{className:`${h.flagItem} ${h.culpritFlag}`},`${y.culpritFlag}: ${y.originalFlags[y.culpritFlag]?"true":"false"}`))),y.history.length>0&&a.createElement("div",{className:h.history},a.createElement("div",{className:h.historyHeader},a.createElement("h4",null,"Test History:"),a.createElement(l.$n,{variant:"secondary",onClick:w},"Copy History")),y.history.map((e,r)=>a.createElement("div",{key:r,className:h.historyItem},a.createElement("span",{className:h.historySubset},`${e.subset.length} flags${e.isComplement?" (complement)":""}`),a.createElement("span",{className:`${h.historyResult} ${h[e.result]}`},"success"===e.result?"Bug Present":"Bug Not Present")))))),a.createElement(s.wi,null,a.createElement(s.jk,null,a.createElement(l.$n,{variant:"secondary",onClick:A},"Start New Bisection"),a.createElement(l.$n,{variant:"primary",onClick:()=>r.props.close({source:"button"})},"Close")))):null,O=()=>y?a.createElement(a.Fragment,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,"Feature Flag Bisector - Complex Interaction")),a.createElement(s.nB,null,a.createElement("div",{className:h.section},a.createElement("h3",{className:h.sectionTitle},"\u26A0\uFE0F Complex Feature Flag Interaction Detected"),a.createElement("p",{className:h.description},"The bug appears to be caused by a complex interaction between multiple feature flags, rather than a single flag. This means the bug only occurs when specific combinations of flags are enabled together."),a.createElement("div",{className:h.currentState},a.createElement("h4",null,"Last Known Working Set:"),a.createElement("div",{className:h.flagList},Object.entries(y.lastWorkingSet||{}).map(([e,r])=>a.createElement("span",{key:e,className:h.flagItem},`${e}: ${r?"true":"false"}`)))),y.history.length>0&&a.createElement("div",{className:h.history},a.createElement("div",{className:h.historyHeader},a.createElement("h4",null,"Test History:"),a.createElement(l.$n,{variant:"secondary",onClick:w},"Copy History")),y.history.map((e,r)=>a.createElement("div",{key:r,className:h.historyItem},a.createElement("span",{className:h.historySubset},`${e.subset.length} flags${e.isComplement?" (complement)":""}`),a.createElement("span",{className:`${h.historyResult} ${h[e.result]}`},"success"===e.result?"Bug Present":"Bug Not Present")))))),a.createElement(s.wi,null,a.createElement(s.jk,null,a.createElement(l.$n,{variant:"secondary",onClick:A},"Start New Bisection"),a.createElement(l.$n,{variant:"primary",onClick:()=>r.props.close({source:"button"})},"Close")))):null;return(0,d.k)().internal_prototyping_debug_tool||(0,d.k)().internal_only_debug_tools?a.createElement(c.bL,{manager:r,width:"lg"},a.createElement(s.vo,null,(()=>{if(y&&"input"!==y.phase){if("bisecting"===y.phase)return N();if("complete"===y.phase)return L();if("complex_interaction"===y.phase)return O()}return C()})())):null},E)},477539:(e,r,n)=>{n.d(r,{b:()=>m});var a=n(848318),i=n(536384),o=n.n(i),s=n(264478),l=n(297638),c=n(744577),d=n(696786),u=n(642775),p=n(939506);function m(e){let r=(0,d.GS)(),n=void 0!==e.media,i=void 0!==e.title,m=(e.stepCounter||e.primaryCta||e.secondaryCta||e.overrideFooter)!==void 0;return a.createElement(a.Fragment,null,a.createElement(u.AT,{isTooltip:e.isTooltip,title:e.title,description:e.description,onClose:e.onClose,emphasized:e.emphasized,hideCloseButton:e.hideCloseButton}),i&&!r&&a.createElement(s.Kz,{direction:"y",multiple:n?1.5:1}),n&&a.createElement(a.Fragment,null,e.media,!r&&a.createElement(s.Kz,{direction:"y",multiple:2})),i&&a.createElement("div",{className:o()(l.s.font11.fontNormal.lh16.$,p.g),style:c.sx.add({letterSpacing:"0.055px"}).$},e.description),m&&a.createElement(a.Fragment,null,!r&&a.createElement(s.Kz,{direction:"y",multiple:n||!i?2:3}),e.overrideFooter?e.overrideFooter:a.createElement(u.CJ,{stepCounter:e.stepCounter,primaryCta:e.primaryCta,secondaryCta:e.secondaryCta,emphasized:e.emphasized})))}},45937:(e,r,n)=>{n.d(r,{w:()=>d,y:()=>c});var a=n(848318),i=n(297638),o=n(744577),s=n(696786),l=n(828496);function c(e){let r=(0,s.GS)();return a.createElement("div",{className:l.Z,style:o.sx.colorIconOnbrand.colorBorder.bSolid.bb1.flex.add({aspectRatio:e.aspectRatio.toString()}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("img",{src:e.src,alt:e.alt,className:i.s.flex.justifyCenter.alignCenter.overflowHidden.$}))}function d(e){let r=(0,s.GS)();return a.createElement("div",{className:l.Z,style:o.sx.colorIconOnbrand.flex.if(!e.hideBorder,o.sx.colorBorder.bSolid.bt1.bb1).add({aspectRatio:e.aspectRatio.toString()}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial","aria-hidden":"true",style:o.sx.flex.justifyCenter.alignCenter.overflowHidden.$},a.createElement("source",{src:e.src,type:"video/mp4"})))}},491059:(e,r,n)=>{n.d(r,{j:()=>i});var a=n(848318);function i(e){(0,a.useEffect)(()=>{let r=r=>{"Escape"===r.key&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e])}},566901:(e,r,n)=>{n.d(r,{xx:()=>T});var a=n(848318),i=n(162796),o=n(309488),s=n(93275),l=n(531788),c=n(264478),d=n(297638),u=n(967688),p=n(744577),m=n(523669),_=n(957872),h=n(863270),g=n(696786),f=n(353231),E=n(446951),y=n(656012);function b(e){let{trackingContextName:r,trackingProperties:n,trackingEnabled:i,...o}=e;return a.createElement(h.fu,{name:r,properties:n,enabled:i},a.createElement(v,{...o}))}function v(e){let r=(0,h.j6)(),n=i.hS({open:!0,onClose:n=>{switch(n.source){case"button":let a=r.name;return(0,f.Cu)({...r.properties,...null!=a?{trackingContext:a}:{},trackingDescriptor:_.c.CLOSE,text:"Close"}),e.onClose("close_button_clicked");case"outside":return e.onClose("modal_background_clicked");case"escape":return e.onClose("escape_button_pressed");case"other":return e.onClose("other")}},preventUserClose:e.preventUserClose});return a.createElement(o.bL,{manager:n,width:e.width??700,overrideCloseButtonColor:e.closeButtonColor,height:e.dynamicHeight?"dynamic":void 0},a.createElement(s.vo,null,e.children))}function T(e){return a.createElement(b,{...e},"landscape"===e.orientation?a.createElement(S,{...e}):a.createElement(I,{...e}),a.createElement(L,{stepCounter:e.stepCounter}))}function I(e){let r=(0,g.GS)();return a.createElement("div",{className:d.s.flex.$},a.createElement("div",{className:d.s.flex.flexColumn.justifyCenter.p32.$},a.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).$,style:p.sx.add({letterSpacing:"-0.456px"}).$},e.title),a.createElement(c.Kz,{direction:"y",multiple:1}),a.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:p.sx.add({letterSpacing:"-0.084px"}).$},e.description),(e.primaryCta||e.secondaryCta)&&a.createElement(a.Fragment,null,a.createElement(c.Kz,{direction:"y",multiple:3}),a.createElement("div",{className:d.s.flex.gap8.$},e.primaryCta&&a.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta}),e.secondaryCta&&a.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}))),e.disclaimerFooter&&a.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.pt8.$},e.disclaimerFooter)),e.media)}function S(e){let r=(0,g.GS)();return a.createElement("div",{className:d.s.flex.flexColumn.$},e.media,a.createElement("div",{className:d.s.flex.pl32.pr32.pt32.pb24.gap32.$},a.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).w200.flexShrink0.$,style:p.sx.add({letterSpacing:"-0.456px"}).$},e.title),a.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:p.sx.add({letterSpacing:"-0.084px"}).$},e.description)),a.createElement("div",{className:d.s.flex.pl32.pr32.gap8.justifyEnd.$},e.secondaryCta&&a.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}),e.primaryCta&&a.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta})),e.disclaimerFooter&&a.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.$},e.disclaimerFooter),a.createElement(c.Kz,{direction:"y",multiple:4}))}function A(e){return a.createElement("div",{className:d.s.absolute.left0.pl8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onBack},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pr12.$},a.createElement(m.In,{icon:"chevron-left-32"}),(0,u.tx)("general.back"))))}function w(e){return a.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onNext},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pl12.$},(0,u.tx)("general.next"),a.createElement(m.In,{icon:"chevron-right-32"}))))}function C(e){return a.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},a.createElement(l.$n,{variant:"ghost",onClick:e.onDone},a.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.$},(0,u.tx)("general.done"))))}function N(e){let r=r=>r+1===e.stepNum;return a.createElement("div",{className:d.s.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>a.createElement("div",{className:d.s.w8.h8.bRadius8.b1.colorBorder.if(r(n),d.s.colorBgInverse,d.s.colorBg).$,key:n})))}function L(e){let{stepCounter:r}=e;if(!r)return null;let n=1===r.stepNum,i=r.stepNum===r.totalNumSteps;return a.createElement("div",{className:d.s.p8.bt1.colorBorder.bSolid.h32.$},a.createElement(N,{stepNum:r.stepNum,totalNumSteps:r.totalNumSteps}),a.createElement(A,{onBack:r.onBack,hidden:n}),a.createElement(w,{onNext:r.onNext,hidden:i}),a.createElement(C,{onDone:r.onNext,hidden:!i}))}n(301168),n(865114),n(31898),n(506794),(0,E.Ju)(()=>null,"FeatureAnnouncement")},56446:(e,r,n)=>{n.d(r,{l:()=>i});var a=n(848318);function i(e,r,n){(0,a.useEffect)(()=>{let a=a=>{e&&r.current&&!r.current.contains(a.target)&&n()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[e,r,n])}},160402:(e,r,n)=>{n.d(r,{M:()=>s});var a=n(848318),i=n(952647),o=n(978877);let s=a.forwardRef((e,r)=>{let n=e.shouldDisableAnimation?{duration:0}:{duration:.2,ease:"easeInOut",translateY:{duration:1}};return a.createElement(i.J,{mode:e.isTooltip?"dark":void 0},a.createElement(o.P.div,{ref:r,animate:"animate",className:e.className,initial:"initial",layout:"position",layoutId:e.shouldDisableAnimation?void 0:"FeatureCallout",role:"tooltip",style:e.style,transition:n,variants:{initial:{translateY:10},animate:{translateY:0},transformTemplate:(r,n)=>e.transformString?`${e.transformString} ${n}`:n}},e.children))})},519932:(e,r,n)=>{n(848318),n(301168),n(382902),n(536384),n(948015),n(156818),n(959750),n(222116),n(249555),n(143628)},605812:(e,r,n)=>{n.d(r,{YY:()=>a,nP:()=>i});let a=new Set(["USER","PLUGIN","AI","REST_API"]),i={MIXED:"MIXED",USER:"USER",PLUGIN:"PLGIN",AI:"AI",INVALID:"INVLD",SYSTEM:"SYSTM",TEST_SETUP:"TEST",REST_API:"REST",ONBOARDING:"ONBRD",AUTOSAVE:"ASAVE"}},568672:(e,r,n)=>{n.d(r,{bU:()=>o,wh:()=>a}),n(19180);let a=new Set(["name","characters","symbolDescription","description","url","canvasName","textContent","sourceCode","summary"]),i=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],a=n?e.substring(1,e.length-1):e;if(i.test(a.toLowerCase()))return e;let o=n?'"':"";return o+a[0]+a.substring(1,a.length-1).replace(/\S/g,"\u2022")+a[a.length-1]+o}},859275:(e,r,n)=>{n.d(r,{p:()=>s});var a=n(848318),i=n(19180),o=n(115753);a.memo(function(){return(0,i.k)().internal_only_debug_tools?a.createElement(c,null):null});let s=a.memo(function(){return(0,i.k)().internal_only_debug_tools?a.createElement(d,null):null}),l={loading:()=>null,error:function(){return a.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(6642),n.e(895)]).then(n.bind(n,441002)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(6642),n.e(895)]).then(n.bind(n,441002)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},236792:(e,r,n)=>{n.d(r,{G2:()=>v});var a=n(660376),i=n(871043),o=n(186606),s=n(19180),l=n(906308),c=n(461979),d=n(70433),u=n(665411),p=n(42725),m=n(72785),_=n(272024),h=n(718374),g=n(873932),f=n(609744),E=n(923251),y=n(811877),b=n(574479);class v extends E.${constructor({name:e,sensitiveTextPolicy:r,type:n,pagesList:a,migrationVersion:i}){super({name:e,sensitiveTextPolicy:r}),this.type=n,this.pagesList=a,this.migrationVersion=i,this.scene=new T(this)}getSearch(){return this.scene.getSearch()}get metadata(){return{"Migration version":this.migrationVersion?.toString()}}setSceneGraphValidationInfo(e){this.sceneGraphValidationInfo=new y.m(this.scene,e)}setNodeWarnings(e){this.nodeWarnings=e}getAdditionalProperties(e){let r=[],n=this.sceneGraphValidationInfo?.generateProperty(e);if(n&&r.push(n),this.pagesList){let n=this.scene.getNodeById(e),a=n?.isPage?n:n?.containingPage;r.push({label:"Dynamic page loading info",children:(0,g.QB)([n&&a&&n!==a&&this.scene.generateNodeLinkItem("Containing page",a.guid),a&&(0,g.B_)("Page status",(()=>{switch((0,u.Fy)(this.pagesList,a.guid)){case o.xal.REQUESTED:return{type:"error",value:"Page loading in progress"};case o.xal.NOT_LOADED:return{type:"error",value:"Page not loaded due to incremental loading"};default:return{type:"nonUserText",value:"Page loaded"}}})())])})}let a=this.nodeWarnings?.get(e);return(a?.length??0)>0&&r.push((0,g.$7)({label:"Runtime warnings",list:a??[],generateChild:(e,r)=>({label:e,value:{type:"error",value:r.message},children:(0,g.QB)([(0,g.B_)("Severity",{type:"nonUserText",value:r.severity}),(0,g.B_)("Message",{type:"nonUserText",value:r.message}),void 0!==r.timestamp&&(0,g.B_)("Time",{type:"timestamp",value:r.timestamp}),r.filePath&&(0,g.B_)("File path",{type:"nonUserText",value:`${r.filePath}${r.lineNumber?`:${r.lineNumber}`:""}`}),r.data&&(0,g.o8)({label:"Data",object:r.data,generateChild:(e,r)=>(0,g.B_)(e,{type:"nonUserText",value:String(r)})})])})})),r}getAdditionalBadges(e){let r=[],n=this.sceneGraphValidationInfo?.generateBadges(e);n&&r.push(...n);let a=this.scene.getNodeById(e);if(a?.isPage&&this.pagesList)switch((0,u.Fy)(this.pagesList,a.guid)){case o.xal.LOADED:break;case o.xal.REQUESTED:r.push({type:"warning",value:"LOADING",title:"Page loading in progress"});break;case o.xal.NOT_LOADED:r.push({type:"warning",value:"NOT LOADED",title:"Page not loaded due to incremental loading"})}let i=this.nodeWarnings?.get(e),s=i?.length??0;return s>0&&r.push({type:"warning",value:`${s} WARNINGS`}),r}}class T extends f.X{constructor(e,r=o.v4N.PRIMARY){super(),this.resource=e,this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableOverridesById=new Map,this.variableCollectionsById=new Map,this.codeFilesById=new Map,this.codeComponentsById=new Map,this.codeLibrariesById=new Map,this.searchDB=new b.H,this.isComplete=!0,this.sceneType=r,this.totalMemoryUsage=this.rootNodes.reduce((e,r)=>e+r.treeMemoryUsage,0)}get document(){return this.rootNodes.find(e=>e.isDocument)}get pages(){return this.document.children}get internalCanvas(){return this.pages.find(e=>e.nodeChange.internalOnly)??null}get rootNodes(){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getRootNodes(this.sceneType)??[])}getNodeById(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getNode(A(e),this.sceneType)??null)}getNodeByGuid(e){return this.fetchNodeFromFullscreen(()=>o.Hcu?.getNodeByGuid(e,this.sceneType)??null)}getChildrenByParentGuid(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getChildrenByParentGuid(e,this.sceneType)??[])}getStyleByStyleId(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getStyle(e,this.sceneType)??null)}getVariableByVariableId(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getVariable(e,this.sceneType)??null)}getVariableOverrideByVariableOverrideId(e){return this.getVariableOverrideFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getVariableOverride(e,this.sceneType)??null)}getVariableCollectionByCollectionId(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getVariableCollection(e,this.sceneType)??null)}getCodeComponentById(e){return this.getCodeComponentFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getCodeComponent(e,this.sceneType)??null)}getCodeFileById(e){return this.getCodeFileFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getCodeFile(e,this.sceneType)??null)}getCodeLibraryById(e){return this.getCodeLibraryFromCache(e)||this.fetchNodeFromFullscreen(()=>o.Hcu?.getCodeLibrary(e,this.sceneType)??null)}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getStyleConsumers(e,this.sceneType)??[])}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getConsumedStyles(A(e),this.sceneType)??[])}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getConsumedVariables(A(e),this.sceneType)??[])}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getVariablesInCollection(e,this.sceneType)??[])}getVariableOverridesInExtendedCollection(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getVariableOverridesInExtendedCollection(e,this.sceneType)||[])}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getNodesWithExplicitModeForVariableSet(e,this.sceneType)??[])}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getVariableConsumers(e,this.sceneType)||[])}getDsaComponentCounts(e){let r=o.Hcu.getDsaComponentCounts(A(e),this.sceneType);return{all:this.convertDsaAssetCounts(r.all),unnested:this.convertDsaAssetCounts(r.unnested)}}getDsaStyleCounts(e){let r=o.Hcu.getDsaStyleCounts(A(e),this.sceneType);return{all:this.convertDsaAssetCounts(r.all),unnested:this.convertDsaAssetCounts(r.unnested)}}getDsaVariableCounts(e){let r=o.Hcu.getDsaVariableCounts(A(e),this.sceneType);return{all:this.convertDsaAssetCounts(r.all),unnested:this.convertDsaAssetCounts(r.unnested)}}convertDsaAssetCounts(e){let r=[];for(let n of e){let e=this.createAndCacheNode(n.asset);e&&r.push({node:e,count:n.count})}return r.sort((e,r)=>r.count-e.count),r}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>o.Hcu?.getDirectVariableDependenciesToVariable(e,this.sceneType)??[])}getPropDefs(e){return o.Hcu?.getPropDefs(A(e),this.sceneType)??[]}getCombinedPropAssignments(e){return o.Hcu?.getCombinedPropAssignments(A(e),this.sceneType)??[]}getTransitiveDependencyPaths(e,r){return o.Hcu?.getTransitiveDependencyPaths(A(e),r,this.sceneType)??[]}getAllOverridesForLayer(e){let r=o.Hcu?.getLayerOverrides(A(e),this.sceneType);return r?r.map(e=>({...e,fields:l.w.decodeMessage(e.fields).nodeChanges[0]})):[]}getDSDOverridesForLayer(e){let r=o.Hcu?.getLayerDSDOverrides(A(e),this.sceneType);if(r&&r.length)return l.w.decodeMessage(r).nodeChanges?.[0]}getAllSublayerInfoForImmutableFrame(e){return o.Hcu?.getImmutableFrameSubLayerInfo(A(e),this.sceneType)??new Map}getOverrideStash(e){let r=o.Hcu?.getOverrideStash(A(e),this.sceneType);return r?r.map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:l.w.decodeMessage(e.fields).nodeChanges[0]}))})):[]}getTextInsertionStyle(e){let r;let n=o.Hcu?.getTextInsertionStyle(A(e),this.sceneType);if(!n||0===n.length)return null;try{r=l.w.decodeMessage(n).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),null}return r?r.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),null):r[0]:(console.warn("FigmaScope: buffer did not contain node changes"),null)}getBlobByIndex(e){return _.y}getNodeByKiwiOverridePath(e,r){let n=[e,...h.dB.fromKiwi(r)];return this.getNodeById(S(n))}get supportsNodePreviews(){switch(this.resource.type){case"editor":return!0;case"viewer":return!1;case"standalone":return"hide"!==this.resource.sensitiveTextPolicy}}getNodeFromCache(e){return this.nodesById.get(e)??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableOverrideFromCache(e){return this.variableOverridesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}getCodeComponentFromCache(e){return this.codeComponentsById.get(e)??null}getCodeFileFromCache(e){return this.codeFilesById.get(e)??null}getCodeLibraryFromCache(e){return this.codeLibrariesById.get(e)??null}fetchNodeFromFullscreen(e){let r=null;try{r=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return r?this.createAndCacheNode(r):null}fetchNodesFromFullscreen(e){let r=[];try{r=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return r.map(e=>this.createAndCacheNode(e)).filter(i.Vq)}createAndCacheNode(e){let r;try{r=l.w.decodeNodeChange(e.nodeChange)}catch(e){return console.error("FigmaScope: error decoding node changes",e),null}let n=h.dB.fromStrings(e.stablePath),a=S(n),i=this.nodesById.get(a);if(i)return i;let s=new I(a,{...e,nodeChange:r,stablePath:n},this);return this.nodesById.set(s.id,s),s.styleId&&this.stylesById.set(s.styleId,s),s.isVariable&&s.variableId&&this.variablesById.set(s.variableId,s),s.isVariableCollection&&s.variableCollectionId&&this.variableCollectionsById.set(s.variableCollectionId,s),s.isVariableOverride&&s.variableOverrideId&&this.variableOverridesById.set(s.variableOverrideId,s),s.isCodeFileAsset&&s.codeFileId&&this.codeFilesById.set(s.codeFileId,s),s.isCodeLibraryAsset&&s.codeLibraryId&&this.codeLibrariesById.set(s.codeLibraryId,s),s.isCodeComponentAsset&&s.codeComponentId&&this.codeComponentsById.set(s.codeComponentId,s),"standalone"===this.resource.type&&s.isPrimaryInstance&&o.Hcu?.materializeInstance(s.guid,this.sceneType),s}getSearch(e){if(this._indexedSearchDB)return this._indexedSearchDB;let r=0,n=this.rootNodes,a=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let a=n.pop();if(!a)return;e&&++r%5e3==0&&e(r),this.searchDB.indexObject(a),n.push(...a.children.filter(e=>e.guid))}await a()})},i=a().then(()=>this.searchDB);return this._indexedSearchDB=i}}class I extends m.E{constructor(e,r,n){super(e,r.nodeChange,n),this.id=e,this.data=r,this.scene=n}get type(){return this.isNestedInstance?"NESTED_INSTANCE":super.type}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get consumedStyleIds(){return this.scene.getConsumedStyles(this.id).map(e=>e.styleId).filter(i.Vq)}get consumedStyles(){return this.scene.getConsumedStyles(this.id)}get consumedVariableIds(){return this.consumedVariables.map(e=>e.variableId).filter(i.Vq)}get consumedVariables(){return this.scene.getConsumedVariables(this.id)}get key(){return super.key??o.Egt?.getAssetKeyForPublish(this.guid)??null}get stablePath(){return this.data.stablePath}get isTracked(){return this.data.tracked}get isUntracked(){return this.stablePath.length>1}get containingTrackedNode(){return this.isTracked?this:this.parent?.containingTrackedNode??null}get isPrimaryInstance(){return this.isInstance&&this.isTracked}get containingInstance(){return this.findAncestor(e=>e.isInstance)}get containingPrimaryInstance(){return this.findAncestor(e=>e.isPrimaryInstance)}get containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame)}get isInstanceSublayer(){return null!=this.containingInstance}get isImmutableFrameSublayer(){return null!=this.containingImmutableFrame}get isNestedInstance(){return this.isInstance&&this.isInstanceSublayer}get isSwappedNestedInstance(){return this.isNestedInstance&&null!=this.nodeChange.overriddenSymbolID}get ownMemoryUsage(){return(this._ownMemoryUsage=this._ownMemoryUsage??o.Hcu?.getNodeMemoryUsage(this.stablePath,this.scene.sceneType))??0}get treeMemoryUsage(){return(this._treeMemoryUsage=this._treeMemoryUsage??o.Hcu?.getSubtreeMemoryUsage(this.stablePath,this.scene.sceneType))??0}secondaryId(){return this.stablePath.length>1?h.dB.format(this.stablePath.slice(1)):this.overrideKey?h.c1.format(this.overrideKey):this.overriddenVariableId?this.overriddenVariableId:null}generateDisplayProperties(){let e=super.generateDisplayProperties(),r=e.leftBadges.map(e=>"type"===e.type?{...e,tracked:this.isTracked}:e);return{...e,leftBadges:r,secondaryId:this.secondaryId(),memoryFraction:(0,d.KV)(this.treeMemoryUsage,this.scene.totalMemoryUsage)}}generateRawProperties(){return[{label:"Tracked fields",children:super.generateRawProperties(),expandByDefault:!0},{label:"Untracked fields",children:this.generateNonKiwiFieldProperties(this.data.untrackedFields),expandByDefault:!0},{label:"Derived properties",children:this.generateNonKiwiFieldProperties(this.data.derivedProperties),expandByDefault:!0}]}generateTrackingInfoItem(){return(0,g.B_)("Node tracked",{type:"boolean",value:this.isTracked,sensitive:!1})}generateNonKiwiFieldProperties({jsonSerialized:e,stringSerialized:r}){let n=[],a=[];for(let[r,a]of Object.entries(e))null!=a&&n.push(this.scene.generateNodeFieldItem((0,c.zS)(r),a));for(let[e,n]of Object.entries(r))a.push({label:(0,c.zS)(e),value:{type:"error",value:"No toJson() support"},children:[(0,g.B_)("Debug string",{type:"nonUserText",value:n,sensitive:!1})]});return(0,g.QB)(n).concat((0,g.QB)(a))}generateComputedProperties(){let e=(0,g.QB)([...super.generateComputedProperties(),this.generateMemoryUsageItem(),this.generateGeometrySection(),this.generateTextInfoItem()]),r=this.generateNodePreviewItem();return r&&e.push(r),e}generateMemoryUsageItem(){return{label:"Memory usage",children:[(0,g.B_)("Own data",{type:"numeric",value:this.ownMemoryUsage}),(0,g.B_)("Tree data",{type:"numeric",value:this.treeMemoryUsage})],expandByDefault:!0}}generateGeometryInfo(e){return 0===e.segments.length?[]:[(0,g.$7)({label:"vertices",list:e.vertices,generateChild:(e,r)=>(0,g.U1)(e,r)}),(0,g.$7)({label:"segments",list:e.segments,generateChild:(e,r)=>(0,g.U1)(e,r)}),(0,g.$7)({label:"regions",list:e.regions,generateChild:(e,r)=>(0,g.U1)(e,r)})]}generateGeometrySection(){let e=o.Hcu?.getGeometryInfo(A(this.id),this.scene.sceneType);return e?{label:"Geometry",children:(0,g.QB)([(0,g.B_)("fillGeometryInFileMatchesCacheGeometry",{type:"boolean",value:e.fillGeometryInFileMatchesCacheGeometry}),{label:"fillGeometryField",children:this.generateGeometryInfo(e.fillGeometryField)},{label:"fillGeometryCacheValue",children:this.generateGeometryInfo(e.fillGeometryCacheValue)},(0,g.B_)("strokeGeometryInFileMatchesCacheGeometry",{type:"boolean",value:e.strokeGeometryInFileMatchesCacheGeometry}),{label:"strokeGeometryField",children:this.generateGeometryInfo(e.strokeGeometryField)},{label:"strokeGeometryCacheValue",children:this.generateGeometryInfo(e.strokeGeometryCacheValue)}])}:null}generateDesignSystemsInfoItem(){return(0,g.Sv)(super.generateDesignSystemsInfoItem(),[this.generateVariableOverridesInExtendedCollectionItem(),this.generateComponentPropDefsItem(),this.generateComponentPropAssignmentsItem(),this.generateSymbolDependencyPathsItem(o.Uze.FROM),this.generateSymbolDependencyPathsItem(o.Uze.TO),this.generateLayerOverridesSection(),this.generateLayerDSDOverridesSection(),this.generateDsaSection(),this.generateBackingLayerItem()])}generateTextInfoItem(){if("TEXT"!==this.type)return null;let e=this.scene.getTextInsertionStyle(this.id);return{label:"Text info",children:(0,g.QB)([e&&(0,g.o8)({label:"Text insertion style",object:e,generateChild:this.scene.generateNodeFieldItem,showChildCount:!0})])}}generateNodePreviewItem(){return this.scene.supportsNodePreviews&&this.isRenderingNode&&!this.isStateGroup?{label:"Node preview",children:[(0,g.B_)("",{type:"nodeThumbnail",value:this.guidObj})]}:null}generateOverrideItem(e,r){let n=this.scene.getNodeByKiwiOverridePath(e.guid,r.guidPath??{});return{...super.generateOverrideItem(e,r),value:n?{type:"nodeGuid",value:n.guid,scene:this.scene}:void 0}}generateVariableOverridesInExtendedCollectionItem(){return this.isExtendedVariableCollection?{label:"Variable overrides in extended collection",children:this.scene.getVariableOverridesInExtendedCollection(this.variableCollectionId).map(e=>({variable:e.overriddenVariableId?this.scene.getVariableByVariableId(e.overriddenVariableId):null,varOverride:e})).sort((e,r)=>(e.variable?.name??"").localeCompare(r.variable?.name??"")).map(({variable:e,varOverride:r})=>this.scene.generateVariableOverrideLinkItem(e?.name??"<unknown>",r.variableOverrideId))}:null}generateComponentPropDefsItem(){if(!this.isSymbol&&!this.isStateGroup)return null;let e=this.scene.getPropDefs(this.id),r=this.isState?this.parentGuid:null;return{label:"Component prop defs",children:e.map(e=>({label:h.c1.format(e.defID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,g.B_)("Is explicit",{type:"boolean",value:e.isExplicit}),(0,g.B_)("Default value",this.generateComponentPropValue(e.propType,e.defaultValue)),...this.generateComponentPropProperties(e,r)]}))}}generateComponentPropAssignmentsItem(){if(!this.isInstance)return null;let e=this.scene.getCombinedPropAssignments(this.id),r=this.backingStateGroup?.guid??null;return{label:"Component prop assignments (combined)",children:e.map(e=>({label:h.c1.format(e.assignmentID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,g.B_)("Value",this.generateComponentPropValue(e.propType,e.assignmentValue)),(0,g.B_)("Is mixed",{type:"boolean",value:e.isMixed}),...this.generateComponentPropProperties(e,r)]}))}}generateComponentPropProperties(e,r){let{error:n,propType:a,explicitDefID:i,refNodes:o}=e;return(0,g.QB)([!!n&&(0,g.B_)("Error",{type:"error",value:n}),!!a&&(0,g.B_)("Prop type",{type:"nonUserText",value:(0,p.xb)(a)}),!!i&&(0,g.B_)("Explicit def ID",{type:"genericGuid",value:h.c1.fromString(i)}),r&&this.scene.generateNodeLinkItem("Containing state group",r),(0,g.$7)({label:"Ref Nodes",list:o,generateChild:(e,r)=>this.generateRefNodeItem(e,r)})])}generateComponentPropValue(e,r){switch(e){case o.J0O.BOOL:return{type:"boolean",value:r.boolValue};case o.J0O.TEXT:return{type:"userInputtedText",value:r.textValue};case o.J0O.INSTANCE_SWAP:return{type:"nodeGuid",value:h.c1.fromString(r.instanceSwapValue),scene:this.scene};default:return r.untypedValue?{type:"nonUserText",value:r.untypedValue}:{type:"error",value:"Unknown prop type"}}}generateRefNodeItem(e,r){return{label:e,children:(0,g.QB)([this.scene.generateNodeLinkItem("Ref node",h.c1.fromString(r.refNodeGuid)),(0,g.B_)("Ref field",{type:"nonUserText",value:r.nodeField}),null!=r.paintIndex&&(0,g.B_)("Ref paint index",{type:"numeric",value:r.paintIndex})]),expandByDefault:!0}}generateSymbolDependencyPathsItem(e){return this.isPrimaryInstance||this.isSymbol?(0,g.$7)({label:e===o.Uze.FROM?"Symbol Dependencies":"Symbol Dependents",list:this.scene.getTransitiveDependencyPaths(this.id,e),generateChild:(r,{edges:n})=>({label:r,value:{type:"nodeGuid",value:h.c1.fromString(e===o.Uze.FROM?n[n.length-1].toGuid:n[0].fromGuid),scene:this.scene},children:1===n.length?this.generateSymbolDependencyProperties(n[0],!1):[(0,g.B_)("Type",{type:"nonUserText",value:"Transitive"}),(0,g.$7)({label:"Edges",list:n,generateChild:(e,r)=>({label:e,children:this.generateSymbolDependencyProperties(r,!0),expandByDefault:!0}),expandByDefault:!0})]})}):this.isStateGroup?(0,g.$7)({label:e===o.Uze.FROM?"Symbol dependencies by state":"Symbol dependents by state",list:this.children,generateChild:(r,n)=>({...n.generateSymbolDependencyPathsItem(e),label:`State ${r}`,value:{type:"nodeGuid",value:n.guid,scene:this.scene}})}):null}generateSymbolDependencyProperties({fromGuid:e,toGuid:r,type:n,pathToOverride:i,propDefId:s},l){let c=[(0,g.B_)("Type",{type:"nonUserText",value:(()=>{switch(n){case o.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case o.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case o.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case o.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case o.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case o.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case o.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case o.SoG.INVALID:return"Invalid";default:(0,a.xb)(n)}})()})];return l&&(c.push(this.scene.generateNodeLinkItem("From",h.c1.fromString(e))),c.push(this.scene.generateNodeLinkItem("To",h.c1.fromString(r)))),i.length>1&&c.push((0,g.B_)("Path to override",{type:"guidPath",value:h.dB.fromStrings(i)})),s&&h.c1.isValid(s)&&c.push((0,g.B_)("Prop def id",{type:"genericGuid",value:h.c1.fromString(s)})),c}generateBackingLayerItem(){let e=o.Hcu?.getBackingLayerId(A(this.id),this.scene.sceneType);return e?this.scene.generateNodeLinkItem("Backing layer",h.c1.fromString(e)):null}generateLayerOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getAllOverridesForLayer(this.id),r={};for(let{primaryInstanceId:n,containingSymbolId:a,fields:i,savedLevel:o,inheritanceLevel:s}of e)for(let[e,l]of Object.entries(i))r[e]=r[e]||[],r[e][s]={primaryInstanceId:n,containingSymbolId:a,value:l,savedLevel:o};let n=Object.keys(r).sort();return 0===n.length?null:(0,g.$7)({label:"Layer overrides",list:n,expandByDefault:!1,generateChild:(e,n)=>{let a=r[n],o=a.findIndex(i.Vq),s=a[o].value;return{label:n,value:{type:"metadata",value:0===o?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...this.scene.generateNodeFieldItem(n,s),label:"Resolved value"},{label:"Sources",expandByDefault:!1,children:(0,g.QB)(a.map(({primaryInstanceId:e,containingSymbolId:r,value:a,savedLevel:i},o)=>({label:0===o?"Direct override":"Inherited from",key:`Level ${o}`,value:r?{type:"nodeGuid",value:h.c1.fromString(r),scene:this.scene}:void 0,children:(0,g.QB)([{...this.scene.generateNodeFieldItem(n,a),label:"Value"},i>0&&(0,g.B_)("Saved level",{type:"numeric",value:i}),this.scene.generateNodeLinkItem("Primary instance",h.c1.fromString(e))])})))}]}}})}generateLayerDSDOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getDSDOverridesForLayer(this.id);if(!e)return null;let r={};for(let[n,a]of Object.entries(e))r[n]=a;return(0,g.$7)({label:"Layer DSD overrides",list:Object.keys(r),expandByDefault:!1,generateChild:(e,n)=>this.scene.generateNodeFieldItem(n,r[n])})}generateDsaSection(){if(!(0,s.k)().dsa_figmascope)return null;let e=this.scene.getDsaComponentCounts(this.id),r=this.scene.getDsaStyleCounts(this.id),n=this.scene.getDsaVariableCounts(this.id);return{label:"Design system analyltics",children:[{label:"Components",children:[{label:"All",children:this.generateDsaComponentCounts(e.all)},{label:"Unnested",children:this.generateDsaComponentCounts(e.unnested)}]},{label:"Styles",children:[{label:"All",children:this.generateDsaStyleCounts(r.all)},{label:"Unnested",children:this.generateDsaStyleCounts(r.unnested)}]},{label:"Variables",children:[{label:"All",children:this.generateDsaVariableCounts(n.all)},{label:"Unnested",children:this.generateDsaVariableCounts(n.unnested)}]}]}}generateDsaComponentCounts(e){return e.filter(({node:e})=>!!e.guid).map(({node:e,count:r})=>({label:e.name,key:e.id,value:{type:"metadata",value:r},children:[this.scene.generateNodeLinkItem("node",e.guid),(0,g.B_)("count",{type:"numeric",value:r})]}))}generateDsaStyleCounts(e){return e.filter(({node:e})=>!!e.styleId).map(({node:e,count:r})=>({label:e.name,key:e.id,value:{type:"metadata",value:r},children:[this.scene.generateStyleLinkItem("style",e.styleId),(0,g.B_)("count",{type:"numeric",value:r})]}))}generateDsaVariableCounts(e){return e.filter(({node:e})=>!!e.variableId).map(({node:e,count:r})=>({label:e.name,key:e.id,value:{type:"metadata",value:r},children:[this.scene.generateVariableLinkItem("var",e.variableId),(0,g.B_)("count",{type:"numeric",value:r})]}))}}function S(e){return h.SW.fromString(e.join(";"))}function A(e){return h.dB.fromStrings(e.split(";"))}},574479:(e,r,n)=>{n.d(r,{H:()=>u});var a=n(656470),i=n.n(a),o=n(989232),s=n(88217),l=n(957226),c=n(457424),d=n(772824);class u{constructor(){this.indices=Object.entries(l.L).map(([e,r])=>new c.L({property:e,aliases:r}))}indexObject(e){for(let r of this.indices)r.indexObject(e)}indexObjects(e){for(let r of this.indices)for(let n of e)r.indexObject(n)}searchWithText(e){return this.search((0,d.B)(e))}searchWithProperties(e){return this.search((0,d.R)(e))}search(e){let r;for(let n of(o.definedAnalyticsHandler.trackDefinedEvent("figmascope.search",{used_operators:e.length>1||e[0]?.property!=null}),e)){let e=new Map;for(let r of this.getIndicesToSearchForToken(n))for(let a of r.search(n)){let{object:r,...n}=a;e.has(r)?e.get(r).matches.push(n):e.set(r,{object:r,matches:[n]})}r=r?(0,s.wD)(r,e,(e,r,n)=>({object:e,matches:r.matches.concat(n.matches)})):e}return r?i()(Array.from(r.values())).sort(p):[]}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(r=>{if(r.property.toLowerCase()===e)return!0;for(let n of r.aliases)if(n.toLowerCase()===e)return!0;return!1}))}}function p(e,r){let n=e.matches.filter(e=>e.isExact).length;return r.matches.filter(e=>e.isExact).length-n||r.matches.length-e.matches.length}},820067:(e,r,n)=>{n.d(r,{P:()=>A});var a=n(848318),i=n(889276),o=n(360180),s=n(430385),l=n(382902),c=n(349048),d=n(73823),u=n.n(d),p=n(989232),m=n(410441),_=n(865114),h=n(297638),g=n(925085),f=n(367378),E=n(471477),y=n(110210),b=n(729307),v=n(249673),T=n(27776);let I=(0,m.jz)(T.hVg),S=(0,m.jz)(T.k$X),A=a.memo(function({panel:e,items:r,diffItems:n,extraItems:c}){let[d,u]=(0,l.fp)("middle"===e?y.l3:y._Y),[p,m]=(0,l.fp)("middle"===e?y.A9:y.fQ),_=a.useMemo(()=>{let e=[];for(let r of c??[])e=e.concat(D(r,0,void 0,d,p));let a=R(r??[],void 0,p),i=null!=n,o=R(n??[],void 0,p);for(let r of(0,s.TR)(a,o,e=>L(e,void 0)))e=i?e.concat(k(r.left,r.right,0,void 0,d,p)):e.concat(D(r.left??r.right,0,void 0,d,p));return e},[r,n,c,d,p]),h=a.createRef();function g(e){if(void 0!==_[e]){let r=_[e].value;if(r&&"nodeThumbnail"===r.type){let e=(0,E.D)(r.value);if(e)return e.renderHeight+S}}return I}return a.useEffect(()=>{h.current?.resetAfterIndex(0)},[h,_]),a.createElement(i.A,{disableWidth:!0},({height:r})=>a.createElement(o._m,{ref:h,itemSize:g,itemCount:_.length,height:r,itemKey:e=>_[e].expansionKey,itemData:{panel:e,displayedProperties:_,togglePropertyExpanded:u,togglePropertyPinned:m},width:"100%"},w))});function w({style:e,index:r,data:{panel:n,displayedProperties:i,togglePropertyExpanded:o,togglePropertyPinned:s}}){let l=i[r],d=(0,_.ZC)(l),[u,p]=a.useState(!1),m=a.useRef(void 0);a.useEffect(()=>{d&&null!=(0,f.Ru)(d,l)&&(clearTimeout(m.current),p(!0),m.current=setTimeout(()=>p(!1),250))},[l,d]),a.useEffect(()=>()=>clearTimeout(m.current),[]);let h=(0,c.zN)(e);return a.createElement(N,{...l,style:h,isChanging:u,panel:n,index:r,togglePropertyExpanded:o,togglePropertyPinned:s})}let C=a.memo(function({diffValue:e,value:r}){return a.createElement(g.Y,{width:"hug-contents"},null!=e&&a.createElement(b.M,{value:e}),null!=e&&a.createElement("span",null,"\u21E8"),null!=r&&a.createElement(b.M,{value:r}))}),N=a.memo(function({childExpansionKeys:e,expansionKey:r,indent:n,isExpanded:i,isChanging:o,isPinned:s,isLeaf:l,isImage:c,label:d,index:u,style:m,value:_,diffValue:f,diffType:E,panel:y,togglePropertyExpanded:b,togglePropertyPinned:T}){return a.createElement(v.Z,{changeType:E,indent:c?0:n,isChanging:o,isExpanded:i,isLeaf:l,isPinned:s,keyboardNavigationPath:[u],style:c?{...m,height:"fit-content",width:"100%",alignItems:"flex-start"}:m,toggleExpanded:n=>{i||p.definedAnalyticsHandler.trackDefinedEvent("figmascope.expand_row",{field:d,panel:y}),b(r,n?e:[])},togglePinned:c?void 0:()=>{s||p.definedAnalyticsHandler.trackDefinedEvent("figmascope.pin_row",{field:d,panel:y}),T(r)}},c?a.createElement(C,{diffValue:f,value:_}):a.createElement(a.Fragment,null,a.createElement("span",{className:h.s.colorText.$},d),a.createElement("div",{className:h.s.ellipsis.noWrap.overflowHidden.alignCenter.$},a.createElement(C,{diffValue:f,value:_}))),a.createElement(g.M,null))}),L=(e,r)=>{let n=e.key??e.label;return r?[r,n].join("."):n},O=(e,r)=>!!r[e],R=(e,r,n)=>[...e.filter(e=>O(L(e,r),n)),...e.filter(e=>!O(L(e,r),n))],P=(e,r,n,a)=>{if(e)return!1;let i=a[r];return null!=i?i:n??!1},D=(e,r,n,a,i)=>{let o=L(e,n),s=0===e.children.length,l=e.value?.type==="nodeThumbnail",c=P(s,o,e.expandByDefault,a),d=u()(R(e.children??[],o,i),e=>D(e,r+1,o,a,i)),p={label:e.label,value:e.value,isExpanded:c,isLeaf:s,isImage:l,indent:r,expansionKey:o,childExpansionKeys:u()(d,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:O(o,i)};return c?[p,...d]:[p]},k=(e,r,n,a,i,o)=>{let l=e??r;if(!l)throw Error("Nothing to diff");if(e&&r&&L(e,a)!==L(r,a))throw Error("Mismatched keys");let c=L(l,a),d=R(e?.children??[],c,o),p=R(r?.children??[],c,o),m=(0,s.TR)(d,p,e=>L(e,c)),_=!1,h=u()(m,({left:e,right:r})=>{let a=k(e,r,n+1,c,i,o);return _=_||null!=a[0].diffType,a}),g=0===m.length,E=(0,f.Ru)(e,r,_),y=P(g,c,l.expandByDefault??!1,i),b=l.value?.type==="nodeThumbnail",v={label:l.label,value:l.value,diffValue:e&&r&&E?r?.value:void 0,isExpanded:y,isLeaf:g,isImage:b,indent:n,expansionKey:c,childExpansionKeys:u()(h,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:O(c,o),diffType:E};return y?[v,...h]:[v]}},259736:(e,r,n)=>{n.d(r,{A:()=>R});var a=n(848318),i=n(301168);n(186606),n(630677);var o=n(656329);n(262709),n(456028),n(719038),n(330362),n(587745),n(92338),n(7148);var s=n(730143);n(125761),n(531788),n(952647),n(613900),n(410725),n(720522);var l=n(967688);n(572073),n(453370),n(55116),n(677334),n(407638),n(259964),n(726073),n(849097),n(478905),n(566892),n(437631),n(398612),n(637640),n(103661),n(946778),n(311045);var c=n(178806),d=n(24052),u=n(31898),p=n(863270);n(995218),n(169567),n(209595),n(688577),n(887868);var m=n(162796),_=n(309488),h=n(93275),g=n(536384),f=n.n(g),E=n(989232),y=n(238444),b=n(72462),v=n(589455),T=n(264478),I=n(50429),S=n(297638),A=n(314979),w=n(446951),C=n(779279),N=n(767790),L=n(989426);(0,w.Ju)(function(e){let r=(0,i.wA)(),[n,g]=a.useState(""),[w,O]=a.useState(!1),R=(0,s.tS)(),P=(0,i.d4)(e=>R?e.loadingState[d.f.loadingKeyForPayload({fileKey:R,emailAddress:n})]===b.r.LOADING:null),D=m.hS({...e,onClose:()=>{(0,E.trackEvent)("google_meet_claim_email_modal_closed",{fileKey:R}),r(u.AS())}});return a.createElement(p.fu,{name:"google_device_try_file_claim_modal"},a.createElement(_.bL,{manager:D,width:420},a.createElement(h.vo,null,a.createElement(h.nB,{padding:32},a.createElement("div",{className:L.FS},a.createElement("h1",{className:L.DX},(0,l.tx)("google_device_try_file_modal.enter_email"))),a.createElement(v.k,{multiple:1}),a.createElement("div",{className:L.FS},a.createElement("div",{className:L.Kc},(0,l.tx)("google_device_try_file_modal.enter_email.description"))),a.createElement(v.k,{multiple:3}),a.createElement(T.il,{autoFocus:!0,type:"email",className:f()(L._2,w&&L.cC),placeholder:(0,l.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{g(e.target.value)},value:n}),w&&a.createElement("div",{className:L.mV},(0,l.tx)("google_device_try_file_modal.enter_email.error_message")),a.createElement(v.k,{multiple:2}),a.createElement(c.lR,{type:"submit",onClick:a=>{if(a.preventDefault(),a.stopPropagation(),null==n||!1===(0,y.xf)(n)||!R){O(!0);return}if(!R){r(A.s.error((0,l.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:R,emailAddress:n})}},a.createElement(I.x,{isLoading:!!P,className:S.s.flex.justifyCenter.$},()=>(0,l.tx)("google_device_try_file_modal.enter_email.button"))),a.createElement(v.k,{multiple:3}),a.createElement("div",{className:L.NJ},(0,l.tx)("google_device_try_file_modal.disclaimer",{tos:a.createElement(N.V,{url:o.Ay.isMeetDevice?C.A:C.Uw,title:(0,l.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(N.V,{url:o.Ay.isMeetDevice?C.bO:C.JD,title:(0,l.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),a.createElement(v.k,{multiple:1})))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL");var O=n(615233);(0,w.Ju)(function(e){let{email:r,onChangeEmail:n}=e,o=(0,i.wA)(),d=(0,s.tS)(),g=m.hS({...e,preventUserClose:!0});return a.createElement(p.fu,{name:"google_device_try_file_received_email_modal"},a.createElement(_.bL,{manager:g,width:420},a.createElement(h.vo,null,a.createElement(h.nB,{padding:32},a.createElement("img",{src:(0,O.ck)("b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png"),alt:"",className:L.ZQ}),a.createElement(v.k,{multiple:2}),a.createElement("div",{className:L.FS},a.createElement("h1",{className:L.DX},(0,l.tx)("google_device_try_file_modal.got_mail"))),a.createElement(v.k,{multiple:1}),a.createElement("div",{className:L.FS},a.createElement("div",{className:L.Kc},(0,l.tx)("google_device_try_file_modal.got_mail.description",{email:a.createElement("p",{className:L.Fx},r)}))),a.createElement(v.k,{multiple:3}),a.createElement(c.lR,{onClick:e=>{e.preventDefault(),e.stopPropagation(),o(u.Ce())}},(0,l.tx)("google_device_try_file_modal.got_mail.close")),a.createElement(v.k,{multiple:3}),a.createElement("div",{className:L.NJ},(0,l.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:a.createElement(c.$z,{variant:"link",onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!d){o(A.s.error((0,l.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:d,emailAddress:r,isResentEmail:!0})}},(0,l.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),a.createElement(v.k,{multiple:2}),a.createElement("div",{className:L.NJ},(0,l.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:a.createElement(c.$z,{variant:"link",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()}},(0,l.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL"),n(226455),n(901319),n(624600),n(639088);let R=120},901319:(e,r,n)=>{n(848318),n(301168),n(918777),n(637640),n(103661),n(967688),n(31898),n(730143),n(209595),n(844462)},437631:(e,r,n)=>{n.d(r,{P:()=>T});var a=n(848318),i=n(301168),o=n(660376),s=n(19180),l=n(398612),c=n(159376),d=n(630677),u=n(861813),p=n(615233),m=n(72462),_=n(656329),h=n(103661),g=n(311045),f=n(30575),E=n(664465),y=n(357353),b=n(441595);function v({origin:e,iFrameHandler:r,overrideUseFedCMPrompt:n}){let s=window;try{window.origin===window.parent.origin&&(s=window.parent||window)}catch{}let _=(0,u.J)(()=>(0,E.o)(s),[s]),y=(0,i.wA)(),v=!!(0,f.S$)(),T=n??v,I=a.useRef(!1),S=a.useCallback(async({credential:n})=>{(0,g.g)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let a=(0,b.z)(n);if(!a)return;let i={name:a.name,token:n,tokenType:c.V.ID_TOKEN};if(r){r(i);return}try{y(h.WY({redirectUrl:function(){let e=(0,l.jM)();try{window.origin===window.parent.origin&&(e=window.parent.location.pathname+window.parent.location.search)}catch{}return e}()}));let r=await (0,d.W8)(i,{dispatch:y,apiUrl:d._B,origin:e});"mfa"===r.type&&s!==window&&s.postMessage({type:"auth_iframe_show"},"*"),"login"===r.type&&((0,g.g)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),y(h.My({userId:r.user.id})))}catch(e){s!==window&&s.postMessage({type:"auth_iframe_show"},"*"),y(h.Qg({message:e.message}))}},[e,r,y,s]);return a.useEffect(()=>{if(_.status===m.r.SUCCESS&&!I.current){I.current=!0;let r=_.value,{google_client_id:n}=(0,p.Ay)();(0,o.KF)(void 0!==n,"google_client_id should be defined in initialOptions"),r.accounts.id.initialize({client_id:n,callback:S,cancel_on_tap_outside:!1,itp_support:!0,use_fedcm_for_prompt:T}),r.accounts.id.prompt(r=>{if(T){let n=r.getMomentType();(0,g.g)("google_one_tap_prompt_moment",e,{momentType:n,reason:"dismissed"===n?r.getDismissedReason():void 0},{forwardToDatadog:!0});return}"display"===r.getMomentType()?r.isDisplayed()?(0,g.g)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,g.g)("google_one_tap_prompt_display_failed",e,{reason:r.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===r.getMomentType()?(0,g.g)("google_one_tap_prompt_skipped",e,{reason:r.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===r.getMomentType()&&(0,g.g)("google_one_tap_prompt_dismissed",e,{reason:r.getDismissedReason()},{forwardToDatadog:!0})})}},[_,S,e,T]),null}function T(e){return s.k()?.google_one_tap_killswitch||(0,p.sL)()||e.hideOnMobile&&(0,_.o4)()?null:a.createElement(y.d,null,a.createElement(v,{...e}))}},67644:(e,r,n)=>{n.d(r,{EO:()=>u,ZG:()=>p,iT:()=>s,l0:()=>d,xR:()=>l});var a=n(994441),i=n(113346),o=n(967688);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,i.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(601167),n(854139);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},a=c;return"canvas"!==r&&(a=r),{position:"absolute",left:100*e.x/a.width+"%",top:100*e.y/a.height+"%",width:100*e.width/a.width+"%",height:100*e.height/a.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},i=a.s.identity().toFigMatrix()){let o=e.x/n.x,s=e.y/n.y,l=a.s.fromFigMatrix(i);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(a.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*o}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function p(e){switch(e){case"DIAMOND":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},840683:(e,r,n)=>{n.d(r,{rs:()=>o}),n(186606);var a=n(967688),i=n(259964);function o(e,r){switch(e){case"SECTION":return(0,a.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,a.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_shape");case"RECTANGLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_rectangle");case"ELLIPSE":return(0,a.t)("fullscreen.accessibility_dom.node_name_ellipse");case"REGULAR_POLYGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_polygon");case"STAR":return(0,a.t)("fullscreen.accessibility_dom.node_name_star");case"CONNECTOR":return(0,a.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,a.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,a.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,a.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,a.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,a.t)("fullscreen.accessibility_dom.node_name_widget");case"MEDIA":return(0,a.t)("fullscreen.accessibility_dom.node_name_media");case"CODE_INSTANCE":return(0,a.t)("fullscreen.accessibility_dom.node_name_code_instance");case"RESPONSIVE_SET":return(0,a.t)("fullscreen.accessibility_dom.node_name_responsive_set");case"SLICE":return(0,a.t)("fullscreen.accessibility_dom.node_name_slice");case"FRAME":return(0,a.t)("fullscreen.accessibility_dom.node_name_frame");case"INSTANCE":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_instance");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_instance");case"STAMP":return(0,a.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":if(r===i.nT.Whiteboard)return(0,a.t)("fullscreen.accessibility_dom.node_name_canvas");return(0,a.t)("fullscreen.accessibility_dom.design.node_name_canvas");default:return(0,a.t)("fullscreen.accessibility_dom.node_name_fallback")}}Symbol("uninteresting"),Symbol("hidden")},993865:(e,r,n)=>{n.d(r,{B5:()=>R});var a=n(848318),i=n(301168),o=n(354427),s=n(376852),l=n(186606),c=n(19180),d=n(382902),u=n(536384),p=n.n(u),m=n(656329),_=n(967688),h=n(453370),g=n(142896),f=n(995218),E=n(303397),y=n(702038),b=n(601167),v=n(375602),T=n(469888),I=n(348485),S=n(67644),A=n(313538),w=n(329013),C=n(671792),N=n(530986),L=n(68620),O=n(404319);let R={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},P={jumpOnAbort:!0};function D(e){let r=(0,s.qE)(e.headerLevel,2,6);return e.header?a.createElement(a.Fragment,null,a.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):a.createElement(a.Fragment,null,e.children)}function k({accessibilityScope:e,nodeId:r,...n}){let i=(0,v.W)(r,e);if(!i)return null;let{childIds:o,...s}=i;return a.createElement(M,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let M=a.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:i,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:p,transformProperties:m}=r,_=(0,S.iT)(d)?l+1:l,h=e.length;return a.createElement(F,{...r,size:h},e.map((e,r)=>a.createElement(k,{key:e,accessibilityScope:n,headingLevel:_,isDebugMode:i,navigate:o,nodeId:e,parent:{dimensions:p,transformProperties:m,absoluteTransform:u,guid:s},setPosition:r+1,setSize:h,suppressIds:c})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:a,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:p,...m},{directTextContent:_,innerTextContent:h,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:v,dimensions:T,parent:I,...S}){return(0,i.bN)(m,S)&&(0,i.bN)(u,T)&&(0,i.bN)(d,v)&&(0,i.bN)(a,f)&&(0,i.bN)(l,y)&&(0,i.bN)(c,b)&&(0,i.bN)(s,E)&&(0,i.bN)(p?.absoluteTransform,I?.absoluteTransform)&&(0,i.bN)(p?.dimensions,I?.dimensions)&&(0,i.bN)(p?.transformProperties,I?.transformProperties)&&(0,o.c2)(e,_)&&(0,o.c2)(r,h)&&(0,o.c2)(n,g)});function F({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:u,directTextContent:v,innerTextContent:w,tableCells:L,headerLabel:k,guid:M,isDebugMode:F,navigate:U,ariaRole:B,name:G,shapeType:V,size:H,type:z,nodeId:K,suppressIds:W,stampFrequencies:j,accessibleLabel:Y,contentsHidden:$,dimensions:q,absoluteTransform:X,parent:J}){let Z;let Q=(0,i.Pj)(),ee=Q.getState().comments.showResolved,et=(0,i.d4)(e=>e.mirror.appModel.showComments),er=Q.getState().mirror.sceneGraph,en=(0,S.iT)(z)?o+1:o,ea=(0,f.E3)(),ei=(0,A.E)({type:z,shapeType:V,ariaRole:B,name:G,setData:{size:r,i:n,headerLevel:o},numChildren:H,stampFrequencies:j,accessibleLabel:Y,contentsHidden:$,editorType:ea}),eo=!J;if((0,c.k)().a11y_design_dom_mirror)Z=eo?(0,S.EO)(q,X):(0,S.EO)(q,X,J.dimensions,J.absoluteTransform);else{let e=eo?"canvas":J.transformProperties;Z=(0,S.l0)(u,e)}let es=(0,N.rp)(v,N.d2.SEMANTIC),el=(0,N.rp)(w,N.d2.SEMANTIC),ec=(0,N.Dm)(er,K,L),ed=k?{label:k,headerId:`sectionHeaderFor-${M}`}:null,eu=(0,i.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===M}),{groupCommentNodeId:ep,groupCommentTransformProperties:em,groupSize:e_}=function(e,r){let n,a,i;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let a=s.parentGuid;s=a?r.get(a):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(i=r.length,a=(0,S.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:a,groupSize:i}}(M,er);!function(e,r,n,i,o,s,l,c,u){let p=(0,d.Xr)(T.f),m=(0,f.E3)();a.useEffect(()=>{e&&p({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:u,ariaLabel:(0,A.E)({type:r,shapeType:n,name:i,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c},editorType:m})}})},[o,c,l,e,i,u,n,s,r,p,m])}(eu,z,V,G,Y,r,n,o,K);let eh=(0,C.s)();a.useLayoutEffect(()=>{if(W)return;let e=document.getElementById(M);e&&(eu&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),eh.suppressed||e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[eh,M,eu,W]);let[eg,ef]=(0,I.l)(F?[J,s,u,v,w,k,M,eu,B,G,V,z,K,W]:[]);return a.createElement(a.Fragment,null,a.createElement("div",{ref:ef,"aria-label":ei,className:p()(O.rH,F&&eg),contentEditable:m.Ay.windows&&eu?"true":void 0,"data-fullscreen-intercept-dangerously-include-tab":!0,"data-guid":W?M:void 0,id:W?void 0:M,onContextMenu:e=>{Q.dispatch(h.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||eu||(y.wr(),y.Dh([M]),E.Y5.commit(),U((0,b.QZ)({nodeId:M,...R}),P))},role:B,style:Z,tabIndex:-1},a.createElement(D,{header:ed,headerLevel:en},el.length>0?el:null,es.length>0?es:null,null!=s&&(0,_.tx)("fullscreen.accessibility.author",{authorName:s}),ec.length>0?ec:null,e),et?a.createElement(x,{guid:M,navigate:U,isDebugMode:F,parentTransformProperties:u,showResolved:ee,intermediateTransformProperties:void 0,parentAbsoluteTransform:X,parentDimensions:q}):null),et&&ep?a.createElement(x,{guid:ep,navigate:U,isDebugMode:F,parentTransformProperties:"canvas",intermediateTransformProperties:em??u,showResolved:ee,groupSize:e_,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function x({guid:e,isDebugMode:r,navigate:n,isTopLevel:i,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let p=(0,L.x)(e,c),m=a.createElement(w.X,{threads:p,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!p||0===p.length)return null;if(i)return a.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},a.createElement("h2",{id:"canvas-comments-heading"},(0,_.tx)("fullscreen.accessibility_dom.unattached_comments")),m);if(!o)return m;{let e=(0,_.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return a.createElement("div",{role:"group","aria-label":e},m)}}},671792:(e,r,n)=>{n.d(r,{s:()=>o});var a=n(848318);let i=a.createContext({suppressed:!1});function o(){return(0,a.useContext)(i)}},452086:(e,r,n)=>{function a(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null}function i(){a()?.focus()}n.d(r,{$z:()=>i,lo:()=>a}),n(848318),n(301168),n(186606),n(813009),n(461979),n(967688),n(952039),n(620105),n(602910),n(303397),n(259964),n(243277),n(840683)},547011:(e,r,n)=>{n.d(r,{a1:()=>h});var a=n(848318),i=n(907727),o=n(536384),s=n.n(o),l=n(156974),c=n(882062),d=n(401970);n(297638);var u=n(493834),p=n(339678);function m(e){return a.createElement("div",{className:u.zc},e.children)}function _(e){return a.createElement("div",{className:u.ro},e.children)}function h(e){return a.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&a.createElement("div",{className:u.l8},e.isChecked&&a.createElement(d.U,{svg:p.A},a.createElement(i.l,null))),e.children&&a.createElement(m,null,e.children),a.createElement("div",{className:u.Qq},e.text),e.shortcut?a.createElement(c.S,{shortcut:e.shortcut,className:u.LE}):e.rightIcon&&a.createElement(_,null,e.rightIcon))}},80133:(e,r,n)=>{n.d(r,{AP:()=>p,FQ:()=>g,XR:()=>_,h9:()=>u,l6:()=>h,uA:()=>f});var a=n(848318),i=n(186606),o=n(320953),s=n(967688),l=n(579407),c=n(614092),d=(e=>(e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e))(d||{});function u(e){switch(e){case i.Bll.ACCESSIBILITY:return(0,s.t)("dev_handoff.annotations.category_preset.accessibility");case i.Bll.BEHAVIOR:return(0,s.t)("dev_handoff.annotations.category_preset.behavior");case i.Bll.CONTENT:return(0,s.t)("dev_handoff.annotations.category_preset.content");case i.Bll.DEVELOPMENT:return(0,s.t)("dev_handoff.annotations.category_preset.development");case i.Bll.INTERACTION:return(0,s.t)("dev_handoff.annotations.category_preset.interaction")}}function p(e){switch(e){case i.Bll.ACCESSIBILITY:return i.RN1.PINK;case i.Bll.CONTENT:return i.RN1.ORANGE;case i.Bll.BEHAVIOR:return i.RN1.BLUE;case i.Bll.DEVELOPMENT:return i.RN1.GREEN;case i.Bll.INTERACTION:return i.RN1.BLUE}}let m={[i.RN1.GREEN]:{color:"rgba(61, 160, 89, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.green")},[i.RN1.PINK]:{color:"rgba(216, 52, 158, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.pink")},[i.RN1.RED]:{color:"rgba(227, 76, 44, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.red")},[i.RN1.BLUE]:{color:"rgba(27, 113, 217, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.blue")},[i.RN1.YELLOW]:{color:"rgba(251, 198, 69, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.yellow")},[i.RN1.ORANGE]:{color:"rgba(255, 165, 0, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.orange")},[i.RN1.TEAL]:{color:"rgba(0, 128, 128, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.teal")},[i.RN1.VIOLET]:{color:"rgba(148, 0, 211, 1)",label:()=>(0,s.t)("dev_handoff.annotations.categories_edit_window.category_color.violet")}};function _(e={initializeIfNull:!1}){let{initializeIfNull:r=!1}=e,n=(0,a.useMemo)(()=>i.w3z.isReadOnly(i.SES.ANNOTATIONS),[]),s=(0,a.useMemo)(()=>[],[]),d=(0,c.wA)(e=>e.getRoot().annotationCategories);return(0,a.useEffect)(()=>{!n&&null===d&&r&&(0,l.r)(()=>{o.l7.system("initialize-annotation-categories",()=>{i.w3z.initializeAnnotationCategories()})})},[d,n,r]),d??s}function h(e){return e.preset!==i.Bll.NONE?p(e.preset):e.custom?.color??null}function g(e){return e.preset!==i.Bll.NONE?m[p(e.preset)].color:e.custom?.color!=null?m[e.custom.color].color:null}function f(e){return e.preset!==i.Bll.NONE?u(e.preset):e.custom?.label??""}},775030:(e,r,n)=>{n.d(r,{CK:()=>s,r6:()=>o});var a=n(382902);n(182317);let i=(0,n(4881).rt)(void 0);function o(){return a.zl.get(i)}function s(){return(0,a.md)(i)}},639398:(e,r,n)=>{n.d(r,{P:()=>l});var a=n(382902),i=n(4881),o=n(451548);let s=(0,i.rt)({suggestions:[],analyticsData:o.YQ,isSeen:!0}),l=(0,a.eU)(e=>e(s),(e,r,n)=>{let a=e(s),i=n.suggestions.slice(0,o.lS),l=a.suggestions.length!==i.length||a.suggestions.some((e,r)=>e.id!==i[r]?.id),c=a.isSeen;l&&(c=0===i.length),r(s,{...n,suggestions:i,isSeen:c})});(0,a.eU)(e=>e(s).isSeen,(e,r)=>{let n=e(s);r(s,{...n,isSeen:!0})})},908307:(e,r,n)=>{n.d(r,{O:()=>m,k1:()=>_,tM:()=>u});var a=n(402923),i=n(382902),o=n(989232),s=n(775030),l=n(639398),c=n(451548),d=n(124992);let u="auto-suggest",p=new Set([c.qd.EVAL,c.qd.SHADOW_SUGGESTIONS]);class m{constructor({analyticsData:e=c.YQ,config:r,entryPoint:n}){this.analyticsData=e,this.config=r.loggerConfig,this.timers=[Date.now()],this.debugInfo={},this.entryPoint=n,this.shouldLog=!p.has(n)}logFunnelEvent(e){var r,n;this.config.logFunnelEvents&&this.shouldLog&&(r=this.analyticsData,n=this.entryPoint,o.definedAnalyticsHandler.trackDefinedEvent("auto_suggest.funnel",{...r,funnelEvent:e,sessionId:(0,s.r6)(),entryPoint:n,suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()}))}logTimer(e,r,n){if(!this.config.logTimers)return -1;let i=Date.now();if(this.timers.length>0){let l=i-this.timers[(0,a.Et)(n)?n:this.timers.length-1],c=this.timers.push(i);return this.shouldLog&&o.definedAnalyticsHandler.trackDefinedEvent("auto_suggest.timer",{...this.analyticsData,context:e,stepName:r,duration:l,sessionId:(0,s.r6)(),entryPoint:this.entryPoint,suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()}),c-1}return -1}logDebugInfo(e,r){this.config.logDebugInfo&&(this.debugInfo[e]=r)}}function _(e){let{analyticsData:r}=i.zl.get(l.P);o.definedAnalyticsHandler.trackDefinedEvent("auto_suggest.component_inserted",{...e,...r,sessionId:(0,s.r6)(),suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()})}},451548:(e,r,n)=>{n.d(r,{GG:()=>s,H2:()=>c,MX:()=>l,Ou:()=>a,PV:()=>o,YQ:()=>u,lS:()=>i,qd:()=>d});var a=(e=>(e[e.FRAGMENTS=0]="FRAGMENTS",e[e.RECENTS=1]="RECENTS",e))(a||{});let i=4,o={searchByNodeType:"all",targetNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:2},topLevelNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:1},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:1},loggerConfig:{logFunnelEvents:!0,logTimers:!0,logDebugInfo:!0},numResults:4,numConcurrentFragmentLoads:3,dominantFrameConfig:{}};var s=(e=>(e.START="start",e.SKIP_LOW_VOLUME_NODE="skip_low_volume_node",e.SKIP_NO_SUBSCRIBED_LIBRARIES="skip_no_subscribed_libraries",e.INITIATING_FRAGMENT_SEARCH="initiating_fragment_search",e.NO_RESULTS="no_results",e.RESULTS_SHOWN="results_shown",e.RESULT_INSERTED="result_inserted",e.RESULT_DISMISSED="result_dismissed",e.ABORTED="aborted",e.PANEL_OPENED="panel_opened",e.PANEL_CLOSED="panel_closed",e.STARTED_SEARCH="searched_asset",e))(s||{}),l=(e=>(e.SOURCE_FRAGMENT="source_fragment",e.TL_NODE_RESULTS="tl_node_results",e.TARGET_NODE_RESULTS="target_node_results",e))(l||{}),c=(e=>(e.TOTAL="total",e.SEARCH_SUGGESTIONS_START="search_suggestions_start",e.FRAGMENT_SEARCH="fragment_search",e.EXTRACT_CONTEXT="extract_context",e.SUMMARIZE_CONTEXT="summarize_context",e.FILTERING_RANKING="filtering_ranking",e.ASSET_LOOKUP="asset_lookup",e))(c||{}),d=(e=>(e.ASSET_PANEL="asset_panel",e.EVAL="eval",e.SHADOW_SUGGESTIONS="shadow_suggestions",e))(d||{});let u={fileKey:"",queryId:"",selectionId:""}},124992:(e,r,n)=>{n.d(r,{AP:()=>T,Ag:()=>I,GD:()=>E,OD:()=>f,Pt:()=>L,Sg:()=>w,ZU:()=>D,ay:()=>R,e_:()=>b,iG:()=>S,k1:()=>h,mA:()=>y,n1:()=>C,op:()=>P,w3:()=>A,x_:()=>O}),n(186606);var a=n(195124);n(19180);var i=n(675871),o=n.n(i),s=n(476254),l=n(615233),c=n(867499);n(995218);var d=n(601167);n(355755),n(730143);var u=n(144487),p=n(720722);n(113173);var m=n(946250),_=n(451548);function h(){return(0,l.Ay)().anticipation_config||((0,l.Ay)().anticipation_config=_.PV),(0,l.Ay)().anticipation_config}var g=(e=>(e[e.DEFAULT=2]="DEFAULT",e))(g||{});function f(){return 2}function E(){return m.JL}function y(e){let r=0;return(0,a.hV)(e,e=>!e||e.isInternalOnlyNode||e.opacity<=0||!e.visible?"skip":(r+=1,"INSTANCE"===e.type)?"skip":void 0),r}function b(e,r){let n=e.absoluteBoundingBox,a=r.absoluteBoundingBox;return{size:{width:n.w,height:n.h},fragmentSize:{width:a.w,height:a.h},relativePosition:{x:n.x-a.x,y:n.y-a.y}}}function v(e,r){let n={x:e.relativePosition.x+e.size.width/2,y:e.relativePosition.y+e.size.height/2},a={x:n.x/e.fragmentSize.width,y:n.y/e.fragmentSize.height},i={x:r.relativePosition.x+r.size.width/2,y:r.relativePosition.y+r.size.height/2},o={x:i.x/r.fragmentSize.width,y:i.y/r.fragmentSize.height},s={x:1-Math.abs(a.x-o.x),y:1-Math.abs(a.y-o.y)};return Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))}function T({usage:e,filteringConfig:r,subscribedLibraryKeys:n,fragment:a,targetNodePositionInfo:i}){if(!e.libraryKey||!n?.has(e.libraryKey))return null;let o={size:{width:e.positionInfo.width,height:e.positionInfo.height},fragmentSize:{width:a.width,height:a.height},relativePosition:{x:e.positionInfo.relativeX,y:e.positionInfo.relativeY}},s=i?v(o,i):0;if((r?.proximityScoreThreshold||0)>s)return null;switch(o.proximityScore=s,e.type){case"symbol":return{fragment:a,key:e.key,libraryKey:e.libraryKey,positionInfo:o,type:p.PW.COMPONENT};case"state_group":return{fragment:a,key:e.key,libraryKey:e.libraryKey,positionInfo:o,type:p.PW.STATE_GROUP,stateComponentKey:e.stateComponentKey};default:return null}}function I({scene:e,root:r,fragment:n,targetNodePositionInfo:i,filteringConfig:o,subscribedLibraryKeys:s,includeNestedComponents:l,includeComponentProps:c}){let d=[],u=l?void 0:"skip",m=!!i;return(0,a.hV)(r,r=>{if(!r||r.isInternalOnlyNode||r.opacity<=0||!r.visible)return"skip";if("INSTANCE"===r.type){let a={fragment:n},l=r.symbolId;if(!l)return u;if(m){let n=b(r,e.get(r.findContainingTopLevelFrameOrSelf())),s=i?v(n,i):0;if((o?.proximityScoreThreshold||0)>s)return u;a.positionInfo={...n,proximityScore:s}}let _=e.get(l);if(!_)return u;let h=c?r.componentProperties():void 0;if(_.isState){let r=e.get(_.containingStateGroupId);if(!r)return u;a={...a,type:p.PW.STATE_GROUP,key:r.stateGroupKey,stateComponentKey:_.componentKey,libraryKey:r.sourceLibraryKey,props:h}}else a={...a,type:p.PW.COMPONENT,key:_.componentKey,libraryKey:_.sourceLibraryKey,props:h};return a.key&&a.libraryKey&&a.libraryKey.length&&_.publishID&&_.isSubscribedAsset&&a.libraryKey&&(!s||s?.has(a.libraryKey))&&d.push(a),u}}),d}function S(e){let r={};return e.forEach(e=>{let{key:n,type:a,libraryKey:i,fragment:o,positionInfo:s,asset:l}=e;r[n]||(r[n]={type:a,key:n,libraryKey:i,asset:l,count:0,fragmentCount:0,countPerFragment:{},scorePerFragment:{},stateCounts:{},proximityScores:[],avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0});let c=r[n];c.count++,s&&c.proximityScores.push(s.proximityScore);let d=o?`${o.file_key}.${o.node_id}`:null;if(o&&d&&(!c.countPerFragment[d]&&(c.countPerFragment[d]=0,c.scorePerFragment[d]=o.score,c.fragmentCount++),c.countPerFragment[d]++),a===p.PW.STATE_GROUP){let{stateComponentKey:r}=e;c.stateCounts[r]||(c.stateCounts[r]=0),c.stateCounts[r]++}}),Object.values(r).forEach(e=>{let r=Object.values(e.countPerFragment);e.avgCountPerFragment=r.length>0?o()(r):0;let n=Object.values(e.scorePerFragment);e.avgScorePerFragment=n.length>0?o()(n):0,e.avgProximityScore=e.proximityScores.length>0?o()(e.proximityScores):0}),r}function A({scene:e,topLevelNode:r}){return S(I({scene:e,root:r,includeNestedComponents:!0,includeComponentProps:!1}))}function w({componentUsage:e,rankingConfig:r}){let n=Object.values(e),a={count:Math.max(...n.map(e=>e.count)),fragmentCount:Math.max(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.max(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.max(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.max(...n.map(e=>e.avgProximityScore))},i={count:Math.min(...n.map(e=>e.count)),fragmentCount:Math.min(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.min(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.min(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.min(...n.map(e=>e.avgProximityScore))};return n.map(e=>{let n=(e,r,n)=>n===r?0:(e-r)/(n-r),o=n(e.count,i.count,a.count)*r.count,s=n(e.fragmentCount,i.fragmentCount,a.fragmentCount)*r.fragmentCount,l=n(e.avgCountPerFragment,i.avgCountPerFragment,a.avgCountPerFragment)*r.avgCountPerFragment,c=n(e.avgScorePerFragment,i.avgScorePerFragment,a.avgScorePerFragment)*r.avgScorePerFragment,d=n(e.avgProximityScore,i.avgProximityScore,a.avgProximityScore)*r.avgProximityScore;return{...e,key:e.key,score:o+s+l+c+d}}).sort((e,r)=>r.score-e.score)}function C({componentUsage:e,contextComponentUsage:r}){Object.values(e).forEach(({key:n,countPerFragment:a})=>{let i=r[n];if(!i)return;let o=function(e){if(0===e.length)return 0;if(1===e.length)return e[0];let r=[...e].sort((e,r)=>e-r),n=Math.floor(r.length/2);return r.length%2!=0?r[n]:(r[n-1]+r[n])/2}(Object.values(a));i.count<o||delete e[n]})}var N=(e=>(e.ASSET_NOT_FOUND="asset_not_found",e.STATE_TO_STATE_GROUP="state_to_state_group",e))(N||{});function L(e){let r=function(e,r){let n=s.D.getState(),a=(0,u.Ls)(n),i=(0,u.m3)(n),o={};return e.forEach(({type:e,key:n})=>{switch(e){case p.PW.COMPONENT:let s=a[n];s&&(o[n]={...s,suggestionSource:r});break;case p.PW.STATE_GROUP:let l=i[n];l&&(o[n]={...l,suggestionSource:r})}}),o}(e.map(({key:e,type:r})=>({type:r,key:e})),_.Ou.FRAGMENTS),n=(0,u.ZA)(s.D.getState()),a={asset_not_found:[],state_to_state_group:[]},i=[];return e.forEach(e=>{let o=r[e.key];if(!o){a.asset_not_found.push({before:e,after:null});return}let s={...e,asset:o};if(e.type===p.PW.COMPONENT&&o.type===p.PW.COMPONENT&&o.containing_frame?.containingStateGroup){let r=o.containing_frame.containingStateGroup.nodeId,i=r?n[e.libraryKey]?.[r]:null;i?(s={...e,key:i.key,type:p.PW.STATE_GROUP,stateComponentKey:e.key,asset:{...i,suggestionSource:_.Ou.FRAGMENTS}},a.state_to_state_group.push({before:e,asset:o,after:s})):a.state_to_state_group.push({before:e,asset:o,after:null})}i.push(s)}),{updatedComponentInfo:i,debugData:a}}function O(e){if(e)return JSON.stringify({x:e.x,y:e.y})}function R(e){if(e)return JSON.stringify({x:e.x,y:e.y,w:e.w,h:e.h})}function P(e){let r=(0,d.qc)(e);return JSON.stringify({x:r.x,y:r.y,w:r.width,h:r.height})}function D(e){let r=Date.now();return{thumbnail:(0,c.T1)(e),duration:Date.now()-r}}},927217:(e,r,n)=>{n.d(r,{rA:()=>o});var a=n(186606),i=n(516515);let o={[a.D1Y.TEXT]:0,[a.D1Y.FRAME_OR_GROUP]:0,[a.D1Y.COMPONENT]:0,[a.D1Y.INSTANCE]:0,[a.D1Y.IMAGE]:0,[a.D1Y.SHAPE]:0,[a.D1Y.OTHER]:0};[...i.b4,...i._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},183143:(e,r,n)=>{n.d(r,{c:()=>g});var a=n(848318),i=n(762217),o=n(773511),s=n(347701),l=n(536384),c=n.n(l),d=n(781239),u=n(66699),p=n(361323),m=n(511067),_=n(17753),h=n(38438);function g({ariaLabel:e,className:r,dropdownKey:n,tooltipText:l,additionalDispatchData:g,toggleOnClick:f,divRef:E,dataTestId:y,dataOnboardingKey:b,rcsHandlerId:v,recordingKey:T,canOpenDropdown:I}){let S=(0,m.BK)(n),A=E||a.createRef();return a.createElement(i.o,{eventListeners:["onClick","onMouseDown"]},a.createElement(o.E,{ref:A,actionOnPointerDown:!f,"aria-label":e,className:c()(h.FH,r,{[h.u]:S.showing}),"data-onboarding-key":b,"data-testid":y,"data-tooltip":l,"data-tooltip-type":_.Ib.TEXT,htmlAttributes:{onKeyDown:e=>(0,p.hx)({e,onClickHandler:()=>S.toggle(),onEscapeHandler:E?.current?.blur})},onClick:()=>{(!I||I())&&A?.current&&(S.toggle({data:{...g,targetRect:A?.current.getBoundingClientRect()}}),v&&(0,u.YQ)({id:v,properties:{dropdownKey:n}}))},recordingKey:d.Pt(T,"chevron")},a.createElement(s.O,null)))}},134642:(e,r,n)=>{n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var a=n(848318),i=n(19180);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,i.k)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=a.useState(o);return a.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},167546:(e,r,n)=>{n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var a=n(128080),i=n.n(a),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,a;return n=e.pins[0],a=r.pins[0],n.x!==a.x||n.y!==a.y||!i()(n.avatars,a.avatars)||!i()(n.previewMessageMeta,a.previewMessageMeta)||n.isUnread!==a.isUnread||n.numUnreadReplies!==a.numUnreadReplies||n.isResolved!==a.isResolved||!i()(n.selectionBoxAnchor,a.selectionBoxAnchor)||!i()(n.otherBoundingBoxes,a.otherBoundingBoxes)||!i()(n.isPinnedToFile,a.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let a=r.get(e.user.id);n[a].num_unread_comments+=e.isUnread?1:0,n[a].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},276595:(e,r,n)=>{n.d(r,{p:()=>l});var a=n(848318),i=n(454805),o=n(601167),s=n(306196);function l(e){let r=(0,o.Cj)(),n=i.Mi.scale(-1,r);return a.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width},onScroll:e.forceNoScroll?e=>{e.currentTarget.scrollLeft=0,e.currentTarget.scrollTop=0}:void 0},a.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},387594:(e,r,n)=>{n.d(r,{HH:()=>N,xT:()=>T});var a=n(848318),i=n(301168),o=n(536384),s=n.n(o),l=n(989232),c=n(343651),d=n(952401),u=n(264478),p=n(509048),m=n(967688),_=n(564837),h=n(209595),g=n(125761),f=n(259939),E=n(17753),y=n(610579),b=n(539454),v=n(163841);function T(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let I=a.memo(e=>{let{text:r,hyperlink:n}=e,o=a.useMemo(()=>(0,c.x6)(r),[r]),s=(0,h.z3)(),l=(0,i.wA)();return a.createElement(u.CY,{"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-editor-type":s,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-url-string":n,onClick:()=>{l((0,_.RK)({rawInput:T(n)}))},trusted:!1},o)}),S=a.memo(e=>{let{userId:r,imgUrl:n,handle:i,href:o}=e;return a.createElement(u.CY,{"data-mention-user-id":r,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-user-handle":i,"data-tooltip-user-img-url":n,href:o,target:"_blank",trusted:!0},i)}),A=a.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:i,profileId:o,profileName:s,profileImgUrl:c}=e,p=(0,d.F)(n),m=(0,d.F)(s);return a.createElement(u.CY,{"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-user-handle":m,"data-tooltip-user-img-url":c,href:`/${p}`,onClick:()=>{(0,l.trackEvent)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:i})},target:"_blank",trusted:!0},p)}),w=a.memo(e=>{let{text:r,tokenStyles:n}=e,i=a.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?v.hp:"i"===e?v.u5:"s"===e?v.Vc:"lightbold"===e?v.XH:void 0)||[];return a.createElement(p.M,null,a.createElement("span",{className:s()(o)},i))}),C=a.memo(e=>{let{text:r,userId:n,profileId:i,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:p}=e,m=(0,d.F)(r);if(n)return a.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(i&&m){let e="@"+m,r=l?.[i];return r?a.createElement(A,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):a.createElement("span",null,e)}if(null===i&&m){let e="@"+m;return a.createElement("span",null,e)}let _=p&&T(p);return _&&m&&(0,b.$)(_)?a.createElement(I,{text:m,hyperlink:_}):m?a.createElement(w,{text:m,tokenStyles:u}):null}),N=a.memo(e=>{let r=(0,f.q)(),n=(0,i.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,i,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=v.ty:e.styles?.includes("ol")&&(c=v.A9),e.children?.length){let d=e.children.map((e,d)=>a.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,i,s)));if(e.styles?.includes("ul"))return a.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return a.createElement("ol",{key:`ol-${r}-${l}`},d)}return a.createElement(C,{key:`${r}-${l}`,commentId:s,hyperlink:e.link,orgPath:n,profileId:e.profile_id,profiles:i||null,text:(0,d.F)(e.t)||void 0,tokenStyles:e.styles||null,user:e.user_annotated,userId:e.user_id})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||v.zD;return a.createElement("div",{className:v.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&a.createElement("span",{className:v.oh,key:"edited_indicator"},"\xa0",(0,m.tx)("comments.edited")))});N.displayName="CommentMessage"},181344:(e,r,n)=>{n.d(r,{y:()=>a}),n(848318),n(696786),n(959750),n(228845),n(27776);let a={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,orphanedBy:"deleted_pages"}},306152:(e,r,n)=>{n.d(r,{L9:()=>L,T4:()=>D,ek:()=>U,hh:()=>V,pO:()=>H,vO:()=>B});var a=n(848318),i=n(301168),o=n(186606),s=n(553547),l=n(768618),c=n(128080),d=n.n(c),u=n(343651),p=n(967688),m=n(133685),_=n(361964),h=n(847461),g=n(966936),f=n(217035),E=n(431698),y=n(412865),b=n(141512),v=n(913026),T=n(125761),I=n(554326),S=n(302982),A=n(324747),w=n(835486),C=n(393704);let N=new Set([]);function L(e){return({creationDate:(0,p.t)("comments.sort_by_date"),recent:(0,p.t)("comments.sort_by_last_action"),unread:(0,p.t)("comments.sort_by_unread"),slide:(0,p.t)("comments.sort_by_slide"),asset:(0,p.t)("comments.sort_by_asset")})[e]}let O=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R=(e,r)=>0,P={creationDate:O,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),a=Number(r.comments.some(e=>e.isUnread));return n===a?O(e,r):a-n},slide:R,asset:R};function D(e){return({resolved:(0,p.t)("comments.show_resolved_comments"),yours:(0,p.t)("comments.only_your_threads"),currentPage:(0,p.t)("comments.only_current_page"),currentSlide:(0,p.t)("comments.only_current_slide"),currentAsset:(0,p.t)("comments.only_current_asset"),currentTest:(0,p.t)("litmus.comments.only_current_test"),currentBuild:(0,p.t)("litmus.comments.only_current_build")})[e]}let k=e=>!e.comments[0].resolved_at,M=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,F=e=>e.sidebarItemType===S.kT.FEED_POST,x={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1,currentAsset:!1,currentTest:!1,currentBuild:!1};function U(e){return({commentsOnly:(0,p.t)("comments.only_comments"),postsOnly:(0,p.t)("comments.only_posts")})[e]}let B={postsOnly:[C.mW.RESOLVED],all:[],commentsOnly:[]};async function G(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return N}let V=a.createContext({});function H(e){let r=(0,E.wq)(),n=(0,i.wA)(),c=(0,v.UP)(),u=(0,i.d4)(e=>e.comments.showResolved),p=(0,i.d4)(e=>e.comments.showOnlyParticipating),S=(0,i.d4)(e=>e.mirror.appModel.currentPage),N=e.currentNode||S,L=(0,T.TA)()||void 0,O=(0,i.d4)(e=>e.selectedView.commentThreadId),R=(0,I.ut)(o.Ez5?.singleSlideView().focusedNodeId,s.AD),D=(0,I.ut)(o.Ez5?.cooperFocusView().focusedNodeId,s.AD),U=(0,_.hA)(),H=(0,w.Ld)(),[z,K]=a.useState("creationDate"),[W,j]=a.useState({...x,resolved:!u,yours:p,currentDevModeFocus:!!U,...e.initialFilterState}),[Y,$]=a.useState("all"),[q,X]=a.useState(""),[J,Z]=a.useState(null),Q=(0,b.kC)(r),ee=a.useMemo(()=>({resolved:k,yours:e=>L&&e.comments.some(e=>e.user_id===L||(0,y.F$)(e).includes(L))||!1,currentPage:e=>S&&e.page===S||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===N},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,a=n?n.containingSlideId:s.AD;return R===s.AD||a===s.AD||a===R},currentDevModeFocus:e=>{let r=U?(0,l.UN)().get(U):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,a=n?(0,l.UN)().get(n):null;return(0,m.WJ)(r,a)},currentAsset:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,a=n?n.containingCooperFrameId():s.AD;return D===s.AD||a===s.AD||a===D},currentTest:()=>!0,currentBuild:()=>!0}),[L,S,N,R,U,D]),et=a.useMemo(()=>({all:()=>!0,commentsOnly:M,postsOnly:F}),[]),er=a.useCallback(e=>{X(e)},[]),en=a.useCallback(e=>{n(h.nL({activeSort:e})),K(e)},[n]),ea=a.useCallback(e=>{"resolved"===e&&(n(h.U3({showResolved:W.resolved})),c&&n((0,f.mH)(W.resolved))),"yours"===e&&(n(h.RO({showOnlyParticipating:!W.yours})),c&&n(g.Zj(W.yours?A.Qv.ALL:A.Qv.ME))),j(r=>(r[e]=!r[e],{...r}))},[n,W,c]),ei=a.useMemo(()=>{let e=new Set;for(let r of Object.values(C.mW))W[r]&&e.add(r);return e},[W]),eo=a.useCallback(e=>{$(e)},[]);a.useEffect(()=>{B[Y].forEach(e=>{("resolved"===e?!ei.has(e):ei.has(e))&&ea(e)})},[Y,ei,ea]),a.useEffect(()=>{q?G(Q,q).then(e=>{d()(J,e)||Z(e)}):Z(null)},[r,q,J,Q]);let es=a.useMemo(()=>({...P,...H}),[H]),el=a.useMemo(()=>(function(e,r,n,a,i,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),a))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(i[r])}})(r,z,Y,ei,es,ee,et,J),[r,z,Y,ei,es,ee,et,J]),ec=a.useMemo(()=>({setSort:en,toggleFilter:ea,setMode:eo,setQuery:er}),[er,en,ea,eo]),ed=a.useMemo(()=>({activeQuery:q,activeSort:z,activeMode:Y,activeFilters:ei,threads:r,filteredThreads:el,filteredSidebarItems:el,threadManager:ec}),[q,z,Y,ei,r,el,ec]),eu=a.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===O)},[O,r]);return a.useEffect(()=>{eu&&eu.comments[0].resolved_at&&W.resolved&&ea("resolved")},[W,eu,ea]),a.useEffect(()=>{j(e=>({...e,currentDevModeFocus:!!U}))},[U,j]),a.createElement(V.Provider,{value:ed},e.children)}},892750:(e,r,n)=>{n.d(r,{Uu:()=>g,wV:()=>f});var a=n(848318),i=n(301168),o=n(847461),s=n(412865),l=n(601167),c=n(125761),d=n(73515),u=n(869237),p=n(77822),m=n(875786),_=n(853977);let h=n(479760).ss;function g(e){let r=(0,i.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,i.d4)(e=>e.comments.typeaheadPositionOffset),n=a.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return a.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:_.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,i.d4)(e=>e.comments.emojiPicker),s=(0,i.d4)(e=>e.comments.typeahead),[g,f]=(0,a.useState)(null);a.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,i.wA)(),y=a.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=a.useCallback(e=>{E(o.We(e))},[E]),v=(0,l._X)({subscribeToUpdates_expensive:!0}),T=a.useMemo(()=>e.viewportInfo?e.viewportInfo:e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:v,[e.useWindowAsViewport,v,e.viewportInfo]),I=(T?.isPanning||T?.isZooming)&&n?.visible;a.useEffect(()=>{I&&y()},[I,y]);let S=(0,c.iZ)(),A=!!(n&&n.visible||s),{onClear:w}=e,C=a.useCallback(()=>{n&&n.visible&&y(),s&&w()},[n,s,y,w]),{decoratorsRef:N}=e;return a.useEffect(()=>{N&&(N.current={visible:A,clearDecorators:C})},[C,N,A]),r={...r=e.useFixedPosition||e.direction!==_.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>T.height-g&&e.targetRect.top>T.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:_.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:T.height-e.targetRect.top},direction:_.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:_.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:_.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},a.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&a.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&a.createElement(p.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&a.createElement(m.E,{dataTestId:"comment-mentions-typeahead",dispatch:E,entity:S,isComments:!0,isCommunityMentions:e.isCommunityMentions,onClear:e.onClear,onInsert:e.onInsert,recordingKey:"mentionsTypeaheadView",setMaxTypeaheadHeight:f,setTypeahead:b,typeahead:s,width:e.width,zIndex:e.isCommunityMentions?void 0:h,...r}),s&&"suggestions"===s.type&&a.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},831047:(e,r,n)=>{n.d(r,{ZW:()=>m,rC:()=>p,we:()=>_}),n(848318);var a=n(967688),i=n(566841),o=n(274699),s=n(475166);n(312331);var l=n(558214),c=n(908526),d=n(929083),u=n(494942);function p({dispatch:e,fileKey:r,templateName:n}){return{recordingKey:"publishCustomTemplate",name:"publish-template",displayText:(0,a.t)("tile.dropdown.use_in_new_file"),callback(){e((0,i.jd)({templateIdentifier:{type:s.vt.TeamTemplate,file_key:r},templateName:n}))}}}async function m({dispatch:e,file:r,source:n,fileNeedsMovingBeforePublish:a}){if(r){if(await (0,u.Jv)(r)){(0,c.i$)(e);return}a?(0,o.x)({file:r,dispatch:e}):(0,c.YM)(e,r.key,r.editor_type,n)}}function _({dispatch:e,file:r,isPublished:n,fileNeedsMovingBeforePublish:i,source:o}){let s=()=>{m({dispatch:e,file:r,source:o,fileNeedsMovingBeforePublish:i})};return n?{displayText:(0,a.t)("tile.dropdown.manage_template"),name:"manage-template",children:[{recordingKey:"publishCustomTemplate",name:"publish-template",displayText:(0,a.t)("tile.dropdown.update_template"),callback:s},{recordingKey:"unpublishCustomTemplate",name:"unpublish-template",displayText:(0,a.t)("tile.dropdown.unpublish_template"),callback:(0,l.yz)(e,r.key)}]}:{recordingKey:"publishCustomTemplate",name:"publish-template",displayText:(0,a.t)("tile.dropdown.publish_as_template"),callback:s,"data-onboarding-key":d.w1}}},517614:(e,r,n)=>{n(848318),n(301168),n(430385),n(19180);var a=n(382902);n(810503),n(967688),n(31898),n(340132),n(381673),n(859480),n(355755),n(730143),n(318147),n(253332),n(520779),n(386252),n(324183),n(70969),n(228845),n(230432),n(274016),n(399e3),n(263418),(0,a.eU)(!1)},133595:(e,r,n)=>{n.d(r,{Hf:()=>v,LU:()=>_,QH:()=>g,Rg:()=>m,Vg:()=>u,Vs:()=>y,W9:()=>I,gU:()=>b,jf:()=>E,ne:()=>T,pc:()=>f,qc:()=>h}),n(848318),n(186606),n(768618);var a=n(382902),i=n(989232),o=n(47687);n(953782);var s=n(28827),l=n(79083);n(63163),n(865114);var c=n(4881),d=n(612363);n(815347),n(516233);let u=(0,c.Wh)(()=>(0,a.eU)(void 0));function p(){return a.zl.get(d.NM)??void 0}function m(e,r){let n=a.zl.get(u);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.too_many_layers_selected_error",{sessionId:n,numLayersSelected:e,maxLayersAllowed:r})}function _(){let e=a.zl.get(u),r=a.zl.get(o.rJ)??-1;i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.initial_dependencies_loaded",{sessionId:e,libraryAssetsLoadedTimeMs:r})}function h(e,r){let n=a.zl.get(u),s=a.zl.get(o.I);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.violation_detection.started",{sessionId:n,detectionMode:e,numNodes:r,requestMode:s})}function g(e){let r=a.zl.get(u),n=a.zl.get(o.I),s=a.zl.get(o.ZM)??-1,l=-1===s?-1:s/e.length,c=a.zl.get(o.rT)??void 0,d=a.zl.get(o.KV)??void 0,p=a.zl.get(o.zZ)??void 0,m=new Map;for(let r of e){let{ruleId:e}=r,n=m.get(e)??0;m.set(e,n+1)}i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.violation_detection.completed",{sessionId:r,requestMode:n,numViolations:e.length,numViolationsPerRule:JSON.stringify(Object.fromEntries(m)),totalViolationDetectionTimeMs:s,totalViolationDetectionTimePerNodeMs:l,perRuleDetectionTimeMs:JSON.stringify(c),perRuleAndNodeDetectionTimeMs:JSON.stringify(d),p95PerRuleDetectionTimeMs:JSON.stringify(p)})}function f(){let e=a.zl.get(u),r=a.zl.get(o.I);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.visual_grouping.started",{sessionId:e,requestMode:r})}function E(e){let r=0,n=0,s=[];e.groupIdToGroup.forEach((e,a)=>{"ANCESTRY"===e.type?n++:"SIMILARITY"===e.type&&r++,s.push(e.violatingNodeIdToRootNodeId.size)});let c=e.groupIdToGroup.size,d=e.violatingNodeIdToGroupIdSet.size,p=a.zl.get(o.L2),m=p.find(e=>e.status===l.td.GROUPING_PENDING)?.duration??-1,_=a.zl.get(u),h=a.zl.get(o.I);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.visual_grouping.completed",{sessionId:_,requestMode:h,numGroups:c,numViolatingNodes:d,numSimilarityGroups:r,numAncestryGroups:n,numViolationsPerGroup:JSON.stringify(s),visualGroupingTimeMs:m,visualGroupingTimePerNode:-1===m?-1:m/d})}function y(e){let r=a.zl.get(u),n=a.zl.get(o.I);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.initial_detection_and_grouping_completed",{sessionId:r,requestMode:n,detectionAndGroupingTimeMs:e})}function b(e,r,n,o,s){let l=a.zl.get(u),c=p(),d=S(s);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.variable_rule.suggestions_generated",{sessionId:l,suggestionId:e,selectedGroupId:c,queryId:r,variableKeys:JSON.stringify(n),suggestionSource:o,ruleForLogging:d})}function v({suggestionId:e,variableKey:r,subscriptionStatus:n,variableSetId:o,ruleId:s}){let l=a.zl.get(u),c=p(),d=S(s);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.variable_rule.inserted",{suggestionId:e,sessionId:l,selectedGroupId:c,subscriptionStatus:n,variableKey:r,variableSetId:o,ruleForLogging:d})}function T(e,r,n){let o=a.zl.get(u),s=p(),l=S(n);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.style_rule.suggestions_generated",{sessionId:o,suggestionId:e,selectedGroupId:s,styleKeys:JSON.stringify(r),ruleForLogging:l})}function I(e,r,n){let o=a.zl.get(u),s=p(),l=S(n);i.definedAnalyticsHandler.trackDefinedMetric("suggested_actions.style_rule.inserted",{suggestionId:e,sessionId:o,selectedGroupId:s,styleKey:r,ruleForLogging:l})}function S(e){return e?[s.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES,s.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES,s.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES,s.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES].includes(e)?"REQUIRE_CORNER_RADIUS_VARIABLES":[s.C.REQUIRE_TOP_PADDING_VARIABLES,s.C.REQUIRE_BOTTOM_PADDING_VARIABLES,s.C.REQUIRE_LEFT_PADDING_VARIABLES,s.C.REQUIRE_RIGHT_PADDING_VARIABLES].includes(e)?"REQUIRE_PADDING_VARIABLES":e:void 0}},612363:(e,r,n)=>{n.d(r,{IZ:()=>_,NM:()=>p,_M:()=>d,d7:()=>b,pR:()=>u});var a=n(382902),i=n(226601),o=n(28827),s=n(79083),l=n(4881),c=n(815347);let d=(0,l.Wh)(()=>(0,a.eU)(s.FR.LIBRARY_SELECTOR_INITIAL)),u=(0,l.Wh)(()=>(0,a.eU)(null));(0,a.eU)(null),(0,a.eU)(null);let p=(0,a.eU)(null),m=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(p),n=e(i.Iy);return r?n.get(r):null}));(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(m);return Array.from(r?.rootNodeIdToViolatingNodeIdSet.keys()??[])}));let _=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(m),n=e(i.m7),a=Array.from(r?.violatingNodeIdToRootNodeId.keys()??[]),o=e(i.VA);return a.reduce((e,r)=>{for(let a of Array.from(n.get(r)?.values()??[]))for(let r of a)o.has(r.violationId)&&e.push(r);return e},[])})),h=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(_),n={};for(let e of r){let r=e.groupKey,a=e.ruleId;a===o.C.REQUIRE_STROKE_COLOR_VARIABLES&&(a=o.C.REQUIRE_FILL_COLOR_VARIABLES),n[a]||(n[a]={}),n[a][r]||(n[a][r]=[]),n[a][r].push(e)}return n}));(0,l.Wh)(()=>(0,a.eU)(e=>Array.from(e(i.Iy).values()).sort((e,r)=>{if(e.type!==r.type)return"SIMILARITY"===e.type?-1:1;let n=e.violatingNodeIdToRootNodeId.size,a=r.violatingNodeIdToRootNodeId.size;return"SIMILARITY"===e.type?a-n:n-a})));let g=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(m);if(r)return(0,c.ac)(r)})),f=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(g),n=e(m),a=e(i.m7);if(!r||!n)return{};let o=n.rootNodeIdToViolatingNodeIdSet.get(r),s={};return Array.from(o??[]).forEach(e=>{let r=a.get(e),n=(0,c.rO)(Array.from(r?.values()??[]).flat());n&&(s[n.groupKey]=n)}),s})),E=(0,l.Wh)(()=>(0,a.eU)(e=>{let r=e(h),n=e(f),a=Object.values(r).flatMap(e=>Object.keys(e)),i={};return a.forEach(e=>{let a=n[e];if(!a){let n=Object.values(r).flatMap(r=>r[e]??[]);a=(0,c.rO)(n)}a&&(i[e]=a)}),i})),y=(0,l.Wh)(()=>(0,a.eU)(null)),b=(0,a.eU)(null,(e,r)=>{r(y,null)});(0,a.eU)(e=>e(y),(e,r,n)=>{let{groupKey:a,selectedFixItem:i}=n,o=new Map(e(y)??new Map);o.set(a,i),r(y,o)}),(0,a.eU)(e=>{let r=e(y),n=e(E),a=e(i.VG),o=r??new Map,s=Object.keys(n),l=new Map;for(let e of s){let r=o.get(e);if(r){l.set(e,r);continue}let n=a.get(e);if(n){l.set(e,n);continue}l.set(e,{fix:null,status:"loading"})}return l})},815347:(e,r,n)=>{n.d(r,{Fh:()=>m,Lt:()=>d,ac:()=>u,hf:()=>_,rO:()=>p,y4:()=>h});var a=n(382902),i=n(226601),o=n(79083),s=n(476254),l=n(952039),c=n(439796);function d(e,r,n,a=3e3){s.D.dispatch(l.F.enqueue({message:e,type:n,icon:r,timeoutOverride:a,onDismiss:()=>{}}))}function u(e){let r=Array.from(e.rootNodeIdToViolatingNodeIdSet.entries()).sort(([e,r],[n,a])=>a.size-r.size)[0];if(r?.length)return r[0]}function p(e){return[...e].sort((e,r)=>e.guid.localeCompare(r.guid))[0]}function m(){let e=a.zl.get(i.nE),r=a.zl.get(i.v4);return{availableVariables:e,availableLibraryKeys:a.zl.get(i.W0),selectedLibraryKeys:r.libraryKeys}}function _(){return function(){let e=a.zl.get(i.v4),r=a.zl.get(i.qp);return{availableVariables:a.zl.get(i.nE),localVariables:r?a.zl.get(c.uk):[],libraryVariables:e.libraryVariables,libraryVariableSetIdToSet:e.libraryVariableSetIdToSet,libraryKeys:e.libraryKeys}}()}function h(e){return e===o.FR.LIBRARY_SELECTOR_INITIAL||e===o.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW||e===o.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW}},516233:(e,r,n)=>{var a=n(382902),i=n(28827),o=n(612363),s=n(340401);let l=(0,a.eU)(e=>{let r=e(o.IZ),n={},a=0,l=(e,r,i)=>{n[e]||(n[e]={}),n[e][r]||(n[e][r]=[]),n[e][r].push(i),a++};for(let e of r){let{groupKey:r,ruleId:n,nodeType:a}=e;switch(n){case i.C.REQUIRE_FILL_COLOR_VARIABLES:!function(e,r,n){"TEXT"===e?l(s.pZ.TEXT_COLOR,r,n):"FRAME"===e?l(s.pZ.BACKGROUND_COLOR,r,n):l(s.pZ.SHAPE_COLOR,r,n)}(a,r,e);break;case i.C.REQUIRE_STROKE_COLOR_VARIABLES:!function(e,r,n){"TEXT"===e?l(s.pZ.TEXT_STROKE_COLOR,r,n):"FRAME"===e?l(s.pZ.STROKE_COLOR,r,n):l(s.pZ.SHAPE_STROKE_COLOR,r,n)}(a,r,e);break;case i.C.REQUIRE_TEXT_STYLES:l(s.pZ.TEXT_STYLE,r,e);break;case i.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case i.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case i.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case i.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:l(s.pZ.CORNER_RADIUS,r,e);break;case i.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:l(s.pZ.HORIZONTAL_SPACING,r,e);break;case i.C.REQUIRE_VERTICAL_SPACING_VARIABLES:l(s.pZ.VERTICAL_SPACING,r,e);break;case i.C.REQUIRE_TOP_PADDING_VARIABLES:case i.C.REQUIRE_BOTTOM_PADDING_VARIABLES:case i.C.REQUIRE_LEFT_PADDING_VARIABLES:case i.C.REQUIRE_RIGHT_PADDING_VARIABLES:l(s.pZ.PADDING,r,e);break;case i.C.TEXT_BACKGROUND_CONTRAST_AA:l(s.pZ.TEXT_BACKGROUND_CONTRAST_AA,r,e);break;case i.C.REQUIRE_ASSETS_FROM_SELECTED_LIBRARIES:l(s.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES,r,e);break;case i.C.EXTENSIBILITY_RULE:l(s.pZ.EXTENSIBILITY_RULE,r,e);break;default:throw Error("Unknown rule ID: "+n)}}return{suggestionBlocks:n,violationCount:a}}),c=(0,a.Iz)(e=>(0,a.eU)(r=>{let{suggestionBlocks:n}=r(l),a=[],i=0,o=(0,s.a7)();for(let r of e){let e=n[r];e&&0!==Object.keys(e).length&&(i+=Object.values(e).flat().length,a.push({blockConfig:o[r],violationsByGroupKey:e}))}return{blocks:a.sort((e,r)=>e.blockConfig.priority-r.blockConfig.priority),totalViolations:i}}));c(s.QR),c(s.y6),c([s.pZ.TEXT_STYLE]),c([s.pZ.TEXT_BACKGROUND_CONTRAST_AA]),c([s.pZ.ASSETS_OUTSIDE_SELECTED_LIBRARIES]),c([s.pZ.EXTENSIBILITY_RULE])},340401:(e,r,n)=>{n.d(r,{QR:()=>o,a7:()=>l,pZ:()=>i,y6:()=>s});var a=n(967688),i=(e=>(e.BACKGROUND_COLOR="BACKGROUND_COLOR",e.STROKE_COLOR="STROKE_COLOR",e.TEXT_COLOR="TEXT_COLOR",e.TEXT_STROKE_COLOR="TEXT_STROKE_COLOR",e.SHAPE_COLOR="SHAPE_COLOR",e.SHAPE_STROKE_COLOR="SHAPE_STROKE_COLOR",e.TEXT_STYLE="TEXT_STYLE",e.CORNER_RADIUS="CORNER_RADIUS",e.HORIZONTAL_SPACING="HORIZONTAL_SPACING",e.VERTICAL_SPACING="VERTICAL_SPACING",e.PADDING="PADDING",e.TEXT_BACKGROUND_CONTRAST_AA="TEXT_BACKGROUND_CONTRAST_AA",e.ASSETS_OUTSIDE_SELECTED_LIBRARIES="ASSETS_OUTSIDE_SELECTED_LIBRARIES",e.EXTENSIBILITY_RULE="EXTENSIBILITY_RULE",e))(i||{});let o=["BACKGROUND_COLOR","STROKE_COLOR","SHAPE_COLOR","SHAPE_STROKE_COLOR","TEXT_COLOR","TEXT_STROKE_COLOR"],s=["CORNER_RADIUS","HORIZONTAL_SPACING","VERTICAL_SPACING","PADDING"],l=()=>({BACKGROUND_COLOR:{id:"BACKGROUND_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.fill_colors.background_colors"),priority:0},STROKE_COLOR:{id:"STROKE_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.stroke_colors.stroke_color"),priority:1},SHAPE_COLOR:{id:"SHAPE_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.fill_colors.shape_colors"),priority:2},SHAPE_STROKE_COLOR:{id:"SHAPE_STROKE_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.stroke_colors.shape_stroke_colors"),priority:3},TEXT_COLOR:{id:"TEXT_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.fill_colors.text_color"),priority:4},TEXT_STROKE_COLOR:{id:"TEXT_STROKE_COLOR",getLabel:()=>(0,a.t)("design_linter.suggestion_block.stroke_colors.text_stroke_color"),priority:5},TEXT_STYLE:{id:"TEXT_STYLE",getLabel:()=>(0,a.t)("design_linter.suggestion_block.text_style"),priority:6},CORNER_RADIUS:{id:"CORNER_RADIUS",getLabel:()=>(0,a.t)("design_linter.suggestion_block.corner_radius"),priority:7},HORIZONTAL_SPACING:{id:"HORIZONTAL_SPACING",getLabel:()=>(0,a.t)("design_linter.suggestion_block.horizontal_spacing"),priority:8},VERTICAL_SPACING:{id:"VERTICAL_SPACING",getLabel:()=>(0,a.t)("design_linter.suggestion_block.vertical_spacing"),priority:9},PADDING:{id:"PADDING",getLabel:()=>(0,a.t)("design_linter.suggestion_block.padding"),priority:10},TEXT_BACKGROUND_CONTRAST_AA:{id:"TEXT_BACKGROUND_CONTRAST_AA",getLabel:()=>(0,a.t)("design_linter.suggestion_block.text_background_contrast_aa"),priority:11},ASSETS_OUTSIDE_SELECTED_LIBRARIES:{id:"ASSETS_OUTSIDE_SELECTED_LIBRARIES",getLabel:()=>"",priority:12},EXTENSIBILITY_RULE:{id:"EXTENSIBILITY_RULE",getLabel:()=>"Custom rules",priority:13}});var c=(e=>(e.COLOR="COLOR",e.TEXT="TEXT",e.NUMBER="NUMBER",e.DEFAULT="DEFAULT",e))(c||{})},227918:(e,r,n)=>{n.d(r,{u:()=>l});var a=n(186606),i=n(382902),o=n(843484);let s=(0,i.eU)(e=>e(o.Kh),(e,r,n)=>{let i=function(e,r){return r&&e===a.NLJ.SELECT?"set-tool-default-dev-handoff":(0,o.O_)(e)}(n,e(o.Q)===a.lyf.DEV_HANDOFF);(0,o.$v)(i)}),l={...o.lW,activeToolIdAtom:s}},360854:(e,r,n)=>{n.d(r,{bK:()=>d,oZ:()=>u,r8:()=>s,uK:()=>c});var a=n(382902),i=n(430998);let o=(0,a.eU)({}),s=(0,a.Iz)(e=>(0,a.eU)(r=>r(o)[e],(r,n,a)=>{n(o,r=>({...r,[e]:a}))}));(0,a.eU)(e=>Object.values(e(o)));let l=(0,a.eU)(!1),c=(0,a.eU)({autoScroll:!1});async function d(e,r,n,d){let{guid:u}=e;a.zl.set(c,e=>e.autoScroll?{...e,guid:u}:e),d||a.zl.set(l,!0),await function(e,r){let{guid:n,name:o}=e,l=.03*o.length;return new Promise(c=>{(0,i.i)(o.length,0,{onUpdate:i=>{!r.signal.aborted&&e.isAlive&&a.zl.set(s(n),{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:o.slice(0,Math.floor(i))})},duration:l,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:o}=e,l=.07*r.length;return new Promise(c=>{(0,i.i)(0,r.length,{onUpdate:i=>{!n.signal.aborted&&e.isAlive&&a.zl.set(s(o),{guid:o,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(i))})},duration:l,ease:"linear",onComplete:c})})}(e,r,n),s.remove(u),a.zl.set(o,e=>{let r={...e};return delete r[u],r}),d||a.zl.set(l,!1)}function u(){s.removeAll()}},880143:(e,r,n)=>{n.d(r,{W:()=>o}),n(382902);var a=n(476254),i=n(353231);function o(e,r,n,o){var s,l,c,d;let u=a.D.getState(),p=(s=r,l=e,c=n,d=a.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,i.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,p)}n(106641)},839866:(e,r,n)=>{n.d(r,{LL:()=>b,be:()=>v,k6:()=>I,xG:()=>T});var a=n(848318);n(936733);var i=n(938982),o=n(186606),s=n(320953),l=n(615233),c=n(998568),d=n(810503),u=n(849249),p=n(577811),m=n(890900),_=n(728075);let h=Object.create(null);function g(e){return(0,p.w6)(e).catch(()=>null)}let f=new m.A,E=(0,l.ck)("cbbdc3ccc2f650369332a454328722aa11cbd78a");async function y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}){let o=500*window.devicePixelRatio,s=81.25*window.devicePixelRatio,[l,d]=await Promise.all([g({url:E,height:o,width:o}),e?g({url:e,height:o,width:o}):null]),u=(0,p.Dl)(o,o),m=u.getContext("2d");if(!l)return"";!function(...e){for(let r of e)if(r&&(!(r instanceof HTMLImageElement)||!r.src||!r.width||!r.height)){let e=r.outerHTML||Object.prototype.toString.call(r);(0,c.$D)(i.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${e}'`))}}(l,d);try{a||m.drawImage(l,0,0,o,o)}catch(e){return S(l,e),""}if(m.arc(o/2,o/2,o/2-s,0,2*Math.PI,!0),m.clip(),d){let e=o-2*s;try{m.drawImage(d,s,s,e,e)}catch(e){return S(d,e),""}}else{if(!n||!r)return"";m.fillStyle=n,m.fillRect(0,0,o,o),m.textBaseline="middle",m.textAlign="center";let e=187.5*window.devicePixelRatio;m.font=`${e}px Inter`,m.fillStyle===_.$C?m.fillStyle=_.PN:m.fillStyle="white",m.fillText(r.substring(0,1).toUpperCase(),o/2,o/2+10*window.devicePixelRatio)}m.scale(window.devicePixelRatio,window.devicePixelRatio);let h=u.toDataURL("image/png");return f.set(h,e,r,n,a),h}function b(e,r,n,i){let[o,s]=(0,a.useState)(f.get(e,r,n,i)||"");return(0,a.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let a=!1,l=f.get(e,r,n,i);return l!==o&&(l?s(l):y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}).then(e=>{a||s(e)})),()=>{a=!0}},[e,r,n,i,o]),o}async function v(e,r){let n=await (0,u.T)(e,h);(0,d.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),o.glU?.activateStampTool(n,r)}async function T(e,r,n,a,i,l){let c=await (0,u.T)(e,h);(0,s.l7)(l,"drop-face",()=>o.glU?.dropFaceOntoCanvas(c,"Face Stamp",r,n,a,i))}function I(e,r){if(e.image)return(0,l.ck)(e.image);if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function S(e,r){if(r&&(0,c.$D)(i.e.FIGJAM,r),!e)return;let n=e.outerHTML||Object.prototype.toString.call(e);(0,c.$D)(i.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${n}'`))}},243277:(e,r,n)=>{n.d(r,{WJ:()=>p,hf:()=>d,sn:()=>o,tR:()=>u});var a=n(615233),i=n(967688);let o="s-heart";function s(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.heart")}]}let l={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return s({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let r=l[e]||l["667799"];return(0,a.ck)(r)},plusOne:c["s-plusOne"]})}let u=(0,a.ck)("2b2029d1eabf48358e208427103a2023435751dc"),p=s({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>(0,a.ck)("cb417fb549d06a2fb42e182cddd2b94b1996b768"),dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},293529:(e,r,n)=>{n(848318),n(536384),n(264478),n(178806),n(967688),n(925085),n(957872),n(863270),n(696786),n(526594),n(593713),n(533978),n(404712),n(809086)},115958:(e,r,n)=>{n(848318),n(301168),n(186606),n(533737);var a=n(303397);n(46641),n(752181),(0,n(944239).D)(()=>a.Y5.fromFullscreen)},286202:(e,r,n)=>{n(848318),n(301168),n(186606),n(533737);var a=n(303397);n(46641),n(752181),(0,n(944239).D)(()=>a.Y5.fromFullscreen)},405465:(e,r,n)=>{n.d(r,{a2:()=>s}),n(848318),n(301168);var a=n(559389),i=n(382902);n(533737);let o={x:(0,i.eU)(void 0),y:(0,i.eU)(void 0),cornerRadius:(0,i.eU)(void 0),angle:(0,i.eU)(void 0),width:(0,i.eU)(void 0),height:(0,i.eU)(void 0),fontSize:(0,i.eU)(void 0),fontStyle:(0,i.eU)(void 0),fontFamily:(0,i.eU)(void 0),fillPaints:(0,i.eU)(void 0),strokePaints:(0,i.eU)(void 0),effects:(0,i.eU)(void 0)},s=(0,a.s)(e=>{let r=o[e];r&&i.zl.set(r,e=>!e)},200,!0)},296937:(e,r,n)=>{n.d(r,{V1:()=>i});var a=n(382902);let i=(0,a.E3)("file-drawer-open",!1);(0,a.eU)(!1)},729469:(e,r,n)=>{n(848318),n(536384),n(135450),n(696786)},81004:(e,r,n)=>{n.d(r,{Zk:()=>T,x0:()=>v}),n(848318);var a=n(938982),i=n(382902),o=n(748008),s=n(998568),l=n(810503),c=n(540698),d=n(995218),u=n(658796);n(125761);var p=n(55116),m=n(790362);n(113173);var _=n(467808),h=n(709008);n(432741);var g=n(828897);let f=(0,i.E3)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3}),E=(0,i.eU)(e=>e(p.Fr3.Query({})));class y{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:a}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=a??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let a=this.getQueries();a.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:a.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save(),m.I.updateFrecencyHistory({actionKey:e,timestamp:Date.now(),editorType:this.fullscreenEditorType})}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let a=r[n];if(!a)return[];let{actions:i,queries:o}=a,s=Object.entries(i).flatMap(([r,{timestamps:a}])=>({userId:e,editorType:n,action:r,timestamp:a[0]})),l=Object.entries(o).flatMap(([r,a])=>Object.entries(a).flatMap(([a,{timestamps:i}])=>({userId:e,editorType:n,action:a,query:r,timestamp:i[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:a,action:i,query:o}=e[n],s=this.userIds[r][a];s&&(void 0!==o?delete s.queries[o][i]:delete s.actions[i],this.userIds[r][a]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new _.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new h.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),b=this}catch(e){(0,l.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,c.Lg)()&&(this.MAX_ENTRIES=e)}}let b=null;function v(){let e=i.zl.get(u.N).data,r=i.zl.get(d.u8);return b&&b.userId===e&&b.fullscreenEditorType===r||(b=new y({json:i.zl.get(f),setJson:e=>i.zl.set(f,e),userId:e,fullscreenEditorType:r})),{actions:function(e,r){if(!e.data)return null;let n=(0,o.oA)(e.data.actionsHistory);return n&&n.frecencyHistory?function(e,r){let n=function(e){let r;try{r=JSON.parse(e)}catch(r){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid JSON value for frecency history from DB: ${e}`),{}),null}let n=g.SR.safeParse(r);if(!n.success)return(0,s.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid format for frecency history object from DB: ${e}`),{}),null;let i={};for(let[e,r]of Object.entries(n.data)){let n=Number(e);if(!g.B3.safeParse(n).success)return(0,s.$D)(a.e.AI_FOR_PRODUCTION,Error(`Invalid key in frecency history object from DB: ${e}`),{}),null;i[n]=r}return i}(e);if(n&&r){let e=n[r]?.actions;if(e)return new _.l(e)}return null}(n.frecencyHistory,r):null}(i.zl.get(E),i.zl.get(d.u8))||b.getActions(),queries:b.getQueries()}}function T(){i.zl.set(f,{numItems:0,userIds:{}}),b=null}},324183:(e,r,n)=>{var a=n(848318),i=n(891627),o=n(301168),s=n(186606),l=n(320953),c=n(19180),d=n(418193),u=n(781239),p=n(844525);n(972402);var m=n(453370),_=n(142896),h=n(715980),g=n(675257);n(47458);var f=n(863270);n(738714),n(696786);var E=n(755860),y=n(146859),b=n(259964),v=n(197696),T=n(991675);n(698429);var I=n(442022);n(615233),n(66699);var S=n(382902),A=n(454805),w=n(35949),C=n(700890),N=n(359567),L=n(31898),O=n(446951),R=n(175393),P=n(326616);(0,O.Ju)(function(){let e=(0,o.wA)(),r=a.useCallback(()=>{e(L.AS())},[e]),[n,i]=(0,S.fp)(w.cH),[s,l]=(0,S.fp)(N.MW),[c,d]=(0,S.fp)(C.Oq);return a.createElement(R.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new A.Mi(0,0),onClose:r},a.createElement("div",{className:P.kL},a.createElement("div",{className:P.zN},a.createElement("input",{type:"checkbox",onChange:e=>i(e.target.checked),checked:n}),a.createElement("span",{className:P.Pf},"Debugger break in template execution")),a.createElement("div",{className:P.zN},a.createElement("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:s}),a.createElement("span",{className:P.Pf},"Log Code Connect document")),a.createElement("div",{className:P.zN},a.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:c}),a.createElement("span",{className:P.Pf},"Log JS before execution"))))},"CodeConnectDebugModal"),n(533737),n(303397);var D=n(730143);n(752181),n(318147);var k=n(489082),M=n(17753),F=n(232958),x=n(134642),U=n(875676);function B(e){let[r,n]=a.useState(e.initialValue),i=a.useCallback(e=>{(0,k.gl)(e)||n(e.valueOf())},[n]),s=(0,o.wA)();return a.useEffect(()=>{(0,x.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),a.createElement(F.Ht,{bigNudgeAmount:e.bigNudgeAmount,className:U.hF,"data-tooltip":e.propertyDescription,"data-tooltip-type":M.Ib.TEXT,dispatch:s,max:e.maxVal,min:e.minVal,onValueChange:i,smallNudgeAmount:e.smallNudgeAmount,value:r},a.createElement("span",{className:U.Pf},e.displayName))}(0,O.Ju)(function(){let e=(0,o.wA)(),r=a.useCallback(()=>{e(L.AS())},[e]);return a.createElement(R.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new A.Mi(0,0),onClose:r},a.createElement("div",{className:U.kL,onMouseDown:e=>{e.stopPropagation()}},a.createElement(B,{configPropertyName:"minZoomPercentage",initialValue:x.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),a.createElement(B,{configPropertyName:"zoomScaleOverlap",initialValue:x.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),a.createElement(B,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:x.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),a.createElement(B,{configPropertyName:"rebuildClustersZoomDelay",initialValue:x.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(309109),n(260387);var G=n(304756),V=n(19242),H=n(890257),z=n(284709);class K extends Error{}async function W({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let a=(await V.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===a)throw Error("undefined versionId");n(`Exporting file version ${a}...`);let{meta:{run_key:i}}=(await G.Ay.post(`/api/ml/export/file_version/${a}`)).data;n(`Waiting for run ${i}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:a}}=(await (0,G.Ay)({url:`/api/ml/export/status/${encodeURIComponent(i)}`})).data;if(r){n(`Export manifest is ready at ${a}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof K)return;n("Failed!"),n(`${e}`)}}(0,O.Ju)(function(){let e=(0,o.wA)(),r=a.useCallback(()=>{e(L.AS())},[e]),[n,i]=a.useState([]),s=(0,D.tS)();return a.useEffect(()=>{let n=!1,a=e=>{if(n)throw new K;i(r=>r.concat([e]))};return null===s?a("No open file"):W({dispatch:e,fileKey:s,log:a}),()=>{n=!0,r()}},[r,e,s]),a.createElement(H.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},a.createElement("div",{className:z.k},n.join("\n")))},"MLExportModal");var j=n(62467);let Y="preferences-menu";class $ extends u.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,y.jr)(e,y.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,g.A)(Y)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===s.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,h.k$)(e)||(0,h.gN)(e)||(0,h.id)(e)||!e.name||e.name!==Y?(this.selectPreferencesMenu(),this.props.dispatch(m.ho({type:v.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(m.oB())}}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null,r=a.createElement("div",{className:`${_.Dm}`},a.createElement(q,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,allowCodegenOptions:this.props.selectedView.editorType===b.nT.Design,alwaysShowCheckMarkOffset:!0,appModel:this.props.appModel,"aria-labelledby":this.props["aria-labelledby"],controlledByID:this.props.controlledByID,dispatch:this.props.dispatch,id:this.props.id,isLimitedDevMode:this.props.isLimitedDevMode,lean:this.props.isUI3?"right":void 0,menuItems:this.props.menuItems,onKeyDown:this.onKeyDown,recordingKey:"mainMenu",selectedView:this.props.selectedView,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0})}));return(0,c.k)().fullscreen_menu_portal?i.createPortal(r,document.body):r}}$.displayName="FullscreenMainMenu";class q extends a.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{l.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,h.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(p.n.set({message:e.loadingIndicatorString,callback:()=>{E.VU.get(n,e.source??"menu",e.args)(r)}})):E.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,d.xx)(e=>(0,j.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(m.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?a.createElement(f.fu,{name:T.e0.EDITOR_MENU},a.createElement(I.j,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.activatePathOnMount,allowCodegenOptions:this.props.allowCodegenOptions,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,"aria-labelledby":this.props["aria-labelledby"],dispatch:this.props.dispatch,id:this.props.id,items:e,lean:this.props.lean,minWidth:this.props.minWidth,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,recordingKey:this.props.recordingKey,showPoint:this.props.showPoint})):null}}q.displayName="FullscreenMultilevelDropdown"},112661:(e,r,n)=>{n.d(r,{xm:()=>y});var a=n(660376),i=n(19180),o=n(635),s=n.n(o),l=n(945104),c=n(186125),d=n(715980),u=n(134768),p=n(197696),m=n(166045),_=n(113173),h=n(81004),g=n(62467),f=n(766408),E=n(712992);class y{constructor(e,r,n,a){for(let i of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(a&&a.includeDisabled),this.acceptsUnicode=!!(a&&a.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[i],r=e.queryString?`${e.queryString} ${i}`:i;this.queryStringMap[r]=e}}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let i="children"in n;if(!(0,d._o)(n)||i||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&i)for(let i of((0,a.KF)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,i)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,m.EG)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,i.k)().internal_only_debug_tools&&!(0,_.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,_.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=b(e,n),n}_buildSearchResult(e,r,n,a){let i={...r},o={...i.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=a?.score||0,o.substringMatchedAgainst=a?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=b(e,o),{...i,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new l.Ax(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=new c.dU(r),i=[];for(let[r,o]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(a.matchAgainstText(r,c.cT.VISIBLE)),o.fullscreenMenuAction.searchSynonyms||[])){let r=a.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let p=s()(u,e=>e.score),m=p?.score||0;(d>0||m>0)&&i.push(this._buildSearchResult(e,o,l,p))}return i}_searchByFuzzyMatch(e,r){let n=new l.Ax(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let a=[],i=n.matchAgainst(Object.keys(this.queryStringMap));if(i.length)for(let r of i){if((0,_.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};a.push(this._buildSearchResult(e,n,r))}return a}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,_.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let a=(0,_.h8)()?(0,E.ou)({...(0,h.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>a.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=b(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let a={...this.searchMap[n].fullscreenMenuAction};a.popularityScore=(0,u.a)(a.action),a.disabled=b(e,a),r[a.name||a.action||n]=a}),r}}function b(e,r){return r.disabled?r.disabled:!(r.name||(0,p.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}},517523:(e,r,n)=>{n.d(r,{$O:()=>l,Z8:()=>s}),n(301168),n(938982);var a=n(382902);n(755595);var i=n(260986),o=n.n(i);n(476254),n(748008),n(329228),n(998568),n(63443),n(652576),n(730143),n(55116),n(20687),n(324747),n(434289),n(764474);let s=(0,a.eU)([]);function l(){return o()(a.zl.get(s),"displayName")}},582855:(e,r,n)=>{n.d(r,{MQ:()=>o}),n(186606);var a=n(382902);n(29188),n(637640),n(967688),n(92338),n(221242);let i=(0,a.eU)(new Set),o=(0,a.eU)(null,(e,r,n,a)=>{let o=e(i);a?o.add(n):o.delete(n),r(i,new Set(o))})},222116:(e,r,n)=>{n.d(r,{d:()=>M}),n(956512);var a=n(848318),i=n(891627),o=n(301168),s=n(186606),l=n(553547),c=n(768618),d=n(418193),u=n(989232),p=n(410441),m=n(454805),_=n(995218),h=n(696786),g=n(303397),f=n(959750),E=n(686464),y=n(702038),b=n(318147),v=n(554326),T=n(134684),I=n(314774),S=n(27776);let A=new Set(["DOCUMENT","CANVAS","NONE"]),w=(0,p.jz)(S.y9S),C=(0,p.jz)(S.IuL),N=(0,p.jz)(S.MJh),L=(e,r,n)=>n?e===b._Y.WHITEBOARD?C:r?N:0:0,O=(0,d.xx)((e,r,n,a,i)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:p}=e;r&&(o+=w,s+=w,l+=w/p/2,c+=w/p/2,d-=w,u-=w,d=Math.max(d,0),u=Math.max(u,0));let m=L(a,i,n);return u-=m,u=Math.max(u,1),c-=m/p/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),R=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},P=e=>e.replace(/[\[\]\s]/g,"").split(",");function D(e,r,n){let a;let i=s.glU.getActiveCommentAnchorData();a=n&&i&&i.stablePath!==l.x7&&i.stablePath.length>0?i.stablePath:s.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==a||a===l.x7)return o;let c=s.Egt.getBoundsForStablePath(a);if(!c&&n&&((0,u.trackEvent)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),c=s.Egt.getBoundsForStablePath(a)),!c)return((0,u.trackEvent)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:c.x,y:c.y},p=m.Mi.subtract(e,d),_=R(a);return{...o,nodeId:_,nodeOffset:p,inFrame:r!==_,stablePath:P(a)}}function k(e){let r=(0,v.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),d=(0,_.lg)(),u=a.useRef(g.Y5.getViewportInfo()),[p,m]=a.useState(g.Y5.getViewportInfo()),E=(0,h.GS)();!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);a.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,T.H)())},[e,r]),a.useEffect(()=>{let r=r=>{(0,i.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(a.useCallback(e=>{u.current=e,m(e)},[m]));let b=a.useMemo(()=>({getViewportInfo:()=>O(u.current,r,n,d,E),getRawViewportInfo:()=>u.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>s.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>s.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(l.AD);return}let r=s.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?(0,c.UN)().getFromStablePath(P(r)):null;n&&!A.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(l.AD)},setCurrentPageIdAsync:async e=>await (0,c.UN)().setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>s.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:D,getValidCommentsRect:()=>null}),[r,n,d,E]),S=a.useMemo(()=>new I.f5(b,{...I.Pe,isGetViewportAtomic:!0}),[b]);return a.createElement(I.kw.Provider,{value:S},a.createElement(I.aF,{latestViewport:p},e.children))}function M(e){return(0,E.q)()?a.createElement(k,null,e.children):a.createElement(a.Fragment,null,e.children)}},583484:(e,r,n)=>{n.d(r,{DS:()=>z,Q4:()=>K,Qp:()=>Y,R$:()=>j,WD:()=>$,_W:()=>U,kh:()=>x,ob:()=>F,q0:()=>B,r1:()=>G,t$:()=>V});var a=n(848318),i=n(301168);n(887048);var o=n(938982),s=n(162796),l=n(309488),c=n(93275),d=n(186606),u=n(768618);n(19180);var p=n(382902),m=n(142917),_=n(989232),h=n(410441),g=n(63163),f=n(10855),E=n(410725),y=n(748008),b=n(998568),v=n(373286),T=n(183867),I=n(345964),S=n(967688),A=n(233594),w=n(792533),C=n(730143),N=n(318147),L=n(55116),O=n(677334),R=n(606672),P=n(780673),D=n(895222),k=n(786175),M=n(850755);let F={alwaysPan:!0,maxScale:1},x={alwaysNavToSimilarViewport:!0},U=300,B=.5,G=4;function V(e,r){let n=(0,i.d4)(e=>e.openFile?.key),a=(0,i.d4)(e=>e.mirror.appModel.currentPage),o=r??a,s=(0,i.d4)(e=>e.fileVersion);return!!n&&!!o&&!!e&&(0,R.cn)(n,o,e,(0,D.NK)(s))===p.zl.get(R.tP)}P.mg.COMPARE_THUMBNAIL;let H=(0,p.eU)("");function z(e){let r=new u.qo(d.juq.LIVE_FILE),n=(0,m.ei)(e,!1,r),s=n?.createdAt||null,l=s?new Date(s).toISOString():void 0,c=n?.lastEditedAt||null,h=c?new Date(c&&c%6e4==0&&c<17061264e5?c+6e4:c).toISOString():void 0,f=m.E1()?.toISOString(),v=(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),T=function(e){let r=(0,C.tS)(),n=function(e){let r=(0,C.q5)(),n=r?.key,i=(0,E.Rs)(L.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,p.fp)(H);return(0,g.h)(()=>l("")),a.useMemo(()=>{if("loaded"===i.status){let r=i.data.file;if(r.status===y.tT.Error)return(0,b.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let a=n.filter(e=>e.activityType===N.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${a.length}`;return e&&c!==s&&(l(c),(0,_.trackEvent)("dev_mode.activity.fetch_activity_log",{numEntries:a.length},{forwardToDatadog:!0})),a}return"errors"===i.status?((0,b.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(i.errors))),null):"loading"===i.status?"loading":null},[i,s,e,l])}(e??""),i=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(A.t):void 0,s=(0,R.kT)({fileKey:r,pageSize:200,versionIds:i}),[l]=(0,O.IT)(s,{enabled:!!r});return a.useEffect(()=>{"errors"===l.status&&(0,b.$D)(o.e.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(v?e:void 0),I=a.useMemo(()=>v?T.versions:function(e,r,n,a){let i=[],o=!1;function s(){if(i.length>0){let e=i[i.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&a&&e.created_at&&e.created_at<a&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),i;i.push(e)}}return s(),i}(T.versions,h,l,f),[T.versions,h,l,f,v]),{requestStatus:S}=T;return{versions:I,versionsQueryLoaded:"loaded"===S||"disabled"===S}}function K({title:e,open:r,onClose:n,children:i}){let o=s.hS({open:r,onClose:n}),{windowInnerWidth:d}=(0,f.l)(),u=(0,h.jz)(k.compareChangesModalPadding);return a.createElement(l.bL,{manager:o,width:d-u,height:"full"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,e)),a.createElement(c.nB,{className:M.Hb},i)))}function W(e){return!!e&&e.hasOwnProperty("getImage")}function j(e){let{view:r,opacity:n,Overlay:i,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=a.useMemo(()=>W(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||G},[e]);return a.createElement("div",{className:r===v.Ss.SIDE_BY_SIDE?M.KJ:M.DF},!!s&&a.createElement("div",{className:M.Lg},s),!c&&a.createElement("div",{className:M.$0},!o&&(0,S.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),W(e.image)?a.createElement(T.Nf,{className:M.Sl,style:{...l()},image:c,Overlay:i}):c&&a.createElement(T.ec,{className:M.Sl,style:{...l()},image:c,Overlay:i}))}function Y(){return a.createElement("div",{className:M.GE},a.createElement(I.qc,null))}function $(e,r){let n=e?.toString();n&&r(w.lW({stringToCopy:n}))}},625024:(e,r,n)=>{n.d(r,{xX:()=>l,$_:()=>c});var a=n(848318);n(301168),n(186606),n(19180),n(989232);var i=n(918777);n(345964),n(720522),n(401970);var o=n(967688);n(606672),n(17753);var s=n(125952);function l(e,r=!1){let n=(0,i.A)(new Date),a=(0,i.A)(e);return a.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:a.toDate()}):a.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:a.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:a.toDate()}):(0,o.t)("collaboration.feedback.date",{time:a.toDate()})}function c(e,r){return e?a.createElement(s.Ro,{size:r,entity:{img_url:e}}):a.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(16808)},678405:(e,r,n)=>{n.d(r,{Ah:()=>ez,Cr:()=>ej,YL:()=>eW,aS:()=>e3,jP:()=>eY,ur:()=>eK});var a=n(848318),i=n(301168),o=n(660376),s=n(938982),l=n(773511),c=n(658029),d=n(168323),u=n(270251),p=n(617215),m=n(622830),_=n(238290),h=n(448335),g=n(408193),f=n(88706),E=n(422482),y=n(150934),b=n(523152),v=n(947078),T=n(186606),I=n(19180),S=n(536384),A=n.n(S),w=n(805353),C=n.n(w),N=n(989232),L=n(796853),O=n(410441),R=n(857607),P=n(527546),D=n(656329),k=n(210185),M=n(781239),F=n(998568),x=n(810503),U=n(264478),B=n(173926),G=n(345964),V=n(720522),H=n(401970),z=n(297638),K=n(967688),W=n(952039),j=n(87463),Y=n(174121),$=n(899383),q=n(453370),X=n(244534),J=n(31898),Z=n(244718),Q=n(142896),ee=n(957872),et=n(863270),er=n(222556),en=n(696786),ea=n(67308),ei=n(381673),eo=n(240176),es=n(303397),el=n(318147),ec=n(253332),ed=n(680136),eu=n(679996),ep=n(606672),em=n(520779),e_=n(259964),eh=n(434289),eg=n(17753),ef=n(444521),eE=n(698429),ey=n(372529),eb=n(625024),ev=n(819858),eT=n(21614),eI=n(274016),eS=n(334532),eA=n(705144),ew=n(252242),eC=n(721464),eN=n(973219),eL=n(27776),eO=n(447412),eR=n(315990),eP=n(25185),eD=n(515464),ek=n(783904),eM=n(817359),eF=n(523860),ex=n(85206),eU=n(391784),eB=n(522231),eG=n(261089);let eV=(0,O.jz)(eL.uj0),eH=(0,O.jz)(eL.QBm);function ez(e){return e===T.m1T.HISTORY||e===T.m1T.COMPARE_CHANGES||e===T.m1T.DEV_HANDOFF_HISTORY}function eK(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,x.x1)("version","Verison history got user without a handle",{item:e}),(0,F.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eW(e){switch(e.item.view){case"branch_child_create":return(0,K.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,K.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,K.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,K.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,K.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,K.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,K.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,K.tx)("collaboration.feedback.branch_restored");case"file_restore":if(e.item.label)return(0,K.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,K.tx)("collaboration.feedback.version_restored")}return a.createElement(a.Fragment,null,eK(e.item))}function ej(e){let{time:r}=e,n=a.useMemo(()=>(0,eb.xX)(r,!0),[r]),{onChange:i}=e;return a.useEffect(()=>{i&&i(n)},[i,n]),a.createElement(a.Fragment,null,n)}class eY extends M.uA{constructor(e){super(e),this.versionRowDiv=null,this.descriptionRef=a.createRef(),this._onClick=M.cZ(this,"click",e=>{if(2===e.detail){if(this.props.disabled&&this.props.isStarterTeam)return;this.onDoubleClick();return}if(this.props.disabled){this.disabledOnClickHandler();return}this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)}),this.onClick=C()(e=>this._onClick(e),300),this.disabledOnClickHandler=M.cZ(this,"click",()=>{if((0,N.trackEvent)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,F.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(J.to({type:eI.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:em.Bi.VERSION_HISTORY,currentPlan:ei.F.Plan.STARTER,upsellPlan:ei.F.Plan.PRO}}))}}),this.onMouseEnter=()=>{let e=this.descriptionRef.current;e&&e.scrollHeight>e.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=()=>{this.setState({hovered:!1})},this.onDoubleClick=M.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onBranchClick=M.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(q.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:e_.nT.Design}))}),this.onCompareClick=M.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=M.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>a.createElement("div",{className:eO.Lw,"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?a.createElement(l.E,{className:eO.qC,onClick:this.onBranchClick},e||(r.name??(0,K.tx)("collaboration.feedback.branch"))):a.createElement("span",{className:eO.at},r?.name??(0,K.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,a=e.description;n!==a&&(this.state.expandedDescription&&n&&a&&n.length>=a.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let i=this.descriptionRef.current,o=!!(i&&(this.state.expandedDescription||i.scrollHeight>i.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,eb.$_)(this.props.userUrl,15),l=this.props.versionId===ep.V_,d=!l&&!(0,ef.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,u=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,p=d&&!u,f=this.props.isPreview?eO.qv:eO.AS;this.props.disabled&&!this.props.isStarterTeam&&(f=eO.Y0+" "+f),l&&(f=eO.j$+" "+f),(this.props.isActive||this.props.isComparing)&&(f=eO.SU+" "+f),this.props.onSelect&&(f=eO.kD+" "+f);let E=this.props.isActive&&!l?eO.Nh:this.state.expandedDescription?eO.lV:o?eO.LF:eO.h_,y=this.state.expandedDescription?(0,K.tx)("collaboration.feedback.show_less"):(0,K.tx)("collaboration.feedback.show_more"),b=[],v=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[i,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,eb.$_)(o,15),r=this.generateEditorName(v,i),b.push(a.createElement("span",{className:eO.zL,key:i},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++v>4&&v<n&&!this.props.isActive){b.push(a.createElement("div",{className:eO.lw,key:"number-additional-editors"},(0,K.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(v)})));break}}else this.props.user&&this.props.userUrl?(e=(0,eb.$_)(this.props.userUrl,15),r=this.generateEditorName(v,this.props.user),b.push(a.createElement("span",{className:eO.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):p&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&b.push(a.createElement("div",{className:eO.EB,key:"figma-system"},this.props.user));let T=eO.N5;this.props.hideLine?T="":this.props.first&&this.props.last?T=eO.y5:this.props.first?T=eO.pi:this.props.last&&(T=eO.p8);let I=this.props.isUI3?void 0:s,S=null,A="text"in this.props?this.props.text.toLowerCase():void 0;p||(I="components published"===A||"published to community hub"===A?a.createElement(H.U,{className:eO.mk,svg:eG.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(m.z,null)):a.createElement(ev.D,null)),p&&this.props.last&&(I=a.createElement(ev.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,$.D0)(this.props.devModeActivity);S=a.createElement(ew.e,{status:e,nodes:r}),I=a.createElement(ew.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":I=a.createElement(H.U,{className:eO.F4,svg:eM.A},a.createElement(_.o,null)),S=(0,K.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(T=eO.zj),this.props.last&&(T=this.props.isUI3?"":eO.JE);break;case"branch_child_merge":I=a.createElement(H.U,{className:eO.Wi,svg:ek.A},a.createElement(h.C,null)),S=(0,K.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":I=a.createElement(ev.D,null),S=(0,K.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(T=eO.zj),this.props.last&&(T=this.props.isUI3?"":eO.JE);break;case"branch_merge":I=a.createElement(H.U,{className:eO.mq,svg:eB.A,useOriginalSrcFills_DEPRECATED:!0},a.createElement(h.C,null)),S=(0,K.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,K.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":I=a.createElement(H.U,{className:eO.VO,svg:eD.A},a.createElement(_.o,null)),S=(0,K.tx)("collaboration.feedback.branch_created");break;case"branch_update":I=a.createElement(H.U,{className:eO.F4,svg:eM.A},a.createElement(_.o,null)),S=(0,K.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,K.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":I=a.createElement(H.U,{className:eO.lf,svg:eP.A},a.createElement(m.z,null)),S=(0,K.tx)("collaboration.feedback.branch_archived");break;default:I=a.createElement(ev.D,null)}let C=[];this.props.version?.frameCreated&&C.push(this.props.isSection?(0,K.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,K.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&C.push((0,K.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),d&&!p&&this.props.time?C.push(a.createElement("div",{className:eO.IF},a.createElement(ej,{time:this.props.time}))):p&&this.props.time?C.push(this.renderTime(this.props.time,eO.Ov)):"displayText"in this.props?C.push(this.props.displayText):C.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!l&&(n=a.createElement("div",{className:eO.UY},a.createElement("div",{className:eO.sh},C[0]),a.createElement(V.B,{svg:eR.A,className:eO.KD}),a.createElement("div",{className:eO.$D},(0,K.tx)("collaboration.feedback.current_file"))));let N=a.createElement(a.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?a.createElement("div",{className:eO.RI,dir:"auto"},S):w?a.createElement("div",{className:eO.Pf,dir:"auto"},S):n?a.createElement("div",{className:eO.Pf,dir:"auto"},n):a.createElement("div",{className:eO.Pf,dir:"auto"},C[0])),L=(0,k.$J)(this.props.description),O=b.length>0&&a.createElement("div",{className:eO.VM},b),R=!d&&this.props.time&&a.createElement("span",{className:eO.DS,"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":(0,eb.xX)(this.props.time)}," ",this.props.isLinked?a.createElement(ej,{onChange:this.setFormattedTime,time:this.props.time}):a.createElement(B.h1,{onChange:this.setFormattedTime,date:this.props.time})),P=C.length>1||L||o||O||R,D=a.createElement(a.Fragment,null,C.length>1&&a.createElement("div",{className:eO.HK},C.slice(1).map((e,r)=>a.createElement("div",{className:eO.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||L)&&a.createElement("div",{className:E,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},L),o&&a.createElement("div",{className:eO.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},a.createElement("div",{className:eO.yT},y)),this.props.isUI3?a.createElement(a.Fragment,null,O,R,this.props.rowBodyFooter||!R&&(O||i)&&a.createElement("div",null)):a.createElement("div",null,O,R,this.props.rowBodyFooter)),F=this.props.onHoverMenuCallback?a.createElement(c.K,{onClick:this.props.onHoverMenuCallback,"aria-label":(0,K.t)("collaboration.feedback.more_options"),"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":(0,K.t)("collaboration.feedback.more_options"),recordingKey:M.Pt(this.props,"versonContextHover")},a.createElement(H.U,{svg:eU.A},a.createElement(g.J,null))):null,x=a.createElement("button",{onClick:this.onCompareClick,className:eO.kr},(0,K.tx)("collaboration.feedback.compare")),U=a.createElement("button",{onClick:this.onCompareCurrentClick,className:eO.kr},(0,K.tx)("collaboration.feedback.compare")),z=a.createElement("button",{onClick:this.props.onDoneComparingClick,className:eO.kr},(0,K.tx)("collaboration.feedback.done_version_history"));return p&&!this.props.showAutosaves?null:a.createElement("div",{className:f,ref:this.ref,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,"data-testid":"version-row"},a.createElement("div",{className:p?eO.RV:eO.mP},a.createElement("div",{className:eO.Tc},a.createElement("div",{className:P?eO.eF:eO.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(a.createElement("div",{className:T})):a.createElement("div",{className:eO.Gl},a.createElement("div",{className:T}),I),a.createElement("div",{className:eO.B_},a.createElement(e$,{onClick:this.onClick,isActive:this.props.isActive,isCurrentVersion:l,rowHeaderText:N,rowBodyText:D,versionId:this.props.versionId}),this.props.isActive&&!l&&a.createElement(eq,{recordingKey:this.props.recordingKey,versionId:this.props.versionId}),this.props.onHoverMenuCallback&&F,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&l&&U,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!l&&!this.props.isComparing&&x,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&z,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!l&&!this.props.isComparing&&a.createElement("div",{className:eO.Ob},a.createElement(G.kt,null)))))))}renderTime(e,r){let n=a.createElement(ej,{time:e,onChange:this.setFormattedTime});return a.createElement("div",{className:r},n)}getLabelRightPosition(e){return e?"65px":"35px"}}function e$({onClick:e,isActive:r,isCurrentVersion:n,rowHeaderText:i,rowBodyText:o,versionId:s}){let{manager:c,getContextMenuTriggerProps:u}=d.b(),p=(0,eC.D)(s);return a.createElement("div",{className:eO.BI},a.createElement(d.bL,{manager:c},a.createElement(l.E,{...n?{}:u(),onClick:e,"aria-label":(0,K.t)("collaboration.feedback.view_version_button_label"),"aria-pressed":r,"data-testid":n?"version-row-button-current":"version-row-button",className:eO.eP},i,o),a.createElement(d.mc,null,p)))}function eq({recordingKey:e,versionId:r}){let{manager:n,getTriggerProps:i}=d.b(),o=(0,eC.D)(r);return o?a.createElement(d.bL,{manager:n},a.createElement(c.K,{"aria-label":(0,K.t)("collaboration.feedback.more_options"),"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":(0,K.t)("collaboration.feedback.more_options"),recordingKey:M.Pt(e,"versonContext"),"data-test-id":"dots-menu-icon-button",...i()},a.createElement(g.J,null)),a.createElement(d.mc,null,o)):null}function eX({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let i=er.h.useTrackingContext({trigger:eu.b.HISTORY_UPSELL});return a.createElement(et.fu,{name:"Version History Paywall Panel",properties:{...i}},a.createElement("div",{className:eO.NM},a.createElement(j.E,{fontWeight:"semi-bold"},(0,K.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),a.createElement("div",null,e?a.createElement(j.E,null,(0,K.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:a.createElement(U.Ph,{className:eO.s6,onClick:r,trackingProperties:{trackingDescriptor:ee.c.UPGRADE,upsellSource:eu.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},a.createElement(j.E,null,(0,K.tx)("upsell.history.upsell_upgrade")))})):a.createElement(j.E,null,(0,K.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:a.createElement(U.Ph,{className:eO.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,K.tx)("upsell.history.learn_more"))})))))}function eJ(){return a.createElement(a.Fragment,null,a.createElement("span",{className:eO.ot},D.Ay.mac?(0,K.tx)("collaboration.feedback.shortcut_mac"):(0,K.tx)("collaboration.feedback.shortcut")))}eY.displayName="VersionRow";class eZ extends M.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,a)=>{let i=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,ef.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,ef.AI)(r)){let p=n&&(0===o&&r.disabled||0===i.length);c>0&&(this.renderAutoVersionBatch(i,e,s,l,n&&(r.disabled&&0===s||0===i.length),!1,this.state.showAutosaves,a),p=!1),i.push(this.renderRow(r,p,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,a)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(i,e,s,l,n&&(e[0].disabled&&0===s||0===i.length),r,this.state.showAutosaves,a),i},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(q.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch(X.Y6({mode:T.Oin.KEEP_UI,type:eh.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,N.trackEvent)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,K.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,eb.xX)(r.touched_at);e=(0,K.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(W.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===ep.V_){this.props.dispatch((0,ep.Nb)({id:ep.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,ep.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,ed.hM)(),this.onKeyDown=M.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===R.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,ep.Eg)());else if(e.keyCode===R.Uz.UP_ARROW||e.keyCode===R.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===ep.V_)e.keyCode===R.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===R.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,ep.Nb)({id:ep.V_}));return}n>=r&&(n=r-1);let a=this.props.versionHistory.versions[n];a.disabled||this.loadVersion(a)}}}),this.startComparingChanges=e=>{this.props.dispatch(X.Y6({mode:T.Oin.KEEP_UI,type:eh.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===T.AWq.getChunkChangeCount()){T.Egt.clearSelection();let e=(0,K.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(W.F.dequeue({})),this.props.dispatch(W.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,eb.xX)(r.touched_at),n=(0,K.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(W.F.dequeue({})),this.props.dispatch(W.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(X.Y6({mode:T.Oin.OFF}))},this.compareChangesById=e=>{if(e===ep.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,ep.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,ep.Nb)({id:ep.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,ep.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,ep._h)({direction:P.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,F.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(J.to({type:Y.V,data:{upsellSource:eu.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.clearVersion=e=>{this.props.dispatch(Z.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(J.to({type:eS.y,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(J.to({type:eS.y,data:{description:this.description,label:this.label,savepointID:e}}))}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onDoneComparingClick=M.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,ep.Nb)({id:ep.V_})),T.Egt.clearSelection(),this.props.dispatch(W.F.dequeue({matchType:"comparing"})),this.props.dispatch(W.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,i)=>{let o=this.getOpenFile();return a.createElement(eY,{key:`history-item-${e.id}`,branchFileKey:e.branch_file_key,checkpointKey:e.checkpoint_key,clearVersion:this.clearVersion.bind(this,e.id),description:e.description,devModeActivity:e.dev_mode_activity,disabled:e.disabled,dispatch:this.props.dispatch,displayText:a.createElement(eW,{item:e}),editorType:o.editorType,fileByKey:this.props.fileByKey,first:r,isActive:this.props.versionHistory.activeId===e.id,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isBranchingVersion:(0,ef.pW)(e),isComparing:this.props.versionHistory.compareId===e.id,isComparingLoading:this.state.loadingCompareId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isStarterTeam:i,isUI3:this.props.isUI3,label:e.label,last:n,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onDoneComparingClick:this.onDoneComparingClick,onEditSavepoint:this.editSavepoint,onSelect:this.loadVersionById,participatingImagesDict:e.participating_images_dict,recordingKey:M.Pt(this.props,"version",e.id),showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),team:o.teamId?this.props.teams?.[o.teamId]:void 0,text:eK(e),time:e.touched_at,user:e.user&&e.user.handle,userUrl:e.user&&((0,ef.pW)(e)||e.label)?e.user.img_url:null,versionId:e.id,view:e.view?e.view:null})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,ep.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,i,o,s,c,d){let u;if(n<0||null===r||r.length<1)return;let p=r[n];if(!p)throw Error("Invalid start index for auto version batch");let m=this.state.expandedIds.has(p.id)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=i;e++){let n=r[e];if(!n)throw Error("Invalid version in auto version batch");n.id===this.props.versionHistory.activeId&&(m=!0,this.autoExpandGroupId=this.props.versionHistory.activeId)}this.expandLast&&s&&(m||this.toggleAutoItemById(p.id),this.expandLast=!1);let _=i-n+1,h=!0;if(1===_&&(m=!0,h=!1),u=s&&(1===_||!m)?o?eO.y5:eO.p8:o?eO.pi:eO.N5,h&&c&&e.push(a.createElement(l.E,{key:`auto_row_${n}`,recordingKey:M.Pt(this.props,`autoVersionBatch.${n}`),className:p.disabled?eO.Ao:eO.QQ,onClick:this.toggleAutoItemById.bind(this,p.id)},!this.props.isUI3&&a.createElement("div",{className:u}),a.createElement("div",{className:eO.Jt},this.props.isUI3?a.createElement("div",{className:eO.Gl},a.createElement("div",{className:u}),m?a.createElement(f.r,null):a.createElement(E.R,null)):a.createElement(ev.D,null),a.createElement("div",{className:eO.aJ},(0,K.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&a.createElement(V.B,{key:"expand-caret",className:m?eO.ey:eO.GE,svg:m?eF.A:ex.A}))))),m)for(let a=n;a<=i;a++){let l=r[a];if(!l)throw Error("Invalid version in auto version batch");e.push(this.renderRow(l,o&&n===i,s&&a===i,d))}}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,ep.Nb)({id:ep.V_})),document.addEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),L.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),L.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,x.x1)("history","history view should only be possible to open when we have a file"),(0,o.KF)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,I.k)().version_diffing&&this.props.selectedView.editorType===e_.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),i=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ec.cW);this.hasLabeled=this.hasLabeledVersions(i)||this.hasLabeledVersions(o);let s=null,c=(0,P.u9)(this.props.versionHistory),d=e.plan?.tier===el.Ag.STARTER,u=!!e.team?.canEdit;d&&(o.length>0||!c)&&(s=a.createElement(eX,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:u,hasRestrictedVersions:!!o.length}));let p=a.createElement("div",{className:eO.UX},!this.props.versionHistory.loading&&(0,P.u9)(this.props.versionHistory)&&a.createElement(l.E,{className:eO.nf,onClick:this.loadMore},(0,K.tx)("collaboration.feedback.show_older"))),m=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,_=this.props.versionHistory.linkedVersion,h=_&&i.some(e=>_.id===e.id),g=!this.state.showOnlyUserVersionHistory||_?.user.id===this.props.user?.id,f=(0,eE.$A)(this.props.selectedView),E=(0,ey.C)(this.props.selectedView),y=!this.canEditFile(),b=i.map(e=>(0,ef.AI)(e)?1:0).reduce((e,r)=>e+r,0);return a.createElement("div",null,this.props.progressBarState.mode!==T.Oin.ON_AND_LOCKED&&a.createElement(et.fu,{name:"Version History Panel",properties:{teamId:r?.id}},a.createElement("div",{className:A()(eO.kL,Q.Dm),style:f||E||this.props.isUI3?{width:f||this.props.isUI3?"100%":eV+eH,borderLeft:f?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:eV+eH,height:"100%"}},a.createElement(eQ,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:y,recordingKey:M.Pt(this.props,"toolbar")}),this.props.fileHasCMSData&&a.createElement(eA.K,null),a.createElement("div",{"data-not-draggable":!0},a.createElement("div",{className:eO.dG},!this.hasLabeled&&!y&&!f&&a.createElement("div",{className:eO.fy},a.createElement("div",null,(0,K.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:a.createElement(eJ,null)}))),_&&!h&&g&&a.createElement(eY,{checkpointKey:_.checkpoint_key,description:_.description,dispatch:this.props.dispatch,displayText:(0,K.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:a.createElement(eW,{item:_})}),editorType:e.editorType,first:!0,isActive:this.props.versionHistory.activeId===_.id,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isBranchingVersion:(0,ef.pW)(_),isComparing:this.props.versionHistory.compareId===_.id,isComparingLoading:this.state.loadingCompareId===_.id,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isLinked:!0,isUI3:this.props.isUI3,label:_.label,last:!0,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onDoneComparingClick:this.onDoneComparingClick,onSelect:this.loadVersionById,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),time:_.touched_at,userUrl:_.user.img_url,versionId:_.id,view:_.view?_.view:null}),this.props.versionHistory.loading&&a.createElement("div",{className:eO.u1},a.createElement(G.kt,null)),m&&a.createElement(eY,{addSavepoint:this.addSavepoint,dispatch:this.props.dispatch,displayText:(0,K.tx)("collaboration.feedback.current_version"),editorType:e.editorType,first:!0,hideLine:0===i.length||!this.state.showAutosaves&&0===b,isActive:this.props.versionHistory.activeId===ep.V_,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isComparing:!!this.props.versionHistory.compareId,isComparingLoading:this.state.loadingCompareId===ep.V_,isCurrentVersionActive:this.props.versionHistory.activeId===ep.V_,isUI3:this.props.isUI3,last:!1,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onCreateSavepoint:this.addSavepoint,onDoneComparingClick:this.onDoneComparingClick,onSelect:this.loadVersionById,recordingKey:M.Pt(this.props,"currentVersion"),showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),userUrl:this.props.user.img_url,versionId:ep.V_,view:null}),this.drawRows(i,0===o.length,!m),this.drawRows(o,!0,!1,u),s),0===o.length&&p))))}}function eQ(e){let{onClose:r,addSavepoint:n,filterOptions:i,isViewOnly:o}=e,s=a.useRef(!1),l=a.useCallback(e=>{e&&!s.current&&(setTimeout(()=>{e.focus()},0),s.current=!0)},[]);return a.createElement("div",{className:eO.N1},a.createElement("h2",{className:eO.qd},(0,K.tx)("collaboration.feedback.version_history")),a.createElement("div",{className:z.s.flex.itemsCenter.gap4.$},i&&a.createElement(e0,{showAutosaves:i.showAutosaves,setShowAutosaves:i.setShowAutosaves,showOnlyUserVersionHistory:i.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:i.setShowOnlyUserVersionHistory,isViewOnly:o,buttonRef:l}),!o&&a.createElement(c.K,{onClick:n,"aria-label":(0,K.t)("collaboration.feedback.add_to_version_history_tooltip"),"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":(0,K.t)("collaboration.feedback.add_to_version_history_tooltip"),"data-testid":"versions-add-savepoint",recordingKey:M.Pt(e,"plusVersion"),ref:l},a.createElement(y.x,null)),a.createElement(c.K,{onClick:r,"aria-label":(0,K.t)("collaboration.feedback.close_tooltip"),"data-tooltip-type":eg.Ib.TEXT,"data-tooltip":(0,K.t)("collaboration.feedback.close_tooltip"),recordingKey:M.Pt(e,"button-close"),ref:l},a.createElement(b.L,null))))}function e0(e){let{getTriggerProps:r,manager:n}=d.b(),{ref:i,...o}=r();return a.createElement(d.bL,{manager:n},a.createElement(u.u,{...o,ref:r=>{i(r),e.buttonRef?.(r)},className:A()(eN.pq,{[eN.vR]:e.showOnlyUserVersionHistory}),"aria-label":(0,K.t)("collaboration.feedback.filter_tooltip")},a.createElement(v.S,null)),a.createElement(d.mc,null,a.createElement(p.z6,{title:a.createElement(d.r1,null,(0,K.t)("collaboration.feedback.filter_menu_title")),onChange:r=>{e.setShowOnlyUserVersionHistory("onlyUser"===r)},value:e.showOnlyUserVersionHistory?"onlyUser":"all"},a.createElement(p.CU,{value:"all"},(0,K.tx)("collaboration.feedback.all_filter_text")),a.createElement(p.CU,{value:"onlyUser",disabled:e.isViewOnly},(0,K.tx)("collaboration.feedback.only_yours_filter"))),a.createElement(p.H_,{checked:e.showAutosaves,onChange:()=>e.setShowAutosaves(!e.showAutosaves)},(0,K.tx)("collaboration.feedback.show_autosave_versions"))))}function e1({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,i.wA)(),d=(0,eo.ud)(),u=(0,en.GS)();return a.createElement(a.Fragment,null,e.map((i,p)=>a.createElement(eY,{key:`history-item-${i.id}`,branchFileKey:i.branch_file_key,checkpointKey:i.checkpoint_key,description:i.description,devModeActivity:i.dev_mode_activity,disabled:i.disabled,dispatch:c,displayText:a.createElement(eW,{item:i}),editorType:null,fileByKey:d,first:0===s&&0===p,isActive:r?.id===i.id,isAllowedToChangeVersion:()=>!0,isBranchingVersion:(0,ef.pW)(i),isSection:l,isUI3:u,label:i.label,last:o&&p===e.length-1,onSelect:()=>n(i),participatingImagesDict:i.participating_images_dict,showAutosaves:!0,text:eK(i),time:i.touched_at,user:i.user&&i.user.handle,userUrl:i.user&&((0,ef.pW)(i)||i.label)?i.user.img_url:null,version:i,versionId:i.id,view:i.view?i.view:null})))}function e2({versions:e,selectedVersion:r,setVersion:n,last:i,idx:o}){let[s,c]=a.useState(r&&!!e.find(e=>e.id===r.id)),d="SECTION"===(0,eT.rb)();return a.createElement("div",{key:`auto_row_${o}`},a.createElement(l.E,{className:eO.QQ,onClick:()=>c(!s)},a.createElement("div",{className:eO.Jt},a.createElement("div",{className:eO.Gl},s?a.createElement(f.r,null):a.createElement(E.R,null)),a.createElement("div",{className:eO.aJ},(0,K.tx)("collaboration.feedback.autosave_count",{count:e.length})))),s&&a.createElement(e1,{versions:e,selectedVersion:r,setVersion:n,last:i,idx:o,isSection:d}))}function e3({versions:e,selectedVersion:r,setVersion:n}){let i=[],o=[],s=0,l="SECTION"===(0,eT.rb)();function c(e){o.length>0&&(i.push(a.createElement(e2,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,ef.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),i.push(a.createElement(e1,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),a.createElement(a.Fragment,null,i)}eZ.displayName="VersionHistoryView",(0,i.Ng)(ea.l$)(eZ)},897713:(e,r,n)=>{n.d(r,{PZ:()=>ef,SI:()=>e_});var a=n(848318),i=n(301168),o=n(887048),s=n(354427),l=n(938982),c=n(638535),d=n(250838),u=n(222099),p=n(307650),m=n(186606),_=n(553547),h=n(768618),g=n(19180),f=n(382902),E=n(536384),y=n.n(E),b=n(142917),v=n(989232),T=n(315933),I=n(476254),S=n(841807),A=n(998568),w=n(396872),C=n(373286),N=n(183867),L=n(967688),O=n(324762),R=n(162121),P=n(664421),D=n(453370),k=n(244534),M=n(31898),F=n(413802),x=n(990548),U=n(355755),B=n(730143),G=n(125761),V=n(606672),H=n(434289),z=n(446951),K=n(106990),W=n(573140),j=n(581672),Y=n(466024),$=n(751565),q=n(199446),X=n(457858),J=n(34812),Z=n(21614),Q=n(955730),ee=n(583484),et=n(29085),er=n(678405),en=n(591794),ea=n(850755);let ei=[2,3,6,13,25,50,75,100,200,300,1e3];function eo(e,r,n){if(!n)return!1;let a=r.get((0,_.dI)(e));if(!a)return!1;let i=a.absoluteBoundingBox;return!!i&&i.x<n.x+n.w&&i.x+i.w>n.x&&i.y<n.y+n.h&&i.y+i.h>n.y}function es(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function el(e,r,n=!1){if(!r)return null;let a=e.get(r);return a?n?a.absoluteRenderBounds:a.absoluteBoundingBox:null}function ec(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function ed(e,r,n){let a=e?.basis?.guid?(0,_.dI)(e.basis.guid):_.AD,i=ec(e)?null:el(r.scene,a,!1),o=e?.change.guid?(0,_.dI)(e.change.guid):_.AD,s=e?.state==="removed"||ec(e)?null:el(n.scene,o,!1),l=i&&r.baseBox?es(i,r.baseBox):null,c=s&&n.baseBox?es(s,n.baseBox):null;return{before:{id:a,box:l,name:e?.basis?.name},after:{id:o,box:c,name:e?.change.name}}}function eu({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:i,discreteDiffing:c,setChunkChanges:d}){let u=(0,U.eY)(),[p,h]=(0,f.fp)(P.Ib),g=a.useMemo(()=>c?m.Egt.getLayerGUIDMapping(r,n.scene,e,u.scene):void 0,[c,e,r,n.scene,u.scene]);return a.useEffect(()=>{if(i)return;let a=m.egF.getNodeTree(r,n.scene,!c),p=m.egF.getNodeTree(e,u.scene,!c);if(!a||!p){h(new Map),d({});return}T.sn.reset("dev_mode.compare_changes.diffing",r),T.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:f,deltaNodeMap:E}=function(e,r,n,a,i,c,d=!0){let u;let p=new Map,h=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!h||!g)return{deltaTree:{},deltaNodeMap:p};let f=new Map,E=0;!function e(r){if(E>=h.length)return(0,A.$D)(l.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:h[E],node:r}),E++,r.children))e(n)}(e.tree);let y=d?n.get((0,_.dI)(g[0].guid)):null,b=h[0]&&d?a.get((0,_.dI)(h[0].guid)):null,v=y?.absoluteBoundingBox||null,T=b?.absoluteBoundingBox||null;function I(e,r,n){p.set(e,r.value),(0,Y.NI)(n,r)}let S=0,w=function e(r,u={}){let h,E;if(S>=g.length)return(0,A.$D)(l.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[S],b=0===S;S++;let w=c?c.get(r.id)??_.AD:r.id,C=f.get(w),N={previousChange:C?.change,currentChange:y,isRootNode:b};if(C){let e=function(e,r,n,a,i){let l=new Map;for(let[c,d]of j.AW){let u=null,p=null;if((0,K.ar)(c)&&(e[c]&&e[c].guid&&(u=(0,_.dI)(e[c].guid)),r[c]&&r[c].guid&&(p=(0,_.dI)(r[c].guid))),u||p){let _=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of d)e[n]=r[n]}},h=p?m.egF.getNodeTree(p,a.scene,i)?.nodeChanges:null,g=u?m.egF.getNodeTree(u,n.scene,i)?.nodeChanges:null,f=h?o.w.decodeMessage(h).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(_(r,f),_(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...d])if(!(0,s.cF)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,C?.change,n,a,i);for(let e of j.cs)if(!(0,s.cF)(C.change[e],y[e])&&("textData"!==e||C.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||d&&!eo(C.change.guid,a,v)&&!eo(y.guid,n,v))continue;N.state="changed";break}e.size>0&&(N.changedStyles=e)}else(!d||eo(y.guid,n,v))&&(N.state="added");for(let n of(y.guid&&(N.state||N.changedStyles)&&(E={value:N}),h=E||u,E&&I((0,_.dI)(y.guid),E,u),r.children.forEach(r=>e(r,h)),C?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let i=f.get(n);if(e&&!eo(i?.change.guid,a,T))return;let o={value:{state:"removed",previousChange:i?.change,currentChange:{phase:"REMOVED"}}};p.has((0,_.dI)(f.get(n)?.change.guid))&&(0,A.$D)(l.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,_.dI)(i?.change.guid);I(s,o,r),f.delete(s)}({checkOverlap:d,nodeId:n.id,parent:h});return f.delete(w),u}(r.tree);if(!w.value&&w.children&&1===w.children.length){let e=w.children[0];delete e.parent,u=e}else u=w;return{deltaTree:u,deltaNodeMap:p}}(a,p,u,n,!c,g,!0);h(E),d((0,Y.X$)(f,function(e){let r=e.value,n=null,a=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:a}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:a}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:a}),n.changedStyles=r.changedStyles),{result:n}}));let y=T.sn.tryStop("dev_mode.compare_changes.diffing",r);y&&(0,v.trackEvent)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:y},{forwardToDatadog:!0})},[e,h,i,d,r,n.scene,u.scene,g,n,u,c]),a.useEffect(()=>()=>{h(new Map)},[h]),null}function ep(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function em(e){return{node:(0,O.mJ)(e),backingSymbolData:(0,Q.$)([e])}}function e_({nodeId:e,detachedComponentsScene:r,documentIndex:n,linterScene:a,showError:i}){let o;o=n===p.x1?m.juq.HISTORY:r?m.juq.DETACHED_COMPONENTS:a?m.juq.LINTER:u.G;let s=new h.qo(o),l=s.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},c=0,d=!0;return()=>({nodeBounds:{x:l.x,y:l.y,width:l.w,height:l.h},getImage:({scale:i,clipRect:o})=>{let l;let u=Date.now();u-c>1e4&&(c=u,(l=new S.jk("performance.dev_mode.compare_changes.get_image",{})).start());let p=(0,et.L6)(e,n,r,a,i,o);if(l){let e=l.stop(),r=p?.image?.length??0;e&&r&&(0,v.trackEvent)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:s.getSceneTypeDebugString(),isFirstImage:d},{forwardToDatadog:!0})}return d=!1,p&&{data:p.image,width:p.width,height:p.height,scale:p.width/p.canvasSpaceBounds.width,canvasSpaceBounds:p.canvasSpaceBounds}},showError:i})}function eh({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),i=e.label;e.frameCreated?i=r?(0,L.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,L.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(i=(0,L.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=i?a.createElement(er.Cr,{time:n}):null;return a.createElement("div",{className:ea.sh},a.createElement("div",{className:ea.dp},i||a.createElement(er.Cr,{time:n})),a.createElement("div",{className:ea.m7},o))}let eg=(0,f.eU)(null);function ef(e){let{nodeId:r,onCloseModal:n,modalTitle:i,currentImage:o,historicImage:s,historicHeader:l,currentHeader:u,versions:p,selectedVersion:E,setSelectedVersion:b,renderLoadingBar:I,modalError:S,discreteDiffingInput:A,initialSelectedNodeId:w,skipCorrectHistoryCanvasCheck:O,preferencesApi:P,origin:D}=e,k=(0,B.tS)(),M=G.iZ()?.id,[F,x]=a.useState(C.Ss.SIDE_BY_SIDE),[U,V]=a.useState(ee.q0),[H,z]=a.useState(!0),[K,J]=a.useState(null),[Q,et]=a.useState(null),[eo,es]=a.useState(!0),[ec,ep]=a.useState(!0),em="SECTION"===(0,Z.rb)(),[e_,ef]=a.useState(()=>w?{id:w,zoomToSelection:!0}:null),[eb,ev]=(0,f.fp)(eg),[eT,eI]=a.useState(void 0),eS=(0,f.fp)(N.w1)[1],eA=(0,ee.t$)(E||null,r)||!!A,ew=O||eA,eC=a.useMemo(()=>A?.sceneGraph?A.sceneGraph:new h.qo(m.juq.HISTORY),[A?.sceneGraph]),eN=(0,R.G)();a.useEffect(()=>{e_&&e_.id!==r&&(0,v.trackEvent)("Diff Modal New Layer Selected",{userId:M,fileKey:k,frameId:r,versionId:E?.id,layer_id:e_.id})},[e_]);let eL=a.useRef(E);a.useEffect(()=>{eL.current!==E&&(eL.current=E,eI(void 0),ef(null))},[E,eL]);let eO=void 0!==o,eR=void 0!==s,eP=a.useCallback(e=>{"Escape"===e.key&&(e_?(ef(null),e.stopPropagation(),e.preventDefault()):n())},[n,e_]);a.useEffect(()=>(document.addEventListener("keydown",eP),()=>{document.removeEventListener("keydown",eP)}),[eP]),a.useEffect(()=>{if("cc_versions"===D&&eT&&!ec){(0,Y.mf)(eT)?(0,v.trackEvent)("Diff Modal No Changes Between Versions",{userId:M,fileKey:k,frameId:r,versionId:E?.id,initialVersion:eo,versionMetadata:!1},{forwardToDatadog:!0}):(0,v.trackEvent)("dev_mode.compare_changes.version_has_changes",{userId:M,fileKey:k,frameId:r,versionId:E?.id,initialVersion:eo,versionMetadata:!1},{forwardToDatadog:!0});let e=T.sn.tryStop("dev_mode.compare_changes.switch_versions",E?.id);e&&(0,v.trackEvent)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[D,eo,ec,eT,E,r,k,M]),a.useEffect(()=>{E&&null===s&&(0,v.trackEvent)("dev_mode.compare_changes.no_image",{userId:M,fileKey:k,frameId:r,versionId:E?.id},{forwardToDatadog:!0})},[s,E,r,k,M]);let eD=()=>eO&&a.createElement(c.bL,{value:F,onChange:e=>x(e),legend:a.createElement(d.q,null,(0,L.t)("collaboration.branching.comparison_options")),className:ea.tH},a.createElement("div",{className:ea.Wc},a.createElement(c.c$,{value:C.Ss.SIDE_BY_SIDE,"aria-label":(0,L.t)("collaboration.branching.side_by_side"),className:y()(ea.rb,ea.nL,{[ea.wH]:F===C.Ss.SIDE_BY_SIDE})},(0,L.t)("collaboration.branching.side_by_side")),a.createElement(c.c$,{value:C.Ss.OVERLAY,"aria-label":(0,L.t)("collaboration.branching.overlay"),className:y()(ea.rb,ea.S,{[ea.wH]:F===C.Ss.OVERLAY})},(0,L.t)("collaboration.branching.overlay")))),[ek,eM]=a.useState(new Set),eF=a.useCallback((e,r)=>{r?eM(r=>new Set([...r,...e])):eM(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eM]),ex=(0,a.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;ef({id:n,zoomToSelection:!1}),J(r.beforeNodeId),et(r.afterNodeId);let a=[n],i=e?.parent;for(;i;){let e=i.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;a.push(r)}i=i.parent}eF(a,!0)}else ef(null),J(null),et(null)},[eF]),eU=(0,a.useCallback)(e=>{e?ev("removed"===e.state?e.beforeNodeId:e.afterNodeId):ev(_.AD)},[ev]),eB=(0,a.useCallback)(e=>ev(e),[ev]),eG=(0,a.useCallback)((e,r)=>{e===e_?.id?(ef(null),J(null),et(null)):(ef({id:e,zoomToSelection:!0}),ev(e),J((0,_.dI)(r.basis.guid)),et((0,_.dI)(r.change.guid)))},[e_?.id,ev]),eV=(0,a.useMemo)(()=>eT&&(0,W.kF)(eT,j.FO.LEGO,void 0,q.O0)||{},[eT]),eH=!(0,Y.mf)(eV),ez=A?A.nodeId:r,{beforeBoxes:eK,afterBoxes:eW}=function(e){let{frameId:r,historyFrameId:n,view:i,displayableChanges:o,historySceneGraph:s}=e;return(0,a.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,a){let i=(0,h.UN)(),o=el(r,n,!0),s=el(i,e,!0);return(0,Y.X$)(a,e=>{let n=ed(e.value,{scene:r,baseBox:o},{scene:i,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNode:{id:n.after.id,name:n.after.name},beforeBoxNode:{id:n.before.id,name:n.before.name}}}})}(r,s,n,o);return{beforeBoxes:(0,Y.X$)(e,e=>{let a=e.value,i=a.beforeBoxNode.id===n||a.afterBoxNode.id===r;return a.afterBox?a.beforeBox?{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"changed",isRootFrame:i,name:a.beforeBoxNode.name}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"added",isRootFrame:i,name:a.afterBoxNode.name}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"removed",isRootFrame:i,name:a.beforeBoxNode.name}}}),afterBoxes:(0,Y.X$)(e,e=>{let a=e.value,i=a.beforeBoxNode.id===n||a.afterBoxNode.id===r;return a.afterBox?a.beforeBox?{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"changed",isRootFrame:i,name:a.afterBoxNode.name}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"added",isRootFrame:i,name:a.afterBoxNode.name}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNode.id,afterNodeId:a.afterBoxNode.id,state:"removed",isRootFrame:i,name:a.beforeBoxNode.name}}})}},[r,n,i,o])}({frameId:r,historyFrameId:ez,historySceneGraph:eC,view:F,displayableChanges:eV,activeNode:eb,selectedNode:e_});a.useEffect(()=>{if(!e_?.id||!e_?.zoomToSelection||!r||!ez)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:a}=function(e,r,n,a,i){let o=(0,h.UN)(),s=el(r,n,!0),l=el(o,e,!0),c=[];for(let e of a){let n=(0,Y.lE)(i,r=>(0,_.dI)(r.change.guid)===e||(0,_.dI)(r.basis.guid)===e);if(n){let e=ed(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNode:{id:e.before.id,name:e.before.name},afterBoxNode:{id:e.after.id,name:e.after.name}})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eC,ez,[e_.id],eV),{beforeBox:i,afterBox:o}=a[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;i&&e&&(i.x-=e.w/2,i.y-=e.h/2,s=Math.min(s,i.x),l=Math.min(l,i.y),c=Math.max(c,i.x+i.width),d=Math.max(d,i.y+i.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&eS({x:s,y:l,width:c-s,height:d-l})},[e_,eS,r,eV]),a.useEffect(()=>()=>{eS(void 0)},[eS]);let ej=eK?{rootBox:eK,onBoxClicked:ex,onBoxHovered:eU,selectedNodeId:e_?.id,expandedLayers:ek,ignoreState:"added",interactive:F===C.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eg,recordingKey:"before"}:null,eY=eW?{rootBox:eW,onBoxClicked:ex,onBoxHovered:eU,selectedNodeId:e_?.id,expandedLayers:ek,ignoreState:"removed",interactive:F===C.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eg,recordingKey:"after"}:null,e$=!I&&!S,eq=(0,X.i)();return a.createElement(ee.Q4,{title:i,onClose:n,open:eq},a.createElement("div",{className:ea.xZ},a.createElement("div",{className:ea.f},I&&!S&&a.createElement("div",{className:ea.Lq},a.createElement($.G,{hasLoadedDiffs:!1})),e$&&a.createElement("div",{className:ea.ND},(p||eH)&&a.createElement("div",{className:y()(ea._H,"devHandoffLeftPanel")},b&&a.createElement("div",{className:ea.b6},a.createElement("div",{className:y()(ea.Zl)},a.createElement("h3",null,(0,L.tx)("collaboration.feedback.compare_changes_modal.history")),(0,g.k)().dt_compare_changes_debug_helpers&&a.createElement(ey,{fileKey:k,setSelectedVersion:b})),a.createElement(er.aS,{versions:p||[],selectedVersion:E,setVersion:e=>{e.id!==E?.id&&(0,v.trackEvent)("Diff Modal Selected Version Changed",{userId:M,fileKey:k,frameId:r,versionId:e.id}),T.sn.reset("dev_mode.compare_changes.switch_versions",e.id),T.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),ep(!0),eo&&es(!1),b(e)}})),a.createElement(W.zg,{changesToDisplay:eV,selectedNode:e_?.id,expandedLayers:ek,setLayerExpanded:eF,onHover:eB,onClick:eG})),a.createElement("div",{className:ea.vF},F===C.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:ea.m_},a.createElement("h3",{className:ea.ZJ},l?a.createElement("div",{className:ea.K9},a.createElement("div",{className:ea.gO},l)):E&&a.createElement(eh,{version:E,isSection:em})),a.createElement("div",{className:ea.t4}),a.createElement("h3",{className:ea.ZJ},u?a.createElement("div",{className:ea.K9},a.createElement("div",{className:ea.gO},u)):a.createElement("div",{className:ea.K9},(0,L.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),F===C.Ss.SIDE_BY_SIDE&&a.createElement("div",{className:ea.Ik},a.createElement(C.qW,{zoomPercentageOptions:ei,resetStateOnChangeValue:r,compareThumbnailSource:j.FO.LEGO,zoomOnMousePointer:!0},a.createElement("div",{className:ea.bV},eR?a.createElement(en.H1,{value:ej},a.createElement(ee.R$,{image:s,view:F,Overlay:en.q1})):a.createElement(ee.Qp,null),a.createElement("div",{className:ea.mq}),eO?a.createElement(en.H1,{value:eY},a.createElement(ee.R$,{image:o,view:F,Overlay:en.q1})):a.createElement(ee.Qp,null)),eO&&eD())),F===C.Ss.OVERLAY&&a.createElement("div",{className:ea.Ik},a.createElement(C.xY,{zoomPercentageOptions:ei,resetStateOnChangeValue:r,zoomOnMousePointer:!0},a.createElement("div",{className:ea.Kk},eR?a.createElement(en.H1,{value:ej},a.createElement(ee.R$,{image:s,view:F,hideNoImageText:!0,Overlay:en.q1})):a.createElement(ee.Qp,null),H&&(eO?a.createElement(en.H1,{value:eY},a.createElement(ee.R$,{image:o,view:F,hideNoImageText:!0,opacity:U,Overlay:en.q1})):a.createElement(ee.Qp,null))),eO&&a.createElement(C.u,{opacity:U,isAfterImageShown:H,onToggleClick:()=>z(!H),onOpacityChange:e=>V(e.a)}),eO&&eD())),ew&&r&&ez&&a.createElement(eu,{frameId:r,historyFrameId:ez,historySceneGraph:eC,chunkChanges:eT,discreteDiffing:!!A,setChunkChanges:e=>{ep(!1),eI(e)}}))),S&&a.createElement("div",{className:ea.Q9},(0,L.tx)("collaboration.feedback.compare_changes_modal.error")),a.createElement("div",null)),e$&&(ew?eT&&(0,Y.mf)(eT)?a.createElement(q.Ox,{text:(0,L.t)("collaboration.feedback.compare_changes_modal.no_changes")}):a.createElement(eE,{layerChangeNodeId:Q,layerBasisNodeId:K,layerBasisSceneGraph:eC,selectedVersion:E||void 0,displayableChanges:eV,showSelectLayerHint:!e_,preferencesApi:P??eN}):a.createElement(q.Ox,{text:""}))))}function eE({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?a.createElement(q.Ox,{text:(0,L.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):a.createElement(q.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:i,displayableChanges:o,preferencesApi:l})}function ey({fileKey:e,setSelectedVersion:r}){let n=(0,a.useRef)(null),[i,o]=(0,a.useState)("Upload local file");return a.createElement("label",{className:ea.$8},i,a.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let a=n.current?.files?.[0];if(a&&F.F){let n=await (0,x._)(I.D,(0,g.k)(),F.F,a),i=I.D.getState().mirror.appModel.currentPage,s=`${e}-${i}-debug`;V.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(a.name),r({id:"debug"})}}}))}(0,z.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,i.wA)(),s=(0,i.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),c=(0,i.d4)(e=>e.versionHistory.activeId),{Sprig:d}=(0,w.A)(),u=(0,B.tS)(),_=b.E1()?.toISOString(),h=(0,f.fp)(P.Ib)[1],{versions:g,versionsQueryLoaded:E}=(0,ee.DS)(r),y=(0,i.d4)(e=>e.selectedView.compareChangesVersionId??null),S=(0,i.d4)(e=>e.selectedView.compareChangesActivityId??null),C=(0,a.useMemo)(()=>y?g.find(e=>e.id===y)??null:S?g.find(e=>e.dev_mode_activity?.some(e=>e.id===S))??null:null,[g,y,S]),N=a.useCallback(e=>{!e&&(K(void 0),function(e,r,n,a){let i=I.D.getState().selectedView;r(D.$T({...i,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0,compareChangesActivityId:void 0}))}(e,o,!1,0),c&&c!==V.V_&&(o(k.Y6({mode:m.Oin.KEEP_UI,type:H.lF.SPINNER})),requestAnimationFrame(()=>{o((0,V.Nb)({id:c,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:g}))}))),e!==y&&(K(void 0),function(e,r){let n=I.D.getState().selectedView;r(D.$T({...n,compareChangesVersionId:e,compareChangesActivityId:void 0}))}(e,o))},[o,y,c,g,r]),[O,R]=(0,f.fp)(V.tP),[F,x]=a.useState(!0),[U,G]=a.useState(!1),[z,K]=a.useState(void 0),W=void 0!==z,[j,Y]=a.useState(void 0),$=void 0!==j,q=(0,ee.t$)(C,r);a.useEffect(()=>{if(!F||!W||!$||!E)return;x(!1);let e=T.sn.tryStop("dev_handoff.view_history",r);e&&(0,v.trackEvent)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),d("track","open_compare_changes",{origin:"cc_versions"})},[d,F,W,$,E,r]);let J=(0,X.P)();a.useEffect(()=>{if(J&&E){if(C){y||N(C.id);return}if(0===g.length){K(null),N(void 0);return}if(_){for(let e of g)if(e.lastViewed){N(e?.id);return}}N(g[0]?.id)}},[J,_,S,C,y,N,g,E]),a.useEffect(()=>{if(q||!C)return;let e=performance.now();V._t(C,r)?.then(({canvas:r,key:n})=>{let a=performance.now();if(n===O)return;if(!m.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");R(n);let i=performance.now(),o=Math.trunc(a-e),s=Math.trunc(i-a);v.trackEvent("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:u,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{A.$D(l.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),V.w_(C),G(!0)})},[q,C,O,R,s,u,r]),a.useEffect(()=>{let e=setTimeout(()=>{if(!q){K(void 0);return}K(e_({nodeId:r,documentIndex:p.x1,showError:()=>{K(null)}}))},ee._W);return()=>clearTimeout(e)},[r,C,q]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{Y(void 0),(0,A.$D)(l.e.DEVELOPER_TOOLS,Error("Current image loading error")),G(!0)},n=e_({nodeId:r,showError:e});if(!n){e();return}Y(n)},ee._W);return()=>clearTimeout(e)},[r]);let Z=a.useCallback(()=>{h(new Map),N(void 0),o(M.Ce())},[h,N,o]);return a.useEffect(()=>()=>{R(""),m.glU?.closeAllExtraDocuments()},[R]),a.createElement(ef,{currentImage:j,historicImage:z,modalError:U,modalTitle:n?(0,L.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,L.t)("collaboration.feedback.compare_changes_modal.header"),nodeId:r,onCloseModal:Z,origin:"cc_versions",renderLoadingBar:F,selectedVersion:C,setSelectedVersion:e=>{N(e.id)},versions:g})},J.mH,z.ZU.YES),(0,z.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,i.wA)(),{Sprig:l}=(0,w.A)(),[c,d]=a.useState(!0),[p,g]=a.useState(!1),[f,E]=a.useState(void 0),[y,b]=a.useState(void 0),I=void 0!==f,S=void 0!==y,A="loaded"===n.status,C=A?n.result:void 0;a.useEffect(()=>{if(!c||!I||!S||!A)return;d(!1);let e=T.sn.tryStop("dev_handoff.view_history",r);e&&(0,v.trackEvent)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,c,I,S,r,A,o]),a.useEffect(()=>{let e=setTimeout(()=>{if(!A||!C?.dataComponentId){E(void 0);return}E(e_({nodeId:C?.dataComponentId,detachedComponentsScene:C?.dataLocation==="temp-scene",showError:()=>{E(null)}}))},ee._W);return()=>clearTimeout(e)},[A,C]),a.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{b(void 0),g(!0)},n=e_({nodeId:r,showError:e});if(!n){e();return}b(n)},ee._W);return()=>clearTimeout(e)},[r]);let N=a.useCallback(()=>{s(M.Ce())},[s]),O=(0,L.t)("collaboration.feedback.compare_changes_modal.header"),R=(0,L.tx)("inspect_panel.node_type.main_component"),P={nodeId:C?.dataComponentId??_.AD,sceneGraph:new h.qo(C?.dataLocation==="temp-scene"?m.juq.DETACHED_COMPONENTS:u.G)};return a.createElement(ef,{nodeId:r,onCloseModal:N,modalTitle:O,currentImage:y,historicImage:f,historicHeader:R,renderLoadingBar:c,modalError:p,discreteDiffingInput:P})},J.dF,z.ZU.YES),(0,z.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,i.wA)(),{Sprig:c}=(0,w.A)(),d=em(r),p=em(n),[m,_]=a.useState(!1),[g,f]=a.useState(void 0),[E,y]=a.useState(void 0),b=void 0!==g,I=void 0!==E;a.useEffect(()=>{if(!b||!I)return;let e=T.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,v.trackEvent)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),c("track","open_compare_changes",{origin:n})},[c,s,b,I,r]),a.useEffect(()=>{f(e_({nodeId:n,showError:()=>f(null)}))},[n]),a.useEffect(()=>{let e=()=>{y(void 0),_(!0)},n=e_({nodeId:r,showError:e});if(!n){e();return}y(n)},[r]);let S=a.useCallback(()=>{l(M.Ce())},[l]),A=(0,L.t)("collaboration.feedback.compare_changes_modal.header"),C={nodeId:n,sceneGraph:new h.qo(u.G)};return d.node&&p.node?a.createElement(ef,{currentHeader:ep(d.node,d.backingSymbolData),currentImage:E,discreteDiffingInput:C,historicHeader:ep(p.node,p.backingSymbolData),historicImage:g,initialSelectedNodeId:o,modalError:m,modalTitle:A,nodeId:r,onCloseModal:S,renderLoadingBar:!1}):null},J.Dx,z.ZU.YES)},685319:(e,r,n)=>{n.d(r,{Ec:()=>D});var a=n(848318),i=n(301168),o=n(773511);n(186606);var s=n(536384),l=n.n(s),c=n(989232),d=n(781239),u=n(720522),p=n(967688),m=n(744577),_=n(564837);n(995218);var h=n(577148);n(303397);var g=n(764286),f=n(318147),E=n(649616),y=n(972089),b=n(12182),v=n(353951),T=n(801573),I=n(333261),S=n(666535),A=n(335158),w=n(690738),C=n(843926),N=n(517886),L=n(811174),O=n(268295),R=n(51002);function P(e){let r,n,s;let P=(0,i.wA)(),D=r=>{P((0,_.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},k=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(P,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},M=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,c.trackEvent)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},F=()=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&P(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:h.WJ.MODAL}))},x=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?k(r):D(r)},{data:U}=e;switch(U.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let B=U.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),G=U.url.pathname+U.url.search+U.url.hash,V=G.split(/\//),H="design"===V[1]||"board"===V[1]||"proto"===V[1],z="board"===V[1];switch(U.type){case y.F.GENERIC:n=w.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=H?z?v.A:I.A:w.A;break;case y.F.FIGMA_PROTOTYPE:n=O.A}if((0,g.F4)(U.url.host)&&H&&V[2]&&V[3]){let e=U.url.pathname.split(/\//)[3];if(e)try{s=decodeURI(e).replace(/-/g," ")}catch(e){}}r=s?a.createElement("div",{className:b.Qq},s):a.createElement(a.Fragment,null,a.createElement("div",{className:b.bl},B),G&&"/"!==G&&a.createElement("div",{className:b.Ae},G));break;case y.F.PAGE:n=S.A,r=a.createElement("div",{className:b.Qq},U.text);break;case y.F.FRAME:let K=U.text;n=A.A,K&&e.editorType===f._Y.SITES&&(n=L.A,"/"===K&&(K=(0,p.t)("sites.panel.home"),n=C.A)),r=a.createElement(a.Fragment,null,a.createElement("div",{className:b.Qq},K),U.secondaryText&&a.createElement("div",{className:b.Yg},a.createElement(u.B,{className:b.FI,svg:T.A}),U.secondaryText));break;case y.F.INVALID:n=w.A,r=a.createElement("div",{className:b.Qq},(0,p.tx)("hyperlink.invalid_link",{link:U.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=w.A,r=a.createElement("div",{className:b.Qq},U.text);break;case y.F.MAILTO:r=a.createElement("div",{className:b.Ae},U.url.pathname),n=N.A;break;case y.F.TEL:n=R.A,r=a.createElement("div",{className:b.Ae},U.url.pathname)}let W=e.canEdit,j=e.canEdit&&(U.type===y.F.GENERIC||U.type===y.F.FIGMA_FILE||U.type===y.F.FIGMA_VERSION||U.type===y.F.FIGMA_PROTOTYPE),Y=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,p.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,p.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,p.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,p.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),$=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,p.t)("hyperlink.send_mail");case y.F.TEL:return(0,p.t)("hyperlink.call_telephone");default:return null}})(),q=a.createElement(a.Fragment,null,Y?a.createElement("span",{className:b.ln},Y," "):null,r),X=(r,i)=>a.createElement(o.E,{className:l()({[b.vk]:r,[b.ho]:!r}),onClick:x,recordingKey:e.recordingKey},r&&a.createElement(u.B,{className:b.Kk,style:m.sx.if(n===v.A,m.sx.add({transform:"rotate(90deg)"})).$,svg:n}),i),J=a.createElement(o.E,{className:`${b.ho} ${b.vk}`,recordingKey:d.Pt(e,"secondaryButton"),onClick:D},$),Z=(r,n)=>a.createElement(o.E,{className:l()({[b.hc]:!r,[b.Ef]:r,[b.vk]:r}),onClick:M,recordingKey:d.Pt(e,"editHyperlinkPopup")},r&&a.createElement(a.Fragment,null,a.createElement(u.B,{className:b.Kk,svg:w.A}),a.createElement("div",{className:l()(b.ln,b.i1)},(0,p.tx)("hyperlink.edit"))),n);return a.createElement("div",{className:b.lY,onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:return a.createElement(a.Fragment,null,X(!0,q),W&&a.createElement(a.Fragment,null,a.createElement("div",{className:b.yF}),Z(!1,(0,p.tx)("hyperlink.edit"))));case f._Y.WHITEBOARD:return a.createElement(a.Fragment,null,X(!0,q),W&&a.createElement(a.Fragment,null,a.createElement("div",{className:b.yF}),Z(!1,(0,p.tx)("hyperlink.edit"))),j&&a.createElement(a.Fragment,null,a.createElement("div",{className:b.yF}),a.createElement(o.E,{className:b.hc,recordingKey:d.Pt(e,"unfurlHyperlinkPopup"),onClick:F,htmlAttributes:{"data-testid":"hyperlink.preview"}},(0,p.tx)("hyperlink.create_preview"))));default:return a.createElement(a.Fragment,null,X(!0,q),$&&a.createElement(a.Fragment,null,a.createElement("div",{className:b.yF}),J),W&&a.createElement(a.Fragment,null,a.createElement("div",{className:b.yF}),Z(!1,(0,p.tx)("hyperlink.edit"))))}})())}function D(e){let{data:r,editorType:n,urlString:i,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return a.createElement(P,{data:r,editorType:n,urlString:i,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},648032:(e,r,n)=>{n.d(r,{J:()=>a});var a=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(a||{})},70969:(e,r,n)=>{n(859480),n(730143),n(180294),n(125761),n(228845),n(975695);var a=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(a||{}),i=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(i||{})},506777:(e,r,n)=>{n.d(r,{k:()=>a}),n(848318),n(301168),n(225859),n(536384),n(696786),n(355755),n(200300),n(729469),n(228845),n(254320),n(27776);let a="left-panel-container"},312331:(e,r,n)=>{n(848318),n(82433)},228845:(e,r,n)=>{n.d(r,{Ye:()=>u,n0:()=>p}),n(848318),n(301168);var a=n(186606);n(320953),n(768618);var i=n(382902);n(989232),n(898700),n(865114),n(116848),n(66699),n(967688),n(952039);var o=n(696786);n(303397),n(959750);var s=n(796580);n(702038);var l=n(355755);n(424227);var c=n(4881),d=n(554326);function u(){let e=(0,o.GS)(),r=!(0,d.ut)(a.Ez5?.editorPreferences()?.showSidebar,s.R.showSidebar),n=(0,d.ut)(a.Ez5?.uiState()?.leftPanelCollapsedUI3,!s.R.showSidebar);return e?n:r}function p(){return(0,l.p8)("pagesList")}n(84145),n(762703),(0,i.Iz)(e=>(0,c.Wh)(()=>(0,i.eU)(e)))},663934:(e,r,n)=>{n.d(r,{j:()=>m});var a=n(848318),i=n(186606),o=n(813009),s=n(156974),l=n(967688),c=n(413020),d=n(184637);let u=s.ms,p=s.c$,m="component-insert-leaf-context-menu";a.memo(function(){let{dropdownShown:e,defaultLibraryKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultLibraryKeys:e.library.defaultPublished.libraryKeys,openFileKey:e.openFile?.key||null})),s=e?.data?.component,_=s?.file_key===n,h=(0,c.b)({libraryKey:s?.library_key,nodeId:s?.node_id});if(!e||e.type!==m||!s||r.includes(s.library_key))return null;let g=h.data;return _||g?.link?a.createElement(u,{className:d.H,style:e.data.position},_?a.createElement(p,{recordingKey:`goToLocalComponent.${s.node_id}`,onClick:()=>i.glU.goToSymbolOrStateGroupById(s.node_id,!1)},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component")):a.createElement(p,{recordingKey:`goToSubscribedComponent.${s.node_id}`,href:g?.link,target:"_blank"},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component"))):null})},295156:(e,r,n)=>{n.d(r,{I1:()=>C,RG:()=>P,cY:()=>L,dL:()=>k,jz:()=>F,pz:()=>O,yP:()=>R});var a=n(562027),i=n(382902),o=n(239910),s=n.n(o),l=n(748008),c=n(238462),d=n(88217),u=n(118287),p=n(271326),m=n(802240),_=n(249726),h=n(806350),g=n(506383),f=n(388869),E=n(255248),y=n(116623),b=n(730143),v=n(231159),T=n(55116),I=n(253332),S=n(436999),A=n(361053),w=n(720722);let C=(0,i.eU)(e=>{let r=e(b.yV);if(!r)return(0,l.Xm)();let n=r.parentOrgId,a=!!r.teamId,i=(0,_.T9)(r?.project),o=e(T.DtB.Query({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,m.M)()??null})),s=e(p.JB),c=e(A.Me),d=(0,I.w5)(c);return(0,S.gM)(o,a,i,s,n,d)}),N=(0,i.Iz)(e=>(0,i.mg)(C,r=>new Set(r.data?.map(r=>r[e])),d.yZ));function L(e){return N(e)}let O=(0,v.OX)(w.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),R=(0,v.bt)(e=>e.openFile?.publishedHubFile?.id),P=(0,v.bt)(e=>e.openFile?.publishedHubFile?.libraryKey?(0,a.l)(e.openFile.publishedHubFile.libraryKey):null),D=(0,v.bt)(e=>e.openFile?.editorType),k=(0,i.eU)(null),M=(e,r)=>r,F=(()=>{let e=(0,i.M2)((0,i.eU)(e=>{let r=e(R),n=e(D),a={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,u.DU)(n??void 0))return a;let i=e(T.vsj.Query({hubFileId:r})),o=(0,h.J)(i),l=(0,f.o)(i),c=e(T.Acj.Query({hubFileId:r})),d=(0,E.F)(c),p=e(T.eHy.Query({hubFileId:r})),m=(0,y.kX)({type:"community",value:p},!0),_=(0,y.cM)({type:"community",value:p},!0),b=e(T.CfA.Query({hubFileId:r})),v=(0,g.i)(b);return a.variables=s()(_,"node_id"),a.variableSets=s()(m,"node_id"),a.styles=s()(d,"node_id"),a.components=s()(o,"node_id"),a.stateGroups=s()(l,"node_id"),a.modules=s()(v,"node_id"),a},c.lQ)),r=(0,v.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,i.FZ)(r,M);return(0,v.S9)(n,r.reducer)})()},710481:(e,r,n)=>{n.d(r,{E1:()=>y,aU:()=>E});var a=n(848318),i=n(301168),o=n(989232),s=n(63163),l=n(979309),c=n(561258),d=n(847240),u=n(843117),p=n(303397),m=n(146859),_=n(730143),h=n(399906),g=n(282720);let f=e=>!!e.isNewAssetsPanel;function E(e){let{isVisible:r,query:n,placeholder:c,onChange:E,className:y,extraSpacing:b,hideXIcon:v,hideSearchIcon:T,isFigjam:I,isLibraryModalUi3:S,autofocus:A,selectOnFocus:w,entryPointForTracking:C,forwardedRef:N,recordingKey:L}=e,O=(0,i.wA)(),R=(0,_.q5)(),P=(0,i.d4)(e=>e.search.sessionId),D=(0,h.k)(),k=a.useRef(null),M=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:i}){return a.useCallback(()=>{i?.current&&e&&r&&i.current.focus(n)},[r,e,i,n])}({isVisible:r,autofocus:A,selectOnFocus:w,ref:k}),F=a.useCallback(e=>!!(e.altKey&&p.Y5.isReady())&&(0,m.f7)(e),[]);(0,s.h)(()=>{function e(){O(u.ky())}return M(),e(),e});let x=a.useCallback(()=>{"editor:assets_panel"===C&&o.definedAnalyticsHandler.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)?e.onClearSearch():E(""),O(u.ky())},[C,e,O,n,D,R?.key,R?.teamId,R?.parentOrgId,E]),U=a.useCallback(e=>{C&&(""===e&&P?O(u.ky()):""===e||P||O(u.Dy({entryPoint:C})),E(e))},[O,C,P,E]),B=a.useCallback(()=>{""===n||P||O(u.Dy({entryPoint:C})),"editor:assets_panel"===C&&o.definedAnalyticsHandler.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onFocus()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D,P,O,n]),G=a.useCallback(()=>{"editor:assets_panel"===C&&o.definedAnalyticsHandler.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onBlur()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D]);return I||S?a.createElement(d.IW,{ref:(0,l.A)(k,N),className:y,clearSearch:x,focusOnMount:!1,hideXIcon:v,isKeyDownHandled:F,onBlur:G,onChange:U,onFocus:B,placeholder:c,query:n,recordingKey:L,withUI3Icon:S}):f(e)?a.createElement(g.K,{ref:(0,l.A)(k,N),clearSearch:x,focusOnMount:!1,isKeyDownHandled:F,onBlur:G,onChange:U,onFocus:B,placeholder:e.placeholder,query:n,recordingKey:L}):a.createElement(d.Lp,{ref:(0,l.A)(k,N),className:y,clearSearch:x,dataTestId:"asset-panel-search-bar-input",extraSpacing:b,focusOnMount:!1,hideSearchIcon:T,hideXIcon:v,isKeyDownHandled:F,onBlur:G,onChange:U,onFocus:B,placeholder:c,query:n,recordingKey:L})}function y({autofocus:e,className:r,column:n,extraSpacing:i,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:p,onChange:m,path:_,placeholder:h,query:g,recordingKey:f,selectOnFocus:y,entryPointForTracking:b,forwardedRef:v,...T}){let I=a.useRef(null),S=a.useCallback(()=>{y&&I.current?.select()},[y]),{setKeyboardNavigationElement:A}=(0,c.M3)({path:_,column:n,disabled:!p,onFocus:S});return(0,s.h)(()=>{I.current&&A?.(I.current.searchInput)}),a.createElement(E,{autofocus:e,className:r,entryPointForTracking:b,extraSpacing:i,forwardedRef:(0,l.A)(I,v),hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:p,onChange:m,placeholder:h,query:g,recordingKey:f,selectOnFocus:y,setKeyboardNavigationElement:A,...T})}},478581:(e,r,n)=>{n.d(r,{PI:()=>l,rp:()=>s});var a=n(410441),i=n(720722),o=n(475869);(0,a.hG)(o.ZV),(0,a.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e.THIN_2_COL="THIN_2_COL",e.THIN_3_COL="THIN_3_COL",e))(s||{});function l(e,r){let n=!0,a=!0;for(let r of e){let e,o;if(r.type!==i.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(a=!1),!n&&!a)break}}return n?"WIDE":a&&!r?"SMALL":"NORMAL"}},168852:(e,r,n)=>{n.d(r,{I:()=>a});var a=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e.SITE_KIT="site kit",e))(a||{})},722692:(e,r,n)=>{n.d(r,{DG:()=>i}),n(848318);var a=n(7376);function i(e,r){null!==a.x4&&a.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},789253:(e,r,n)=>{n.d(r,{JA:()=>d,VI:()=>l,qr:()=>u});var a=n(848318),i=n(301168),o=n(382902),s=n(31898);let l="ComponentFlyoutModal",c=(0,o.eU)(null);function d(){let e=(0,i.wA)(),r=(0,i.d4)(e=>e.modalShown),[n,d]=(0,o.fp)(c),u=a.useCallback(e=>{null===e&&d(null),d(r=>null===r?null:{...r,...e})},[d]),p=a.useCallback(()=>{u(null),e(s.ES({type:l}))},[e,u]),m=a.useMemo(()=>null!==n||r?.type===l,[n,r?.type]);return{flyoutProps:n,setFlyoutProps:d,updateFlyoutProps:u,closeFlyout:p,isFlyoutOpen:m}}function u(e){o.zl.set(c,null),e(s.ES({type:l}))}},329772:(e,r,n)=>{n.d(r,{J:()=>c});var a=n(848318),i=n(301168),o=n(19180),s=n(31898);n(535884),n(144487),n(720722);var l=n(789253);function c(e,r,n){let c=(0,i.wA)(),d=(0,i.d4)(e=>e.modalShown),{isFlyoutOpen:u,updateFlyoutProps:p}=(0,l.JA)();return a.useCallback(()=>{if((0,o.k)().dse_fpl_wave_2)u&&p({asset:e,sectionPosition:r,sectionNameForTracking:n});else{if(d?.type!==l.VI||!d?.data)return;c(s.hm({data:{...d?.data,asset:e,sectionPosition:r,sectionNameForTracking:n},type:l.VI}))}},[u,p,e,r,n,d?.type,d?.data,c])}},336004:(e,r,n)=>{n.d(r,{$1:()=>b,ND:()=>y,cx:()=>w,mZ:()=>f,oV:()=>I});var a=n(848318);n(301168);var i=n(430385),o=n(562027),s=n(382902);n(989232);var l=n(238462),c=n(810503);n(454272);var d=n(696786),u=n(526867);n(106358);var p=n(397697);n(730143);var m=n(277454);n(294490),n(469787);var _=n(720722),h=n(693964),g=n(944239);n(399906);let f="assets-panel",E=[];function y(e,r,n){let a=(0,u.y3)(e),i=[],o=[],s=[],l=n?Object.values(n):[],c=0,d=0,p=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],a=n.containing_frame?.containingStateGroup?.nodeId;a&&n.old_key&&p.add(a)}for(let e of a)if(e.deletedFromSceneGraph||(i.push(e),e.status===_.E8.NOT_STAGED||e.status===_.E8.DELETED?s.push(e):o.push(e)),(0,u.UB)(e.status)&&d++,e.status!==_.E8.CURRENT&&e.status!==_.E8.NOT_STAGED||(e.type===_.PW.COMPONENT||e.type===_.PW.STATE_GROUP)&&(0,m.Hb)(e.status)&&e.old_key||e.type===_.PW.STATE_GROUP&&(0,m.Hb)(e.status)&&p.has(e.node_id)){c++;continue}return{allItems:i,publishedItems:o,privateItems:s,erroneousItems:l,numUpdates:c,numPublished:d}}function b({library:e,fileDataByLibraryKey:r}){let n=T({itemsByTeamId:e.publishedByLibraryKey.stateGroups,fileDataByLibraryKey:r}),i=function({library:e,fileDataByLibraryKey:r}){return T({itemsByTeamId:e.publishedByLibraryKey.components,fileDataByLibraryKey:r,predicate:v})}({library:e,fileDataByLibraryKey:r});return(0,a.useMemo)(()=>{let e={},r={};for(let n of i.subscribedFiles){if(!n.library_key)continue;let a=(0,o.l)(n.library_key);e[a]=n,r[a]=(r[a]||[]).concat(i.libraryKeyToSubscribedItems[a]??[])}for(let a of n.subscribedFiles){if(!a.library_key)continue;let i=(0,o.l)(a.library_key);e[i]=a,r[i]=(r[i]||[]).concat(n.libraryKeyToSubscribedItems[i]??[])}return{subscribedFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[i,n])}(0,g.n)((e,r)=>{let n=y((0,u.Jl)(e)),a=y(r,e);return{allItems:[].concat(n.allItems,a.allItems),publishedItems:[].concat(n.publishedItems,a.publishedItems),privateItems:[].concat(n.privateItems,a.privateItems),erroneousItems:[].concat(n.erroneousItems,a.erroneousItems),numUpdates:n.numUpdates+a.numUpdates,numPublished:n.numPublished+a.numPublished}});let v=e=>e.containing_frame?.containingStateGroup==null;function T({itemsByTeamId:e,fileDataByLibraryKey:r,predicate:n=l.af}){let s=(0,m.fc)();return(0,a.useMemo)(()=>{let a=Object.create(null);for(let i in e){let l=e[i];for(let e in l){let i=(0,o.l)(e),c=r[i];if(!c||!s((0,o.l)(c.library_key)))continue;let d=[],u=l[i];for(let e in u){let r=u[e];r&&n(r)&&d.push(r)}d.length>0&&(a[i]=d)}}let l=[];return Object.keys(a).forEach(e=>{let n=r[(0,o.l)(e)];n&&l.push(n)}),(0,i.KQ)(l,"name"),{libraryKeyToSubscribedItems:a,subscribedFiles:l}},[e,r,n,s])}function I({library:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=E}){let i=S({itemsByTeamId:e.publishedByLibraryKey.stateGroups,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n}),s=S({itemsByTeamId:e.publishedByLibraryKey.components,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n});return(0,a.useMemo)(()=>{let e={},r={};for(let n of[s,i])for(let a of n.subscribedHubFiles){if(!a.library_key){(0,c.x1)("library key","Hub file unexpectedly has no library key",{hubFileId:a.id});continue}let i=(0,o.l)(a.library_key);e[i]=a,r[i]=(r[i]||[]).concat(n.libraryKeyToSubscribedItems[i]??[])}return{subscribedHubFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[i,s])}function S({itemsByTeamId:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=E}){let s=(0,m.fc)();return(0,a.useMemo)(()=>{let a={};for(let i in e){let l=e[i];for(let e in l){let i=(0,o.l)(e),c=r[i],d=n.includes(i);if(!c||!s((0,o.l)(c.library_key))&&!d)continue;let u=[],p=l[i];for(let e in p){let r=p[e];r&&!(r?.type===_.PW.COMPONENT&&r?.containing_frame?.containingStateGroup)&&u.push(r)}u.length>0&&(a[i]=u)}}let l=Object.keys(a).map(e=>r[e]);return(0,i.v7)(l,e=>e.versions[e.current_hub_file_version_id]?.name),{libraryKeyToSubscribedItems:a,subscribedHubFiles:l}},[e,r,n,s])}var A=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(A||{});function w(e){let r=(0,d.GS)(),n=(0,s.md)(h.TG);return!!e&&(!!(0,_.Do)(e)||e.type===_.PW.MODULE||(e.type===_.PW.COMPONENT||e.type===_.PW.STATE_GROUP)&&(r||(0,p.o)(e,n)))}},874728:(e,r,n)=>{n.d(r,{Ee:()=>O,N2:()=>L});var a=n(848318),i=n(469508),o=n(531788),s=n(442393),l=n(790385),c=n(536384),d=n.n(c),u=n(781239),p=n(979890),m=n(561258),_=n(401970),h=n(297638),g=n(967688);n(481406);var f=n(696786);n(271326);var E=n(403451);n(931451),n(83742);var y=n(720722),b=n(882839);n(989232),n(63163),n(776833),n(730143),n(633468),n(336004);var v=n(103789);n(442585);let T="empty_states--emptyStateContent--i0Ad8",I="empty_states--emptyStateIcon--kLLCD",S="empty_states--emptyStateIconWrapper--SHUbu",A="empty_states--emptyStateText--gZR-A";var w=n(136271),C=n(623519),N=n(773612);function L(e,r){return e?r?b.r6.BROWSE_LIBRARIES_ACTIONS:b.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?b.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:b.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:i=!1}){let o=(0,f.GS)(),s=a.useMemo(()=>L(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,E.u)({entrypoint:s,modalType:"editor",initialTab:y.Wv.TEAM_LIBRARIES}),c=a.useCallback(()=>{e?.(),l()},[e,l]);return o?a.createElement(R,{onClick:c,width:r,bgTransparent:i,fromActionsModal:!!n}):a.createElement(P,{onClick:c})}function R({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:l}){let{setKeyboardNavigationElement:c}=(0,m.M3)({path:[v.ON.CONTENTS,v.zr.CTA],disabled:l});return a.createElement("div",{className:d()("empty_states--ui3EmptyState--8bWkh",h.s.if(n,h.s.bgTransparent,h.s.colorBgSecondary).$),style:{width:r},"data-testid":"empty-state-assets-ui3"},a.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},a.createElement(s.l,null)),a.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,g.tx)("design_systems.assets_panel.empty_state_title_ui3")),a.createElement("div",null,a.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,g.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),a.createElement(i.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more"))),a.createElement(o.$n,{onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries"),ref:c},(0,g.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function P({onClick:e}){return a.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"empty-state-assets-ui2"},a.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.tx)("design_systems.assets_panel.components")),a.createElement("div",{className:T},a.createElement(_.U,{className:I,svg:w.A},a.createElement("div",{className:S},a.createElement(l.P,null))),a.createElement("div",{className:A},(0,g.tx)("design_systems.assets_panel.create_a_component")," ",a.createElement(i.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more")))),a.createElement("div",{className:T},a.createElement(_.U,{className:I,svg:C.A,fallbackSvg:N.A},a.createElement("div",{className:S},a.createElement(s.l,null))),a.createElement("div",{className:A},a.createElement(p.GG,{className:"empty_states--link--kfp3o blue_link--blueLink--9rlnd",onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries")},(0,g.tx)("design_systems.assets_panel.explore_libraries")))))}},692454:(e,r,n)=>{n.d(r,{VL:()=>a}),n(430385),n(19180),n(967688),n(680004),n(397697),n(277454),n(142250),n(720722),n(336004);let a="0:1";function i(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let a=Object.create(null);for(let n of r){let r=getNameParts(n.name),i="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=i,d=o<r.length-1;if(i+=l+(d?"/":""),s=a[c]?a[c]:e,d&&!a[i]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};a[i]=e,s.subtrees.push(e)}d||s.items.push(n)}}}let o="template-subtree";var s=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(s||{})},672345:(e,r,n)=>{n.d(r,{KO:()=>f});var a=n(848318),i=n(382902),o=n(989232),s=n(841807),l=n(550984),c=n(730143),d=n(4881),u=n(138842);let p="performance.ds_eco.asset_panel_loading",m=new s.jk(p,{}),_=((0,d.rt)(!1),(0,d.rt)(!1)),h=(e,r)=>{let n=(0,c.q5)(),s=(0,u.D)(),[d,h]=(0,i.fp)(_);a.useEffect(()=>{if(!s&&!d&&r){h(!0);let r=m.stop();r&&(0,o.trackEvent)(p,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===l.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===l.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,s,d,n,h,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===l.zq.TILE?r+=1:e.type===l.zq.ROW&&(0,l.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return h(e,r),null}},331084:(e,r,n)=>{n.d(r,{b:()=>d});var a=n(848318),i=n(301168),o=n(466930),s=n(730143),l=n(922484),c=n(925144);let d=function({disabled:e=!1}={}){let r=(0,i.wA)(),n=(0,s.q5)(),d=(0,i.d4)(e=>e.fileVersion),u=(0,i.d4)(e=>e.loadingState),p=a.useRef(0),m=null!=n&&null!=d?(0,c.yD)(n.key):void 0;return a.useEffect(()=>{!e&&null!=m&&(0,l.Sc)(u,m)&&p.current<3&&(p.current+=1,r((0,o.zK)()))},[r,m,u,e]),{isLoaded:(0,l.mC)(m??"")&&!!m}}},824662:(e,r,n)=>{n.d(r,{lX:()=>X});var a=n(848318),i=n(301168),o=n(762217),s=n(773511),l=n(458612);n(186606);var c=n(82433),d=n(536384),u=n.n(d),p=n(961736),m=n.n(p),_=n(206639),h=n(410441);n(63163);var g=n(781239);n(61503);var f=n(454805),E=n(297638),y=n(994924),b=n(967688),v=n(678097),T=n(323201),I=n(67188),S=n(381955),A=n(995218),w=n(696786),C=n(526867);n(303397);var N=n(362640),L=n(982323),O=n(501636),R=n(829640),P=n(555958),D=n(144487),k=n(181630),M=n(782589),F=n(720722),x=n(17753),U=n(446839),B=n(789253),G=n(749211),V=n(53702),H=n(336004),z=n(709990),K=n(375615),W=n(475869),j=n(527603);let Y=(0,h.hG)(W.QU);function $(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function q(e,r,n){return a.useMemo(()=>{let a={};if(n)return{nameStyle:a,background:null};let i=(0,C.zR)(e,null);return i&&!$(r)&&(a.background=T.F.format(i),a.color=(0,_.G$)(i)),{nameStyle:a,background:i}},[r,n,e])}function X(e){let{item:r}=e,{testId:n,...i}=e,{nameStyle:o}=q(e.item,e.displayType,e.noBackground),s=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!$(e.displayType))&&(s=!1);let l=j.UA,c=m()({},i,{style:{marginLeft:e.gutterWidth}});return a.createElement(Z,{...c,testId:n},a.createElement(Q,{...i},a.createElement(J,{...i}),s&&a.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return j.OD;case"list":case"list-no-padding":return j.vZ}}(e.displayType,l),style:o},(()=>{if($(e.displayType)&&!e.isSearch){let n=(0,P.kH)(r.name);return e.item.type===F.PW.RESPONSIVE_SET?(0,M.NR)(n):n}return r.name})()),e.item.type===F.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&a.createElement(er,{isList:$(e.displayType),numVariants:e.numVariants})))}function J(e){let r=(0,K.jx)(),{background:n}=q(e.item,e.displayType,e.noBackground),{cmsCollectionMappings:i}=e,o=!!i;return r?o?a.createElement(en,{collectionName:i.collectionName,width:e.width}):a.createElement(ea,{item:e.item,width:e.width}):a.createElement(ee,{...e,backgroundColor:n,className:void 0,style:e.isDragged?void 0:e.style})}(0,h.hG)(W.Us);let Z=a.memo(a.forwardRef(function(e,r){let n;let i=$(e.displayType),s=a.useRef(null),l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=(0,K.jx)(),p=i||u?e.style:{...e.style,width:c,height:l},m=(0,z.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:i});n="list-compact"===e.displayType?j.nl:"list"===e.displayType?j.yg:"list-no-padding"===e.displayType?j.oV:e.isDragged?j.Vs:e.isFigJam||e.isSlides||e.isCooper?j.bo:e.useBaseTile?j.aS:"grid-compact"===e.displayType?j.Ms:j.fh;let _=(0,F.Do)(e.item)?null:e.item.description,h=e.item.type===F.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,g=e.shouldShowNamePopout&&!i,f=!e.shouldHideDescription&&_,E=(f||g||h)&&!e.shouldHideTooltip,y=a.useMemo(()=>e.isFigJam||e.isSlides||e.isCooper?{"data-tooltip":e.isDragged||e.shouldHideTooltip?void 0:e.tooltipOverride??(0,P.kH)(e.item.name),"data-tooltip-type":e.isDragged||e.shouldHideTooltip?void 0:x.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove}:m?{"data-tooltip-type":E?x.Ib.SPECIAL:void 0,"data-tooltip":E?V.B:void 0,"data-tooltip-component-name":g?e.tooltipOverride??(0,P.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":f?_:void 0,"data-tooltip-num-variants":h?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0}:void 0,[e.isFigJam,e.isSlides,e.isCooper,e.isDragged,e.shouldHideTooltip,e.tooltipOverride,e.item.name,e.tooltipShownAbove,e.fileName,e.numVariants,e.showTooltipImmediately,m,E,g,f,_,h]);return a.createElement("div",{ref:r||s,className:`${n} ${e.className||""}`,style:p,"data-testid":e.testId,...y},a.createElement(o.o,{eventListeners:["onMouseUp"]},e.children))}));function Q(e){let r="whiteboard"===(0,A.lg)(),n=$(e.displayType),i=null!=e.cmsCollectionMappings,o=(0,H.cx)(e.item),{closeFlyout:l,isFlyoutOpen:c}=(0,B.JA)(),{onInsertableResourcePointerDown:d,dragState:u,insertAction:p}=(0,R.j)({resource:e.item,isList:n,cmsCollectionMappings:e.cmsCollectionMappings,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,insertionCallback:e.draggable?.insertionCallback,dragPreviewPointerPosition:n||i?L.N.CENTERED:L.N.RELATIVE,draggingThumbMaxDimensions:o?void 0:new f.Mi((e.width||0)-Y,(e.height||0)-Y),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:c,onDragStart:()=>{e.draggable?.onDragStart?.(),l()},onPointerUp:e.draggable?.onPointerUp,useSmartPositioning:e.useSmartPositioning,preloadThumbnail:!!e.ThumbnailOverride}),m=`componentThumb.${e.recordingNodePath}`,_=g.rf(e.buttonProps?.onContextMenu?m:`${m}_UNUSED`,"contextmenu",r=>{e.buttonProps?.onContextMenu?.(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new f.Mi(r.left,r.top),a=new f.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new f.Mi(a.x/r.width,a.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,a=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:a})},clientX:0+r.percentageMousePos.x*a,clientY:0+r.percentageMousePos.y*n}}}),h=g.rf(m,"click",r=>{if(e.buttonProps?.onItemClick?.(r,e.item),e.buttonProps?.clickToInsert){let n=new PointerEvent(r.type,{...r,view:window});p({e:n,isClick:!0,dropPosition:(0,O.zR)(void 0)}).then(()=>e.draggable?.afterSuccessfulInsert?.(n))}}),b=r=>{e.buttonProps?.onItemDoubleClick?.(r,e.item)},v=(r||e.isSlides||e.isCooper)&&u?j.Vk:j.GR,T=(0,w.GS)();return a.createElement(a.Fragment,null,a.createElement(y.n.div,{onPointerDown:r=>{e.draggable&&d(r)},style:{padding:e.itemPadding},className:E.s.hFull.borderBox.$,"data-testid":m},e.buttonProps?e.buttonProps?T?a.createElement(s.E,{className:v,htmlAttributes:{onContextMenu:_,onDoubleClick:b,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur},onClick:h,"aria-label":(0,P.kH)(e.item.name)},a.createElement("div",{"aria-hidden":!0},e.children)):a.createElement("button",{className:v,onContextMenu:_,onDoubleClick:b,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur,onMouseDown:e.buttonProps?.onFocus?void 0:I.wo,onClick:h},e.children):null:a.createElement("div",{className:v},e.children)),a.createElement(N.q,{dragState:u,isList:n}))}function ee({displayType:e,item:r,isDragged:n,isFigJam:i,isSlides:o,isCooper:s,backgroundColor:l,shouldShowShadowOnHover:c,height:d=120,width:p=120,noBackground:m,style:_,alwaysShowBorder:h,thumbWrapperClassName:g,thumbPaddingGrid:f,ThumbnailOverride:E,noCenter:y}){let b;let v=a.useContext(k.uW),I=(0,S.X)(),A=d-d%2,w=p-p%2,C=$(e);b=C?m?j.v:j.Tq:m||i?j.Yc:`${j.wi} ${j.wi}`;let N={width:2*w,height:2*A,padding:a.useMemo(()=>i?f??0:C?Y:f??Y,[i,C,f]),..._};y&&(N.transform="scale(0.5)",N.transformOrigin="top left",N.display="flex",N.alignItems="flex-start",N.justifyContent="center"),m||!l||i||(h||o||s||(N.boxShadow=(0,k.pw)(v,l,I)),N.background=T.F.format(l)),n&&(C?(N.width=void 0,N.height=void 0):N.background=void 0);let L=a.useMemo(()=>r.type===F.PW.RESPONSIVE_SET&&"LIBRARY"===r.subscriptionStatus&&r.fullPage?j.NK:c?j.Ib:i||o||s?j.FF:j.N4,[i,o,s,r,c]);return a.createElement("div",{className:j.Ol,style:n&&C?void 0:{width:w,height:A}},a.createElement("div",{className:u()(b,g,{[j.XK]:h}),style:N,"data-testid":`library-item-tile-thumb-${r.name}`},r.type===F.PW.VARIABLE_SET?a.createElement(et,{variableSetID:r.node_id}):E?a.createElement(a.Fragment,null,E):a.createElement(U.M,{className:L,item:r,shouldGenerateLocalThumbnail:!0,draggable:!1,style:y?{margin:"0",objectPosition:"top left",objectFit:"contain",maxHeight:"100%",maxWidth:"100%",height:"auto",alignSelf:"flex-start",paddingLeft:"12px"}:{}})))}let et=a.memo(function({variableSetID:e}){let r=(0,i.d4)(e=>(0,D.a3)(e)),n=a.useMemo(()=>{let n=new Set;for(let a of Object.values(r))if(a.variableSetId===e&&(n.add(a.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return a.createElement("div",{className:j.bF},n.map((e,r)=>a.createElement("div",{className:j.aC,key:e,style:{marginTop:(o-r)*20}},a.createElement(G.i,{type:e,showTooltip:!1}))))});function er({isList:e,numVariants:r}){let n=(0,w.GS)();if(r<=1)return null;let i=(0,b.t)("design_systems.assets_panel.variant_count",{numVariants:r});return a.createElement(a.Fragment,null,a.createElement("div",{className:e?j.hs:j.xC,"data-tooltip":i,"data-tooltip-type":x.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0,"aria-hidden":!0},r),a.createElement(l.E,null,i))}function en({width:e=120,collectionName:r}){return a.createElement("div",{...c.Ay.props(ei.cmsThumbWrapper,ei.thumbWrapperWidth(e)),"data-testid":`library-item-tile-thumb-${r}`},a.createElement(v.e,{collectionName:r}))}function ea({item:e,width:r=120}){let n=(0,K.jl)();return a.createElement("div",{...c.Ay.props(ei.thumbWrapper,n===K.W7.Block&&ei.thumbClampHeight,ei.thumbWrapperWidth(r)),"data-testid":`library-item-tile-thumb-${e.name}`},a.createElement(U.M,{...c.Ay.props(ei.thumb,n===K.W7.Block&&ei.thumbClampHeight),item:e,shouldGenerateLocalThumbnail:!0,draggable:!1,loading:"eager"}))}let ei={thumb:{maxWidth:"x193iq5w",maxHeight:"xmz0i5r",objectFit:"x8jj4xb",margin:"x1bpp3o7",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,userSelect:"x87ps6o",$$css:!0},thumbWrapper:{borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,display:"x78zum5",flexDirection:"xdt5ytf",alignContent:"xc26acl",flexShrink:"x2lah0s",backgroundColor:"x1v8gsql",padding:"xe8ttls",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,minHeight:"x10a6mx8",maxHeight:"x1i69ec5",":focus_boxShadow":"xcyo9kp",$$css:!0},cmsThumbWrapper:{padding:"xe8ttls",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},thumbClampHeight:{minHeight:"x10a6mx8",maxHeight:"x1drivef",$$css:!0},thumbWrapperWidth:e=>[{width:null==e?null:"x1bl4301",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]}},103789:(e,r,n)=>{n.d(r,{ON:()=>a,yW:()=>m,zr:()=>p});var a=(e=>(e[e.HEADER=0]="HEADER",e[e.SUGGESTIONS=1]="SUGGESTIONS",e[e.BREADCRUMB=2]="BREADCRUMB",e[e.CONTENTS=3]="CONTENTS",e))(a||{}),i=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(i||{}),o=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(o||{}),s=(e=>(e[e.SEARCH=0]="SEARCH",e[e.VISUAL_SEARCH_BUTTON=1]="VISUAL_SEARCH_BUTTON",e[e.SETTINGS=2]="SETTINGS",e))(s||{}),l=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(l||{}),c=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.TEMPLATES=1]="TEMPLATES",e[e.EXAMPLES=2]="EXAMPLES",e[e.COMPONENTS=3]="COMPONENTS",e[e.FOLDERS=4]="FOLDERS",e))(c||{}),d=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.LOCAL_AND_SUBSCRIBED=1]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=2]="PRESETS",e[e.VISUAL_ASSETS=3]="VISUAL_ASSETS",e))(d||{}),u=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e))(u||{}),p=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(p||{}),m=(e=>(e.DESIGN="design",e.SITE="site",e))(m||{})},228061:(e,r,n)=>{n.d(r,{Nh:()=>f,Qk:()=>E,R2:()=>y,ZV:()=>b,mb:()=>g});var a=n(848318),i=n(430385),o=n(402923),s=n(382902),l=n(989232),c=n(680004);n(87148);var d=n(730143),u=n(775030),p=n(908307);n(168852);var m=n(399906);n(695816);var _=n(937629),h=n(103789);function g(e,r){return function(e,r){let n=[...e];return r&&(0,c.NX)(r)?(0,c.k9)({libraries:n,approvedLibraryKeysByResourceType:r}):(0,i.KQ)(n,"name"),n}(e.map(e=>({...e,library_key:e.libraryKey})),r)}function f(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups;return r||n>0?{name:e.name,libraryKey:e.libraryKey,numComponents:n,numTemplates:0,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||"community"===e.libraryType,type:h.yW.DESIGN,libraryType:e.libraryType}:null}function E(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&"application"!==e.role}function y(e,r=8){let[n,i]=a.useState(window.innerHeight);a.useEffect(()=>{let e=()=>{i(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=a.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}function b(e){let r=(0,_.Nv)(!0),n=(0,m.k)(),i=(0,d.tS)(),s=(0,u.CK)();return a.useCallback(a=>{let{type:c,sectionPosition:d,searchQuery:u,searchSessionId:m,..._}=e,h={aiResultsEnabled:r,altKey:a.altKey,assetsPanelVersion:n,fileKey:i??void 0};l.definedAnalyticsHandler.trackDefinedEvent("assets_panel.keyboard_insert",{...e,...h}),e.source!==p.tM?l.definedAnalyticsHandler.trackDefinedEvent("asset_search.result_inserted",{..._,...h,assetType:c,position:d,reciprocalRank:(0,o.Et)(d)?1/(1+d):void 0,query:u,sessionId:m,entryPoint:"assets-panel",componentSuggestionSessionId:s}):(0,p.k1)({assetType:c,assetKey:_.assetKey,libraryKey:_.assetLibraryKey})},[e,r,i,n,s])}n(442585),n(256387),(0,s.eU)(!1)},553857:(e,r,n)=>{n(848318).createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0})},248971:(e,r,n)=>{n.d(r,{MB:()=>i});var a=n(848318);function i({onBoth:e,onClick:r,onKeyDown:n}){return a.useCallback(a=>{e?.(a),0!==a.detail?r?.(a):n?.(a)},[e,r,n])}n(857607),n(561258),n(303397),n(146859),n(103789),n(228061),n(442585),n(336305),n(547952);let o=a.createContext(null)},932265:(e,r,n)=>{var a=n(848318),i=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(i||{});(0,a.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1})},832278:(e,r,n)=>{n.d(r,{hK:()=>s});var a=n(848318);n(301168);var i=n(559389);n(82433),n(755534),n(334804),n(967688);var o=n(353231);function s({height:e}){return a.createElement("div",{style:{height:e}})}n(730143),n(491727),(0,i.s)((e,r,n,a)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:a})},500)},442585:(e,r,n)=>{n.d(r,{aK:()=>p,t6:()=>d}),n(848318);var a=n(382902);n(865114);var i=n(209595),o=n(4881);n(103789),n(553857),n(932265),n(920467),n(695816);var s=n(596224);n(886776);var l=(e=>(e.IconSets="icon_sets",e.Illustrations="illustrations",e))(l||{}),c=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e.VisualAssets="Visual assets",e))(c||{}),d=(e=>(e.Blocks="Blocks",e.Libraries="Libraries",e))(d||{});(0,o.rt)({}),(0,o.rt)(!1),(0,o.rt)(!1),(0,o.rt)(!1);let u=(0,o.rt)("Blocks"),p=(0,a.eU)(e=>{let r=e(u),n=e(i.OC);return(0,s.Vj)(n)?r:"Libraries"},(e,r,n)=>{r(u,n)});(0,o.rt)(void 0)},886776:(e,r,n)=>{n.d(r,{U:()=>c}),n(848318);var a=n(301168);n(730143);var i=n(277454),o=n(922484),s=n(436999),l=n(138842);function c(){let e=(0,s.je)(),r=(0,a.d4)(e=>e.loadingState);return!!(0,l.D)()&&(!e.data||e.data.some(e=>{let n=(0,i.Mb)(e.libraryKey);return!(0,o.D2)(r,n)}))}n(938535),n(256387)},920467:(e,r,n)=>{n.d(r,{MA:()=>p});var a=n(848318),i=n(382902),o=n(7376),s=n(238462),l=n(596224),c=(e=>(e.LIST="list",e.GRID="grid",e))(c||{});let d="assets-panel-view-mode-v2",u=(0,i.E3)(d,"grid");function p(){let[e,r]=(0,i.fp)(u),n=a.useCallback(e=>e.key===d&&null!=e.newValue,[]),c=a.useCallback(n=>{if(n)try{let a=JSON.parse(n);("grid"===a||"list"===a)&&e!==a&&r(a)}catch(e){}},[e,r]);(0,o.tl)({onSync:c,shouldSyncValue:n});let p=(0,l.cJ)();return a.useMemo(()=>p?["grid",s.lQ]:[e,r],[e,p,r])}(0,i.E3)("asset-panel-show-folders",!1)},336305:(e,r,n)=>{n.d(r,{e:()=>i});var a=n(848318);function i(e){let[r,n]=a.useState(e);return[r,a.useCallback(()=>n(!0),[]),a.useCallback(()=>n(!1),[]),a.useCallback(()=>n(e=>!e),[])]}},375615:(e,r,n)=>{n.d(r,{W7:()=>i,jl:()=>l,jx:()=>s});var a=n(848318),i=(e=>(e[e.Block=0]="Block",e[e.Webpage=1]="Webpage",e[e.Embed=2]="Embed",e))(i||{});let o=(0,a.createContext)(void 0);function s(){return void 0!==(0,a.useContext)(o)}function l(){return(0,a.useContext)(o)}},163961:(e,r,n)=>{n.d(r,{rg:()=>_});var a=n(938982),i=n(673786),o=n(382902),s=n(476254),l=n(998568),c=n(757187),d=n(318147),u=n(419515),p=n(581271);let m=null;async function _(){try{if(!function(){let e=o.zl.get(p.Gd);return 0!==e.size&&Object.entries(o.zl.get(c.fh[d.PW.CODE_COMPONENT].subscribed)).some(([r,n])=>e.has(r))}())return;let e=await (0,p.UI)();await h(e)}catch(e){(0,l.$D)(a.e.PROTOTYPING,e)}}async function h(e){let{enabled:r}=o.zl.get(p.bV);if(!r)return;if(m){await m;return}let n=o.zl.get(c.fh[d.PW.CODE_COMPONENT].subscribed),a=new Map(e.map(e=>[e.asset.key,e.asset])),l=[];for(let[e,r]of Object.entries(n)){let n=a.get((0,i.Sm)(e));if(n){for(let[e,a]of Object.entries(r.pagesByVersion))if(n.version!==e){l.push(n);break}}}0!==l.length&&(m=(async()=>{await (0,u.L8)(s.D,l),m=null})(),await m)}},938535:(e,r,n)=>{n.d(r,{Pv:()=>d,Yl:()=>u});var a=n(871043),i=n(562027),o=n(870567),s=n(967688),l=n(150480),c=n(103789);function d(e){var r;let n=(0,o.oA)(e.libraryKeyToFile?.file);if(!n)return null;let d=n.libraryAssets.map(e=>(0,l.py)((0,i.l)(n.libraryKey),e)).filter(a.Vq);return 0===d.length?null:{library:{name:"Pages"===(r=n).name?(0,s.t)("design_systems.assets_panel.site_blocks.pages"):"Navigation"===r.name?(0,s.t)("design_systems.assets_panel.site_blocks.navigation"):"Heroes"===r.name?(0,s.t)("design_systems.assets_panel.site_blocks.heroes"):"Features"===r.name?(0,s.t)("design_systems.assets_panel.site_blocks.features"):"CMS"===r.name?(0,s.t)("design_systems.assets_panel.site_blocks.cms"):r.name,libraryKey:(0,i.l)(n.libraryKey),thumbnailUrl:n.thumbnailUrl,thumbnailShouldCover:!1,numResponsiveSets:d.length,type:c.yW.SITE,libraryType:"team"},assets:d}}let u="SITE_KIT_EMBEDS_LIBRARY_KEY"},612962:(e,r,n)=>{n.d(r,{V:()=>u});var a=n(562027),i=n(19180),o=n(615233),s=n(967688),l=n(103789),c=n(938535);let d=[{name:"URL or HTML",type:"embed",initial_url:"",thumbnail_url:(0,o.ck)("50bbd90a0f648e142c7b43ad02a055b82c822754"),preview_url:(0,o.ck)("cb0d72db7dc60561469703a5c536714f0c435da4"),width:600,height:400,background_color:"--var(--color-background-secondary)",description:["url","html","iframe","embed"]},{name:"YouTube",type:"embed",initial_url:"https://www.youtube.com/",thumbnail_url:(0,o.ck)("d57af0b27df23ba99b7f30f0003245cdd31db4a5"),preview_url:(0,o.ck)("18ee4292c3c2b58c0c1f2878a3b151c1dba39b98"),width:600,height:400,background_color:"--var(--color-background-secondary)",description:["embed","video"]},{name:"Google Maps",type:"embed",initial_url:"https://maps.google.com/?output=embed&q=San+Francisco+City+Hall",thumbnail_url:(0,o.ck)("a32eefa820b3b3bfa8d8963b955db10cf36e7c50"),preview_url:(0,o.ck)("574575e64fb6517dd8d4e44a65c333025c7ed9c5"),width:600,height:400,background_color:"--var(--color-background-secondary)",description:["embed"]}];function u(){return d.filter(e=>!e.feature_flag||(0,i.k)()[e.feature_flag]).length>0?{name:(0,s.t)("design_systems.assets_panel.site_embeds"),libraryKey:(0,a.l)(c.Yl),thumbnailUrl:(0,o.ck)("b325c884bd37bf62ccd3776e84158fc1e3bc0def"),thumbnailShouldCover:!1,numResponsiveSets:0,type:l.yW.SITE,libraryType:"team"}:null}},581271:(e,r,n)=>{n.d(r,{Gd:()=>S,UI:()=>w,bV:()=>I}),n(848318);var a=n(562027),i=n(19180),o=n(382902),s=n(981555),l=n(458608);n(329228);var c=n(227276),d=n(548904),u=n(130792),p=n(540698),m=n(755595),_=n(995218);n(526867);var h=n(318147),g=n(55116),f=n(150480),E=n(259964);let y=m.z.object({assetKey:m.z.string(),name:m.z.string(),icon:m.z.string().optional(),nodeTypes:m.z.array(m.z.string()).optional(),category:m.z.string().optional()}),b=m.z.object({libraryKey:m.z.string(),assets:m.z.array(y)}),v=[],T=(0,o.eU)(async e=>{let r=e(_.u8)===E.nT.Sites,n=!!((0,p.Lg)()||(0,p.nl)())||e(d.ZJ).status===u.Uv.COMPLETED;return r&&n?{libraryConfigs:(await (0,c.w0)("1p_code_presets_sts")).get("libraries",v,e=>Array.isArray(e)&&e.every(e=>b.safeParse(e).success)),enabled:r}:{libraryConfigs:v,enabled:!1}}),I=(0,s.oA)(T,()=>({libraryConfigs:v,enabled:!1})),S=(0,o.eU)(e=>{let{libraryConfigs:r,enabled:n}=e(I);if(!n)return new Set;let a=new Set;for(let e of r)for(let r of e.assets)a.add(r.assetKey);return a}),A=null;async function w(){let{libraryConfigs:e,enabled:r}=o.zl.get(I);if(!r)return[];if(A)return A;let n=(0,i.k)().ds_enable_code_presets_sidecar_table,s=await Promise.all(e.map(async({libraryKey:e})=>n?await (0,l.Ek)(g.IUX,{libraryKey:e}):await (0,l.Ek)(g.Bu2,{libraryKey:e,assetType:h.PW.CODE_COMPONENT})));return function(e,r){let n=new Map;for(let r of e)for(let e of r.assets)n.set(e.assetKey,e);let i=[];for(let e of r){let r=e.libraryKeyToFile?.file;if(r)for(let e of r.libraryAssets){let o=n.get(e.key);if(!o)continue;let s=(0,f.Zi)((0,a.l)(r.libraryKey),e);s&&i.push({asset:s,name:o.name,icon:o.icon,nodeTypes:o.nodeTypes,category:o.category})}}return A=i,i}(e,s)}},256387:(e,r,n)=>{n.d(r,{ce:()=>L});var a=n(848318),i=n(382902),o=n(755595),s=n(981555);n(870567);var l=n(748008),c=n(329228),d=n(227276),u=n(548904),p=n(130792),m=n(540698),_=n(995218),h=n(318147),g=n(55116);n(806349),n(782589);var f=n(259964),E=n(944239),y=n(938535),b=n(612962);let v=(0,E.n)(async()=>await (0,d.w0)("ds_sts_lib_key")),T=o.z.object({libraryKey:o.z.string(),primaryTextFieldId:o.z.string(),secondaryTextFieldId:o.z.string(),imageFieldId:o.z.string(),assetNames:o.z.object({textImageList:o.z.string(),textOnlyList:o.z.string(),imageOnlyList:o.z.string(),imageSingleTextList:o.z.string().optional()})}),I=[],S=(0,i.eU)(async e=>{let r=e(_.u8)===f.nT.Sites,n=!!((0,m.Lg)()||(0,m.nl)())||e(u.ZJ).status===p.Uv.COMPLETED;if(!r||!n)return{libraryKeys:I,cmsConfig:null,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0};let a=await v(),i=a.get("libraryKeys",[],A),o=a.get("siteFile",!1,e=>"boolean"==typeof e),s=a.get("order",[],A),l=a.get("cms",null,w),c=i.length>0&&r;return{libraryKeys:c?i:[],cmsConfig:c?l:null,enabled:c,publishedFromSiteFile:o,sortedPrefixes:s.map(e=>e.toLocaleLowerCase())}});function A(e){return Array.isArray(e)&&e.every(e=>"string"==typeof e)}function w(e){return T.safeParse(e).success}let C=(0,s.oA)(S,()=>({libraryKeys:I,cmsConfig:null,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0})),N=(0,E.n)(()=>{let{libraryKeys:e,enabled:r}=(0,i.md)(C),n=e.map(e=>g.Bu2.Query({libraryKey:e,assetType:h.PW.RESPONSIVE_SET}));return(0,c.En)(n,{enabled:r})});function L(){let e=N(),{enabled:r}=(0,i.md)(C),n=a.useMemo(()=>{let n={libraries:[],assetsByLibraryKey:new Map};if(r){for(let r of e){if(r.data){let e=(0,y.Pv)(r.data);if(e){n.libraries.push(e.library);let r=e.library.libraryKey;n.assetsByLibraryKey.set(r,e.assets)}}if("loading"===r.status)return(0,l.Xm)()}let r=(0,b.V)();r&&n.libraries.push(r)}return(0,l.gB)(n)},[e,r]);return a.useMemo(()=>{if("loading"===n.status)return(0,l.Xm)();let e=n.data;return e.libraries.length>0?(0,l.gB)(e):{status:"disabled",data:null,errors:null}},[n])}},432843:(e,r,n)=>{n.d(r,{T:()=>M});var a=n(848318),i=n(301168),o=n(658029),s=n(1511),l=n(637640),c=n(63163),d=n(865114),u=n(297638),p=n(967688),m=n(31898),_=n(863270),h=n(599323),g=n(730143),f=n(672940),E=n(318147),y=n(138528),b=n(656320),v=n(579589),T=n(259964),I=n(720722),S=n(446951),A=n(783704),w=n(649154),C=n(601161),N=n(122095),L=n(882839),O=n(505671),R=n(584505),P=n(979124);function D(e){let r=(0,i.d4)(e=>e.selectedView),n=(0,d.ZC)(r),o=(0,i.d4)(e=>e.modalShown?.type),s=(0,i.wA)(),l="fullscreen"!==r.view&&n?.view===r.view,c=!("fullscreen"===r.view&&n?.view==="fullscreen"&&r.fileKey===n.fileKey)&&!l;a.useEffect(()=>{n&&c&&o===e&&s(m.Ce())},[s,e,o,c,n])}let k=a.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:o,sessionId:s,resourceConnection:d}){D(I.cX);let u=(0,i.d4)(e=>e.selectedView),p=(0,i.d4)(e=>(0,b.IE)(e)),m=(0,g.q5)(),f=(0,y.X$)("LibraryPreferencesModal").unwrapOr(null),E=(0,y.H3)(f),v=new URLSearchParams(l.Ay.location.search).get("teamToMoveFileToOnNavigate"),S=(0,h.R)();(0,c.h)(()=>{S({updateSource:"library_modal_open"})});let A=(0,L.YM)();return a.createElement(_.fu,{name:"Library Preference Modal",properties:{fileKey:m?.key,fileTeamId:m?.teamId,selectedTeamId:"team"===u.view?u.teamId:null,orgId:E,inPublishDraftExp:!!v,entryPoint:o}},d&&r?a.createElement(U,{teamId:r,resourceConnection:d}):p?a.createElement(F,null):"fullscreen"===u.view&&u.editorType!==T.nT.Whiteboard?A?a.createElement(P.b,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n,sessionId:s}):a.createElement(C.B,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n}):"team"===u.view?a.createElement(x,{initialTab:e,teamId:u.teamId}):r?a.createElement(x,{initialTab:e,teamId:r}):void 0)}),M=(0,S.Ju)(k,I.cX,S.ZU.YES);function F(){let e=(0,L._K)();return a.createElement(N.s,{width:e,title:a.createElement(R.c,{availableTabs:[I.Wv.LIBRARIES],selectedTab:I.Wv.LIBRARIES})},a.createElement(O.Z,null,a.createElement(A.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function x({initialTab:e,teamId:r}){let n=(0,i.wA)(),o=(0,i.d4)(e=>e.sharedFonts),s=(0,i.d4)(e=>(0,v.p)(e)),l=(0,y.D6)("TeamLibraryPreferencesModal").unwrapOr(null),c=!!(l&&(0,y.A8)(l,E.Xn.ADMIN)),d=(0,f.FC)(),u=a.useMemo(()=>{let e=[I.Wv.LIBRARIES];return s&&e.push(I.Wv.FONTS),e},[s]),{selectedTab:p,setSelectedTab:m}=(0,L.SE)(u,e),_=(0,L._K)(s);return a.createElement(N.s,{width:_,title:a.createElement(R.c,{availableTabs:u,selectedTab:p,setSelectedTab:m})},a.createElement(O.Z,{widerWidth:s},p===I.Wv.LIBRARIES&&a.createElement(A.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:_}),p===I.Wv.FONTS&&a.createElement(w.y,{dispatch:n,teamId:r,width:_,resourceType:"team",useModalViewComponent:!0,canAdminOrg:!!c,permissionsState:d,sharedFonts:o})))}function U({teamId:e,resourceConnection:r}){let n=(0,i.wA)(),l=(0,L._K)(!0),c=r.hostPlanType===E.OL.TEAM;return a.createElement(N.s,{width:l,title:a.createElement("div",{className:u.s.pl4.flex.flexRow.justifyBetween.itemsCenter.gap4.$},a.createElement(o.K,{onClick:()=>{n(m.Lo())},"aria-label":(0,p.t)("resource_connection.aria_label.button")},a.createElement(s.C,null)),(0,p.tx)("design_systems.libraries_modal.allow_external_teams_to_use_libraries",{projectName:r.projectName}))},a.createElement(O.Z,{widerWidth:!0},a.createElement(A.s,{showingDefaultSubscriptionsForTeamId:c?e:null,showingDefaultSubscriptionsForUser:!1,width:l,resourceConnectionId:r.id,planType:r.hostPlanType})))}(0,S.Ju)(function({entrypoint:e}){D(I.EJ);let r=(0,i.wA)();return a.useEffect(()=>{w.y.loadSharedFonts(r)},[r]),a.createElement(k,{initialTab:I.Wv.FONTS,entrypoint:e})},I.EJ,S.ZU.YES)},283622:(e,r,n)=>{n.d(r,{i:()=>u});var a=n(848318),i=n(563029),o=n(748008),s=n(730143),l=n(837983),c=n(675600),d=n(134611);function u(){let e=function(){let e=(0,d.$)(),r=(0,c.z)(),n=(0,s._G)(),l=a.useMemo(()=>"loaded"!==e.status?[]:e.data,[e]),u=(0,i.$)(e.status)&&"loaded"===e.status,[p,m]=a.useState(()=>r(l));return(a.useEffect(()=>{u&&m(r(l.filter(e=>e.library_key!==n)))},[u,r,l,n]),"loading"===e.status||u)?(0,o.Xm)():(0,o.gB)(p)}(),r=(0,l.e)(),n=function(e,r){let n=(0,s._G)(),i=a.useMemo(()=>new Set(e.data?.map(e=>e.library_key)??[]),[e]),l=a.useMemo(()=>"loaded"!==r.status?[]:r.data.publishedLibraries.filter(e=>!i.has(e.library_key)).filter(e=>e.library_key!==n),[r,i,n]);return a.useMemo(()=>"loaded"===r.status&&"loaded"===e.status?(0,o.gB)(l):r.data?.publishedLibraries.length===0?(0,o.gB)([]):(0,o.Xm)(),[r,e,l])}(e,r),u=a.useMemo(()=>{if("loading"===r.status||"loading"===n.status)return(0,o.Xm)();let e=r.data?.unpublishedLibraries.map(e=>e.library_key)??[];return(0,o.gB)([...e,...r.data?.missingLibraries??[]])},[r,n]);return a.useMemo(()=>({subscribedLibraries:e,usedInThisFile:n,missingLibraryKeys:u}),[e,n,u])}},701604:(e,r,n)=>{n.d(r,{RV:()=>g});var a=n(848318),i=n(301168),o=n(345964),s=n(720522),l=n(967688),c=n(511067),d=n(352856),u=n(120846),p=n(32813),m=n(660901);function _({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,libraryKey:p,ariaLabelledBy:m}){let _=(0,i.wA)(),g=(0,c.Um)(),f="auto_inherit_mode_string",E=e.modes?e.modes[0].name:"",y=a.useMemo(()=>({name:(0,l.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:E}),id:f}),[E]),b=o?e.modes?.find(e=>e.id===o):y,[v,T]=(0,a.useState)(b),I=a.useMemo(()=>v?.id===f?y:e.modes?.find(e=>e.id===v?.id),[e,v,y]),S=a.useCallback(r=>{T(r),r.id===f?d.j.deleteDefaultMode({libraryKey:p,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):d.j.setDefaultMode({libraryKey:p,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{T(v)})},[v,p,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&b?a.createElement(u.l6,{ariaLabelledBy:m,className:r,dataTestId:`mode-dropdown-${e.id}`,disabled:!s,dispatch:_,dropdownShown:g,dropdownWidth:150,formatter:h,id:`subscription-dropdown-${e.id}`,onChange:S,property:I},a.createElement(u.c$,{value:y},(0,l.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:E})),a.createElement(u.sK,null),e.modes?.map(e=>a.createElement(u.c$,{key:e.id,value:e},h.format(e)))):a.createElement("div",{className:r})}let h={format:e=>e.name};function g({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,libraryKey:i,entity:c,isLibraryFileEnabled:u}){let[h,g]=(0,a.useState)({}),[f,E]=(0,a.useState)(!1),y=a.useId();if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let b=!f&&n&&c&&i;return(b&&d.j.getDefaultModes({libraryKey:i,entityType:c.entityType,entityId:c.entityId}).then(e=>{g(e.data.meta),E(!0)}).catch(()=>{E(!0)}),b)?a.createElement(o.qc,null):a.createElement("div",null,!e&&a.createElement("div",{className:p.wx},a.createElement("h2",{className:p.Pf},(0,l.tx)("design_systems.libraries_modal.header_variable_collections")),n&&a.createElement("div",{className:p.Pf},(0,l.tx)("design_systems.libraries_modal.header_default_mode"))),a.createElement("div",{className:e?p.VN:p.iE},r.map(r=>a.createElement("div",{className:p.nk,key:r.id},e?a.createElement(a.Fragment,null,a.createElement(s.B,{className:p.oS,svg:m.A}),a.createElement("span",{className:p.UU},r.name),r.numVariableMatches&&a.createElement("span",{className:p.K0},(0,l.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):a.createElement("div",{className:p.kW},a.createElement("span",{id:y,className:p.UU},r.name),n&&c&&i&&a.createElement(_,{ariaLabelledBy:y,variableSet:r,modeDropdownStyle:p.nI,libraryKey:i,entity:c,defaultModeId:h[r.key],isLibraryFileEnabled:u})||a.createElement("div",{className:p.nI}),a.createElement("span",{className:p.K0},(0,l.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},175051:(e,r,n)=>{n.d(r,{dD:()=>eL});var a=n(848318),i=n(301168),o=n(871043),s=n(162796),l=n(309488),c=n(93275),d=n(143823),u=n(271020),p=n(544405),m=n(531788),_=n(469508),h=n(199774),g=n(186606);n(82433);var f=n(19180),E=n(382902),y=n(989232),b=n(865114),v=n(615233),T=n(857607),I=n(410725),S=n(72462),A=n(656329),w=n(810503),C=n(230618),N=n(692711),L=n(550984),O=n(847240),R=n(967688),P=n(453370),D=n(783536),k=n(31898),M=n(863270),F=n(892189),x=n(696786),U=n(67308),B=n(526867),G=n(887864),V=n(697494),H=n(36312),z=n(299731),K=n(999648),W=n(489082),j=n(788903),Y=n(730143),$=n(277454),q=n(318147),X=n(55116),J=n(138528),Z=n(535884),Q=n(899963),ee=n(720722),et=n(17753),er=n(52819),en=n(446951),ea=n(706488),ei=n(295156),eo=n(947648),es=n(96937),el=n(267948),ec=n(204521),ed=n(882009),eu=n(880801),ep=n(619534),em=n(131258),e_=n(122586),eh=n(787532),eg=n(636646),ef=n(379889),eE=n(551255),ey=n(368693),eb=n(489319),ev=n(273024),eT=n(499964),eI=n(702790),eS=n(831306),eA=n(229395),ew=n(354093),eC=n(44774),eN=n(479506);let eL=(0,en.Ju)(function(e){return a.createElement(M.fu,{name:"Publishing Modal",properties:{entryPoint:e.entrypoint,libraryModalSessionId:e.libraryModalSessionId}},a.createElement(ef.fo,null,a.createElement(eO,{...e})))},"PublishingModal");function eO(e){let{timedOut:r,initiallyCheckedItemIDs:n,libraryModalSessionId:m}=e,_=(0,x.GS)(),h=(0,i.wA)(),y=s.hS(e),v=a.useRef(null),[C,N]=(0,E.fp)(ei.pz),[L,M]=a.useState(""),[W,et]=a.useState(void 0),en=a.useCallback(e=>{M(r=>(!r&&e?et(v.current?.scrollHeight):r&&!e&&et(void 0),e))},[]),eo=a.useCallback(()=>{et(void 0)},[]),es=(0,i.d4)(e=>e.savedPublishDescription),[el,ed]=a.useState(es||""),[eu,ep]=a.useState(!1),[em,e_]=a.useState(null),eS=(0,Y.q5)(),ew=(0,i.d4)(U.d1),eL=(0,i.d4)(e=>e.library),eO=(0,Y.Cq)({useSinatraType:!0}),eD=ew?.key,eM=(0,i.d4)(Z.cM),eF=(0,i.d4)(Z.MH),ex=(0,i.d4)(Z.dM),eU=(0,E.md)(eA.t),eB=(0,j.nN)(),eG=a.useMemo(()=>(0,B.Jl)(eF),[eF]),{modeLimit:eV,canShowCTA:eH,showCTA:ez}=(0,eh.z)("publishing"),eK=(0,i.d4)(Z.fA),eW=(0,J.X$)("PublishingModalInner").unwrapOr(null),ej=(0,J.H3)(eW),eY=(0,i.d4)(e=>e.orgById),e$=(0,er.Y)(eO||null),eq=!!ew?.starter_library_src_file_key,eX=a.useMemo(()=>{let e=0;return Object.values(eG).forEach(r=>{eq?(0,$.lg)(r.status)&&e++:(0,$.Hb)(r.status)&&e++}),Object.values(ex).forEach(r=>{eq?(0,$.lg)(r.status)&&e++:(0,$.Hb)(r.status)&&e++}),e},[eq,ex,eG]),eJ=a.useMemo(()=>{let e=e=>Object.values(e).some(e=>e.status===ee.E8.NEW);return!!(eK&&e(eG)||eK&&e(ex)||e(eM))},[eK,ex,eM,eG]),[eZ,eQ]=a.useState(!1),e0=e$?q.pk.ORG:q.pk.TEAM,[e1,e2]=a.useState(e0),e3=a.useCallback(e=>{e2(e),h(P.oB())},[h]),e8=(0,I.Rs)((0,X.FWW)({fileKey:eD}),{enabled:!!eD});a.useEffect(()=>{if("loaded"===e8.status){if(!e8.data.file?.lastPublishedAt){eQ(!0);return}let e=e8.data.file?.libraryKeyToFile?.libraryPublishScope?.publishScopeType??q.pk.TEAM;e2(e),eQ(!0),e!==e0&&(0,w.x1)("designSystems publishing","Potential library publish scope mismatch (monitored by #feat-workspace-library-publishing)",{livegraphPublishScope:e,fileShareSettingPublishScope:e0})}},[e0,e8]);let[e6,e4]=a.useState(null),e5=a.useContext(ef.og),e7=(0,ef.UJ)(),e9=(0,ef.Xm)();(0,j.SR)();let te=(0,E.md)((0,Z.y6)(e9)),tt=(0,E.md)((0,Z.x$)(e9)),tr=(0,b.ZC)(e5);a.useEffect(()=>{tr?.status===S.r.LOADING&&e5.status===S.r.SUCCESS&&(n||ts(new Set(tt)))},[tt,e5,n,tr?.status]);let tn=(0,i.d4)(e=>(0,Z.oB)(e,e9)),ta=(0,i.d4)(e=>(0,Z.JI)(e,e9)),ti=(0,i.d4)(e=>(0,Z.Dc)(e,e9)),[to,ts]=a.useState(()=>new Set(n&&n.size>0?tt.filter(e=>n?.has(e)):tt));a.useEffect(()=>{let e=e=>{"Shift"===e.key&&ep(!0)},r=e=>{"Shift"===e.key&&ep(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]);let tl=a.useCallback(()=>{eL.publishProgress.state===ee.Qx.ASSEMBLING_COMPONENTS&&h(D.TS())},[h,eL.publishProgress.state]),tc=a.useCallback(()=>{tl(),N(ee.o.LIBRARY),h(k.Ce())},[h,N,tl]);a.useEffect(()=>{eL.publishProgress.state===ee.Qx.UPLOADING&&tc()},[tc,eL.publishProgress.state]);let td=(0,b.ZC)(eL),tu=(0,b.ZC)(tt);a.useEffect(()=>{if(td&&tu&&td!==eL){if(e_(null),tu.every(e=>to.has(e))){ts(new Set(tt));return}ts(new Set(tt.filter(e=>to.has(e))))}},[tt,to,eL,eG,e7,eS,tu,td]);let tp=a.useCallback(e=>{let r=[...te.libraryAssets[ee.PW.RESPONSIVE_SET].modified.wellFormed,...te.libraryAssets[ee.PW.CODE_COMPONENT].modified.wellFormed,...te.variableSets.modified.wellFormed,...te.styles.modified.wellFormed,...te.productComponents.modified.wellFormed,...te.pageThumbnails.modified].map(e=>e.node_id),n=r.indexOf(e);if(null===n)return;let a=new Set(to),i=!a.has(e);if(eu&&null!==em){let e=Math.min(n,em),o=Math.max(n,em);for(let n=e;n<=o;n++)i?a.add(r[n]):a.delete(r[n])}else i?a.add(e):a.delete(e);ts(a),e_(n)},[to,em,te,eu]),tm=a.useCallback(()=>{tt.length===to.size?ts(new Set):ts(new Set(tt))},[tt,to.size]),t_=a.useCallback((e,r)=>{e5.status===S.r.SUCCESS&&e5.nodeIdToValidatedMoveInfo[e]&&(e5.nodeIdToValidatedMoveInfo[e].publishType=r)},[e5]),th=a.useCallback(e=>{ed(e.target.value)},[]),tg=a.useCallback(()=>{let e=eL.used__LIVEGRAPH.localNodeIdToDestinationKey;if(!Object.keys(eL.movedLibraryItems.local).length&&!Object.keys(e).length)return;let r=ta.filter(e=>!!eL.movedLibraryItems.local[e.node_id]&&e.status!==ee.E8.DELETED&&to.has(e.node_id)).map(e=>e.node_id),n=new Set(r);for(let a of[...r,...tn.filter(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId,a=r&&ex[r]||null;return!(!eL.movedLibraryItems.local[e.node_id]||e.status===ee.E8.DELETED||a&&((0,$.zE)(a)||n.has(a.node_id)))&&to.has(r||e.node_id)}).map(e=>e.node_id),...ti.filter(r=>!!e[r.node_id]&&r.status!==ee.E8.DELETED&&to.has(r.node_id)).map(e=>e.node_id)]){let e=g.glU.generatePublishableCopy(a);e&&to.has(a)&&(to.delete(a),to.add(e))}},[to,ex,eL.used__LIVEGRAPH.localNodeIdToDestinationKey,eL.movedLibraryItems.local,tn,ta,ti]),tf=(0,H.B)(),tE=(0,E.md)((0,Z.Iy)(e9)),{currentFileIsFirstDraftKit:ty,currentFileIsDirectGenKit:tb}=(0,z.bj)(),[tv,tT]=a.useState(ty),[tI,tS]=a.useState(!ty||!(0,f.k)().first_draft_legacy_publish_ux||tb);a.useEffect(()=>{(0,f.k)().first_draft_publish_ux?ty&&(tT(!0),tb&&tS(!0)):(tT(!1),tS(!1))},[ty,tb]);let{localKits:tA}=(0,z.Ml)(),{result:tw}=(0,V.C)(tA[0]?.dsKitKey||null,[G.x$.WARNING]),tC=a.useCallback(e=>{let r;if(ew&&tE){for(let e of to){let r=eB[e];if((0,o.Vq)(r)&&r.modes.length>eV){eH(r.modes.length)?ez():(0,w.x1)("designSystems publishing","Blocking publishing of variable collection with too many modes, but upsell is not available",{collectionId:e});return}}if(e5.status===S.r.SUCCESS){let e=Object.keys(e5.nodeIdToValidatedMoveInfo).filter(e=>to.has(e)&&"MOVE"===e5.nodeIdToValidatedMoveInfo[e].publishType),n=[...Object.values(eF),...Object.values(ex),...Object.values(eM)].reduce((e,r)=>(e5.nodeIdToValidatedMoveInfo[r.node_id]&&r.old_key&&(e[r.node_id]=r.old_key),e),Object.create(null)),a=tn.filter($.ad);r=(0,$.Cj)(e,n,a)}tg(),h(D.ZS({savepointDescription:el,itemsToPublish:to,libraryModalSessionId:m,moveInformation:r,hubFileId:e||void 0,firstDraftVariablesForTheme:tf,publishScope:e1,localAssetsWithDenormalizedPublishInfo:eU.data??{},publishAsFirstDraftKit:tv,isDirectGenCompatible:tI}))}},[ew,tE,e5,tg,h,el,to,e1,eB,eU.data,eV,eH,ez,eF,ex,eM,tn,tf,m,tv,tI]),tN=a.useCallback(()=>{tv&&h(D.iA({publishAsFirstDraftKit:tv,isDirectGenCompatible:tI,firstDraftVariablesForTheme:tf}))},[h,tf,tI,tv]),tL=(0,F.JT)(),tO=(0,i.d4)(Z.Mh),tR=(0,i.d4)(Z.Pd),{getAssetInvalidReason:tP,itemsToPublishInvalidReason:tD}=(0,ey.y)({modifiedComponents:te.productComponents.modified.wellFormed,modifiedStateGroups:te.stateGroups.modified.wellFormed,publishedHubFileComponents:tO,publishedHubFileStateGroups:tR,itemsToPublish:to,publishingMode:C}),tk=a.useMemo(()=>"loaded"!==eU.status||null!=tD,[tD,eU.status]),tM=a.useCallback(e=>{if(!ew)return;let r=A.Ay.mac?e.metaKey:e.ctrlKey;e.keyCode===T.Uz.ENTER&&r&&!tk&&(tC(),e.preventDefault(),e.stopPropagation())},[ew,tC,tk]),tF=(0,ec.z)();if(!ew)return null;let tU=C===ee.o.HUBFILE?(0,R.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,R.tx)("design_systems.publishing_modal.modal_header");if(e5.status===S.r.LOADING)return a.createElement(a.Fragment,null,a.createElement(l.bL,{manager:y,width:"lg",height:"fixed"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,tU)),a.createElement(c.nB,null,a.createElement(d.k,null)))));let tB=eS?.team,tG=e9&&Object.keys(e9).some(e=>!!to.has(e)&&!eM[e]&&e9[e]&&"MOVE"===e9[e].publishType),tV=te.productComponents.modified.wellFormed.length,tH=te.styles.modified.wellFormed.length,tz=te.variableSets.modified.wellFormed.length,tK=(0,Q.O)(ee.PW.RESPONSIVE_SET)?te.libraryAssets[ee.PW.RESPONSIVE_SET].modified.wellFormed.length:0,tW=(0,Q.O)(ee.PW.CODE_COMPONENT)?te.libraryAssets[ee.PW.CODE_COMPONENT].modified.wellFormed.length:0,tj=te.pageThumbnails.modified.length,tY=a.createElement(eE.C,{canPublishComponentsAndStateGroups:eK,closeModal:tc,disablePublishButton:tk,editingFile:ew,firstDraftValidationStatus:tv?(0,V.O)(tw):"not_applicable",hasItemsToPublish:0!==to.size,hasNewLibraryItems:eJ,hasWorkspace:e8.data?.file?.workspaceId!==null,isLoadingPublishScope:!eZ,numModifiedAssets:tz+tH+tV+tK+tW+tj,org:ej&&eY[ej]?eY[ej]:null,publish:tC,publishProgress:eL.publishProgress,publishScope:e1,publishedHubFile:tL,setPublishScope:e3,updateFirstDraftMetadata:(0,f.k)().first_draft_api_publish?tN:void 0,workspaceName:e8.data?.file?.computedWorkspace?.workspace?.name}),t$=a.createElement(a.Fragment,null,a.createElement("div",{className:eN.Kl,ref:v,style:{height:W}},a.createElement("div",{className:e6?eN.Ye:eN.dJ,style:{display:e6?"none":void 0}},a.createElement("div",{className:eN.YT},a.createElement(eg.l,null),_?a.createElement("div",{className:eN.PP},a.createElement(O.IW,{focusOnMount:!1,query:L,clearSearch:()=>en(""),onChange:en,recordingKey:"publishingModalSearchBar",withUI3Icon:!0,smallFont:!0,hasTransparentBackground:!0})):a.createElement(O.Lp,{className:eN.vD,focusOnMount:!1,query:L,clearSearch:()=>en(""),onChange:en,recordingKey:"publishingModalSearchBar"}),!L&&a.createElement("div",{className:eN.iQ},a.createElement(ea.v,{className:eN.Bl,placeholder:(0,R.t)("design_systems.publishing_modal.description_placeholder"),value:el,onChange:th,dir:"auto"}))),a.createElement(eP,{itemsToPublish:to,onLibraryItemRowCheckboxToggle:tp,onTogglePublishAll:tm,setItemsToPublish:ts,onChangeMoveOptionForItem:t_,assetQuery:L,showVariableCollectionOverview:e4,getAssetInvalidReason:tP,onToggleExpanded:eo}),!ej&&!eK&&eX>0&&a.createElement(ek,{numComponentsToUpsell:eX,isStarterLibrary:eq,team:tB}),tG&&a.createElement(eb.F,null),r&&a.createElement(eI.r,null),"INVALID_EXAMPLE"===tD&&a.createElement(eT.K,null),"DESCENDANT_CODE_INSTANCE_OR_CODE_LAYER"===tD&&a.createElement(ev.Y,null),(0,f.k)().first_draft_publish_ux&&a.createElement("div",{className:eN.H_},a.createElement(u.S,{label:a.createElement(p.J,null,"Publish as First Draft kit"),checked:tv,onChange:e=>{tT(e)}}),(0,f.k)().first_draft_legacy_publish_ux&&tv&&a.createElement(u.S,{label:a.createElement(p.J,null,"Publish as a legacy kit (no direct generation)"),checked:!tI,onChange:e=>{tS(!e)}}),a.createElement(K.o,{validationResults:tw}))),e6&&a.createElement("div",{className:eN.dJ},a.createElement(eC.Q,{variableCollection:e6.variableCollection,view:e6.view,drillUp:()=>e4(null)}))));return a.createElement(a.Fragment,null,a.createElement(l.bL,{manager:y,width:"lg",htmlAttributes:{"data-testid":"publishing-modal",onKeyDown:tM}},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,tU)),a.createElement(c.nB,{scrolling:"none",padding:0},t$),!e6&&a.createElement(c.wi,null,tY)),tF&&a.createElement("div",{className:"x1xmf6yo"},a.createElement(eR,{closeModal:tc,isCurrentFilePublished:"loaded"!==e8.status?null:!!e8.data.file?.lastPublishedAt}))))}function eR({closeModal:e,isCurrentFilePublished:r}){let n=(0,Y._G)(),o=(0,i.wA)(),s=Object.values((0,i.d4)(Z.MH)),l=Object.values((0,i.d4)(Z.dM)),d=!s.length&&!l.length,u=!1===r?{"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,R.t)("figmake.ds_imports.disabled_publish_button_tooltip"),"data-tooltip-show-above":!0,"data-tooltip-max-width":162}:d?{"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,R.t)("figmake.ds_imports.disabled_publish_button_tooltip_no_components"),"data-tooltip-show-above":!0,"data-tooltip-max-width":205}:{};return a.createElement(c.vo,null,a.createElement(c.nB,null,a.createElement("div",{className:"x19y5rnk x78zum5 x1cy8zhl xkh2ocl x1v2ro7d x1tamke2"},a.createElement("div",{className:"x78zum5 xdt5ytf x1cy8zhl x1jnr06f x1cqoux5"},a.createElement(h.e,null),a.createElement("div",{className:"xiqqdae xkezfkh"},(0,R.t)("figmake.ds_imports.publish_header")),a.createElement("p",null,(0,R.t)("figmake.ds_imports.publish_body")),a.createElement("div",{className:"x1xmf6yo"},a.createElement(m.$n,{onClick:()=>{if(n){if(y.definedAnalyticsHandler.trackDefinedEvent("ds_import.publish_button_clicked",{library_key:n}),(0,f.k)().bake_ds_import_library_guidelines){o((0,k.to)({type:es.i}));return}(0,e_.$I)({moduleToOpen:{type:"custom",module:a.createElement(el.u,null),beforeModuleOpen:()=>{(0,ep.B3)(eu.JT.PUBLISH_LIBRARY_FOR_AI),(0,ep.Ag)(eu.JT.PUBLISH_LIBRARY_FOR_AI,eo.Iq,null)},name:em.Sn.LIBRARY_CSS_EXTRACTION},trackingData:{source:"publishing_modal"}}),e()}},disabled:!r||d,...u},(0,R.t)("figmake.ds_imports.publish_button")))),a.createElement("div",{className:"x19y5rnk xb3r6kr x78zum5 x6s0dn4 xl56j7k"},a.createElement(C.oW,{src:(0,v.ck)("6da5a2fd80fe0ad897cd34ad32a53d4e6d22e289"),width:135})))))}function eP(e){let[r,n]=a.useState(!1),o=()=>{n(!r),e.onToggleExpanded()},[s,l]=a.useState(!1),c=()=>{l(!s),e.onToggleExpanded()},[d,u]=a.useState(!1),p=()=>{u(!d),e.onToggleExpanded()},m=(0,ef.Xm)(),_=(0,ef.UJ)(),h=(0,E.md)((0,Z.y6)(m)),[g,y,b,v,T,I,S,A,w,C,O,P,D,k,M,F,x,U,B,G,V,H]=a.useMemo(()=>[h.libraryAssets[ee.PW.RESPONSIVE_SET].modified.wellFormed,h.libraryAssets[ee.PW.RESPONSIVE_SET].modified.erroneous,h.libraryAssets[ee.PW.RESPONSIVE_SET].unmodified.published,h.libraryAssets[ee.PW.RESPONSIVE_SET].unmodified.unpublished,h.libraryAssets[ee.PW.CODE_COMPONENT].modified.wellFormed,h.libraryAssets[ee.PW.CODE_COMPONENT].modified.erroneous,h.libraryAssets[ee.PW.CODE_COMPONENT].unmodified.published,h.libraryAssets[ee.PW.CODE_COMPONENT].unmodified.unpublished,h.variableSets.modified.wellFormed,h.variableSets.modified.erroneous,h.variableSets.unmodified.published,h.variableSets.unmodified.unpublished,h.variableSetsWithHiddenVariables.modified.wellFormed,h.styles.modified.wellFormed,h.styles.unmodified.published,h.styles.unmodified.unpublished,h.productComponents.modified.wellFormed,h.productComponents.modified.erroneous,h.productComponents.unmodified.published,h.productComponents.unmodified.unpublished,h.pageThumbnails.modified,h.pageThumbnails.unmodified].map(r=>e.assetQuery?r.filter(r=>r.name.toLocaleLowerCase().trim().includes(e.assetQuery.toLocaleLowerCase())):r),[h.libraryAssets,h.variableSets.modified.wellFormed,h.variableSets.modified.erroneous,h.variableSets.unmodified.published,h.variableSets.unmodified.unpublished,h.variableSetsWithHiddenVariables.modified.wellFormed,h.styles.modified.wellFormed,h.styles.unmodified.published,h.styles.unmodified.unpublished,h.productComponents.modified.wellFormed,h.productComponents.modified.erroneous,h.productComponents.unmodified.published,h.productComponents.unmodified.unpublished,h.pageThumbnails.modified,h.pageThumbnails.unmodified,e.assetQuery]),z=a.useMemo(()=>new Set(k.concat(w).concat(x).concat((0,Q.O)(ee.PW.RESPONSIVE_SET)?g:[]).concat((0,Q.O)(ee.PW.CODE_COMPONENT)?T:[]).map(e=>e.node_id).concat(V.map(e=>e.node_id))),[k,w,x,g,T,V]),K=w.length>0||P.length>0||D.length>0,j=(0,i.d4)(Z.Wz),Y=(r,n,i,o)=>{for(let s of r=(0,ed.BT)(r)){let r=m?.[s.node_id],l=!1;if(s.type===ee.PW.STATE_GROUP){let e=!r||"FORCED_COPY"===r.publishType,n=(j[s.node_id]??[]).some(e=>_.has(e.node_id));l=e&&n}let c=a.createElement(eS.v,{key:s.node_id,hasChangedVariables:K,includeLeftAccessory:i,invalidReason:e.getAssetInvalidReason(s.node_id),isChecked:e.itemsToPublish.has(s.node_id),isUnmovableStateGroupWithMovableState:l,isVariableSetWithPrivateVariables:o,libraryItem:s,moveInfo:(0,$.Hb)(s.status)&&r||null,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,showVariableCollectionOverview:e.showVariableCollectionOverview}),d=o?"-hiddenVariables":"";X(c,`library-item-row-${s.node_id}${d}`,46,n)}},q=(r,n,i)=>{for(let o of r){let r={node_id:o.node_id,isPublishable:!0,status:o.status,type:"THUMBNAIL",name:o.name,page_id:o.pageID};X(a.createElement(eS.v,{key:o.node_id,includeLeftAccessory:i,invalidReason:e.getAssetInvalidReason(o.node_id),isChecked:e.itemsToPublish.has(o.node_id),isUnmovableStateGroupWithMovableState:!1,libraryItem:r,moveInfo:null,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,showVariableCollectionOverview:e.showVariableCollectionOverview}),`library-item-row-${o.node_id}`,46,n)}},X=(e,r,n,a)=>{let i=L.oz.getNextRenderedElementTop(a);a.push({parent:null,type:L.zq.ROW,top:i,element:e,key:r,height:n,sectionNameForTracking:void 0})},J=(()=>{let n=[],i=w.length+k.length+x.length+((0,Q.O)(ee.PW.RESPONSIVE_SET)?g.length:0)+((0,Q.O)(ee.PW.CODE_COMPONENT)?T.length:0)+V?.length,l=O.length+M.length+B.length+((0,Q.O)(ee.PW.RESPONSIVE_SET)?b.length:0)+((0,Q.O)(ee.PW.CODE_COMPONENT)?S.length:0)+H?.length,u=P.length+G.length+F.length+D.length+((0,Q.O)(ee.PW.RESPONSIVE_SET)?v.length:0)+((0,Q.O)(ee.PW.CODE_COMPONENT)?A.length:0),m=U.length+C.length+((0,Q.O)(ee.PW.RESPONSIVE_SET)?y.length:0)+((0,Q.O)(ee.PW.CODE_COMPONENT)?I.length:0);m&&(X(a.createElement(ew.Zq,{header:(0,R.tx)("design_systems.publishing_modal.invalid_components_with_count",{countString:a.createElement(ew.y_,{count:m})}),caretToggle:{isExpanded:d},onClick:p}),"erroneous",32,n),d&&(Y(U,n,eS.o.TARGET),Y(C,n)));let _=e.assetQuery?[...e.itemsToPublish].filter(e=>z.has(e)):[...e.itemsToPublish],E=e.assetQuery?[...e.itemsToPublish].filter(e=>!z.has(e)):[],N=_.length;if(i){let r;if(r=N===i||N>0&&N<i&&W.oV,X(a.createElement(ew.D3,{header:(0,R.tx)("design_systems.publishing_modal.changes_header_with_count",{countString:a.createElement(ew.y_,{count:N,total:i})}),checkboxValue:r,onClick:()=>{e.assetQuery?i===N?e.setItemsToPublish(new Set(E)):e.setItemsToPublish(new Set([...e.itemsToPublish,...z])):e.onTogglePublishAll()}}),"changed:header",32,n),w.length>0&&X(a.createElement("div",{className:eN.et},(0,R.tx)("design_systems.publishing_modal.variable_collections")),"variableSet:header",32,n),Y(w,n,eS.o.CHECKBOX),(0,Q.O)(ee.PW.RESPONSIVE_SET)&&(g.length>0&&X(a.createElement("div",{className:eN.et},"Site blocks"),"responsiveSet:header",32,n),Y(g,n,eS.o.CHECKBOX)),(0,Q.O)(ee.PW.CODE_COMPONENT)&&(T.length>0&&X(a.createElement("div",{className:eN.et},"Code components"),"codeComponent:header",32,n),Y(T,n,eS.o.CHECKBOX)),(0,f.k)().dse_templates_proto){let e=x.filter($.Fl);e.length>0&&(X(a.createElement("div",{className:eN.et},(0,R.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),Y(e,n,eS.o.CHECKBOX))}k.length>0&&X(a.createElement("div",{className:eN.et},(0,R.tx)("design_systems.publishing_modal.styles")),"styles:header",32,n),Y(k,n,eS.o.CHECKBOX),x.length>0&&X(a.createElement("div",{className:eN.et},(0,R.tx)("design_systems.publishing_modal.components")),"components:header",32,n),(0,f.k)().dse_templates_proto?Y(x.filter(e=>!(0,$.Fl)(e)),n,eS.o.CHECKBOX):Y(x,n,eS.o.CHECKBOX),(0,f.k)().dse_library_pg_thumbnails&&V.length>0&&(X(a.createElement("div",{className:eN.et},(0,R.tx)("design_systems.publishing_modal.page_thumbnails")),"pageThumbnails:header",32,n),q(h.pageThumbnails.modified,n,eS.o.CHECKBOX))}return l&&(X(a.createElement(ew.Zq,{header:(0,R.tx)("design_systems.publishing_modal.unchanged_header_with_count",{countString:a.createElement(ew.y_,{count:l})}),caretToggle:{isExpanded:r},onClick:o}),"unchanged:header",32,n),r&&(Y(O,n),Y(M,n),Y(B,n),(0,Q.O)(ee.PW.RESPONSIVE_SET)&&Y(b,n),(0,Q.O)(ee.PW.CODE_COMPONENT)&&Y(S,n),(0,f.k)().dse_library_pg_thumbnails&&q(H,n))),u&&(X(a.createElement(ew.Zq,{header:(0,R.tx)("design_systems.publishing_modal.hidden_header_with_count",{countString:a.createElement(ew.y_,{count:u})}),caretToggle:{isExpanded:s},onClick:c}),"private:header",32,n),s&&(X(a.createElement("div",{className:eN.m_},(0,R.tx)("design_systems.publishing_modal.these_wont_be_published")),"private:subheader",22,n),Y(P,n),Y(D,n,void 0,!0),Y(F,n),Y(G,n),(0,Q.O)(ee.PW.RESPONSIVE_SET)&&Y(v,n),(0,Q.O)(ee.PW.CODE_COMPONENT)&&Y(A,n))),n})();return a.createElement(N.O,{scrollContent:J,isList:!0,recordingKey:"publishingModalLibraryList",getViewportHeight:e=>e-200,className:eN.jG,renderEmptyState:!J.length&&e.assetQuery?()=>a.createElement(eD,{assetQuery:e.assetQuery}):void 0})}function eD({assetQuery:e}){return a.createElement("div",{className:eN.VX},(0,R.tx)("design_systems.publishing_modal.empty_search_result",{assetQuery:e}))}function ek({numComponentsToUpsell:e,isStarterLibrary:r,team:n}){let i=n?a.createElement(_.N,{newTab:!0,trusted:!0,href:`/files/upgrade-team/${n.id}`},(0,R.tx)("design_systems.publishing_modal.upgrade_team")):a.createElement(_.N,{newTab:!0,trusted:!0,href:"/files/create-team"},(0,R.tx)("design_systems.publishing_modal.create_a_professional_team")),o=r?(0,R.tx)("design_systems.publishing_modal.starter_library_upsell",{numComponents:e}):(0,R.tx)("design_systems.publishing_modal.standard_upsell",{numComponents:e,teamUpsellLink:i});return a.createElement("div",{className:eN.UX,"data-testid":"libraryPublishModalUpsell"},o)}},882009:(e,r,n)=>{n.d(r,{BT:()=>c,EH:()=>u,RR:()=>p,cw:()=>d});var a=n(660376),i=n(757685),o=n(967688),s=n(31898),l=n(720722);function c(e){return[...e].sort((e,r)=>{if(!("sortPosition"in e)||null===e.sortPosition)return 1;if(!("sortPosition"in r)||null===r.sortPosition)return -1;let n=-(0,i.Ez)(e.sortPosition,r.sortPosition);return 0!==n?n:e.node_id>r.node_id?1:-1})}function d(e){switch(e){case l.E8.CHANGED:return(0,o.tx)("design_systems.publishing_modal.modified");case l.E8.CURRENT:return(0,o.tx)("design_systems.publishing_modal.no_changes");case l.E8.DELETED:return(0,o.tx)("design_systems.publishing_modal.removed");case l.E8.NEW:return(0,o.tx)("design_systems.publishing_modal.added");case l.E8.NOT_STAGED:return"";default:(0,a.xb)(e)}}function u(e,r){return s.to({type:{type:"PublishingModal"},data:{initiallyCheckedItemIDs:e,timedOut:r}})}var p=(e=>(e.ASSET_PANEL_LIBRARY_CONTEXT_MENU="asset_panel_library_context_menu",e.COMPONENT_PUBLISH_ERROR_NOTIFICATION="component_publish_error_notification",e.FILENAME_VIEW_DROPDOWN="filename_view_dropdown",e.FULLSCREEN_MOVE_COMPONENTS_PROMPT="fullscreen_move_components_prompt",e.FULLSCREEN_OTHER="fullscreen_other",e.LIBRARY_MODAL_OVERVIEW="library_modal_overview",e.LIBRARY_MODAL_FILE_VIEW="library_modal_file_view",e.LIBRARY_MODAL_UPSELL_UI3="library_modal_upsell_ui3",e.PROPERTIES_PANEL="properties_panel",e.PUBLISH_UPSELL_MODAL="publish_upsell_modal",e.UNPUBLISHED_PREFERRED_VALUES_WARNING="unpublished_preferred_values_warning",e.TEST="test",e))(p||{})},366485:(e,r,n)=>{n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>m,VB:()=>b,dm:()=>h,l0:()=>p,lM:()=>d,wM:()=>u});var a=n(660376),i=n(186606),o=n(989232),s=n(360430),l=n(555958),c=n(720722);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let a=n,i=(0,l.ke)(e.name);i.pop(),i.forEach(e=>{let n=a.name?a.name+"/"+e:e,i=a.subfolders.find(e=>e.name===n);if(!i){let e={name:n,type:"STYLE_FOLDER",level:a.level+1,styles:[],subfolders:[],styleTypeSection:r};a.subfolders.push(e),i=e}a=i}),a.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],a=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(a)};return a(r),n}function p(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function m(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function _(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function h(e){return p(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return p(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.Oo)(e,r)&&(i.glU.deleteNode(e.node_id),(0,o.trackEvent)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,a){if(!e&&!n||!r)return!1;let i=!a&&""!==a||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&a!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!i)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(_(e)+"/").startsWith(r.name+"/")||n&&(_(n)+"/").startsWith(r.name+"/")&&!i))}function b(e,r,n,o,s,u,m){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),a=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&a.push(e)});let i=e[0],o=p(d(a,i.type===c.PW.STYLE?i.style_type:i.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,a=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?a.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!a.has(e.node_id))}([e],s),u)&&(u=v(e,s,u))}),!s)return;let _=new Set(e.map(e=>"STYLE_FOLDER"===e.type||m?function(e,r,n,i){if(!e)return i.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),a=function(e,r){let n=h(e),a=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),i=n[0];return n.forEach(e=>{e.sort_position&&i.sort_position&&e.sort_position<i.sort_position&&a.has(e.node_id)&&(i=e)}),i}(r,i),s=o.indexOf(a.node_id);return n<s?n:s-1}{let s=i.indexOf(r);if(-1!==s){let e=i.slice(s,i.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,a.KF)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=i.indexOf(e),s=i.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,i){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=i.indexOf(r),s=i.slice(e,i.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,a.KF)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(_.size>1||_.has(null))return;let g=_.values().next().value,E=u[g],y=u[g+1],b=new Map,T=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(i.glU.insertStyleBetween(r.node_id,T?.node_id||"",y?.node_id||""),T=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),a=[...n,(0,l.kH)(r.name)];if(a.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),i.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let a=[...n,(0,l.kH)(r.name)];e(r,a)})};e(r,"STYLE_FOLDER"===r.type?a:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let v=(e,r,n)=>{let a=(0,l.ke)(e.name);e.type===c.PW.STYLE&&a.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;a.length;){let e=a.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)a.pop();else break}if(s.length){let r,a=s[0];s.forEach(e=>{null!=e.sort_position&&null!=a.sort_position&&e.sort_position<a.sort_position&&(a=e)}),r=e.type===c.PW.STYLE?e:h(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];i.glU.insertStyleBetween(a.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(a),1),u.splice(u.indexOf(l)+1,0,a),u}return n}},419515:(e,r,n)=>{n.d(r,{L8:()=>x,Mz:()=>D,RL:()=>M,TM:()=>B,a7:()=>k,se:()=>U});var a=n(848318),i=n(301168),o=n(938982),s=n(673786),l=n(186606),c=n(382902),d=n(989232),u=n(996202);n(63163),n(865114);var p=n(841807),m=n(998568),_=n(810503),h=n(967688),g=n(952039),f=n(813147),E=n(353581),y=n(31898),b=n(461445),v=n(788903),T=n(672990),I=n(730143);n(424227),n(125761);var S=n(4881),A=n(277454),w=n(469787),C=n(84849),N=n(436999),L=n(720722),O=n(882839),R=n(483073);function P(){(0,m.$D)(o.e.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function D(e){let r=(0,b.Ak)(),n=(0,b.Ki)(r),{componentKeys:a,localIds:i}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,[],i,r);try{await n}catch(e){P()}}async function k(e){let r=(0,b.Ak)(),n=(0,b.Ki)(r),{componentKeys:a,stateGroupKeys:i,localIds:o}=e.reduce((e,r)=>{for(let[n,a]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...a.oldSubscribedKeysToUpdate),e.localIds.push(...a.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(a,i,o,r);try{await n}catch(e){P()}}async function M(e){let r=(0,b.Ak)(),n=(0,b.Ki)(r),{styleKeys:a,localIds:i}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(a,i,r);try{await n}catch(e){P()}}async function F(e){let r={[L.PW.CODE_COMPONENT]:[]};for(let n of e)r[n.type].push(n.key);let n=[];for(let e of Object.keys(r))if(r[e].length&&e===L.PW.CODE_COMPONENT){let a=(0,b.Ak)(),i=(0,b.Ki)(a);n.push(i),l.BXd.downloadAllSubscribedCodeInstancesForUpdate(r[e],a)}try{await Promise.all(n)}catch(e){P()}}async function x(e,r){let n=l.BXd.getTimestampForLibraryUpdateStart();(0,b.Ff)()&&await F(r),await e.dispatch(f.yA({assets:r,updateStartTime:n}))}function U(e,r=A.aD.ALL,n){let o=(0,i.wA)(),m=(0,C.bA)(r),S=(0,c.md)(I.yV),{scopedComponentUpdates:L,scopedStateGroupUpdates:x,scopedStyleUpdates:B,scopedVariableSetUpdates:G,scopedLibraryAssetUpdates:V}=(0,c.md)(m),H=(0,i.d4)(T.c),z=H.file_key,K=S?.parentOrgId?.toString(),W=H.file_team_id?.toString(),j=H.productType,{sessionId:Y}=(0,R.sz)()??{},$=(0,v.wM)(G.map(e=>e.key)),q=a.useCallback((e,n)=>{if(Object.values(O.AX).includes(e)){let r=e===O.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===O.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(O.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),X=(0,N.He)(),J=(0,w.T)(),Z=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();(0,b.Ff)()&&await D(r),await o(f.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a,subscribedLibraryKeys:X,fileSubscribedLibraryKeys:J}))},[o,e,X,J]),Q=a.useCallback(async(r,n)=>{let a=l.BXd.getTimestampForLibraryUpdateStart();(0,b.Ff)()&&await k(r),await o(f.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:a,subscribedLibraryKeys:X,fileSubscribedLibraryKeys:J}))},[o,e,X,J]),ee=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,b.Ff)()&&await M(e),await o(f.t5({styles:e,updateStartTime:r,subscribedLibraryKeys:X,fileSubscribedLibraryKeys:J}))},[o,X,J]),et=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,b.Ff)()){let r=(0,b.Ak)(),n=(0,b.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){P()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,a]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=$[(0,s.ey)(n)];r&&(a.size>0||!a.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,_.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}let n=l.CWU?.getSubscribedVariableSetsInfo(),a=new Map(n?.map(e=>[e.id.toString().split("/")[0],e.defaultModeID]));await o(f._K({variableSets:e,updateStartTime:r}));let i=l.CWU?.getSubscribedVariableSetsInfo(),c=!1;if(!i)return!1;for(let e of i)if(a.get(e.id.toString().split("/")[0])!==e.defaultModeID){c=!0;break}return c},[o,$]),er=a.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,b.Ff)()&&await F(e),await o(f.f$({assets:e,updateStartTime:r}))},[o]),en=a.useCallback(async e=>{await er([e])},[er]),ea=a.useCallback((e,r)=>{Z([e],r),d.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:z,fileParentOrgId:K,fileTeamId:W,productType:j,libraryModalSessionId:Y,components:[e.component_key].toString(),entrypoint:q(n,!1)})},[n,z,K,W,q,j,Z,Y]),ei=a.useCallback((e,r)=>{Q([e],r),d.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:z,fileParentOrgId:K,fileTeamId:W,productType:j,libraryModalSessionId:Y,stateGroups:[e.key].toString(),entrypoint:q(n,!1)})},[n,z,K,W,q,j,Q,Y]),eo=a.useCallback(e=>{ee([e]),d.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:z,fileParentOrgId:K,fileTeamId:W,productType:j,libraryModalSessionId:Y,styles:[e.key].toString(),entrypoint:q(n,!1)})},[n,z,K,W,q,j,ee,Y]),es=a.useCallback(async e=>{let r=await et([e]);d.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:z,fileParentOrgId:K,fileTeamId:W,libraryModalSessionId:Y,productType:j,variableSets:[e.key].toString(),entrypoint:q(n,!1)}),r&&o(g.F.enqueue({type:"default-mode-changed",message:(0,h.t)("variables.authoring_modal.default_mode_changed")}))},[et,z,K,W,Y,j,q,n,o]),el=(0,u.U)();return{updateComponent:ea,updateStateGroup:ei,updateStyle:eo,updateVariableSet:es,updateLibraryAsset:en,updateAll:a.useCallback(async()=>{el("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new p.jk("updateAll",{});e.start();try{let r=L.length+x.length+B.length+G.length;o(E.ni({total:r})),o(y.Ce()),d.definedAnalyticsHandler.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:z,fileParentOrgId:K,fileTeamId:W,productType:j,libraryModalSessionId:Y,components:L.map(e=>e.component_key).toString(),stateGroups:x.map(e=>e.key).toString(),styles:B.map(e=>e.key).toString(),variableSets:G.map(e=>e.key).toString(),entrypoint:q(n,!0)}),await Z(L,void 0),await Q(x,void 0),await ee(B);let a=await et(G);await er(V),o(E.kX()),a&&o(g.F.enqueue({type:"default-mode-changed",message:(0,h.t)("variables.authoring_modal.default_mode_changed")}));let i=e.stop();el("library.update_all.success",{elapsedMs:i},{forwardToDatadog:!0})}catch(r){throw o(E.V2()),el("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}},[Z,L,V,er,Q,x,ee,B,et,G,z,K,W,j,q,n,o,el,Y])}}function B(e,r){let{updateComponent:n,updateStateGroup:o}=U(e,void 0,r),s=(0,i.wA)(),c=a.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(f.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:a.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,S.rt)(!1)},516122:(e,r,n)=>{n.d(r,{$3:()=>x});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(410725),d=n(238462),u=n(345964),p=n(178806),m=n(850426),_=n(967688),h=n(220576),g=n(584026),f=n(31898),E=n(957872),y=n(863270),b=n(587745),v=n(381673),T=n(249726),I=n(730143),S=n(672940),A=n(209595),w=n(318147),C=n(55116),N=n(253332),L=n(407638),O=n(679996),R=n(520779),P=n(386252),D=n(446951),k=n(882009),M=n(274016),F=n(175051);let x=(0,D.Ju)(function(e){let r=(0,I.q5)(),{team:n,afterFileMove:o}=e,s=(0,i.wA)(),l=(0,S.FC)(),c=(0,A._6)(),d=()=>{s(f.to({type:F.dD,data:{entrypoint:k.RR.PUBLISH_UPSELL_MODAL}}))},u=(0,N.w5)(n);return r?n&&(0,L.canEditTeam)(n.id,l)&&!u?a.createElement(M.bP,{team:n,resource:R.Bi.TEAM_LIBRARY,action:P.pE.PUBLISH_COMPONENTS,editorType:w._Y.DESIGN,onStarterPlanCtaClick:d,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:r.key,nodeId:"fullscreen"===c.view&&c.nodeId||""},upsellSource:O.b.LIBRARY_UPSELL_BADGE}):a.createElement(U,{team:n,afterFileMove:o,onStylesClick:d}):a.createElement(a.Fragment,null)},"publish-components-upsell");function U(e){let r=(0,h.R)(),n=o.hS({onClose:d.lQ,open:!0,preventUserClose:!0}),p=(0,i.d4)(e=>e.currentUserOrgId),{onStylesClick:m}=e,_=(0,c.Rs)(C.x8f,{}),g=(0,I.q5)(),f=(0,N.w5)(e.team),E=a.useMemo(()=>_.transform(e=>e.currentUser.teamEditRoles.some(e=>{let n=e.team,a=n?.currentPlanUser,i=r?a?.seatTypeLicenseTypes?.includes(w.G_.DESIGN):a?.designPaidStatus!==w.dQ.RESTRICTED;return n&&[w.Ag.PRO,w.Ag.STUDENT].includes(n.plan.tier)&&!n.deletedAt&&i})).unwrapOr(!1),[_,r]),y=!!p,b=g&&(0,T.jd)(g.project),S=(0,A._6)();if(!g)return a.createElement(a.Fragment,null);if("loaded"!==_.status)return a.createElement(s.bL,{manager:n,width:"sm"},a.createElement(l.vo,null,a.createElement(l.nB,null,a.createElement(u.qc,null))));if(E||y||b)return a.createElement(B,{isFileInTeamWithProFeatures:f,isFileInOrg:y,team:e.team,afterFileMove:e.afterFileMove,onStylesClick:m});let L="fullscreen"===S.view?S.nodeId??"":void 0;return void 0!==L?a.createElement(M.bP,{team:e.team,resource:R.Bi.TEAM_LIBRARY,action:P.pE.PUBLISH_COMPONENTS,editorType:w._Y.DESIGN,onStarterPlanCtaClick:m,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:g.key,nodeId:L},upsellSource:O.b.LIBRARY_UPSELL_BADGE}):a.createElement(a.Fragment,null)}function B(e){let r=(0,i.wA)(),n=()=>{r(f.Ce())},c=o.hS({onClose:n,open:!0}),d=(0,I.q5)(),u=(0,i.d4)(e=>d?(0,b.up)(d,e.repos):null);if(!d)return a.createElement(a.Fragment,null);let h=(0,_.tx)("upsell.move_file_publish.move_file_to_team_to_publish"),v=(0,_.tx)("upsell.move_file_publish.move_file_to_pro_team_to_publish"),T=(0,_.tx)("upsell.move_file_publish.move_file_to_project_to_publish"),S=(0,_.t)("upsell.move_file_publish.move_to_team_to_publish_library_assets"),A=(0,_.t)("upsell.move_file_publish.move_to_project_to_publish_library_assets"),w=v;e.isFileInOrg?w=h:e.isFileInTeamWithProFeatures&&(w=T);let C=e.isFileInTeamWithProFeatures?(0,_.tx)("upsell.move_file_publish.move_to_project"):(0,_.tx)("upsell.move_file_publish.move_to_team");return a.createElement(y.fu,{name:"MoveFilePublishUpsell"},a.createElement(s.bL,{manager:c,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,e.isFileInTeamWithProFeatures?A:S)),a.createElement(l.nB,null,w),a.createElement(l.wi,null,a.createElement(l.jk,null,a.createElement(p.$z,{onClick:n,trackingProperties:{trackingDescriptor:E.c.CANCEL},variant:"secondary"},(0,_.tx)("upsell.shared.cancel")),a.createElement(m.pW,{href:"#",onClick:()=>{let{afterFileMove:n}=e;(0,g.h)({key:d.key,name:d.name,folder_id:d.folderId,team_id:d.teamId,editor_type:d.editorType,parent_org_id:d.parentOrgId},u,r,{handlesVisualBell:!1,callback:n},{isPublishing:!0})}},C))))))}},84145:(e,r,n)=>{n(848318),n(382902),n(989232),n(615233),n(709292),n(730143),n(125761)},953413:(e,r,n)=>{n.d(r,{RX:()=>u}),n(848318);var a=n(186606),i=n(19180),o=n(382902);n(349048),n(317720),n(196008),n(810503),n(730143),n(806349);var s=n(430385),l=n(429958),c=n(608323),d=n(55116);(0,o.Iz)(e=>(0,l.x8)({fileKey:e})),(0,o.Iz)(e=>(0,o.eU)(r=>{let n={};for(let a of e)n[a]=r(d.u6n.Query({fileKey:a}));return n}),s.lu),(0,o.Iz)(e=>(0,o.eU)(r=>{let n={};for(let a of e)n[a]=r(d.zkh.Query({libraryKey:a}));return n}),c._f);function u(e){if(!(0,i.k)().dse_module_publish)return!1;switch(e.moduleSource){case a.QjO.EDITOR_TEMPLATE:return!1;case a.QjO.SLIDES_TEMPLATE:return!0;case a.QjO.SITES_TEMPLATE:return!!(0,i.k)().sites;case a.QjO.LITE_TEMPLATE:return!!(0,i.k)().cooper}}},978819:(e,r,n)=>{n.d(r,{B:()=>d});var a=n(848318),i=n(891627),o=n(301168),s=n(453370),l=n(335744),c=n(442022);function d(e){let r=a.useId(),n=e||r,d=(0,o.wA)(),u=(0,o.d4)(e=>e.dropdownShown?.type===n),p=a.useMemo(()=>document.createElement("div"),[]);a.useEffect(()=>(document.body.appendChild(p),()=>{document.body.removeChild(p)}),[p]);let m=a.useRef(null),_=m.current?.getBoundingClientRect()||null,h=e=>{e.callback&&e.callback("",null,d)};return{toggleDropdown:()=>{u?d(s.oB()):d(s.j7({type:n}))},dropdownTargetRef:m,Dropdown:function(e){let r=(0,l.UV)(e);return a.createElement(a.Fragment,null,u&&_&&i.createPortal(a.createElement(c.j,{parentRect:_,dispatch:d,onSelectItem:h,...e,...r}),p))},isDropdownShown:u}}},188775:(e,r,n)=>{n.d(r,{Nz:()=>q});var a=n(848318),i=n(301168),o=n(660376),s=n(186606),l=n(382902),c=n(536384),d=n.n(c),u=n(740705),p=n(978877),m=n(989232),_=n(315933),h=n(865114),g=n(656329),f=n(116848),E=n(753269),y=n(61503),b=n(140357),v=n(967688),T=n(696786),I=n(70217),S=n(659502),A=n(601167),w=n(355755),C=n(730143),N=n(493228),L=n(334074),O=n(209595);n(861673),n(592374),n(11594),n(231563);var R=n(566287),P=n(268170),D=n(514045),k=n(944616),M=n(495607),F=n(784372),x=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(x||{});let U=(e,r)=>{let n=(0,A.ni)(),i=(0,y.Av)(),o=(0,S._o)(),s=(0,w.p8)("showUi"),l=(0,O._6)(),c="prototype"===l.view&&"slides"===l.file.editor_type,d=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:a,toolbarHeight:i,editorBannerHeight:o}){return(2===a?r?0:i:e?g.Ay.isIpadNative||(0,g.FP)()&&n?(0,R.VA)():0:n||g.Ay.isIpadNative?i:0)+o}({isUI3:(0,T.GS)()&&!c,prototypeHeaderHidden:r,showUi:s,style:e,toolbarHeight:i,editorBannerHeight:o});return a.useMemo(()=>({left:n.x,top:d,width:n.width}),[n,d])},B=(e,r)=>{let n;let i=function(e){let r;let n=(0,A.ni)(),i=(0,S._o)(),o=(0,T.GS)(),s=(0,w.p8)("showUi"),l=0;o?(g.Ay.isIpad||(0,g.FP)())&&(l=(0,R.VA)()):g.Ay.isIpadNative&&(l=s?0:(0,R.VA)());let c=n.y+i+l;switch(e){case 1:r=4;break;case 2:r=c;break;case 3:r=0;break;case 0:r=10}return a.useMemo(()=>({left:n.x,top:c,width:n.width-(0===e?10:0),height:n.height-i-r-l}),[n,e,c,r,i,l])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:if((0,g.FP)()){n={};break}n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return a.useMemo(()=>({style:{...i,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,i,n,o])};function G(e){let{children:r,prototypeHeaderHidden:n}=e,i=(0,O.z3)(),o=0;"prototype"===i?o=2:g.Xb&&(o=1);let s=U(o,n||!1),l=2===o?F.Y$:void 0,c=2===o&&n?F.Fd:void 0;return a.createElement("div",{className:d()(F.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function V(){let{style:e,borderInfo:r}=a.useContext(k.h);return e={...e,borderColor:r.color},a.createElement("div",{"data-testid":"viewport-frame",className:d()(F.KM),style:e})}function H(){let{style:e,borderInfo:r}=a.useContext(k.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${M.Bn}s`},a.createElement("div",{className:F.KM,style:e})}function z(e){let{children:r,colorOverride:n,overlayStatus:i}=e,o=(0,N.$0)(),s=(0,N.dR)(),l=(0,N.Ww)(),c=(0,O._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:g.Xb&&(d=1);let u=B((()=>{if(n)return n;if(!i)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=i;return"none"!==e?"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return a.createElement(k.h.Provider,{value:u},r)}var K=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.NONE="none",e))(K||{}),W=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(W||{});function j(){return"prototype"!==(0,O.z3)()&&!(0,g.FP)()}function Y(e,r,n,i){let o=(0,h.ZC)(e),s=(0,h.ZC)(r),l=a.useRef(performance.now());return a.useEffect(()=>{if("presenting"===e){let e=_.sn.tryStop("start_spotlight");e&&(0,m.trackEvent)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("pending_auto_follow"===r){let e=_.sn.tryStop("join_spotlight");e&&(0,m.trackEvent)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=_.sn.tryStop("start_following");e&&(0,m.trackEvent)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,i]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function $(e){let{multiplayer:r,prototypeHeaderHidden:n,isTabAccessible:i=!1}=e,c=(0,N.Ww)(),d=(0,N.dR)(),m=(0,N.$0)(),_=(0,N.y)(),h=(0,C.q5)(),y=(0,L.T)(),T=(0,f.y7)(),S=(0,f.oJ)(),A=(0,f.$)(),[w,R]=a.useState(!1);a.useEffect(()=>{R(!1)},[d?.sessionID]),a.useEffect(()=>{m?.sessionID===d?.sessionID&&R(!1)},[m?.sessionID,d?.sessionID]);let{isAutoFollowPending:k,cancelAutoFollowCallback:F,completeAutoFollowCallback:x,observeCurrentPresenter:U,autoFollowType:B,autoFollowDelayMs:V}=(0,N.oW)(e),{isWaitingForFirstFollower:K,stopPresenting:W}=function(e){let[r,n]=a.useState(!1),i=e.followerCount,[o,c]=(0,l.fp)(E.Dv);0===i||r||n(!0);let d=(0,f.jA)(e)||o;(0,f.jA)(e)&&o&&c(!1),!d&&r&&n(!1);let u=d&&0===i&&!r,p=(0,L.T)(),m=(0,O.z3)(),_=a.useCallback(()=>{p(L.N.STOP),"prototype"===m?b.hk()?.stopPresenting():s.h3O.stopPresenting()},[p,m]),h=a.useCallback(()=>!!u&&(_(),!0),[_,u]);return(0,I.O1)(h,I.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:u,stopPresenting:_}}(r),$=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:a}=e;return(0,f.jA)(r)||a?"presenting":n?"showing_explainer":(0,f.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,l.md)(E.ah),isPendingPresenting:(0,l.md)(E.Dv)}),q=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:a,suppressRejoinPrompt:i}=e;return n?"pending_auto_follow":(0,f.L3)(r)?"following":a&&!i?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:k,presenterUser:d,suppressRejoinPrompt:w}),X=a.useRef(r.allUsers.length);X.current=r.allUsers.length;let{statusChangedAt:J}=Y($,q,h,X),[Z,Q]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];default:(0,o.xb)(e)}}($,q),ee=a.useCallback(()=>{R(!0),F(),y(L.N.IGNORE)},[F,y]),et=B===N.D_.INITIAL,er=a.useCallback(()=>"pending_auto_follow"===Q&&!!k&&B===N.D_.INITIAL&&(F(),!0),[B,F,k,Q]);(0,I.O1)(er,I.KD.MULTIPLAYER_SPOTLIGHT);let en=j(),ea="showing_explainer"===Z,ei="none"!==Z,eo="none"!==Q,es=["presenting","prompt_to_accept_nomination","showing_explainer"].includes(Z)||["following"].includes(Q),[el,ec]=(0,l.fp)(E.uc);return es!==el&&ec(es),a.createElement(z,{overlayStatus:{self:Z,others:Q}},a.createElement(u.N,null,es&&a.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:M.Bn}},a.createElement(H,null))),a.createElement(u.N,null,ei&&a.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:M.Bn}},a.createElement(G,{prototypeHeaderHidden:n},(()=>{switch(Z){case"presenting":if(null===c)return null;if(K){let e=(0,v.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,v.t)("collaboration.spotlight.bell.presenter.cancel");return a.createElement(D.Y,{color:"brand",message:{text:e},renderKey:`${c.sessionID}`,progressBar:!0,progressBarDurationMs:N.S$,autoHide:!1,button:{text:r,onClick:W},isTabAccessible:i})}return a.createElement(D.Y,{color:"brand",message:{text:a.createElement(P.s,{count:r.followerCount})},renderKey:`${c.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,v.t)("collaboration.spotlight.bell.presenter.stop"),onClick:W},docked:en,isTabAccessible:i});case"prompt_to_accept_nomination":if(!c||!_)return null;return a.createElement(D.Y,{autoHide:!1,button:{text:(0,v.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{T(r)}},color:"brand",isTabAccessible:i,message:{text:(0,v.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:_.name})},onCloseCallback:()=>{S(c.sessionID,r)},progressBar:!1,progressBarDurationMs:0,renderKey:`${c.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"showing_explainer":if(null===c)return null;let e=d?(0,v.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:d?.name}):(0,v.tx)("collaboration.spotlight.bell.explainer");return a.createElement(D.Y,{autoHide:!1,button:null,color:"brand",docked:!1,isTabAccessible:i,message:{text:e},progressBar:!1,progressBarDurationMs:0,renderKey:`${r.sessionID}`,useSecondaryColor:!0});case"none":return null;default:(0,o.xb)(Z)}})()))),a.createElement(u.N,null,eo&&a.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:M.Bn}},a.createElement(G,{prototypeHeaderHidden:n},(()=>{switch(Q){case"pending_auto_follow":{if(!d)return null;let e=d.name,r=et?{text:(0,v.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:x}:{text:(0,v.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=et?{text:(0,v.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ee}:null;return a.createElement(D.Y,{color:d?.color,message:r,renderKey:`${d.sessionID}`,progressBar:et,progressBarDurationMs:V||0,autoHide:!1,button:n,ghost:ea,isTabAccessible:i})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===m)return null;let n=m?.name||"",o=e?(0,v.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,v.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),s={text:e?(0,v.t)("collaboration.spotlight.bell.stop_following"):(0,v.t)("collaboration.spotlight.bell.stop"),onClick:()=>A(r)};return a.createElement(D.Y,{autoHide:!g.Xb,button:s,color:m?.color,docked:en,ghost:ea,isTabAccessible:i,message:{text:o},progressBar:!1,progressBarDurationMs:0,renderKey:`${r.observingSessionID}`})}case"prompt_to_rejoin":let e=()=>(0,f.KI)(U,r,"Spotlight Rejoined",J);if(null!==m||null===d)return null;let n=(0,v.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:d.name}),s=(0,v.t)("collaboration.spotlight.bell.follower.follow");return a.createElement(D.Y,{autoHide:!1,button:{text:s,onClick:e},color:d?.color,ghost:ea,isTabAccessible:i,message:{text:n,onClick:e},onCloseCallback:()=>(0,f.KI)(()=>R(!0),r,"Spotlight Rejoin Dismissed",J),progressBar:!1,progressBarDurationMs:0,renderKey:`${d.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"none":return null;default:(0,o.xb)(Q)}})()))))}function q({prototypeHeaderHidden:e,isTabAccessible:r=!1}){let n=(0,i.d4)(({multiplayer:e})=>e),o=(0,N.HG)(),s=(0,N.By)(),l=-1!==n.observingSessionID;return((0,N.VA)({multiplayer:n}),(0,N.Pi)({multiplayer:n}),s)?null:o?a.createElement($,{multiplayer:n,prototypeHeaderHidden:e,isTabAccessible:r}):l?a.createElement(X,{prototypeHeaderHidden:e,isTabAccessible:r}):null}function X(e){let{prototypeHeaderHidden:r,isTabAccessible:n=!1}=e,o=(0,N.$0)(),s=(0,C.q5)(),l=(0,i.d4)(e=>e.multiplayer.allUsers.length),c=a.useRef(l);c.current=l,Y("none","following",s,c);let d=`${o?.sessionID}`,u=a.useMemo(()=>{let e=o?.name||"";return{text:(0,v.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[o]),p=j();return null===o?null:a.createElement(z,null,a.createElement(V,null),a.createElement(G,{prototypeHeaderHidden:r},a.createElement(D.Y,{color:o?.color,message:u,renderKey:d,autoHide:!g.Xb,progressBar:!1,progressBarDurationMs:0,button:null,docked:p,isTabAccessible:n})))}},861673:(e,r,n)=>{n.d(r,{$i:()=>l,a8:()=>s});var a=n(186606),i=n(382902),o=n(592374);(0,i.eU)(2e3),(0,i.eU)(2e3),(0,i.eU)(""),(0,i.eU)(0),(0,i.eU)(!1),(0,i.eU)(null);let s=(0,i.eU)(o.h0.AWAITING_PLAYBACK);(0,i.eU)(a.z7E.DEFAULT),(0,i.eU)(o.zu.DEFAULT),(0,i.eU)(void 0);let l=(0,i.eU)(o.JJ.CANVAS);(0,i.eU)(0)},592374:(e,r,n)=>{n.d(r,{JJ:()=>i,h0:()=>d,zu:()=>o});var a=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(a||{}),i=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(i||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),p=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(p||{}),m=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(m||{}),_=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(_||{})},11594:(e,r,n)=>{n(320953),n(810503),n(261357),n(215148),n(592374),n(234505)},309109:(e,r,n)=>{n(848318),n(382902),n(206639),n(79113),n(297638),n(752181),n(318147),n(361860),n(861673),n(592374),n(11594),n(938674),n(234505)},675172:(e,r,n)=>{n(848318),n(382902),n(536384),n(264478),n(297638),n(178806),n(967688),n(925085),n(957872),n(863270),n(696786),n(752181),n(526594),n(293529),n(861673),n(592374),n(593713),n(533978),n(404712)},13635:(e,r,n)=>{n.d(r,{q:()=>s});var a=n(476254),i=n(458608);n(410725),n(730143);var o=n(55116);function s(){return new Promise((e,r)=>{let n=a.D.getState().openFile?.key;if(!n)return e(!1);(0,i.Ek)(o.J2w,{fileKey:n}).then(r=>{let n=r.file?.orgPublicInfo;return e(!!n?.cursorChatDisabledAt)})})}},523112:(e,r,n)=>{n(848318),n(301168);var a=n(186606),i=n(410441);n(615233),n(230618),n(967688),n(696786),n(807720),n(885432),n(236880);var o=n(27776),s=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(s||{});let l={[a.NLJ.SELECT]:"f7ae268fa093b5f690abfe5cc56cccfa8c2d4734",[a.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[a.NLJ.DROPPER_COLOR]:"d8d06a74b0182fb6948c55373e8c68d602dd9a78"},c={[a.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[a.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[a.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},d=((0,i.hG)(o.xEX),e=>{switch(e){case Tool.SELECT:return t("fake_cursor.select_cursor");case Tool.HAND:return t("fake_cursor.hand_cursor");case Tool.DROPPER_COLOR:return t("fake_cursor.eyedropper_cursor");default:return t("fake_cursor.cursor")}})},361860:(e,r,n)=>{var a={};n.r(a),n.d(a,{GLARE_ANIMATION:()=>k,GRAY_BACKGROUND:()=>D,NONE:()=>F,ORANGE_GRADIENT:()=>P,PINK_GRADIENT:()=>O,animateBg:()=>R,glareAnimation:()=>M});var i=n(848318);n(301168);var o=n(730455),s=n(186606),l=n(19180),c=n(536384),d=n.n(c),u=n(315933),p=n(206639);n(79113),n(813009),n(146968),n(995218);var m=n(696786);n(807720),n(732545),n(516404),n(601167),n(286003),n(127340),n(355755),n(493228),n(554326),n(314774),n(276595);var _=n(615233),h=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(h||{});let g=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]),f=new Map([[(0,_.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,_.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,_.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,_.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,_.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,_.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,_.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,_.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,_.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,_.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);var E=(e=>(e[e.Standard=0]="Standard",e))(E||{});let y=new Map;f.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,y)});var b=n(993942),v=n(382902),T=n(418193);n(29188);var I=n(603771);n(476254),n(115088);var S=n(996202);n(959750),n(463117),(0,v.eU)(!1),(class e extends I.w{constructor({startingRelativePosition:r,startingRotation:n,position:a,viewportZoomScale:i,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=a,this.viewportZoomScale=i,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},p={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},m=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${p.transform}`})),_=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*_,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,p],timing:{delay:12*_,duration:4*_,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:m,timing:{delay:16*_,duration:4*_,easing:`steps(${m.length})`}},{keyframes:[p,p],timing:{delay:20*_,duration:18*_}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,a=c(),o=(a.position.x-this.position.x)*i,s=(a.position.y-this.position.y)*i,l=a.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let A=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let a="number"==typeof n?n:this.getDeltaTime();if(a<=0)return;this.mouseX=r.x,this.mouseY=r.y;let i=1,o=(this.mouseX-this.lastMouseX)/a,s=(this.mouseY-this.lastMouseY)/a;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;i=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=a/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=a/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,p=u&&i<0,m=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&p&&m&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-a/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=a/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(a)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function w(e,r){let n=3*e,a=3*e,i=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(C(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*a)-a/2,l=Math.floor(Math.random()*i)-i/2;o.push(C(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function C(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function N(e){return!!e.length&&e.some(e=>"running"===e.playState)}function L(e){let{content:r,children:n}=e,[a,o]=(0,i.useState)(0),s=(0,i.useRef)(0),l=(0,i.useRef)([]),c=i.useRef(null),[d,u]=(0,i.useState)([]),p=(0,S.am)(),m=(0,i.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),_=(0,i.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&_(250),Math.max(e-1,0)))},e)},[]);return(0,i.useEffect)(()=>{o(m),_(1e3)},[m,_]),(0,i.useEffect)(()=>{if(!c.current)return;a>1&&!l.current.length&&(l.current=[w(1,c.current),w(1.5,c.current),w(2,c.current),w(2.5,c.current),w(3,c.current)]);let e=N(l.current);if(a>1){let e=Math.min(a-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=N(l.current);!e&&r&&p("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[a,p]),i.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}A.WIGGLE_MODE_DEACTIVATION_TIME=6,A.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,A.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,A.WIGGLE_MODE_MOUSE_RESET_TIME=.6,A.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,A.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,A.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,A.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,A.WIGGLE_MODE_REPLENISH_SHAKES=3.5,A.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,A.WIGGLE_MODE_SHAKE_RESET_TIME=.5,A.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,T.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(360854),h.NONE;n(885432),n(967688),n(235252),n(763610),n(166758);let O="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",R="cursor_chat_emotes--animateBg---meP2",P="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",D="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",k="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",M="cursor_chat_emotes--glareAnimation--x1WJw",F="cursor_chat_emotes--NONE---FYHz";n(728075);var x=n(938674);n(13635);var U=n(660376);n(656329),n(523112);var B=n(399286);function G(e,r,n){let a=s.z7E[r];return n?(0,_.CZ)(`multiplayer_cursors/ui3/${a}/${e.substring(1)}.png`):(0,_.CZ)(`multiplayer_cursors/v1/${a}/${e.substring(1)}.png`)}function V(e,r){if(r){let r=B.JR[e.substring(1)]??B.JR[B.p4];return`data:image/png;base64, ${r}`}let n=B.De[e.substring(1)]??B.De[B.p4];return`data:image/png;base64, ${n}`}function H({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:a,aboutToHide:o=!1}){return i.createElement("div",{className:d()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},i.createElement("div",{style:{opacity:n?"0":"1"},className:d()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":a})},i.createElement(j,{color:e})))}let z="#FFFFFF",K=new Set([z,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function W({color:e}){let[r,n]=i.useState(!1);if(!K.has(e))return(0,U.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),i.createElement(i.Fragment,null);let a=G(r?z:e,s.z7E.HIGH_FIVE,!1);return i.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:a,alt:"",onError:()=>n(!0)})}function j({color:e}){return i.createElement(W,{key:e,color:e})}var Y=n(410441);n(67188),n(574422),n(614092),n(956755);var $=n(27776);(0,Y.hG)($.tui);let q=(0,i.memo)(function({name:e,color:r,cursorType:n,chatMessage:c,isHighFiving:_,focusOnTextCursor:f,temporarilyHide:E,isCursorHandOnRight:y,isCursorPointingRight:v,editorType:T,isCursorAndChatAreaOffscreen:I,sessionId:S,prefersReducedMotion:A,isHighFivingSupported:w,useChatAnimation:C,disableMessageFade:N,isStaticView:O,isHoveringWidgetWithHiddenCursors:R}){let P=(0,o.GA)(),D=(0,m.GS)(),[k,M]=(0,i.useState)(1),F=(0,i.useMemo)(()=>(0,p.GL)(r),[r]),U=(0,l.k)().fpl_enhanced_contrast_toggle&&P.enhancedContrast?(0,p.En)(r):r,[B,z]=(0,i.useState)(h.NONE),K=()=>z(h.NONE),[W,j]=(0,i.useState)(O),[Y,$]=c||[];(0,i.useEffect)(()=>{let e,r;return Y||$?(j(!0),M(1)):(j(!1),K()),N||(e=setTimeout(()=>{M(0)},5e3),r=setTimeout(()=>{j(!1),K()},8e3)),()=>{M(0),j(!1),K(),clearTimeout(e),clearTimeout(r)}},[Y,$,N]);let q="whiteboard"===T;(0,i.useEffect)(()=>{if(q&&Y&&!I)for(let e of g.keys()){let r=g.get(e);r&&function(e,r){var n;let a=e.toLocaleLowerCase(),i=!(1===(n=a.charAt(a.length-r.length-1)).length&&/[A-Za-z]/.test(n));return a.endsWith(r)&&i}(Y,e)&&z(r)}},[Y,I,q]);let X=i.useRef(null);(0,i.useEffect)(()=>{if(X.current&&X.current.innerText===Y){let e=u.sn.tryStop(`view_cursor_chat_message_${S}_${Y}`);e&&u.Vq.add("view_cursor_chat_message",e)}},[Y,X,S]);let J=(0,l.k)().cursor_bot&&v&&n===s.z7E.DEFAULT,Z=n===s.z7E.PEN,Q=i.createElement("div",{className:d()({[x.iU]:W,[x.VW]:!W,[x.S8]:D&&!Z,[x.z8]:J}),style:{color:F}},i.createElement("div",{className:W?x.bu:x.iY,style:{opacity:W?F===p.e3?.8:.5:1},dir:"auto"},e),W&&i.createElement("div",{className:x.Lo,style:{opacity:F===p.YN?.8*k:k,boxShadow:q?void 0:`2px 4px 8px ${U}40`},dir:"auto"},$&&i.createElement("div",{className:$.length>0&&(Y?.length??0)>0?x.vD:""},$),Y&&i.createElement("div",{ref:X},Y)),i.createElement("div",{className:`${x.hD} ${a[B]}`,style:"NONE"!==B?{background:U,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:U},onAnimationEnd:()=>K()}));return f?null:i.createElement("div",{className:x.Dy,style:{opacity:R?0:1},"data-testid":`multiplayer-cursor-${S}`},i.createElement("div",{className:x.or},w?i.createElement(i.Fragment,null,i.createElement("div",{className:x.p},i.createElement(H,{color:r,isHighFiveHandOut:_,temporarilyHide:E,isCursorHandOnRight:y})),i.createElement("img",{className:d()({[x.u0]:!0,[x.Bj]:!0,[x.DE]:_,[x.z8]:J}),src:G(r,_?s.z7E.DEFAULT:n,D),alt:`${_?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=V(r,D)}})):i.createElement("img",{className:d()({[x.u0]:!0,[x.z8]:J}),src:G(r,n,D),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=V(r,D)}}),S&&i.createElement(b.o,{sessionId:S})),(C||q)&&!A?i.createElement(L,{content:Y||""},Q):Q)}),X=i.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:a}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return i.createElement("div",{style:o},a)}),J=(e,r,n)=>{let a=React.useRef(null);a.current=e?.sessionId??a.current,useEffect(()=>{a.current&&n&&cursorChatTracker?.setOtherUserChattingState(a.current,r)},[n,r]),useEffect(()=>(a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1),()=>{a.current&&cursorChatTracker?.setOtherUserChattingState(a.current,!1)}),[])}},83948:(e,r,n)=>{n.d(r,{O:()=>o}),n(848318),n(301168),n(622518),n(93275);var a=n(410441),i=(n(857607),n(781239),n(454805),n(967688),n(244534),n(498709),n(372566),n(696786),n(959750),n(753644),n(614892),n(847526),n(27776));n(916167);let o="nudge-amount";(0,a.hG)(i.md8)},996306:(e,r,n)=>{n.d(r,{Bf:()=>tT,UB:()=>tS,xH:()=>tI});var a,i=n(848318),o=n(301168),s=n(660376),l=n(674477),c=n(33729),d=n(799436),u=n(76065),p=n(944933),m=n(308839),_=n(624159),h=n(742859),g=n(111646),f=n(896886),E=n(682853),y=n(2655),b=n(713188),v=n(344908),T=n(146544),I=n(41263),S=n(672189),A=n(61865),w=n(618966),C=n(687593),N=n(428452),L=n(621605),O=n(256970),R=n(577972),P=n(521699),D=n(666047),k=n(856144),M=n(878840),F=n(98900),x=n(453619),U=n(213493),B=n(813924),G=n(424342),V=n(618280),H=n(875900),z=n(419306),K=n(276082),W=n(30552),j=n(731184),Y=n(234188),$=n(539616),q=n(923380),X=n(407284),J=n(424702),Z=n(436183),Q=n(147065),ee=n(265443),et=n(326499),er=n(264318),en=n(75476),ea=n(887287),ei=n(310674),eo=n(229382),es=n(166116),el=n(791881),ec=n(85320),ed=n(186606),eu=n(746937),ep=n(195124),em=n(768618),e_=n(19180),eh=n(481009),eg=n(418193),ef=n(536384),eE=n.n(ef),ey=n(720522),eb=n(642014),ev=n(967688),eT=n(871114),eI=n(882392),eS=n(552807),eA=n(17753),ew=n(444441),eC=n(749211),eN=n(835890),eL=n(596224),eO=n(742489),eR=n(622978),eP=n(587919),eD=n(215707),ek=n(686891),eM=n(415893),eF=n(159584),ex=n(397501),eU=n(575425),eB=n(9818),eG=n(91747),eV=n(559481),eH=n(942826),ez=n(108557),eK=n(6756),eW=n(868552),ej=n(253654),eY=n(839808),e$=n(338929),eq=n(787218),eX=n(41859),eJ=n(678540),eZ=n(653624),eQ=n(495576),e0=n(973603),e1=n(204081),e2=n(60943),e3=n(509426),e8=n(914019),e6=n(248016),e4=n(785289),e5=n(711700),e7=n(23832),e9=n(98246),te=n(492610),tt=n(594352),tr=n(592428),tn=n(274771),ta=n(287502),ti=n(127122),to=n(448969),ts=n(734454),tl=n(559949),tc=n(270844),td=n(51159),tu=n(372209),tp=n(253373),tm=n(704796),t_=n(857247),th=n(160761),tg=n(636462),tf=n(939968),tE=n(586337),ty=n(660901);let tb=new eh.q(750);function tv(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return ti.A;case"CENTER":return ta.A;case"MAX":return to.A;default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return te.A;case"CENTER":return e9.A;case"MAX":return e7.A;default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return tr.A;case"CENTER":return tt.A;case"MAX":return tn.A;default:(0,s.xb)(e.stackCounterAlignItems)}}return eW.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,a,o){let en={src:e2.A,tooltip:""};if(!e)return en;let ea=e.type;switch((0,ep.GI)(e)&&(ea="STAMP"),ea){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:a?i.createElement(E.C,null):eG.A,tooltip:(0,ev.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:a?i.createElement(y.q,null):eU.A,tooltip:(0,ev.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:a?i.createElement(b.j,null):eB.A,tooltip:(0,ev.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:a?i.createElement(v.p,null):eV.A,tooltip:(0,ev.t)("layer_icon.tooltip.exclude")};default:return en}case"VECTOR":return{src:a?i.createElement(T.g,null):tf.A,tooltip:(0,ev.t)("layer_icon.tooltip.vector")};case"STAR":return{src:a?i.createElement(I.j,null):tl.A,tooltip:(0,ev.t)("layer_icon.tooltip.star")};case"LINE":return{src:a?i.createElement(S.z,null):eX.A,tooltip:(0,ev.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:a?i.createElement(A.H,null):ez.A,tooltip:(0,ev.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:a?i.createElement(w.M,null):e2.A,tooltip:(0,ev.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:a?i.createElement(C.X,null):e1.A,tooltip:(0,ev.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:a?i.createElement(N.I,null):th.A,tooltip:(0,ev.t)("layer_icon.tooltip.text")};case"SLICE":return{src:a?i.createElement(L.z,null):e4.A,tooltip:(0,ev.t)("layer_icon.tooltip.slice")};case"TRANSFORM":return{src:a?i.createElement(O.$,null):ej.A,tooltip:(0,ev.t)("layer_icon.tooltip.transform")};case"GROUP":case"FRAME":if((0,eL.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,eN.n)(e.size.x),tooltip:(0,ev.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:a?i.createElement(R.k,null):tu.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};if(r(e)&&e.isSlotReactive)return{src:i.createElement(P.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.slot")};if((0,eO.Rt)(e))return{src:a?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return i.createElement(l.d,null);case"CENTER":return i.createElement(c.B,null);case"MAX":return i.createElement(d.E,null);default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(u.J,null);case"CENTER":return i.createElement(p.P,null);case"MAX":return i.createElement(m.n,null);default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return i.createElement(_.D,null);case"CENTER":return i.createElement(h.h,null);case"MAX":return i.createElement(g.A,null);default:(0,s.xb)(e.stackCounterAlignItems)}}return i.createElement(f.q,null)}(e):tv(e),tooltip:(0,ev.t)("layer_icon.tooltip.auto_layout")};else if((0,eO.po)(e))return{src:i.createElement(D.y,null),tooltip:(0,ev.t)("layer_icon.tooltip.auto_layout")};else if(e.resizeToFit)return{src:a?i.createElement(k.g,null):ej.A,tooltip:(0,ev.t)("layer_icon.tooltip.group")};else return{src:a?i.createElement(f.q,null):eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,eL.oz)())return{src:o===ew.g$.Webpage?i.createElement(M.A,null):i.createElement(F.t,null),tooltip:(0,ev.t)("layer_icon.tooltip.webpage")};return{src:a?i.createElement(f.q,null):eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.frame")};case"REPEATER":if((0,eL.oz)()&&(0,eT.U)())return{src:i.createElement(x.u,null),tooltip:(0,ev.t)("layer_icon.tooltip.repeater")};return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.frame")};case"CMS_RICH_TEXT":if((0,eL.oz)()&&(0,eT.U)())return{src:i.createElement(U.G,null),tooltip:(0,ev.t)("layer_icon.tooltip.cms_rich_text")};return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,eL.oz)())return{src:i.createElement(B.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_component")};return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};case"CODE_INSTANCE":if(!(0,eL.oz)())return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};if(e instanceof eu.D){if(e.isMainComponentLikeCodeNode)return{src:i.createElement(B.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_component")};if(e.isLayerLikeCodeNode)return{src:i.createElement(G.l,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_layer")};return{src:i.createElement(V.$,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_instance")}}if(e.isMainCodeComponent)return{src:i.createElement(B.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_component")};if(e.autoForkCode)return{src:i.createElement(G.l,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_layer")};return{src:i.createElement(V.$,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_instance")};case"REACT_FIBER":return{src:i.createElement(H.O,null),tooltip:(0,ev.t)("layer_icon.tooltip.react_fiber")};case"CODE_LAYER":if((0,eL.oz)())return{src:i.createElement(G.l,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_layer")};return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};case"CODE_LIBRARY":if((0,eL.oz)())return{src:i.createElement(H.O,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_library")};return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};case"CODE_FILE":if(!(0,eL.oz)())return{src:eW.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};if(!(e instanceof eu.D))return{src:i.createElement(B.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_component")};if(e.isLayerLikeCodeNode)return{src:i.createElement(G.l,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_layer")};return{src:i.createElement(B.R,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_component")};case"MODULE":return{src:tm.A,tooltip:(0,ev.t)("layer_icon.tooltip.module")};case"CODE_BLOCK":return{src:i.createElement(z.n,null),tooltip:(0,ev.t)("layer_icon.tooltip.code_block")};case"SYMBOL":if((0,e_.k)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:tm.A,tooltip:(0,ev.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:a?i.createElement(K.y,null):tp.A,tooltip:(0,ev.t)("layer_icon.tooltip.variant")};return{src:a?i.createElement(R.k,null):tu.A,tooltip:(0,ev.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:a?i.createElement(W.m,null):eY.A,tooltip:(0,ev.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:a?i.createElement(j.a,null):tc.A,tooltip:(0,ev.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:a?i.createElement(Y.T,null):e8.A,tooltip:(0,ev.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:a?i.createElement($.y,null):eH.A,tooltip:(0,ev.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:a?i.createElement(q.w,null):ts.A,tooltip:(0,ev.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:a?i.createElement(X.e,null):e3.A,tooltip:(0,ev.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?(0,em.UN)().get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:a?i.createElement(J.G,null):eK.A,tooltip:(0,ev.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:a?i.createElement(Z.N,null):eJ.A,tooltip:(0,ev.t)("layer_icon.tooltip.link_preview")};if(r&&"HTML_WIDGET"===r.widgetId)return{src:i.createElement(Q.V,null),tooltip:(0,ev.t)("layer_icon.tooltip.embed")};return{src:a?i.createElement(ee.h,null):tE.A,tooltip:(0,ev.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eQ.A,tooltip:(0,ev.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:a?i.createElement(et.r,null):t_.A,tooltip:(0,ev.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:a?i.createElement(er.s,null):e5.A,tooltip:(0,ev.t)("layer_icon.tooltip.slide")}}return en}function a(e){let r=(0,eg.xx)((e,r)=>{let n;return(n=tb.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:eS.NO(e)},tb.set(e,n)),n.svg}),{guid:n,node:a,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:p,hovered:m,outOfView:_,scrollLeft:h,useUI3Icon:g,panelType:f,isCodeConnected:E,isPatternSourceIcon:y}=e,b=a?r(n,a.objectsPanelThumbnailId):"",v=a?.hasEnabledAnimatedPaint,T=a?.hasEnabledVideoPaint;return i.createElement(e7,{animated:v||T,className:l,detachedInfo:d,disabled:u,editModeType:c,hovered:m,isCodeConnected:E,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isMenuIcon:o,isMenuIconPurple:s,isPatternSourceIcon:y,locked:p,node:a,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):ed.glU.panToNode(e.node.guid,!1))},outOfView:_,panelType:f,scrollLeft:h,staticImage:a?.hasEnabledStaticImagePaint,thumbnailSrc:b,useUI3Icon:g})}e.LayerIcon=a,a.displayName="LayerIcon";let eh=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(eh);return i.createElement(a,{...e,node:r.get(e.guid)||null})};class ef extends i.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:a,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,useUI3Icon:p,isPatternSourceIcon:m}=this.props;return i.createElement(e7,{animated:this.hasEnabledAnimatedPaintNodeChange(e),className:o,disabled:s,hovered:c,isMenuIcon:n,isMenuIconPurple:a,isPatternSourceIcon:m,locked:l,node:e,outOfView:d,parentNode:r,scrollLeft:u,staticImage:this.hasEnabledStaticPaintNodeChange(e),useUI3Icon:p})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():i.createElement(eC.i,{type:e})}renderVariableCollectionIcon(){return i.createElement(ey.B,{svg:ty.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,eI.s$)(e);return i.createElement(ey.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return i.createElement(ey.B,{svg:ek.A,className:r});case"EFFECT":return i.createElement(ey.B,{svg:eD.A,className:r});case"TEXT":return i.createElement(ey.B,{svg:eM.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?i.createElement(ey.B,{svg:eF.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=ef;class e7 extends i.PureComponent{render(){let e,r;let{node:a,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:p,editModeType:m,detachedInfo:_,outOfView:h,panelType:g,isPatternSourceIcon:f}=this.props;if(!a)return null;let E=eR.V3;c&&(E=eR.W5),d&&(E=u?eR.aN:eR.TK);let y=!1,b="";this.props.isDefaultResponsiveSet?(e=g===ew.g$.Webpage?i.createElement(en.Q,null):i.createElement(F.t,null),b=(0,ev.t)("layer_icon.tooltip.home")):a.mask?(e=this.props.useUI3Icon?i.createElement(ea.d,null):eZ.A,b=(0,ev.t)("layer_icon.tooltip.mask")):(s||l)&&(0,ep.oY)(a.type)&&!(0,ep.GI)(a)?s?(e=this.props.useUI3Icon?i.createElement(ei._,null):e$.A,b=(0,ev.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?i.createElement(eo._,null):eq.A,b=(0,ev.t)("layer_icon.tooltip.image")):c?(e=(0,ey.V)(c),b=n(a,o).tooltip):m===ed.m1T.DEV_HANDOFF&&_?.status==="loaded"&&"SYMBOL"!==a.type&&"INSTANCE"!==a.type?(e=this.props.useUI3Icon?i.createElement(es.o,null):eP.A,y=!0):this.props.isCodeConnected?(e=i.createElement(el.s,null),b=(0,ev.t)("layer_icon.tooltip.code_connect")):({src:e,tooltip:b}=n(a,o,this.props.useUI3Icon,g),r=function(e){if(e)switch(e.type){case"TEXT":return tg.A;case"STICKY":return td.A;case"SHAPE_WITH_TEXT":return e6.A;case"FRAME":if((0,eO.Rt)(e))return tv(e);break;case"CANVAS":return e0.A}}(a));let v=!y&&"ABSOLUTE"===a.stackPositioning&&(this.props.useUI3Icon?i.createElement(ec.I,{className:eR.E7}):i.createElement(ey.B,{className:eR.E7,svg:ex.A}));return i.createElement("span",{className:eE()(this.props.className||E,eR.P0,eR.EA,{[eR.EU]:h}),onDoubleClick:f?void 0:p,"data-tooltip":f?null:b||null,"data-tooltip-show-above":!0,"data-tooltip-type":eA.Ib.TEXT},"string"==typeof e?i.createElement(eb.t,{svg:e,fallbackSvg:r}):i.createElement("span",{style:{stroke:"none",fill:"none"}},e),v)}}})(a||(a={}));let tT=a.ConnectedLayerIcon,tI=a.LayerIcon,tS=a.NodeChangeIcon},742489:(e,r,n)=>{function a(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}function i(e){return"GRID"===e.stackMode}n.d(r,{Rt:()=>a,po:()=>i}),n(848318)},444441:(e,r,n)=>{n.d(r,{g$:()=>s}),n(848318),n(842453),n(186606);var a=n(195124);n(768618),n(382902);var i=n(418193);n(870344);var o=n(561327);n(471078);var s=(e=>(e.Object="OBJECT",e.Webpage="WEBPAGE",e.CodeComponent="CODE_COMPONENT",e))(s||{});(0,i.xx)((e,r)=>{let n=1/0;return(0,o.YI)(e,r,r=>{r&&(n=Math.min(n,(0,a.F0)(e,r.guid)))}),n===1/0&&(n=0),n});let l=(0,i.xx)((e,r,n)=>null!==r&&null===r.guid&&r.children.length>0&&!r.children.some(r=>(0,a.rV)(e,r,n))),c=(0,i.xx)((e,r)=>{let n=new Set;return(0,o.YI)(e,r,e=>{e&&n.add(e.type)}),n});(0,i.xx)((e,r)=>{if(!r)return{};let n={};return r.children.forEach(r=>{n[r]=(0,a.F0)(e,r)}),n}),(0,i.xx)((e,r,n)=>{let a=e.get(n);if(!a)return null;for(;a;){if(null!=r[a.guid])return r[a.guid];a=a.parentNode}return null})},854139:(e,r,n)=>{n(842453),n(186606),n(195124),n(19180),n(781239),n(244813),n(561327),n(42725),n(786175)},471078:(e,r,n)=>{(0,n(848318).createContext)(null)},499927:(e,r,n)=>{n.d(r,{N:()=>g});var a=n(848318),i=n(531788),o=n(410441),s=n(130799),l=n(984051),c=n(264478),d=n(967688),u=n(244534);n(156818);var p=n(404883),m=n(175393),_=n(27776),h=n(542574);(0,o.hG)(_.oVP);class g extends a.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(p.vA.NEVER)},this.onClickOpenInApp=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(this.state.alwaysChecked?p.vA.ALWAYS:p.vA.NEVER),(0,s.Sr)(location.href,s.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:(0,l.vn)()!==p.vA.NEVER}}static shouldShowOnce(){return(0,l._p)()&&void 0===(0,l.vn)()}static shouldAutoOpen(){return(0,l._p)()&&(0,l.vn)()===p.vA.ALWAYS}static toggleAutoOpen(){let e=(0,l.vn)()===p.vA.ALWAYS;(0,l.hW)(e?p.vA.NEVER:p.vA.ALWAYS)}static isAutoOpenEnabled(){return(0,l.vn)()===p.vA.ALWAYS}static enableAutoOpen(){(0,l.hW)(p.vA.ALWAYS)}static disableAutoOpenIfUnset(){void 0===(0,l.vn)()&&(0,l.hW)(p.vA.NEVER)}render(){return a.createElement(m.vx,{initialPosition:this.props.initialPosition,title:(0,d.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},a.createElement("div",{className:h.k},a.createElement("div",{className:h.K},a.createElement(c.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),a.createElement(c.JU,{htmlFor:"always-open-desktop-app"},(0,d.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),a.createElement("div",{className:h.K},a.createElement(i.$n,{variant:"secondary",onClick:this.onClose},(0,d.tx)("desktop_open_views.modal.dismiss_button")),a.createElement(i.$n,{variant:"primary",onClick:this.onClickOpenInApp},(0,d.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}g.displayName="OpenDesktopAppModal"},590267:(e,r,n)=>{n(848318),n(938982),n(382902),n(317720);var a=n(755595);n(536384),n(996202),n(410725),n(748008),n(72462),n(998568),n(345964),n(999556),n(555772),n(967688),n(730143),n(55116),n(7905),n(353956),a.z.record(a.z.object({thumbnail_url:a.z.string(),thumbnail_meta:a.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:a.z.string().optional()}))},20649:(e,r,n)=>{n.d(r,{VS:()=>m});var a=n(848318),i=n(301168),o=n(186606);n(382902),n(536384);var s=n(996202);n(907636),n(865114),n(72462),n(452275),n(361964),n(431054),n(806496),n(959750);var l=n(896967),c=n(15105),d=n(859480);n(659502);var u=n(665411);n(730143);var p=n(209595);function m({pagesList:e,isComparingChanges:r,enabled:n=!0}){let m=(0,c.Z)("page_change_navigator_navigate"),_=(0,l.E)(),h=(0,s.U)(),g=(0,i.wA)(),f=(0,p._6)(),E=(0,d.dh)(n),y=(0,i.d4)(e=>e.versionHistory);return(0,a.useCallback)(async a=>{n&&await (0,d.$P)(a,E,y,g,(0,u.Fy)(e,a)===o.xal.LOADED,h,m,_,r,f)},[e,m,_,h,g,f,E,y,r,n])}n(318147),n(554326),n(590267),n(353956),n(65963),n(832608),n(275205),n(467601),n(50742)},353956:(e,r,n)=>{n.d(r,{l7:()=>d});var a=n(768618),i=n(382902),o=n(72462),s=n(4881);(0,s.Wh)(()=>(0,i.eU)([]));let l=(0,s.Wh)(()=>(0,i.eU)(null));(0,s.Wh)(()=>(0,i.eU)(o.r.INIT));let c=(0,s.Wh)(()=>(0,i.eU)(null)),d=(0,i.eU)(e=>e(c),(e,r,n)=>{let i=e(c),o="function"==typeof n?n(i):n;if(i!==o){if(r(c,o),o){let e=(0,a.UN)().get(o);r(l,e?.name||"")}else r(l,null)}})},65963:(e,r,n)=>{n(848318),n(301168),n(186606),n(19180),n(382902),n(536384),n(781239),n(720522),n(967688),n(952039),n(555637),n(301360),n(995218),n(696786),n(70433),n(665411),n(554326),n(614092),n(17753),n(517614),n(857607),n(146859),n(614892),n(214758)},762703:(e,r,n)=>{n(848318),n(301168),n(186606),n(989232),n(244534),n(730143),n(672345)},832608:(e,r,n)=>{n(848318),n(382902),n(857607),n(303397),n(702038),n(859480),n(228845),n(353956);var a=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(a||{})},275205:(e,r,n)=>{n(848318),n(301168),n(186606),n(768618),n(382902),n(996202),n(66699),n(555637),n(806496),n(859480),n(665411),n(730143),n(84145),n(353956)},467601:(e,r,n)=>{n(848318),n(186606),n(320953),n(996202),n(228845)},116103:(e,r,n)=>{n.d(r,{v:()=>b});var a=n(848318),i=n(891627),o=n(693220),s=n(186606),l=n(315933),c=n(61503),d=n(709001),u=n(744577),p=n(264790),m=n(27776),_=n(457102);let h=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"FPS",id:"fps",max:120,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function g(e,r){var n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;let a=e.getContext("2d");a&&(a.scale(r,r),a.imageSmoothingEnabled=!1)}class f extends a.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=a.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let r=e.hitCount-this.lastRenderedHitCount,n=0;for(let a=Math.max(0,e.elapsedTimes.length-r);a<e.elapsedTimes.length;a++)n+=e.elapsedTimes[a];this.append(n),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),g(e,this.dpr)}}append(e){if(!this.ctx)return;let r=this.ctx.canvas,n=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,g(r,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let a=1/0,i=-1/0;for(let e of this.buffer)a=Math.min(a,e),i=Math.max(i,e);let o=this.props.width,s=this.props.height,l=this.props.barWidth,c=s-20;n.font="9px monospace",n.fillStyle=this.props.bg,n.textBaseline="top",n.fillRect(0,0,o,20),n.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),n.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),n.fillText(`${a.toFixed(1)} - ${i.toFixed(1)}`,0,10),n.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let a=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=a,n.fillRect(0,s-c,o,(a-1)*c/a),n.drawImage(r,0,(s-c)*this.dpr,o*this.dpr,c*this.dpr,0,s-c/a,o,c/a)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,i)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,i))));this.yAxisMaxValue/=e,n.drawImage(r,0,(s-c/e)*this.dpr,o*this.dpr,c/e*this.dpr,0,s-c,o,c)}}n.drawImage(r,l*this.dpr,(s-c)*this.dpr,(o-l)*this.dpr,c*this.dpr,0,s-c,o-l,c);let u=Math.floor(c*Math.min(1,e/this.yAxisMaxValue));n.fillRect(o-l,s-c,l,c),n.fillStyle=this.props.fg,n.fillRect(o-l,s-u,l,u)}render(){return a.createElement("canvas",{className:_.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}f.displayName="Sparkline";class E extends a.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new d.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),r=this.sparklines.get("inter-frame-time");r&&r.append(e-this.lastFrameTime);let n=this.sparklines.get("fps");n&&n.append(1e3/(e-this.lastFrameTime)),this.lastFrameTime=e}let e=this.sparklines.get("total-memory");e&&e.append(((0,p.aW)()??0)/1048576);let r=this.sparklines.get("cpp-heap-memory");r&&r.append(s.hMR.getTotalUsedHeapMemory()/1048576);let n=this.sparklines.get("cpp-malloc-call-count");n&&n.append(s.hMR.getAllocCallCount());let a=this.sparklines.get("cpp-malloc-size-totals");a&&a.append(s.hMR.getAllocTotal()/1024),s.hMR.resetAllocCountsAndTotal();let i=this.sparklines.get("render-job-queue-length");i&&i.append(s.CeL.getRendererJobQueueLength());let o=this.sparklines.get("render-tree-swap-time");o&&o.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let d=this.sparklines.get("estimated-viewport-coverage");d&&d.append(s.glU.estimatedViewportRenderCoverage(s.pWM.DEFINITELY_COVERED_ONLY));let u=this.sparklines.get("min-sharpness");u&&u.append(s.glU.minViewportSharpness());let m=this.sparklines.get("avg-sharpness");m&&m.append(s.glU.avgViewportSharpness());let _=l.rH.report(),h=[],g=e=>{h.push(e.name);let r=this.sparklines.get(h.join(","));for(let n of(r&&r.updateFromTimer(e),e.children))g(n);h.pop()};for(let e of _)g(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>r=>{r&&this.sparklines.set(e.join(","),r)},this.frameRequest=null,this.renderHUDNode=(e,r=[])=>{let n=r.concat([e.id]),i=150-10*r.length,o=u.sx.add({color:"black"}).$.color,s=u.sx.add({backgroundColor:"white"}).$.backgroundColor,l=!!(this.state?.nodesHiddenState??{})[e.id];return a.createElement("div",{key:e.id},a.createElement("div",{className:_.n5},a.createElement("div",null,a.createElement("div",null,a.createElement("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)}},l?"(+)":"(-)"),e.label),!l&&a.createElement(f,{ref:this.sparklineRef(n),fg:o,bg:s,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:i}))),e.children&&!l&&a.createElement("div",{className:_.Q3},e.children.map(e=>this.renderHUDNode(e,n))))},this.state={nodesHiddenState:{fps:!0,react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let r=this.state?.nodesHiddenState??{},n=!!r[e];this.setState({nodesHiddenState:{...r,[e]:!n}})}render(){let e=this.props.isFigjamFile?0:parseInt(m.uj0,10)+5,r=(0,c.bG)()+5;return a.createElement("div",{className:_.vY,style:{right:e,top:r}},h.map(e=>this.renderHUDNode(e)))}}E.displayName="PerfHUD";let y=null;function b(e){y?(i.unmountComponentAtNode(y),document.body.removeChild(y),y=null):(y=document.createElement("div"),document.body.appendChild(y),(0,o.H)(y).render(a.createElement(E,{isFigjamFile:e})))}},483395:(e,r,n)=>{n.d(r,{GZ:()=>i,qg:()=>o,r5:()=>a}),n(848318),n(303397),n(702038),n(963307),n(574422),n(273555);let a=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function i(e){let r=[[]];for(let n of e)"SELECT_DIVIDER"===n?r.push([]):r[r.length-1]?.push(n);return r}function o(e,r){return e===r}["PASS_THROUGH"].concat(a)},562638:(e,r,n)=>{n.d(r,{Fz:()=>K,Uj:()=>H,Ww:()=>z,kF:()=>G,om:()=>B,ui:()=>W});var a=n(848318),i=n(308826),o=n(451938),s=n(834632),l=n(839595),c=n(620392),d=n(856783),u=n(156281),p=n(818006),m=n(868497),_=n(722062),h=n(75449),g=n(189981),f=n(257372),E=n(79077),y=n(832700),b=n(361765),v=n(967688),T=n(489082),I=n(173841),S=n(544900),A=n(691692),w=n(607307),C=n(291987),N=n(875918),L=n(576177),O=n(668333),R=n(187422),P=n(208856),D=n(122768),k=n(824383),M=n(505194),F=n(974069),x=n(521121),U=n(776777),B=(e=>(e.ALL="All",e.TOP="Top",e.BOTTOM="Bottom",e.LEFT="Left",e.RIGHT="Right",e.CUSTOM="Custom",e.MIXED="Mixed",e))(B||{}),G=(e=>(e.TOP="Top",e.BOTTOM="Bottom",e.LEFT="Left",e.RIGHT="Right",e))(G||{});let V={Top:{svg:R.A,ui3Icon:a.createElement(i.A,null)},Bottom:{svg:S.A,ui3Icon:a.createElement(o.E,null)},Left:{svg:N.A,ui3Icon:a.createElement(s.K,null)},Right:{svg:O.A,ui3Icon:a.createElement(l.r,null)},TopBottom:{svg:P.A,ui3Icon:a.createElement(c.l,null)},LeftRight:{svg:L.A,ui3Icon:a.createElement(d.K,null)},TopRight:{svg:x.A,ui3Icon:a.createElement(u.C,null)},TopLeft:{svg:M.A,ui3Icon:a.createElement(p.H,null)},BottomRight:{svg:C.A,ui3Icon:a.createElement(m.A,null)},BottomLeft:{svg:A.A,ui3Icon:a.createElement(_.X,null)},TopBottomRight:{svg:k.A,ui3Icon:a.createElement(h.Z,null)},TopLeftRight:{svg:F.A,ui3Icon:a.createElement(g.R,null)},TopBottomLeft:{svg:D.A,ui3Icon:a.createElement(f.y,null)},BottomLeftRight:{svg:w.A,ui3Icon:a.createElement(E.l,null)},TopBottomLeftRight:{svg:I.A,ui3Icon:a.createElement(y.x,null)}};function H(e){switch(e){case"Mixed":return(0,v.t)("fullscreen.properties_panel.borders.mixed");case"All":return(0,v.t)("fullscreen.properties_panel.borders.all");case"Top":return(0,v.t)("fullscreen.properties_panel.borders.top");case"Bottom":return(0,v.t)("fullscreen.properties_panel.borders.bottom");case"Left":return(0,v.t)("fullscreen.properties_panel.borders.left");case"Right":return(0,v.t)("fullscreen.properties_panel.borders.right");case"Custom":return(0,v.t)("fullscreen.properties_panel.borders.custom");default:return""}}function z(e){switch(e){case"Mixed":case"All":return{svg:I.A,ui3Icon:a.createElement(y.x,null)};case"Top":return{svg:R.A,ui3Icon:a.createElement(i.A,null)};case"Bottom":return{svg:S.A,ui3Icon:a.createElement(o.E,null)};case"Left":return{svg:N.A,ui3Icon:a.createElement(s.K,null)};case"Right":return{svg:O.A,ui3Icon:a.createElement(l.r,null)};case"Custom":return{svg:U.A,ui3Icon:a.createElement(b.A,null)}}}function K(e,r){return(0,T.gl)(e)?{svg:I.A,ui3Icon:a.createElement(y.x,null)}:0===e.length?((null==r||"Custom"===r)&&(r="All"),z(r)):V[e.join("")]}function W(e){switch(e){case"All":case"Mixed":return"borderSharedWeight";case"Custom":return"strokeWeight";case"Top":return"borderTopWeight";case"Bottom":return"borderBottomWeight";case"Left":return"borderLeftWeight";case"Right":return"borderRightWeight"}}},807326:(e,r,n)=>{n.d(r,{m:()=>y});var a=n(848318),i=n(773511),o=n(186606),s=n(967688),l=n(323201),c=n(632727),d=n(381955),u=n(696786),p=n(506428),m=n(531118),_=n(643841),h=n(910398),g=n(181630),f=n(970360),E=n(492929);let y=a.forwardRef(function({color:e,hideBorderShadow:r,forceNonInteractive:n,...y},b){let v=(0,u.GS)(),T=(0,d.X)(),I=(0,p.yM)(),S=(0,_.Ep)(),A={...e,a:1},w=l.F.format(A),C=v&&1!==e.a||r?void 0:(0,g.pw)(I,w,T),N=!n&&(0,f.b4)(y),L=a.createElement(a.Fragment,null,a.createElement("div",{className:E.f$,style:{opacity:1-(e.a||0)}}),C&&a.createElement("div",{className:E.lo,style:{boxShadow:C}})),O=(S??o.RYP.SRGB)===o.RYP.DISPLAY_P3?(0,h.p3)()?{backgroundImage:`url(${(0,m.rl)(A,o.RYP.DISPLAY_P3)})`}:{backgroundColor:l.F.format(A,"display-p3")}:{backgroundColor:l.F.format(A)};return N?a.createElement(i.E,{style:O,"aria-label":function(e){let r=c.TI.format(e);return(0,s.t)("fullscreen.accessibility.chit_solid",{hexValue:r})}(e),ref:b,...y},L):a.createElement("div",{style:O,...y},L)})},827930:(e,r,n)=>{n.d(r,{U:()=>d});var a=n(848318),i=n(857607),o=n(330362),s=n(355755),l=n(408529),c=n(91877);function d(e){let r=a.useRef(null);(0,s.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=(0,o.k)(),d=e.flowPanel??null,u=e.localStylesPanel??null;return n?null:a.createElement("div",{ref:r,onKeyDown:e=>{if((0,i.Fo)(e)&&e.keyCode===i.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:c.z},d,u,a.createElement(l.m,null))}},824286:(e,r,n)=>{n.d(r,{aj:()=>ee,Af:()=>ev,DP:()=>ed,x5:()=>eE,rh:()=>et,np:()=>ea,ZN:()=>ef,nu:()=>eg,bm:()=>eu});var a=n(848318),i=n(301168),o=n(559389),s=n(938982),l=n(773511),c=n(23207),d=n(544405),u=n(186606),p=n(536384),m=n.n(p),_=n(93490),h=n(998568),g=n(720522),f=n(967688),E=n(43322),y=n(278634),b=n(232540),v=n(764539),T=n(438071),I=n(754210),S=n(995218),A=n(959750),w=n(489082),C=n(355755),N=n(277454),L=n(160769),O=n(614092),R=n(535884),P=n(700436),D=n(720722),k=n(17753),M=n(434328),F=n(415356),x=n(844319),U=n(325590),B=n(460374),G=n(393197),V=n(616917),H=n(888663),z=n(985789),K=n(50652),W=n(21614),j=n(368085),Y=n(651425);let $=e=>Number(e).toLocaleString("en",{style:"percent",maximumFractionDigits:2});function q(e){let{value:r}=e,n=void 0!==r&&(e.showOpaque||1!==r),i=$(r);return a.createElement(a.Fragment,null,n&&a.createElement("span",{className:Y.As},i))}var X=n(641501),J=n(991344);let Z=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),Q=new I.ro;function ee(e){let r=(0,S.m0)(),{blendMode:n,onError:i}=e,o=(0,w.gl)(n)||"string"==typeof n;return(n&&!o&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof n}`)),i&&i(n),n=void 0),!n||["NORMAL","PASS_THROUGH"].includes(n))?null:r&&!e.layout?a.createElement(j._p,{className:Y.Om,copyValue:n.toLowerCase(),copyName:"mix-blend-mode",disableDetailModalEntry:!0},a.createElement("span",{className:Y.mL},(0,f.tx)("inspect_panel.colors.blend_mode",{blendMode:Q.format(n)}))):a.createElement(j._p,{indent:e.indent,className:e.className,name:(0,f.t)("inspect_panel.colors.blend"),value:Q.format(n),copyName:"mix-blend-mode"})}function et({onClick:e,color:r,value:n,labelRef:i,pillClassName:o,htmlAttributes:s,disableHover:c}){let d=a.createElement(a.Fragment,null,a.createElement(M.J,{color:r,forceNonInteractive:!0}),a.createElement("div",{ref:i,className:Y.LK},n)),u=m()(Y.bE,!c&&Y.DQ,o);return e?a.createElement(l.E,{className:u,onClick:e,htmlAttributes:s},d):a.createElement("div",{className:u},d)}function er({paint:e,color:r,valueFormatter:n,matchingVars:i,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:u}){let p=(0,A.Ku)(),_={...r,a:r?.a??e.opacity??1},{value:g,copyValue:f}=(0,y.G)(_,p,n),E=(0,j.Cm)(f,"color"),b=a.useCallback(()=>{E?.()},[E]),{ref:v,...T}=(0,F.X)(g),I={...T,onMouseEnter:d,onMouseLeave:u};return a.createElement("div",{className:Y.ab,"data-testid":"inspectMultilineColorRow"},a.createElement(j._p,{className:m()(Y.$f,o&&Y.zz),disableDetailModalEntry:c,matchingVars:i,copyValue:null},a.createElement(et,{color:_,value:g,onClick:b,labelRef:v,htmlAttributes:I})),!l&&a.createElement(ee,{className:eT(),blendMode:e.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,h.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"RawColorUI3",props:{paint:e}}})}}))}function en({variable:e,color:r}){return e?.subscriptionStatus==="LOCAL"&&e?.isSoftDeleted?a.createElement("div",{"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,f.t)("variables.variable_was_deleted")},a.createElement(g.B,{className:Y.Bx,svg:J.A})):a.createElement(V.P,null,a.createElement(M.J,{color:r,forceNonInteractive:!0}))}function ea({color:e,variable:r,label:n,onClick:i,shouldStretch:o,selected:s}){let l=!1===s;return a.createElement(G.s,{styleIcon:a.createElement(en,{color:e,variable:r}),styleName:n,styleDescription:r?.description,onClick:i,disableHover:l,shouldStretch:o,selected:s,hasFocus:s})}function ei({id:e,variable:r,color:n,paint:i,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:u}){let p=(0,W.uV)(r)??"",_=(0,j.Cm)(p,"color-variable"),g=a.useCallback(()=>{_?.()},[_]),f={...n,a:n?.a??i.opacity??1};return a.createElement("div",{className:Y.ab,"data-testid":"inspectMultilineColorRow",onMouseEnter:d,onMouseLeave:u},a.createElement(j._p,{className:m()(Y.vQ,o&&Y.it),variableId:e,disableDetailModalEntry:c,copyValue:null},a.createElement(ea,{color:f,variable:r,label:p,onClick:g})),!l&&a.createElement(ee,{className:eT(),blendMode:i.blendMode,onError:e=>{let n=TypeError(`Expected string | undefined, got ${typeof e}`);console.error(n),(0,h.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof e,value:e,source:"VariableValue",props:{paint:i,variable:r}}})}}))}function eo(e){let{isInStyle:r,rows:n}=e;return a.createElement("div",{className:Y.n,"data-testid":"inspectMultilineColorRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(j.d1,{className:m()({[Y.UU]:r},Y.y4),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},a.createElement(M.J,{className:Y.Gz,paint:e.paint,tooltip:e.description})),a.createElement(ee,{className:eT({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,h.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),n)}function es(e){let r=(0,S.m0)(),{format:n}=e,{paint:i,valueFormatter:o}=e.formattableColor,s=(0,z._B)(i),{variable:l,variableDisplayName:c,matchingVars:d}=e.formattableColor.variable??s;if(!i.color)return null;let u={...i.color,a:i.opacity??1},p=l?.id??l?.node_id;if(r)return l?a.createElement(ei,{id:p,variable:l,color:u,paint:i,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}):a.createElement(er,{paint:e.formattableColor.paint,color:u,valueFormatter:e.formattableColor.valueFormatter,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,matchingVars:d,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});if(l){let n=a.createElement(el,{format:e.format,valueFormatter:o,color:u,isInStyle:e.isInStyle});return a.createElement(eo,{paint:i,styleName:c,isVariable:!0,variableId:p,isInStyle:e.isInStyle,rows:r?void 0:n,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}let m=(0,X.q)(u,n,o);return a.createElement(j._p,{className:eT({format:n,isInStyle:e.isInStyle}),copyValue:m.copyValue,matchingVars:d,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(M.J,{className:Y.Gz,paint:i}),a.createElement("span",{className:Y.As,"data-testid":"inspectColorRow"},m.value),X.x.has(e.format)&&a.createElement(q,{value:u.a}))}function el(e){let r=(0,X.q)(e.color,e.format,e.valueFormatter);return a.createElement(j._p,{className:eT({format:e.format,isInGradient:e.isInGradient,isInStyle:e.isInStyle}),copyValue:r.copyValue,variableId:e.variableId,matchingVars:e.matchingVars,disableDetailModalEntry:e.disableDetailModalEntry},a.createElement("div",null),a.createElement("span",{className:Y.As},r.value),X.x.has(e.format)&&a.createElement(q,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1}))}function ec(e){let r=(0,S.m0)(),{encodedPaint:n,paint:i,valueFormatter:o,typeFormatter:s}=e.formattableColor,l=i.stopsVar?.length?i.stopsVar:i.stops,c=a.createElement(a.Fragment,null,l?.map((r,s)=>a.createElement(eI,{paint:i,encodedPaint:n,format:e.format,gradientStop:r,isInStyle:e.isInStyle,key:s,opacity:i.opacity??1,valueFormatter:o,disableDetailModalEntry:e.disableDetailModalEntry})));if(r){let r=i.opacity&&1!==i.opacity?` \xb7 ${(100*i.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:null;return a.createElement("div",{className:Y.ab,"data-testid":"inspectMultilineColorRow"},a.createElement(j._p,{className:m()(Y.$f,Y.bE,Y.Ul),disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(M.J,{paint:i}),(0,f.tx)("inspect_panel.colors.gradient",{gradientType:s(i.type)}),r),a.createElement(ee,{className:eT(),indent:!0,blendMode:i.blendMode}),c)}return a.createElement(eo,{paint:i,defaultStyleName:(0,f.t)("inspect_panel.colors.gradient",{gradientType:s(i.type)}),isInStyle:e.isInStyle,rows:c,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}function ed(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return a.createElement(es,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return a.createElement(ec,{...e});default:return null}}function eu(e){return e.visible&&e.type&&Z.has(e.type)}let ep=()=>{let e=(0,W.jY)(),r=(0,W.uQ)(),n=(0,v.Q)(),o=(0,E.v4)(),s=(0,S.m0)(),l=(0,i.d4)(e=>(0,P.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,U.Ig)(),d=a.useMemo(()=>l.filter(e=>eu(e.paint)).map(e=>(0,U.dc)(e.paint,c)),[l,c]),u=(0,i.d4)(e=>(0,P.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),p=(0,i.d4)(R.e_),m=a.useMemo(()=>{let r=u.map(e=>({ds:(0,N.Gp)(e.styleKey,e.styleGUIDs,p),name:e.styleName})),n=[];return r.forEach(({ds:r,name:a})=>{if(!r)return;let i=r.kind===D.AT.SUBSCRIBED_WITHOUT_LIBRARY?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter(eu).map(e=>(0,U.dc)(e,c)),s=(0,L.QH)(i);if(s&&"FILL"===s.type)n.push((0,U.rP)(a,r,o(s.fillPaints)));else{let i=e.get(r.value.node_id);i&&n.push((0,U.rP)(a,r,o(i.fills)))}}),n},[u,p,e,c]);return a.useMemo(()=>{let e=[...m,...d];return(0,z.QT)(e,r,n.inspectionMode,o,s)},[m,d,r,n.inspectionMode,o,s])},em=(e,r)=>e.type===B.q.STYLE?a.createElement(eh,{color:e,format:r.format}):a.createElement(e_,{color:e,format:r.format});function e_(e){return a.createElement(ed,{format:e.format,formattableColor:e.color,disableDetailModalEntry:e.disableDetailModalEntry})}function eh(e){let r=(0,i.wA)(),n=(0,S.m0)(),s=(0,b.Fj)(e.color.dsStyle.value.key),l=e.color.dsStyle.kind,c=e.color.dsStyle.value.node_id,d=a.useMemo(()=>(0,o.s)(()=>{c&&r(T.rb({styleNodeId:c,styleKind:l}))}),[r,l,c]);a.useEffect(d,[d]);let u=e.color.name,p=(0,j.Cm)(u,"color style"),_=a.useCallback(()=>{p?.()},[p]),h=e.color.dsStyle.value;return(l===D.AT.SUBSCRIBED_WITHOUT_LIBRARY&&(h.style_type="FILL",h.node_id=c),n)?a.createElement(j._p,{className:m()(Y.VB,Y.vQ),styleId:e.color.dsStyle.value.key,styleNodeId:e.color.dsStyle.value.node_id,styleType:h.style_type,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,dataTestId:"styleNameRow"},a.createElement(G.s,{styleIcon:a.createElement(H.zi,{dsStyle:h,disableTooltip:!0}),styleName:e.color.name,styleDescription:s?.description,onClick:_})):a.createElement(a.Fragment,null,a.createElement(j._p,{className:Y.VB,copyValue:e.color.name,dataTestId:"styleNameRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(H.zi,{dsStyle:h,hideNameInTooltip:!0}),a.createElement(j._p,{className:Y.yW,value:e.color.name})),!n&&e.color.paints.map(r=>a.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},a.createElement(ed,{format:e.format,formattableColor:r,isInStyle:!0}))))}function eg(e){let r=(0,A.Ku)(),n=e.formattableColors,i=a.useMemo(()=>({format:r}),[r]);return a.createElement(j.x0,{limit:5,data:n,renderElement:em,extras:i})}function ef({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,S.m0)(),s=(0,W.uQ)(),l=C.eY().get(s??"")?.type,c=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.fillPaints),r=(0,W.rb)(),n=a.useMemo(()=>!e||(0,w.gl)(e)?[]:e,[e]),o=(0,W.pF)(e=>(0,_.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),s=(0,i.d4)(R.e_),l=(0,i.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),c=(0,i.d4)(e=>e.mirror.selectionProperties.styleIdForFill),d=(0,O.Fk)((e,r)=>r?e.getStyleNodeByRef(r)?.guid:void 0,c?.assetRef),p=r&&(0,K.Ku)(r),m=(0,U.Ig)(),h=l?(0,N.Gp)(l,d?[d]:[],s):void 0,g=n.filter(eu).map(e=>(0,U.dc)(e,m,p||u.j0r.ALL_FILLS));return h&&o?[(0,U.rP)(o,h,g)]:g}(),d=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.textDecorationFillPaints),r=(0,i.d4)(e=>e.mirror.selectionProperties.textDecoration),n=a.useMemo(()=>"UNDERLINE"!==r||!e||(0,w.gl)(e)?[]:e,[r,e]),o=(0,U.Ig)();return n.filter(eu).map(e=>(0,U.dc)(e,o,u.j0r.TEXT_FILL))}(),p=(0,v.Q)(),m=(0,E.v4)(),h="TEXT"===l?[...c,...d]:c,g=(0,z.QT)(h,s,p.inspectionMode,m,o),y=(0,A.Ku)(),b=W.T4.useCopyAllColors(g,y);return g.length<1?null:a.createElement(j.VZ,{title:o?"TEXT"===l?(0,f.t)("dev_handoff.inspect_panel.fills.text"):(0,f.t)("dev_handoff.inspect_panel.fills.background"):(0,f.t)("inspect_panel.colors.title"),additionalHeaders:o?void 0:a.createElement(ev,null),copyAllValue:o?void 0:b,recordingKey:"colors",noBorder:e,fadedTitle:o,snugTitle:o,noPadding:r,isSubsection:n},a.createElement(eg,{formattableColors:g}))}function eE(){let e=ep(),r=(0,A.Ku)(),n=W.T4.useCopyAllColors(e,r);return e.length<1?null:a.createElement(j.VZ,{title:(0,f.t)("inspect_panel.colors.title"),additionalHeaders:a.createElement(ev,null),copyAllValue:n,recordingKey:"colors"},a.createElement(eg,{formattableColors:e}))}let ey=[u.NVY.HEX,u.NVY.RGB,u.NVY.HSL,u.NVY.HSB,u.NVY.UIColor],eb=[u.NVY.HEX,u.NVY.RGB,u.NVY.CSS,u.NVY.HSL,u.NVY.HSB];function ev(){let e=(0,A.Ku)(),r=(0,S.m0)(),n=(0,j.SV)("inspection_panel_color_format_change"),i=a.useCallback(e=>{(0,A.UK)().colorFormat.set(+e),n({value:x.F.format(+e)})},[n]);return a.createElement(c.bL,{value:e.toString(),onChange:i},a.createElement(c.l9,{width:"fill",label:a.createElement(d.h,null,x.F.format(e))}),a.createElement(c.mc,null,(r?ey:eb).map(e=>a.createElement(c.c$,{key:e,value:e.toString()},x.F.format(e)))))}function eT(e={}){let{format:r=u.NVY.HEX,isInGradient:n,isInStyle:a}=e,i=Y.K5,o=r===u.NVY.HEX?"":Y.cZ,s=a?Y.UU:void 0,l=n?Y.fz:void 0;return m()(i,o,l,s)}function eI(e){let r=(0,S.m0)(),{gradientStop:n,paint:i,encodedPaint:o,format:s,isInStyle:l,opacity:c,valueFormatter:d}=e,{color:u}=n,{copyValue:p,isVariableRow:_,valueWithoutOpacity:h,variable:g,variableDisplayName:f}=(0,y.X)({...e.gradientStop,encodedPaint:o,valueFormatter:d}),E=m()({[Y.lF]:!0,[Y.$]:_,[Y.ZM]:l}),b=a.createElement(M.J,{className:Y.Gz,color:u,opacity:c});return r?g?a.createElement(ei,{id:g.node_id,variable:g,color:u,paint:i,disableDetailModalEntry:e.disableDetailModalEntry,indent:!0,hideBlendMode:!0}):a.createElement(er,{paint:i,color:u,valueFormatter:d,indent:!0,hideBlendMode:!0}):_?a.createElement("div",{className:Y.n},a.createElement(j.d1,{className:m()(E,Y.y4),isVariable:!0,variableId:g.node_id,label:f,disableDetailModalEntry:e.disableDetailModalEntry},b),(!r||!e.isInStyle)&&a.createElement(el,{alwaysShowOpacity:!0,format:e.format,valueFormatter:d,color:u,isInGradient:!0,isInStyle:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry})):a.createElement(j._p,{className:m()(eT({format:s}),E),copyValue:p},b,a.createElement("span",{className:Y.As,"data-testid":"inspectColorRow"},h),X.x.has(e.format)&&a.createElement(q,{value:u.a}))}},21614:(e,r,n)=>{n.d(r,{As:()=>x,Cj:()=>F,I9:()=>D,T4:()=>a,Tv:()=>L,Vr:()=>P,Wf:()=>R,jY:()=>k,n4:()=>G,pF:()=>M,rb:()=>O,uQ:()=>N,uV:()=>U});var a,i=n(848318),o=n(301168),s=n(186606),l=n(286536),c=n(382902),d=n(967688),u=n(43322),p=n(85586),m=n(233594),_=n(725810),h=n(220260),g=n(361218),f=n(542820),E=n(792533),y=n(995218),b=n(959750),v=n(489082);n(963307);var T=n(788903),I=n(614092),S=n(698429),A=n(325590),w=n(460374),C=n(346288);function N(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function L(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return i.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}function O(){let e=N();return(0,I.Fk)((e,r)=>r?e.get(r)?.type:void 0,e)}function R(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function P(){let e=N(),r=(0,I.g0)(e);if(null!=e&&null!=r)return r}function D(){let e=L(),r=(0,I.dB)(e??[]);if(e)return r}function k(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,I.hr)((e,r)=>e,e)}function M(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,v.hS)(n))return n})}function F(e,r){let n=(0,o.wA)(),a=i.useCallback(()=>{if(!e)return null;n(E.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?a:void 0}function x(e){let r=(0,S.ks)(),n=(0,u.v4)(),a=(0,T.u)(e??void 0),i=(0,y.m0)(),o=(0,c.md)(g.v);if(!a)return;if(!i||!o)return a.name;let s=r&&"first-party"===n.type?n.id:p.uz;return(0,u.xv)(a,s)??a.name}function U(e){let r=(0,y.m0)(),n=(0,u.v4)(),a=(0,_.sQ)(),i=(0,c.md)(g.v);if(e)return r&&(i||a)?(0,u.xv)(e,n.id)??e.name??(0,d.t)("variables.missing_name"):e.name}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let a="",i={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...i,...e[2]}:i,l=s?`"${e[1]}"`:e[1];a+=`${r}${e[0]}${o}${l}${n}
`}}),a}e.copyPairs=n;let a=["true","false","nil","null"];function c(e,r){return`var(--${(0,f.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&a.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let d=(e,r,n)=>{let{paint:a}=e,{variable:i}=e.variable??{};switch(a.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return i?c(r,i.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>c(e,r.name)):null)??n}(e,i);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function u(e,r){return e?.map(n=>d(n,r,e?.length||0))?.join(",\n")}e.copyColors=u;let p={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},_=(e=[])=>e.flatMap(e=>e.type===w.q.STYLE?e.paints:e),h="background";e.useCopyAllColors=function(e,r){let a=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=_(e),l=i.useCallback(()=>{if(1===a&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let a=u(s,r),i=[];a&&i.push([h,a]);let o=[...e],l=o[0]?p[o[0]]:void 0;return l&&i.push(["background-blend-mode",l]),n(i,{suffix:";"})}}return n(s.reduce((e,n)=>{let a=n.paint.blendMode,i=a?p[a]:void 0;i&&e.push(["background-blend-mode",i]);let o=d(n,r,1),s=o?[h,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,a,r]);return s?l:void 0};let g=(r,a,i,o)=>{let s=a.includes(" "),l=_(i),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${a} solid ${d}`;let u=s?[["border-width",a],["border-style","solid"]]:[[`${o??"border"}`,`${a} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};function E(e){return e.map(e=>void 0===e?"":"string"==typeof e?e:`${R(e)}px`)}e.useStrokeCopyValue=function(e,r,n){let a=(0,b.Ku)(),o=_(r);return i.useMemo(()=>g(a,e,o,n),[a,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,b.Ku)();return i.useMemo(()=>e.map(e=>g(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])},e.withPixels=E;let y=(r,a,i,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(a,i);if(!r.offset)return;let[l,c,d,u,p]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[E([(0,C.NX)({variable:l})||r.offset?.x,(0,C.NX)({variable:c})||r.offset?.y,(0,C.NX)({variable:d})||r.radius,(0,C.NX)({variable:u})||r.spread]).join(" "),(0,C.NX)({variable:p})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(m.t).join(" ")]],{suffix:";"})};e.useCopyAllShadows=function(e){let r=(0,b.Ku)(),n=(0,A.OE)(e,e=>e.color),a=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,T.hg)(a??[]);return i.useCallback(()=>n.filter(e=>e.color).map((e,n)=>y(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let v=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},I=e=>`${function(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}(1e3*e,0)}ms`,S=r=>{let n=`// ${r.event}
`,a=r.action,i=[];return r.delay&&i.push(["animation-delay",I(r.delay)]),r.action&&(i.push([`// ${a?.action}`,`"${a?.value??""}"`]),a?.hasAnimation&&(i.push(["// Animate",a?.animation??""]),a?.isSpringTransition?i.push(["// Spring",v(a?.curve,a?.isSpringTransition,a?.curveFunction)]):(i.push(["animation-timing-function",v(a?.curve)]),i.push(["animation-duration",I(a.duration??0)])))),n+e.copyPairs(i,{suffix:";"})};e.useCopyAllInteractions=function(e){return i.useCallback(()=>e.map(e=>S(e)).join("\n"),[e])}})(a||(a={}));let B=e=>e.toLocaleString("en",{maximumFractionDigits:4,useGrouping:!1});function G({value:e,isTextProperty:r}){let n=(0,y.m0)(),a=(0,u.v4)(),i=(0,h.Em)(),o="number"==typeof e?e:0,s=(0,h.qM)(a,o,B,{isTextProperty:r});return n&&i&&0!==o?s:void 0}},415356:(e,r,n)=>{n.d(r,{X:()=>o});var a=n(848318),i=n(17753);function o(e,r=!1){let[n,s]=a.useState(!1),l=a.useRef(void 0),c=a.useRef(null);return(a.useLayoutEffect(()=>{let n=l.current!==r;e&&c.current&&n&&(l.current=r,s(c.current.scrollWidth>c.current.offsetWidth))},[e,r]),n&&e)?{ref:c,"data-tooltip-type":i.Ib.TEXT,"data-tooltip":`${e}`,"data-tooltip-text-left":!0}:{ref:c}}},368085:(e,r,n)=>{n.d(r,{Cm:()=>ey,HF:()=>eU,I7:()=>eh,KY:()=>eA,M6:()=>ef,NJ:()=>eS,QG:()=>ep,QZ:()=>er,SH:()=>Q,SV:()=>Z,VZ:()=>ea,Xm:()=>ev,YE:()=>eC,ZQ:()=>X,_$:()=>eF,_p:()=>eb,bh:()=>eR,cK:()=>ek,d1:()=>eu,fY:()=>eO,kI:()=>eL,ln:()=>en,lz:()=>eB,nd:()=>ec,p7:()=>eN,r4:()=>eP,rh:()=>eT,sD:()=>e_,wy:()=>eI,x0:()=>eV,zG:()=>ex,zp:()=>eM});var a=n(848318),i=n(301168),o=n(773511),s=n(990066),l=n(186606),c=n(195124),d=n(382902),u=n(536384),p=n.n(u),m=n(547481),_=n(989232),h=n(543981),g=n(813009),f=n(857607),E=n(238462),y=n(656329),b=n(781239),v=n(759604),T=n(334804),I=n(178806),S=n(967688),A=n(972402),w=n(174945),C=n(361964),N=n(792533),L=n(372566),O=n(995218),R=n(489082),P=n(963307),D=n(788903),k=n(730143),M=n(4881),F=n(614092),x=n(259964),U=n(17753),B=n(483157),G=n(614892),V=n(985789),H=n(96526),z=n(986918),K=n(21614),W=n(415356),j=n(702493);function Y({name:e,fileKey:r,border:n,children:i,hideHeader:o,noPadding:s,noBorder:l,isSubsection:d,fadedTitle:u,recordingKey:m,dataTestId:h,onClick:E}){let{selectedNodeId:b,selectedPageId:v,isMultiSelect:T,sceneGraph:I,editorType:S}=(0,g.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?x.nT.Design:e.selectedView.editorType}}),A=!!(0,C.hA)(),w=n=>{e&&(0,_.trackEvent)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:S})},N=n?j.F7:j.YK;return o&&(N=n?j.S4:j.Tq),d&&!u?N=p()(N,j.WD):s&&(N=j.JY),l&&(N=p()(N,j.mD)),a.createElement(G.zi,{className:N,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,f.Fo)(e)&&e.keyCode===f.Uz.C?(r=!0,w({action:"copy"})):(0,f.Fo)(e)&&e.keyCode===f.Uz.A?(r=!0,w({action:"select_all"})):y.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let e=window.getSelection();if(!e)return;e.removeAllRanges()}},onDoubleClick:n=>{if(e)return(0,_.trackEvent)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,f.sN)(n),fileKey:r,editor_type:S}),!1},onClick:n=>{let a,i;if(e){if(E?.(n),b&&I)try{let e=(0,c.Ql)(I,b);a=e?.guid,i=e?.type}catch{}return(0,_.trackEvent)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,f.sN)(n),fileKey:r,selectedPageId:v,selectedNodeId:b,topLevelFrameId:a,topLevelNodeType:i,isMultiSelect:T,editor_type:S,isDevModeFocusView:A}),!1}},recordingKey:m,"data-testid":h,id:h},i)}let $=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},q=(e,r)=>{let[n,i]=a.useState(!1),o=a.useCallback(()=>i(!0),[i]),s=a.useCallback(()=>i(!1),[i]);return a.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function X(e,r){let{value:n,eventHandlers:i,isHovered:o}=$(r),[s,l]=q(e);return a.useMemo(()=>({value:s||n,eventHandlers:{...i,...l},isHovered:o}),[s,l,n,i,o])}let J=a.createContext({});function Z(e,r){let n=a.useContext(J),i=a.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,h.j)(e,i);return(r||n).recordingKey?o:E.lQ}function Q(e){let{title:r,copyAllValue:n,additionalHeaders:o,collapsedHeaders:l,eventHandlers:c,isHovered:u,recordingKey:m,isCollapsedAtom:_=et,collapseEnabled:h=!1,hasCollapsibleContent:g=!0,titleAccessory:f,headerRef:E}=e,y=Z("inspection_panel_copy_all_click",a.useContext(J)),v=(0,i.wA)(),T=(0,O.m0)(),A=(0,b.rf)(m,"click",a.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();e&&(v(N.lW({stringToCopy:e,ignoreLineBreaks:!1})),y({value:e}))},[y,v,n])),{ref:w,...C}=(0,W.X)(r,u),L=(0,a.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:T}),[T,r]),[R,P]=(0,d.fp)(_),D=a.useCallback(()=>{g&&h&&P?.(!R)},[P,R,g,h]),k=e.faded||!!P&&!g,M=!h,F=h&&(R||!g)&&!!l,x=!h||!R,{onMouseDown:G,onMouseUp:V}=function(){let e=a.useRef(-1);return{onMouseDown:a.useCallback(r=>{r.timeStamp-e.current<350&&r.stopPropagation()},[]),onMouseUp:a.useCallback(r=>{e.current=r.timeStamp},[])}}();return r?a.createElement("div",{className:p()(j.Dn,{[j._]:e.snug||e.isSubsection,[j.k6]:T}),ref:E,onMouseDownCapture:h?G:void 0,onMouseUpCapture:h?V:void 0},a.createElement(B.x,{faded:k,innerRef:w,...C,className:p()(j.yr,{[j.Xx]:e.thin||e.isSubsection,[j.ty]:F}),"data-onboarding-key":e.onboardingKey,"data-testid":"inspectPanelTitle",doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,highlightOnHover:!!P&&g&&!e.faded,isPanelBodyCollapsedAtom:g&&h?_:null,onClick:D},a.createElement("h3",null,r),R&&e.hideAccessoryWhenCollapsed?null:f,F&&a.createElement(a.Fragment,null,a.createElement("div",{className:j.Pm}),a.createElement("div",{className:j.UE},l))),!F&&a.createElement("div",{className:p()(j.W0,T&&j.QU)},o,x&&n&&!T&&a.createElement(I.Me,{htmlAttributes:{...c,"data-tooltip":(0,S.t)("inspect_panel.copy"),"data-tooltip-type":U.Ib.TEXT},onClick:A,trackingProperties:L,"aria-label":(0,S.t)("inspect_panel.copy"),disabled:e.disableCopyAll},a.createElement(s.X,null))),M&&e.children):null}let ee=(0,M.Wh)(()=>(0,d.eU)({})),et=(0,d.eU)(()=>!1,()=>{});function er(e,r=!1){let n=function(e,r=!1){let n=(0,A._I)(),i=!n,o=(0,a.useMemo)(()=>e?(0,m.n)(300,!0,(r,n)=>{r(ee,r=>(_.definedAnalyticsHandler.trackDefinedEvent("dev_mode.inspect_panel.collapse",{panelKey:e,expanded:!n}),{...r,[e]:n}))}):E.lQ,[e]);return(0,a.useMemo)(()=>e&&n?(0,d.eU)(n=>n(ee)[e]??r,(e,r,n)=>{o(r,n)}):e&&i?(0,d.eU)(e=>!1,(e,r,n)=>E.lQ):null,[n,e,i,o,r])}((0,O.m0)()?e:void 0,r),i=!!n;return{collapsedInspectionPanelAtom:i?n:et,collapseEnabled:i}}function en({isCollapsed:e,children:r,childrenWrapperClassname:n,bodyIsEmpty:i,ref:o}){return a.createElement("div",{className:p()(j.HH,e?void 0:n),ref:o},!e&&!i&&r)}function ea(e){let{bodyIsEmpty:r,children:n,title:o="",copyAllValue:s,recordingKey:l,panelKey:c}=e,u=(0,i.d4)(k.sS),p=a.useMemo(()=>`inspect:${l.toLowerCase()}`,[l]),m=a.useMemo(()=>({recordingKey:`inspect:${l}`}),[l]),{value:_,eventHandlers:h,isHovered:g}=X(j.Rp,j.fF),{collapsedInspectionPanelAtom:f,collapseEnabled:E}=er(c,e.defaultCollapsed),[y]=(0,d.fp)(f);return a.createElement(Y,{border:!0,dataTestId:`${l}-inspection-panel`,fadedTitle:e.fadedTitle,fileKey:u,hideHeader:e.hideHeader,isSubsection:e.isSubsection,name:p,noBorder:e.noBorder,noPadding:e.noPadding,onClick:e.onClick,recordingKey:(0,b.Pt)(l,"panel")},a.createElement(J.Provider,{value:m},e.formattedHeader??(!0!==e.hideHeader&&a.createElement(Q,{additionalHeaders:e.additionalHeaders,collapseEnabled:E,collapsedHeaders:e.collapsedHeaders,copyAllValue:s,disableCopyAll:e.disableCopyAll,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,eventHandlers:h,faded:e.fadedTitle,hasCollapsibleContent:!r,headerRef:e.headerRef,hideAccessoryWhenCollapsed:e.hideAccessoryWhenCollapsed,isCollapsedAtom:f,isHovered:g,isSubsection:e.isSubsection,noPadding:e.noPadding,onboardingKey:e.headerOnboardingKey,recordingKey:(0,b.Pt)(l,"header"),snug:e.snugTitle,thin:e.thinTitle||e.isSubsection,title:o,titleAccessory:e.titleAccessory},e.headerChildren)),a.createElement(en,{isCollapsed:y,bodyIsEmpty:r,childrenWrapperClassname:_},n)))}let ei={maximumFractionDigits:2,useGrouping:!1},eo={maximumFractionDigits:2},es={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},el={...es,unitDisplay:"short"};function ec(e,r){let n=e.toLocaleString("en",ei);return`${n}${r}`}function ed(e){switch(e.format){case"pixels":if(!e.value)return;if("number"==typeof e.value)return ec(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",eo)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...ei,style:"percent"});case"fig_number":return e.value?L.wf.format(e.value):void 0;case"millis":return e.value&&ec(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",es);case"mixed":return e.value.map(ed).join(", ");default:return e.value?.toString()}}function eu(e){let[r,n]=a.useState(!1),i=e.label||e.defaultLabel,o=(0,O.m0)(),s=p()({[j.Nw]:!!e.label,[j.G1]:!e.label,[j.wt]:!e.label&&!o},e.labelClassName),l=e_(i),c=(0,D.u)(e.variableId);return a.createElement(eb,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),isHovered:r,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},e.children&&a.createElement("div",null,e.children),i&&a.createElement("div",{className:j.Pq},e.isVariable?a.createElement(H.wG,{text:i,isDeleted:c?.subscriptionStatus==="LOCAL"&&c?.isSoftDeleted,containerClassName:j.gO,disableHover:!0,isHovered:r,isNonInteractive:!0,ui3Height:o}):a.createElement("span",{ref:l,className:s,dir:"auto"},i)))}function ep({label:e}){return a.createElement(eb,{className:j.uI},a.createElement("div",{className:j.Bz},e))}function em(){return a.createElement("span",{className:j.jg})}function e_(e){let r=a.useRef(null),n=r.current,i=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return a.useEffect(()=>{n&&i&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",U.Ib.TEXT))},[e,n,i]),r}function eh({title:e}){return a.createElement("div",{className:j.Dn},a.createElement(B.Q,{className:j.yr},e))}let eg=e=>e?.valueOf()===(0,S.t)("collaboration.branching_node_treatments.value.empty_dash");function ef({basis:e,change:r,name:n}){return a.createElement("div",{className:j.zy},a.createElement("span",{className:j.rG},n),a.createElement("div",{className:j.vd},a.createElement(o.E,{onClick:e.onClick,className:p()(j.Hz,j.ij,eg(e.value)&&j.T7)},e.value),a.createElement(o.E,{onClick:r.onClick,className:p()(j.Zg,j.ij,eg(r.value)&&j.T7)},r.value)))}function eE({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:i,truncateStart:o}){let{variableId:s}=e,l=(0,D.u)(s),c=(0,K.uV)(l)??"",d=(0,D.t8)(s),u=(0,O.m0)();if("mixed"===e.format){let o=e.value.some(e=>!!e?.variableId);return a.createElement("div",{className:p()(j.M3,o&&j.Vd)},e.value.map((s,l)=>a.createElement("div",{key:l},a.createElement(eE,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:i}),l<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let m=`${ed(e)}`;if(c){let e=l?.subscriptionStatus==="LOCAL"&&l.isSoftDeleted;return a.createElement(H.wG,{containerClassName:p()(j.gO,n),dataTestId:"styledValueVariable",disableHover:!0,endTruncate:!o,fullWidth:u,isDeleted:e,isHovered:r,isNonInteractive:!0,text:c,thumbnailValue:u?d:void 0,tooltip:u?void 0:m,ui3Height:u})}return a.createElement(T.G,{text:m,truncate:o?"start":"end"})}function ey(e,r,n){let a=Z("inspection_property_copy_click");return(0,z.g7)(e,r,n),(0,K.Cj)(e,()=>{a({property:r,value:e})})}let eb=a.memo(e=>{let r="value"in e?ed(e):void 0,n=(0,K.As)(e.variableId),i=!!r||!!e.variableId||!!e.copyValue,s=null===e.copyValue?void 0:i?e.copyValue||n||r:void 0,l=ey(s,e.name,e.copyName),[c,d]=a.useState(!1),u=(0,W.X)(e.name),m=(0,W.X)(r),_=a.useRef(null),h=(0,O.m0)(),g=h&&!e.disableDetailModalEntry,f=(0,w.Yq)(_),E=e.accessoryButton||g,y=g&&(c||f),b="redact"in e?e.redact:void 0,v=a.useMemo(()=>void 0===b?new Set:new Set(Array.isArray(b)?b:[b]),[b]),I={subRowClassName:h?j.sR:j.Mn,rowClassName:h?j.mm:j.k$},S=p()(e.className||(e.subPropertyRow?I.subRowClassName:I.rowClassName)),A=j.Nw,C=j.Bz,N=h?j.uo:j.A9,L=()=>{d(!0),e.onMouseEnter?.()},P=()=>{d(!1),e.onMouseLeave?.()},{onCopy:D}=e,k=l||D?()=>{l&&s&&l?.(),D?.()}:void 0,M="truncateStart"in e?e.truncateStart:void 0;if(!("value"in e)){let r=a.createElement("div",{className:S},e.name&&e.showName&&a.createElement("span",{className:C,...u,"data-tooltip-tip-align-left":!0},e.name),e.children);return k?a.createElement("div",{className:p()(N,{[j.ri]:E,[j.e8]:h&&E,[j.KP]:h&&!E}),onMouseEnter:L,onMouseLeave:P,"data-testid":e.dataTestId,ref:_},a.createElement(o.E,{className:j.Uh,onClick:k},r),e.accessoryButton?e.accessoryButton:g?a.createElement(w.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,styleNodeId:e.styleNodeId,styleType:e.styleType,rowRef:_,isHovered:e.isHovered??c,recordingKey:"inspection_property"}):null):a.createElement("div",{className:p()({[j.ri]:E,[j.zs]:e.forceCopyableStyling,[j.z9]:h&&e.forceCopyableStyling,[j.e8]:h&&E,[j.KP]:h&&!E}),onMouseEnter:L,onMouseLeave:P,"data-testid":e.dataTestId,ref:_},r,e.accessoryButton?e.accessoryButton:g?a.createElement(w.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,styleNodeId:e.styleNodeId,styleType:e.styleType,rowRef:_,isHovered:e.isHovered??c,recordingKey:"inspection_property"}):null)}if(!e.variableId&&(!e.value||v.has(e.value))||e.value&&(0,R.gl)(e.value))return null;let F=a.createElement(a.Fragment,null,e.indent&&a.createElement("div",null),e.name?a.createElement("span",{className:C,"data-testid":"inspectionPropertyName",...u,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},a.createElement(T.G,{text:e.name})):a.createElement(em,null),a.createElement("span",{className:A,"data-testid":"inspectionPropertyValue",...m,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},a.createElement(eE,{valueProps:e,isHovered:c,rowRef:_,truncateStart:M})));return a.createElement("div",{className:p()(s?N:h?j.pT:j.HD,{[j.ri]:E,[j.KP]:h,[j.z7]:y}),onMouseEnter:L,onMouseLeave:P,"data-testid":e.dataTestId,ref:_},a.createElement("div",{className:S,onClick:k,"data-testid":"inspectionPropertyRow"},F),e.accessoryButton?e.accessoryButton:g?a.createElement(w.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:_,isHovered:c,recordingKey:`inspection_property_${e.name}`}):null)});function ev({name:e,copyName:r,copyValue:n,selectionPropertyKey:i,valueFormatter:o,copyValueFormatter:s,redact:l,subPropertyRow:c}){let d=(0,P.Gt)(i)??void 0,u=o?"function"==typeof o?o(d):o.format(d):d,p=s?"function"==typeof s?s(n??d):s.format(n??d):n??d;return a.createElement(eb,{name:e,value:u,copyName:r,copyValue:p,redact:l,subPropertyRow:c})}function eT(e,r){let n=(0,K.uQ)();return(0,F.Fk)((e,r,n)=>n(e?.get(r)),e??n??"",r)}function eI({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,valueFormatter:o,copyValueFormatter:s,subPropertyRow:l}){let c=eT(n,i),d=o(c),u=s?.(c);return a.createElement(eb,{name:e,value:d,copyName:r,copyValue:u,subPropertyRow:l})}function eS({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,valueFormatter:o,copyValueFormatter:s,redact:l,subPropertyRow:c}){let d=eT(n,i),u=o?"function"==typeof o?o(d):o.format(d):d,p=s?"function"==typeof s?s(d):s.format(d):d;return a.createElement(eb,{name:e,value:u,copyName:r,copyValue:p,redact:d===l?d:l,subPropertyRow:c})}function eA({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,variableField:o,variableConsumptionMap:s,valueFormatter:l,redact:c,subPropertyRow:d,disableSuggestions:u,disableDetailModalEntry:p}){let m=eT(n,i),_=(0,F.Fk)((e,r)=>e?.get(r??"")?.getVariableConsumptionMap(),n),h=(0,V.e4)(o,m,s??_,u),g=l?"function"==typeof l?l(m):l.format(m):m;return a.createElement(eb,{name:e,value:g,copyName:r,variableId:h?.variable?.node_id,matchingVars:h?.matchingVars,redact:m===c?m:c,subPropertyRow:d,disableDetailModalEntry:p})}function ew(e){let{value:r,copyValue:n,isTextProperty:i}=e,o=(0,K.n4)({value:r,isTextProperty:i}),s=(0,K.n4)({value:e.variableId||"number"!=typeof n?void 0:n,isTextProperty:i});return a.createElement(eb,{...e,value:o??e.value,copyValue:s??n,format:"pixels"})}function eC({name:e,copyName:r,selectionPropertyKey:n,valueFormatter:i,valueOverride:o,isTextProperty:s,subPropertyRow:l}){let c=(0,P.Gt)(n)??void 0,d=i?i(c):c;return a.createElement(ew,{name:e,copyName:r,value:o??d,isTextProperty:s,subPropertyRow:l})}function eN({name:e,copyName:r,selectionPropertyKey:n,variableField:i,variableConsumptionMap:o,valueFormatter:s,valueOverride:l,shouldFallbackCopyValueToRawValue:c,isTextProperty:d,subPropertyRow:u,disableSuggestions:p,disableDetailModalEntry:m}){let _=(0,P.Gt)(n)??void 0,h=s?s(_):_,g=(0,V.pc)(i,"number"==typeof h?h:_,o,p);return a.createElement(ew,{name:e,copyName:r,value:l??h,copyValue:g?.variableDisplayName??c?_:void 0,variableId:g?.variable?.node_id,matchingVars:g?.matchingVars,isTextProperty:d,subPropertyRow:u,disableDetailModalEntry:m})}function eL({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,valueFormatter:o,valueOverride:s,isTextProperty:l,subPropertyRow:c}){let d=eT(n,i),u=o?o(d):d;return a.createElement(ew,{name:e,copyName:r,value:s??u,isTextProperty:l,subPropertyRow:c})}function eO({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,variableField:o,variableConsumptionMap:s,valueFormatter:l,valueOverride:c,isTextProperty:d,subPropertyRow:u,disableSuggestions:p,disableDetailModalEntry:m}){let _=eT(n,i),h=l?l(_):_,g=(0,V.pc)(o,"number"==typeof h?h:_,s,p);return a.createElement(ew,{name:e,copyName:r,value:c??h,variableId:g?.variable?.node_id,matchingVars:g?.matchingVars,isTextProperty:d,subPropertyRow:u,disableDetailModalEntry:m})}function eR({shorthandName:e,expandedName0:r,expandedName1:n,expandedName2:i,expandedName3:o,variableField0:s,variableField1:l,variableField2:c,variableField3:d,value0:u=0,value1:p=0,value2:m=0,value3:_=0,shorthandCopyName:h,expandedCopyName0:g,expandedCopyName1:f,expandedCopyName2:E,expandedCopyName3:y}){let b=(0,V.pc)(s,u),v=(0,V.pc)(l,p),T=(0,V.pc)(c,m),I=(0,V.pc)(d,_),S=a.useMemo(()=>0===u&&0===p&&0===m&&0===_&&b?.variable?.node_id===void 0&&v?.variable?.node_id===void 0&&T?.variable?.node_id===void 0&&I?.variable?.node_id===void 0,[u,p,m,_,b?.variable?.node_id,v?.variable?.node_id,T?.variable?.node_id,I?.variable?.node_id]),A=a.useMemo(()=>[{value:u,...b},{value:p,...v},{value:m,...T},{value:_,...I}],[u,p,m,_,b,v,T,I]),w=a.useMemo(()=>[r,n,i,o],[r,n,i,o]),C=a.useMemo(()=>[g,f,E,y],[g,f,E,y]);return S?null:A.every(e=>e.value===u&&e?.variable?.node_id===b?.variable?.node_id)?a.createElement(ew,{name:e,copyName:h,value:u,variableId:b?.variable?.node_id,matchingVars:b?.matchingVars}):a.createElement(a.Fragment,null,a.createElement(ep,{label:e}),A.map((e,r)=>a.createElement(ew,{key:r,name:w[r],copyName:C?.[r],value:e.value,variableId:e?.variable?.node_id,matchingVars:e?.matchingVars,subPropertyRow:!0})))}function eP({name:e,copyName:r,selectionPropertyKey:n,variableField:i,variableConsumptionMap:o,disableSuggestions:s,disableDetailModalEntry:l,subPropertyRow:c}){let d=(0,P.Gt)(n)??0,u=(0,V.pc)(i,d,o,s),p=u?.variable?.node_id;return a.createElement(eb,{copyName:r,copyValue:void 0===d||p?void 0:Number(d).toLocaleString("en",{maximumFractionDigits:2}),disableDetailModalEntry:l,format:"percent",matchingVars:u?.matchingVars,name:e,redact:1,subPropertyRow:c,value:d,variableId:p})}function eD(e){let{value:r,copyValue:n,isTextProperty:i}=e,o=(0,K.n4)({value:r?.units==="PIXELS"?r.value:void 0,isTextProperty:i}),s=(0,K.n4)({value:e.variableId||r?.units!=="PIXELS"||"number"!=typeof n?void 0:n,isTextProperty:i});if(o){let{value:r,...i}=e;return a.createElement(eb,{...i,value:o,copyValue:s??n,name:e.name,className:e.className,indent:e.indent})}return a.createElement(eb,{...e,format:"fig_number"})}function ek({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,variableField:o,variableConsumptionMap:s,isTextProperty:l,subPropertyRow:c,disableSuggestions:d,disableDetailModalEntry:u}){let p=eT(n,i),m=(0,V.pc)(o,p?.value,s,d||p?.units==="PERCENT");return a.createElement(eD,{name:e,copyName:r,value:p,variableId:m?.variable?.node_id,matchingVars:m?.matchingVars,isTextProperty:l,subPropertyRow:c,disableDetailModalEntry:u})}function eM({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,isTextProperty:o,subPropertyRow:s,disableDetailModalEntry:l}){let c=eT(n,i);return a.createElement(eD,{name:e,copyName:r,value:c,isTextProperty:o,subPropertyRow:s,disableDetailModalEntry:l})}function eF({name:e,copyName:r,selectionPropertyKey:n,valueFormatter:i,subPropertyRow:o}){let s=(0,P.Gt)(n)??0,l=i?i(s):s;return a.createElement(eb,{name:e,value:l,copyName:r,subPropertyRow:o})}function ex({name:e,copyName:r,nodeId:n,scenePropertyAccessor:i,variableField:o,variableConsumptionMap:s,subPropertyRow:c,disableSuggestions:d,disableDetailModalEntry:u}){let p=eT(n,i),m=(0,V.pc)(o,p,s,d);return a.createElement(eb,{name:e,value:p,copyName:r,variableId:m?.variable?.resolvedType===l.rXF.FLOAT?m?.variable?.node_id:void 0,matchingVars:m?.matchingVars,subPropertyRow:c,disableDetailModalEntry:u})}function eU({name:e,copyName:r,selectionPropertyKey:n,subPropertyRow:i}){let o=(0,P.Gt)(n)??void 0;return a.createElement(eb,{name:e,value:o,copyName:r,copyValue:o?.toLocaleString("en",el),format:"degrees",subPropertyRow:i})}function eB(e){return a.createElement(eb,{...e,format:"millis"})}function eG({value:e,extras:r,index:n,renderElement:a,isLast:i}){return a(e,r,n,i)}function eV({limit:e,data:r,renderElement:n,extras:i}){let{visibleItems:o,showMoreButton:s}=(0,v.y)({items:r,getShowMoreLabel:e=>(0,S.t)("inspect_panel.property.remaining_more",{remaining:e}),pageSize:e,shouldResetOnSelectionChange:!0,ui3Version:!0});return a.createElement(a.Fragment,null,o.map((e,r)=>a.createElement(eG,{value:e,extras:i,renderElement:n,key:r,index:r,isLast:r===o.length-1})),s)}},900898:(e,r,n)=>{n.d(r,{Rh:()=>I,ck:()=>S,iV:()=>C,x$:()=>T});var a=n(848318),i=n(301168),o=n(938982),s=n(658029),l=n(531788),c=n(143823),d=n(534497),u=n(469508),p=n(410725),m=n(998568),_=n(967688),h=n(533226),g=n(730143),f=n(55116),E=n(17753),y=n(7905),b=n(355893);function v(e){let r;let n=e.animatedImage||e.image;"VIDEO"===e.type&&e.video?r=e.video.hash:n&&n.hash&&(r=n.hash);let a="";return r&&(a=Array.from(r).map(e=>(e<16?"0":"")+e.toString(16)).join("")),a??null}function T(e){return"VIDEO"===e.type?"mp4":null!=e.animatedImage?"gif":"png"}function I(e){let r=e.animatedImage||e.image,n="VIDEO"===e.type?"video":"image";return`${r&&r.name||n}`}class S{format(e,r,n){switch(e){case"INNER_SHADOW":return(0,_.t)("inspect_panel.property.effect_inner_shadow");case"DROP_SHADOW":return(0,_.t)("inspect_panel.property.effect_drop_shadow");case"FOREGROUND_BLUR":if("PROGRESSIVE"===r)return(0,_.t)("inspect_panel.property.effect_progressive_layer_blur");return(0,_.t)("inspect_panel.property.effect_layer_blur");case"BACKGROUND_BLUR":if("PROGRESSIVE"===r)return(0,_.t)("inspect_panel.property.effect_progressive_background_blur");return(0,_.t)("inspect_panel.property.effect_background_blur");case"NOISE":switch(n){case"MONOTONE":return(0,_.t)("inspect_panel.property.effect_mono_noise");case"DUOTONE":return(0,_.t)("inspect_panel.property.effect_duo_noise");case"MULTITONE":return(0,_.t)("inspect_panel.property.effect_multi_noise");default:return(0,_.t)("inspect_panel.property.effect_noise")}case"GRAIN":return(0,_.t)("inspect_panel.property.effect_texture");default:return}}}function A({video:e,loadingChildren:r,children:n,variant:i="text"}){let d=(0,g.tS)()??"",u=v(e),[p,h]=a.useState(!1),f=a.useCallback(()=>{u&&(h(!0),y.S.getVideosDownload({hexHash:u,fileKey:d}).then(r=>{fetch(r.data.meta.signed_url).then(e=>e.blob()).then(r=>{(function(e,r){let n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)})(r,`${I(e)}.${T(e)}`),setTimeout(()=>h(!1),1e3)}).catch(e=>{(0,m.$D)(o.e.DEVELOPER_TOOLS,e,{extra:{fileKey:d,hexHash:u}}),h(!1)})}))},[d,u,e]);if(!u)return a.createElement(a.Fragment,null,n);let b=r??(0,_.t)("common.loading");return"icon"===i?a.createElement(s.K,{onClick:f,disabled:p,"aria-label":(0,_.t)("inspect_panel.images.download_with_type",{type:(0,_.t)("inspect_panel.images.download_type_video")}),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,_.t)("inspect_panel.images.download")}},p?b:n):a.createElement(l.$n,{variant:"link",onClick:f,disabled:p,iconPrefix:p?a.createElement("div",{style:{marginRight:4}},a.createElement(c.k,{size:"sm"})):void 0,"aria-label":(0,_.t)("inspect_panel.images.download_with_type",{type:(0,_.t)("inspect_panel.images.download_type_video")}),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,_.t)("inspect_panel.images.download")}},p?b:n)}function w({image:e,children:r,variant:n="text"}){let o=function({paint:e,fileKey:r}){if(!r||"VIDEO"===e.type)return null;let n=v(e);return n?`/file/${r}/image/${n}/download`:null}({paint:e,fileKey:(0,g.tS)()??""}),s=(0,i.wA)(),l=a.useCallback(()=>{s(h.aK())},[s]);if(!o)return a.createElement(a.Fragment,null,r);let c=`${I(e)}.${T(e)}`;return"icon"===n?a.createElement(d._,{trusted:!0,href:o,download:c,onClick:l,"aria-label":(0,_.t)("inspect_panel.images.download_with_type",{type:(0,_.t)("inspect_panel.images.download_type_image")}),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,_.t)("inspect_panel.images.download")},className:b.J},r):a.createElement(u.N,{trusted:!0,href:o,download:c,onClick:l,"aria-label":(0,_.t)("inspect_panel.images.download_with_type",{type:(0,_.t)("inspect_panel.images.download_type_image")}),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,_.t)("inspect_panel.images.download")}},r)}function C({image:e,loadingChildren:r,children:n,variant:i="text"}){let o=(0,g.tS)()??"",s=(0,p.Rs)(f.nlH,{key:o});return s.data?.file&&"error"!==s.data.file.status&&s.data?.file?.data?.hasPermission?"VIDEO"===e.type&&e.video?a.createElement(A,{video:e,children:n,loadingChildren:r,variant:i}):a.createElement(w,{image:e,children:n,loadingChildren:r,variant:i}):a.createElement(a.Fragment,null,n)}},277606:(e,r,n)=>{n.d(r,{Kx:()=>k,d7:()=>V,hN:()=>B,n5:()=>U,s0:()=>M,yg:()=>H});var a=n(848318),i=n(301168),o=n(773511),s=n(186606),l=n(286536),c=n(536384),d=n.n(c),u=n(967688),p=n(43322),m=n(232540),_=n(764539),h=n(174945),g=n(372566),f=n(995218),E=n(959750),y=n(788903),b=n(730143),v=n(218510),T=n(824286),I=n(21614),S=n(368085),A=n(900898),w=n(990377),C=n(289866),N=n(325590),L=n(985789),O=n(346288),R=n(659035),P=n(811711);let D=new A.ck;function k(e,r,n){return(0,S.Cm)(I.T4.withPixels([(0,O.NX)({variable:r})||e]).join(""),n)}function M({styleKey:e,styleType:r,rowWithAccessoryButton:n,itemIndex:i,itemType:o}){let s=(0,b._G)(),l=(0,m.Fj)(e),c=(0,I.Cj)(l?.name);return a.createElement("div",{className:d()(P.yY,n?P.Ln:P.ix)},a.createElement(w.g,{libraryKey:s,dsStyle:l,styleType:r,onClick:c,itemIndex:i,elementType:D.format(o)}))}function F({effect:e,styleKey:r,itemIndex:n}){let i=D.format(e.type,e.blurOpType);return r?a.createElement(M,{styleKey:r,styleType:"EFFECT",itemIndex:n,itemType:e.type}):i?a.createElement("div",{className:P.yY},(0,C.vG)(e),i):null}function x({effect:e,styleName:r}){let n=D.format(e.type,e.blurOpType);return a.createElement(S.d1,{className:P.n1,labelClassName:P.Q5,label:r,defaultLabel:n},(0,C.vG)(e))}function U(e){var r;let n=a.useRef(null);return a.createElement(a.Fragment,null,a.createElement("div",{className:P.hq},a.createElement("div",{className:P.i5,ref:e.tooltipRef},e.label)),a.createElement(o.E,{className:P.cu,ref:n,onClick:e.onClick},a.createElement(R.S,{value:e.value})),e.shouldShowVariableInspection&&a.createElement(a.Fragment,null,a.createElement(h.$Q,{variableId:(r=e.var,r?.value?.alias?l.dI(r.value.alias):void 0),matchingVars:e.suggestedVariable?.matchingVars,rowRef:e.rowRef,rowRefForModalId:n,isHovered:e.isHovered,recordingKey:e.recordingKey}),a.createElement("div",null)))}function B(e){return a.createElement(S._p,{className:e.propertyContentClassName,onMouseEnter:()=>e.setHovered(!0),onMouseLeave:()=>e.setHovered(!1),isHovered:e.isHovered,disableDetailModalEntry:!0,forceCopyableStyling:!0},e.button1,e.button2)}function G(e){let r=(0,f.m0)(),n=(0,h.i2)()&&!e.disableDetailModalEntry,i=a.useRef(null),o=(0,E.Ku)(),[s,c]=a.useState(!1),[p,m]=a.useState(!1),{spread:_,radius:b,offset:v,blendMode:A,showShadowBehindNode:w,visible:C,radiusVar:N,spreadVar:O,xVar:R,yVar:D,colorVar:M,itemIndex:G,blurOpType:V,startRadius:H,startOffset:z,endOffset:K}=e,W="PROGRESSIVE"===V,[j,Y,$,q]=(0,y.hg)([R,D,N,O,M].map(e=>e?.value?.alias?l.dI(e.value.alias):void 0)),X=k(v?.x,j,(0,u.t)("inspect_panel.shadows.x")),J=k(v?.y,Y,(0,u.t)("inspect_panel.shadows.y")),Z=(0,S.Cm)(z?.x),Q=(0,S.Cm)(z?.y),ee=(0,S.Cm)(K?.x),et=(0,S.Cm)(K?.y),er=k(H,$,(0,u.t)("inspect_panel.shadows.blur.start")),en=k(b,$,W?(0,u.t)("inspect_panel.shadows.blur.end"):(0,u.t)("inspect_panel.shadows.blur")),ea=k(_,q,(0,u.t)("inspect_panel.shadows.spread_tooltip")),ei=(0,L.pc)("MISSING",v?.x??0),eo=(0,L.pc)("MISSING",v?.y??0),es=(0,L.pc)("MISSING",b??0),el=(0,L.pc)("MISSING",_??0),ec=(0,S.sD)(W?(0,u.t)("inspect_panel.shadows.x.end"):(0,u.t)("inspect_panel.shadows.x")),ed=(0,S.sD)(W?(0,u.t)("inspect_panel.shadows.y.end"):(0,u.t)("inspect_panel.shadows.y")),eu=(0,S.sD)((0,u.t)("inspect_panel.shadows.x.start")),ep=(0,S.sD)((0,u.t)("inspect_panel.shadows.y.start")),em=(0,S.sD)((0,u.t)("inspect_panel.shadows.blur.start")),e_=(0,S.sD)(W?(0,u.t)("inspect_panel.shadows.blur.end"):(0,u.t)("inspect_panel.shadows.blur")),eh=(0,S.sD)((0,u.t)("inspect_panel.shadows.spread_tooltip"));if(!C)return null;let eg="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type,ef="DROP_SHADOW"===e.type&&w,eE=d()(n&&P.DW,P.qR,r&&P.bN),ey=new g.LN,eb=a.createElement(a.Fragment,null,a.createElement(B,{propertyContentClassName:eE,setHovered:c,isHovered:s,button1:a.createElement(U,{tooltipRef:eu,label:(0,u.t)("inspect_panel.shadows.x.start"),onClick:Z,value:ey.format(z?.x),rowRef:i,shouldShowVariableInspection:n}),button2:a.createElement(U,{tooltipRef:ep,label:(0,u.t)("inspect_panel.shadows.y.start"),onClick:Q,value:ey.format(z?.y),rowRef:i,shouldShowVariableInspection:n})}),a.createElement(B,{propertyContentClassName:eE,setHovered:c,isHovered:s,button1:a.createElement(U,{tooltipRef:ec,label:(0,u.t)("inspect_panel.shadows.x.end"),onClick:ee,value:ey.format(K?.x),rowRef:i,isHovered:s,shouldShowVariableInspection:n}),button2:a.createElement(U,{tooltipRef:ed,label:(0,u.t)("inspect_panel.shadows.y.end"),onClick:et,value:ey.format(K?.y),rowRef:i,isHovered:s,shouldShowVariableInspection:n})})),ev=a.createElement(B,{propertyContentClassName:eE,setHovered:c,isHovered:s,button1:a.createElement(U,{isHovered:s,label:(0,u.t)("inspect_panel.shadows.x"),onClick:X,recordingKey:"shadows_panel_x",rowRef:i,shouldShowVariableInspection:n,suggestedVariable:ei,tooltipRef:ec,value:(0,I.Wf)(v?.x),var:R}),button2:a.createElement(U,{isHovered:s,label:(0,u.t)("inspect_panel.shadows.y"),onClick:J,recordingKey:"shadows_panel_y",rowRef:i,shouldShowVariableInspection:n,suggestedVariable:eo,tooltipRef:ed,value:(0,I.Wf)(v?.y),var:D})}),eT=a.createElement(B,{propertyContentClassName:eE,setHovered:m,isHovered:p,button1:a.createElement(U,{tooltipRef:em,label:(0,u.t)("inspect_panel.shadows.blur.start"),onClick:er,value:(0,I.Wf)(H),rowRef:i,isHovered:p}),button2:a.createElement(U,{tooltipRef:e_,label:(0,u.t)("inspect_panel.shadows.blur.end"),onClick:en,value:(0,I.Wf)(b),rowRef:i,isHovered:p})}),eI=a.createElement(B,{propertyContentClassName:eE,setHovered:m,isHovered:p,button1:a.createElement(U,{isHovered:p,label:(0,u.t)("inspect_panel.shadows.blur"),onClick:en,recordingKey:"shadows_panel_blur",rowRef:i,shouldShowVariableInspection:n,suggestedVariable:es,tooltipRef:e_,value:(0,I.Wf)(b),var:N}),button2:eg?a.createElement(U,{isHovered:p,label:(0,u.t)("inspect_panel.shadows.spread_tooltip"),onClick:ea,recordingKey:"shadows_panel_spread",rowRef:i,shouldShowVariableInspection:n,suggestedVariable:el,tooltipRef:eh,value:(0,I.Wf)(_),var:O}):void 0});return a.createElement("div",{ref:i,className:P.cx},r?a.createElement(F,{effect:e,styleKey:e.styleKey,itemIndex:G}):a.createElement(x,{effect:e,styleName:e.styleName}),W&&eb,eg&&ev,W?eT:eI,eg&&a.createElement(a.Fragment,null,a.createElement(T.aj,{blendMode:A,className:ef?r?P.TX:P.RI:P.W0}),ef&&a.createElement(S._p,{name:(0,u.t)("inspect_panel.shadows.behind_transparent_areas"),value:(0,u.t)("inspect_panel.shadows.behind_transparent_areas_true"),className:r?P.TX:P.RI}),!!e.formattableColor&&a.createElement(T.DP,{formattableColor:e.formattableColor,format:o,isInStyle:!0,disableDetailModalEntry:e.disableDetailModalEntry})))}function V(e,r,n){let a=(0,I.uQ)(),i=(0,_.Q)(),o=(0,p.v4)(),l=(0,f.m0)(),c=(0,N.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r,styleKey:n};let d=(0,N.oI)({color:e.color,colorVar:e.colorVar,variableScope:s.j0r.EFFECT_COLOR,displayValue:c}),u=e.secondaryColor?(0,N.oI)({color:e.secondaryColor,variableScope:s.j0r.EFFECT_COLOR,displayValue:c}):void 0,p=(0,L.uA)(d,a,o.id,l,i.inspectionMode),m=u?(0,L.uA)(u,a,o.id,l,i.inspectionMode):void 0;return{...e,styleName:r,styleKey:n,formattableColor:p,formattableSecondaryColor:m}}).filter(e=>!!e)}function H({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=(0,v.G)(),l=s[0],c=I.T4.useCopyAllShadows(l?.shadowsAndBlurs??[]),d=V(l?.shadowsAndBlurs??[],l?.styleName,l?.styleKey),p=a.useCallback((e,r,n)=>a.createElement(G,{key:e.id,blendMode:e.blendMode,blurOpType:e.blurOpType,colorVar:e.colorVar,endOffset:e.endOffset,formattableColor:e.formattableColor,id:e.id,itemIndex:n,offset:e.offset,radius:e.radius,radiusVar:e.radiusVar,showShadowBehindNode:e.showShadowBehindNode,spread:e.spread,spreadVar:e.spreadVar,startOffset:e.startOffset,startRadius:e.startRadius,styleKey:e.styleKey,styleName:e.styleName,type:e.type,visible:e.visible,xVar:e.xVar,yVar:e.yVar}),[]);return 1!==o||!s||s.length<1||l.shadowsAndBlurs.length<1?null:a.createElement(S.VZ,{title:(0,u.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:c,additionalHeaders:a.createElement(T.Af,null),noBorder:e,noPadding:r,isSubsection:n},a.createElement(S.x0,{limit:2,data:d,renderElement:p}))}},167194:(e,r,n)=>{n.d(r,{o:()=>D});var a=n(848318),i=n(301168),o=n(871043),s=n(186606),l=n(813009),c=n(93490),d=n(967688),u=n(43322),p=n(764539),m=n(174945),_=n(995218),h=n(489082),g=n(963307),f=n(277454),E=n(614092),y=n(535884),b=n(325590),v=n(642823),T=n(985789),I=n(824286),S=n(21614),A=n(415356),w=n(368085),C=n(338519);let N=e=>{let r=e.mirror.selectionProperties;if(!(0,h.gl)(r.borderSharedWeight)){if(!r.borderStrokeWeightsIndependent)return"border";if(r.borderTopVisible)return"border-top";if(r.borderBottomVisible)return"border-bottom";if(r.borderLeftVisible)return"border-left";if(r.borderRightVisible)return"border-right"}},L=e=>{switch(e){case"border":return(0,d.t)("inspect_panel.strokes.all_sides");case"border-top":return(0,d.t)("inspect_panel.strokes.top_side");case"border-bottom":return(0,d.t)("inspect_panel.strokes.bottom_side");case"border-left":return(0,d.t)("inspect_panel.strokes.left_side");case"border-right":return(0,d.t)("inspect_panel.strokes.right_side");default:return}},O=(e,r)=>(0,h.gl)(e)?r.some(e=>(0,h.gl)(e))?(0,d.t)("fullscreen.mixed"):r.map(e=>(0,w.nd)(e,"px")).join(", "):`${(0,w.nd)(e,"px")}`,R=e=>{switch(e){case"OUTSIDE":return(0,d.t)("inspect_panel.strokes.outer_border");case"INSIDE":return(0,d.t)("inspect_panel.strokes.inner_border");case"CENTER":return(0,d.t)("inspect_panel.strokes.center_border");default:return}};function P(e,r){let n=(0,A.X)(e.strokeAlign),i=e.strokeWeight.split(",").join(""),o=S.T4.useStrokeCopyValue(i,e.strokeColors,e.borderCSSKey);return a.createElement("div",null,!r.onlyShowStrokeColor&&a.createElement(w._p,{copyValue:o,className:C.ht},a.createElement("div",{className:C.wz},a.createElement(v.Cq,{iconState:"ACTIVE"})),a.createElement("span",null,e.strokeWeight),e.borderCSSKey&&a.createElement("span",{className:C.I0,...n},L(e.borderCSSKey))),a.createElement(I.nu,{formattableColors:e.strokeColors}),e.strokeAlign&&!r.onlyShowStrokeColor&&a.createElement(w._p,{className:C.Gr},a.createElement("span",{className:C.ki,...n},e.strokeAlign)))}function D({hideBorder:e,noPadding:r,isSubsection:n}){let v=(0,_.m0)(),A=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,C=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.strokePaints),r=!e||(0,h.gl)(e)?[]:e.filter(e=>e.visible),n=(0,S.uQ)(),d=(0,p.Q)(),m=(0,u.v4)(),v=(0,_.m0)(),A=(0,S.pF)(e=>(0,c.b)(e.mirror.selectionProperties,"inheritFillStyleKeyForStroke")),w=(0,i.d4)(e=>e.mirror.selectionProperties.styleIdForStrokeFill),C=(0,E.Fk)((e,r)=>r?e.getStyleNodeByRef(r)?.guid:void 0,w?.assetRef),L=(0,i.d4)(y.e_),P=(0,g.kl)("inheritFillStyleKeyForStroke"),D=P&&(0,h.hS)(P)?(0,f.Gp)(P,C?[C]:[],L):void 0,k=(0,i.d4)(e=>e.mirror.selectionProperties.borderSharedWeight||e.mirror.selectionProperties.strokeWeight)||1,M=(0,l.R)(e=>({borderTopWeight:e.mirror.selectionProperties.borderTopWeight,borderRightWeight:e.mirror.selectionProperties.borderRightWeight,borderBottomWeight:e.mirror.selectionProperties.borderBottomWeight,borderLeftWeight:e.mirror.selectionProperties.borderLeftWeight})),F=(0,i.d4)(e=>e.mirror.selectionProperties.strokeAlign)||"OUTSIDE",x=(0,S.uQ)(),U=(0,b.Ig)(),B=r.filter(I.bm).map(e=>(0,b.dc)(e,U,s.j0r.STROKE)),G=a.useMemo(()=>{let e=D&&A?[(0,b.rP)(A,D,B)]:B;return(0,T.QT)(e,n,d.inspectionMode,m,v)},[D,A,B,n,d.inspectionMode,m,v]),V=(0,i.d4)(N);return a.useMemo(()=>{if(!x||G.length<1||!k)return[];let e=O(k,[M.borderTopWeight,M.borderRightWeight,M.borderBottomWeight,M.borderLeftWeight].filter(o.Vq));return e?[{id:x,strokeWeight:e,strokeColors:G,strokeAlign:R(F),borderCSSKey:V}]:[]},[x,F,k,G,V,M])}(),L=(0,m.i2)(),D=S.T4.useCopyAllStrokes(C);return 1!==A||C.length<1?null:a.createElement(w.VZ,{title:L?(0,d.t)("inspect_panel.strokes.colors.title"):(0,d.t)("inspect_panel.strokes.title"),recordingKey:"borders",additionalHeaders:v?void 0:a.createElement(I.Af,null),copyAllValue:v?void 0:D,noBorder:e,snugTitle:v,fadedTitle:v,noPadding:r,isSubsection:n},a.createElement(w.x0,{limit:2,data:C,renderElement:P,extras:{onlyShowStrokeColor:L}}))}},641501:(e,r,n)=>{n.d(r,{q:()=>i,x:()=>a});let a=new Set([n(186606).NVY.HEX]);function i(e,r,n,i){let o=n(e,i);return a.has(r)?{value:o,copyValue:n(e,{hexCSSValue:!0})}:{value:o,copyValue:o}}},760013:(e,r,n)=>{n.d(r,{U:()=>K});var a=n(848318),i=n(301168),o=n(536384),s=n.n(o),l=n(967688),c=n(995218),d=n(986918),u=n(368085),p=n(702493);let m=e=>{if("CAP_HEIGHT"===e)return(0,l.t)("inspect_panel.typography.cap_height")},_=e=>{if(e)return(0,l.t)("inspect_panel.typography.hanging_punctuation")},h=e=>{switch(e){case"RIGHT":return(0,l.t)("inspect_panel.typography.align_right");case"CENTER":return(0,l.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,l.t)("inspect_panel.typography.align_justified");default:return}},g=e=>{switch(e){case"RIGHT":return"right";case"CENTER":return"center";case"JUSTIFIED":return"justify";default:return}},f=e=>{switch(e){case"CENTER":return(0,l.t)("inspect_panel.typography.align_middle");case"BOTTOM":return(0,l.t)("inspect_panel.typography.align_bottom");default:return}},E=e=>{switch(e){case"CENTER":return"middle";case"BOTTOM":return"bottom";default:return}},y=e=>{switch(e){case"SUPER":return(0,l.t)("inspect_panel.typography.position_super");case"SUB":return(0,l.t)("inspect_panel.typography.position_sub");default:return}},b=e=>{switch(e){case"SUPER":return"super";case"SUB":return"sub";default:return}},v=e=>{switch(e){case"LINING":return(0,l.t)("inspect_panel.typography.numeric.figure_lining");case"OLDSTYLE":return(0,l.t)("inspect_panel.typography.numeric.figure_oldstyle");default:return}},T=e=>{switch(e){case"LINING":return"lining-nums";case"OLDSTYLE":return"oldstyle-nums";default:return}},I=e=>{switch(e){case"PROPORTIONAL":return(0,l.t)("inspect_panel.typography.numeric.spacing_proportional");case"TABULAR":return(0,l.t)("inspect_panel.typography.numeric.spacing_tabular");default:return}},S=e=>{switch(e){case"PROPORTIONAL":return"proportional-nums";case"TABULAR":return"tabular-nums";default:return}},A=e=>{switch(e){case"DIAGONAL":return(0,l.t)("inspect_panel.typography.numeric.fraction_diagonal");case"STACKED":return(0,l.t)("inspect_panel.typography.numeric.fraction_stacked");default:return}},w=e=>{switch(e){case"DIAGONAL":return"diagonal-fractions";case"STACKED":return"stacked-fractions";default:return}},C=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return(0,l.t)("inspect_panel.typography.numeric.zero_slashed")},N=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return"slashed-zero"},L=(e,r)=>{if(e&&"ORIGINAL"!==e)switch(e){case"UPPER":return(0,l.t)("inspect_panel.typography.type_settings.case_upper");case"LOWER":return(0,l.t)("inspect_panel.typography.type_settings.case_lower");case"TITLE":return(0,l.t)("inspect_panel.typography.type_settings.case_title");case"SMALL_CAPS":return(0,l.t)("inspect_panel.typography.type_settings.case_small");case"SMALL_CAPS_FORCED":return(0,l.t)("inspect_panel.typography.type_settings.case_small_forced");default:return}return"SMALL"===r?(0,l.t)("inspect_panel.typography.type_settings.case_small"):"ALL_SMALL"===r?(0,l.t)("inspect_panel.typography.type_settings.case_small_forced"):void 0},O=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"font-variant";switch(e){case"UPPER":case"LOWER":case"TITLE":return"text-transform";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"font-variant";default:return}},R=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"small-caps";switch(e){case"UPPER":return"uppercase";case"LOWER":return"lowercase";case"TITLE":return"capitalize";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"small-caps";default:return}},P=e=>{switch(e){case"STRIKETHROUGH":return(0,l.t)("inspect_panel.typography.strikethrough");case"UNDERLINE":return(0,l.t)("inspect_panel.typography.underline");default:return}},D=e=>{if(!e)return"";switch(e){case"STRIKETHROUGH":return"line-through";case"UNDERLINE":return"underline";default:return""}},k=e=>{switch(e){case"SOLID":return(0,l.t)("inspect_panel.typography.solid");case"DOTTED":return(0,l.t)("inspect_panel.typography.dotted");case"WAVY":return(0,l.t)("inspect_panel.typography.wavy");default:return}},M=e=>{if(!e)return"";switch(e){case"SOLID":return"solid";case"DOTTED":return"dotted";case"WAVY":return"wavy";default:return""}},F=e=>{if(e)return(0,l.t)("variables.values.boolean.true")};function x(e,r,n){return a=>a?.getStyledTextSegments([e],r,n)?.[0]?.[e]??void 0}function U(e){return r=>r?.[e]}function B({nodeId:e,start:r,end:n}){let i=x("textCase",r,n),o=x("fontVariantCaps",r,n),s=(0,u.rh)(e,i),c=(0,u.rh)(e,o);return a.createElement(u._p,{name:(0,l.t)("inspect_panel.typography.type_settings.case"),copyName:O(s,c),value:L(s,c),copyValue:R(s,c)})}function G({nodeId:e,start:r,end:n}){let i=(0,u.rh)(e,x("toggledOnOTFeatures",r,n)),o=(0,u.rh)(e,x("toggledOffOTFeatures",r,n));return a.createElement(u._p,{name:(0,l.t)("inspect_panel.typography.numeric.zero"),copyName:"font-variant-numeric-zero",value:C(i,o),copyValue:N(i,o)})}function V({nodeId:e,start:r,end:n}){let i=(0,u.rh)(e,x("textDecoration",r,n));return i&&"NONE"!==i?a.createElement(a.Fragment,null,"UNDERLINE"===i&&a.createElement(u.QG,{label:(0,l.t)("inspect_panel.typography.text_decoration")}),a.createElement(u.NJ,{subPropertyRow:"UNDERLINE"===i,name:"UNDERLINE"===i?(0,l.t)("inspect_panel.typography.decoration"):(0,l.t)("inspect_panel.typography.text_decoration"),copyName:"text-decoration",nodeId:e,scenePropertyAccessor:x("textDecoration",r,n),valueFormatter:P,copyValueFormatter:D}),"UNDERLINE"===i&&a.createElement(a.Fragment,null,a.createElement(u.NJ,{subPropertyRow:!0,name:(0,l.t)("inspect_panel.typography_text_decoration_style"),copyName:"text-decoration-style",nodeId:e,scenePropertyAccessor:x("textDecorationStyle",r,n),valueFormatter:k,copyValueFormatter:M}),a.createElement(u.zp,{subPropertyRow:!0,name:(0,l.t)("inspect_panel.typography.text_decoration_offset"),copyName:"text-decoration-offset",nodeId:e,scenePropertyAccessor:x("textDecorationOffset",r,n),isTextProperty:!0}),a.createElement(u.zp,{subPropertyRow:!0,name:(0,l.t)("inspect_panel.typography.text_decoration_thickness"),copyName:"text-decoration-thickness",nodeId:e,scenePropertyAccessor:x("textDecorationThickness",r,n),isTextProperty:!0}),a.createElement(u.wy,{subPropertyRow:!0,name:(0,l.t)("inspect_panel.typography.text_decoration_skip_ink"),copyName:"text-decoration-skip-ink",nodeId:e,scenePropertyAccessor:x("textDecorationSkipInk",r,n),valueFormatter:F,copyValueFormatter:e=>e?"auto":void 0}))):null}function H({nodeId:e,start:r=0,end:n=1,variableConsumptionMap:i,disableSuggestions:o,disableDetailModalEntry:s}){return a.createElement(a.Fragment,null,a.createElement(u.KY,{name:(0,l.t)("inspect_panel.typography.font"),copyName:"font-family",nodeId:e,scenePropertyAccessor:e=>e?.getStyledTextSegments(["fontName"],r,n)?.[0]?.fontName?.family,variableField:"FONT_FAMILY",variableConsumptionMap:i,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.zG,{name:(0,l.t)("inspect_panel.typography.weight"),copyName:"font-weight",nodeId:e,scenePropertyAccessor:x("fontWeight",r,n),variableField:"FONT_STYLE",variableConsumptionMap:i,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.style"),copyName:"font-style",nodeId:e,scenePropertyAccessor:x("fontStyle",r,n)}),a.createElement(u.fY,{name:(0,l.t)("inspect_panel.typography.size"),copyName:"font-size",nodeId:e,scenePropertyAccessor:x("fontSize",r,n),variableField:"FONT_SIZE",variableConsumptionMap:i,isTextProperty:!0,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.leading_trim"),copyName:"leading-trim",scenePropertyAccessor:U("leadingTrim"),valueFormatter:m}),a.createElement(u.cK,{name:(0,l.t)("inspect_panel.typography.line_height"),copyName:"line-height",nodeId:e,scenePropertyAccessor:x("lineHeight",r,n),variableField:"LINE_HEIGHT",variableConsumptionMap:i,isTextProperty:!0,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.fY,{name:(0,l.t)("inspect_panel.typography.paragraph_spacing"),nodeId:e,scenePropertyAccessor:x("paragraphSpacing",r,n),variableField:"PARAGRAPH_SPACING",variableConsumptionMap:i,isTextProperty:!0,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.fY,{name:(0,l.t)("inspect_panel.typography.paragraph_indent"),copyName:"text-indent",nodeId:e,scenePropertyAccessor:x("paragraphIndent",r,n),variableField:"PARAGRAPH_INDENT",variableConsumptionMap:i,isTextProperty:!0,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.kI,{name:(0,l.t)("inspect_panel.typography.list_spacing"),nodeId:e,scenePropertyAccessor:x("listSpacing",r,n),isTextProperty:!0}),a.createElement(u.cK,{name:(0,l.t)("inspect_panel.typography.letter"),copyName:"letter-spacing",nodeId:e,scenePropertyAccessor:x("letterSpacing",r,n),variableField:"LETTER_SPACING",variableConsumptionMap:i,isTextProperty:!0,disableSuggestions:o,disableDetailModalEntry:s}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.align"),copyName:"text-align",scenePropertyAccessor:U("textAlignHorizontal"),valueFormatter:h,copyValueFormatter:g}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.align_vertical"),copyName:"vertical-align",scenePropertyAccessor:U("textAlignVertical"),valueFormatter:f,copyValueFormatter:E}),a.createElement(B,{nodeId:e,start:r,end:n}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.position"),copyName:"position",nodeId:e,scenePropertyAccessor:x("fontVariantPosition",r,n),valueFormatter:y,copyValueFormatter:b}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.numeric.figure"),copyName:"font-variant-numeric-figure",nodeId:e,scenePropertyAccessor:x("fontVariantNumericFigure",r,n),valueFormatter:v,copyValueFormatter:T}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.numeric.spacing"),copyName:"font-variant-numeric-spacing",nodeId:e,scenePropertyAccessor:x("fontVariantNumericSpacing",r,n),valueFormatter:I,copyValueFormatter:S}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.numeric.fraction"),copyName:"font-variant-numeric-fraction",nodeId:e,scenePropertyAccessor:x("fontVariantNumericFraction",r,n),valueFormatter:A,copyValueFormatter:w}),a.createElement(G,{nodeId:e,start:r,end:n}),a.createElement(V,{nodeId:e,start:r,end:n}),a.createElement(u.wy,{name:(0,l.t)("inspect_panel.typography.punctuation"),scenePropertyAccessor:U("hangingPunctuation"),valueFormatter:_}),a.createElement(u.wy,{name:(0,l.t)("inspect_panel.typography.hanging_list"),scenePropertyAccessor:U("hangingList"),valueFormatter:_}),a.createElement(u.kI,{name:(0,l.t)("inspect_panel.typography.optical_size"),scenePropertyAccessor:x("opticalSize",r,n),isTextProperty:!0}),a.createElement(u.NJ,{name:(0,l.t)("inspect_panel.typography.variation"),scenePropertyAccessor:x("fontVariationsDescription",r,n)}))}function z(e,{numFonts:r,extraHeader:n,noPadding:i,isSubsection:o}){let{copyAll:s,setCopyValue:p,hasCopyAllContent:m}=(0,d.We)(),_=(0,c.m0)(),{substring:h,startPos:g,endPos:f,styleName:E,isStyleSoftDeleted:y}=e,b=0===e.index,v=e.index===r-1,T=h?.trim()||(0,l.t)("inspect_panel.typography.span_whitespace");return a.createElement(u.VZ,{copyAllValue:s,disableCopyAll:!m,doNotReserveSpaceForChevronInTitle:!b,isSubsection:v&&o,noBorder:!0,noPadding:!v||i,recordingKey:b?"typography":`typography${e.index}`,snugTitle:_,thinTitle:!!_||!b,title:b?(0,l.t)("inspect_panel.typography.title"):h?(0,l.t)("inspect_panel.typography.span_contents",{contents:T}):(0,l.t)("inspect_panel.typography.span")},a.createElement(d.xe.Provider,{value:{setCopyValue:p}},b&&n,a.createElement(u._p,{name:(0,l.t)("inspect_panel.typography.name"),value:y?void 0:E,disableDetailModalEntry:!0}),a.createElement(H,{start:g,end:f,variableConsumptionMap:e.variableConsumptionMap})))}function K({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected)||0,c=function(){let e=(0,i.d4)(e=>e.mirror.selectionProperties.selectedFonts),r=a.useMemo(()=>{if(!e||!e.fonts)return;let r=new Set;return e.fonts.filter(e=>!!e.substring&&(!e.parentStyleId||!r.has(e.parentStyleId)&&(r.add(e.parentStyleId),!0))).sort((e,r)=>(e.startPos??0)-(r.startPos??0)).map((e,r)=>({...e,index:r}))},[e]);if(e&&r)return{fonts:r,incompleteResults:e.incompleteResults}}();return!c||c?.fonts.length<1?null:a.createElement("div",{className:s()(p.sk,e&&p.th,r&&p.pN)},a.createElement(u.x0,{limit:2,data:c.fonts,renderElement:z,extras:{numFonts:c.fonts.length,extraHeader:c.incompleteResults?a.createElement("div",{className:p.VC},(0,l.tx)("inspect_panel.typography.too_many_selected",{numSelected:o})):null,noPadding:r,isSubsection:n}}))}},1259:(e,r,n)=>{n.d(r,{Rk:()=>D});var a=n(848318),i=n(658029),o=n(762217),s=n(168323),l=n(353317),c=n(430024),d=n(96855),u=n(19180),p=n(113326),m=n(781239),_=n(401970),h=n(967688),g=n(754210),f=n(67188),E=n(489082),y=n(17753),b=n(724816),v=n(483395),T=n(938448),I=n(16808),S=n(120846),A=n(596224),w=n(567570),C=n(264953),N=n(973399);let L=S.c$;function O(e){let r=(0,T.X7)(),n=a.createElement(R,{value:(0,E.E7)(e.property),defaultBlendMode:"NORMAL"});return a.createElement(S.l6,{...e,renderInput:({onMouseDown:e,props:o})=>{let s=w.p6;return"NORMAL"!==(0,E.E7)(o.property)&&(s=w.DU),r?a.createElement(i.K,{onClick:e,"aria-label":(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode"),htmlAttributes:{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},disabled:o.disabled},n):a.createElement(I.K0,{className:s,tabIndex:-1,onPointerDown:f.dG,onMouseDown:e,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},n)}})}function R({value:e,defaultBlendMode:r}){return(0,v.qg)(e,r)?a.createElement(_.U,{svg:N.A},a.createElement(c.N,null)):a.createElement(_.U,{svg:C.A},a.createElement(d.l,null))}let P=new g.ro;function D(e){return(0,u.k)().eu_fpl_migration_menu?a.createElement(F,{property:e.blendMode,onBlendModeChange:e.onBlendModeChange,disabled:e.disabled,recordingKey:e.recordingKey}):a.createElement(k,{...e})}let k=a.memo(function(e){let r=(0,A.cJ)(),n=v.r5.map((n,i)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?a.createElement(S.sK,{key:i}):a.createElement(L,{key:i,value:n,disabled:o,recordingKey:m.Pt(e,n)})}),i=130,[o,s]=a.useState(i),l=a.useMemo(()=>a.createElement(p.Q,{setMaxWidth:(e=i)=>{s(Math.max(e,i))},options:n,formatOption:e=>P.format(e.props.value),getIcon:()=>void 0}),[n]);return a.createElement(a.Fragment,null,a.createElement(O,{ariaLabel:(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode"),className:w.rO,disabled:e.disabled,dispatch:e.dispatch,dropdownShown:e.dropdownShown,dropdownWidth:o,enablePreview:!0,formatter:P,id:"color-picker-blend-mode-select",inputClassName:w.p6,minTop:6,onChange:e.onBlendModeChange,onMouseDown:f.dG,property:e.blendMode,recordingKey:e.recordingKey},n),l)}),M=(0,v.GZ)(v.r5);function F({property:e,disabled:r,onBlendModeChange:n,recordingKey:i}){let{getTriggerProps:c,manager:d,updatePreview:u,onSubmit:p,valueBeforePreview:m}=(0,b.Z)({id:"color-picker-blend-mode-select",blendMode:e,onChange:n});return a.createElement(o.o,{eventListeners:["onWheel"]},a.createElement(s.bL,{manager:d},a.createElement(l.d,{recordingKey:i,disabled:r,"aria-label":(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode"),htmlAttributes:{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":(0,h.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},...c()},a.createElement(R,{value:(0,E.E7)(e),defaultBlendMode:"NORMAL"})),a.createElement(s.mc,null,a.createElement(b.m,{selectedItem:m??e,options:M,onChange:p,recordingKey:i,onFocus:u}))))}},866281:(e,r,n)=>{n.d(r,{Rh:()=>X,S7:()=>er,mu:()=>ec,qi:()=>ed,qo:()=>q,sX:()=>Z});var a=n(848318),i=n(301168),o=n(376852),s=n(353317),l=n(451657),c=n(803565),d=n(186606),u=n(536384),p=n.n(u),m=n(410441),_=n(996202),h=n(656329),g=n(781239),f=n(401970),E=n(967688),y=n(323201),b=n(632727),v=n(372566),T=n(303397),I=n(959750),S=n(788903),A=n(180294),w=n(404486),C=n(574422),N=n(361053),L=n(273555),O=n(17753),R=n(232958),P=n(452086),D=n(434328),k=n(297635),M=n(938448),F=n(753644),x=n(16808),U=n(614892),B=n(346288),G=n(96526),V=n(844319),H=n(930071),z=n(200430),K=n(417336),W=n(228217),j=n(27776),Y=n(698732),$=n(666676);let q=(0,m.jz)(j.uj0),X=(0,m.jz)(j.jzw);function J(e,r){return Object.keys(e).every(n=>e[n]===r[n])}var Z=(e=>(e.FULL="full",e.WHITEBOARD="whiteboard",e))(Z||{});let Q=(e,r)=>({hslva:r===d.NVY.HSL?(0,c.oB)(e):(0,c.qN)(e),rgba:e}),ee=e=>{let r="",n="";switch(e){case"SOLID":case"IMAGE":case"EMOJI":case"VIDEO":r=e;break;case"GRADIENT_LINEAR":r="GRADIENT",n="LINEAR";break;case"GRADIENT_RADIAL":r="GRADIENT",n="RADIAL";break;case"GRADIENT_ANGULAR":r="GRADIENT";break;case"GRADIENT_DIAMOND":r="GRADIENT",n="DIAMOND"}return{paintPickerTab:r,paintPickerFilter:n}};function et(e){return parseFloat(e.toFixed(4))}function er({recordingKey:e,...r}){let[n,u]=(0,a.useState)(Q(r.color,r.colorFormat)),m=a.useContext(k.nZ),{setFgHue:h,setFgAlpha:y,standardMet:v}=m.colorContrastInfo,{contrastLevelForCategory:S}=m.settings,R=a.useRef(v),D=(0,a.useRef)(r.color),F=(0,a.useRef)(r.colorFormat),B=(0,w.Xo)(),G=(0,M.X7)(),W=(0,_.hC)(),j=(0,A.dq)(),q=N.ol()?.id,X=(0,i.d4)(e=>!!e.eyedropper)||r.preventAutoFocus,Z={...r,preventAutoFocus:X};(0,a.useEffect)(()=>{h(et(n.hslva.h)),y(et(n.hslva.a))},[h,y,n.hslva.h,n.hslva.a]),(0,a.useEffect)(()=>{if((J(r.color,D.current)||J(r.color,n.rgba))&&F.current===r.colorFormat)return;let e=Q(r.color,r.colorFormat);e.hslva=function(e,r,n){("l"in r&&(0===r.l||1===r.l)||"v"in r&&0===r.v)&&(r={...r,s:e.s});let a=(0,o.xN)(e.h,0)&&(0,o.xN)(r.h,1),i=(0,o.xN)(e.h,1)&&(0,o.xN)(r.h,0);return((0,o.xN)(n.r,n.g)&&(0,o.xN)(n.r,n.b)||a||i)&&(r={...r,h:e.h}),r}(n.hslva,e.hslva,r.color),D.current=r.color,F.current=r.colorFormat,u(e)},[n,r.color,r.colorFormat]);let er=(e,n)=>{let a=(0,c.w_)(e);u({hslva:e,rgba:a}),r.onColorChange(a,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:b.z5.format(a),...r.analytics.properties}),m.showColorContrast&&void 0===R.current&&(R.current=v),n&&m.showColorContrast&&(!1===R.current&&W("color_contrast.pick_new_color_when_not_compliant",{conformance:S,compliance:v,orgId:j,teamId:q}),R.current=void 0)},ea=(e,n)=>{if(!r.onOpacityChange){er(e,n);return}let a=(0,c.w_)(e);u({hslva:e,rgba:a}),r.onOpacityChange(a.a,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:b.z5.format(a),...r.analytics.properties})},ec=(e,n)=>{r.onColorChange(e,n),r.analytics&&C.F.trackFromFullscreen(r.analytics.name,{source:"hex",color:b.z5.format(e),...r.analytics.properties})},ed=e=>{G&&(0,P.$z)(),e.stopPropagation();let{paintPickerTab:n,paintPickerFilter:a}=ee(r.paintPickerAnalytics?.paintType);T.Y5.triggerAction("toggle-dropper",{canAcceptStyles:r.canAcceptStyles,canAcceptVariables:r.canAcceptVariables,pickerShown:B?.id,paintPickerTab:n,paintPickerFilter:a,paintPickerSessionId:r.paintPickerSessionId})};if("whiteboard"===r.displayType)return(()=>{let i=r.currentTool===d.NLJ.DROPPER_COLOR;return a.createElement("div",{className:Y.BA},a.createElement("div",{className:Y.s1},!r.dropperDisabled&&a.createElement("div",{className:Y.go},a.createElement(x.YW,{svg:$.A,fill:"dark"===r.theme?"white":"black",selected:i,onPointerDown:ed,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:p()({[Y.fG]:!i&&"dark"===r.theme})})),a.createElement(ei,{recordingKey:g.Pt(e,"hexInput"),...Z,onColorChange:ec})),a.createElement("div",{className:p()(Y.MX,{[Y.zB]:!r.hideOpacity})},a.createElement(H.e,{width:140,color:n.hslva,changeCallback:er,containerClass:Y.aw,recordingKey:g.Pt(e,"hueControl")}),!r.hideOpacity&&a.createElement(z.xp,{width:140,color:n.hslva,changeCallback:ea,containerClass:Y.aw,recordingKey:g.Pt(e,"opacityControl")})),a.createElement(K.T,{size:184,color:n.hslva,changeCallback:er,ignoreWheelCallback:!0,recordingKey:g.Pt(e,"slvControl")}))})();let eu=a.createElement(a.Fragment,null,a.createElement(V.p,{dispatch:r.dispatch,dropdownShown:r.dropdownShown,colorFormat:r.colorFormat,onColorFormatChange:e=>{(0,I.UK)().colorFormat.set(e)},containerRef:r.containerRef,recordingKey:e,showNewUI:G}),r.colorFormat===d.NVY.HEX&&a.createElement(ei,{recordingKey:g.Pt(e,"hexInput"),...Z}),r.colorFormat===d.NVY.RGB&&a.createElement(eo,{recordingKey:g.Pt(e,"rgbInput"),...Z}),r.colorFormat===d.NVY.CSS&&a.createElement(es,{recordingKey:g.Pt(e,"cssInput"),...Z}),(r.colorFormat===d.NVY.HSL||r.colorFormat===d.NVY.HSB)&&a.createElement(el,{key:r.colorFormat,value:n.hslva,changeCallback:er,recordingKey:g.Pt(e,"hslvInput"),...Z}));return a.createElement("div",null,a.createElement(en,{color:n.hslva,onChange:er,recordingKey:g.Pt(e,"slvControl")}),a.createElement(U.Id,null,r.additionalControls&&a.createElement("div",{className:Y.CX},r.additionalControls),a.createElement("div",{className:p()(Y.ne,{[Y.Ep]:G})},!r.dropperDisabled&&a.createElement("div",{className:p()(Y.go,{[Y.TD]:G})},G?a.createElement(s.d,{"aria-expanded":r.currentTool===d.NLJ.DROPPER_COLOR,"aria-label":(0,E.t)("fullscreen.properties_panel.color_picker.sample_color"),htmlAttributes:{"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.properties_panel.color_picker.sample_color")},recordingKey:g.Pt(e,"dropperButton"),onClick:ed},a.createElement(f.U,{svg:$.A},a.createElement(l.G,null))):a.createElement(x.YW,{selected:r.currentTool===d.NLJ.DROPPER_COLOR,onMouseDown:ed,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0},a.createElement(f.U,{svg:$.A},a.createElement(l.G,null)))),a.createElement("div",{className:p()(Y.xJ,{[Y.Q0]:G})},a.createElement(H.e,{width:156,color:n.hslva,changeCallback:er,containerClass:Y.aw,recordingKey:g.Pt(e,"hueControl")}),a.createElement(z.xp,{width:156,color:n.hslva,changeCallback:ea,containerClass:Y.aw,recordingKey:g.Pt(e,"opacityControl")}))),G?a.createElement("div",{className:Y.Px},eu):a.createElement(U.fI,null,eu)))}function en({color:e,onChange:r,recordingKey:n}){return(0,M.X7)()?a.createElement("div",{className:Y.YC},a.createElement(K.T,{size:X,color:e,changeCallback:r,recordingKey:n,canvasWrapperStyles:{borderRadius:"5px"},overlay:a.createElement(k.Mu,null)})):a.createElement(K.T,{size:q,color:e,changeCallback:r,recordingKey:n,containerClass:Y.pZ})}er.displayName="ColorControls";let ea=a.forwardRef((e,r)=>{let n=(0,M.X7)();return a.createElement("div",{ref:r,className:p()({[Y.x4]:!e.isWhiteboard,[Y.mP]:e.isWhiteboard,[Y.zI]:n})},e.children)});function ei(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o="whiteboard"===e.displayType;(0,a.useEffect)(()=>{o&&n.current&&(n.current.dataset.preferredTheme=e.theme)},[o,e.theme]);let s=(0,a.useMemo)(()=>o?b.z5:new b.rC({parseAlpha:!0}),[o]),l=!(o||e.hideOpacity);return a.createElement(ea,{ref:n,isWhiteboard:o},a.createElement(F.AN,{autoFocus:!h.Ay.isIpad&&!e.preventAutoFocus,className:p()({[Y.uh]:!o,[Y.vh]:o}),formatter:s,forwardedRef:e.hexInputRef,noBorderOnFocus:!0,onChange:e.onColorChange,property:e.color,recordingKey:g.Pt(e,"color"),squareRightBorder:!0}),l&&a.createElement(R.Pd,{className:Y.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,recordingKey:g.Pt(e,"opacity")}))}class eo extends g.o6{constructor(){super(...arguments),this.formatter=new v.o1({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)}}render(){return a.createElement(ea,null,a.createElement(R.j5,{autoFocus:!this.props.preventAutoFocus,className:Y.Qh,"data-tooltip":(0,E.t)("fullscreen.color_controls.red"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,onValueChange:this.onRChange,recordingKey:g.Pt(this.props,"red"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.r}),a.createElement(R.j5,{className:Y.Qh,"data-tooltip":(0,E.t)("fullscreen.color_controls.green"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onValueChange:this.onGChange,recordingKey:g.Pt(this.props,"green"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.g}),a.createElement(R.j5,{className:Y.Qh,"data-tooltip":(0,E.t)("fullscreen.color_controls.blue"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onValueChange:this.onBChange,recordingKey:g.Pt(this.props,"blue"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.b}),!this.props.hideOpacity&&a.createElement(R.Pd,{className:Y.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity")}))}}eo.displayName="RgbInputs";class es extends g.o6{constructor(){super(...arguments),this.formatter=y.F}render(){return a.createElement(ea,null,a.createElement(F.AN,{className:Y.AH,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:g.Pt(this.props,"color"),autoFocus:!this.props.preventAutoFocus,noBorderOnFocus:!0}))}}es.displayName="CssInputs";class el extends g.o6{constructor(){super(...arguments),this.formatter360=new v.o1({normalizeFactor:360,min:0,max:1}),this.formatter100=new v.o1({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)}}render(){return a.createElement(ea,null,a.createElement(R.j5,{autoFocus:!this.props.preventAutoFocus,className:Y.Qh,"data-tooltip":(0,E.t)("fullscreen.color_controls.hue"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter360,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,onValueChange:this.onHChange,recordingKey:g.Pt(this.props,"hue"),scrubMultiplier:1/360,squareRightBorder:!0,value:this.props.value.h}),a.createElement(R.j5,{className:Y.Qh,"data-tooltip":(0,E.t)("fullscreen.color_controls.saturation"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter100,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onValueChange:this.onSChange,recordingKey:g.Pt(this.props,"saturation"),scrubMultiplier:.01,squareRightBorder:!0,value:this.props.value.s}),a.createElement(R.j5,{className:Y.Qh,"data-tooltip":"l"in this.props.value?(0,E.t)("fullscreen.color_controls.lightness"):(0,E.t)("fullscreen.color_controls.brightness"),"data-tooltip-type":O.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter100,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:g.Pt(this.props,"value"),scrubMultiplier:.01,squareRightBorder:!0,value:"l"in this.props.value?this.props.value.l:this.props.value.v}),!this.props.hideOpacity&&a.createElement(R.Pd,{className:Y.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity")}))}}function ec(e){let r=(0,i.wA)(),n=(0,a.useRef)(null),o=(0,M.X7)();(0,a.useEffect)(()=>{n.current&&(n.current.dataset.preferredTheme=e.theme)},[e.theme]);let s=(0,a.useMemo)(()=>new b.rC({parseAlpha:!0}),[]);return a.createElement(ea,{ref:n,isWhiteboard:!1},a.createElement("div",{className:Y.Q6},a.createElement(D.D,{color:e.color,onMouseDown:e.onChitMouseDown,recordingKey:g.Pt(e.recordingKey,"chit")}),a.createElement(F.AN,{className:p()(Y.uh,{[Y.ym]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,recordingKey:g.Pt(e,"color")})),a.createElement(R.Pd,{decimals:e.opacityDecimals,className:Y.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,recordingKey:g.Pt(e,"opacity")}))}function ed({variableId:e,color:r,opacity:n,onMouseDown:i,recordingKey:o}){let s=(0,S.u)(e),l=s?.name??"",c=!!s&&(0,B.eF)(s);return a.createElement(a.Fragment,null,c?null:a.createElement("div",{onFocus:e=>e.stopPropagation()},a.createElement(D.D,{color:r,opacity:n,onMouseDown:i,recordingKey:g.Pt(o,"chit"),className:W.x7})),a.createElement("div",{className:W.eV},a.createElement(G.wG,{isDeleted:c,text:l,tooltip:l,onClick:i,actionOnMouseDown:!0})))}el.displayName="HslvInputs"},844319:(e,r,n)=>{n.d(r,{F:()=>h,p:()=>g});var a=n(848318),i=n(23207),o=n(544405),s=n(186606),l=n(19180),c=n(536384),d=n.n(c),u=n(781239),p=n(967688),m=n(120846),_=n(698732);let h={format:e=>e===s.NVY.HEX?"Hex":s.NVY[e]};function g(e){return(0,l.k)().eu_fpl_migration_styles_picker_selects?a.createElement(E,{colorFormat:e.colorFormat,onColorFormatChange:e.onColorFormatChange,selectClassName:e.selectClassName,recordingKey:e.recordingKey}):a.createElement(f,{...e})}function f({dispatch:e,dropdownShown:r,colorFormat:n,onColorFormatChange:i,containerRef:o,recordingKey:l,showNewUI:c,selectClassName:g}){let f=(0,a.useId)();return a.createElement(m.l6,{ariaLabel:(0,p.t)("fullscreen.properties_panel.color_picker.color_format.aria_label"),className:d()(_.NC,{[_.DW]:c},g),dispatch:e,dropdownClassName:_.O4,dropdownShown:r,formatter:h,id:f,inputClassName:_.Hi,neverConstrain:!!o?.current,onChange:i,property:n,recordingKey:u.Pt(l,"colorFormatSelect"),targetDomNode:o?.current},a.createElement(m.c$,{value:s.NVY.HEX,recordingKey:u.Pt(l,"hexOption")}),a.createElement(m.c$,{value:s.NVY.RGB,recordingKey:u.Pt(l,"rgbOption")}),a.createElement(m.c$,{value:s.NVY.CSS,recordingKey:u.Pt(l,"cssOption")}),a.createElement(m.c$,{value:s.NVY.HSL,recordingKey:u.Pt(l,"hslOption")}),a.createElement(m.c$,{value:s.NVY.HSB,recordingKey:u.Pt(l,"hsvOption")}))}function E({colorFormat:e,onColorFormatChange:r,selectClassName:n,recordingKey:l}){let c=[s.NVY.HEX,s.NVY.RGB,s.NVY.CSS,s.NVY.HSL,s.NVY.HSB].map(e=>a.createElement(y,{key:e,colorFormat:e}));return a.createElement("div",{className:d()(_.NC,_.jS,n)},a.createElement(i.bL,{value:String(e),onChange:e=>r(Number(e)),recordingKey:u.Pt(l,"colorFormatSelect")},a.createElement(i.l9,{label:a.createElement(o.h,null,h.format(e)),"aria-label":(0,p.t)("fullscreen.properties_panel.color_picker.color_format.aria_label")}),a.createElement(i.mc,null,c)))}function y({colorFormat:e}){return a.createElement(i.c$,{value:String(e)},h.format(e))}},412715:(e,r,n)=>{n.d(r,{K:()=>l});var a=n(848318),i=n(430385),o=n(454805),s=n(552807);class l extends a.PureComponent{constructor(e){super(e),this.updateThumbnailSrc=e=>{let r=s.jS(e,new o.Mi(this.props.width,this.props.height),{r:0,g:0,b:0,a:0}),n=r&&r.pixels&&r.pixelSize?s.Pv(r.pixels,r.pixelSize):null;this.setState({src:n,lastPaintFilter:e.paintFilter||null})},this.state={src:null,lastPaintFilter:null}}componentDidMount(){this.updateThumbnailSrc(this.props.imagePaint)}colorAdjustEqual(e,r){if(!e||!r)return!e==!r;for(let n in e)if(e.hasOwnProperty(n)&&e[n]!==r[n])return!1;return!0}UNSAFE_componentWillReceiveProps(e){let r=this.props.imagePaint,n=e.imagePaint;(r.image&&n.image&&!(0,i.lu)(r.image.hash,n.image.hash)||e.forceUpdate&&!this.colorAdjustEqual(this.state.lastPaintFilter,n.paintFilter))&&this.updateThumbnailSrc(n)}render(){return a.createElement("img",{className:this.props.className,src:this.state.src?this.state.src:"",width:this.props.width,height:this.props.height,alt:""})}}l.displayName="ImagePaintThumbnail"},624611:(e,r,n)=>{n.d(r,{SY:()=>eI});var a=n(848318),i=n(301168),o=n(938982),s=n(658029),l=n(531788),c=n(23207),d=n(544405),u=n(651315),p=n(696375),m=n(91876),_=n(186606),h=n(320953);n(82433);var g=n(19180),f=n(382902),E=n(536384),y=n.n(E),b=n(989232),v=n(781239),T=n(998568),I=n(960565),S=n(256350),A=n(401970),w=n(66699),C=n(967688),N=n(863270),L=n(372566),O=n(754210),R=n(67188),P=n(696786),D=n(61717),k=n(303397),M=n(146859),F=n(439952),x=n(426299),U=n(552807),B=n(590781),G=n(251888),V=n(730143),H=n(280255),z=n(273555),K=n(17753),W=n(52463),j=n(938448),Y=n(790290),$=n(356177),q=n(412715),X=n(368863),J=n(991552),Z=n(753644),Q=n(322638),ee=n(178415),et=n(614892),er=n(120846),en=n(748790),ea=n(880801),ei=n(619534),eo=n(131258),es=n(122586),el=n(787751),ec=n(113176),ed=n(426324),eu=n(16200),ep=n(953318),em=n(119782),e_=n(338929),eh=n(578434);let eg="image-scale-mode-select",ef=er.l6,eE=er.c$,ey=(0,f.eU)(!1),eb=W.qo,ev=(e,r)=>e.every((e,n)=>e===r[n]);async function eT(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,F.Jr)().loadImageByHash(r);let n=(0,U.Sl)(e);return _.CUU.requestGIFData(n)}function eI(e){let r=(0,P.GS)(),[,n]=(0,f.fp)(ey);(0,a.useEffect)(()=>(n(!0),()=>n(!1)),[n]);let o=(0,en.GM)(),s=(0,ec.Os)(),l=(0,j.X7)(),c=(0,V.q5)(),d=(0,i.d4)(e=>e.isOpenFileLoadedFromLiveGraph);return a.createElement(N.fu,{name:"Image Settings Modal"},a.createElement(eS,{...e,isUI3:r,isAiEnabled:o&&!s,insetImageSettings:l,openFile:c,isOpenFileLoadedFromLiveGraph:d}))}class eS extends a.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,x.Lt)(this.props.paint,90),z.zk.YES),h.l7.user("image-rotate-clockwise",()=>{_.glU.repairThumbnails()})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let a={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:a},n?z.zk.YES:z.zk.NO),this.setState({forceThumbnailUpdate:n}),n&&b.definedAnalyticsHandler.trackDefinedEvent("ai_productivity.fills_panel_image_adjust_slider_updated",{sliderName:e,sliderValue:r?.toString()})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;_.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;_.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,eT(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,G.J)(e)})}).catch(e=>(0,T.$D)(o.e.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,I.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.imageButtonRef=a.createRef(),this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),this.imageButtonRef?.current?.focus()}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?ev(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,w.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){let e=this.props.insetImageSettings?208:eb,r=this.props.insetImageSettings?208:152;return this.isVideo()?a.createElement(X.A,{className:em.IP,currentTime:this.state.currentTimeForScrubber,height:r,imagePaint:this.props.paint,isVideoLoaded:this.state.isVideoLoaded,onUpdateCurrentTime:this.onUpdateCurrentTime,openFileKey:this.props.openFile?.key,playing:this.state.playing,setDuration:this.setVideoDuration,setIsVideoLoaded:this.setIsVideoLoaded,setPlaying:this.setVideoPlaying,setUserClickedControls:this.setUserClickedVideoControls,userClickedControls:this.state.userClickedVideoControls,videoJsLib:this.state.videoJsLib,width:e}):this.isAnimatedImage()?a.createElement($.Y,{imagePaint:this.props.paint,width:e,height:r,className:em.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):a.createElement(q.K,{imagePaint:this.props.paint,width:e,height:r,className:em.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(e){if(this.isVideo()){if(!e)return a.createElement(ee.c,null);if(this.props.paint.video)return a.createElement(ep.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return a.createElement(ed.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return a.createElement(a.Fragment,null,this.props.isAiEnabled&&a.createElement(eO,{onClose:this.props.onClose}),a.createElement(N.fu,{name:"Color Adjust Sliders"},a.createElement("div",{className:y()(em.Vq,{[em.oc]:this.props.insetImageSettings})},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>a.createElement(eL,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,filterColorAdjust:this.props.paint.paintFilter,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:v.Pt(this.props,e)})))))}render(){let e=this.isVideo(),r=(0,H.Qn)(this.props.openFile),n=!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.isAiEnabled,i=this.props.insetImageSettings?208:eb,o=this.props.insetImageSettings?208:152,c=(d=this.props.paint,!!(0,x.y7)(d)&&d.image&&"Checker"===d.image.name);var d,u=(this.state.isPreviewHover||this.state.isImageButtonFocused||c?em.rv:em.ZS)+(this.state.isDragHover?" "+em.mw:"");e&&!r&&(u=em.ZS);let m=a.createElement(a.Fragment,null,(0,g.k)().ce_tv_fpl_select?a.createElement(ew,{...this.props,recordingKey:v.Pt(this.props,"imageScale")}):a.createElement(eC,{...this.props,recordingKey:v.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&a.createElement(eN,{className:y()({[em.GA]:!this.props.insetImageSettings,[em.b_]:this.props.insetImageSettings}),value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:v.Pt(this.props,"scalingFactor")})),_=a.createElement("span",{className:y()({[em.ZM]:!this.props.insetImageSettings})},a.createElement(J.$O,{paint:this.props.paint})),h=a.createElement("span",{className:y()({[em.Ts]:!this.props.insetImageSettings})},a.createElement(s.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,C.t)("fullscreen.properties_panel.rotate_90"),recordingKey:v.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,C.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":K.Ib.TEXT}},a.createElement(A.U,{svg:eh.A},a.createElement(p.R,null))));return a.createElement(et.Id,{className:y()({[em.G3]:this.props.insetImageSettings})},this.props.insetImageSettings?a.createElement("div",{className:em.C0,"data-onboarding-key":eg},a.createElement("div",{className:em.Fu},m),a.createElement("div",{className:em.D3},n&&_,h)):a.createElement(et.fI,{"data-onboarding-key":eg},m,n&&_,h),a.createElement(S.Y,{className:y()(u,{[em.ho]:this.props.insetImageSettings}),style:{backgroundImage:`url('${(0,D.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:v.Pt(this.props,"dropTarget")},a.createElement("div",{className:y()({[em.mQ]:!this.props.insetImageSettings||this.props.insetImageSettings&&c})},this.renderInlinePreview(),a.createElement("div",{className:em.dW,style:{width:i,height:o}},e&&r&&a.createElement("span",{className:em.QY},a.createElement(l.$n,{onClick:this.uploadMediaPaint,htmlAttributes:{onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur},variant:"secondary",ref:this.imageButtonRef},(0,C.tx)("fullscreen.properties_panel.choose_video"))),!e&&a.createElement(eu.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint,isInset:this.props.insetImageSettings,imageButtonRef:this.imageButtonRef,onClose:this.props.onClose})))),this.renderMediaControls(r),this.isAnimatedImage()&&a.createElement(Q.u,{title:(0,C.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:e_.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,C.t)("fullscreen.properties_panel.choose_which_frame_displayed")}),a.createElement(Y.p,{paint:this.props.paint,onChange:this.props.onChange,positionOverride:e?void 0:eR.opacityPositionOverride}))}}eS.displayName="ImageSettingsModal";let eA=["FILL","FIT","STRETCH","TILE"];function ew(e){let r=new O.D,n=r=>{"STRETCH"===r?k.Y5.triggerActionInUserEditScope("crop-image"):e.onChange({...e.paint,imageScaleMode:r})},i=eA.map((e,n)=>a.createElement(c.c$,{key:n,value:e},r.format(e)));return a.createElement("span",{className:y()({[em.Nd]:!e.insetImageSettings,[em.ak]:e.insetImageSettings})},a.createElement(c.bL,{value:e.paint.imageScaleMode.toString(),onChange:e=>{n(e)},recordingKey:e.recordingKey},a.createElement(c.l9,{width:"fill",label:a.createElement(d.h,null,(0,C.t)("fullscreen.properties_panel.image_scale_mode"))}),a.createElement(c.mc,null,i)))}ew.displayName="ImageScaleSelection";class eC extends a.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new O.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?k.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=eA.map((e,r)=>a.createElement(eE,{key:r,value:e,recordingKey:v.Pt(this.props,e)}));return a.createElement(ef,{ariaLabel:(0,C.t)("fullscreen.properties_panel.image_scale_mode"),className:y()({[em.Nd]:!this.props.insetImageSettings,[em.ak]:this.props.insetImageSettings}),dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,formatter:this.imageScaleModeFormatter,id:"image-scale-mode-select",onChange:this.onImageScaleModeChange,onMouseDown:R.dG,property:this.props.paint.imageScaleMode,recordingKey:this.props.recordingKey},e)}}eC.displayName="ImageScaleSelection";class eN extends a.PureComponent{constructor(){super(...arguments),this.formatter=new L.LN({min:.01,max:100})}render(){return a.createElement(Z.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function eL({min:e=-1,max:r=1,propertyName:n,...i}){let o=(0,a.useId)(),s=(0,j.X7)();return a.createElement(et.fI,null,a.createElement("div",{id:o,className:em.tx},function(e){switch(e){case"exposure":return(0,C.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,C.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,C.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,C.t)("fullscreen.properties_panel.temperature");case"tint":return(0,C.t)("fullscreen.properties_panel.tint");case"highlights":return(0,C.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,C.t)("fullscreen.properties_panel.shadows")}}(n)),a.createElement("div",{className:y()(em.CD,{[em.Wf]:s})},a.createElement(u.A,{"aria-labelledby":o,bigStep:.1,defaultValue:0,hints:[0],htmlAttributes:{onKeyDownCapture:e=>{k.Y5.isReady()&&(0,M.f7)(e)}},max:r,min:e,onChange:(e,{commit:r})=>{i.onChange(n,e,r)},rangeAnchor:0,recordingKey:i.recordingKey,step:.01,value:i.filterColorAdjust?.[n]||0})))}function eO({onClose:e}){let r=(0,a.useCallback)(()=>{(0,ei.B3)(ea.JT.EDIT_IMAGE),scheduler.postTask(()=>{e(),(0,es.$I)({moduleToOpen:{type:"custom",module:a.createElement(el.T,null),name:eo.Sn.EDIT_IMAGE},trackingData:{source:"image_settings"}})})},[e]);return(0,B.Zr)(ea.JT.EDIT_IMAGE)?a.createElement("div",{className:"x1xk1jr8"},a.createElement(l.IK,{onClick:r,variant:"secondary"},a.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k"},a.createElement(m.T,null),(0,C.tx)("fullscreen_actions.edit_image")))):null}eN.displayName="ScalingFactorInputs";let eR={opacityPositionOverride:{gridColumnStart:"xv2tl8m",$$css:!0}}},16200:(e,r,n)=>{n.d(r,{A:()=>S});var a=n(848318),i=n(301168),o=n(531788),s=n(803521),l=n(536384),c=n.n(l),d=n(214014),u=n(967688),p=n(31898),m=n(696786),_=n(748790),h=n(880801),g=n(619534),f=n(849911),E=n(131258),y=n(122586),b=n(787751),v=n(756672),T=n(119782);function I({uploadImagePaint:e,recordingKey:r,isInset:n,imageButtonRef:l,disableAi:d=!1,onClose:m}){let{close:I}=(0,f.cq)(),S=(0,v.sO)(),A=(0,i.wA)(),w=(0,_.GM)();return a.createElement("div",{className:c()(T.sn,{[T.Xb]:n})},a.createElement(o.IK,{onClick:e,recordingKey:r,ref:l},S?(0,u.tx)("slides.properties_panel.replace_media"):(0,u.tx)("fullscreen.properties_panel.image_settings.upload_new")),w&&!d&&a.createElement("div",{className:T.zr},a.createElement(o.IK,{onClick:()=>{m?.(),I(),(0,g.B3)(h.JT.GENERATE_IMAGE),scheduler.postTask(()=>{(0,y.$I)({moduleToOpen:{type:"custom",module:a.createElement(b.A,null),name:E.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),A(p.Ce())})},iconPrefix:a.createElement(s.T,null),variant:"secondary"},(0,u.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function S({uploadImagePaint:e,imageButtonRef:r,isInset:n,onImageButtonBlur:i,onImageButtonFocus:o,disableAi:s=!1,onClose:l}){return(0,m.GS)()?a.createElement(I,{uploadImagePaint:e,isInset:n,imageButtonRef:r,disableAi:s,onClose:l}):a.createElement(d.nR,{className:T.QY,onFocus:o,onBlur:i,onClick:e},(0,u.tx)("fullscreen.properties_panel.choose_image"))}},832329:(e,r,n)=>{n.d(r,{bU:()=>s});var a=n(848318),i=n(301168);n(186606),n(813009),n(453370),n(244534),n(375694),n(52463),n(42725),n(499025);var o=n(21614);function s(){let[e,r]=function(){let e=(0,i.d4)(e=>e.mirror.sceneGraph),r=(0,o.Vr)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive)return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let a=r??null;if(r?.type==="INSTANCE"&&(a=n?e.get(n):null),!a)return[null,null];if(!a?.isState)return[a??null,null];let i=a?.parentGuid?e.get(a?.parentGuid):null;return[a??null,i?.isStateGroup?i:null]}return[null,null]}(),n=a.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let a=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(a.length>0)return a},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return a.useMemo(()=>({links:n,description:c}),[n,c])}n(177345)},341090:(e,r,n)=>{n.d(r,{e:()=>E,q:()=>y});var a=n(848318),i=n(939294),o=n(898346),s=n(536384),l=n.n(s),c=n(907636),d=n(781239),u=n(454805),p=n(720522),m=n(302941),_=n(394882),h=n(934151),g=n(459377),f=n(713301);let E=(0,a.forwardRef)(function({heightMultiplier:e,selected:r,selectedSecondary:n,grabberClassName:i,hideGrabber:o,singletonRow:s,dragging:c,shiftGrabberOnInputFocus:d,...u},_){let h=n?g.kR:r?g.CZ:null,E=1.5===e?g.LE:g.l$;h&&(E+=" "+h);let y={...u,className:`${E} ${u.className||""}`},{recordingKey:b,...v}=y,T=r&&c?g.Aw:g.gB,I=a.createElement(a.Fragment,null,!o&&(!s||c)&&a.createElement("div",{className:l()(i,{[g.tp]:c,[g.kI]:!c,[g.wD]:1.5===e,[g.KT]:d})},(!c||r)&&a.createElement(p.B,{className:T,svg:f.A})),y.children);return a.createElement(m.S.recordableDiv,{recordingKey:b,...v,forwardedRef:_},I)});function y(e){let{useGrid:r}=(0,a.useContext)(h.dD);return a.createElement(b,{...e,useGrid:r})}class b extends d.uA{constructor(e){super(e),this.draggedIndex=null,this.canDragLastItemToEnd=this.props.canDragLastItemToEnd??!0,this.listItemKeys=[],this.isIndexSelected=e=>!!this.props.updateSelection&&-1!==this.props.selectedIndices.indexOf(e),this.indicesBeforeShift=null,this.lastIndexSelected=null,this.mouseDownPosition=null,this.hasCrossedDragThreshold=!1,this.selectItem=(e,r)=>{if(!this.props.updateSelection)return;let n=this.selectedIndicesAsSet();if(0===this.props.selectedIndices.length&&(this.indicesBeforeShift=null,this.lastIndexSelected=null),r.shiftKey&&null!=this.lastIndexSelected){n=new Set(this.indicesBeforeShift)??new Set;let r=Math.min(e,this.lastIndexSelected),a=Math.max(e,this.lastIndexSelected);for(let e=r;e<=a;e++)n.add(e)}else r.metaKey?e in(n=new Set(n))?(n.delete(e),this.lastIndexSelected=null,this.indicesBeforeShift=null):n.add(e):n.has(e)||(n=new Set([e])),this.lastIndexSelected=e,this.indicesBeforeShift=n;this.props.updateSelection([...n].sort())},this.onListItemMouseDown=(e,r)=>{r.stopPropagation(),!this.props.isDragDisabled&&this.props.updateSelection&&(this.draggedIndex=e,this.selectItem(e,r),this.props.listItems.length>1&&(this.setState({isDraggingSelection:!0}),this.props.onDragStart&&this.props.onDragStart(),this.mouseDownPosition=new u.Mi(r.clientX,r.clientY)))},this.withinInsertIntoDragTarget=(e,r,n)=>{let a=this.props.listItems[r];if(this.props.canInsertItemsIn&&void 0!==a&&this.props.canInsertItemsIn(a))return this.props.prioritizeInsertionIn?n.pageY>e.top&&n.pageY<e.top+e.height:n.pageY>e.top+e.height/3&&n.pageY<e.top+2*e.height/3},this.onListItemMouseMove=(e,r)=>{if(!this.props.isDragDisabled){if(!this.state.isDraggingSelection||!this.mouseDownPosition)return d.aH;{this.mouseDownPosition.distanceTo({x:r.clientX,y:r.clientY})>3&&(this.hasCrossedDragThreshold=!0,this.props.onCrossedDragThreshold?.());let n=r.currentTarget.getBoundingClientRect(),a=n.top+n.height/2,i=null,o=!1;if(this.withinInsertIntoDragTarget(n,e,r))i=e,o=!0,this.setState({indexToInsertSelectionIn:i,indexToInsertSelectionBefore:null});else{if(i=this.props.reversed?r.pageY>a?e:e+1:r.pageY<a?e:e+1,!this.canDragLastItemToEnd&&null!==this.draggedIndex&&this.draggedIndex===this.props.listItems.length-1&&i>this.draggedIndex&&(i=this.draggedIndex),this.props.canInsertSelectionBeforeIndex&&!this.props.canInsertSelectionBeforeIndex(i))return d.aH;this.setState({indexToInsertSelectionIn:null,indexToInsertSelectionBefore:i})}if(this.props.onDrag){let e=(r.pageX-n.left)/n.width;this.props.onDrag(i,e,o)}this.props.scrollContainer&&(r.pageY-this.props.scrollContainer.getScrollContainerTop()<40?this.props.scrollContainer.scrollTo(this.props.scrollContainer.getScrollTop()-10):this.props.scrollContainer.getScrollContainerBottom()-r.pageY<40&&this.props.scrollContainer.scrollTo(this.props.scrollContainer.getScrollTop()+10)),r.preventDefault(),r.stopPropagation()}}},this.onListItemMouseUp=(e,r)=>{this.props.isDragDisabled||(null==this.state.indexToInsertSelectionBefore&&null==this.state.indexToInsertSelectionIn&&!r.shiftKey&&!r.metaKey&&this.isIndexSelected(e)&&(this.props.updateSelection([e]),this.indicesBeforeShift=new Set([e])),this.mouseDownPosition=null,this.hasCrossedDragThreshold=!1)},this.onListItemContextMenu=(e,r)=>{this.selectItem(e,r)},this.updateSelectionPropertiesAfterInsertion=e=>{if(this.indicesBeforeShift){let r=new Set;for(let n of this.indicesBeforeShift){let a=e.get(n);r.add(a??n)}this.indicesBeforeShift=r}if(this.lastIndexSelected){let r=e.get(this.lastIndexSelected);void 0!==r&&(this.lastIndexSelected=r)}},this.onDocumentMouseUp=d.cZ(this,"mouseup",()=>{if(!this.props.updateSelection)return d.aH;let e=!1;if(null!=this.state.indexToInsertSelectionBefore){if(e=!0,this.props.onInsertItemsBetweenValues){let e=[];for(let r of this.props.selectedIndices)this.props.listItems[r]&&e.push(this.props.listItems[r]);let r=this.props.listItems[this.state.indexToInsertSelectionBefore-1],n=this.props.listItems[this.state.indexToInsertSelectionBefore],a=this.props.onInsertItemsBetweenValues(e,r,n);a&&this.updateSelectionPropertiesAfterInsertion(a)}else if(this.props.onChange){let e=this.props.listItems,r=this.selectedIndicesAsSet(),n=[],a=[];for(let a=0;a<this.state.indexToInsertSelectionBefore;a++)!r.has(a)&&a<e.length&&n.push(e[a]);for(let r of this.props.selectedIndices)a.push(n.length),void 0!==e[r]&&n.push(e[r]);for(let a=this.state.indexToInsertSelectionBefore;a<e.length;a++)r.has(a)||void 0===e[a]||n.push(e[a]);this.props.onChange(n,void 0,this.props.listItems[this.draggedIndex??0]),this.props.updateSelection(a)}this.props.onReorder&&this.props.onReorder()}if(null!=this.state.indexToInsertSelectionIn&&this.props.onInsertItemsIn){e=!0;let r=[];for(let e of this.props.selectedIndices)this.props.listItems[e]&&r.push(this.props.listItems[e]);let n=this.props.listItems[this.state.indexToInsertSelectionIn],a=this.props.onInsertItemsIn(r,n);a&&this.updateSelectionPropertiesAfterInsertion(a)}if(this.props.onDragEnd?.(),this.state.isDraggingSelection&&(this.setState({isDraggingSelection:!1}),e=!0),(null!==this.state.indexToInsertSelectionIn||null!==this.state.indexToInsertSelectionBefore)&&(this.setState({indexToInsertSelectionIn:null,indexToInsertSelectionBefore:null}),e=!0),!e)return d.aH}),this._cachedListItems=[],this.onReorderRow=d.dp(this,"reorderRows",e=>{let r=this.props.listItems.length,n=this.props.reversed?e.map(e=>this.props.listItems[r-e-1]).reverse():e.map(e=>this.props.listItems[e]);this.listItemKeys=e.map(e=>this.listItemKeys[e]);let a=null!==this.draggedIndex?this.props.listItems[this.draggedIndex]:void 0;if(this.props.onChange&&this.props.onChange(n,void 0,a),!0!==this.props.isDragDisabled&&this.props.onInsertItemsBetweenValues&&null!==this.state.indexToInsertSelectionBefore){let e=this.props.selectedIndices.reduce((e,r)=>{let n=this.props.listItems[r];return n&&e.push(n),e},[]),r=this.props.listItems[this.state.indexToInsertSelectionBefore-1],n=this.props.listItems[this.state.indexToInsertSelectionBefore];if(e.length>0){let a=this.props.onInsertItemsBetweenValues(e,r,n);a&&this.updateSelectionPropertiesAfterInsertion(a)}}this.setState({indexToInsertSelectionIn:null,indexToInsertSelectionBefore:null})}),this.onDragOver=d.dp(this,"dragOver",({draggingOverRowIndex:e,position:r})=>{this.setState({indexToInsertSelectionIn:"above"===r?e-1:e,indexToInsertSelectionBefore:"above"===r?e:e+1})}),this.state={isDraggingSelection:!1,indexToInsertSelectionIn:null,indexToInsertSelectionBefore:null},this.listItemKeys=this.numbersUpToN(this.props.listItems.length)}componentWillUpdate(){this.props.listItems.length!==this.listItemKeys.length&&(this.listItemKeys=this.numbersUpToN(this.props.listItems.length))}numbersUpToN(e){return Array.from({length:e},(e,r)=>r)}componentDidMount(){super.componentDidMount(),this.props.isDragDisabled||document.addEventListener("mouseup",this.onDocumentMouseUp)}componentWillUnmount(){super.componentWillUnmount(),this.props.isDragDisabled||document.removeEventListener("mouseup",this.onDocumentMouseUp)}selectedIndicesAsSet(){return this.props.updateSelection?new Set(this.props.selectedIndices):new Set}cachedItemCallback(e){return new _.H4(()=>this.props.renderListItem(this.props.listItems[e],e,!!this.props.updateSelection&&this.props.selectedIndices.indexOf(e)>=0,this.state.isDraggingSelection,this.onListItemMouseDown.bind(this,e),this.onListItemMouseMove.bind(this,e),this.onListItemMouseUp.bind(this,e),this.onListItemContextMenu.bind(this,e)))}render(){let e=this._cachedListItems,r=this.props.listItems.length,n=e.length,s=[];if(r!==n){for(let a=n;a<r;a++)e.push(this.cachedItemCallback(a));n=r}let l=a.createElement("div",{className:g.VY,style:this.props.insertDividerStyle,key:`separator-${this.state.indexToInsertSelectionBefore}`});for(let a=0;a<n;a++){let n=[e[a].render({isVisible:a<r,displayAs:"block"})];a===this.state.indexToInsertSelectionBefore&&this.hasCrossedDragThreshold&&(this.props.reversed?n.push(l):n.unshift(l)),a===r-1&&this.state.indexToInsertSelectionBefore===r&&this.hasCrossedDragThreshold&&(this.props.reversed?n.unshift(l):n.push(l)),s.push(n)}if(this.props.reversed&&s.reverse(),!this.props.useGrid)return a.createElement("div",null,s);if(this.props.isDragDisabled)return a.createElement(h.xp.Provider,{value:{isDragging:!1}},a.createElement(i.bL,null,s.map((e,r)=>a.createElement(a.Fragment,{key:this.listItemKeys[r]},e))));let c=null!==this.state.indexToInsertSelectionIn;return a.createElement(o.hh,null,a.createElement(h.xp.Provider,{value:{isDragging:c}},a.createElement(v,{scrollContainer:this.props.scrollContainer?.getScrollContainer(),isDragging:c}),a.createElement(i.bL,{onReorderRows:this.onReorderRow,setSelectedRows:e=>{let r=this.props.listItems.length-1,n=[...e].map(e=>this.props.reversed?r-e:e);this.props.updateSelection&&this.props.updateSelection(n.sort())},onDragOver:s.length>1?this.onDragOver:void 0,onCancelDrag:()=>{this.setState({indexToInsertSelectionIn:null,indexToInsertSelectionBefore:null})}},-1===this.state.indexToInsertSelectionIn?l:null,s.map((e,r)=>a.createElement(a.Fragment,{key:this.listItemKeys[r]},e,r===this.state.indexToInsertSelectionIn&&l)))))}}function v({scrollContainer:e,isDragging:r}){return(0,c.C)(e,r),null}b.displayName="DraggableList",b.propTypes={onChange:(e,r,n)=>{if(!e.onChange&&!e.onInsertItemsBetweenValues&&!e.onInsertItemsIn&&e.updateSelection)return Error("DraggableList: onChange, onInsertItemsBetweenValues, or onInsertItemsIn must be provided when selection is allowed")},onInsertItemsBetweenValues:(e,r,n)=>{if(!e.onChange&&!e.onInsertItemsBetweenValues&&!e.onInsertItemsIn&&e.updateSelection)return Error("DraggableList: onChange, onInsertItemsBetweenValues, or onInsertItemsIn must be provided when selection is allowed")},onInsertItemsIn:(e,r,n)=>{if(!e.onChange&&!e.onInsertItemsBetweenValues&&!e.onInsertItemsIn&&e.updateSelection)return Error("DraggableList: onChange, onInsertItemsBetweenValues, or onInsertItemsIn must be provided when selection is allowed")}}},24508:(e,r,n)=>{n.d(r,{LI:()=>eR,hD:()=>eL});var a=n(848318),i=n(301168),o=n(559389),s=n(328813),l=n(271020),c=n(544405),d=n(23207),u=n(353317),p=n(658029),m=n(812295),_=n(408193),h=n(92778),g=n(347701),f=n(808943),E=n(186606),y=n(19180),b=n(382902),v=n(418193),T=n(536384),I=n.n(T),S=n(989232),A=n(238462),w=n(781239),C=n(41830),N=n(156137),L=n(454805),O=n(345249),R=n(401970),P=n(967688),D=n(533226),k=n(244534),M=n(375694),F=n(142896),x=n(372566),U=n(67188),B=n(696786),G=n(303397),V=n(584063),H=n(643841),z=n(131804),K=n(906314),W=n(307877),j=n(439952),Y=n(489082),$=n(552807),q=n(200300),X=n(280255),J=n(394882),Z=n(172797),Q=n(273555),ee=n(17753),et=n(52463),er=n(882883),en=n(896777),ea=n(213832),ei=n(341090),eo=n(967045),es=n(401497),el=n(412292),ec=n(483157),ed=n(345204),eu=n(614892),ep=n(120846),em=n(169660),e_=n(465548),eh=n(934151),eg=n(699848),ef=n(880801),eE=n(619534),ey=n(307843),eb=n(697587),ev=n(150728),eT=n(396276),eI=n(684927),eS=n(85206),eA=n(580012),ew=n(415431);function eC(e){return 2===e?"@2x":3===e?"@3x":4===e?"@4x":""}function eN(e){let r=!1,n=!1,a=!1;for(let i of e)(0,eT.O)(i)&&"CONTENT_SCALE"===i.constraint.type?(1===i.constraint.value&&(r=!0),2===i.constraint.value&&(n=!0),3===i.constraint.value&&(a=!0)):r=!0;let i={contentsOnly:!0,imageType:"PNG",constraint:{type:"CONTENT_SCALE",value:1},suffix:"",useAbsoluteBounds:!1,useBicubicSampler:!!(0,y.k)().bicubic_image_sampler&&!(0,y.k)().swap_image_sampling_default_export_setting,colorProfile:"DOCUMENT"};return r&&(n?a||(i.constraint.value=3,i.suffix=eC(3)):(i.constraint.value=2,i.suffix=eC(2))),i}function eL(){return(0,i.d4)(e=>{let r=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.exportSettings,a=e.mirror.selectionProperties.name;return 1===r&&n&&(0,Y.hS)(n)&&n.length>0&&null!=a?a.slice(0,64):""})}let eO=class e extends a.PureComponent{constructor(e){super(e),this.exportList=(0,v.xx)(e=>(0,Y._W)(e,[]).map(eT.m)),this.onExportChange=(e,r)=>{let n=0===e.length,a=n?Q.zk.NO:r;G.Y5.updateSelectionProperties({exportSettings:e},{shouldCommit:a}),n&&(G.Y5.updateSelectionProperties({exportBackgroundDisabled:!1},{shouldCommit:r}),this.setState({isRenameLayersEnabled:!1}))},this.addProperty=e=>{let r=this.exportList(this.props.exportSettings),n=eN(r);this.onExportChange(r.concat([n])),this.props.onAddClick?.()&&e.stopPropagation(),(0,S.trackEvent)("editor-export-panel-add",{selectionIsCanvas:0===this.props.numSelected})},this.addExportOfType=e=>{let r=this.exportList(this.props.exportSettings),n=eN(r);if("PNG"===e){this.onExportChange(r.concat([n]));return}let a=this.onExportChange.bind(this);eH(n,e,function(e){a(r.concat([e]))})},this.onClickExport=async()=>{if((0,S.trackEvent)("Export Panel Export Clicked"),0===this.props.numSelected)(0,S.trackEvent)("Export Picker Opened",{from:"export-panel"}),this.props.dispatch(k.u1({id:F.C9}));else{this.state.isRenameLayersEnabled&&await this.autoRenameFrameOnExport();let e=(0,Y._W)(this.props.exportSettings,[]),r=e.filter(e=>!0===e.useBicubicSampler),n=e.filter(e=>!1===e.useBicubicSampler);S.definedAnalyticsHandler.trackDefinedEvent("rendering_and_animation.exported_export_setting_bicubic",{bicubicCount:r.length,nearestNeighborCount:n.length});let a=[this.props.currentPage];j.xY.includeOutsideContents(e)||(a=Object.keys(this.props.sceneGraphSelection)),(0,Z.Dc)(Z.hV.Export,this.props.saveAsState,this.props.dispatch,"export-selected-exportables-direct",a,"export-selected-exportables-direct"),this.props.dispatch(D.rg())}},this.shouldShowAIRenameLayersCheckbox=e=>(0,W.A0)(E.uQ6.EXPORT_FRAME)&&(e>0||(0,Y.gl)(this.props.exportSettings))&&(this.props.isSelectionRenamable||this.state.isRenameLayersRunning),this.autoRenameFrameOnExport=async()=>{this.props.isSelectionRenamable&&(this.setState({isRenameLayersRunning:!0}),b.zl.set(ey.zF,(0,K.Tr)(E.uQ6.EXPORT_FRAME)),(0,eE.B3)(ef.JT.AUTO_RENAME_LAYERS),await (0,eE.Ag)(ef.JT.AUTO_RENAME_LAYERS,K.Ay,{source:E.uQ6.EXPORT_FRAME,overwriteNames:!1,ignoreDescendants:!0}),this.setState({isRenameLayersRunning:!1,isRenameLayersEnabled:!1}))},this._checkboxAndButtonRow=new J.H4(()=>{let e="";if(0===this.props.numSelected||null==this.props.numSelected){let{title:r}=(0,z.vk)("CANVAS","",this.props.openFile?.name||(0,P.t)("fullscreen.fullscreen_view_selector.untitled"),[]);e=(0,P.t)("fullscreen.properties_panel.export_title",{title:r})}else if(1===this.props.numSelected){let{title:r}=(0,z.vk)("RECTANGLE",this.props.singleNodeName,"",[]);e=this.props.standalone?(0,P.t)("fullscreen.properties_panel.export"):(0,P.t)("fullscreen.properties_panel.export_title",{title:r})}else e=(0,P.t)("fullscreen.properties_panel.export_this_props_num_selected_layers",{numSelected:this.props.numSelected});return a.createElement(ed.z,{onClick:this.onClickExport,key:"export-button",recordingKey:w.Pt(this.props,"export"),disabled:!!this.state.isRenameLayersRunning},a.createElement(O.ph,{text:this.state.isRenameLayersRunning?(0,P.t)("fullscreen.properties_panel.export_generating_name"):e,tooltipPropsWhenTruncated:{"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":e}}))}),this._shouldRenderPreviewThumbnail=()=>(0,Y._W)(this.props.exportSettings,[]).length>0,this._previewThumbnail=new J.H4(()=>{let e=this.props.exportSettings,r=e[0].useAbsoluteBounds||!1,n=e[0].useBicubicSampler||!1;return a.createElement(H.ZH,null,({documentExportColorProfile:e})=>a.createElement(eW,{key:"preview",colorProfile:this.props.exportSettings&&!(0,Y.gl)(this.props.exportSettings)?(0,V.A)(this.props.exportSettings,e):e,currentPage:this.props.currentPage,numSelected:this.props.numSelected,panelWidth:this.props.panelWidth,recordingKey:w.Pt(this.props,"previewThumbnail"),sceneGraphSelection:this.props.sceneGraphSelection,shouldComputeThumbnails:this._shouldRenderPreviewThumbnail,useAbsoluteBounds:r,useBicubicSampler:n}))}),this.state={isRenameLayersRunning:!1,isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(e.sceneGraphSelection)}}singleNodeIdFrom(e){let r=Object.keys(e);if(1===r.length)return r[0]}getRenameLayersCheckboxStatusForSelection(r){let n=this.singleNodeIdFrom(r);return!!n&&e.renameLayersCheckedForNode.has(n)}componentDidUpdate(r,n){if(this.props.sceneGraphSelection===r.sceneGraphSelection)return;let a=this.singleNodeIdFrom(r.sceneGraphSelection);a&&(n.isRenameLayersEnabled?e.renameLayersCheckedForNode.add(a):e.renameLayersCheckedForNode.delete(a)),this.setState({isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(this.props.sceneGraphSelection)})}render(){let e=this.props.openFile&&(0,X.Pe)(this.props.openFile),r=this.exportList(this.props.exportSettings);return a.createElement(N.k,{name:"export_panel"},a.createElement(eu.Zk,{className:I()({[eI.IN]:this.props.standalone,[eI.hi]:this.props.standalone&&0===r.length})},e?a.createElement("div",{className:eI.r9},a.createElement(ec.Q,{doNotReserveSpaceForChevron:!0,className:eI.dK},a.createElement(m.s,{className:eI.WO}),(0,P.tx)("fullscreen.properties_panel.export_disabled")),a.createElement(eu.JU,{className:eI.SO},a.createElement("span",null,(0,P.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")))):a.createElement(a.Fragment,null,a.createElement(eD,{addProperty:this.addProperty,currentSelectedProperty:this.props.currentSelectedProperty,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,entrypointMenu:a.createElement(ev.n3,{addExportOfType:this.addExportOfType}),headerClickTriggersAddProperty:this.props.headerClickTriggersAddProperty,isMixed:(0,Y.gl)(this.props.exportSettings),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,onChange:this.onExportChange,onHeaderClick:r.length>0?this.props.onHeaderClick:A.lQ,openFile:this.props.openFile,pickerShown:this.props.pickerShown,propertyList:r,recordingKey:w.Pt(this.props,"exportList"),selectedPropertyType:E.rrT.EXPORT,standalone:this.props.standalone,title:this.props.title}),a.createElement(en.JH,{isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom||null},this._checkboxAndButtonRow.render({isVisible:r.length>0||(0,Y.gl)(this.props.exportSettings)}),this.shouldShowAIRenameLayersCheckbox(r.length)&&a.createElement(eg.Ad,{label:null,input:a.createElement(l.S,{muted:!0,checked:this.state.isRenameLayersEnabled,onChange:()=>{this.setState({isRenameLayersEnabled:!this.state.isRenameLayersEnabled})},label:a.createElement(c.J,null,a.createElement("div",{className:eI.oB},(0,P.tx)("auto_rename_layers.rename_layers",{numLayers:this.props.numSelected}),a.createElement(eb.y,{helpUrlVariant:ef.JT.AUTO_RENAME_LAYERS})))})}),this._previewThumbnail.render({isVisible:this._shouldRenderPreviewThumbnail()})))))}};eO.notifierName="ExportNotifier",eO.renameLayersCheckedForNode=new Set,eO.isSelectionRenamable=e=>{let{detectedUnnamedLayers:r,exceedingLayerLimit:n}=(0,W.Mc)(e,!0);return r&&!n};let eR=eO;function eP(e){let{selectionHandler:r}=e,n=a.useRef(null),i=(0,B.GS)();return a.createElement("div",{className:eI.fj},a.createElement(eo.MX,{selection:r,onChange:e.onChange,addProperty:e.addProperty,overrideAddPropertyTooltip:i?(0,P.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,isStylesPickerShown:!!e.pickerShown,showRemoveButton:!i,recordingKey:e.recordingKey,parent:n},a.createElement(er.a,{title:e.title,ref:n})))}function eD(e){let r=(0,i.wA)(),{selectedPropertyType:n,dropdownShown:o,pickerShown:s,onChange:l,propertyList:c}=e,d=w.c1(e),u=(0,Y._W)(e.propertyList,[]).length<=1,p=(0,B.GS)(),m=(0,q.o3)(q.nt.useGridPart2)&&p,_=a.useCallback(e=>{r(k.XE()),l((0,Y._W)(c,[]).filter((r,n)=>n!==e)),G.Y5.deselectProperty()},[r,l,c]),h=a.useCallback((e,i,l,c,p,h,g,f,E)=>a.createElement(ez,{key:m?void 0:`export-${i}`,dispatch:r,dropdownShown:o,exportSetting:e,hasFocus:p,id:`${n}-${i}`,index:i,isDragging:c,onChange:h,onMouseDown:g,onMouseMove:f,onMouseUp:E,onRemoveExport:()=>_(i),pickerShown:s,recordingKey:d(i),selected:l,selectedPropertyType:n,shouldUseGrid:m,singletonRow:u}),[n,u,r,o,s,d,_,m]),g=e.standalone?a.memo(r=>a.createElement(eP,{...e,...r})):void 0;return a.createElement(eh.dD.Provider,{value:{useGrid:m}},a.createElement(eo.h6,{addProperty:e.addProperty,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,entrypointMenu:e.entrypointMenu,headerClickTriggersAddProperty:e.headerClickTriggersAddProperty,isMixed:e.isMixed,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,onChange:e.onChange,onHeaderClick:e.onHeaderClick,openFile:e.openFile,overrideAddPropertyTooltip:p?(0,P.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,pickerShown:e.pickerShown,propertyList:e.propertyList,recordingKey:e.recordingKey,renderHeader:e.standalone?g:void 0,renderProperty:h,selectedPropertyType:e.selectedPropertyType,showRemoveButton:!p,stylePickerShown:{isShown:!1},title:e.title||(0,P.t)("fullscreen.properties_panel.export")}))}eD.displayName="ExportList";class ek extends ea.a3{}class eM extends ep.c${}let eF=ep.l6,ex=ep.c$,eU=[{type:"CONTENT_SCALE",value:.5},{type:"CONTENT_SCALE",value:.75},{type:"CONTENT_SCALE",value:1},{type:"CONTENT_SCALE",value:1.5},{type:"CONTENT_SCALE",value:2},{type:"CONTENT_SCALE",value:3},{type:"CONTENT_SCALE",value:4},{type:"CONTENT_WIDTH",value:512},{type:"CONTENT_HEIGHT",value:512}],eB=new x.mz,eG={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF"}}},eV=a.forwardRef(function({dropdownShown:e,exportSetting:r,hasFocus:n,id:o,isDragging:s,onConstraintChange:l,onImageTypeChange:m,onMouseDown:g,onMouseMove:f,onMouseUp:E,onRemoveExport:b,onSuffixChange:v,onToggleModal:T,pickerShown:S,recordingKey:A,selected:N,shouldUseGrid:L,singletonRow:O},D){let k=w.c1(A),M=(0,i.wA)(),F=(0,B.GS)(),x=(0,y.k)().fpl_select_migration,G=(0,eh.Qu)(),V=eU.map((e,r)=>a.createElement(eM,{key:r,value:e,recordingKey:k("constraints",e.value)})),H={onClick:T,onMouseDown:U.dG,"data-tooltip":(0,P.t)("fullscreen.export_panel.export_settings"),"data-tooltip-type":ee.Ib.TEXT},z=k("settings"),K=a.createElement(C.E,{name:"export_constraint_combo_box"},a.createElement(ea.ow,{value:{select:F?em.pW:void 0,inputComponent:F?em.gm:void 0}},a.createElement(ep.tV,{value:{chevron:F?e_.t:void 0}},a.createElement(ek,{ariaLabel:(0,P.t)("fullscreen.properties_panel.export_settings.constraints.aria_label"),className:I()(eI.QU,F?eI.AL:void 0),disabled:"SVG"===r.imageType||"PDF"===r.imageType,dispatch:M,dropdownClassName:eI.J9,dropdownShown:e,formatter:eB,id:`export-constraint-${o}`,inputClassName:F?eI.Ez:void 0,isTokenizable:F,onChange:l,onKeyDown:G,onMouseDown:U.dG,property:r.constraint,recordingKey:k("contraints")},V)))),W=a.useRef(null),j=a.createElement(C.E,{name:"export_image_type_select"},x?a.createElement(d.bL,{value:r.imageType,onChange:m,recordingKey:k("imageType")},a.createElement(d.l9,{ref:W,width:"fill",label:a.createElement(c.h,null,(0,P.t)("fullscreen.properties_panel.export_settings_image_file_type"))}),a.createElement(d.mc,null,a.createElement(d.c$,{value:"PNG"},"PNG"),a.createElement(d.c$,{value:"JPEG"},"JPEG"),a.createElement(d.c$,{value:"SVG"},"SVG"),a.createElement(d.c$,{value:"PDF"},"PDF"))):a.createElement(eF,{ariaLabel:(0,P.t)("fullscreen.properties_panel.export_settings_image_file_type"),chevronClassName:eI.tc,className:eI.wm,dispatch:M,dropdownClassName:eI.PK,dropdownShown:e,formatter:eG,id:`export-image-type-${o}`,inputClassName:eI.SL,onChange:m,onMouseDown:U.dG,property:r.imageType,recordingKey:k("imageType")},a.createElement(ex,{value:"PNG",recordingKey:k("imageType","png")}),a.createElement(ex,{value:"JPEG",recordingKey:k("imageType","jpeg")}),a.createElement(ex,{value:"SVG",recordingKey:k("imageType","svg")}),a.createElement(ex,{value:"PDF",recordingKey:k("imageType","pdf")}))),Y=a.createElement(C.E,{name:"toggle_export_settings_modal_button"},a.createElement("span",{className:eI.uX},a.createElement(u.d,{"aria-expanded":!!S,"aria-label":(0,P.t)("fullscreen.export_panel.export_settings"),recordingKey:z,htmlAttributes:{...H,"data-test-id":"toggle-export-settings-modal-button"}},a.createElement(R.U,{svg:eA.A,fallbackSvg:ew.A},a.createElement(_.J,null))))),$=F&&!!b&&a.createElement(C.E,{name:"remove_export_button"},a.createElement(p.K,{onClick:b,"aria-label":(0,P.t)("fullscreen.properties_panel.tooltip_remove"),recordingKey:k("removeButton"),htmlAttributes:{onMouseDown:U.dG,"data-tooltip":(0,P.t)("fullscreen.properties_panel.tooltip_remove"),"data-tooltip-type":ee.Ib.TEXT}},a.createElement(h.O,null)))||null;return L?a.createElement(eh.dp,{ref:D,firstRightIcon:Y,hasFocus:s,htmlAttributes:{onFocus:e=>{e.target===W.current&&null===e.relatedTarget&&e.stopPropagation()}},leftInput:K,recordingKey:A,rightInput:j,secondRightIcon:$,selected:N,singletonRow:O}):a.createElement(ei.e,{ref:D,className:F?eI.v_:void 0,dragging:s,onMouseDown:g,onMouseMove:f,onMouseUp:E,recordingKey:A,selected:N,selectedSecondary:N&&!n,singletonRow:O},K,!F&&a.createElement(el.lq,{value:r.suffix,suffixClassName:eI.ei,onSuffixChange:v,recordingKey:k("suffix")}),j,Y,$)});function eH(e,r,n){if(r===e.imageType)return;let a=""!==e.suffix&&eC(e.constraint.value)===e.suffix?eC(1):e.suffix;"PNG"===r?n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useAbsoluteBounds:e.useAbsoluteBounds,useBicubicSampler:e.useBicubicSampler,suffix:e.suffix,constraint:e.constraint}):"JPEG"===r||"PDF"===r?n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useAbsoluteBounds:e.useAbsoluteBounds,useBicubicSampler:e.useBicubicSampler,suffix:"PDF"===r?a:e.suffix,constraint:"PDF"===r?{type:"CONTENT_SCALE",value:1}:e.constraint,quality:"PDF"===r?es.JI:es.Ho}):"SVG"===r&&n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useBicubicSampler:e.useBicubicSampler,suffix:a,constraint:{type:"CONTENT_SCALE",value:1},svgIDMode:"IF_NEEDED",svgOutlineText:!0,svgForceStrokeMasks:!1,useAbsoluteBounds:e.useAbsoluteBounds})}function ez(e){let r=a.useRef(null),n=r=>{e.onChange({...e.exportSetting,suffix:r})},i=()=>e.pickerShown&&e.pickerShown.id===e.id?e.pickerShown:null,o=i(),s=(0,B.GS)(),l=s?a.Fragment:"div";return a.createElement(l,null,a.createElement(eV,{ref:r,dropdownShown:e.dropdownShown,exportSetting:e.exportSetting,hasFocus:e.hasFocus,id:e.id,isDragging:e.isDragging,onConstraintChange:r=>{""!==e.exportSetting.suffix&&eC(e.exportSetting.constraint.value)===e.exportSetting.suffix?e.onChange({...e.exportSetting,constraint:r,suffix:eC(r.value)}):e.onChange({...e.exportSetting,constraint:r})},onImageTypeChange:r=>{eH(e.exportSetting,r,e.onChange)},onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,onRemoveExport:e.onRemoveExport,onSuffixChange:n,onToggleModal:n=>{if(n.stopPropagation(),i())e.dispatch(k.XE()),G.Y5.deselectProperty();else{let n=(0,et.cn)(r.current,el.zk);G.Y5.updateAppModel({currentSelectedProperty:{type:e.selectedPropertyType,indices:[e.index]}}),e.dispatch(k.u1({id:e.id,initialX:n.x,initialY:n.y})),e.dispatch(M.sw())}},pickerShown:o,recordingKey:e.recordingKey,selected:e.selected,shouldUseGrid:e.shouldUseGrid,singletonRow:e.singletonRow}),o&&a.createElement(el.Tq,{exportSettings:e.exportSetting,onChange:e.onChange,pickerShown:o,dispatch:e.dispatch,recordingKey:w.Pt(e,"settings"),dropdownShown:e.dropdownShown,onSuffixChange:n,suffixClassName:eI.ei,isUI3:s}))}function eK(e){return a.createElement("div",{className:e.className||eI.cT},a.createElement("img",{src:e.thumbnail.src,width:e.thumbnail.displaySize.x,height:e.thumbnail.displaySize.y,alt:"preview of layer to be exported"}))}class eW extends a.PureComponent{constructor(e){super(e),this.toggleShown=()=>{this.setState({previewShown:!this.state.previewShown})},this.updateThumbnail=()=>{if(!this.state.previewShown||!this.props.shouldComputeThumbnails())return;let e=new L.Mi(this.props.panelWidth-30,this.props.panelWidth-30),r=$.WQ(e,this.props.useAbsoluteBounds,!!this.props.useBicubicSampler),n=null;r&&r.pixels&&r.pixelSize&&r.displaySize&&(n={src:$.Pv(r.pixels,r.pixelSize,this.props.colorProfile),displaySize:r.displaySize}),this.setState({thumbnail:n})},this.updateThumbnailAfterDelay=(0,o.s)(()=>this.updateThumbnail(),1e3),this.onSceneGraphChange=()=>{null!=this.state.previewGUID&&this.updateThumbnailAfterDelay()},this.state={previewIsCanvas:!0,previewGUID:null,previewShown:!1,thumbnail:null}}componentDidUpdate(e,r){e.colorProfile!==this.props.colorProfile&&(this.setState({thumbnail:null}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail());let n=!r.previewShown&&this.state.previewShown,a=e.panelWidth!==this.props.panelWidth;if(this.props.sceneGraphSelection===e.sceneGraphSelection&&!n&&!a)return;let i=this.props.sceneGraphSelection,o=this.props.numSelected;if((o>1||!this.state.previewShown)&&!a){this.setState({thumbnail:null,previewGUID:null});return}let l=0===o,c=l?this.props.currentPage:(0,s.o)(i);(c!==this.state.previewGUID||a)&&(this.setState({thumbnail:null,previewGUID:c,previewIsCanvas:l}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail())}componentDidMount(){G.Y5.fromFullscreen.on("pingSceneGraphEvent",this.onSceneGraphChange)}componentWillUnmount(){G.Y5.fromFullscreen.removeListener("pingSceneGraphEvent",this.onSceneGraphChange),this.updateThumbnailAfterDelay.cancel()}render(){return this.props.numSelected>1?null:a.createElement("div",null,a.createElement(C.E,{name:"toggle_export_preview_visibility_button"},a.createElement(eu.fI,{onClick:this.toggleShown,recordingKey:this.props.recordingKey,className:eI.q4},a.createElement(R.U,{svg:eS.A,className:this.state.previewShown?eI.ai:eI.hC},this.state.previewShown?a.createElement(g.O,null):a.createElement(f.k,null)),a.createElement(eu.JU,{className:eI.Pf},(0,P.tx)("fullscreen.properties_panel.preview")))),this.state.previewShown&&this.state.thumbnail&&a.createElement(eK,{thumbnail:this.state.thumbnail}))}}eW.displayName="PreviewThumbnail"},714327:(e,r,n)=>{n(848318),n(186606),n(382902),n(702038),n(489082),n(963307),n(355755),n(125761),n(554326),n(614092),n(324150),n(215148)},16808:(e,r,n)=>{n.d(r,{K0:()=>f,Me:()=>E,YW:()=>y});var a=n(848318),i=n(536384),o=n.n(i),s=n(971536),l=n(857607),c=n(979890),d=n(720522),u=n(642014),p=n(863270),m=n(934151),_=n(138111),h=n(973219),g=n(364616);a.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,h.U,e.disabled?h.Ah:h.pq,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.No]:e.isBackgroundTransparent});return a.createElement(f,{...e,className:n,ref:r},a.createElement(a.Fragment,null,a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),a.createElement(d.B,{className:h.ai,svg:g.A})))});let f=a.forwardRef(function(e,r){let{useGrid:n}=a.useContext(m.dD),i=(0,s.M)(r);function d(){i.current.blur()}let p=o()(e.className,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.Ah]:!e.selected&&e.disabled,[h.pq]:!e.selected&&!e.disabled,[h.No]:e.isBackgroundTransparent}),g=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,f=e.href?c.lt:c.GG;return a.createElement(f,{"aria-disabled":e.disabled,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-label":e["aria-label"]??(0,_.En)(e),"aria-owns":e["aria-owns"],"aria-pressed":e["aria-pressed"],className:p,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"data-tooltip":g?null:e["data-tooltip"],"data-tooltip-max-width":g?null:e["data-tooltip-max-width"],"data-tooltip-offset-x":g?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":g?null:e["data-tooltip-offset-y"],"data-tooltip-shortcut-key":g?null:e["data-tooltip-shortcut-key"],"data-tooltip-show-above":g?null:e["data-tooltip-show-above"],"data-tooltip-show-immediately":g?null:e["data-tooltip-show-immediately"],"data-tooltip-type":g?null:e["data-tooltip-type"],disabled:e.disabled,forwardedRef:i,href:e.disabled?void 0:e.href,onClick:e.disabled?void 0:e.onClick,onContextMenu:e.disabled?void 0:e.onContextMenu,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{if(!n||" "!==r.key||!r.shiftKey)switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:d()}},onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseUp:e.disabled?void 0:d,onPointerDown:e.disabled?void 0:e.onPointerDown,recordingKey:e.recordingKey,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,target:e.target,type:e.type},e.children||a.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),E=(0,p.tf)(f),y=f;(0,p.tf)(y)},456875:(e,r,n)=>{n.d(r,{LB:()=>h,T7:()=>_,TF:()=>f,V9:()=>p,aK:()=>c,cB:()=>u,jO:()=>g,v2:()=>m});var a=n(673786),i=n(186606),o=n(768618),s=n(277454),l=n(720722);function c(e,r){let n=r.get(e)?.symbolId;if(n){let a,i;let o=r.get(n),s=o?.containingStateGroupId;if(o?.isState&&s){let e=r.get(s);e?.isStateGroup&&(a=e?.stateGroupKey,i=e?.sharedStateGroupVersion)}let{componentKey:l,sharedSymbolVersion:c}=o??{};return{instanceGUID:e,backingGUID:n,componentKey:l??void 0,stateGroupKey:a??void 0,symbolVersion:c??void 0,stateGroupVersion:i??void 0}}return null}function d(e,r,n){let a=(0,s.Av)(r);if(!a)return;let i=(0,o.UN)().developerFriendlyIdFromGuid(e.instanceGUID);n[a]?n[a].instanceIdsToUpdate.push(i):n[a]={updateAsset:r,instanceIdsToUpdate:[i]}}function u(e,r,n){let i={},o={};for(let r of n)for(let n of e)n.component_key&&(r.componentKey&&r.componentKey===n.component_key?r.symbolVersion&&r.symbolVersion!==n.content_hash&&d(r,n,i):r.componentKey&&n.oldSubscribedKeysToUpdate.includes(r.componentKey)?d(r,n,i):n.localIdsToUpdate.includes(r.backingGUID)&&d(r,n,i));for(let e of n)for(let n of r)if(n.key){if(e.componentKey&&e.stateGroupKey&&e.stateGroupKey===n.key)e.stateGroupVersion&&e.stateGroupVersion!==n.version&&Object.keys(n.newStateKeyToOutdatedItems).includes(e.componentKey)&&d(e,n,o);else for(let r of Object.keys(n.newStateKeyToOutdatedItems))e.componentKey&&n.newStateKeyToOutdatedItems[(0,a.ii)(r)].oldSubscribedKeysToUpdate.includes(e.componentKey)?d(e,n,o):n.newStateKeyToOutdatedItems[(0,a.ii)(r)].localIdsToUpdate.includes(e.backingGUID)?d(e,n,o):e.componentKey&&e.componentKey===r&&d(e,n,o)}return{componentInstanceUpdateInfo:i,stateInstanceUpdateInfo:o}}function p(e,r,n){return r&&n?{updateAsset:r,styleGUIDs:[...new Set([n,...e])]}:r?{updateAsset:r,styleGUIDs:e}:null}function m(e,r){return e.find(e=>r?.isLocalStyle?-1!==e.localIdsToUpdate.indexOf(r.GUID):!!r?.key&&-1!==e.oldSubscribedKeysToUpdate.indexOf(r.key)||e.key===r?.key&&r.version&&e.content_hash!==r.version)??null}function _(e,r){return e?r.filter(({key:r,version:n})=>e.oldSubscribedKeysToUpdate.includes(r)||r===e.key&&n!==e.content_hash).map(e=>e.nodeId).concat(e.localIdsToUpdate):[]}function h(e,r){return e.component_key&&e.content_hash?i.glU.getOutdatedComponentInstanceDevIds(e.component_key,e.content_hash,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,r||""):[]}function g(e,r){return i.glU.getOutdatedStateInstanceDevIds(e.version,e.newStateKeyToOutdatedItems,r||"")}function f(e){return e.type===l.PW.COMPONENT?h(e,void 0).length:g(e,void 0).length}},100970:(e,r,n)=>{n.d(r,{Cc:()=>eZ,T:()=>eJ,lL:()=>ej});var a=n(848318),i=n(301168),o=n(559389),s=n(871043),l=n(402923),c=n(143823),d=n(531788),u=n(658029),p=n(442393),m=n(356572),_=n(518016),h=n(562027),g=n(19180),f=n(382902),E=n(349048),y=n(536384),b=n.n(y),v=n(989232),T=n(410441),I=n(563029),S=n(813009),A=n(857607),w=n(791690),C=n(781239),N=n(182317),L=n(454805),O=n(93292),R=n(660182),P=n(264478),D=n(401970),k=n(297638),M=n(967688),F=n(453370),x=n(244534),U=n(645027),B=n(466930),G=n(35597),V=n(31898),H=n(446244),z=n(533737),K=n(67188),W=n(271326),j=n(353231),Y=n(360430),$=n(526867),q=n(389541),X=n(992288),J=n(680004),Z=n(106358),Q=n(900980),ee=n(949598),et=n(802348),er=n(391375),en=n(730143),ea=n(180294),ei=n(277454),eo=n(931451),es=n(83742),el=n(294490),ec=n(689347),ed=n(922484),eu=n(474132),ep=n(614092),em=n(436999),e_=n(720722),eh=n(475166),eg=n(17753),ef=n(894751),eE=n(775030),ey=n(663934),eb=n(446839),ev=n(478581),eT=n(168852),eI=n(824662),eS=n(490029),eA=n(886776),ew=n(882839),eC=n(432843),eN=n(120846),eL=n(937629),eO=n(215533),eR=n(638166),eP=n(175393),eD=n(428652),ek=n(877765),eM=n(748662),eF=n(937603),ex=n(185067),eU=n(925144),eB=n(27776),eG=n(559105),eV=n(346480),eH=n(951032);let ez=(0,T.hG)(eB.jkd),eK=e=>{switch(e){case ev.rp.SMALL:return{height:22,width:22,gridClassName:""};case ev.rp.NORMAL:return{height:72,width:72,gridClassName:""};case ev.rp.WIDE:return{height:52,width:256,gridClassName:""};case ev.rp.THIN_2_COL:case ev.rp.THIN_3_COL:return{height:22,width:22,gridClassName:""}}},eW=(e,r)=>{let n=eK(r),i=(0,ei.Gj)(e);return a.createElement(eI.lX,{key:i,className:null===r?eG.Tv:eG.B_,displayType:null===r?"list-compact":"grid",height:n?.height,isFigJam:!0,isSearch:!1,item:e,noBackground:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,showName:!1,width:n?.width})};function ej(e,r){return a.createElement(eb.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?eG.Tv:eG.B_,draggable:!1})}let eY=e=>["drilldownItem-productComponent",e.node_id],e$=e=>e.length>1;function eq(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:o,multiselect:u,onMultiselectCallback:m,selectedItems:_,selectedLibraryKey:y,scrollContainerHeight:T,isLoadingSubscribedLibraries:C,shouldPerformSwapOnClick:N,itemsToSwap:L,incrementNumSearchesForTracking:P,dropdownAccessory:D,pickerType:x,pickerToggleRef:K,preferredItems:eg,overrideDefaultItem:eb,showPreferredSectionByDefault:eI,preferredValuesErrorComponent:eA,sessionId:eP,isSearching:eB,setIsSearching:eV,entrypointForLogging:eH}=e,eK=x===R.Zl.INSTANCE_SWAP_PICKER||x===R.Zl.PREFERRED_VALUES_PICKER,e$=(0,R.qc)(),[eq]=(0,eF.Pk)(),eX=e$&&!eq,{library:eJ,dropdownShown:eZ,sceneGraphSelection:e0,isListView:e1,loadingState:e2}=(0,S.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),e3=(0,f.md)(Z.qp),e8=(0,i.d4)(e=>e.universalInsertModal.showing),e6=r.key,e4=(0,en._G)(),e5=(0,i.wA)(),e7=u?null:_[0]??null,e9=a.useMemo(()=>eb?eb.library_key:null,[eb]),te=a.useMemo(()=>e9??$.uj(_)??y,[e9,_,y]),tt=a.useMemo(()=>(0,ek.Dr)(eJ,e$?ek.Wx.COMPONENTS_FIRST:ek.Wx.SUBPATHS_FIRST,eX),[eX,e$,eJ]),{libraryMetadataMap:tr,libraryMetadataLoading:tn}=(0,ek.jB)(te),{publishedLibraryItemsByLibraryKey:ta,rootDrilldownItemsByLibraryKey:ti}=(0,ek.Xx)({libraryKeyBackingSelectedItems:te,order:e$?ek.Wx.COMPONENTS_FIRST:ek.Wx.SUBPATHS_FIRST,libraryMetadataMap:tr,flattenSubpaths:eX}),to=(0,er.g5)(eh.$A.Design).productComponents.map(ek.Kk),ts=a.useMemo(()=>eg?eg.map(ek.Kk):[],[eg]),[tl,tc,td]=a.useMemo(()=>{if(te&&(ti[te]?.length??0)>0)return[te,ti[te],ta[te]];if(tt.length>0)return[(0,h.l)(r.libraryKey),tt,(0,ei.X0)($.Qx(eJ))];if(eK){let e=Object.entries(ti).find(([e,r])=>r.length>0);if(e){let[r,n]=e;return[r,n,void 0]}}return[null,[],void 0]},[te,ti,tt,eK,ta,r.libraryKey,eJ]),[tu,tp]=a.useState(()=>eI?{type:R.iN.PREFERRED}:tl&&(eK||tl!==e4)?{type:R.iN.FILE,libraryKey:tl}:{type:R.iN.RECENT});eM.S.useLaunchedEvent({pickerType:x,sessionId:eP,dropdownSelection:tu,entrypoint:eH});let[tm,t_]=a.useState(null),th=(0,i.Pj)(),tg=(0,eL.Nv)(!0),tf=eM.S.useOpenFileProperties(),tE=a.useCallback(e=>tu.type===R.iN.FILE?tu.libraryKey===e4?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,Y.Ui)(e.item,tu.libraryKey)&&(0,ei.Av)(e.item)):tu.type===R.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&eg&&!!eg.find(r=>r.node_id===e.item.node_id)):e,[tu,e4,eg]),ty=a.useMemo(()=>tu.type===R.iN.FILE?tu.libraryKey===e4?{type:eT.I.LOCAL}:{type:eT.I.FILE,libraryKey:tu.libraryKey}:{type:eT.I.ALL},[tu,e4]),tb=a.useCallback(async(e,r,n)=>{if(C)return[];el.YG.refreshSourcesIfNeeded(th);let a=_.map(e=>{let{type:r}=e,n=r===e_.PW.COMPONENT?e.component_key:e.key;if(n)return{type:r,key:n}}).filter(e=>void 0!==e),i=(await (0,eo.V)(e,ty,es.Cn.InstanceSwapper,{preferLocal:!0,libraryKeyBackingSelectedItems:te??void 0,selectedItems:a,queryId:n,sessionId:r})).normalizedSearchResults.filter(e=>e.type!==e_.PW.MODULE).map(e=>({item:e,score:e.score})),o=(0,O.xd)(i.map(e=>e.item),e=>e.name,e=>e.library_key+e.node_id);if(eK){let a=tE(o).length;v.definedAnalyticsHandler.trackDefinedEvent("instance_swap_picker.search",{...tf,sessionId:eP,searchSessionId:r,query:e,queryId:n,numResults:o.length,numFilteredResults:a,aiResultsEnabled:tg,dropdownType:(0,R.Z4)(tu,e4),libraryKey:tu.type===R.iN.FILE?tu.libraryKey:void 0,isPreferredValues:x===R.Zl.PREFERRED_VALUES_PICKER})}else(0,v.trackEvent)("Component Insert Search",{searchSessionId:r,query:e,queryId:n,numResults:o.length,aiResultsEnabled:tg});return P(),o},[C,th,_,ty,te,tg,eK,P,tE,tf,eP,tu,e4,x]),tv=a.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),e5(F.j7({type:ey.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[e5]),tT=(0,ep.Fk)(e=>new Set(e.getDirectlySelectedNodes().map(e=>e.containingSymbolId||e.containingStateGroupId).filter(e=>null!==e))),{validDropdownSelection:tI,validRootDrilldownItems:tS}=a.useMemo(()=>{if(tu.type===R.iN.RECENT&&eB)return{validDropdownSelection:tu,validRootDrilldownItems:to};let e=[];tu.type===R.iN.PREFERRED&&ts.length>0?e=ts:tu.type===R.iN.RECENT&&to.length>0?e=to:tu.type===R.iN.FILE&&ti[tu.libraryKey]?e=ti[tu.libraryKey]:tu.type===R.iN.FILE&&e4===tu.libraryKey&&(e=tt);let r=!1;if((0,g.k)().dse_slots&&x===R.Zl.PREFERRED_VALUES_PICKER&&(e=e.filter(e=>!("LEAF"===e.type&&tT.has(e.item.node_id))||(r=!0,!1))),0===e.length&&!r){let e,r;if(tl)e={type:R.iN.FILE,libraryKey:tl},r=tc;else if(ts.length>0)e={type:R.iN.PREFERRED},r=ts;else if(to.length>0)e={type:R.iN.RECENT},r=to;else if(Object.keys(ti).length>0){let n=Object.keys(ti)[0];e={type:R.iN.FILE,libraryKey:n},r=ti[n]}else e={type:R.iN.RECENT},r=to;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tu,validRootDrilldownItems:e}},[tu,eB,ts,to,ti,e4,tt,tl,tc,tT,x]),tA=a.useMemo(()=>{if(u){if(te&&td)return eb?{[eb.library_key]:$.O9(eb,td)}:{[te]:(0,ek.OK)(_,td)}}else{let e=eb||e7;if(e&&td){let r=$.O9(e,td);return{[e.library_key]:r}}}return{}},[u,te,td,eb,_,e7]),[tw,tC]=a.useState({}),tN=a.useMemo(()=>({...tA,...tw}),[tA,tw]),[tL,tO]=a.useState({index:-1,parentId:null}),tR=a.useCallback(()=>tO({index:-1,parentId:null}),[]),tP=a.useCallback((e,r)=>{tR(),tI&&tI.type===R.iN.FILE&&(tC({[tI.libraryKey]:e}),tC({[tI.libraryKey]:e}),eK&&v.definedAnalyticsHandler.trackDefinedEvent("instance_swap_picker.navigate",{...tf,sessionId:eP,direction:r,path:e.join(" / "),libraryKey:tI.libraryKey,viewMode:e1?"list":"grid",isPreferredValues:x===R.Zl.PREFERRED_VALUES_PICKER}))},[tR,e1,eK,tf,x,eP,tC,tI]),tD=a.useMemo(()=>tI.type===R.iN.FILE&&tN[tI.libraryKey]||[],[tI,tN]),tk=(0,eO.b)({hideTooltips:!0}),tM=(0,W.n1)(),tF=a.useCallback(()=>{x!==R.Zl.PREFERRED_VALUES_PICKER&&(o.isShown&&o.modal?(o.returnFocusToToggle&&K?.current&&K.current.focus(),e5(H.jD()),e5((0,U.vq)())):x===R.Zl.RESOURCE_INSERT_MODAL&&e8&&(e5(z.b({seen_component_onboarding_modal:!0})),tk()))},[o,K,e5,x,tk,e8]),tU=a.useCallback(e=>{if(e1)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,ev.PI)(r)},[e1]),tB=a.useCallback(r=>{let n;n=r.type===R.iN.PREFERRED?{type:R.iN.PREFERRED}:r.type===R.iN.RECENT?{type:R.iN.RECENT}:{type:R.iN.FILE,libraryKey:r.libraryKey},v.definedAnalyticsHandler.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:tg,entryPoint:"instance-swap",featureSlug:"library-filter-usage"}),tp(n),e.searchBarRef?.current&&e.searchBarRef.current.focus(),eK?v.definedAnalyticsHandler.trackDefinedEvent("instance_swap_picker.library_switch",{...tf,sessionId:eP,dropdownType:(0,R.Z4)(n,e4),libraryKey:n.type===R.iN.FILE?n.libraryKey:void 0,isPreferredValues:x===R.Zl.PREFERRED_VALUES_PICKER}):(0,v.trackEvent)("Component Insert Library Switch",{isSearching:eB})},[tg,e.searchBarRef,eK,tf,eP,e4,x,eB]),tG=(0,ea.sZ)(),tV=(0,eu.Oe)(tG),tH=tu.type===R.iN.FILE?tu.libraryKey:void 0,tz=(0,q.Fl)(),tK=a.useMemo(()=>({format:r=>r.type===R.iN.RECENT?eB?(0,M.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?(0,M.t)("universal_insert.recents"):(0,M.t)("design_systems.instance_swap_picker.recently_used"):r.type===R.iN.PREFERRED?(0,M.t)("design_systems.instance_swap_picker.preferred"):r.type===R.iN.FILE?r.libraryKey===e4?(0,M.t)("design_systems.instance_swap_picker.created_in_this_file"):tr[r.libraryKey]?.name??"":"",isEqual:(e,r)=>e.type===r.type&&(e.type!==R.iN.FILE||r.type!==R.iN.FILE||e.libraryKey===r.libraryKey)}),[eB,e.pickerType,e4,tr]),tW=a.useMemo(()=>{switch(tu.type){case R.iN.FILE:if(tu.libraryKey===e4)return"Local components";return"Subscribed libraries";case R.iN.RECENT:return"Recently used";case R.iN.PREFERRED:return"Preferred values"}},[tu,e4]),tj=a.useCallback(()=>{e5(V.to({type:eC.T,data:{initialTab:e_.Wv.LIBRARIES,entrypoint:ew.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[e5]),tY=a.useCallback(e=>{if("LEAF"!==e.type||0===_.length)return!1;let{item:r}=e;if(tm&&!u){let e=(0,eU.Ml)(tm,Object.keys(e0));if(ed.VP(e2,e))return r.node_id===tm.node_id&&(0,Y.EF)(r,tm)}return _.some(e=>r.type===e_.PW.COMPONENT&&e.type===e_.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===e_.PW.STATE_GROUP&&e.type===e_.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[tm,e0,e2,u,_]),t$=a.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:a}=e,i=Math.max(Math.min(tL.index,n),0),o=Math.min(Math.max(tL.index,n),r.length-1),s=r.slice(i,o+1).filter(e=>"LEAF"===e.type);m?.(s.map(e=>e.item),tY(r[n])?ek.Wu.DESELECT:ek.Wu.SELECT),tO({index:n,parentId:a})},[tY,m,tL.index]),tq=(0,et.u)({alwaysSwap:eK,canSwap:N,itemsToSwap:L,openFileKey:e6,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tX=(0,em.He)(),tJ=(0,eE.CK)(),tZ=a.useCallback((e,n,a,i,o)=>{if(!e6)return;if(u&&i){if(e.shiftKey&&-1!==tL.index&&tL.parentId===i.parentId){t$(i);return}tO({index:i.index,parentId:i.parentId})}let s=e.altKey;tm&&e5(G.yH({key:(0,eU.Ml)(tm,Object.keys(e0))})),t_(n.item),tq({altKey:s},n.item,o?.queryId),tF();let c=n.item.library_key,d=(0,ec.ko)(c,e4??(0,h.l)(""),tX),p={aiResultsEnabled:tg,assetKey:(0,ei.Av)(n.item),position:i?.index,reciprocalRank:(0,l.Et)(i?.index)?1/(1+i?.index):void 0,query:o?.query,queryId:o?.queryId,scoreAi:n.item.ai_score??void 0,scoreLexical:n.item.lexical_score??void 0,sessionId:eP,dropdownType:(0,R.Z4)(tu,e4),fromSearch:a,libraryKey:c,libraryType:d,viewMode:e1?"list":"grid",productType:(0,j.pi)({editorType:r?.editorType})},m={...tf,...p,type:n.item.type===e_.PW.COMPONENT?"component":"state_group",searchSessionId:eP};if(x===R.Zl.INSTANCE_SWAP_PICKER){let e=function(e){return e?e.type===e_.PW.COMPONENT?e.component_key:e.type===e_.PW.STATE_GROUP?e.key:void 0:void 0},r=_[0],a={prevInstanceType:r?.type,prevInstanceNodeId:r?.node_id,prevInstanceComponentKey:e(r)},i=n.item,o={newInstanceItemType:i.type,newInstanceNodeId:i.node_id,newInstanceComponentKey:e(i)};v.definedAnalyticsHandler.trackDefinedEvent("instance_swap_picker.insert_instance",{...m,...a,...o}),v.definedAnalyticsHandler.trackDefinedEvent("asset_search.result_inserted",{...p,assetType:m.type,entryPoint:"instance-swap",fileKey:tf.fileKey,fileOrgId:tf.orgId,fileTeamId:tf.teamId,userId:tf.userId,componentSuggestionSessionId:tJ})}else if(x===R.Zl.PREFERRED_VALUES_PICKER){let e=tY(n);(0,v.trackEvent)("Preferred Values Picker Toggle Component",{...m,action:e?"deselect":"select"})}else(0,v.trackEvent)("Component Insert Panel Insert Instance",{type:n.item.type===e_.PW.COMPONENT?"component":"state_group",fromSearch:a,altKey:s,viewMode:e1?"list":"grid",dropdownType:(0,R.Z4)(tu,e4)})},[e6,u,tm,tq,tF,e4,tX,tg,eP,tu,e1,r?.editorType,tf,x,tL.index,tL.parentId,t$,e5,e0,_,tY,tJ]),tQ=a.useRef(null),t0=a.useCallback(e=>{e&&setTimeout(()=>tQ.current?.focus(),0)},[]),t1=(0,ei.fc)(),t2=a.createElement(a.Fragment,null,a.createElement(ex.p,{ariaLabel:(0,M.t)("design_systems.instance_panel.swap_instance"),className:x===R.Zl.RESOURCE_INSERT_MODAL?eG.kc:eG.Kv,dataTestId:"instance-swap-picker-library-select",dispatch:e5,dropdownAlignment:"left",dropdownShown:eZ,dropdownWidth:230,formatter:tK,id:(0,R.YU)(x),inputClassName:x===R.Zl.RESOURCE_INSERT_MODAL?eG.je:void 0,inputRef:tQ,onChange:tB,onDropdownHidden:t0,openOnKeyPressed:[A.Uz.SPACE,A.Uz.ENTER],property:tI,rightIcon:a.createElement(ee.P,{libraryKey:tH}),role:"combobox"},(()=>{function e(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e})}function n(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(Q.t,null)})}function i(e){return a.createElement(ex.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:a.createElement(X.FX,null)})}if(C)return a.createElement(ex.c,{key:"loading",value:{type:R.iN.FILE,libraryKey:(0,h.l)("loading")},disabled:!0},a.createElement("div",{className:k.s.w150.mx12.flex.justifyCenter.$},a.createElement(c.k,null)));let{pass:o,fail:l}=(0,w.j)(Object.keys(ti),e=>{let r=tr[e];return!!r?.isHubFile}),d=[];if(ts.length&&d.push(e({type:R.iN.PREFERRED})),te&&te!==e4&&!eI&&!t1(te)&&e3[te]&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"non-subscribed-divider"})),d.push(e({type:R.iN.FILE,libraryKey:te})),l=l.filter(e=>e!==te)),tV&&(0,J.NX)(tz)){let e=l.map(e=>tr[e]||null).filter(s.Vq).map(({name:e,libraryKey:r})=>({name:e,library_key:r}));(0,J.k9)({libraries:e,approvedLibraryKeysByResourceType:tz}),l=e.map(({library_key:e})=>e)}if((eB||to.length>0)&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"recent-divider"})),d.push(e({type:R.iN.RECENT}))),eK){for(let n of(tt.length>0&&(d.length>0&&d.push(a.createElement(eN.sK,{key:"local-divider"})),d.push(e({type:R.iN.FILE,libraryKey:(0,h.l)(r.libraryKey)}))),l.length>0&&d.length>0&&d.push(a.createElement(eN.sK,{key:"subscribed-divider"})),l))tV&&(0,J.sF)(n)?d.push(i({type:R.iN.FILE,libraryKey:n})):d.push(e({type:R.iN.FILE,libraryKey:n}));if(tM)for(let e of o)d.push(n({type:R.iN.FILE,libraryKey:e}));return d}for(let n of(tt.length>0&&d.push(e({type:R.iN.FILE,libraryKey:(0,h.l)(r.libraryKey)})),l.length>0&&d.push(a.createElement(eN.sK,{key:"subscribed-divider"})),l))tV&&(0,J.sF)(n)?d.push(i({type:R.iN.FILE,libraryKey:n})):d.push(e({type:R.iN.FILE,libraryKey:n}));if(tM)for(let e of o)d.push(n({type:R.iN.FILE,libraryKey:e}));return d})()),D),t3=a.useRef(null),t8=a.createElement("div",{className:x===R.Zl.RESOURCE_INSERT_MODAL?b()(eG.FK,eG.k2):eG._M},e$?a.createElement(a.Fragment,null,t2,a.createElement("div",{className:k.s.ml4.$},a.createElement(eF.sX,{pickerType:x,includeFolderSetting:tI.type===R.iN.FILE&&!eB,ref:t3,sessionId:eP,queryId:eB?e.queryId:void 0}))):t2),t6=a.useCallback(()=>{tp({type:R.iN.RECENT}),eK&&v.definedAnalyticsHandler.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...tf,sessionId:eP,query:e.query,queryId:e.queryId,isPreferredValues:x===R.Zl.PREFERRED_VALUES_PICKER})},[eK,tf,x,e.query,e.queryId,eP]),t4=a.createElement(eQ,{onClick:t6,type:tu.type}),t5=a.createElement("div",{className:eK?eG.y7:eG.uR,style:{height:T+(e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?eR.Kr:0)}},a.createElement("div",{className:eK?eG.qv:void 0},(0,M.tx)("design_systems.instance_swap_picker.no_components")),a.createElement("div",{className:k.s.mt8.if(!eK,k.s.flex.itemsCenter.justifyCenter.mt12).$},a.createElement(d.$n,{onClick:tj,variant:"secondary",iconPrefix:a.createElement(p.l,{className:k.s.mr2.$})},(0,M.tx)("design_systems.instance_swap_picker.browse_libraries")))),t7=a.useMemo(()=>te?ta[te]??null:null,[te,ta]),t9=function(e,r,n,i){let o=(0,f.md)(Z.qp),s=(0,E.k9)(()=>r?new Set(r.map(e=>(0,ei.Av)(e))):[],[r]),l=(0,E.k9)(()=>{Object.keys(o)},[o]),c=(0,I.h)(e),d=(0,I.h)(l),u=(0,I.h)(s),p=(0,I.h)(n)&&!n,m=(0,E.zN)(a.useMemo(()=>i.map(ei.Av),[i])),_=(0,I.h)(m);return c||d||u||p||_}(te,t7,C,_),re=a.useMemo(()=>_.map(e=>e.library_key).filter(e=>e!==e4),[e4,_]);(0,eS.K)({otherLibraryKeys:re});let rt=a.useMemo(()=>!!tn||(tI.type===R.iN.FILE?tI.libraryKey!==e4&&!(0,ei.El)("INVALID-FILE-KEY-SHOULD-BE-REMOVED",tI.libraryKey):tI.type===R.iN.RECENT?(0,ed.VP)(e2,B.fi):tI.type===R.iN.PREFERRED?ed.VP(e2,(0,ef._A)(e6)):C||(0,ed.VP)(e2,B.fi)),[tn,C,e2,tI,e6,e4]);(0,eD.x)(rt);let rr=Object.keys(ti).length>0;return a.createElement(O.uO,{additionalRowBottomMargin:eK?O.qy:0,beforeItems:t8,beforeItemsRefs:[tQ,t3],contextValue:e.drilldownPickerContextValue,drilldownItemsKeySupplement:tu.type===R.iN.FILE?tu.libraryKey:tu.type,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",emptyState:t5,errorComponent:tu.type===R.iN.PREFERRED?eA:void 0,extraHeightOnSearch:eK||e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?0:ez,focusBeforeItems_DEPRECATED_UI2:()=>tQ.current?.focus(),getBackgroundColorForLeafItemThumbnail:$.zR,getLeafItemRecordingKey:eY,getLeafItemThumbnail:eK||e1?ej:eW,getLeafItemTooltip:eK?ek.pf:void 0,getThumbnailGridLayoutForItems:tU,initialPath:tD,isLoading:rt,isSelectedItem:tY,multiselect:u,onDrilldownPathChange:tP,onLeafItemContextMenu:tv,onLeafItemDraggable:eK?void 0:{sourceForTracking:"component-insert-modal",afterSuccessfulInsert:tF,sectionNameForTracking:tW},onLeafItemDrilldown:tZ,onMultiselectCallback:m,onSearch:tb,pickerToggleRef:K,pickerType:e.pickerType,query:e.query,recordingKey:e.recordingKey,renderLeafItemNames:!!eK||e1,rootDrilldownItems:tS,scrollContainerHeight:T,searchBarPlaceholderText:(()=>{if(tu.type===R.iN.PREFERRED)return(0,M.t)("design_systems.instance_swap_picker.search_preferred");if(tu.type===R.iN.RECENT)return(0,M.t)("design_systems.instance_swap_picker.search_all_libraries");if(null!=tu.libraryKey&&tr[tu.libraryKey]){let e=tr[tu.libraryKey]?.name??"";return(0,M.t)("design_systems.instance_swap_picker.search_filename",{filename:e})}return(0,M.t)("design_systems.instance_swap_picker.search")})(),searchBarRef:e.searchBarRef,searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:t4,searchFilter:tE,searchTypeOption:ty,sessionId:eP,setIsSearching:eV,setQuery:e.setQuery,shouldUpdateServerResults:t9,validLibrariesArePresent:rr})}function eX(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:o,selectedLibraryKey:s,searchDebounceTime:l,shouldPerformSwapOnClick:c=!0,itemsToSwap:d,onSwapCallback:u,searchBarRef:p,setNumSearchesForTracking:m,scrollContainerHeight:_,pickerToggleRef:h,toggleGridViewButton:g,preferredItems:f,overrideDefaultItem:E,preferredValuesErrorComponent:y,sessionId:b,entrypointForLogging:v}=e,T=a.useRef(E).current,{instanceSwapPickerShown:I,loadingState:A}=(0,S.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState})),w=(0,i.d4)(en.tB),C=(0,en._G)(),N=a.useMemo(()=>!!f&&e$(f),[f]),L=w?.key||null,O=a.useMemo(()=>T?T.library_key:null,[T]),P=a.useMemo(()=>O??$.uj(o)??s,[O,o,s]),D=(0,eA.U)(),k=(0,ei.fc)(),M=a.useMemo(()=>{if(null==w||null==L)return!0;if(P&&w&&k(P)&&!(0,ei.El)("INVALID-FILE-KEY-SHOULD-BE-REMOVED",P)){let e=(0,ei.Mb)(P);return!ed.D2(A,e)}return N&&P&&P!==C?ed.VP(A,(0,ef._A)(L)):D},[w,L,P,k,N,C,A,D]),F=a.useCallback(()=>m?.(e=>e+1),[m]);return(I.isShown||e.pickerType!==R.Zl.INSTANCE_SWAP_PICKER)&&L&&w?a.createElement(eq,{drilldownPickerContextValue:e.drilldownPickerContextValue,dropdownAccessory:e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?g:null,entrypointForLogging:v,incrementNumSearchesForTracking:F,instanceSwapPickerShown:I,isLoadingSubscribedLibraries:M,isSearching:e.isSearching,itemsToSwap:d,multiselect:r,onMultiselectCallback:n,onSwapCallback:u,openFile:w,overrideDefaultItem:T,pickerToggleRef:h,pickerType:e.pickerType,preferredItems:f,preferredValuesErrorComponent:y,query:e.query,queryId:e.queryId,recordingKey:e.recordingKey,scrollContainerHeight:_,searchBarRef:p,searchDebounceTime:l,selectedItems:o,selectedLibraryKey:s??null,sessionId:b,setIsSearching:e.setIsSearching,setQuery:e.setQuery,shouldPerformSwapOnClick:c,showPreferredSectionByDefault:N}):null}function eJ(e){let{pickerType:r,initialWidth:n,initialHeight:s,title:l,pickerToggleRef:c}=e,d=r===R.Zl.INSTANCE_SWAP_PICKER||r===R.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:u,dropdownShown:p}=(0,S.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),m=(0,i.wA)(),_=a.useRef(null),[h,g]=a.useState((0,N.g)()),f=u.isShown?new L.Mi(u.initialX,u.initialY):new L.Mi(0,0),E=a.useCallback(()=>{p?.type===(0,R.YU)(r)&&m(F.oB())},[m,p,r]),y=a.useCallback(()=>{u.isShown&&u.modal&&m((0,U.qX)({...u,modal:!1,returnFocusToToggle:!1})),_.current?.focus()},[m,u]),[b,T]=a.useState(0),I=a.useCallback(()=>{(0,v.trackEvent)(`${d?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:b}),m((0,U.vq)())},[m,b,d]),A=a.useRef(null),w=d?320:428,{modalWidth:O}=(0,R.TQ)(r),P=(0,R.qc)(),D=a.useCallback(()=>u.isShown&&s?s:w,[w,s,u]),[k,M]=a.useState(D),x=A.current?.getEl();a.useLayoutEffect(()=>{let e=(0,o.s)(()=>{if(!x)return;let e=x.getBoundingClientRect();e.bottom>window.innerHeight&&M(k-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[k,M,x]);let B=a.useRef(void 0),[G,V]=a.useState(""),[H,z]=a.useState(!1),K=a.createElement(eZ,{isSwapPicker:d,searchBarRef:_,sessionId:h,queryId:H?B.current:void 0}),W=a.createElement("div",{className:eG.Hn},a.createElement("div",{className:eG.D0},l),!P&&K),j=a.useCallback(()=>{p?.type.includes(eF.fn)&&m(F.oB())},[m,p?.type]);return a.createElement(eP.vx,{ref:A,autoflowHeight:!0,disableHeaderBottomBorder:P,dragHeaderOnly:!0,initialHeight:k,initialPosition:f,initialWidth:n??O,isCloseHidden:d&&!P,onClick:j,onClose:I,onDragEnd:y,onDragStart:E,recordingKey:C.Pt(e.recordingKey,"modal"),title:d?W:l},a.createElement(eX,{...e,drilldownPickerContextValue:{queryId:B},isSearching:H,pickerToggleRef:c,query:G,queryId:B.current,scrollContainerHeight:k,searchBarRef:_,sessionId:h,setIsSearching:z,setNumSearchesForTracking:T,setQuery:V,toggleGridViewButton:K}))}function eZ({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:o,queryId:s}){let l=(0,i.wA)(),c=eM.S.useTrackViewToggle({sessionId:o,queryId:s,isPreferredValues:!!r}),d=(0,i.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),p=r?x.U8:x.fG,h=a.useCallback(a=>{a.stopPropagation(),l(p({isListLayout:!d})),n?.current&&n.current.focus(),e?c(!d):(0,v.trackEvent)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:d?"grid":"list"})},[l,p,d,n,e,c,r]);return a.createElement(u.K,{"aria-label":d?(0,M.t)("design_systems.instance_swap_picker.show_as_grid"):(0,M.t)("design_systems.instance_swap_picker.show_as_list"),onClick:h,recordingKey:C.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:K.dG,"data-tooltip":d?(0,M.t)("design_systems.instance_swap_picker.show_as_grid"):(0,M.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":eg.Ib.TEXT}},a.createElement(D.U,{svg:d?eV.A:eH.A},d?a.createElement(m.t,null):a.createElement(_.Z,null)))}function eQ({onClick:e,type:r}){let n=(0,R.qc)();if(r===R.iN.RECENT)return null;let i=(0,M.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?a.createElement(d.$n,{onClick:e,variant:"secondary"},i):a.createElement(P.N_,{onClick:e,className:eG.nf,canFocus:!0,trusted:!0},i)}},524873:(e,r,n)=>{n.d(r,{g:()=>u});var a=n(925040),i=n(489082),o=n(671989),s=n(700436),l=n(337609),c=n(925144);let d=e=>e.library;function u(){return(0,a.Mz)([(e,r,n)=>r,(e,r,n)=>n,d],(e,r,n)=>{if(!r.get(e))return null;let{selectedItem:a}=(0,o.XV)(e,n,r);return a})}(0,a.Mz)([d,s.dK,l.i2],(e,r,n)=>{let a=null,{backingSymbolGUID:s,backingStateGroupGUID:l}=(0,c.nD)(new Set(n),r);if(l&&(0,i.hS)(l)?a=l:s&&(0,i.hS)(s)&&(a=s),!a)return null;let{selectedItem:d}=(0,o.XV)(a,e,r);return d})},441792:(e,r,n)=>{n.d(r,{AP:()=>o}),n(848318);var a=n(301168);n(988402);var i=n(186606);function o(){return(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===i.m1T.VECTOR)}n(320953),n(813009),n(489082),n(788903),n(554326),n(700436),n(595342),n(839407),n(739321),n(83985),n(620512),n(985789),n(346288)},325590:(e,r,n)=>{n.d(r,{Ig:()=>_,OE:()=>f,dc:()=>h,oI:()=>y,rP:()=>g});var a=n(848318),i=n(803565),o=n(186606),s=n(708959),l=n(323201),c=n(632727),d=n(372566),u=n(754210),p=n(959750);n(426299);var m=n(460374);let _=(()=>{let e=new d.o1({normalizeFactor:360,min:0,max:1}),r=new d.o1({normalizeFactor:100,min:0,max:1}),n=new d.t6({min:0,max:1}),s=new d.o1({normalizeFactor:255,min:0,max:1}),u={hsla:(n,a,i)=>i?`HSL ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.l)}`:`hsla(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.l)}%, ${a})`,hsba:(n,a,i)=>i?`HSB ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.v)}`:`hsba(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.v)}%, ${a})`,rgba:(e,r,n)=>n?`RGB ${s.format(e.r)} ${s.format(e.g)} ${s.format(e.b)}`:`rgba(${s.format(e.r)}, ${s.format(e.g)}, ${s.format(e.b)}, ${r})`,uicolor:(e,r,a)=>a?`UIColor(${n.format(e.r)}, ${n.format(e.g)}, ${n.format(e.b)}, ${r})`:`UIColor(red: ${n.format(e.r)}, green: ${n.format(e.g)}, blue: ${n.format(e.b)}, alpha: ${r})`};return()=>{let e=(0,p.Ku)();return a.useCallback((r,n)=>{let a=Number(r.a).toLocaleString("en",{maximumFractionDigits:2});switch(e){case o.NVY.HEX:let s=c.TI.format(r,n?.hexCSSValue?{withAlpha:1!==r.a}:n?.alphaInPercent?{withAlpha:1!==r.a,showDot:!0}:void 0);return`#${s}`;case o.NVY.RGB:return u.rgba(r,a,n?.eyedropperFormat);case o.NVY.CSS:if(n?.eyedropperFormat)return u.rgba(r,a,n?.eyedropperFormat);return l.F.format(r);case o.NVY.HSB:let d=(0,i.qN)(r);return u.hsba(d,a,n?.eyedropperFormat);case o.NVY.HSL:let p=(0,i.oB)(r);return u.hsla(p,a,n?.eyedropperFormat);case o.NVY.UIColor:return u.uicolor(r,a,n?.shortform??!1)}},[e])}})();function h(e,r,n){let a=new u.ZB(()=>e),i=e.opacity||1,o=[...e.color?[{...e.color,a:i*e.color.a}]:[],...e.stops?e.stops.map(e=>({...e.color,a:i*e.color.a})):[]];return{type:m.q.RAW,paint:e,colors:o,typeFormatter:a.format,valueFormatter:r,variableScope:n,encodedPaint:(0,s.GP)(e)}}function g(e,r,n,a=[]){return{type:m.q.STYLE,name:e,dsStyle:r,paints:n,styleGUIDs:a}}function f(e,r){let n=_();return a.useMemo(()=>e.map(e=>{let a=r(e);if(!a)return{value:e,color:void 0};let i=[a],o={color:a,opacity:a.a,type:"SOLID"};return{value:e,color:{type:m.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:i,typeFormatter:E,valueFormatter:n}}}),[r,e,n])}let E=()=>"SOLID";function y({color:e,colorVar:r,variableScope:n,displayValue:a}){let i=[e],o={color:e,opacity:e.a,type:"SOLID"};return r&&(o.colorVar=r),{type:m.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:i,typeFormatter:E,valueFormatter:a,variableScope:n}}},424554:(e,r,n)=>{n.d(r,{Pi:()=>tr,So:()=>ti,eT:()=>e8});var a,i=n(848318),o=n(301168),s=n(559389),l=n(376852),c=n(271020),d=n(544405),u=n(895863),p=n(658029),m=n(762217),_=n(773511),h=n(981637),g=n(92778),f=n(587606),E=n(315696),y=n(186606);n(673786);var b=n(320953),v=n(708959),T=n(286536),I=n(19180),S=n(382902),A=n(536384),w=n.n(A),C=n(989232);n(971536),n(813009);var N=n(781239);n(461979);var L=n(156137),O=n(256350),R=n(146968);n(720522);var P=n(401970),D=n(967688),k=n(706846),M=n(871114),F=n(244534),x=n(813147),U=n(31898),B=n(441177),G=n(500974),V=n(375694),H=n(142896),z=n(675257),K=n(632727),W=n(754210),j=n(67188),Y=n(696786),$=n(303397);n(959750);var q=n(489082),X=n(426299),J=n(552807),Z=n(95664),Q=n(963307),ee=n(788903),et=n(511067);n(355755),n(730143);var er=n(404486),en=n(200300);n(277454);var ea=n(526594),ei=n(213457);n(671346),n(720722);var eo=n(273555),es=n(462835),el=n(17753),ec=n(52463),ed=n(232958),eu=n(405465),ep=n(515092),em=n(562638),e_=n(149707),eh=n(434328),eg=n(896777),ef=n(14850),eE=n(487082),ey=n(942263),eb=n(341090),ev=n(967045),eT=n(753644),eI=n(473183);n(483157);var eS=n(614892);n(659380),n(888663);var eA=n(670549),ew=n(371712),eC=n(447071),eN=n(246164),eL=n(934151);n(494604);var eO=n(699848),eR=n(541352),eP=n(72899),eD=n(33441),ek=n(50652),eM=n(418289),eF=n(557167),ex=n(31510),eU=n(204558),eB=n(150728),eG=n(873189),eV=n(596224);n(756672);var eH=n(300656),ez=n(190132);n(393197);var eK=n(616917),eW=n(42618),ej=n(861343);n(433906);var eY=n(973219),e$=n(228217),eq=n(435789),eX=n(952200),eJ=n(389075),eZ=n(511134),eQ=n(470689),e0=n(985908);let e1=new Set([y.j0r.STROKE]),e2=e=>{$.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},e3=(e,r,n,a)=>{(0,I.k)().ce_properties_panel_tracking&&(0,C.trackEvent)("editor-paints-panel-fill-change"),$.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:a??y.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eu.a2)("fillPaints")},e8=i.memo(function(e){let{dispatch:r}=e,n=(0,eV.cJ)(),a=(0,Y.GS)(),s=(0,o.d4)(e=>{let r=e.mirror.selectionProperties.fillPaints;return!r||(0,q.hS)(r)&&0===r.length}),l=(0,ex.Fs)("FILL","PROPS_PANEL",y.rXF.COLOR),u=i.useCallback((e,{fromSearch:n}={})=>{r(x.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),p=(0,q.E7)((0,Z.b)("guid")),m=(0,eN.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey",selectedStyleGuid:p}),_=(0,eE.xm)(e),h=(0,i.useCallback)(()=>{(0,I.k)().ce_properties_panel_tracking&&(0,C.trackEvent)("editor-paints-panel-fill-color-picker-show")},[]),g=(0,en.o3)(en.nt.useGrid);return i.createElement(R.tH,{boundaryKey:"FillPanel",fallback:R.H4.NONE_I_KNOW_WHAT_IM_DOING},i.createElement(L.k,{name:"fill_panel"},i.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},i.createElement(eS.Zk,null,i.createElement(eL.dD.Provider,{value:{useGrid:a&&g}},i.createElement(eF.d2.Provider,{value:l},i.createElement(te,{currentSelectedProperty:e.currentSelectedProperty,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,onApplyStyle:u,onChange:e3,onPickerShown:h,pickerInStyleCreationShown:e.pickerInStyleCreationShown,recordingKey:N.Pt(e,"paintList"),selectedPropertyType:y.rrT.FILL,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,variableScopes:e.variableScopes,..._,...m}))),i.createElement(eg.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(a){if(s)return;return i.createElement(eO.Ad,{label:i.createElement(i.Fragment,null),input:i.createElement(c.S,{muted:!0,mixed:e.exportBackgroundDisabled===q.oV,checked:!1===e.exportBackgroundDisabled,onChange:e2,recordingKey:N.Pt(e,"exportDisableCheckbox"),label:i.createElement(d.J,{htmlAttributes:{"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":el.Ib.TEXT}},(0,D.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":el.Ib.TEXT}})})}return i.createElement(eS.fI,{className:e$.Kx},i.createElement(e_.t,{className:e$.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===q.oV?q.oV:!e.exportBackgroundDisabled,onChange:e2,recordingKey:N.Pt(e,"exportDisableCheckbox")}),i.createElement(eS.JU,{className:e$.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":el.Ib.TEXT,"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,D.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});function e6(){(0,I.k)().ce_properties_panel_tracking&&(0,C.trackEvent)("editor-paints-panel-stroke-color-picker-show")}class e4 extends i.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={syncState:"NONE",individualBorderOption:em.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n,a)=>{(0,I.k)().ce_properties_panel_tracking&&(0,C.trackEvent)("editor-paints-panel-stroke-change",{key:"color"});let i=0===e.length?{strokePaints:e,variableWidthPoints:[]}:{strokePaints:e};$.Y5.updateSelectionProperties(i,{shouldCommit:r,overwrite:a??y.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eu.a2)("strokePaints")},this.onNonPaintsChange=(e,r=eo.zk.YES)=>(0,ej.w8)(this.props.strokePaints,e,r),this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(x.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=eo.zk.YES)=>{if(this.state.individualBorderOption!==em.om.ALL){let{strokeAlign:r}=e;(0,C.trackEvent)("Individual Border Alignment Changed",{position:(0,q.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=i.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(F.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,C.trackEvent)("editor-paints-panel-advanced-stroke-show");let e=(0,ec.cn)(this.forwardedRef.current);this.props.dispatch(F.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(F.Uv()),this.props.dispatch(V.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:em.om.ALL})}}render(){let e=(0,eN.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,ej.Fc)(this.props.numSelectedByType,this.props.strokePaints,e.inheritStyleKey),n=this.props.pickerShown?.id===this.settingsId,a=this.props.strokePanelMode!==y.yTM.WASHI_TAPE;return i.createElement(L.k,{name:"stroke_panel"},i.createElement(eS.Zk,{"data-testid":"stroke-panel-id"},i.createElement(te,{currentSelectedProperty:this.props.currentSelectedProperty,onApplyStyle:this.onApplyStyle,onChange:this.onPaintsChange,onPickerShown:e6,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:N.Pt(this.props,"paintList"),selectedPropertyType:y.rrT.STROKE,variableScopes:e1,...(0,eE.Rz)(this.props),...e,advancedSettingsTooltip:(0,D.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,onToggleAdvancedSettings:r&&a?this.toggleSettings:void 0,onToggleListLayout:this.toggleSettings}),r&&i.createElement(eW.t,{arcRadius:this.props.arcRadius,borderSharedWeight:this.props.borderSharedWeight,connectorLineStyle:this.props.connectorLineStyle,dashCap:this.props.dashCap,dashPattern:this.props.dashPattern,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,forwardedRef:this.forwardedRef,individualBorderOption:this.state.individualBorderOption,leftEndCap:this.props.leftEndCap,maxStrokeWeight:this.props.maxStrokeWeight,miterLimitAngle:this.props.miterLimitAngle,numSelectedByType:this.props.numSelectedByType,onBordersAlignmentChange:this.bordersAlignmentOnChange,onNonPaintsChange:this.onNonPaintsChange,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,rightEndCap:this.props.rightEndCap,setIndividualBorderOption:this.setIndividualBorderOption,showAdvancedStrokeSettings:a,showStrokePicker:n,stopPropagation:this.stopPropagation,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,strokeJoin:this.props.strokeJoin,syncState:this.state.syncState,terminalCap:this.props.terminalCap,toggleSettings:this.toggleSettings,updateSyncState:this.updateSyncState})))}}e4.displayName="StrokePanel";let e5=(0,eI.b)(),e7=(0,eI.b)(),e9=i.memo(function({title:e,propertyList:r,onChange:n,onApplyStyle:a,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:p,styleType:m,inheritStyleKey:_,inheritStyleKeyField:h,inheritStyleID:g,stylePickerListLayout:f,removeAllProperties:E,library:b,defaultColor:v,openFile:T,stylePickerShown:I,currentSelectedProperty:S,selectedPropertyType:A,modalShown:w,sceneGraphSelection:C,recordingKey:L,onToggleAdvancedSettings:O,advancedSettingsTooltip:R,isPanelBodyCollapsedAtom:P,selectedStyleGuid:D,entrypointMenu:k}){let M=(0,o.wA)(),x=(0,er.Xo)(),U=(0,et.Um)(),B=!!i.useContext(ef.zK),G=B?`style-modal-${(0,eD.qj)(h)}`:(0,eD.qj)(h),V=(0,eN.WH)(_,g,m),H=(0,eC.AH)(V?.key??null,(0,q.E7)(g)),z=V?.isLocal?V:H?.status==="loaded"?H.data:null,K=function(){let e=(0,ee.Rb)(),r=(0,ee.Pt)(),n=e.length>0,a=Object.keys(r).length>0;return n||a}(),W=r&&(0,q.hS)(r)&&(r.length>1||r.some(e=>!(0,X.sb)(e.type)))?"createStyle":K?"createVariable":"createStyle",j=i.useCallback(()=>x&&x.id===G?x:null,[x,G]),Y=i.useCallback(({initialX:e,initialY:r})=>{j()?M(F.XE()):M(F.u1({id:G,initialX:e,initialY:r}))},[M,G,j]),$=i.useCallback(e=>{Y(e)},[Y]),J=i.useCallback((e,r)=>{n([e],r,void 0,y.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),Z=(0,Q.kl)("numSelectedByType"),en=(0,eg.y5)(P||null),ea=i.useCallback(()=>{s(),en()},[s,en]),ei=i.useMemo(()=>{if(Z)return(0,ek.aZ)(A,Z)},[A,Z]);return i.createElement(i.Fragment,null,i.createElement(ev.Kx,{addProperty:ea,advancedSettingsTooltip:R,currentSelectedProperty:S,dispatch:M,dropdownShown:U,entrypointMenu:k,inheritStyleID:g,inheritStyleKey:_,inheritStyleKeyField:h,isPanelBodyCollapsedAtom:P,library:b,modalShown:w,onChange:n,onDeleteProperty:u,onPickerIconClick:$,onReorder:c,onToggleAdvancedSettings:O,onToggleListLayout:p,openFile:T,overrideAddPropertyTooltip:l,pickerShown:x,propertyList:r,recordingKey:L,removeAllProperties:E,renderProperty:d,sceneGraphSelection:C,selectedPropertyType:A,selectedStyleGuid:D,stylePickerListLayout:f,stylePickerShown:I,styleType:m,title:e}),(()=>{let e=j();if(!e)return;let n=r&&(0,q.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return i.createElement(eE.ku,{canPickerShowColorContrast:!B,defaultColor:v,dropdownShown:U,hasVisiblePaintBelow:!1,inheritStyleKeyField:h,initialCreationModalView:W,initialView:"library",isInStyleModal:B,onApplyStyle:B?void 0:a,onChange:J,paint:n,paintId:(0,eN.OS)(h),pickerShown:e,recordingKey:N.Pt(L,"paintPicker"),selectedStyle:z,supportedViews:["library"],variableScopes:ei})})())});function te(e){let r=(0,i.useContext)(ef.zK),n=(0,o.wA)(),a=null!=r,s=(0,i.useCallback)(()=>a,[a]),l=(0,Q.ER)(),c=(0,q.E7)((0,Z.b)("guid")),d=(0,o.d4)(r=>{let n=e.selectedPropertyType===y.rrT.STROKE?"strokePaints":"fillPaints";return e.shouldUseSelectedStyleProperties?r.mirror.selectedStyleProperties[n]:r.mirror.selectionProperties[n]}),u=(0,i.useCallback)((r,n={preventAutoToggle:!1})=>{switch(e.selectedPropertyType){case y.rrT.STROKE:if(!l){(0,eu.a2)("strokePaints"),$.Y5.triggerActionInUserEditScope("add-stroke-to-selection");let e=(0,q._W)(d,[]);n.preventAutoToggle||S.zl.set(e7,e.length)}break;case y.rrT.FILL:if(l)$.Y5.triggerActionInUserEditScope("add-fill-to-style-selection");else{$.Y5.triggerActionInUserEditScope("add-fill-to-selection",r);let e=(0,q._W)(d,[]);n.preventAutoToggle||S.zl.set(e5,e.length)}(0,eu.a2)("fillPaints")}},[l,d,e.selectedPropertyType]),p=(0,i.useCallback)(()=>{u({})},[u]),{onChange:m,stylePickerShown:_,inheritStyleKeyField:h,selectedPropertyType:g,pickerInStyleCreationShown:f,variableScopes:E,pickerShown:b,onApplyStyle:v,onPickerShown:T,recordingKey:I}=e,A=(0,i.useCallback)(e=>{s()||n(F.XE()),n(F.Uv());let r=(0,q._W)(d,[]).filter((r,n)=>n!==e);(0,ep.f)(y.VD3.IGNORE,y.e0R.UNKNOWN,()=>{m(r)}),$.Y5.deselectProperty()},[s,m,n,d]),w=(0,Y.GS)(),C=(0,i.useCallback)((e,r,n,a)=>{m(e,r,void 0,a),(0,q._W)(d,[]).length!==e.length&&X.Tm.clearCache()},[m,d]),L=(0,i.useCallback)(()=>{X.Tm.clearCache()},[]),O=(0,i.useCallback)(()=>{n(F.Y({isListLayout:!e.stylePickerListLayout})),n(V.sw())},[n,e.stylePickerListLayout]),R=(0,eE.xm)(e),{useGrid:P}=i.useContext(eL.dD),k=(0,q._W)(d,[]).filter(e=>"PATTERN"===e.type).length>=1,M=(0,i.useCallback)((r,n,a,o,l,c,u,p,m)=>{let y=s()?"preview-paint":"paint",S=X.Tm.getId(n,g,y),C=(0,q._W)(d,[]).slice(0,n).some(e=>e.visible);return i.createElement(tt,{key:P?void 0:`paint-${n}`,disablePatternPaints:k,hasFocus:l,hasVisiblePaintBelow:C,id:S,index:n,inheritStyleKeyField:h,isDragging:o,isUI3:w,onApplyStyle:v,onChange:c,onMouseDown:u,onMouseMove:p,onMouseUp:m,onPickerShown:T,onRemovePaint:()=>A(n),paint:r,pickerInStyleCreationShown:f,recordingKey:N.Pt(I,n),sceneGraphSelection:e.sceneGraphSelection,selected:_.isShown?b?.id===S:a,selectedPropertyType:g,singletonRow:(0,q._W)(d,[]).length<=1,stylePickerShown:_,variableScopes:E,...R})},[s,g,d,P,h,_,b?.id,T,f,v,I,E,w,R,A,k,e.sceneGraphSelection]),x=(()=>{if(!w)return;let r=(0,q._W)(d,[]);switch(e.selectedPropertyType){case y.rrT.STROKE:return 0===r.length?(0,D.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,D.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case y.rrT.FILL:return(0,D.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}})();return i.createElement(e9,{addProperty:p,currentSelectedProperty:e.currentSelectedProperty,onChange:C,onReorder:L,overrideAddPropertyTooltip:x,pickerShown:e.pickerShown,propertyList:d,recordingKey:e.recordingKey,renderProperty:M,selectedPropertyType:e.selectedPropertyType,title:(()=>{switch(e.selectedPropertyType){case y.rrT.STROKE:return(0,D.t)("fullscreen.properties_panel.fill.stroke");case y.rrT.FILL:return(0,D.t)("fullscreen.properties_panel.fill.fill");default:return""}})(),...(0,eN.yT)(e),advancedSettingsTooltip:w?e.advancedSettingsTooltip:void 0,defaultColor:e.defaultColor,entrypointMenu:(()=>{switch(e.selectedPropertyType){case y.rrT.FILL:return i.createElement(eB.ZQ,{addPaintOfType:e=>{u({paintType:e})},disablePatternPaints:k});case y.rrT.STROKE:return i.createElement(eB.UX,{addPaint:()=>u({},{preventAutoToggle:!0})})}return null})(),isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,library:e.library,onApplyStyle:e.onApplyStyle,onToggleAdvancedSettings:w?e.onToggleAdvancedSettings:void 0,onToggleListLayout:O,selectedStyleGuid:c??null})}class tt extends i.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=i.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,ec.cn)(this.row.current);this.props.onPickerShown?.(),$.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,B.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(F.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(V.sw()),this.props.dispatch(F.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,B.w)()):this.props.dispatch(F.XE()),$.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,q.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,q.E7)(this.props.paint);if(!r)return;let n=$.Y5.fileArrayToString;if(n){let a=n(Array.from(e.files));y.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,a,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let a=$.Y5.fileArrayToString;if(a){let i=a(Array.from(n.files));y.glU.dropImageOnPaintThumbnail(e,r,i,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>b.l7.user("update-gif-image",()=>(0,J.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,ep.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let e=(0,eP.$)(this.props.paint);this.onPaintPickerChange(e,eo.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||($.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),$.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||($.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),$.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundPaintVariable(){return(0,M.U)()?!!this.props.paint.colorVar||!!this.props.paint.imageVar:!!this.props.paint.colorVar}get cmsFieldSchemaId(){return(0,M.U)()?this.props.paint.imageVar?.value?.cmsAliasValue?.fieldId:null}get lastAddedItemIndexAtom(){if(this.isInStyleModal())return null;switch(this.props.selectedPropertyType){case y.rrT.FILL:return e5;case y.rrT.STROKE:return e7;default:return null}}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;this.props.hideVisibilityToggle||!(0,I.k)().ds_qw_variable_and_style_visibility&&this.hasBoundPaintVariable()||e.push({button:i.createElement(eR.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:N.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),!(0,I.k)().ds_qw_variable_and_style_visibility&&this.hasBoundPaintVariable()&&e.push({button:i.createElement("span",{className:e$.zm},i.createElement(u.T,{selected:r},i.createElement(p.K,{"aria-label":(0,D.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:N.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:j.dG,"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":el.Ib.TEXT}},i.createElement(P.U,{svg:eq.A},i.createElement(h.U,null))))),opensPicker:!1,key:"detatchVariableButton"});let n=this.cmsFieldSchemaId;if(this.props.onRemovePaint||n){let a=this.props.isUI3?{"data-tooltip-type":el.Ib.TEXT,"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:i.createElement(u.T,{selected:r},i.createElement(p.K,{recordingKey:N.Pt(this.props,"removeButton"),onClick:n?()=>{$.Y5.triggerActionEnumInUserEditScope(y.rcl.UNBIND_SELECTION,{fieldSchemaId:n,fieldType:k._j.IMAGE,removeBoundData:!0})}:this.props.onRemovePaint,"aria-label":(0,D.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...a,onMouseDown:j.dG}},i.createElement(P.U,{svg:eX.A,fallbackSvg:eJ.A},i.createElement(g.O,null)))),opensPicker:!1,key:"removeButton"})}return e}render(){let e=this.renderButtons();return i.createElement("div",null,(0,I.k)().ce_tv_new_row_open_modal&&this.lastAddedItemIndexAtom&&i.createElement(eI.O,{lastAddedItemIndexAtom:this.lastAddedItemIndexAtom,index:this.props.index,callback:()=>this.showPicker()}),i.createElement(O.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:N.Pt(this.props,"dropTarget")},i.createElement("div",null,i.createElement(tr,{ref:this.row,enableVariableDetach:!0,firstIconButton:e.length>0?e[0]:null,hasFocus:this.props.hasFocus,id:this.props.id,isDragHover:this.state.isDragHover,isDragging:this.props.isDragging,isUI3:this.props.isUI3,noBorderOnFocus:this.props.noBorderOnFocus,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,paint:this.props.paint,recordingKey:this.props.recordingKey,sceneGraphSelection:this.props.sceneGraphSelection,secondIconButton:e.length>1?e[1]:null,selected:this.props.selected,shownPickerMatchesThisPaint:!!this.pickerShown(),singletonRow:this.props.singletonRow,togglePicker:this.togglePicker,...(0,eE.Rz)(this.props)}))),this.pickerShown()&&i.createElement(eE.ku,{canPickerShowColorContrast:!this.isInStyleModal(),defaultColor:this.props.defaultColor,disablePatternPaints:this.props.disablePatternPaints,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,dropdownShown:this.props.dropdownShown,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,hidePatternPaints:this.props.selectedPropertyType!==y.rrT.FILL&&this.props.selectedPropertyType!==y.rrT.STROKE||this.isInStyleModal(),inheritStyleKeyField:this.props.inheritStyleKeyField,isInStyleModal:this.isInStyleModal(),onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onChange:this.onPaintPickerChange,onClose:this.hidePicker,paint:this.props.paint,paintId:this.props.id,pickerShown:this.pickerShown(),recordingKey:N.Pt(this.props,"paintPicker"),selectedStyle:null,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,variableScopes:this.props.variableScopes}))}}tt.displayName="PaintListItem",tt.contextType=ef.zK;let tr=i.forwardRef((e,r)=>{let n;let a=r=>{(r.shiftKey||2&r.buttons)&&r.preventDefault(),r.stopPropagation(),e.togglePicker()},o=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&!s()&&e.togglePicker()},s=()=>{let r;return(r=(0,M.U)()?e.paint.colorVar||e.paint.imageVar:e.paint.colorVar)&&("ALIAS"===r.dataType||"CMS_ALIAS"===r.dataType)?r:null},l=()=>{(0,ep.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let r=(0,eP.$)(e.paint);r.visible=!0,e.onChange(r,eo.zk.YES)})};function c({boundVariableData:r}){let n="CMS_ALIAS"===r.dataType,o={onDetachClick:l,enableDetach:e.enableVariableDetach},s="ALIAS"===r.dataType?r.value?.alias:void 0;return i.createElement(i.Fragment,null,n&&i.createElement(eM.y,{isSelected:e.selected&&e.hasFocus},i.createElement(ez.Sw,{selected:e.selected,boundPaintVariable:r,hasFocus:e.hasFocus,paint:e.paint,onClick:a,recordingKey:e.recordingKey,enableDetach:e.enableVariableDetach&&!!e.sceneGraphSelection,onDetachClick:()=>{let e=r.value?.cmsAliasValue?.fieldId;$.Y5.triggerActionEnumInUserEditScope(y.rcl.UNBIND_SELECTION,{fieldSchemaId:e,fieldType:k._j.IMAGE,removeBoundData:!1})}})),"ALIAS"===r.dataType&&s&&i.createElement(eM.y,{isSelected:e.selected&&e.hasFocus},i.createElement(ez.rM,{selected:e.selected,variableId:s,hasFocus:e.hasFocus,paint:e.paint,onClick:a,recordingKey:e.recordingKey,...o})))}(0,i.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let{useGrid:d}=(0,i.useContext)(eL.dD),{useLargePreviewRows:u}=(0,i.useContext)(ei.Q),p=(0,eL.Qu)(),_=s(),h=e.firstIconButton?i.createElement(ta,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,g=e.secondIconButton?i.createElement(ta,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,f=e.selected&&!e.hasFocus,E=e.fitToSize?e$.Cv:e$.BT,b=e.fitToSize?e$.np:e$.wM;n=e.isUI3?i.createElement(m.o,{eventListeners:[],htmlAttributes:{onKeyDown:p}},i.createElement("div",{className:w()(_?E:b,{[e$.NI]:e.selected,[e$.L3]:f,[e$.mK]:d}),"data-onboarding-key":(0,ea.Lh)(ea.D8.PAINT_PANEL_ROW,e.id),"data-testid":"paint-panel-color-value-container"},_?c({boundVariableData:_}):i.createElement(tn,{allowAutoAndMixed:e.allowAutoAndMixed,chitOverride:e.chitOverride,clearPaintFromCache:()=>X.Tm.clearCache(e.id),disableOpacity:e.disableOpacity,onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,recordingKey:e.recordingKey,togglePicker:e.togglePicker}))):i.createElement("div",{className:w()(_?E:b,{[e$.NI]:e.selected,[e$.L3]:f,[e$.mK]:d}),onMouseDown:a,onMouseDownCapture:r=>{if(r.shiftKey||2&r.buttons){e.togglePicker(),r.preventDefault(),r.stopPropagation();return}},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},"data-onboarding-key":(0,ea.Lh)(ea.D8.PAINT_PANEL_ROW,e.id)},_?c({boundVariableData:_}):i.createElement(tn,{allowAutoAndMixed:e.allowAutoAndMixed,chitOverride:e.chitOverride,clearPaintFromCache:()=>X.Tm.clearCache(e.id),disableOpacity:e.disableOpacity,onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,recordingKey:e.recordingKey,togglePicker:e.togglePicker}));let v=i.createElement("div",{className:e$.RK,"data-onboarding-key":(0,ea.Lh)(ea.D8.PAINT_PANEL_ROW,e.id)},n,i.createElement("div",{className:e$.$r},h,g));if(e.preventDragging)return e.isUI3?i.createElement(eO.pG,{ref:r,appendedClassName:w()(e$.p,{[e$.Tp]:e.isDragHover,[eY.CZ]:e.selected,[eY.kR]:f}),input:n,leftIcon:h,rightIcon:g,label:null}):i.createElement(eS.fI,{ref:r,className:e.isDragHover?`${e$.Tp} ${e$.p}`:e$.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},v);if(e.isUI3){let s=w()(e$.p,{[e$.Tp]:e.isDragHover,[eY.CZ]:e.selected,[eY.kR]:e.selected&&!e.hasFocus});if(u){let n=_&&l?i.createElement(ez.UM,{onClick:l}):null;return i.createElement(eG.a,{ref:r,dragging:e.isDragging,firstIconButton:n??h??void 0,hasFocus:e.hasFocus,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,onPreviewClick:a,onRowFocus:o,paint:e.paint,previewActive:e.shownPickerMatchesThisPaint,recordingKey:e.recordingKey,secondIconButton:g??void 0,selected:!!e.selected,singletonRow:e.singletonRow,variableId:_?.value?.alias})}return d?null===h||null===g?i.createElement(eL.lt,{appendedClassName:s,singletonRow:e.singletonRow,input:n,icon:h||g,ref:r,htmlAttributes:{onFocus:o},selected:e.selected,hasFocus:e.hasFocus,recordingKey:e.recordingKey}):i.createElement(eL.z$,{ref:r,appendedClassName:s,hasFocus:e.hasFocus,htmlAttributes:{onFocus:o},input:n,leftIcon:h,recordingKey:e.recordingKey,rightIcon:g,selected:e.selected,singletonRow:e.singletonRow}):i.createElement(eO.Y9,{ref:r,dragging:e.isDragging,onFocus:o,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow},null===h||null===g?i.createElement(eO.DE,{appendedClassName:s,input:n,icon:h||g,label:null}):i.createElement(eO.pG,{appendedClassName:s,input:n,leftIcon:h,rightIcon:g,label:null}))}return i.createElement(eb.e,{ref:r,className:e.isDragHover?`${e$.Tp} ${e$.p}`:e$.p,dragging:e.isDragging,onFocus:o,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,shiftGrabberOnInputFocus:!0,singletonRow:e.singletonRow},v)});function tn(e){let r=(0,Y.GS)(),n=r=>{r.stopPropagation(),e.togglePicker()},a=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},s=w()({[e$.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint},{useGrid:u}=(0,i.useContext)(eL.dD);return i.createElement(i.Fragment,null,i.createElement(eK.P,null,i.createElement(eh.D,{...d,onMouseDown:n,recordingKey:N.Pt(e,"chit"),className:e$.x7,isInFPLGrid:u})),i.createElement(ti,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:j.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,l.xN)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),a(n)},recordingKey:N.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,q.SX)(e.paint.color)&&!(0,q.gl)(e.paint.color))&&i.createElement(ed.Pd,{className:e$.n1,dispatch:c,inputClassName:s,noBorderOnFocus:!0,noLeftBorder:!0,onBlur:e.onInputBlur,onFocus:e.onInputFocus,onMouseDown:j.dG,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},recordingKey:N.Pt(e,"opacity"),value:e.paint.opacity}))}function ta(e){return e.opensPicker?i.createElement(eK.P,{key:e.componentKey},e.children):i.createElement(i.Fragment,{key:e.componentKey},e.children)}function ti(e){let r=(0,i.useMemo)(()=>e.allowAutoAndMixed?new K.C1({parseAlpha:!0}):new K.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,i.useMemo)(()=>new W.ZB(()=>e.paint),[e.paint]),a=(0,i.useMemo)(()=>e.allowAutoAndMixed&&((0,q.SX)(e.paint.color)||(0,q.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=N.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)}),s=(0,eL.Qu)();return"SOLID"===e.paint.type?i.createElement(eT.AN,{ariaLabel:(0,D.t)("fullscreen.color"),className:w()(e.visible?e$.EX:e$.wh,e.appendedColorInputClassname),formatter:r,forwardedRef:e.focusableRef,noBorderOnFocus:e.noBorderOnFocus,noLeftBorder:!1,onBlur:e.onBlur,onChange:e.onColorChange,onFocus:e.onFocus,onKeyDown:s,onMouseDown:e.onMouseDown,property:a,recordingKey:N.Pt(e,"colorInput"),squareRightBorder:!1}):i.createElement(_.E,{className:e.visible?e$.cD:e$.GI,onClick:o,actionOnPointerDown:!0},n.format(e.paint.type))}tr.displayName="Paint",(e=>{class r extends i.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=i.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(G.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,ec.cn)(this.row.current);this.props.dispatch(F.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(V.sw()),this.props.dispatch(F.Uv()),this.props.dispatch(G.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(F.XE()),$.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,v.GP)(this.props.paint),r=y.Osy.paintDataNodesInPaint(e);this.props.dispatch(U.to({type:eU.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=y.Osy.paintDataNodesInPaint((0,v.GP)(this.props.paint));this.props.dispatch(x.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(U.to({type:eU.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,v.GP)(this.props.paint);b.l7.user("apply-style",()=>y.Osy.applyStyleToPaintDatas(r,e)),(0,C.trackEvent)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,s.s)(e=>{(0,C.trackEvent)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==eo.zk.YES,a=(0,ey.U2)(e)||e.colorVar?y.Osy.resolvePaintWithVariable((0,v.GP)(this.props.paint),(0,v.GP)(e)):"",i=e;if(a){let r=(0,es.K)(a);i=r?.paint||e}b.l7.user("change-paint",()=>y.Osy.updatePaint((0,v.GP)(this.props.paint),(0,v.GP)(i),n,(0,v.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:i}),this.props.dispatch(G.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,s.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,ep.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let e=(0,eP.$)(this.props.paint);this.onChangeForPaint(e,eo.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,v.GP)(this.props.paint);y.Osy.selectOnlySamePaint(e),(0,C.trackEvent)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?T.dI(e):null}}pickerID(){return`${H.F7}-${this.props.id}`}stylePickerID(){return`${H.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}componentDidUpdate(e){this.props.paintValueFromEyeDropper&&e.paintValueFromEyeDropper!==this.props.paintValueFromEyeDropper&&this.setState({paintValueInPicker:this.props.paintValueFromEyeDropper})}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return i.createElement("div",{onMouseOver:this.onMouseOver},i.createElement(tr,{ref:this.row,count:this.props.count,firstIconButton:n.length>0?n[0]:null,focusableRef:this.props.focusableRef,hasFocus:!1,id:this.props.id,isDragHover:!1,isDragging:!1,isUI3:this.props.isUI3,onChange:this.onChangeForPaint,onFocus:this.onFocus,onInputBlur:this.props.onInputBlur,onInputFocus:this.props.onInputFocus,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,paint:this.currentPaintValue(),preventDragging:!0,recordingKey:N.Pt(this.props,"paint"),secondIconButton:n.length>1?n[1]:null,selected:this.pickerShown()||this.pickerShownIsStylePicker(),shownPickerMatchesThisPaint:this.pickerShown(),singletonRow:!1,togglePicker:this.onPaintClick,uniqueNodesCount:this.props.uniqueNodesCount,...(0,eE.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?i.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):i.createElement(eE.ku,{canPickerShowColorContrast:!0,defaultColor:this.props.defaultColor,disableImagePaints:!0,dropdownShown:this.props.dropdownShown,hasVisiblePaintBelow:!1,hidePatternPaints:!0,inheritStyleKeyField:"inheritFillStyleKey",initialStyleCreationPaint:this.currentPaintValue(),initialView:this.paintPickerInitialView,isInStyleModal:!1,keepOpenOnItemSelect:!0,onApplyStyle:this.onApplyStyle,onChange:r,paint:this.currentPaintValue(),paintId:this.props.id,paintNodeIds:this.props.uniqueNodeIds,pickerShown:this.props.pickerShown,recordingKey:N.Pt(this.props,"paintPicker"),selectedStyle:null,variableScopes:this.props.variableScopes})),this.state.hasEverHovered&&i.createElement(eA.MM,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&i.createElement(eA.UP,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:N.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:i.createElement("span",{className:e$.zm},i.createElement(p.K,{"aria-label":(0,D.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:N.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:j.dG,"data-tooltip":(0,D.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":el.Ib.TEXT}},i.createElement(P.U,{svg:eq.A},i.createElement(h.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,eH.f)(this.props.openFile?.editorType??null);e.push({button:i.createElement("span",{className:e$.zm},i.createElement(p.K,{"aria-label":r?(0,D.t)("slides.properties_panel.color_picker.theme_colors"):(0,z.A)("style"),onClick:this.onStyleClick,recordingKey:N.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,D.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?el.Ib.TEXT:el.Ib.LOOKUP}},i.createElement(P.U,{svg:eZ.A,fallbackSvg:eQ.A},i.createElement(f.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:i.createElement("span",{className:e$.zm},i.createElement(p.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,D.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:N.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,D.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":el.Ib.TEXT}},i.createElement(P.U,{svg:e0.A},i.createElement(E.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId===r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:a,left:i}=n.getBoundingClientRect(),[o,s]=[i-ew.N2,a];e(F.bS({id:r,initialX:o,initialY:s,modal:!0})),e(V.sw()),e(F.XE())},setPickerListLayout:r=>{e(F.Y({isListLayout:r}))}}))(r)})(a||(a={})),a.ConnectedSelectionPaintItem},393197:(e,r,n)=>{n.d(r,{s:()=>p});var a=n(848318),i=n(773511),o=n(536384),s=n.n(o),l=n(334804),c=n(453648),d=n(654858),u=n(433906);function p(e){let{styleIcon:r,styleName:n,styleDescription:o,styleValue:p,selected:m,hasFocus:_,disableHover:h,shouldStretch:g,recordingKey:f,onClick:E}=e,y=(0,d.Y)(n,o,p),b=s()(u.W1,{[u.BI]:!h,[u.C_]:m&&!_,[u.wH]:m&&_,[u.t7]:g}),v=a.createElement(a.Fragment,null,a.createElement("div",{className:u.hg},r),a.createElement("div",{className:u.p3},a.createElement(l.G,{className:u.Hs,text:n,showTooltip:c.i.ALWAYS,getTooltipText:y})));return E?a.createElement(i.E,{className:b,recordingKey:f,actionOnPointerDown:!0,onClick:E,htmlAttributes:{onContextMenu:E}},v):a.createElement("div",{className:b},v)}},337145:(e,r,n)=>{n.d(r,{Ey:()=>_,Wn:()=>p,X7:()=>f,dG:()=>m,il:()=>g,kC:()=>h});var a=n(186606),i=n(19180),o=n(480960),s=n(967688),l=n(489082),c=n(963307),d=n(659380),u=n(861343);function p(e){return"Basic"===(0,d.CL)()&&(e===a.yTM.VECTOR||e===a.yTM.VERTEX)}function m(){return"Brush"===(0,d.CL)()}function _(e){return"Basic"===(0,d.CL)()&&!(e===a.yTM.WASHI_TAPE||e===a.yTM.CONNECTOR)}function h(){let e=(0,u.V0)(),r=(0,u.Jt)(),n=(0,d.tB)(),i=(0,c.kl)("isInstanceSublayerSelected"),o=(0,c.kl)("isInstanceSelected");return n&&2===r&&e!==a.yTM.WASHI_TAPE&&!i&&!o}function g(){let e=(0,d.Qd)(),r=(0,c.kl)("isComplexVectorNetworkSelected")&&!(0,o.m)().ce_il_var_width_vector_networks,n=(0,c.kl)("dashPattern"),a=n&&((0,l.gl)(n)||n.length>0);return(0,o.m)().ce_il_var_width_points&&e&&!r&&!a}function f(){let e=(0,d.Qd)(),r=(0,c.kl)("isComplexVectorNetworkSelected"),n=(0,c.kl)("dashPattern"),a=n&&((0,l.gl)(n)||n.length>0);return e?r&&!(0,o.m)().ce_il_var_width_vector_networks?(0,i.k)().ce_il_var_width_strings?(0,s.t)("fullscreen.properties_panel.width_profile.disabled.split_vector"):(0,s.t)("fullscreen.properties_panel.width_profile.disabled.branching_vectors"):a?(0,i.k)().ce_il_var_width_strings?(0,s.t)("fullscreen.properties_panel.width_profile.disabled.dashed"):(0,s.t)("fullscreen.properties_panel.width_profile.disabled.dashed_stroke"):void 0:(0,i.k)().ce_il_var_width_strings?(0,s.t)("fullscreen.properties_panel.width_profile.disabled.dynamic"):(0,s.t)("fullscreen.properties_panel.width_profile.disabled.dynamic_stroke")}},861343:(e,r,n)=>{n.d(r,{Fc:()=>b,Hd:()=>C,Jt:()=>y,R8:()=>I,V0:()=>E,Xd:()=>T,e6:()=>S,fE:()=>A,kW:()=>w,qJ:()=>N,w8:()=>v,x4:()=>L});var a=n(848318),i=n(186606),o=n(768618),s=n(990063),l=n(303397),c=n(489082),d=n(963307),u=n(355755),p=n(554326),m=n(273555),_=n(405465),h=n(562638),g=n(246164);function f(){let{strokeAlign:e,strokeCap:r,terminalCap:n,strokeJoin:a,arcRadius:i,arcSweep:o,connectorLineStyle:s,miterLimitAngle:l,leftEndCap:c,rightEndCap:u,dashPattern:p,dashCap:m,strokePaints:_,strokeWeight:h,borderSharedWeight:g,styleIdForStrokeFill:f,inheritFillStyleKeyForStroke:E,strokeCapSize:y}=(0,d.zj)("strokeAlign","strokeCap","terminalCap","strokeJoin","arcRadius","arcSweep","connectorLineStyle","miterLimitAngle","leftEndCap","rightEndCap","dashPattern","dashCap","strokePaints","strokeWeight","borderSharedWeight","styleIdForStrokeFill","inheritFillStyleKeyForStroke","strokeCapSize"),b=(0,d.Gt)("maxStrokeWeight");return{strokeAlign:e,strokeCap:r,terminalCap:n,strokeJoin:a,arcRadius:i,arcSweep:o,numSelectedByType:(0,d.Gt)("numSelectedByType"),connectorLineStyle:s,miterLimitAngle:l,leftEndCap:c,rightEndCap:u,dashPattern:p,dashCap:m,maxStrokeWeight:b,strokePaints:_,strokeWeight:h,borderSharedWeight:g,inheritStyleID:f??null,inheritStyleKey:E??null,strokeCapSize:y}}function E(){return(0,p.ut)(i.Ez5?.propertiesPanelState().strokePanelMode,i.yTM.NONE)}function y(){return(0,p.ut)(i.Ez5?.propertiesPanelState().strokePanelTerminalPointCount,0)}function b(e,r,n){let a=(0,g.A8)(n);return!(e&&(0,s.vx)(e,"TABLE"))&&(a||(0,c._W)(r,[]).length>0||r===c.oV)}function v(e,r,n=m.zk.YES){let a=(0,c._W)(e,[]);if(a.length>0&&!a.find(e=>e.visible)){let e=a.map(e=>({...e,visible:!0}));l.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:m.zk.NO,overwrite:i.WXh.ONLY_WHEN_NOT_EMPTY})}l.Y5.updateSelectionProperties(r,{shouldCommit:n}),(0,_.a2)("strokePaints")}function T(){let{strokePaints:e}=f();return(0,a.useCallback)((r,n=m.zk.YES)=>v(e,r,n),[e])}function I(){let{numSelectedByType:e}=f(),r=(0,u.KH)();return!!e&&(!!((0,s.vx)(e,"RECTANGLE")||(0,s.vx)(e,"ROUNDED_RECTANGLE")||(0,s.vx)(e,"SYMBOL")||(0,s.vx)(e,"INSTANCE"))||!!(0,s.vx)(e,"FRAME")&&function e(r,n){let a=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let i of r)if(a.has(i.type)||"FRAME"===i.type&&!i.resizeToFit||"FRAME"===i.type&&n<2&&e(i.childrenNodes,n+1))return!0;return!1}(Object.keys(r).map((0,o.UN)().get).filter(e=>!!e),0))}function S(e){let r=e===h.om.ALL;return{borderTopVisible:r||e===h.om.TOP,borderRightVisible:r||e===h.om.RIGHT,borderBottomVisible:r||e===h.om.BOTTOM,borderLeftVisible:r||e===h.om.LEFT}}let A=1e3;function w(e){return e!==i.yTM.WASHI_TAPE}function C(e){if((0,c.gl)(e))return c.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}function N(e){return e?(0,c.gl)(e)?c.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function L(e,r,n,a){return r&&e===i.yTM.VECTOR&&"LINE"!==N(a)?r:n}},324150:(e,r,n)=>{var a=n(382902),i=n(215148);(0,a.eU)(null),(0,a.eU)(i.GR.DEFAULT_EXPANDED)},215148:(e,r,n)=>{n.d(r,{w5:()=>ec,B8:()=>el,tC:()=>ed,gc:()=>eu,GR:()=>es});var a,i,o,s,l,c=n(848318),d=n(301168),u=n(660376),p=n(988402),m=n(186606);n(19180);var _=n(382902),h=n(410441),g=n(813009),f=n(781239),E=n(696786),y=n(959750),b=n(15904),v=n(489082),T=n(426299),I=n(963307),S=n(788903),A=n(554326);n(394882),n(535884);var w=n(700436),C=n(105857),N=n(861673),L=n(592374),O=n(246164),R=n(836921),P=n(985789),D=n(14850),k=n(584459),M=n(75791),F=n(424554);n(891627);var x=n(320953),U=n(865114),B=n(401970),G=n(967688),V=n(303397),H=n(817553),z=n(355755),K=n(483157),W=n(614892),j=n(494604),Y=n(699848),$=n(293132);n(112091),n(810503);var q=n(372909);n(17753),n(232958),n(356558),n(100987),n(282554);let X={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};n(805353),n(996202);var J=n(713371),Z=n(658029),Q=n(124810),ee=n(58752);let et=n(821527);function er(){V.Y5.triggerAction("set-tool-default")}c.memo(function({recordingKey:e}){let r=(0,E.GS)(),n=(0,A.J2)(m.yFm.state().scale),a=(0,A.J2)(m.yFm.state().disabled),i=x.nc.user("change-scale",e=>{m.yFm.setScale(e)}),o=(0,A.J2)(m.yFm.state().width);o="number"==typeof o?o:v.oV;let s=x.nc.user("change-scale-width",e=>{m.yFm.setWidth(e)}),l=(0,A.J2)(m.yFm.state().height);l="number"==typeof l?l:v.oV;let u=x.nc.user("change-scale-height",e=>{m.yFm.setHeight(e)}),p=(0,A.J2)(m.yFm.state().anchorPoint),_=x.nc.user("change-anchor-point",e=>{m.yFm.setAnchorPoint(e)}),h=f.qP(e??"","anchorPointChange",e=>{_(e)}),{handleKeyDown:g,heightInputRef:y,scaleInputRef:b,widthInputRef:T}=function(){let e=(0,d.d4)(e=>e.mirror.sceneGraphSelection),[r,n]=c.useState(!1),a=c.useRef(null),i=c.useRef(null),o=c.useRef(null),s=(0,z.p8)("currentTool"),l=(0,U.ZC)(s),u=(0,z.p8)("activeUserAction"),[p,_]=c.useState(!1);c.useEffect(()=>{let r=s===m.NLJ.SCALE&&l!==m.NLJ.SCALE;Object.keys(e).length>0&&r&&[m.QOV.DEFAULT,m.QOV.SELECTING_TEXT].includes(u)&&a.current&&(a.current.focus(),a.current.select())},[u,s,l,e]),c.useEffect(()=>{let e=()=>{a.current&&(n(!1),_(!1),a.current.focus(),a.current.select())};return H.h.subscribeScaleToolActivated(e),()=>{H.h.unsubscribeScaleToolActivated(e)}},[]),c.useEffect(()=>{let e=e=>{e.target!==a.current&&e.target!==i.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let h=c.useCallback(e=>{let n="Escape"===e.key,a="Enter"===e.key;!r&&(a||n)&&_(!0)},[r]);return c.useEffect(()=>{p&&er()},[p]),{handleKeyDown:h,scaleInputRef:a,widthInputRef:i,heightInputRef:o}}(),I=c.createElement(W.$4,null,c.createElement(Z.K,{onClick:()=>{er()},"aria-label":(0,G.t)("fullscreen.scale_panel.close")},c.createElement(B.U,{svg:et,fallbackSvg:et},c.createElement(Q.A,null)))),S=c.createElement($.V,{restoreFocusElements:[b.current,T.current,y.current].filter(Boolean),anchorPoint:p,onAnchorPointChange:h,disabled:a,fullWidth:r}),w=r?ee.f4:ee.G4,C=c.createElement(w,{disabled:a,height:l,heightInputRef:y,onHeightChange:u,onKeyDown:g,onScaleChange:i,onWidthChange:s,recordingKey:e,scale:n,width:o,widthInputRef:T}),N=c.createElement(q.g,{scale:n,onScaleChange:i,disabled:a,onInputKeyDown:g,recordingKey:e,ref:b});return r?c.createElement(W.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`,className:J.$1},c.createElement(j.r,{titleTx:(0,G.tx)("fullscreen.scale_panel.scale"),icon:I}),C,c.createElement(Y.sY,{leftLabel:(0,G.t)("fullscreen.scale_panel.scale"),rightLabel:(0,G.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:N,bottomLeftInput:null,rightInput:S,topIcon:null,bottomIcon:null})):c.createElement(W.Zk,{"data-testid":`scale_panel.state.${a?"disabled":"enabled"}`},c.createElement(W.fI,{className:J.ZF},c.createElement(K.Q,null,(0,G.tx)("fullscreen.scale_panel.scale")),I,S),c.createElement(W.fI,null,N),C)});var en=n(185858),ea=n(621012),ei=n(27776);(0,h.hG)(ei.wQn);let eo=(e,r)=>e?f.Pt(e,r):r;var es=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(es||{});(a||(a={})).ConnectedFillPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),n=(0,E.GS)(),{inheritFillStyleKey:a,exportSettings:i,exportBackgroundDisabled:o,styleIdForFill:s}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("inheritFillStyleKey","exportSettings","exportBackgroundDisabled","styleIdForFill"),l=(0,b.m)();return c.createElement(F.eT,{key:e.key,colorFormat:r,currentSelectedGradientStop:e.currentSelectedGradientStop,currentSelectedProperty:e.currentSelectedProperty,currentTool:e.currentTool,defaultColor:T.rC,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,exportBackgroundDisabled:o,hasExports:!!i&&(0,v._W)(i,[]).length>0,inheritStyleID:s||null,inheritStyleKey:a||null,isPanelBodyCollapsedAtom:null,isUI3:n,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerInStyleCreationShown:e.pickerInStyleCreationShown,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"fillPanel"),sceneGraphSelection:e.sceneGraphSelection,selectionContainsFrames:l,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,variableScopes:e.variableScopes})});let el=a.ConnectedFillPanel;(i||(i={})).ConnectedEffectsPanel=(0,d.Ng)(e=>({library:e.library,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,I.ER)(),{smallNudgeAmount:n,bigNudgeAmount:a}=(0,y.sT)(),i=(0,E.GS)(),{effects:o,inheritEffectStyleKey:s,containsOnlySpreadEligibleNodes:l,containsAnyKnockoutShadowEligibleNodes:d,framelikeWithoutFills:u,framelikeWithoutClipping:p,anyNonFrameLikesSelected:m,styleIdForEffect:_}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("effects","inheritEffectStyleKey","containsAnyKnockoutShadowEligibleNodes","framelikeWithoutFills","framelikeWithoutClipping","anyNonFrameLikesSelected","containsOnlySpreadEligibleNodes","styleIdForEffect"),h=(0,I.wR)("guid")??null;return c.createElement(k.F,{key:"effects",anyNonFrameLikesSelected:!!m,bigNudgeAmount:a,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,effects:o||[],framelikeWithoutClipping:!!p,framelikeWithoutFills:!!u,inheritStyleID:_||null,inheritStyleKey:s||null,isUI3:i,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"effectsPanel"),sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:h,selectionContainsAnyKnockoutShadowEligibleNodes:!!d||r,selectionContainsOnlySpreadEligibleNodes:!!l||r,smallNudgeAmount:n,stylePickerShown:e.stylePickerShown})});let ec=i.ConnectedEffectsPanel;(o||(o={})).ConnectedTransformModifiersPanel=(0,d.Ng)(e=>({currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,openFile:e.openFile}))(function(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=(0,y.sT)(),a=(0,E.GS)(),{transformModifiers:i}=(0,I.zj)("transformModifiers");return c.createElement(en.H,{key:"transformModifiers",bigNudgeAmount:n,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,isUI3:a,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"transformModifiersPanel"),sceneGraphSelection:e.sceneGraphSelection,smallNudgeAmount:r,transformModifiers:i||[]})}),o.ConnectedTransformModifiersPanel,(s||(s={})).ConnectedGridsPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,E.GS)(),n=(0,y.Ku)(),{smallNudgeAmount:a,bigNudgeAmount:i}=(0,y.sT)(),o=(0,A.J2)(m.Ez5.editorPreferences().showFrameGrids),{layoutGrids:s,inheritGridStyleKey:l,styleIdForGrid:d}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("styleIdForGrid","layoutGrids","inheritGridStyleKey"),u=(0,I.wR)("guid")??null;return c.createElement(M.S,{key:"grids",bigNudgeAmount:i,colorFormat:n,currentSelectedProperty:e.currentSelectedProperty,currentTool:e.currentTool,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,inheritStyleID:d||null,inheritStyleKey:l||null,layoutGrids:s,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"gridsPanel"),sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:u,showFrameGrids:o,smallNudgeAmount:a,stylePickerShown:e.stylePickerShown,version:r?"ui3":"ui2"})});let ed=s.ConnectedGridsPanel;(e=>{let r=(0,C.Tn)();e.ConnectedTypePanel=(0,d.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,n)=>({...e,...n,...r}))(function(e){let n=c.useContext(D.zK),a=(0,A.J2)(m.Ez5.propertiesPanelState().enabledTypePanelControls),i=e.shouldUseSelectedStyleProperties?I.pw:I.zj,o=e.shouldUseSelectedStyleProperties?I.DQ:I.fC,{fontFamily:s,fontStyle:l,fontSize:d,lineHeight:h,intrinsicLineHeight:f,letterSpacing:b,paragraphSpacing:v,paragraphIndent:T,listSpacing:C,textLineType:k,textDirectionality:M,wholeNodeTextLineType:F,isHangingPunctuationApplicableToSelection:x,textCase:U,textDecoration:B,textDecorationSkipInk:G,textUnderlineOffset:V,textDecorationThickness:H,textDecorationStyle:z,inheritTextStyleKey:K,textAutoResize:W,missingFont:j,textTruncation:Y,leadingTrim:$,leadingTrimEnabled:q,hangingPunctuation:X,hangingList:J,fontVariantDiscretionaryLigatures:Z,fontVariantHistoricalLigatures:Q,fontVariantNumericFigure:ee,fontVariantNumericSpacing:et,fontVariantNumericFraction:er,fontVariantCaps:en,fontVariantPosition:ei,detachOpticalSizeFromFontSize:es,maxLines:el,textAlignHorizontal:ec,textAlignVertical:ed,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,validMixedPropertiesForResponsiveTextStyle:ep,styleIdForText:em}=i("fontFamily","fontStyle","fontSize","lineHeight","intrinsicLineHeight","letterSpacing","paragraphSpacing","paragraphIndent","listSpacing","textLineType","textDirectionality","wholeNodeTextLineType","isHangingPunctuationApplicableToSelection","textCase","textDecoration","textDecorationSkipInk","textUnderlineOffset","textDecorationThickness","textDecorationStyle","inheritTextStyleKey","textAutoResize","missingFont","textTruncation","leadingTrim","leadingTrimEnabled","hangingPunctuation","hangingList","fontVariantDiscretionaryLigatures","fontVariantHistoricalLigatures","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","fontVariantCaps","fontVariantPosition","detachOpticalSizeFromFontSize","maxLines","textAlignHorizontal","textAlignVertical","areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides","validMixedPropertiesForResponsiveTextStyle","styleIdForText"),{hasHadRTLText:e_,textUserLayoutVersion:eh,textExplicitLayoutVersion:eg,textBidiVersion:ef,fontVariations:eE}=o("hasHadRTLText","textUserLayoutVersion","textExplicitLayoutVersion","textBidiVersion","fontVariations"),ey=(0,I.wR)("guid")??null;(0|a)&1<<m.mrc.TEXT_TRUNCATION&&(0,u.KF)(null!=el,"TypePanel missing maxLines");let{smallNudgeAmount:eb,bigNudgeAmount:ev}=(0,y.sT)(),eT=(0,O.WH)(K??null,em??null,"TEXT"),eI=(0,R.L)(),eS=(0,g.R)(e=>r(e,(0,w.Sh)(e),p.RR.TEXT)),eA=(0,S.SG)(["TEXT_DATA"]).data??[],ew=(0,P.R1)().variableConsumptionMap,eC=(0,P.JG)(),eN=(0,E.GS)(),eL=(0,_.md)(N.$i)===L.JJ.TEXT_PANEL;return s&&l?c.createElement(ea.J,{key:"type",areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,bigNudgeAmount:ev,detachOpticalSize:es||!1,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:a,fontFamily:s,fontSize:d,fontStyle:l,fontVariantCaps:en||"NORMAL",fontVariantDiscretionaryLigatures:Z||!1,fontVariantHistoricalLigatures:Q||!1,fontVariantNumericFigure:ee||"NORMAL",fontVariantNumericFraction:er||"NORMAL",fontVariantNumericSpacing:et||"NORMAL",fontVariantPosition:ei||"NORMAL",fontVariations:eE||[],fonts:e.fonts,hangingList:J,hangingPunctuation:X,hasHadRTLText:e_,inheritStyleID:em||null,inheritStyleKey:K||null,intrinsicLineHeight:f,isHangingPunctuationApplicableToSelection:x,isSlides:e.isSlides,isTextPropReferencedByAnyNodeInSelection:eS,leadingTrim:$,leadingTrimEnabled:q,letterSpacing:b,library:e.library,lineHeight:h,listSpacing:C,localFontAgentVersion:e.localFontAgentVersion,mainStyle:eT,missingFont:j,modalShown:e.modalShown,openFile:e.openFile,orgById:e.orgById,paragraphIndent:T,paragraphSpacing:v,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"typePanel"),sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:ey,selectedStyleProperties:e.selectedStyleProperties,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,showBlueBorder:eL,smallNudgeAmount:eb,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,textAlignHorizontal:ec,textAlignVertical:ed,textAutoResize:W,textBidiVersion:ef,textCase:U,textContentBoundAsset:eI,textDecoration:B,textDecorationSkipInk:G,textDecorationStyle:z,textDecorationThickness:H,textDirectionality:M,textExplicitLayoutVersion:eg,textLineType:k,textTruncation:Y,textUnderlineOffset:V,textUserLayoutVersion:eh,textVariablesExist:eA.length>0,userFavoriteFonts:e.userFavoriteFonts,validMixedPropertiesForResponsiveTextStyle:ep,variableConsumptionMap:null!=n?eC:ew,version:eN?"ui3":"ui2",wholeNodeTextLineType:F}):null})})(l||(l={}));let eu=l.ConnectedTypePanel},231563:(e,r,n)=>{n(301168),n(186606),n(19180);var a=n(410441);n(990063),n(459403),n(489082),n(963307),n(355755),n(554326),n(280255),n(756672),n(714327);var i=n(27776);(0,a.jz)(i.uj0)},998390:(e,r,n)=>{n.d(r,{LI:()=>k,Pe:()=>R,Yg:()=>function e(r){let n=0;for(let a of(r.prototypeInteractions.length>0&&(n+=1),r.childrenNodes))n+=e(a);return n},_U:()=>w,bA:()=>B,dT:()=>C,ft:()=>S,k9:()=>N,kC:()=>G,sT:()=>A});var a=n(980483),i=n(897037),o=n(642457),s=n(777052),l=n(634625),c=n(186606),d=n(320953),u=n(553547),p=n(768618),m=n(382902),_=n(989232),h=n(156845),g=n(461979),f=n(967688),E=n(324762),y=n(642935),b=n(101872),v=n(313405),T=n(274466),I=n(513749);n(113173);class S extends Error{constructor(){super(),this.name="InvalidSelectionFromGenericLayers"}}class A extends Error{constructor(){super(),this.name="NoInteractionsGenerated"}}class w extends Error{constructor(){super(),this.name="NoInteractionsGeneratedExistingInteractions"}}function C(e,r,n,i){let s=function(e,r){let n={name:"Dummy Page just to satisfy typescript so they have a parent",id:"0:1",type:"CANVAS",children:[]};return n.children=L(e,r,n),n}(e,r).children,l=(0,a._q)(s);return(0,o.sS)(s,n,l,i)}function N(e,r){let n=r.get(e),a={name:n.name,id:n.guid,type:"CANVAS",children:[]};return a.children=L(n.childrenGuids,r,a),a}function L(e,r,n){let a=[];for(let i of e){let e=(0,E.Zl)(r,i);if(null!==e){let i={id:e.guid,name:e.name,type:e.type,visible:e.visible,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,w:e.absoluteBoundingBox.w,h:e.absoluteBoundingBox.h,parentNode:n,clipsContent:!e.frameMaskDisabled,fontSize:e.fontSize,textAlignHorizontal:e.textAlignHorizontal,layoutMode:e.stackMode,cornerRadius:e.cornerRadius};i.opacity=e.opacity,i.characters=e.characters,e.fills&&(i.fills=e.fills.map(O).filter(e=>!!e)),e.prototypeInteractions&&e.prototypeInteractions.length>0&&(i.interactions=e.prototypeInteractions);let o=L(e.childrenGuids,r,i);o.length>0&&(i.children=o),a.push(i)}}return a}function O(e){switch(e.type){case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":return{type:"GRADIENT",visible:e.visible};case"IMAGE":let r=e.image?.hash,n=r?(0,g.Rw)(r):"",a=e.imageThumbnail?.hash;return{type:"IMAGE",hash:n,thumbnailHash:a?(0,g.Rw)(a):"",visible:e.visible};case"SOLID":return{type:"SOLID",color:e.color??{r:0,g:0,b:0},visible:e.visible}}}function R(e){return null!==e}let P=(e,r)=>"BACK"===r?"BACK":"CLOSE"===r?"CLOSE":"OPEN_POPUP"===e?"OVERLAY":e,D=d.nc.ai("link-new-interaction",e=>{let r=P(e.navigationType,""),n=e.buttonID,a=u.sH(n);if(null===a||a===u.Hr){(0,_.trackEvent)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let i=(0,p.UN)().get(n);if(null==i){(0,_.trackEvent)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let o=function(e){let r=e;for(;r.parentNode?.type!=="CANVAS"&&r.parentNode?.type!=="SECTION"&&null!==r.parentNode;)r=r.parentNode;return r}(i),s=e.destinationScreenID,l=i?.prototypeInteractions;if(l){for(let e of l)if(e.event?.interactionType==="ON_CLICK"&&e.actions&&e.actions.length>0&&!(1===e.actions.length&&"NONE"===e.actions[0].connectionType))return(0,_.trackEvent)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkExistingInteractionOnSourceNode:!0,action_type:r}),{noInteractionGeneratedReason:"EXISTING_INTERACTION"}}let d=u.sH(s),m={},g=e.navigationType;if("BACK"===g)m.connectionType="BACK";else if("CLOSE"===g)m.connectionType="CLOSE";else{if(null===d||d===u.Hr||null===s){(0,_.trackEvent)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}let e=(0,p.UN)().get(s);if(!e){(0,_.trackEvent)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}m.transitionNodeID=d,m.transitionType="INSTANT_TRANSITION","NAVIGATE"===g?(m.connectionType="INTERNAL_NODE",(i?.type==="SYMBOL"||i?.type==="INSTANCE")&&(e?.type==="SYMBOL"||e?.type==="INSTANCE")?m.navigationType="SWAP_STATE":m.navigationType="NAVIGATE",o?.overlayBackground.type!=="NONE"&&(m.navigationType="SWAP")):"OPEN_POPUP"===g&&(m.connectionType="INTERNAL_NODE",m.navigationType="OVERLAY")}let f=c.glU.generateUniqueID();if(!f)return;let E=u.sH(f);if(!E)return;let y={id:E,stateManagementVersion:1};y.event={interactionType:"ON_CLICK"},y.actions=[m];try{i.prototypeInteractions=[y]}catch(e){return}let b=h.d({nodeID:a,interactionID:E});return(0,_.trackEvent)("prototype_interaction_added",{interactionCount:i?.prototypeInteractions.length??0,magicLinkGenerated:!0,interactionID:b,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),action_type:P(m.navigationType??"",m.connectionType??"")}),{noodleID:b}});async function k(e,r,n,a){let i,l;if("TOPLEVEL"===e.type&&function(e,r){let n=(0,o.i9)(e.unfilteredScene.children);r((0,v.Zh)({name:"prototype.ai_magic_link_input_existing_interactions",params:{existingInteractions:JSON.stringify(n.interactionIds)}}))}(e,a),"TOPLEVEL"===e.type&&0===e.topLevelFrames.length)throw new S;try{let n=await F(e,r);i=M(n)}catch(e){if(e instanceof s.gS){let r={generatedInteractions:[]};return r.errorMessage=e.message,r}throw e}let c=[],d=!1,u=[],p=[];try{for await(let e of i){if(n.signal.aborted)return{generatedInteractions:[],errorMessage:"aborted"};U("NAVIGATE"),"OPEN_POPUP"===e.navigationType||"CLOSE"===e.navigationType?p.push(e):"BACK"===e.navigationType?u.push(e):d=x(e,c)}}catch(e){l=e.message}for(let e of p)U("OPEN_POPUP"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);for(let e of u)U("BACK"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);if(!l&&0===c.length){if(d)throw new w;throw new A}return{generatedInteractions:c,errorMessage:l}}async function*M(e){for await(let r of e)yield(0,i.HP)(r)}async function F(e,r){let n=(0,l.w)(e),a=new Promise((e,r)=>{setTimeout(()=>{r(Error("Cortex timed out"))},6e4)});if("EMPTY"===n.type)throw new s.gS("Empty selection");let i=y.Ay.design.generateMagicLinkV2(n,{...(0,b.Ay)(),clientLifecycleId:r}),o=await Promise.race([i,a]);return new y.hI(o,6e4)}function x(e,r){let n=D(e);if(n?.noodleID)r.push({id:n.noodleID,mapping:e});else if(n?.noInteractionGeneratedReason==="EXISTING_INTERACTION")return!0;return!1}function U(e){"BACK"===e?m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_back_interactions")):"OPEN_POPUP"===e?m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_overlay_interactions")):m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_navigate_interactions"))}function B(){m.zl.set(I.pD,(0,f.tx)("magic_link.running"))}function G(e,r,n){let a=Object.fromEntries(n.map(e=>[e,[]]));return r.forEach(r=>{n.forEach(n=>{a[n]?.push(...function e(r,n,a){let i=r.get(n);return i?"ICON"===a&&i.isIconLike||i.type===a||"IMAGE"===a&&(0,T.A)(i)?[n]:i.childrenNodes.flatMap(n=>e(r,n.guid,a)):[]}(e,r,n))})}),a}},696816:(e,r,n)=>{n.d(r,{KN:()=>K,y3:()=>j});var a=n(848318);n(301168);var i=n(871043),o=n(186606),s=n(286536),l=n(19180),c=n(536384),d=n.n(c),u=n(737647),p=n.n(u),m=n(720300),_=n(781239),h=n(979890),g=n(454805),f=n(561258),E=n(297638),y=n(967688);n(238004);var b=n(696786),v=n(787674),T=n(728321),I=n(600674),S=n(242713),A=n(492046),w=n(489082),C=n(788903),N=n(24422),L=n(434328),O=n(60519),R=n(425155);n(985789);var P=n(346288),D=n(96526),k=n(64525),M=n(175393),F=n(575117),x=n(578386),U=n(794523),B=n(549307),G=n(969560),V=n(556822);let H=a.createContext({autoCloseOnScroll:!0}),z=(0,m.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(5007).then(n.bind(n,85007))).ExpressionBuilderSearch})});function K({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:p,setVariableValue:m,onClose:h,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,w.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[T,S]=a.useState(null),C=a.useCallback(e=>{null!==e&&S(e)},[]),[N,L]=a.useState(E??null),{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=a.useCallback(()=>{if(O)P();else if(!N&&T){let e=T.getBoundingClientRect();L(new g.Mi(e.left-34,e.top-6))}},[T,N,O,P]);a.useEffect(()=>{!0===n&&s&&T&&(D(),s(!1))},[n,T,D,s]);let k=a.useCallback(()=>{N&&(L(null),h&&h())},[N,h]),M=a.useCallback(e=>{if(void 0!==d)d(e);else if((0,i.Vq)(m)){if(!m(e))return!1}else void 0!==l&&l({targetVariableData:e});return k(),!0},[k,d,l,m]),F=a.createElement(a.Fragment,null,N&&a.createElement(W,{initialTokens:r?(0,v.q)((0,I.A)(r,new A.o(!0))):[],initialPosition:N,resolvedType:e,onCloseExpressionBuilder:k,onInputSubmitted:M,icon:d?G.A:V.A,isInConditional:void 0!==d,recordingKey:_.Pt(c,"expressionBuilder"),requestedTypes:f})),U=a.createElement(j,{targetVariableData:r,forwardRef:C,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!m,showVariableThumbnails:p,isInConditional:void 0!==d,isMixed:b});return a.createElement(a.Fragment,null,F," ",U)}function W({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:i,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:u}=a.useContext(H),m=a.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=a.useRef(m),E=a.useRef(!1),[b,v]=a.useState(0),I=a.useCallback((e,r)=>{v(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[w,C]=a.useState((0,S.d)(g.current,n,d)),L=a.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,T.q)(g.current,new A.o));if(!e)return C(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),i();return!0},[l,i,o,n]),O=a.useMemo(()=>p()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),i()}),[l,i,n]),R=a.useCallback(()=>l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[l]);return a.createElement("div",{className:B.Zh},a.createElement(M.vx,{container:N.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:i,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},a.createElement(f.dP,{recordingKey:c},a.createElement("div",null,a.createElement(z,{error:w,errorFallback:null,expressionText:g,fallback:a.createElement("div",{className:B.D9}," Loading... "),hasWiggled:E.current,icon:s,initialTokens:e,isInConditional:l,onClose:O,onSubmit:L,placeholderText:R(),recordingKey:_.Pt(c,"search"),requestedTypes:d,resolvedType:n,setError:C,setWiggleCount:I,wiggleCount:b})))),a.createElement(h.D8,{className:U.ZA,onMouseDown:e=>{!w&&L()||(b>=1?O("click_out_cancel"):0===b&&I(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{u&&g.current.trim()===m.trim()&&O("scroll_cancel")},recordingKey:_.Pt(c,"closeBuilder")}))}function j({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:i,showVariableThumbnails:c,isNarrowPanel:u,isInCell:p,isInConditional:m,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let v=(0,b.GS)(),T=(0,R.YT)(),S=a.useContext(O.c),C=T===R.Oz.TWO_COL,N=C&&S===O.P.LEFT,P=C&&S===O.P.RIGHT,D=a.useMemo(()=>e?(0,I.A)(e,new A.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,w.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return a.createElement(L.J,{color:e.value});let k=0===D.length,M=d()({[B.WR]:!p&&u,[B.NQ]:p,[B.D9]:!p&&!u,[B.pC]:C,[B.g6]:N,[B._i]:v}),U=N?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return a.createElement(h.D8,{onClick:n,recordingKey:_.Pt(i,"openExpressionBuilder"),className:v?B.tY:E.s.minW0.$},a.createElement("div",{className:M,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:i,modeId:o}=(0,x.Y_)(n);return a.createElement(Y,{variableId:i,modeId:o,showVariableThumbnails:c,key:r,disableHover:N})}if(s.sH(e))return a.createElement(Y,{variableId:e,showVariableThumbnails:c,key:r,disableHover:N});if((0,l.k)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[i,o,s]=(0,x.Q6)(n);return a.createElement($,{stablePathToNode:i,componentPropId:s,showVariableThumbnails:c,key:r})}if((0,l.k)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,i,o]=(0,x.Q6)(e);return a.createElement($,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:c,key:r,disableHover:N})}return x.dX.test(e)?a.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?a.createElement("span",{key:r},e):a.createElement(F.X,{isLeftColInteractionsPanel:N,text:e,key:r})}),k&&a.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):m?U:(0,y.t)("proto.expression_builder.placeholder"))))}function Y({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,C.u)(e),s=o?(0,k.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,C.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,p=d?`${s}: ${d}`:`${s}`;return a.createElement(D.wG,{text:p,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:i})}function $({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:i}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return a.createElement(D.wG,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J2.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:i})}},578386:(e,r,n)=>{n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===i.Z_n.ALIAS)return i.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===i.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:a}=r.varValue.value,o=x(n,a);return o?e(o):function(e){switch(e.varValue.resolvedType){case i.rXF.STRING:case i.rXF.TEXT_DATA:return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:""};case i.rXF.BOOLEAN:return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!1};case i.rXF.FLOAT:return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}}}(r)}let n=(0,h.sr)(r);switch(typeof n){case"string":return{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:n};case"boolean":return{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:n};case"number":return{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:n}}},DE:()=>T,EQ:()=>q,HC:()=>V,Hq:()=>F,I0:()=>y,IQ:()=>j,J4:()=>G,N_:()=>K,Q6:()=>U,TL:()=>H,Ub:()=>k,Xx:()=>Y,Y_:()=>W,ZX:()=>E,_z:()=>M,a1:()=>v,aA:()=>x,bU:()=>B,d9:()=>P,dX:()=>N,er:()=>O,he:()=>D,if:()=>I,kl:()=>S,q2:()=>A,sO:()=>w,tJ:()=>R,tz:()=>$,uX:()=>L,wL:()=>z,yZ:()=>C,yy:()=>b});var a=n(848318),i=n(186606),o=n(553547),s=n(989232),l=n(810503),c=n(813147),d=n(787674),u=n(492046),p=n(788903),m=n(730143),_=n(527301),h=n(368112),g=n(513390),f=n(927036);function E({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:a}){return e?r.find(r=>r.node_id===e)??a.find(r=>(0,h.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let y=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),b=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),v=new RegExp(/\+|-|\*|\//g),T=new RegExp(/\+/g),I=new RegExp(/>|<|!/g),S=new RegExp(/>=|<=/g),A=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),w=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),C=new RegExp(/"([^"]*)"/),N=new RegExp(/^[0-9.]*$/),L=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),R=new RegExp(/\(|\)/g);function P(e){return!!e&&(!N.test(e)||isNaN(Number(e)))}function D(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function k(e){let[r,n]=e.split("$$$");return[r,n]}function M(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let a=n.variableIdToVariable(e);if(!a)return"{}";let i=n.variableCollectionIdToVariableCollection(a.variableSetId);if(!i)return"{}";let o=D(i,r);return`{${a.name}$$$${o}}`}function F(e){let[r,n,a]=U(e);if(!r||!n||!a)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=x(r,a);return e?[r,n,a,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function x(e,r){if(!e||0===e.length||!r)return;let n=i.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function U(e){let[r,n,a]=e.split("$$$");if(!r||!n||!a)return[[],"",""];let[,i]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=a.split("IndexOrKey:");return i&&o&&s?[JSON.parse(i),o,s]:[[],"",""]}function B(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function G(e){for(let r of e){if(r.type===h.Yc.COMPONENT_PROPS)return(0,h.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function V(e){for(let r of e)if(r.type===h.Yc.COMPONENT_PROPS)return(0,h.lC)(r.items[0]);for(let r of e)if(r.type===h.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===h.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function H(e){return a.useMemo(()=>e===i.rXF.BOOLEAN?[i.rXF.BOOLEAN,i.rXF.STRING,i.rXF.FLOAT]:e===i.rXF.STRING?[i.rXF.STRING,i.rXF.FLOAT]:[e],[e])}function z(e,r,n,i){let o=(0,p.Rb)(),s=(0,p.yp)(),l=(0,p.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,E]=(0,a.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),y=(0,f.s1)(),b=(0,m._G)(),v=(0,_.A)(null,null),T=a.useMemo(()=>{let e={};return v.forEach(r=>{e[r.libraryKey]=r.fileName}),e},[v]),I=H(r),S=a.useMemo(()=>u.filter(e=>i?.includes(e.resolvedType)??I.includes(e.resolvedType)),[u,i,I]),A=(0,g.qF)(S,e??"");return a.useMemo(()=>null===e?[]:e.length>0?(0,h.dC)({variables:A,variableSets:E,styles:[],componentProps:[],layout:"list",fileNamesByLibraryKey:T,openFileLibraryKey:b,collapsedLibraryKeys:new Set,slideThemeId:y}):(0,h.HK)({variables:A,variableSets:E,layout:n.layout}),[e,A,E,T,b,n.layout,y])}async function K(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function W(e){let[r,n]=e.split(" %%% "),[a,i]=r.split("$$$");return{variableId:a,modeId:i,resolvedType:n?+n:null}}function j(e,r){return e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===i.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===i.Z_n.EXPRESSION&&e?.value.expressionFunction===i.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function Y(e){return $(e)?{type:i.Z_n.STRING,resolvedType:i.rXF.STRING,value:o.AD}:e===i.rXF.BOOLEAN?{type:i.Z_n.BOOLEAN,resolvedType:i.rXF.BOOLEAN,value:!0}:e===i.rXF.FLOAT?{type:i.Z_n.FLOAT,resolvedType:i.rXF.FLOAT,value:0}:e===i.rXF.JS_RUNTIME_ALIAS?{type:i.Z_n.CMS_ALIAS,resolvedType:i.rXF.JS_RUNTIME_ALIAS,value:{collectionId:"",fieldSchemaId:""}}:null}function $(e){return e===i.rXF.STRING||e===i.rXF.TEXT_DATA}function q(e,r,n,a){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let p=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=k(e.stringValue),a=o.variableIdToVariable(r);return{collection_id:a?.variableSetId,variable_id:r,variable_type:a?.resolvedType,mode_id:n}}),m=Object.keys(i.rXF)[Object.values(i.rXF).indexOf(n)].toLowerCase();"float"!==m&&"string"!==m&&"boolean"!==m&&(m="invalid");let _={status:r,resolved_type:m,variable_data:JSON.stringify(p),entry:a};s.definedAnalyticsHandler.trackDefinedEvent("prototype.expression_submit",_)}},756912:(e,r,n)=>{n.d(r,{m5:()=>function e(r){var n=[];for(var i of r){if("SET_VARIABLE"===i.connectionType){if(i.targetVariable&&"id"in i.targetVariable){let e=s.sH(i.targetVariable.id);i.targetVariable.id={guid:{sessionID:e?.guid?.sessionID??-1,localID:e?.guid?.localID??-1}}}i.targetVariableData&&(i.targetVariableData=c(i.targetVariableData.type,i.targetVariableData.resolvedType,i.targetVariableData.value))}else if("SET_VARIABLE_MODE"===i.connectionType)(0,a.B1)(i.targetVariableModeID,"targetVariableModeID"),i.targetVariableModeID=(0,o.sH)(i.targetVariableModeID)||void 0;else if("CONDITIONAL"===i.connectionType&&i.conditionalActions){var l=[];for(var d of i.conditionalActions){var u=[],p=null;d&&(d.condition&&(p=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:p,actions:u})}i.conditionalActions=l}n.push(i)}return n}}),n(848318);var a=n(660376),i=n(186606),o=n(553547),s=n(286536),l=n(705237);function c(e,r,n){let a=(0,l.WI)(r,n),d=function(e){switch(e){case i.rXF.BOOLEAN:return"BOOLEAN";case i.rXF.FLOAT:return"FLOAT";case i.rXF.STRING:return"STRING";case i.rXF.COLOR:return"COLOR";case i.rXF.MAP:return"MAP";case i.rXF.SYMBOL_ID:return"SYMBOL_ID";case i.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===i.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:a.value}};if(e===i.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:a.value}};if(e===i.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:a.value}};if(e===i.Z_n.ALIAS){var u,p=null;if("string"==typeof n){let e=s.sH(n);e&&(p={guid:{sessionID:e?.guid?.sessionID??-1,localID:e?.guid?.localID??-1}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:p||a.value}}}if(e===i.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=a.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>{let r=(0,o.sH)(e);return{sessionID:r?.sessionID??-1,localID:r?.localID??-1}})},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===i.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:a.value}};if(e===i.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function(e){for(var r=e.expressionArguments,n=[],a=0;a<r.length;a++){var o=r[a],s=c(o.type,o.resolvedType,o.value);n.push(s)}return{expressionArguments:n,expressionFunction:i.JTp[e.expressionFunction]}}(n)}};else if(e===i.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:a.value}};else if(e===i.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:a.value}}}},910401:(e,r,n)=>{n(290267),n(489082)},425155:(e,r,n)=>{n.d(r,{Oz:()=>R,YT:()=>D,hU:()=>v,x6:()=>S,zt:()=>O});var a=n(848318),i=n(301168);n(186606),n(553547);var o=n(19180),s=n(382902),l=n(989232);n(813009);var c=n(31898),d=n(995218),u=n(381673),p=n(489082);n(246411);var m=n(730143),_=n(318147),h=n(679996),g=n(520779);n(21614),n(801296);var f=n(787532),E=n(274016),y=n(756672),b=n(956783);function v(e,r,n,a,i,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,p.hS)(e))return p.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,p.hS)(e)){for(let r of I)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,p.hS)(e))return p.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:S(r),easingFunction:n?(0,p.hS)(n)?n:p.oV:T,duration:a?(0,p.hS)(a)?a:p.oV:.3,shouldSmartAnimate:A(i,!1),preserveScroll:A(o,!1),resetVideoPosition:A(s,!1),openUrlInNewTab:A(l,!1),resetScrollPosition:A(c,!1),resetInteractiveComponents:A(d,!1)}}(0,s.eU)(!0);let T=[0,0,.58,1],I=["LEFT","RIGHT","TOP","BOTTOM"];function S(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function A(e,r){return e?(0,p.hS)(e)?e:p.oV:r}let w=["OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY"],C=["SET_VARIABLE","SET_VARIABLE_MODE","CONDITIONAL"],N=["UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function L(e,r){let n;let o=(0,i.wA)();switch(e){case g.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=h.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case g.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=h.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case g.Bi.PROTOTYPING_VARIABLES:n=h.b.PROTOTYPING_VARIABLES;break;case g.Bi.VIDEOS_IN_PROTOTYPES:n=h.b.ADD_VIDEO;break;default:n=void 0}return(0,a.useCallback)(()=>{o(c.to({type:E.DV,data:{team:r,resource:e,editorType:_._Y.DESIGN,currentPlan:u.F.Plan.STARTER,upsellPlan:u.F.Plan.PRO,upsellSource:n}})),(0,l.trackEvent)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[o,e,r,n])}function O(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,f.R)(),a=(0,o.k)().prototype_multi_path_paywall&&!e,l=(0,m.q5)(),c=(0,i.d4)(e=>l&&l.teamId?e.teams[l.teamId]:null),u=(0,s.md)(m.Hu),p=(0,y.sO)(),_=(0,d.ow)(),h=L(g.Bi.PROTOTYPING_MULTIPLE_ACTIONS,c),E=L(g.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,c),b=L(g.Bi.PROTOTYPING_VARIABLES,c),v=L(p?g.Bi.VIDEOS_IN_SLIDES:_?g.Bi.VIDEOS_IN_WHITEBOARD:g.Bi.VIDEOS_IN_PROTOTYPES,c);return{shouldShowAdvancedPrototypingPaywall:a,showAdvancedPrototypinglMultipleActionsModal:r?n:h,showAdvancedPrototypingConditionalActionsModal:r?n:E,showAdvancedPrototypingVariablesModal:r?n:b,showVideosModal:r&&!u?n:v}}[...C,...w,...N],[...w,...C,...N];var R=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e))(R||{});function P(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function D(){let e=(0,b.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,b.Ay)(e),a=P(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),i=r.length>1&&!n&&r[0].actions?.length===1&&P(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!a||n||i?0:1}},275210:(e,r,n)=>{n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var a=n(589776),i=n(513806);function o(e){let r=[],n=i.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),i=e?.keyCodes?.[0]??0,o=n?.get(i)??function(e){if(e>=a.c){let r=Math.floor((e-a.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(i);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},956783:(e,r,n)=>{n.d(r,{Ay:()=>y,HS:()=>E});var a=n(301168),i=n(430385),o=n(354427),s=n(186606),l=n(553547),c=n(989232),d=n(156845),u=n(303397),p=n(489082),m=n(355755),_=n(700436),h=n(273555),g=n(959219);function f(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function E(){let e=(0,a.d4)(w),r=new Set((0,a.d4)(N));return e.some(e=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?g.J.NORMAL:g.J.INHERITED_INTERNAL}function y(e,r){let n=(0,a.d4)(w),i=(0,a.d4)(C),o=e===g.J.INHERITED_INTERNAL?i:n,s=(0,a.d4)(N),E=new Set(s),y=new Set,T=[];o.forEach((e,n)=>{let a=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;if(a&&E.has(a)){y.add(n);let a={...e};a.actions&&r&&(a.actions=a.actions.filter(e=>"NONE"!==e.connectionType)),T.push(a)}});let L=T.map(e=>e.actions?.length).some(e=>e!==T[0].actions?.length),O=(0===T.length?[]:T[0].actions||[]).map(e=>({...e})),R=(0,m.eY)();if(!L)for(var P=0;P<T.length;P++){let e=T[P].actions||[];for(var D=0;D<e.length;D++){let r=O[D],n=e[D];for(let e in n)r[e]?v(n,r,e,R)||(r[e]=p.oV):r[e]=n[e]}}let k=r=>(function a(s){let l=function(...a){let[l,d]=a,m=!1,_=[],f=[];for(let e in l)(0,p.gl)(B[e])?(m=!0,_.push(e)):f.push(e);let{changes:E,eventChanges:b,actionChanges:v,interactionChanges:T}=function(e){let r={},n={},a={},i={};for(let o in e)S.has(o)?a[o]=e[o]:I.has(o)?n[o]=e[o]:A.has(o)?i[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:a,interactionChanges:i}}(l),w=[];o.forEach((e,n)=>{if(y.has(n)){let n={...e.event,...b},a=[],i=e.actions||[];for(let e=0;e<i.length;e++)if(e===r){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var a={condition:c.condition,actions:[]},i=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?i.push({...d[e],...n}):i.push({...d[e]});a.actions=i,o[l]=a,e.conditionalActions=o}return{newPrototypeAction:e}}(i[e],s,v);a[e]=r}else a.push({...i[e],...v})}else a.push({...i[e]});r>=a.length&&a.push({...v}),w.push({...e,...T,event:n,actions:a})}else w.push(e)}),(0,c.trackEvent)("prototype_update_selection_properties",{mixedUpdate:m,mixedUpdatedProperties:_,nonMixedUpdatedProperties:f,num_connector:y.size,category:e}),e===g.J.NORMAL?w=[...w,...i]:e===g.J.INHERITED_INTERNAL&&(w=[...n,...w]),E.prototypeInteractions=w,u.Y5.updateSelectionProperties(E,{shouldCommit:d?.shouldCommit||h.zk.YES,overwrite:d?.overwrite})};return l.appendActionIndex=function(e){return a([...s,e])},l})([r]),M=e=>e&&null!=e.actions?e.actions[0]:null,F=e=>{let r=M(e);if(null==r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},x=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},U=(e,r)=>{if(null==r||void 0===r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},B=function(e,r){let n={},a={};for(let i of e){if(!i||!i.event)continue;for(let e in i.event)n[e]?b(i.event,n,e)||(n[e]=p.oV):n[e]=i.event[e];let e=i.actions&&{...i.actions[0]};if(e)for(let n in e)a[n]?v(e,a,n,r)||(a[n]=p.oV):a[n]=e[n]}return{...n,...a}}(T,R),G=function(e,r){let n={},a=[{}];for(let o of e){if(!o||!o.event)continue;for(let e in o.event)n[e]?b(o.event,n,e)||(n[e]=p.oV):n[e]=o.event[e];if(!o.actions)continue;let e=o.actions;var i=0;for(let n of e){for(let e in n){i>a.length-1&&a.push({});let o=a[i];o[e]?v(n,o,e,r)||(o[e]=p.oV):o[e]=n[e]}i++}}return{interactionEvent:n,interactionActions:a}}(T,R),V=new Set(s.map(e=>{let r=d.s(e);return r?l.dI(r.nodeID):""}).filter(e=>""!==e)),H=o.filter(e=>e.sourceNodeID&&V.has(l.dI(e.sourceNodeID)));var z=[...H];let K=function(){let e=(0,a.d4)(C);return Object.keys((0,a.d4)(_.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=f(r.event);n.has(e)||n.set(e,[]);let a=n.get(e);a&&a.push(r)}for(let[e,a]of n)a&&a.length>0&&a[0].event&&r.push({key:e,event:a[0].event,interactions:a});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:f(n.event),event:n.event,interactions:[n]});return r}(e)}();if(K.length>0)for(var P=0;P<K.length;P++){let e=K[P];for(var W=0;W<e.interactions.length;W++){let r=e.interactions[W];z.find(e=>e.id===r.id)||z.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:k,updateSelectionProperties:k(0),makeUpdateMultipleDestinationNodesForActionIndex:r=>(function r(a){let s=function(r,s,c){let d={},p=[];o.forEach(e=>{let n=x(e,a),i=U(e,n);if(n&&i&&-1!==Object.keys(r).indexOf(i)&&l.sH(r[i])){let d=l.sH(r[i]);if(d){if(!e.actions)return;var o=[];let r=a[0];if(n){if(a.length>2){let n=e.actions[r],i=a[1];if(n.conditionalActions){let r=n.conditionalActions[i],l=a[2],u=n.conditionalActions;var s={condition:n.conditionalActions[i].condition,actions:[]};if(r.actions){let p={...r.actions[l],transitionNodeID:d};var c=[...r.actions];c.splice(l,1,p),s.actions=c,u[i]=s,n.conditionalActions=u,(o=[...e.actions]).splice(a[0],1,n)}}}else{let r={...e.actions[a[0]],transitionNodeID:d};(o=[...e.actions]).splice(a[0],1,r)}p.push({...e,actions:o})}}}else p.push(e)}),e===g.J.NORMAL?p=[...p,...i]:e===g.J.INHERITED_INTERNAL&&(p=[...n,...p]),d.prototypeInteractions=p,u.Y5.updateSelectionProperties(d,{shouldCommit:s,overwrite:c})};return s.appendActionIndex=function(e){return r([...a,e])},s.updateMultipleDestinationNodes=function(e,r,n){return s},s})([r]),updateMultipleDestinationNodes:(r,a,s)=>{let c={},d=[];o.forEach(e=>{let n=F(e);if(n&&-1!==Object.keys(r).indexOf(n)&&l.sH(r[n])){let a=l.sH(r[n]);if(a){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let n={...e.actions[r],transitionNodeID:a},i=[...e.actions];i.splice(r,1,n),d.push({...e,actions:i})}}}else d.push(e)}),e===g.J.NORMAL?d=[...d,...i]:e===g.J.INHERITED_INTERNAL&&(d=[...n,...d]),c.prototypeInteractions=d,u.Y5.updateSelectionProperties(c,{shouldCommit:a,overwrite:s})},detailPropsMultipleActions:G,detailProps:B,interactionsOnSelectedNode:H,interactionsOnSelectedNodesAndComponents:z,selectedInteractions:T,mergedActions:O,differentLengthActions:L,selectedNoodleIds:s}}function b(e,r,n){if("keyTrigger"===n){let a=e[n],o=(0,p._W)(r[n],void 0);return(0,i.lu)(a?.keyCodes||[],o?.keyCodes||[])&&a?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function v(e,r,n,a){switch(n){case"transitionNodeID":let i=e[n],c=(0,p._W)(r[n],void 0);return l.aI(i,c);case"targetVariable":let d=e[n],u=r[n];if(!d&&!u)return!0;if(d&&u){if("id"in d&&"id"in u)return d.id===u.id;if("nodeFieldAlias"in d&&"nodeFieldAlias"in u){let e=d.nodeFieldAlias.stablePathToNode,r=u.nodeFieldAlias.stablePathToNode,n=e&&1===e.length?a.get(e[0]):null,i=r&&1===r.length?a.get(r[0]):null;if(n&&i&&n.isState&&i.isState&&n.containingStateGroupId===i.containingStateGroupId)return s.Egt.getExplicitPropDefIDBinding(n.guid,d.nodeFieldAlias.indexOrKey)===s.Egt.getExplicitPropDefIDBinding(i.guid,u.nodeFieldAlias.indexOrKey);return(0,o.c2)(d.nodeFieldAlias,u.nodeFieldAlias)}}return!1;case"overlayRelativePosition":let m=e[n],_=(0,p._W)(r[n],void 0);return m?.x===_?.x&&m?.y===_?.y;case"easingType":let h=e[n],f=(0,p._W)(r[n],void 0);if("CUSTOM_CUBIC"!==h||"CUSTOM_CUBIC"!==f)return h===f;return T((0,p._W)(e.easingFunction,void 0),(0,p._W)(r.easingFunction,void 0));case"easingFunction":return T(e[n],(0,p._W)(r[n],void 0));case"extraScrollOffset":let E=e[n],y=(0,p._W)(r[n],void 0);return E?.x===y?.x&&E?.y===y?.y;case"targetVariableData":return(0,g.j)(e[n],r[n],a);case"conditionalActions":let b=e[n],I=r[n];if(!(0,p.hS)(I))return!1;if(!(b&&I&&2===b.length&&2===I.length&&b[0]?.condition&&I[0]?.condition&&b[0]?.actions&&I[0]?.actions&&b[1]?.actions&&I[1]?.actions))return(0,o.c2)(e[n],r[n]);{let e=(0,g.j)(b[0].condition,I[0].condition,a),r=(e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)for(let i in e[n])if(!v(e[n],r[n],i,a))return!1;return!0},n=b[0].actions,i=I[0].actions,o=n&&i&&r(n,i),s=b[1].actions,l=I[1].actions,c=s&&l&&r(s,l);return e&&o&&c}default:return e[n]===r[n]}}function T(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let I=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),S=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),A=new Set(["stateManagementVersion"]);function w(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function C(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function N(e){return e.mirror.appModel.selectedInteractions}},801296:(e,r,n)=>{n.d(r,{PR:()=>s});var a=n(553547);let i=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return a.dI(e)??a.dI(a.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){i.recordInteractionUpgraded(a.sH(e),a.sH(r))}}function s(){new o}},614892:(e,r,n)=>{n.d(r,{$4:()=>b,Id:()=>h,JU:()=>S,K0:()=>p.K0,UZ:()=>w,YW:()=>p.YW,Zk:()=>g,fI:()=>E,hl:()=>y,jT:()=>T,ks:()=>I,nV:()=>A,zi:()=>f});var a=n(848318),i=n(536384),o=n.n(i),s=n(979890),l=n(439382);n(720522);var c=n(146859);n(17753);var d=n(856662),u=n(973219),p=n(16808);let m=(e,r)=>({...e,className:`${r} ${e.className||""}`});function _(e){let r=a.useMemo(()=>(0,d.v)(e,"ModalPanel"),[e]);return a.createElement(s.D8,{...m(r,u.a2),"data-non-interactive":!0})}function h(e){return a.createElement(_,{...e})}let g=a.forwardRef(function(e,r){return a.createElement(s.D8,{...(0,d.v)(m(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})}),f=(0,a.forwardRef)((e,r)=>a.createElement(s.D8,{...(0,d.v)(m(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})),E=(0,a.forwardRef)(function({selected:e,selectedSecondary:r,heightMultiplier:n,...i},o){let l;let c=r?u.kR:e?u.CZ:null;return l=2===n?u.X0:1.25===n?u.ht:1.5===n?u.LE:u.l$,c&&(l+=" "+c),a.createElement(s.D8,{...m(i,l),"data-non-interactive":!0,forwardedRef:o})});function y(e){return a.createElement(s.D8,{...m(e,u.Zz),"data-non-interactive":!0})}function b({...e}){return a.createElement("div",{...m(e,u.DS),dir:"auto"})}function v({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:a,softDisabled:i,className:s,...l}){return e&&(s+=` ${u.Z4}`),r&&(s+=` ${u.O1}`),n||(s+=` ${u.PQ}`),a&&(s+=` ${u.LJ}`),i&&(s+=` ${u.EA}`),Object.assign(l,{className:o()(u._Z,s)})}let T=a.forwardRef(function(e,r){let n=v(e);return a.createElement(s.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class I extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,c.jr)(e,c.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=v(this.props);return a.createElement(l.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function S({disabled:e,...r}){return a.createElement("label",{...m(r,e?u.fR:u.Pf),dir:"auto"})}function A(e){return a.createElement("label",{...m(e,u.fR)})}function w(e){return a.createElement("label",{...m(e,u.wh)})}I.displayName="TextInput",a.forwardRef((e,r)=>{let{className:n,...i}=v(e);return a.createElement(s.D8,{...i,className:o()(n,u.PB),forwardedRef:r,tabIndex:0})})},254320:(e,r,n)=>{var a=n(848318),i=n(593189),o=n(536384),s=n.n(o),l=n(978877),c=n(971536),d=n(238462),u=n(781239),p=n(696786),m=n(841479);let _=(0,a.createContext)(()=>null),h=(0,a.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:i,unsetSizeWhenDisabled:o,onResize:s,onDragStart:d,onDragEnd:u,side:p,children:m,recordingKey:h,style:f,...E},y){let b=(0,c.M)(y),v=(0,a.useCallback)(()=>b.current,[b]),T=(0,a.useRef)(0),I=(0,a.useRef)(0),S="left"===p||"top"===p?-1:1,A=a.createElement(_.Provider,{value:v},m,i?null:a.createElement(g,{recordingKey:h,side:p,onDragStart:()=>{void 0===e||(I.current=e,T.current||(T.current=e)),d?.()},onDrag:e=>{let r="bottom"===p||"top"===p?e.delta.y:e.delta.x;s(I.current+r*S)},onDragEnd:()=>{u?.()},onDoubleClick:()=>{s(r??T.current)}})),w=i&&o?void 0:e,C="left"===p||"right"===p?w:void 0,N="bottom"===p||"top"===p?w:void 0,L=f?{...f,width:C,height:N}:{width:C,height:N};return n?a.createElement(l.P.div,{style:L,...E,ref:b,...n},A):a.createElement("div",{style:L,...E,ref:b},A)});function g({side:e,onDoubleClick:r,onDragStart:n,onDrag:o,onDragEnd:l,recordingKey:c}){let[,p]=(0,i.i)({onDragStart:n,onDrag:o,onDragEnd:l}),_=p({className:s()({[m.horizontalHandle]:"left"===e||"right"===e,[m.verticalHandle]:"bottom"===e||"top"===e,[m[e]]:!0}),onDoubleClick:r}),h={includeTarget:!0,recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})},g={onPointerDown:(0,u.BV)(c,"pointerdown",_.onPointerDown??d.lQ,h),onPointerMove:(0,u.BV)(c,"pointermove",_.onPointerMove??d.lQ,h),onPointerUp:(0,u.BV)(c,"pointerup",_.onPointerUp??d.lQ,h)};return a.createElement("div",{"data-testid":c,role:"separator","aria-hidden":!0,..._,...g})}(0,a.forwardRef)(function(e,r){let n=(0,p.GS)(),{size:i,defaultSize:o,animation:s,disableResizing:l,onResize:c,side:d,recordingKey:u,children:m,..._}=e;return n?a.createElement(h,{...e,ref:r}):a.createElement("div",{..._,ref:r},m)})},112091:(e,r,n)=>{n.d(r,{Yq:()=>s,sH:()=>i,sI:()=>a}),n(186606).eVK.MIDDLE_CENTER;let a=.01,i=100;var o=(e=>(e.TextInput="text-input",e.Selector="selector",e))(o||{}),s=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(s||{})},931044:(e,r,n)=>{n(848318),n(301168),n(186606),n(536384),n(971536),n(781239),n(959750),n(963307),n(788903),n(511067),n(273555),n(17753),n(232958),n(620512),n(419756),n(985789),n(346288),n(720522),n(120846),n(103392),n(100987)},260523:(e,r,n)=>{n(848318),n(301168),n(19180),n(996202),n(563029),n(489082),n(963307),n(355755),n(209595),n(614092),n(700436),n(273555),n(21614),n(103392)},103392:(e,r,n)=>{n.d(r,{rO:()=>D}),n(848318),n(301168),n(660376);var a=n(839259),i=n(387726),o=n(831861),s=n(952719),l=n(152608),c=n(536074),d=n(374211),u=(n(186606),n(320953));n(768618),n(19180);var p=n(382902);n(349048),n(996202),n(813009),n(967688);var m=n(372566);n(303397),n(959750),n(489082);var _=n(939019);n(963307),n(574422),n(614092),n(700436),n(273555);var h=n(975852),g=n(549639),f=n(181039),E=n(358268),y=n(873514),b=n(402269),v=n(831825),T=n(877366),I=n(772622),S=n(968945),A=n(198130),w=n(926340),C=n(643393),N=n(723790),L=n(475245),O=n(397854),R=n(288327),P=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(P||{});function D(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}O.A,L.A,w.A,N.A,R.A,C.A,A.A,a.z,i.M,o.v,s.R,l.K,c.y,d.z,v.A,T.A,f.A,E.A,y.A,b.A,h.A,g.A,S.A,S.A,I.A,I.A;class k extends _.M{getValueForNode(e){return D(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){D(e.stackPrimaryAlignItems)||e.stackSpacing===r||u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new k;class M extends _.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){e.stackCounterSpacing!==r&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new M,m.Lk,m.Lk,(0,p.M2)((0,p.eU)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,p.M2)((0,p.eU)(null)),(0,p.M2)((0,p.eU)(null));var F=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(F||{})},169660:(e,r,n)=>{n.d(r,{gm:()=>s,pW:()=>o});var a=n(848318);n(301168),n(186606),n(320953),n(536384),n(720522),n(401970),n(967688),n(696786),n(303397),n(959750),n(489082),n(963307),n(574422),n(273555),n(17753),n(232958),n(529865),n(213832),n(120846),n(465548),n(931044),n(260523),n(103392);var i=n(960598);function o({OriginalComponent:e,...r}){return a.createElement(e,{...r,inputClassName:i.be,iconClassName:i.Kk})}function s({OriginalComponent:e,...r}){return a.createElement(e,{...r,outerClassName:i.kk,pillsContainerClassName:i.j1})}},759165:(e,r,n)=>{n.d(r,{aV:()=>p,oE:()=>m});var a=n(848318),i=n(536070);n(186606);var o=n(536384),s=n.n(o);n(813009);var l=n(401970);n(967688);var c=n(696786);n(702038),n(177345),n(739321);var d=n(689119),u=n(316388);function p({title:e,children:r,flushWithContainer:n,appendedClassName:o}){let p=(0,c.GS)();return a.createElement("div",{className:s()(n?d.jO:d.lG,o)},a.createElement("div",{className:d.Z7},a.createElement(l.U,{className:d.Ev,svg:u.A},a.createElement(i.r,null)),!p&&e),a.createElement("div",{className:d.t},p&&!!e&&a.createElement("div",{className:d.Qb},e),r))}function m({title:e,children:r,closeButton:n}){let o=(0,c.GS)();return a.createElement("div",{className:d.Vf},a.createElement("div",{className:d.Ii},a.createElement("div",{className:d.Z7},a.createElement(l.U,{className:d.Ev,svg:u.A},a.createElement(i.r,null)),!o&&e),n),a.createElement("div",{className:d.t},o&&!!e&&a.createElement("div",{className:d.Qb},e),r))}},177345:(e,r,n)=>{n.d(r,{NA:()=>u,OC:()=>p,ow:()=>m});var a=n(186606),i=n(38542),o=n(640483),s=n(730143),l=n(739321);function c(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function d(e){let r=c(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}function u(e){let r=c(e);return r&&r.mode!==a.iCO.NONE&&r.mode!==a.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}(0,i.Zm)(function(e){return d(e)?.stateGroupError});let p=(0,i.Zm)(function(e){return d(e)?.propertySortOrder}),m=(0,i.P8)([c,s.sS,s.XJ,o.im],(e,r,n,i)=>e&&e.mode!==a.iCO.NONE&&e.mode!==a.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,l.dq)(e,r,n,i)):null),_=(0,i.P8)([c,s.sS,s.XJ,o.im],(e,r,n,i)=>e&&(e.mode===a.iCO.STATE||e.mode===a.iCO.STATE_INSTANCE||e.mode===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,l.dq)(e,r,n,i)):null);(0,i.P8)([_,function(e){return c(e)?.mode},d],(e,r,n)=>e&&n&&(r===a.iCO.STATE||r===a.iCO.STATE_INSTANCE||r===a.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,l.m4)(e,n.propertySortOrder||[]):null)},739321:(e,r,n)=>{n.d(r,{NE:()=>b,O4:()=>v,QV:()=>g,dq:()=>E,m4:()=>h,uL:()=>y,xJ:()=>m,zb:()=>f,zh:()=>_});var a=n(848318);n(301168);var i=n(186606),o=n(562027),s=n(925040),l=n(989232),c=n(640483);n(303397),n(702038);var d=n(489082),u=n(730143),p=n(277454);let m="\u2014";function _(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function h(e,r,n){let a={};for(let i of e){if(void 0!==i.actionIndexPath&&void 0!==n&&i.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=i.stateInfo;if(e)for(let n of r)n in a&&a[n]!==e[n]?a[n]=a[n]&&e[n]?d.oV:"":a[n]=e[n]||""}return a}function g(e){return e.replace(/[,=]/g,"").trim()}function f(e,r,n){let a=i.glU.getStateGroupAnalyticsInfo(r);(0,l.trackEvent)(e,{...a,...n||{}})}function E(e,r,n,a){return{stateInfo:e.stateInfo,symbol:(0,p.i_)(null,null,e.symbol,r||"",n||(0,o.l)(""),a),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}a.createContext(null);let y=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,u.sS,u.XJ,c.im],function(e,r,n,a,o){if(!e)return null;let s=e.mode;if(s===i.iCO.NONE)return null;if(s===i.iCO.NON_STATE_COMPONENTS)return{mode:s,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let l=e.stateGroup,c=e.stateGroupModel,d=c?.propertySortOrder?.length===1,u=e.allStates.map(e=>E(e,r,n,a));if(s===i.iCO.STATE_GROUP)return{mode:s,stateGroup:l,stateGroupModel:c,allStates:u,modelIsOneDimensional:d};let p=e.selectedStates.map(e=>E(e,r,n,a)),m=h(p,c.propertySortOrder||[],o);return i.iCO.STATE,{mode:s,stateGroup:l,stateGroupModel:c,allStates:u,modelIsOneDimensional:d,selectedStates:p,selectedStatesPropertyValues:m}}),b=[["yes","no"],["true","false"],["on","off"]],v=b.reduce((e,r)=>e.concat(r),[])},29002:(e,r,n)=>{n.d(r,{Bu:()=>x,Gx:()=>V,Kt:()=>U,Lk:()=>D,T6:()=>G,UH:()=>H,W:()=>P,vE:()=>C});var a=n(848318),i=n(186606),o=n(553547),s=n(768618),l=n(19180),c=n(382902),d=n(805353),u=n.n(d),p=n(128080),m=n.n(p),_=n(989232),h=n(476254),g=n(480960),f=n(615233),E=n(238462),y=n(910314),b=n(353231),v=n(489082),T=n(963307),I=n(4881),S=n(614092),A=n(42407);let w="Current",C=(0,c.eU)([]),N=(0,c.eU)({}),L=(0,c.Iz)(e=>(0,c.eU)(r=>r(N)[e]??void 0,(r,n,a)=>{n(N,r=>({...r,[e]:a}))})),O=(0,c.eU)({}),R=(0,c.Iz)(e=>(0,c.eU)(r=>r(O)[e]??void 0,(r,n,a)=>{n(O,r=>({...r,[e]:a}))}));function P(e){let r=L(e);return(0,c.md)(r)}let D={guid:o.AD,name:"Solid",type:i.plo.STRETCH,sizeX:0,sizeY:0,isSoftDeleted:!1};function k({guid:e,sizeX:r,sizeY:n,upSample:a}){if(!i.Vzr)return;let[o,s]=i.Vzr.generateThumbnailForNode(e,r*a,n*a,a,{useAbsoluteBounds:!0});return URL.createObjectURL(new Blob([s],{type:"image/png"}))}let M=e=>{let r=k({...e,upSample:2});r&&c.zl.set(L(e.previewName),r)},F=e=>{if(!i.Vzr)return;let{guid:r,previewName:n,config:a,optionIndexForMenu:o}=e,s=k({...e,upSample:2});s&&c.zl.set(R(n),{name:n,imageUrl:s,config:a,optionIndexForMenu:o,guid:r})};function x(){return(0,S.wA)(e=>{let r=e.getInternalCanvas();return r&&(0,g.m)().ce_il_strokes?r.childrenNodes.filter(e=>"BRUSH"===e.type&&(e.brushType!==i.plo.SCATTER||(0,g.m)().ce_il_scatter)).map(e=>{let r={guid:e.guid,name:e.name,sizeX:e.size.x,sizeY:e.size.y,isSoftDeleted:e.isSoftDeleted};return e.brushType===i.plo.SCATTER?{...r,type:i.plo.SCATTER,settings:e.scatterStrokeSettings}:{...r,type:i.plo.STRETCH}}):[]})}function U(){let e=x(),r=(0,v.C8)((0,T.Gt)("strokeBrushGuid")).map(e=>o.dI(e)),n=e.filter(e=>r.includes(e.guid));return 0===n.length?null:n.every(e=>e.type===i.plo.SCATTER)?i.plo.SCATTER:n.every(e=>e.type===i.plo.STRETCH)?i.plo.STRETCH:null}let B=(0,l.k)().ce_il_pencil_stroke_presets?function(){let[e,r]=(0,c.fp)(O),n=e[w]?.config,i=c.md(y.GI)?.dynamicStrokeSettings,o=(0,a.useMemo)(()=>u()(r,500,{trailing:!0}),[r]);(0,a.useEffect)(()=>{!i||m()(i,n)||o(e=>{let r=e[w];if(!r)return e;let{guid:n}=r,a=(0,s.UN)().get(n);if(!a)return e;let i=16/a.size.y,o=k({guid:a.guid,sizeX:a.size.x,sizeY:a.size.y,upSample:2*i});return o?{...e,[w]:{...r,imageUrl:o,config:a.dynamicStrokeSettings}}:e})},[i,n,o])}:E.lQ,G=(0,I.Wh)(()=>(0,c.eU)(null));function V(){let e=(0,S.Fk)(e=>!!e.getInternalCanvas()),[r,n]=(0,c.fp)(C),[d,u]=(0,c.fp)(G),p=x(),m=(0,a.useMemo)(()=>p.filter(e=>!e.isSoftDeleted&&r.includes(e.guid)&&e.guid!==o.AD),[r,p]),_=(0,c.Xr)(y.Vi);(0,a.useEffect)(()=>{if(m.length&&!d){let e=m.filter(e=>e.type===i.plo.STRETCH),r=o.sH(e[0]?.guid);r&&u(r)}},[d,m,u]),(0,a.useEffect)(()=>{if(!(0,g.m)().ce_il_strokes||!e||m.length)return;let r=[{type:i.plo.STRETCH,resourceString:"a3480b63cd4ac2a8976c8a48aaa5b88a88810ce3"}];(0,l.k)().ce_il_scatter&&r.push({type:i.plo.SCATTER,resourceString:"3ffada8f593e3755bf1920e37ad656804aa53250"}),Promise.all(r.map(({resourceString:e,type:r})=>fetch((0,f.ck)(e)).then(e=>e.arrayBuffer()).then(e=>{if(i.glU)return i.glU.insertBrushesFromBuffer(new Uint8Array(e),r)}).catch(()=>[]))).then(([e=[],r=[]])=>{let a=o.sH(e[0]);a&&(u(a),_(e=>({...e,strokeBrushGuid:a}))),n([...e,...r])})},[_,n,m,e,u]),function(){let e=x(),r=(0,s.UN)();B();let n=(0,a.useMemo)(()=>e.filter(e=>!e.isSoftDeleted),[e]),[l]=(0,A.iM)(y.Vi,"strokeBrushGuid"),d=(0,v.E7)(l);(0,a.useEffect)(()=>{if(!(0,g.m)().ce_il_strokes||!i.glU)return;let e=i.glU.generatePreviewNodesForDrawStrokes();r.getInternalCanvas()&&["pencils","brushes"].forEach(n=>{let a=e[n],i="pencils"===n,s=i?R:L;a.forEach((e,n)=>{let a=r.get(e);if(!a)return;let l=function(e){let r=/(brush|pencil)_preview_(.+)/.exec(e.name);return r?r[2]:null}(a);if(!l)return;let u=s(l);if(c.zl.get(u))return;let p={guid:a.guid,previewName:l,sizeX:a.size.x,sizeY:a.size.y};!i&&d&&a.strokeBrushGuid===o.dI(d)?M(p):i?setTimeout(()=>F({...p,config:a.dynamicStrokeSettings,optionIndexForMenu:n}),0):setTimeout(()=>M(p),0)})})},[n,r,d])}()}function H(e,r){_.definedAnalyticsHandler.trackDefinedEvent("illustration.set_brush",{brushGuid:e?.guid||"-1:-1",brushName:e?.name||"",numNodes:r.length,productType:(0,b.Dc)(h.D.getState().selectedView.editorType)})}},659380:(e,r,n)=>{n.d(r,{CL:()=>f,Qd:()=>y,Vb:()=>v,hl:()=>T,i:()=>S,tB:()=>E,xI:()=>A});var a=n(848318),i=n(660376),o=n(376852),s=n(320953),l=n(553547);n(382902);var c=n(967688),d=n(489082),u=n(939019),p=n(963307),m=n(42407),_=n(464558);let h=e=>!!e&&e!==l.dI(_.lN.strokeBrushGuid),g=e=>{let{frequency:r,wiggle:n,smoothen:a}=_.lF;return!(("frequency"in e?e.frequency===r:"interval"in e?e.interval===r:i.xb)&&e.wiggle===n&&e.smoothen===a)};function f(){let e=(0,d.C8)((0,p.Gt)("strokeBrushGuid")),r=(0,d.C8)((0,p.Gt)("dynamicStrokeSettings"));return e.length>0&&e.every(e=>h(l.dI(e)))?"Brush":r.length>0&&r.every(e=>e&&g(e))?"Dynamic":e.some(e=>h(l.dI(e)))||r.some(e=>e&&g(e))?d.oV:"Basic"}function E(){return(0,d.C8)((0,p.Gt)("strokeBrushGuid")).every(e=>!h(l.dI(e)))}function y(){return(0,d.C8)((0,p.Gt)("dynamicStrokeSettings")).every(e=>!e||!g(e))}let b={gap:()=>(0,c.t)("fullscreen.properties_panel.gap"),wiggle:()=>(0,c.t)("fullscreen.properties_panel.wiggle"),sizeJitter:()=>(0,c.t)("fullscreen.properties_panel.size_jitter"),angularJitter:()=>(0,c.t)("fullscreen.properties_panel.angular_jitter"),rotation:()=>(0,c.t)("fullscreen.properties_panel.transform_panel.rotation")};function v(e,r){let[n,i]=(0,m.iM)(r,"scatterStrokeSettings"),s=_.F2[e],l=(0,d.gl)(n)?d.oV:n?.[e]??s,{min:c,max:u,sliderMax:p}=_.QE[e];return{value:l,setValue:(0,a.useCallback)(r=>{(0,d.hS)(n)&&i({...n,[e]:(0,o.qE)(r,c,u)})},[n,i,e,c,u]),min:c,max:u,sliderMax:p,getLabel:b[e]}}function T(e){let[r,n]=(0,m.iM)(e,"stretchStrokeSettings"),i=_.Ge.orientation;return{orientation:(0,d.gl)(r)?d.oV:r?.orientation??i,setOrientation:(0,a.useCallback)(e=>{n({...r,orientation:e})},[r,n])}}let I={frequency:()=>(0,c.t)("fullscreen.properties_panel.interval"),wiggle:()=>(0,c.t)("fullscreen.properties_panel.wiggle"),smoothen:()=>(0,c.t)("fullscreen.properties_panel.smoothen")};function S(e,r){let{value:n,setValue:a}=(0,m.XT)(r,e),{min:i,max:o,sliderMax:s}=_.dg[e];return{value:n,setValue:a,min:i,max:o,sliderMax:s,mixedMathHandler:new A("frequency"===e?"interval":e),getLabel:I[e]}}class A extends u.M{constructor(e){super(),this.key=e}getValueForNode(e){return e.dynamicStrokeSettings[this.key]}setValueForNode(e,r){s.l7.user(`set-${this.key}`,()=>{Number.isNaN(r)||(e.dynamicStrokeSettings={...e.dynamicStrokeSettings,[this.key]:(0,o.qE)(r,_.dg[this.key].min,_.dg[this.key].max)})})}}},29122:(e,r,n)=>{n.d(r,{P6:()=>l,Xb:()=>o,ac:()=>s,f3:()=>c});var a=n(77869);let i={isDisaggregated:"borderStrokeWeightsIndependent",disaggregatedValues:["borderTopWeight","borderRightWeight","borderBottomWeight","borderLeftWeight"],aggregatedValue:"strokeWeight"};new a.x({...i});let o=new a.l({...i,key:"borderTopWeight"}),s=new a.l({...i,key:"borderRightWeight"}),l=new a.l({...i,key:"borderBottomWeight"}),c=new a.l({...i,key:"borderLeftWeight"})},886347:(e,r,n)=>{n.d(r,{D:()=>N});var a=n(848318),i=n(559389);n(354427);var o=n(23207),s=n(544405),l=n(952647),c=n(186606),d=n(536384),u=n.n(d),p=n(989232),m=n(476254),_=n(967688),h=n(506428),g=n(353231),f=n(489082),E=n(963307),y=n(273555),b=n(17753),v=n(337145),T=n(967744),I=n(29002),S=n(320660);function A(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n].position!==r[n].position||e[n].ascent!==r[n].ascent||e[n].descent!==r[n].descent)return!1;return!0}let w={UNIFORM:{controlPoints:[],classNames:[S.Pi]},WEDGE:{controlPoints:[{position:0,ascent:.5,descent:.5},{position:1,ascent:0,descent:0}],classNames:[S.JF,S.qU]},TAPER:{controlPoints:[{position:0,ascent:.5,descent:.5},{position:1,ascent:.1875,descent:.1875}],classNames:[S.TR,S.qU]},QUARTER_TAPER:{controlPoints:[{position:0,ascent:.1875,descent:.1875},{position:.25,ascent:.5,descent:.5},{position:1,ascent:.1875,descent:.1875}],classNames:[S.dF,S.qU]},EYE:{controlPoints:[{position:0,ascent:0,descent:0},{position:.5,ascent:.5,descent:.5},{position:1,ascent:0,descent:0}],classNames:[S.y5,S.qU]},LENS:{controlPoints:[{position:0,ascent:.1875,descent:.1875},{position:.5,ascent:.5,descent:.5},{position:1,ascent:.1875,descent:.1875}],classNames:[S.hq,S.qU]}};function C(e){return a.createElement("div",{className:u()(S.UA,...e.profileClassNames,{[S.LI]:e.roundEndcaps,[S.lc]:e.darkBackground,[S.r9]:e.disabled})})}function N(e){let r=!(0,v.il)(),n=(0,v.X7)(),d=(0,I.Kt)(),[u,N]=(0,E.lJ)("variableWidthPoints"),L=function(e){let r=e??[];if((0,f.gl)(r))return"MIXED";for(let[e,n]of Object.entries(w)){if(A(r,n.controlPoints)||A(r,n.controlPoints.map(e=>({...e,position:1-(e.position??0)})).reverse()))return e}return"CUSTOM"}(u),O=(0,E.kl)("strokeCap"),R="dark"===(0,h.DP)(),P=a.useMemo(()=>Object.entries(w).map(([e,n])=>a.createElement(o.c$,{key:e,value:e},a.createElement(l.J,{mode:"dark"},a.createElement(C,{roundEndcaps:"ROUND"===O,profileClassNames:[...n.classNames,S.uK],darkBackground:!0,disabled:r})))),[O,r]),{valueBeforePreview:D,updatePreview:k,onSubmit:M,clearPreview:F}=(0,T.g)({id:"width-profile-dropdown",property:L,onChange:(r,n=y.zk.YES)=>{if(!r||"CUSTOM"===r||"MIXED"===r)return;let a=(0,g.Dc)(m.D.getState().selectedView.editorType),i=w[r];(n===y.zk.YES||n===y.zk.YES_FORCE_TRACKING_AS_EDIT)&&p.definedAnalyticsHandler.trackDefinedEvent("illustration.web_variable_width_stroke_profile_changed",{source:e.source,controlPointCount:i.controlPoints.length,productType:a,profileName:r,brushType:d===c.plo.SCATTER?"scatter":d===c.plo.STRETCH?"stretch":"none"}),i.controlPoints&&N(i.controlPoints,n)},enablePreview:"MIXED"!==L&&"CUSTOM"!==L}),x=(0,f.gl)(D)?"MIXED":D,U="MIXED"===L||"MIXED"===x,B="CUSTOM"===L||"CUSTOM"===x,G=x??L,V=(0,i.s)(e=>{if("MIXED"!==e&&"CUSTOM"!==e){if(!e&&x){k(x);return}k(e)}},50);return a.createElement(o.bL,{value:G,onChange:M,recordingKey:e.recordingKey,onSelectionChange:V,onOpenChange:e=>{D&&!e&&F()}},a.createElement(o.l9,{disabled:r,width:"fill",label:a.createElement(s.h,null,(0,_.tx)("fullscreen.properties_panel.width_profile.label")),htmlAttributes:{"data-tooltip":r?n:void 0,"data-tooltip-type":r?b.Ib.TEXT:void 0}},U?(0,_.t)("fullscreen.mixed"):B?(0,_.t)("fullscreen.properties_panel.width_profile.custom"):a.createElement(C,{roundEndcaps:"ROUND"===O,profileClassNames:w[L].classNames,darkBackground:R,disabled:r})),a.createElement(o.mc,null,B&&a.createElement(a.Fragment,null,a.createElement(o.c$,{key:"CUSTOM",value:"CUSTOM",disabled:!0},(0,_.tx)("fullscreen.properties_panel.width_profile.custom"))),U&&a.createElement(a.Fragment,null,a.createElement(o.c$,{key:"MIXED",value:"MIXED",disabled:!0},(0,_.tx)("fullscreen.mixed"))),...P))}},670549:(e,r,n)=>{n.d(r,{MM:()=>eq,UP:()=>eB});var a=n(848318),i=n(301168),o=n(360180),s=n(660376),l=n(871043),c=n(531788),d=n(353317),u=n(658029),p=n(143823),m=n(442393),_=n(651756),h=n(518016),g=n(990140),f=n(523152),E=n(186606),y=n(320953),b=n(553547),v=n(382902),T=n(989232),I=n(813009),S=n(857607),A=n(781239),w=n(454805),C=n(156974),N=n(561258),L=n(847240),O=n(401970),R=n(967688),P=n(6068),D=n(453370),k=n(244534),M=n(31898),F=n(375694),x=n(446244),U=n(67188),B=n(696786),G=n(360430),V=n(526867),H=n(413020),z=n(303397),K=n(489082),W=n(730143),j=n(152449),Y=n(277454),$=n(436999),q=n(720722),X=n(17753),J=n(764872),Z=n(882839),Q=n(432843),ee=n(263777),et=n(130768),er=n(175393),en=n(756672),ea=n(303010),ei=n(235033),eo=n(342878),es=n(371712),el=n(832431),ec=n(447071),ed=n(246164),eu=n(536384),ep=n.n(eu),em=n(297638),e_=n(431054),eh=n(389541),eg=n(992288),ef=n(963307),eE=n(511067),ey=n(180294),eb=n(555958),ev=n(474132),eT=n(574422),eI=n(700436),eS=n(16808),eA=n(888663),ew=n(348562),eC=n(334362),eN=n(821561),eL=n(476909);let eO=a.memo(function({dsStyle:e,recordingKey:r,fileIndex:n,hierarchyPathIndex:o,styleIndex:c,column:d,searchQuery:u,isSelected:p,initialFocusRef:m,isEditable:_=!0}){let h=(0,eE.Um)(),g=(0,i.wA)(),{setKeyboardNavigationElement:f,keyboardNavigationItem:y,isFauxFocused:b}=(0,N.M3)({path:null===d?[1,n,o,c]:[1,n,o,Math.floor(c/6)],column:d,id:e.isLocal?e.node_id:e.key}),v=a.useRef(null),T=e=>{v.current=e,f(e)},I=(0,ef.kl)("numTextStyleOverrides");a.useEffect(()=>{y&&m.current&&p&&!u&&(window.requestAnimationFrame(()=>{y.fauxFocus()}),m.current=!1)},[m,p,y,u]);let{selectStyle:S,showStyleContextMenu:w,showStyleDetails:C}=(0,l.sR)(a.useContext(el.G),"Must be inside <StylePickerActionsContext>"),L=(0,ee.bf)(e),O=a.useCallback(r=>{h&&g(D.oB()),r.stopPropagation(),0!==r.button||(0,e_.i)(r)||S(e)},[e,S,h,g]),P=a.useCallback(r=>{w(e,{x:r.clientX,y:r.clientY})},[e,w]),k=a.useCallback(()=>{let r=v.current?.getBoundingClientRect();r&&C(e,r,"styleListDoubleClick")},[e,C]),M=a.useCallback(r=>{r.stopPropagation();let n=v.current?.getBoundingClientRect();n&&C(e,n,"styleListClick")},[e,C]),F=(0,i.d4)(eI.Sh),x=a.useCallback(r=>{r.stopPropagation(),(0,s.KF)(null!=e.content_hash,"style does not have a hash");let n=e.isLocal?e.node_id:E.Pt4.getStyleNodeId(e.key,e.content_hash);eT.F.trackFromFullscreen("text_style_override_reverted",{node_ids:F}),E.Krs.clearOverridesOverTextStyleInSelection(n)},[e,F]),U=a.useContext(el.h),B=a.useCallback(()=>{!U&&y&&y.fauxFocus({preventScroll:!0})},[U,y]),G=a.useCallback(()=>{y&&y.fauxBlur()},[y]),H=a.useRef(null),z=H?H.current:null,W=!!z&&z.offsetWidth<z.scrollWidth,j="TEXT"===e.style_type&&void 0!==I&&((0,K.gl)(I)||I>0)&&p,Y=p&&!L?eC.zm:eC.Se,$=j?eC.x9:"";return null===d?a.createElement(ew.A,{ref:T,dsStyle:e,isFauxFocused:b,isSelected:p,onClick:O,onContextMenu:P,onDoubleClick:k,onMouseEnter:B,onMouseLeave:G,recordingKey:r,shouldShowTooltip:!!e.description||W},a.createElement("div",{ref:H,className:eC.UU},(0,eb.kH)(e.name)),"TEXT"===e.style_type&&e.meta?.style_thumbnail?.type==="TEXT"&&a.createElement("div",{className:eC.XC},(0,V.P$)(e.meta?.style_thumbnail)),j&&a.createElement(eS.K0,{className:eC.zm,recordingKey:A.Pt(r,"clearTextStyleOverridesButton"),"data-tooltip":(0,R.t)("design_systems.styles.clear_overrides_over_text_style"),"data-tooltip-type":X.Ib.TEXT,svg:eL.A,onClick:x,onMouseDown:e=>e.stopPropagation()}),_&&a.createElement(eS.YW,{className:`${Y} ${$}`,recordingKey:A.Pt(r,"editStyleButton"),"data-tooltip":(0,R.t)("design_systems.styles.edit_style"),"data-tooltip-type":X.Ib.TEXT,svg:eN.A,selected:L,onClick:M,onMouseDown:e=>e.stopPropagation()})):a.createElement(ew.h,{ref:T,dsStyle:e,isFauxFocused:b,isSelected:p,onClick:O,onContextMenu:P,onDoubleClick:k,onMouseEnter:B,onMouseLeave:G,recordingKey:r,size:eA.iL.Large})});function eR({style:e,data:{stylePickerListLayout:r,searchQuery:n,recordingKey:i,selectedStyleKey:o,items:l,initialFocusRef:c,isEditable:d},index:u}){let p=l[u],m=(0,ey.sZ)(),_=(0,ev.Oe)(m),h=(0,eh.fV)(p?.type===eo.b.LibraryName?p.libraryKey:void 0);if(p.type===eo.b.LibraryName){let r=_&&h;return a.createElement("div",{className:ep()(eC.IZ,r?eC.VK:void 0),style:(0,ec._l)(e,l,u)},p.name,r&&a.createElement("div",{className:em.s.inlineBlock.alignTop.pl4.$},a.createElement(eg.KP,{libraryKey:p?.libraryKey})))}return p.type===eo.b.HierarchyPathName?a.createElement("div",{className:eC.D$,style:(0,ec._l)(e,l,u)},p.name):p.type===eo.b.SlideThemeName?a.createElement("div",{className:eC.rP,style:(0,ec._l)(e,l,u)},a.createElement("div",{className:eC.C3},p.name),p.secondaryText&&a.createElement("div",{className:eC.Wn},p.secondaryText)):p.type===eo.b.StylesRow?a.createElement("div",{className:r?void 0:eC.qV,style:(0,ec._l)(e,l,u)},p.styles.map((e,s)=>{let l=!!o&&o===e.key,u=p.rowIndex*p.rowSize+s,m=`section.${e.library_key}`;return a.createElement(et.m3,{key:u,dsStyle:e,additionalClassName:em.s.flex.wFull.$},a.createElement(eO,{column:r?null:u%p.rowSize,dsStyle:e,fileIndex:p.fileIndex,hierarchyPathIndex:p.hierarchyPathIndex,initialFocusRef:c,isEditable:d,isSelected:l,recordingKey:A.Pt(i,"styleGrid",e.isLocal?"localStyleSection":m,e.name),searchQuery:n,styleIndex:u}))})):p.type===eo.b.Separator?a.createElement("div",{className:em.s.h16.flex.itemsCenter.$,style:(0,ec._l)(e,l,u)},a.createElement("div",{className:eC.me})):void(0,s.xb)(p)}var eP=n(623519),eD=n(773612),ek=n(346480),eM=n(951032),eF=n(954184),ex=n(546131);let eU=(0,P.f)();function eB({picker:e,recordingKey:r,onApplyStyle:n,initialPosition:o,minBottomMargin:s,hideCreateStyleButton:c,onCreateStyle:d,styleType:u,inheritStyleKey:p,inheritStyleID:m,stylePickerListLayout:_=!1,onToggleListLayout:h,overscanCount:g=5,hideBrowseLibraries:f=!1,hideLocalStyles:E=!1,customPickerTitle:y=""}){let b=(0,i.wA)(),v=(0,i.d4)(e=>e.modalShown),T=(0,ee.GC)(u),I=a.useMemo(()=>!!v&&v.type===q.cX,[v]),S=a.useRef(null),w=a.useCallback(()=>{S.current?.scrollTo(0)},[S]);(0,ee.hg)(u);let C=ed.WH(p,m,u)?.key??null,[N,L]=a.useState(""),O=!!N,P=!!O||_,D=(0,$.je)(),x=(0,ec.Kq)(),U=(0,ec.AH)(C,(0,K.E7)(m)),B=a.useRef(U),{status:G,items:V,height:H,initialOffset:z}=(0,ec.V0)(u,C,B.current,P,N,E?[]:void 0),W="loading"===G,X=a.useMemo(()=>V.some(e=>"STYLES_ROW"===e.type),[V]),J=!W&&!X,et=O&&!W&&!X,er=a.useRef(null),en=a.useCallback(e=>{er.current=e},[]);a.useEffect(()=>{N&&(w(),window.requestAnimationFrame(()=>{er.current?.getItemBelow()?.fauxFocus()}))},[w,N]);let ea=a.useCallback(()=>{er.current?.focus(),h?.()},[h]),ei=a.useCallback(()=>{b(k.Uv()),b(F.sw()),b(k.XE())},[b]),eo=a.useCallback(()=>{I?b(M.Ce()):b(M.to({type:Q.T,data:{initialTab:q.Wv.LIBRARIES,entrypoint:Z.r6.STYLES_MODAL_TEAM_LIBRARY_BUTTON}}))},[b,I]),es=(0,j.bO)(),el=a.useMemo(()=>U?.status!=="loaded"?null:eU(U.data),[U]),eu=(()=>{if(!C||!U||(0,l.uy)(el))return!1;let e=es[el];return e&&"loaded"!==e.status})(),ep=a.useRef(!0);return a.useEffect(()=>{N||ep.current||null==z||(S.current?.scrollTo(z),ep.current=!0)},[z,N]),a.createElement(ez,{customPickerTitle:y,hideCreateStyleButton:c,initialPosition:o,isLoading:W,isSearching:O,minBottomMargin:s,onApplyStyle:n,onBrowseLibrariesButtonClick:eo,onCreateStyle:d,onToggleListLayout:ea,picker:e,recordingKey:r,showLibraryIcon:!f&&(!J||x),stylePickerListLayout:P,styleType:u},a.createElement(eK,{query:N,setQuery:L,setKeyboardNavigationItem:en,scrollToTop:w,recordingKey:A.Pt(r,"styleSearchBar"),onClose:ei}),"loaded"===D.status&&!eu&&a.createElement(eG,{recordingKey:r},a.createElement(eH,{height:H,initialFocusRef:ep,initialOffset:z,items:V,listRef:S,mainStyleKey:C,overscanCount:g,recordingKey:r,searchQuery:N,stylePickerListLayout:P})),a.createElement(eV,{recordingKey:r,isEmpty:J||et,displayText:et?(0,R.t)("design_systems.styles.no_styles_match"):(0,R.t)("design_systems.styles.no_specified_style",{kind:(0,Y.QT)(u).toLowerCase()}),onBrowseLibrariesButtonClick:O||x?void 0:eo,hideBrowseLibraries:f}),T&&a.createElement(eY,{dsStyle:T.data.style,position:T.data.position}))}function eG({recordingKey:e,children:r}){let n=a.useCallback(e=>{[S.Uz.ENTER,S.Uz.UP_ARROW,S.Uz.DOWN_ARROW,S.Uz.LEFT_ARROW,S.Uz.RIGHT_ARROW].includes(e.event.keyCode)&&e.accept()},[]),i=(0,B.GS)();return a.createElement(J.vL,{name:e||"",handleKeyDown:n,focusOnMount:!0,style:i?{borderRadius:" 0 0 var(--radius-large) var(--radius-large)",overflow:"hidden"}:void 0},r)}function eV({recordingKey:e,isEmpty:r,displayText:n,onBrowseLibrariesButtonClick:i,hideBrowseLibraries:o}){return a.createElement(a.Fragment,null,r&&a.createElement("div",{className:"style_picker--emptyStateContainer--wOVrQ"},a.createElement("div",{className:"style_picker--emptyStateMessage--Z11Lr text--fontPos11--2LvXf text--_fontBase--QdLsd"},n),i&&!o&&a.createElement("span",{className:"style_picker--browseLibrariesButton--KtnxN"},a.createElement(c.$n,{onClick:i,recordingKey:A.Pt(e,"browseLibraries"),variant:"secondary",iconPrefix:a.createElement(O.U,{svg:eP.A,fallbackSvg:eD.A,children:a.createElement(m.l,null)}),"aria-label":(0,R.t)("design_systems.styles.buttons.browse")},(0,R.tx)("design_systems.styles.buttons.browse")))))}function eH({recordingKey:e,items:r,mainStyleKey:n,height:i,searchQuery:l,initialFocusRef:c,initialOffset:d,listRef:u,stylePickerListLayout:p,overscanCount:m,width:_,isEditable:h}){return a.createElement(o._m,{key:p?"list":"grid",ref:u,height:i,initialScrollOffset:d,itemCount:r.length,itemData:{stylePickerListLayout:p,searchQuery:l,recordingKey:e,selectedStyleKey:n,items:r,initialFocusRef:c,isEditable:h},itemKey:(e,{stylePickerListLayout:r,items:n})=>{let a=n[e];return a.type===eo.b.LibraryName?a.fileKey:a.type===eo.b.HierarchyPathName?a.fileKey+"/"+a.name:a.type===eo.b.SlideThemeName?a.fileKey+"/"+a.themeId:a.type===eo.b.StylesRow?(r?"list-":"grid-")+a.styles.map(e=>e.key).join("/"):a.type===eo.b.Separator?`separator-${e}`:void(0,s.xb)(a)},itemSize:e=>(0,ei.kj)(r,e),overscanCount:m,style:{overflow:"hidden auto",touchAction:"pan-y"},width:_||es.N2},eR)}function ez({recordingKey:e,picker:r,styleType:n,onApplyStyle:o,isSearching:l,isLoading:c,showLibraryIcon:S,onBrowseLibrariesButtonClick:C,stylePickerListLayout:L,onToggleListLayout:P,hideCreateStyleButton:M,onCreateStyle:B,initialPosition:H,minBottomMargin:K,customPickerTitle:j,children:$}){let J=(0,i.wA)(),Z=(0,W.tS)(),Q=a.useMemo(()=>H||(r?new w.Mi(r.initialX,r.initialY):new w.Mi(0,0)),[H,r]),[ee,ei]=a.useState(!1),eo=a.useCallback(()=>ei(!0),[]),ec=a.useCallback(()=>ei(!1),[]),{dropdownShown:ed,modalShown:eu,stylePickerShown:ep,stylePreviewShown:em}=(0,I.R)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown})),e_=a.useRef(null),eh=e_.current?.getEl()?.getBoundingClientRect(),eg=a.useMemo(()=>!!eu&&eu.type===q.cX,[eu]),ef=a.useMemo(()=>{let e=()=>J(x.jD()),n=()=>J(k.XE()),a=()=>J(k.Uv()),i=()=>J(F.sw());return{selectStyle(n){o(n,l),e(),i(),r.modal&&a()},showStyleDetails(e,r,a){if(em.isShown&&!em.isCreating&&em.style?.node_id===e.node_id&&(0,G.EF)(em.style,e))i();else{(0,s.KF)(null!=e.content_hash,"style does not have a hash");let i=e.isLocal?e.node_id:E.Pt4.getStyleNodeId(e.key,e.content_hash);b.fn(b.sH(i))?E.glU.selectStyleByGuid(i):V.Eo.getCanvas(e).then(e=>{E.glU.selectExternalStyle(e)}),J(F.rk({style:e,rowTop:r.y,rowLeft:r.x})),n(),(0,T.trackEvent)("Style Inspected",{styleType:e.style_type,from:a})}},showStyleContextMenu(e,r){J(D.j7({type:es.vG,data:{style:e,position:r}}))},deleteStyle(e){(0,G.Oo)(e,Z)&&(y.l7.user("delete-style",()=>E.glU.deleteNode(e.node_id)),z.Y5.triggerAction("commit"),(0,T.trackEvent)("Style Deleted",{styleType:e.style_type,from:"stylePickerContextMenu"}))},stylePreviewShown:em}},[J,o,l,Z,em,r.modal]),eE=a.useCallback(()=>{J(k.Uv()),J(F.sw()),J(k.XE())},[J]),ey=a.useCallback(e=>{e.stopPropagation(),ed&&J(D.oB())},[J,ed]),eb=a.useCallback(()=>{r.modal&&J(k.u1({...r,modal:!1})),ep.isShown&&ep.modal&&J(k.bS({...ep,modal:!1}))},[J,r,ep]),ev=(0,en.sO)(),eT=(0,v.md)(ea.TN).length>0;return a.createElement(N.dP,{recordingKey:e,onKeyDown:eo,onMouseMove:ec},a.createElement(el.h.Provider,{value:ee},a.createElement(el.G.Provider,{value:ef},a.createElement(et.mY,null,a.createElement(er.vx,{ref:e_,initialPosition:Q,initialWidth:es.N2,isCloseHidden:!0,minBottomMargin:K,onClick:ey,onClose:eE,onDragEnd:eb,recordingKey:A.Pt(e,"draggableModal"),title:a.createElement("div",{className:"style_picker--pickerTitleRow--Eoe-0"},a.createElement("div",{className:"style_picker--pickerTitle--xydlB header_modal--headerModalTitle--32hFx"},j||(0,Y.QT)(n)),S&&a.createElement(d.d,{onClick:C,"aria-expanded":eg,htmlAttributes:{"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,R.t)("design_systems.styles.tooltips.library")},children:a.createElement(O.U,{svg:eP.A,fallbackSvg:eD.A,children:a.createElement(m.l,null)}),"aria-label":(0,R.t)("design_systems.styles.tooltips.library")}),("FILL"===n||"STROKE"===n)&&P&&a.createElement(u.K,{"aria-label":L?(0,R.t)("design_systems.styles.tooltips.show_as_grid"):(0,R.t)("design_systems.styles.tooltips.show_as_list"),recordingKey:A.Pt(e,"toggleStylePickerListLayout"),onClick:P,disabled:l,htmlAttributes:{"data-tooltip":L?(0,R.t)("design_systems.styles.tooltips.show_as_grid"):(0,R.t)("design_systems.styles.tooltips.show_as_list"),"data-tooltip-type":X.Ib.TEXT}},a.createElement(O.U,{svg:L?ek.A:eM.A},L?a.createElement(_.E,null):a.createElement(h.Z,null))),!M&&a.createElement("span",{className:"style_picker--createStyleButton--UcGo9"},a.createElement(u.K,{"aria-label":(0,R.t)("design_systems.styles.tooltips.create"),recordingKey:A.Pt(e,"addStyleButton"),disabled:!B||ev&&!eT,onClick:()=>B?.(eh?.left??Q.x,eh?.top??Q.y),htmlAttributes:{onMouseDown:U.dG,"data-tooltip":(0,R.t)("design_systems.styles.tooltips.create"),"data-tooltip-type":X.Ib.TEXT}},a.createElement(O.U,{svg:eF.A,fallbackSvg:ex.A},a.createElement(g.e,null)))),a.createElement(u.K,{"aria-label":(0,R.t)("common.close"),onClick:()=>eE?.()},a.createElement(f.L,null)))},$,c&&a.createElement("div",{className:"style_picker--loadingSpinner--JIN5X"},a.createElement(p.k,null)))))))}function eK({query:e,setQuery:r,setKeyboardNavigationItem:n,scrollToTop:i,recordingKey:o,onClose:s}){let{setKeyboardNavigationElement:l,keyboardNavigationItem:c}=(0,N.M3)({id:"search",path:[0],onFauxFocus:i});return a.useEffect(()=>{c&&n(c)},[c,n]),a.createElement(L.Lp,{ref:e=>{l(e?.searchInput??null)},isKeyDownHandled:e=>(e.keyCode===S.Uz.ESCAPE&&s(),!0),className:"style_picker--search--2I-82",focusOnMount:!0,query:e,clearSearch:()=>r(""),onChange:r,recordingKey:o})}let eW=C.ms,ej=C.c$;function eY({dsStyle:e,position:r}){let{showStyleDetails:n,deleteStyle:i}=(0,l.sR)(a.useContext(el.G),"Must be inside <StylePickerActionsContext>"),o=(0,W.q5)(),s=(0,G.eE)(e,o),c=(0,H.b)({libraryKey:e.library_key,nodeId:e.node_id}),d=a.useMemo(()=>c.data?.type==="team",[c.data]),u=a.useMemo(()=>{if(c.data?.type==="team")return c.data.link},[c.data]),p=[];return s&&(p.push(a.createElement(ej,{onClick:()=>n(e,r,"stylePickerContextMenu")},(0,R.tx)("design_systems.styles.edit_style"))),p.push(a.createElement(ej,{onClick:()=>i(e)},(0,R.tx)("design_systems.styles.delete_styles",{numStyles:1})))),!s&&d&&u&&p.push(a.createElement(ej,{href:u,target:"_blank"},(0,R.tx)("design_systems.styles.go_to_style_definition"))),p.length>0?a.createElement(eW,{className:"style_picker--contextMenu--3hOCZ",style:{top:r.y,left:r.x}},...p):null}let e$=(0,P.f)();function eq({inheritStyleKey:e,inheritStyleID:r,styleType:n,selectedLibraries:i}){let o=ed.WH(e,r,n)?.key??null,s=(0,ec.AH)(o,(0,K.E7)(r)),l=a.useRef(s),{libraries:c}=(0,ec.dG)(n,l.current),d=i&&i.length>0?i:c;return a.createElement(a.Fragment,null,d.map(e=>a.createElement(j.SS,{fileKey:e.fileKey,libraryKey:e.libraryKey,key:e.fileKey})),a.createElement(j.SS,{fileKey:l.current?.status==="loaded"&&e$(l.current.data)||null,libraryKey:l.current?.data?.library_key??null}))}},832431:(e,r,n)=>{n.d(r,{G:()=>i,h:()=>o});var a=n(848318);let i=a.createContext(null),o=a.createContext(!1)},246164:(e,r,n)=>{n.d(r,{A8:()=>b,OS:()=>f,WH:()=>T,bi:()=>v,dd:()=>y,f$:()=>S,yT:()=>I,zb:()=>E});var a=n(848318),i=n(301168),o=n(672154),s=n(673786),l=n(186606),c=n(553547),d=n(19180),u=n(489082),p=n(355755),m=n(730143),_=n(152449),h=n(671346),g=n(720722);function f(e){return`styles-picker-${e}`}function E(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===f(e.inheritStyleKeyField)?e.stylePickerShown:null}function y(e){return e&&(0,c.fn)(e.guid)}function b(e){let r=(0,u.E7)(e);return r&&r!==s.n3.INVALID}function v({library:e,inheritStyleKey:r,inheritStyleID:n}){if(!b(r))return null;let a=(0,u.E7)(r);if(!a)return null;let i=Object.values(e.local.styles).find(e=>e.key===a);if(i&&!i.is_soft_deleted)return i;let o=(0,h.b)({library:e},a,(0,u.E7)(n));return o?.status==="loaded"?o.data:null}function T(e,r,n){let s=(0,i.d4)(e=>e.library),l=(0,p.eY)(),f=(0,_.bO)(),E=(0,m.tS)();return a.useMemo(()=>{if(!e)return null;if((0,d.k)().ds_zombie_styles_fixes)return function({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:a}){let i=(0,u.E7)(n),s=(0,u.E7)(a);if(!s||!i)return null;let l=(0,c.dI)(s.guid),d=Object.values(e.local.styles).find(e=>e.node_id===l);if(d)return d.is_soft_deleted?null:d;let p=o.PK.fromKiwi(s),m=p?r.getStyleNode(p):null;if(!m||m.isLocalStyle&&m.isSoftDeleted)return null;let _=(0,h.b)({library:e},i,s);if(_?.data?.content_hash===m.styleVersionHash)return _.data;let f=(0,g.sb)(m),E=e.local.thumbnails[m.guid]||null;return f?{...f,meta:{style_thumbnail:E?.css}}:null}({library:s,inheritStyleKey:e,inheritStyleID:r,sceneGraph:l});let a=v({library:s,inheritStyleKey:e,inheritStyleID:r});if(a)return a;for(let r of Object.values(f))if(r?.status==="loaded"&&r.data.fileKey!==E){for(let a of(0,_.z5)(r,n))if(a.key===e)return a}return null},[r,e,f,s,E,l,n])}function I(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,selectedStyleGuid:e.selectedStyleGuid,dispatch:e.dispatch}}function S(e){if(!e)return;let r=e=>(0,c.fn)((0,c.sH)(e))?e:void 0;return r(l.Pt4.getStyleNodeId(e.key,e.version))??r(l.Pt4.getSoftDeletedStyleNodeId(e.key,e.version))}},263777:(e,r,n)=>{n.d(r,{GC:()=>p,bf:()=>m,hg:()=>u});var a=n(848318),i=n(301168),o=n(559389),s=n(438071),l=n(360430),c=n(511067),d=n(371712);function u(e,r){let n=(0,i.wA)(),l=a.useMemo(()=>(0,o.s)(n,200),[n]);a.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function p(e){let r=(0,c.Um)();return a.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function m(e){let r=(0,i.d4)(e=>e.stylePreviewShown);return a.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},130768:(e,r,n)=>{n.d(r,{m3:()=>m,mY:()=>p});var a=n(848318),i=n(559389),o=n(19180),s=n(63163),l=n(459633),c=n(238462),d=n(277454);let u=a.createContext({registerStyle:c.lQ,unregisterStyle:c.lQ});function p({children:e}){let[r,n]=a.useState(new Set),o=a.useCallback(e=>{n(r=>{let n=new Set(r);return n.add(e),n})},[]),s=a.useCallback(e=>{n(r=>{let n=new Set(r);return n.delete(e),n})},[]),l=a.useMemo(()=>(0,i.s)(e=>{(0,d.rt)(e)},300),[]);a.useEffect(()=>{r.size>0&&l(Array.from(r))},[l,r]);let c=a.useMemo(()=>({registerStyle:o,unregisterStyle:s}),[o,s]);return a.createElement(u.Provider,{value:c},e)}function m({dsStyle:e,children:r,additionalClassName:n}){return(0,o.k)().ds_style_prefetch_on_hover?a.createElement(h,{dsStyle:e,children:r,additionalClassName:n}):a.createElement(_,{dsStyle:e,children:r})}function _({dsStyle:e,children:r}){return!function({dsStyle:e}){let{registerStyle:r,unregisterStyle:n}=a.useContext(u);(0,s.h)(()=>(r(e),()=>{n(e)}))}({dsStyle:e}),a.createElement(a.Fragment,null,r)}function h({dsStyle:e,children:r,additionalClassName:n}){let{registerStyle:i,unregisterStyle:o}=a.useContext(u),[s,c]=(0,l.M)(),[d,p]=(0,a.useState)(!1),m=c||d;return(0,a.useEffect)(()=>{m?i(e):o(e)},[m,i,o,e]),a.createElement("div",{className:n,ref:s,onFocus:()=>p(!0),onBlur:()=>p(!1)},r)}},83985:(e,r,n)=>{n(186606)},356558:(e,r,n)=>{n.d(r,{KG:()=>E,Xs:()=>y});var a=n(848318),i=n(301168),o=n(871043),s=n(186606),l=n(320953),c=n(19180),d=n(989232),u=n(857607),p=n(446244),m=n(67188);n(990063);var _=n(959750);n(489082);var h=n(939019);n(963307),n(554326);var g=n(17753),f=n(405465);function E(e){let r=(0,i.wA)(),n=(0,_.sT)(),{bigNudgeAmount:E,smallNudgeAmount:y}=n,b=(0,a.useCallback)(e=>{e.stopPropagation();let n=e.keyCode===u.Uz.UP_ARROW?"+":"-",a=e.shiftKey?E:y,i=`${n}${a}`,o=e.currentTarget.closest("label")??e.currentTarget.closest("[data-tooltip]"),s=o?.getBoundingClientRect();s&&r(p.eB({target:{kind:g.Ui.TEXT,text:i},targetRect:s,position:g.Zj.BELOW,hideAfterDelay:200}))},[r,E,y]),v=function(e){let r=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===s.m1T.VECTOR),n=(0,a.useMemo)(()=>{class r extends h.M{getValueForNode(r){return s.Egt.getNodeTransformProperties(r.guid)[e]}setValueForNode(r,n){l.l7.user(`transform-change-${e}`,()=>{try{s.Egt.setNodeTransformProperties(r.guid,{[e]:n})}catch{}})}}return new r},[e]),c=function(e){let r="x"===e?s._0v.X:"y"===e?s._0v.Y:void 0;return(0,a.useMemo)(()=>{if(!(0,o.uy)(r))return l.nc.user("apply-mixed-method-for-vector-network",e=>{s.Egt.applyMixedMathForSelectedVectorNetwork(r,e)})},[r])}(e);return(0,a.useMemo)(()=>r&&c?{mixedMathCallback:c}:{mixedMathHandler:n},[r,n,c])}(e.key),T=function({key:e,setValue:r}){let n=(0,i.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo.mode);return(0,a.useCallback)((a,i)=>{(0,c.k)().ce_properties_panel_tracking&&(0,d.trackEvent)("editor-transform-panel-change",{key:e}),(0,f.a2)(e),n!==s.nzw.NONE&&s.glU.hideOnCanvasNameEditor(),r(a,i)},[e,n,r])}(e);return{...n,...v,dispatch:r,onValueChange:T,onMixedMathNudge:b,onKeyUp:m.dG}}function y(){let{smallNudgeAmount:e,bigNudgeAmount:r}=(0,_.sT)();return{smallNudgeAmount:e,bigNudgeAmount:r,wheelMultiplier:e,scrubMultiplier:e}}n(83985)},484130:(e,r,n)=>{n.d(r,{ut:()=>g}),n(848318);var a=n(438096),i=n(34707),o=n(858968),s=n(132731);n(813009);var l=n(967688);n(303397),n(489082),n(273555);var c=n(77869),d=n(122662),u=n(97477),p=n(782856),m=n(553047),_=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(_||{});p.A,a.a,m.A,i.$,d.A,o.w,u.A,s.t;let h=e=>e??0;function g(e,r=h){var n;let a=(n=e).rectangleCornerRadiiIndependent?{topLeft:n.rectangleTopLeftCornerRadius,topRight:n.rectangleTopRightCornerRadius,bottomRight:n.rectangleBottomRightCornerRadius,bottomLeft:n.rectangleBottomLeftCornerRadius}:{topLeft:n.cornerRadius??n.rectangleTopLeftCornerRadius,topRight:n.cornerRadius??n.rectangleTopRightCornerRadius,bottomRight:n.cornerRadius??n.rectangleBottomRightCornerRadius,bottomLeft:n.cornerRadius??n.rectangleBottomLeftCornerRadius};return{topLeft:r(a.topLeft),topRight:r(a.topRight),bottomRight:r(a.bottomRight),bottomLeft:r(a.bottomLeft)}}let f={isDisaggregated:"rectangleCornerRadiiIndependent",disaggregatedValues:["rectangleTopRightCornerRadius","rectangleBottomRightCornerRadius","rectangleBottomLeftCornerRadius","rectangleTopLeftCornerRadius"],aggregatedValue:"cornerRadius"};new c.x({...f}),new c.l({...f,key:"rectangleTopLeftCornerRadius"}),new c.l({...f,key:"rectangleTopRightCornerRadius"}),new c.l({...f,key:"rectangleBottomLeftCornerRadius"}),new c.l({...f,key:"rectangleBottomRightCornerRadius"})},994554:(e,r,n)=>{n.d(r,{UG:()=>eh,ay:()=>ef});var a=n(848318),i=n(301168),o=n(354427),s=n(871043),l=n(658029),c=n(773511),d=n(981637),u=n(186606),p=n(19180),m=n(382902),_=n(536384),h=n.n(_),g=n(989232),f=n(410441),E=n(130799),y=n(63163),b=n(813009),v=n(615233),T=n(781239),I=n(979890),S=n(540698),A=n(41830),w=n(304756),C=n(720522),N=n(401970),L=n(967688),O=n(640483),R=n(244534),P=n(31898),D=n(142896),k=n(995218),M=n(696786),F=n(303397),x=n(948152),U=n(292855),B=n(15904),G=n(489082),V=n(511067),H=n(404486),z=n(752181),K=n(554326),W=n(526594),j=n(17753),Y=n(52463),$=n(213832),q=n(890202),X=n(249882),J=n(614892),Z=n(120846),Q=n(860653),ee=n(791671),et=n(699848),er=n(246098),en=n(756672),ea=n(71683),ei=n(27776),eo=n(217317),es=n(435789);let el=(0,v.CZ)("font/previews"),ec=(0,p.k)().font_index_250317?"font_previews.3e7c0297f334e1a1002e3f2f2dc38dcb.json.br":"font_previews.be806b368d91ef4a0f93e8d2136d49a9.json.br",ed=`${el}/${ec}`,eu=!1;class ep extends $.a3{}class em extends Z.c${}let e_=(0,m.eU)(void 0);function eh(){let[e,r]=(0,m.fp)(e_);(0,y.h)(()=>{n()});let n=a.useCallback(()=>{!e&&(0,X.q9)()&&w.Ay.crossOriginGet(`${ed}`,null,{headers:{"Content-Type":"text/plain"}}).then(({data:e})=>{null===e&&console.error("Failed to load google font previews.");let n=new Map;for(let r of Object.entries(e)){let e=r[1].replace("#","%23");n.set(r[0],e)}r(n)}).catch(e=>{console.error("Failed to load google font previews: ",e)})},[e,r]);return e}let eg={format:e=>e};function ef({fontFamily:e,boundVariable:r,recordingKey:n,onChange:m,onDetachVariableClick:_,showPlaceholder:y,disabled:v,useLegacyFontPickerDropdown:w,hideTypographyVariableOptions:$,clearable:X,id:el,fonts:ec,versionsForStyles:ed,editingStyleGuid:e_,fontPickerId:ef=D.J6,customPlaceholder:eE,variant:ey="row"}){let eb=(0,i.wA)(),ev=(0,H.Xo)(),eT=(0,V.Um)(),eI=(0,M.GS)(),eS=(0,K.ut)(u.Ez5?.interopToolMode(),u.nQ7.SELF),eA=(0,en.sO)()&&eS===u.nQ7.SELF,ew=(0,O.to)(),eC=(0,i.d4)(e=>e.selectedView),eN=(0,k.XE)(eC),eL=(0,i.d4)(e=>e.userFlags),eO=(0,z.f)("completed_font_installer_modal"),eR=(0,i.d4)(e=>e.localFontAgentVersion),[eP,eD]=a.useState(!1),[ek,eM]=a.useState([]),eF=eh(),ex=(0,i.d4)(e=>e.mirror.appModel.currentPage),eU=function(){let e=(0,b.R)(e=>(0,B.Cy)(e.mirror)),r=a.useRef(e);return e.length>0&&!(0,o.c2)(r.current,e)&&(r.current=e),r}(),eB=a.useCallback(()=>{var e=[];for(let r in ec)0!==Object.keys(ed[r]||{}).length&&e.push(r);e.sort((e,r)=>{let n=e.startsWith("."),a=r.startsWith(".");return n&&!a?1:!n&&a?-1:e.localeCompare(r)}),eM(e)},[ec,ed]),eG={format:e=>e,parse(e){if(Object.keys(ec[e]??{}).length>0)return e;throw Error("Invalid family")},increment(e,r,n){let a=ek.indexOf(e);return r?ek[Math.min(a+1,ek.length-1)]:ek[Math.max(a-1,0)]},autocomplete(e){for(let r of(e=e.toLowerCase(),ek))if(r&&r.toLowerCase().startsWith(e))return r;return null},isEqual:(e,r)=>e===r},eV=a.useCallback(()=>{!(0,E.K4)()||(0,U.Kk)()||eO||eu||(eu=!0,(0,E.P6)().catch(()=>{eb(P.to({type:er.x}))}))},[eb,eO]),eH=a.useRef(null),ez=a.useRef(null),eK=a.useCallback(e=>{if(ev?.id===ef)eb(R.XE());else{eD(!0),eb(R.Uv());let e="row"===ey?(0,Y.cn)(ez.current,(0,f.jz)(ei.kaq)):ez.current.getBoundingClientRect();eb(R.u1({id:ef,initialX:e.x,initialY:e.y,modal:!0})),(0,g.trackEvent)("font picker opened",{pageId:ex,nodeIds:eU.current})}e.stopPropagation()},[eb,ex,ev?.id,ef,eU,ey]);a.useEffect(()=>{eB()},[ec,ed,e,eB]);let eW=[],ej=(0,G.E7)(e),eY=F.Y5?.isFontListLoaded()&&(0,s.Vq)(ej)&&((0,x.O)(ej,ec,eL,eN)||!ec[ej]||0===Object.keys(ec[ej]??{}).length);for(let e of(!ej||ej in ed||(eW.push(a.createElement(em,{key:`current-font-${ej}`,value:ej,disabled:!0,recordingKey:T.Pt(n,ej)})),eW.push(a.createElement(Z.sK,{key:"current-font-divider"}))),ek))eW.push(a.createElement(em,{key:`font-name-${e}`,value:e,recordingKey:T.Pt(n,e)},e));let e$=!(0,S.nl)()||ev?.id===ef||eP;return a.createElement(a.Fragment,null,function(){let i;if(r&&!$){let e=a.createElement(Q.We,null,a.createElement("div",{className:ea.Z9},a.createElement(ee.JD,{elementRef:ez,variable:r,isInStyleModal:!!e_,invalid:eY,tooltip:eY?(0,L.t)("variables.binding_ui.missing_font_family",{fontFamily:ej}):void 0}))),n=_?a.createElement("span",{className:ea.Ds},a.createElement(l.K,{ref:eH,onClick:_,"aria-label":(0,L.t)("variables.binding_ui.detach_variable_tooltip"),htmlAttributes:{"data-tooltip":(0,L.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":j.Ib.TEXT}},a.createElement(N.U,{svg:es.A},a.createElement(d.U,null)))):null;return eI?a.createElement(et.DE,{appendedClassName:ea.DK,ref:ez,label:null,input:e,icon:n}):a.createElement(J.fI,{ref:ez},a.createElement("div",{className:ea.pw},e,n))}let o=ev?.id===ef,s=ej||(eE??(0,L.t)("fullscreen.mixed")),u=a.createElement(A.E,{name:"open_font_picker_button"},a.createElement(c.E,{actionOnPointerDown:!0,"aria-autocomplete":"none","aria-controls":ef,"aria-expanded":o,"aria-haspopup":"dialog","aria-label":(0,L.t)("fullscreen.type_panel.font_family"),className:h()({[ea.aL]:!eI,[ea.nO]:eI,[ea.wH]:o,[ea.uG]:eY}),"data-onboarding-key":(0,W.Lh)(W.D8.TEXT_PANEL,"font-picker-button"),htmlAttributes:{role:"combobox"},onClick:eK,recordingKey:T.Pt(n,"openFontPickerButton")},eY&&a.createElement(C.B,{svg:eo.A,className:ea.q_}),eI?a.createElement(Z.uQ,{formatter:eg,property:s,inputClassName:h()(ea.ac,{[ea.OW]:ev?.id===ef}),screenreaderVisible:!0}):a.createElement("div",{className:ea.sI},s))),f=!eI&&eY?a.createElement(C.B,{svg:eo.A}):void 0;if(w)i=a.createElement(ep,{ariaLabel:(0,L.t)("fullscreen.type_panel.font_family"),className:ea.UU,disabled:v,dispatch:eb,dropdownShown:eT,forceInputPlaceholder:!!eY&&!!y,formatter:eG,icon:f,iconClassName:ea.q_,id:el,onChange:m,onMouseDown:eV,placeholder:eY&&y?eE??(0,L.t)("fullscreen.type_panel.type_or_choose"):void 0,property:e,recordingKey:n,willShowDropdown:()=>((0,p.k)().ce_properties_panel_tracking&&(0,g.trackEvent)("editor-type-panel-dropdown-show",{key:"fontFamily"}),(0,p.k)().ce_font_picker_metrics&&(0,g.trackEvent)("font picker opened",{pageId:ex,nodeIds:eU.current}),Promise.resolve())},eW);else{if(eA||ew)return a.createElement(et.Ad,{ref:ez,label:null,input:u});if("button"===ey)return a.createElement(I.D8,{forwardedRef:ez,"data-non-interactive":!0},u);if(eI)return a.createElement(et.DE,{appendedClassName:h()({[ea.A5]:o}),ref:ez,label:null,icon:null,input:u});i=u}return a.createElement(J.fI,{ref:ez,className:h()(ea.YV,{[ea.wH]:o})},i)}(),!w&&e$&&a.createElement(q.Cn,{clearable:X,currentFont:e,dispatch:eb,dropdown:eT,fonts:ec,googleFontPreviews:eF,hideTypographyVariableOptions:$,id:el,localFontAgentVersion:eR,onFontChange:m,pickerId:ef,pickerShown:ev,recordingKey:n,selectedNodeIds:eU.current,selectedView:eC,versionsForStyles:ed}))}ef.displayName="fontFamily"},501545:(e,r,n)=>{n.d(r,{DJ:()=>L,XL:()=>O});var a=n(848318),i=n(660376),o=n(779492),s=n(250838),l=n(665481),c=n(5821),d=n(945360),u=n(51215),p=n(525097),m=n(867733),_=n(947135),h=n(186606),g=n(19180),f=n(989232),E=n(781239),y=n(41830),b=n(967688),v=n(303397),T=n(489082),I=n(963307),S=n(554326),A=n(614892);n(875879);var w=n(504926),C=n(699848),N=n(71683);function L(e){let r=a.createElement(y.E,{name:"text_align_horizontal"},a.createElement(R,{recordingKey:E.Pt(e.recordingKey,"textAlignHorizontal")})),n=a.createElement(y.E,{name:"text_align_vertical"},a.createElement(P,{textAlignVertical:e.textAlignVertical||T.oV,recordingKey:E.Pt(e.recordingKey,"textAlignVertical")})),i=(0,w.vK)();return e.isUI3?i?a.createElement(a.Fragment,null,a.createElement(C.DE,{ref:e.alignmentRowRef,label:(0,b.tx)("properties.label.alignment"),input:r,icon:e.textPathFlipButton}),a.createElement(C.DE,{ref:e.alignmentRowRef,label:null,input:n,icon:!e.isStyleConsumer&&e.iconButton})):a.createElement(C.fn,{ref:e.alignmentRowRef,leftLabel:(0,b.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton}):a.createElement(A.fI,{className:N.lY,ref:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},a.createElement("div",{className:N.Xh},r),a.createElement("div",{className:N.qf},n),e.iconButton)}var O=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(O||{});function R({recordingKey:e,loggingCallback:r}){let n=(0,I.kl)("textAlignHorizontal")||T.oV,p=(0,T._W)((0,I.kl)("missingFont"),!1),m=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_HORIZONTAL),_=(0,w.vK)();return(0,i.KF)(!!(n||m),"TypePanel missing textAlignHorizontal"),a.createElement(o.bL,{legend:a.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_horizontal")),value:n,onChange:e=>{r&&r(),v.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:m||p,recordingKey:e},a.createElement(o.c$,{value:"LEFT","aria-label":(0,b.t)("fullscreen.type_panel.align_left"),icon:a.createElement(l.h,null)}),a.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_center"),icon:a.createElement(c.N,null)}),a.createElement(o.c$,{value:"RIGHT","aria-label":(0,b.t)("fullscreen.type_panel.align_right"),icon:a.createElement(d.K,null)}),_&&a.createElement(o.c$,{value:"JUSTIFIED","aria-label":(0,b.t)("fullscreen.type_panel.justify"),icon:a.createElement(u.h,null)}))}function P(e){let r=(0,T._W)((0,I.kl)("missingFont"),!1),n=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_VERTICAL),i=(0,w.vK)();return a.createElement(o.bL,{value:e.textAlignVertical,onChange:e=>((0,g.k)().ce_properties_panel_tracking&&(0,f.trackEvent)("editor_type_panel_change",{key:"textAlignVertical",value:e}),v.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:a.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_vertical"))},a.createElement(o.c$,{value:"TOP","aria-label":i?(0,b.t)("fullscreen.type_panel.text_on_a_path_align_above"):(0,b.t)("fullscreen.type_panel.align_top"),icon:a.createElement(p.b,null)}),a.createElement(o.c$,{value:"CENTER","aria-label":i?(0,b.t)("fullscreen.type_panel.text_on_a_path_align_on"):(0,b.t)("fullscreen.type_panel.align_middle"),icon:a.createElement(m.X,null)}),a.createElement(o.c$,{value:"BOTTOM","aria-label":i?(0,b.t)("fullscreen.type_panel.text_on_a_path_align_below"):(0,b.t)("fullscreen.type_panel.align_bottom"),icon:a.createElement(_.z,null)}))}},830330:(e,r,n)=>{n.d(r,{f:()=>v});var a=n(848318),i=n(660376),o=n(779492),s=n(250838),l=n(349697),c=n(348154),d=n(868891),u=n(186606);n(813009);var p=n(781239),m=n(401970),_=n(967688);n(990063);var h=n(696786);n(303397),n(963307),n(554326);var g=n(504926),f=n(699848),E=n(503131),y=n(958329),b=n(320226);function v({disabled:e,enabledTypePanelControls:r,textAutoResize:n,recordingKey:o}){e=e||!((0|r)&1<<u.mrc.TEXT_AUTO_RESIZE);let s=(0,h.GS)();e||(0,i.KF)(null!=n,"TypePanel missing textAutoResize");let l=a.createElement(T,{disabled:e,textAutoResize:n,recordingKey:o});return s?a.createElement(f.DE,{input:l,icon:null,label:(0,_.t)("fullscreeen.type_panel.resizing")}):l}function T(e){let r=(0,g.ae)();return a.createElement(o.bL,{value:e.textAutoResize,onChange:e=>r(e,"panel"),readonly:e.disabled,recordingKey:p.Pt(e,"autoResize"),legend:a.createElement(s.q,null,(0,_.t)("fullscreeen.type_panel.resizing"))},a.createElement(o.c$,{value:"WIDTH_AND_HEIGHT","aria-label":(0,_.t)("fullscreen.type_panel.auto_width"),icon:a.createElement(m.U,{svg:b.A},a.createElement(l.$,null))}),a.createElement(o.c$,{value:"HEIGHT","aria-label":(0,_.t)("fullscreen.type_panel.auto_height"),icon:a.createElement(m.U,{svg:y.A},a.createElement(c.m,null))}),a.createElement(o.c$,{value:"NONE","aria-label":(0,_.t)("fullscreen.type_panel.fixed_size"),icon:a.createElement(m.U,{svg:E.A},a.createElement(d.V,null))}))}},232084:(e,r,n)=>{n.d(r,{FX:()=>a}),n(848318),n(382902),n(63163),n(967688),n(696786),n(34542),n(517776),n(986761),n(263336),n(391301),n(136169);let a="new_text_row_location_callout"},934151:(e,r,n)=>{n.d(r,{Gi:()=>g,IV:()=>h,Qu:()=>S,dD:()=>I,dp:()=>b,lt:()=>E,o7:()=>y,xp:()=>T,z$:()=>f});var a=n(848318),i=n(52172),o=n(534052),s=n(168323),l=n(536384),c=n.n(l),d=n(979309),u=n(720522),p=n(144118),m=n(454970),_=n(713301);let h=(0,a.forwardRef)(function({appendedClassName:e,input:r,selected:n,hasFocus:s,recordingKey:l,htmlAttributes:u,...p},_){let h=a.useRef(null),g=(0,d.S)(h,_);return a.createElement(i.fI,{ref:g,className:c()(m.Rv,{[m._v]:s,[m.es]:p.hideGrabber},e),htmlAttributes:u,selected:n,recordingKey:l},a.createElement(v,{...p,rowRef:h}),a.createElement(o.fh,{className:m.Wy},r))}),g=(0,a.forwardRef)(function({appendedClassName:e,leftIcon:r,input:n,children:s,cellHasCustomFocusRingTarget:l,hasFocus:u,htmlAttributes:p,recordingKey:_,selected:h,...g},f){let E=a.useRef(null),y=(0,d.S)(E,f);return a.createElement(i.fI,{ref:y,className:c()(m.PU,{[m._v]:u,[m.es]:g.hideGrabber},e),htmlAttributes:p,recordingKey:_,selected:h},a.createElement(v,{...g,rowRef:E}),a.createElement(o.fh,{className:m.Kk},r),a.createElement(o.fh,{className:c()({[m.hF]:!0,[m.PO]:l})},n),a.Children.count(s)>0&&a.createElement("div",{className:m.wH},a.Children.map(s,e=>a.createElement(o.fh,{className:m.eK},e))))});(0,a.forwardRef)(function({appendedClassName:e,cellHasCustomFocusRingTarget:r,children:n,hasFocus:s,htmlAttributes:l,input:u,recordingKey:p,selected:_,...h},g){let f=a.useRef(null),E=(0,d.S)(f,g),y=a.useMemo(()=>a.Children.map(n,e=>null!==e?1:0)?.reduce((e,r)=>e+r,0)||0,[n]);return a.createElement(i.fI,{ref:E,className:c()(m.nB,{[m._v]:s,[m.es]:h.hideGrabber},e),htmlAttributes:l,recordingKey:p,selected:_},a.createElement(v,{...h,rowRef:f}),a.createElement(o.fh,{className:c()({[m.hF]:!0,[m.PO]:r})},u),a.Children.count(n)>0&&a.createElement("div",{className:m.E3,style:{"--visible-icons":y}},a.Children.map(n,e=>a.createElement(o.fh,{className:m.eK},e))))});let f=(0,a.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,htmlAttributes:s,selected:l,hasFocus:u,appendedClassName:p,cellHasCustomFocusRingTarget:_,recordingKey:h,...g},f){let E=a.useRef(null),y=(0,d.S)(E,f);return a.createElement(i.fI,{ref:y,className:c()(m.q0,{[m._v]:u,[m.es]:g.hideGrabber},p),htmlAttributes:s,selected:l,recordingKey:h},a.createElement(v,{...g,rowRef:E}),a.createElement(o.fh,{className:c()({[m.hF]:!0,[m.PO]:_})},e),a.createElement(o.fh,{className:m.eK},r),a.createElement(o.fh,{className:m.H_},n))}),E=(0,a.forwardRef)(function({input:e,icon:r,htmlAttributes:n,cellHtmlAttributes:s,selected:l,hasFocus:u,shouldIconAppearOnHover:p,appendedClassName:_,cellHasCustomFocusRingTarget:h,recordingKey:g,...f},E){let y=a.useRef(null),b=(0,d.S)(y,E),{isDragging:I}=a.useContext(T);return a.createElement(i.fI,{ref:b,className:c()(p?m.KW:m.yr,{[m._v]:u,[m.es]:f.hideGrabber,[m.cB]:p&&I},_),htmlAttributes:n,selected:l,recordingKey:g},a.createElement(v,{...f,rowRef:y}),a.createElement(o.fh,{className:c()({[m.hF]:!0,[m.PO]:h}),htmlAttributes:s},e),a.createElement(o.fh,{className:m.Kk},r))}),y=(0,a.forwardRef)(function({appendedClassName:e,cellHasCustomFocusRingTarget:r,firstRightIcon:n,hasFocus:s,htmlAttributes:l,input:u,leftIcon:p,recordingKey:_,secondRightIcon:h,selected:g,...f},E){let y=a.useRef(null),b=(0,d.S)(y,E);return a.createElement(i.fI,{ref:b,className:c()(m.Vb,{[m._v]:s,[m.es]:f.hideGrabber},e),htmlAttributes:l,selected:g,recordingKey:_},a.createElement(v,{...f,rowRef:y}),a.createElement(o.fh,{className:m.Kk},p),a.createElement(o.fh,{className:c()({[m.hF]:!0,[m.PO]:r})},u),a.createElement(o.fh,{className:m.Pv},n),a.createElement(o.fh,{className:m.Hq},h))});(0,a.forwardRef)(function({cellHasCustomFocusRingTarget:e,hasFocus:r,htmlAttributes:n,icon:s,leftInput:l,recordingKey:u,rightInput:p,selected:_,...h},g){let f=a.useRef(null),E=(0,d.S)(f,g);return a.createElement(i.fI,{ref:E,className:c()(m.cd,{[m._v]:r,[m.es]:h.hideGrabber}),htmlAttributes:n,recordingKey:u,selected:_},a.createElement(v,{...h,rowRef:f}),a.createElement(o.fh,{className:c()({[m.ig]:!0,[m.PO]:e})},l),a.createElement(o.fh,{className:c()({[m.by]:!0,[m.PO]:e})},p),s&&a.createElement(o.fh,{className:m.Kk},s))});let b=(0,a.forwardRef)(function({cellHasCustomFocusRingTarget:e,hasFocus:r,htmlAttributes:n,firstRightIcon:s,secondRightIcon:l,leftInput:u,recordingKey:p,rightInput:_,selected:h,...g},f){let E=a.useRef(null),y=(0,d.S)(E,f);return a.createElement(i.fI,{ref:y,className:c()(m.o,{[m._v]:r}),htmlAttributes:n,recordingKey:p,selected:h},a.createElement(v,{...g,rowRef:E}),a.createElement(o.fh,{className:c()({[m.ig]:!0,[m.PO]:e})},u),a.createElement(o.fh,{className:c()({[m.by]:!0,[m.PO]:e})},_),s&&a.createElement(o.fh,{className:m.yU},s),l&&a.createElement(o.fh,{className:m.Sk},l))});function v({hideGrabber:e,singletonRow:r,rowRef:n}){let{menuItems:o,getMenuContainerProps:l}=i.V6(n),{manager:d,getContextMenuTriggerProps:h}=s.b(),{isDragging:g}=a.useContext(T);return e||r&&!g?null:a.createElement(p.e,{condition:o.length>0,wrapper:e=>a.createElement(a.Fragment,null,a.createElement(s.bL,{manager:d},a.createElement(s.mc,{...l()},...o)),e)},a.createElement("div",{className:c()({[m.tp]:g,[m.kI]:!g}),"data-testid":"row-grabber",...h()},a.createElement(u.B,{className:m.gB,svg:_.A})))}let T=a.createContext({isDragging:!1}),I=a.createContext({useGrid:!1});function S(){let{useGrid:e}=a.useContext(I);return a.useCallback(r=>{if(e){if(r.altKey&&("ArrowUp"===r.key||"ArrowDown"===r.key)){r.preventDefault();return}("ArrowUp"===r.key||"ArrowDown"===r.key||"ArrowLeft"===r.key||"ArrowRight"===r.key)&&r.stopPropagation()}},[e])}},847526:(e,r,n)=>{n.d(r,{Cm:()=>u,Zo:()=>d,cS:()=>c,dx:()=>l});var a=n(848318),i=n(536384),o=n.n(i),s=n(483189);let l=(0,a.forwardRef)(function({left:e,right:r,appendedClassName:n},i){let l=o()(s.RF,n);return a.createElement("div",{className:l,ref:i},e?a.createElement("div",{className:s.kb},e):null,r?a.createElement("div",{className:s.pG},r):null)});(0,a.forwardRef)(function({children:e,appendedClassName:r},n){let i=o()(s.Pv,r);return a.createElement("div",{className:i,ref:n},e)});let c=(0,a.forwardRef)(function({labelId:e,label:r,input:n,appendedClassName:i},l){let c=o()(s.Od,i);return a.createElement("div",{className:c,ref:l},null!=r?a.createElement(p,{id:e},r):null,a.createElement("div",{className:s.hF},n))}),d=(0,a.forwardRef)(function({label:e,input:r,appendedClassName:n},i){let l=o()(s.H5,n);return a.createElement("div",{className:l,ref:i},null!=e?a.createElement(p,null,e):null,a.createElement("div",{className:s.hF},r))}),u=(0,a.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:i},l){let c=o()(s.Y7,i);return a.createElement("div",{className:c,ref:l},a.createElement(p,null,e),a.createElement("div",{className:s.ig},r),a.createElement("div",{className:s.by},n))});function p(e){return a.createElement("span",{id:e.id,"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}},494604:(e,r,n)=>{n.d(r,{r:()=>d});var a=n(848318),i=n(536384),o=n.n(i),s=n(896777),l=n(699848),c=n(42379);a.forwardRef(function({titleTx:e,faded:r,isEmpty:n,appendedClassName:i},s){return a.createElement(l.Ad,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n},i),input:a.createElement(l.Mw,null,e),label:null})});let d=a.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:i,appendedClassName:s},d){return a.createElement(l.DE,{ref:d,appendedClassName:o()(c.En,c.VJ,{[c.yf]:n,[c.ry]:i},s),input:a.createElement(l.Mw,null,e),label:null,icon:r})});a.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:i,isPanelBodyCollapsedAtom:d,appendedClassName:u,dataTestId:p},m){let _=o()(c.e4,{[c.yf]:n,[c.ry]:i},u);return a.createElement("div",{className:_,ref:m,"data-testid":p,"data-non-interactive":!0},a.createElement("div",{className:c.Dn},a.createElement(s.r2,{isPanelBodyCollapsedAtom:d||null}),a.createElement(l.Mw,null,e)),a.createElement("div",{className:c.Ix,"data-non-interactive":!0},r))}),a.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:i},s){return a.createElement(l.oO,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n}),input:a.createElement(l.Mw,null,e)},i)}),a.forwardRef(function({titleTx:e,input:r},n){return a.createElement("div",{className:c.Ii,ref:n,"data-non-interactive":!0},a.createElement("div",{className:c.DD},a.createElement(l.Mw,null,e)),a.createElement("div",{className:c.hF,"data-non-interactive":!0},r))})},699848:(e,r,n)=>{n.d(r,{Ad:()=>E,DE:()=>f,Kg:()=>w,Mw:()=>I,Oe:()=>g,Y9:()=>A,fn:()=>h,my:()=>T,oO:()=>b,pG:()=>y,sY:()=>v,u9:()=>C});var a=n(848318),i=n(19180),o=n(536384),s=n.n(o),l=n(979890),c=n(720522),d=n(144118),u=n(312522),p=n(459377),m=n(235035),_=n(713301);let h=(0,a.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:i,appendedClassName:o,icon:l,dataTestId:c},d){return a.createElement("div",{ref:d},a.createElement("fieldset",{className:s()(m.$f,o),"data-non-interactive":!0,"data-testid":c},null!=e?a.createElement(w,{useAsLegend:null!==e&&null==n},e):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},r),null!=n?a.createElement(C,null,n):null,a.createElement("div",{className:m.ON,"data-non-interactive":!0},i),a.createElement(S,null,l)))});(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:i},o){return a.createElement("div",{className:m.iv,ref:o,"data-non-interactive":!0},null!=e?a.createElement(w,null,e):null,a.createElement("div",{className:m.dk,"data-non-interactive":!0},r),a.createElement("div",{className:m.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:m.pK,"data-non-interactive":!0},i))});let g=(0,a.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:i,secondRightIcon:o,...s},l){return a.createElement("div",{className:m.o7,ref:l,...s,"data-non-interactive":!0},null!=e?a.createElement(w,null,e):null,a.createElement("div",{className:m.dk,"data-non-interactive":!0},r),a.createElement("div",{className:m.Wy,"data-non-interactive":!0},n),a.createElement("div",{className:m.pK,"data-non-interactive":!0},i),a.createElement("div",{className:m.wm,"data-non-interactive":!0},o))}),f=(0,a.forwardRef)(function({label:e,labelId:r,input:n,icon:i,appendedClassName:o,dataTestId:l,dataOnboardingKey:c,...d},u){let p=s()(m.xx,o);return a.createElement("div",{className:p,ref:u,"data-testid":l,"data-onboarding-key":c,...d},null!=e?a.createElement(w,{id:r},e):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},n),a.createElement(S,null,i))}),E=(0,a.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:i},o){return a.createElement("div",{className:s()(m.cN,n),ref:o},r?a.createElement(w,{alwaysShowLabel:i},r):null,a.createElement("div",{className:m.Vp,"data-non-interactive":!0},e))}),y=(0,a.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:i,dataTestId:o,label:l},c){let d=s()(m.jz,i);return a.createElement("div",{className:d,ref:c,"data-testid":o},null!==l?a.createElement(w,null,l):null,a.createElement("div",{className:m.q1,"data-non-interactive":!0}," ",e," "),a.createElement("div",{className:m.eK,"data-non-interactive":!0}," ",r," "),a.createElement("div",{className:m.H_,"data-non-interactive":!0}," ",n," "))}),b=(0,a.forwardRef)(function({input:e,children:r,appendedClassName:n,dataOnboardingKey:i},o){let l=s()(m.qv,n);return a.createElement("div",{className:l,ref:o,"data-onboarding-key":i},a.createElement("div",{className:m.q1},e),a.createElement("div",{className:m.wH},r))}),v=(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:o,topLeftInput:l,bottomLeftInput:c,topRightInput:d,bottomRightInput:u,leftInput:p,rightInput:_},h){let g=s()(m.d1,o),f=null!=p?a.createElement("div",{className:m.kW},p):l,E=null!=_?a.createElement("div",{className:m.kW},_):d,y=null!=p?null:a.createElement("div",null,c),b=null!=_?null:a.createElement("div",null,u);return a.createElement("div",{className:g,ref:h,"data-non-interactive":!0},a.createElement(w,null,e),a.createElement(C,null,r),a.createElement(T,null),f,E,a.createElement("div",null,n),y,b,a.createElement("div",null,i))});function T({}){return a.createElement("div",{"data-non-interactive":!0})}function I({children:e}){return(0,i.k)().slides_a11y?a.createElement("h2",null,e):a.createElement("span",{"aria-hidden":"true"},e)}function S({children:e}){return e?a.createElement("div",{className:m.to,"data-non-interactive":!0},e):null}let A=(0,a.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,showGrabberOnRowHover:i=!1,singletonRow:o,dragging:d,children:u,selectedSecondary:h,containerClassName:g,...f},E){let y=!n&&(!o||d),b=e&&d?p.Aw:m.gB,v=h?m.kR:e?m.CZ:"";return a.createElement(l.D8,{...f,forwardedRef:E,className:s()(i?d?m.r_:m.kc:m.P6,v,g)},y&&a.createElement("div",{className:s()(r,{[m.tp]:d,[m.kI]:!d}),"data-testid":"row-grabber"},(!d||e)&&a.createElement(c.B,{className:b,svg:_.A})),u)});function w({id:e,children:r,alwaysShowLabel:n,useAsLegend:i}){return(0,u.V)()||n?a.createElement(d.e,{condition:!!i,wrapper:e=>a.createElement("legend",null,e)},a.createElement("span",{id:e,"aria-hidden":!i,className:m.Qb,"data-non-interactive":!0},r)):a.createElement(T,null)}function C({children:e}){return(0,u.V)()?a.createElement("span",{"aria-hidden":"true",className:m.iV,"data-non-interactive":!0},e):a.createElement(T,null)}},730029:(e,r,n)=>{n.d(r,{MF:()=>u,dL:()=>d});var a=n(848318),i=n(536384),o=n.n(i),s=n(979890),l=n(699848),c=n(235035);let d=(0,a.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:i,leftIcon:d,rightIcon:u,appendedClassName:p,...m},_){let h=o()(c.ZD,p);return a.createElement(s.D8,{className:h,forwardedRef:_,...m,"data-non-interactive":!0},null!=n?a.createElement(l.Kg,null,n):null,a.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=i?a.createElement(l.u9,null,i):null,a.createElement("div",{className:c.ON,"data-non-interactive":!0},r),a.createElement("div",{className:c.dk,"data-non-interactive":!0},d),a.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:p,expandedTopLeftInput:m,expandedTopRightInput:_,expandedBottomLeftInput:h,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},v){let T=o()(c.uf,d),I=a.createElement("div",{className:c.Xv},f),S=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},u),a.createElement("div",{className:c.H$},p)),A=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},m),a.createElement("div",{className:c.ON},h),a.createElement("div",{className:c.H$},_),a.createElement("div",{className:c.Os},g));return a.createElement(s.D8,{className:T,forwardedRef:v,...b,"data-non-interactive":!0},a.createElement(l.Kg,null,e),a.createElement(l.u9,null,r),a.createElement(l.my,null),y?I:E?A:S,a.createElement("div",{className:c.dk},n),E&&i&&a.createElement("div",{className:c.pK},i))}),(0,a.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:i,appendedClassName:d,topLeftInput:u,bottomLeftInput:p,topRightInput:m,bottomRightInput:_,leftInput:h,rightInput:g,...f},E){let y=o()(c.KP,d);return a.createElement(s.D8,{className:y,forwardedRef:E,...f,"data-non-interactive":!0},a.createElement(l.Kg,null,e),a.createElement(l.u9,null,r),a.createElement(l.my,null),null!=h?a.createElement("div",{className:c.kW},h):a.createElement(a.Fragment,null,a.createElement("div",{className:c.Vp},u),a.createElement("div",{className:c.ON},p)),null!=g?a.createElement("div",{className:c.kW},g):a.createElement(a.Fragment,null,a.createElement("div",{className:c.H$},m),a.createElement("div",{className:c.Os},_)),a.createElement("div",{className:c.dk},n),a.createElement("div",{className:c.pK},i))});let u=(0,a.forwardRef)(function({leftIcon:e,input:r,children:n,appendedClassName:i,dataOnboardingKey:s},l){let d=o()(c.qv,i);return a.createElement("div",{className:d,ref:l,"data-onboarding-key":s},a.createElement("div",{className:c.eK},e),a.createElement("div",{className:c.q1},r),a.createElement("div",{className:c.wH},n))})},582434:(e,r,n)=>{n.d(r,{IF:()=>a.IF,uo:()=>a.uo}),n(848318),n(995218),n(355755),n(614092);var a=n(953508),i=(e=>(e[e.TOOLBELT=0]="TOOLBELT",e[e.TOOLBAR=1]="TOOLBAR",e[e.NONE=2]="NONE",e))(i||{});let o={[a.uo]:0,"create-multiple-symbols":0,"create-multiple-symbols-and-state-group":0,"create-symbol":0,"crop-image":0,"text-edit-hyperlink":0,"request-edit-mode-via-toolbar":0,"multi-edit-text":0,"select-similar":0,"focus-mode-component-set-toggle":0,"mask-selection":0,[a.IF]:0,"live-boolean-union":0,"live-boolean-subtract":0,"live-boolean-intersect":0,"live-boolean-xor":0,"flatten-selection":0,"go-to-original-component":0,"goto-parent-component":0,"restore-variant":0,"select-matching":0,[a.gc]:1,[a.Xz]:1,"focus-mode-responsive-set":1,"toggle-component-configuration":1,"apply-instance-swap":1,"detach-instance":1,"create-code-layer-from-design":1,"create-make-from-design":1,"edit-make-from-design":1,"add-variant":1,"remove-selection-status":1,"add-transform-modifier-to-selection":1,"add-linear-repeat-to-selection":1,"add-skew-modifier-to-selection":1,"resize-to-fit":1,"push-changes-to-main":1,"rewrite-text":1,"reset-symbol":1,"reset-size":1,"reset-exports":1,"reset-effects":1,"reset-layer":1,"reset-visible":1,"reset-name":1,"reset-fill":1,"reset-stroke":1,"reset-text":1,"reset-text-style":1,"reset-prototype-interactions":1,"reset-overlay":1,reset_property_assignment:1,"set-constraints-automatically-toggle":1,"apply-transform-modifiers":1,"add-selection-ready-status":2,"create-section-from-selection":2,"restore-design-in-place-from-code":2,"copy-out-design-from-code":2,"edit-code":2,"reset-fauxverride":2},s=Object.keys(o).reduce((e,r,n)=>(e[r]=2!==o[r]?n:1/0,e),{})},518136:(e,r,n)=>{n.d(r,{bo:()=>u});var a=n(848318),i=n(679654),o=n(585886),s=n(19180),l=n(238462),c=n(394882),d=n(452086);function u(e){return(0,s.k)().fpl_app_focus_improvements?a.createElement(p,{...e}):a.createElement(m,{...e})}function p({children:e}){let r=function(){let e=(0,a.useRef)(!1),r=(0,a.useRef)("pointer");return{onFocus(n){let{target:a}=n;!(e.current||!(a instanceof HTMLElement)||_(n))&&(null==n.relatedTarget||n.relatedTarget.closest('dialog,[role="dialog"]'))&&("pointer"!==r.current||a instanceof HTMLInputElement||a.blur())},onBlur(e){!(!e.relatedTarget||_(e))&&(e.currentTarget.contains(e.relatedTarget)||(r.current=i.F.type))},onPointerDown(n){_(n)||(r.current="pointer"),e.current=(0,o.n4)(n)},onPointerUp(r){let n=r.target,a=!1;!e.current&&(n instanceof HTMLLabelElement&&(n=n.control,a=!0),n&&(n instanceof HTMLButtonElement||n instanceof HTMLInputElement&&n.hasAttribute("type")&&"text"!==n.getAttribute("type"))&&(a?n.addEventListener("click",()=>n.blur(),{once:!0}):n.blur()))},onKeyDown(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),(0,d.$z)())}}}();return a.createElement("div",{...r},e)}function m({children:e}){let r=function(e){let r=(0,a.useRef)(l.lQ),n=(0,a.useRef)(l.lQ),s=(0,a.useRef)(l.lQ),d=(0,a.useRef)(!1);return(0,a.useCallback)(e=>{(0,c.cZ)(void 0,e),r.current(),n.current(),s.current(),s.current=h(e,"focusin",e=>{let{target:r}=e;if(d.current||!(r instanceof HTMLElement)||null!=e.relatedTarget||"keyboard"===i.F.type)return;let n=r.getAttribute("aria-haspopup");null!==n&&"false"!==n&&r.blur()}),n.current=h(e,"pointerdown",e=>{d.current=(0,o.n4)(e)}),r.current=h(e,"pointerup",e=>{let{target:r}=e,n=!1;!d.current&&(r instanceof HTMLLabelElement&&(r=r.control,n=!0),r&&(r instanceof HTMLButtonElement||r instanceof HTMLInputElement&&r.hasAttribute("type")&&"text"!==r.getAttribute("type"))&&(n?r.addEventListener("click",()=>r.blur(),{once:!0}):r.blur()))})},[e])}();return a.createElement("div",{ref:r},e)}function _(e){return!e.currentTarget.contains(e.target)}function h(e,r,n){return e?(e.addEventListener(r,n),()=>e.removeEventListener(r,n)):l.lQ}},166045:(e,r,n)=>{n.d(r,{EG:()=>o}),n(848318),n(967688);var a=n(715980),i=n(675257);function o(e){if(e.extensionSearchString)return e.extensionSearchString;if(e.displayText&&!e.displayForQuickCommand)return e.displayText;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,a.Dz)(e);return(0,i.A)(r,e.args)}n(880801)},609335:(e,r,n)=>{n.d(r,{BB:()=>b,XG:()=>E,wI:()=>f}),n(848318);var a=n(938982),i=n(382902),o=n(476254),s=n(998568),l=n(32078),c=n(353231),d=n(274466),u=n(748790),p=n(241211),m=n(48912),_=n(307843),h=n(131258),g=n(803107);function f({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:a,numSearchResults:i}){y({action:r,searchQuery:e,numSearchResults:i,rankingAlgorithm:(0,_.eg)(h.Jc.EXTENSIONS),searchPosition:a,module:h.Jc.EXTENSIONS,qaVersion:p.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function E({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:a,isSearchResult:o,moduleFilters:s}){y({action:e,searchQuery:i.zl.get(g.Q8),numSearchResults:r,rankingAlgorithm:a,searchPosition:n,qaVersion:p.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:o,module:(0,m.x)()})}function y(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:l,fileKey:m,productType:h,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=o.D.getState(),r=(0,d.l)(e),n=e.openFile?.key??"",l=(0,c.v5)(e.selectedView,null),m=i.zl.get(g.dd)??"";m||(0,s.$D)(a.e.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${p.OW}`));let h=i.zl.get(g.Rt);return{currentSelection:r,fileKey:n,productType:l,source:i.zl.get(g.rE)?.source??"",quickActionsSessionId:m,quickActionsQueryId:h,role:(0,_.WZ)(),hasAiFeatureAccess:(0,u.W7)()}}(),b={...e,quickActionsSessionId:r,currentSelection:l,fileKey:m,productType:h,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,_.mi)(b)}function b(e){return!!e.tags?.includes(l.$.AI)}n(166045)},697051:(e,r,n)=>{var a=n(19180),i=n(382902),o=n(989232),s=n(476254),l=n(615233),c=n(410725),d=n(748008),u=n(730143),p=n(55116),m=n(944239),_=n(946324),h=n(880801),g=(e=>(e.DAILY="daily",e.MONTHLY="monthly",e))(g||{});(0,m.n)(e=>{let r=function(){let e=(0,u.tS)()??"",r=(0,c.Rs)(p.kS$,{fileKey:e},{enabled:!!e});if("errors"===r.status||"loading"===r.status||"disabled"===r.status||!r.data||!r.data.aiMeterUsage)return null;let{aiMeterUsage:n}=r.data;return n.status===d.tT.Error?null:n.data}();if(!e||!(0,a.k)().qa_ai_metering||e===h.JT.ASSISTANT_CHAT||e===h.JT.FIND_INSPIRATION)return{withinMeter:!0};let n=i.zl.get(_.Ac),m=i.zl.get(_.ag),g=i.zl.get(_.u6),f=m||g;if("unchecked"===n||"null_grantlist"===n&&f){let r=s.D&&s.D.getState().selectedView,n=r?.view==="fullscreen"&&r.fileKey;o.definedAnalyticsHandler.trackDefinedEvent("search_experience.ai_eligibility.meter_checked",{newGrantlistPlanValue:null!==m?m.toString():"null",newGrantlistUserValue:null!==g?g.toString():"null",userId:l.Ay().user_data?.id,fileKey:n||"missing",action:e}),i.zl.set(_.Ac,f?"with_grantlist":"null_grantlist")}if(!r)return{withinMeter:!0,noDataLoaded:!0};let E=r.filter(r=>r.userActions.includes(e));if(0===E.length)return{withinMeter:!0};if((0,a.k)().qa_ai_metering_daily_lg){let e=E.find(e=>"daily"===e.meteringWindow),r=E.find(e=>"monthly"===e.meteringWindow);if(!e||!r)return{withinMeter:!0};let n=parseInt(e.remaining)>0,a=parseInt(r.remaining)>0;return!n&&a?{withinMeter:n,meterResetDate:e.resetsAt,meteringWindow:"daily"}:{withinMeter:a,meterResetDate:r.resetsAt,meteringWindow:"monthly"}}let y=E[0];return y?{withinMeter:parseInt(y.remaining)>0,meterResetDate:y.resetsAt,meteringWindow:"monthly"}:{withinMeter:!0}})},748790:(e,r,n)=>{n.d(r,{GM:()=>g,PE:()=>_,W7:()=>h}),n(848318);var a=n(19180),i=n(382902),o=n(615233);n(410725),n(748008),n(540698),n(204295);var s=n(995218);n(180294);var l=n(318147);n(55116);var c=n(259964),d=n(944239),u=n(946324);let p=(0,i.eU)(o.tl().editing_file?.can_use_jubilee??!1),m=((0,i.eU)(!0),(0,d.n)(()=>i.zl.get(p))),_=(0,d.n)(()=>!!(((0,s.lg)()!==l._Y.WHITEBOARD||(0,a.k)().figjam_quick_actions_v2)&&(0,u.$7)("useHasPermission"))&&m()),h=(0,d.n)(()=>!!((i.zl.get(s.u8)!==c.nT.Whiteboard||(0,a.k)().figjam_quick_actions_v2)&&(0,u.$7)("getHasPermission"))&&m());function g(){return _()}},937629:(e,r,n)=>{n.d(r,{Ci:()=>v,Ko:()=>b,LC:()=>I,Lh:()=>A,Nv:()=>T,P5:()=>C,_d:()=>S,eH:()=>w}),n(848318);var a=n(19180),i=n(382902),o=n(476254);n(410725),n(748008);var s=n(227276);n(204295);var l=n(995218);n(358491),n(55116);var c=n(259964),d=n(254028),u=n(600122),p=n(944239),m=n(748790),_=n(113173),h=n(946324);let g=(0,i.eU)(!1),f=(0,i.eU)(null),E=(0,p.n)(()=>i.zl.get(g)),y=(0,p.n)(()=>!!(0,i.md)(h.p9));function b(){return!!(0,h.$7)("getHasAssetVisualSearchPermission")&&!!(0,a.k)().api_asset_search&&E()}function v(e){return(0,a.k)().api_asset_search?(function(e){if(!e)return Promise.resolve(!1);let r=i.zl.get(f);return null!==r?Promise.resolve(r):(0,s.vs)("exp_search_ai_assets").then(e=>{let r=e.getValue("allow_ai_results",null);return null!==r&&i.zl.set(f,!!r),!!r})})(e).then(e=>!!(e||(0,h.$7)("getHasAssetSearchPermission"))&&E()):Promise.resolve(!1)}let T=(0,p.n)(e=>!!((0,a.k)().api_asset_search&&(function(e){let{getConfig:r}=(0,s.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e}(e)||(0,h.$7)("useHasAssetSearchPermission")))&&E()),I=(0,p.n)(()=>{let e=y();return!!(0,h.$7)("useHasFragmentSearchPermission")&&(!(0,a.k)().asset_suggestions_require_completed_backfill||!!e)&&E()});function S(){let e=function(){let e=i.zl.get(h.p9);return!!(0,h.$7)("useHasFragmentSearchPermission")&&(!(0,a.k)().asset_suggestions_require_completed_backfill||!!e)&&E()}();return A()&&e&&(0,_.C7)()}function A(){let e=o.D.getState().selectedView,r=(0,u.P)(e),n=(0,d.Jh)(e);return(0,l.JV)(e)===c.nT.Design||r||n}function w(){let e=(0,m.PE)();return A()&&!!(0,a.k)().hub_file_fragments&&e}function C(){return A()&&!!(0,a.k)().hub_file_fragments&&(0,m.W7)()}},113173:(e,r,n)=>{n.d(r,{C7:()=>s,Ll:()=>c,h8:()=>o,kK:()=>l});var a=n(19180),i=n(946324);function o(){return!!(0,a.k)().qa_search_frecency}function s(){return!!(0,a.k)().asset_suggestions&&(0,i.$7)("isFragmentSearchEnabled")}function l(){return!!(0,a.k)().actions_hide_recents&&(0,i.$7)("shouldHideRecents")}function c(){return!!(0,a.k)().prototype_ai_magic_link&&(0,i.$7)("isMagicLinkEnabled")}},880801:(e,r,n)=>{n.d(r,{GI:()=>f,HW:()=>i,IA:()=>E,JT:()=>o,KL:()=>_,LC:()=>c,TJ:()=>m,UW:()=>l,Xy:()=>g,d7:()=>s,gj:()=>p,iP:()=>y,pY:()=>d,rr:()=>u,wC:()=>a,zw:()=>h});let a=354,i=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.IMAGE_TO_DESIGN_ORACLE="image-to-design-oracle",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.EDIT_IMAGE="edit-image",e.MAGIC_LINK="magic-link",e.MAKE_EDITS="make-edits",e.FIRST_DRAFT_FINE_TUNE="first-draft-fine-tune",e.CONTENT_FILL="content-fill",e.IMAGE_FILL="image-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e.FIRST_DRAFT_MAKE_KIT_DEBUG="first-draft-make-kit-debug",e.UPSCALE_IMAGE="upscale-image",e.TEXT_SEARCH="text_search",e.CODE_CHAT="code-chat",e.FIGMAKE="figmake",e.SUGGEST_TEXT="suggest-text",e.LIVING_DESIGNS="living-designs",e.WHITEBOARD_GENERATE_CONTENT="whiteboard-generate-content",e.SUMMARIZE_STICKIES="summarize-stickies",e.SORT_STICKIES_BY_TOPIC="sort-stickies-by-topic",e.SORT_STICKIES_BY_COLOR="sort-stickies-by-color",e.SORT_STICKIES_BY_AUTHOR="sort-stickies-by-author",e.SORT_STICKIES_BY_STAMP_COUNT="sort-stickies-by-stamp-count",e.SORT_STICKIES_BY_STAMP_TYPE="sort-stickies-by-stamp-type",e.MIND_MAP_GENERATE_IDEAS="mind-map-generate-ideas",e.CREATE_IDEAS="create-ideas",e.CANVAS_GENERATE_IMAGE="canvas-generate-image",e.PUBLISH_LIBRARY_FOR_AI="publish-library-for-ai",e.SLIDES_GENERATE_OUTLINE="slides-generate-outline",e.SLIDES_OUTLINE_TO_DECK="slides-outline-to-deck",e))(o||{});let s="https://help.figma.com/hc/articles/23870272542231",l="https://help.figma.com/hc/articles/16822138920343",c="https://help.figma.com/hc/articles/24004542669463",d="https://help.figma.com/hc/articles/24004868368919",u="https://help.figma.com/hc/articles/24244814883735",p="https://help.figma.com/hc/articles/24004711129879",m="https://help.figma.com/hc/articles/25968453273495",_="https://help.figma.com/hc/articles/23796390206743",h="https://help.figma.com/hc/articles/23955143044247",g="https://help.figma.com/hc/articles/24004778051479",f="https://help.figma.com/hc/articles/24245848829847#h_01JBF670XY6WGXKE8F76112N9W",E="https://help.figma.com/hc/articles/24037716110615",y="https://help.figma.com/hc/articles/31326388366871"},549899:(e,r,n)=>{n.d(r,{C:()=>s});var a=n(848318),i=n(63163);let o=(0,a.createContext)((0,a.createRef)());function s(e){let r=(0,a.useContext)(o);(0,i.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},733289:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(382902),i=n(803107);function o(){let e=(0,a.md)(i.fq);return e>0?e+8:0}},966681:(e,r,n)=>{n.d(r,{t:()=>i});var a=n(848318);function i(e,r){return(0,a.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},619534:(e,r,n)=>{n.d(r,{Ag:()=>S,B3:()=>A,RL:()=>L,cT:()=>N,pP:()=>w,qy:()=>E,wj:()=>C,z8:()=>y});var a=n(848318),i=n(938982),o=n(382902),s=n(405531),l=n(998568),c=n(810503),d=n(396872),u=n(101872),p=n(624236),m=n(880801),_=n(219706),h=n(345174),g=n(906729),f=n(399879),E=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(E||{}),y=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(y||{});let b={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},v=(0,o.Iz)(()=>(0,o.eU)({state:"initial",aiTrackingContext:b,tasks:[]})),T={[m.JT.FIRST_DRAFT_MAKE_CHANGES]:i.e.AI_GENERATION,[m.JT.FIRST_DRAFT_MAKE_KIT]:i.e.AI_GENERATION,[m.JT.FIRST_DRAFT_COMPONENTIZE]:i.e.AI_GENERATION,[m.JT.FIRST_DRAFT_SUGGEST_PROPS]:i.e.AI_GENERATION,[m.JT.MAKE_EDITS]:i.e.AI_GENERATION,[m.JT.FIRST_DRAFT]:i.e.AI_GENERATION,[m.JT.IMAGE_TO_DESIGN]:i.e.AI_GENERATION},I="__ABORTED__";async function S(e,r,n,a){let s=v(e),{state:d,aiTrackingContext:m}=o.zl.get(s);if("running"===d){(0,c.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let g=new AbortController;o.zl.set(s,{state:"running",abortController:g,aiTrackingContext:m,tasks:[]}),(0,_.Dl)({...m,...a});try{let e=new Promise(e=>{g.signal.addEventListener("abort",()=>{e(I)})}),i=r({params:n,abortController:g,onTasksUpdate:e=>{o.zl.set(s,r=>({...r,tasks:e}))},clientLifecycleId:m.clientLifecycleId}),l=await Promise.race([i,e]);if(l!==I)return o.zl.set(s,e=>({state:"done",result:l,aiTrackingContext:m,tasks:e.tasks})),(0,f.k)(),(0,_.as)({...m,...a,status:h.dM.COMPLETED,reason:h.F9.SUCCESS}),l;o.zl.set(s,e=>({state:"cancelled",aiTrackingContext:m,tasks:e.tasks})),(0,_.as)({...m,...a,status:h.dM.FAILED,reason:h.F9.STOPPED});return}catch(r){g.abort(),(0,c.x1)("quick-actions","Error encountered running action",{error:r}),r instanceof p.JB&&!1===r.reportToSentry||(0,l.$D)(T[e]??i.e.UNOWNED,r),o.zl.set(s,e=>({state:"error",error:r,originalParams:n,aiTrackingContext:m,tasks:e.tasks})),(0,_.as)({...m,...a,status:h.dM.FAILED,reason:h.F9.ERROR,errorReason:(0,u.sZ)(r)})}}function A(e){let r=v(e);if("running"===o.zl.get(r).state)return;let n=(0,_.Uu)(e);o.zl.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function w(e){let r=v(e);return o.zl.get(r)}function C(e){let r=v(e),n=(0,o.md)(r),{Sprig:i}=(0,d.A)();return(0,a.useEffect)(()=>{if(n){let{state:r,aiTrackingContext:a}=n,{ended:o,status:s,reason:l}=function(e){switch(e){case"cancelled":return{ended:!0,status:h.dM.FAILED,reason:h.F9.STOPPED};case"error":return{ended:!0,status:h.dM.FAILED,reason:h.F9.ERROR};case"done":return{ended:!0,status:h.dM.COMPLETED,reason:h.F9.SUCCESS};default:return{ended:!1,status:h.dM.FAILED,reason:h.F9.ERROR}}}(r);o&&(0,g.k)(i,e,a,s,l)}},[n,i,e]),n}function N(e){let r=v(e),n=o.zl.get(r);"running"===n.state&&n.abortController.abort()}function L(e,r,n){let i=C(e),o=(0,a.useCallback)(async a=>(s.J6.startVital(e,{context:n}),await S(e,r,a,n)),[e,r,n]),l=(0,a.useCallback)(()=>{s.J6.stopVital(e,{context:n}),N(e)},[e,n]);return{...i,start:o,stop:l}}},63890:(e,r,n)=>{n.d(r,{m:()=>R});var a=n(848318),i=n(301168),o=n(320953),s=n(967688),l=n(511806),c=n(900003),d=n(80100),u=n(31898),p=n(877146),m=n(747822),_=n(38011),h=n(652576),g=n(982588),f=n(531851),E=n(345121),y=n(730143),b=n(180294),v=n(125761),T=n(280361),I=n(324747),S=n(259964),A=n(764474),w=n(542097),C=n(916469),N=n(753474),L=n(966681),O=n(849911);function R({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:E,publishedExtension:R,canRun:D,canRequest:k}=e,M=(0,i.wA)(),{close:F}=(0,O.cq)(),x=g.EO(R),U=g.OY(R),B=U&&g.gn(R),G=(0,w.Kp)(e),V=function(e){let r=(0,v.TA)(),n=(0,i.d4)(e=>e.authedActiveCommunityProfile),o=g.ej(e);return a.useCallback(()=>{if(!e)return;let a=I.aL.QUICK_ACTIONS;(0,l.mG)(e,a,r,n?.id),o()},[e,r,n,o])}(R),H=a.useCallback(()=>{M(d.v({}))},[M]),z=(0,_.Gt)(E.plugin_id,"quick-actions"),K=(0,C.q8)(E),W=(0,C.U4)(E),j=(0,C.S3)({submenuIsShown:W,extension:E,displayAboveTarget:n}),Y=(0,L.t)(E,K),$=(0,h.V2)(),q=a.useCallback(()=>{F(),T.R.instance.handleUpgrade(p.Q7.RUN_PLUGIN)},[F]),X=a.useCallback(()=>{(0,A.k0)(E)?o.l7.user("insert-widget",()=>P(E)):K&&r?j(r.current):z(),K||G(),Y()&&F()},[E,K,r,G,Y,j,z,F]),J=(0,y.q5)(),Z=(0,f.RW)(),Q=a.useCallback(()=>{if(!J||!J.parentOrgId)return;let e={extension:{pluginId:E.plugin_id,iconUrl:E.redirect_icon_url,name:E.name},isWidget:(0,A.k0)(E),orgId:J.parentOrgId,workspaceDetails:Z.loaded?Z.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,S.wN)(J.editorType)};M((0,u.to)({type:N.S,data:e}))},[M,E,J,Z]),ee=(0,b.sZ)(),et=(0,m.a)(ee?.id,E.plugin_id,Z.loaded?Z.data?.workspaceId:void 0);return a.useMemo(()=>{let e=R?.monetized_resource_metadata;return x&&!U&&e?$?{onAction:V,actionText:(0,c.XR)(e)}:{onAction:q,actionText:(0,c.XR)(e)}:x&&B?{onAction:H,actionText:(0,s.t)("qa.extensions.update_payment")}:D?{onAction:X,actionText:(0,s.t)("qa.extensions.run")}:et?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:k?{onAction:Q,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[x,U,R,V,B,H,D,k,et,Q,X,q,$])}let P=e=>{(0,E.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},241211:(e,r,n)=>{n.d(r,{$L:()=>m,Be:()=>u,NP:()=>h,Nv:()=>_,OW:()=>d,RA:()=>s,U3:()=>p,W3:()=>i,gc:()=>l,mP:()=>o,qE:()=>a,tq:()=>f,uP:()=>g});var a=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(a||{});let i="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",p="quick_actions_v1",m="quick_actions_v2",_="frecency",h="string-match",g="extensions",f="assets"},307843:(e,r,n)=>{n.d(r,{Ev:()=>b,Fi:()=>I,M$:()=>w,Mq:()=>S,WZ:()=>N,eg:()=>v,mi:()=>A,qM:()=>C,qz:()=>O,zF:()=>L});var a=n(848318),i=n(301168),o=n(660376),s=n(382902),l=n(755595),c=n(989232),d=n(315933),u=n(353231),p=n(539829),m=n(730143),_=n(748790),h=n(113173),g=n(131258),f=n(803107),E=n(311654),y=n(241211);function b(){let e=(0,s.md)(m.ze)||"",r=(0,i.d4)(e=>e.selectedView),n=(0,s.md)(f.rE),o=n?.source||"",l=(0,s.md)(p.wg)?y.qE.EDITOR:y.qE.VIEWER,h=(0,_.PE)();return(0,a.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:s,currentSelection:p,module:m,moduleFilters:_,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:a,searchQuery:i,numSearchResults:s,currentSelection:p,module:m,moduleFilters:_,qaVersion:g,fileKey:e,searchLatencyMs:d.sn.tryStop(y.gc),searchQueryResults:f,source:o,rankingAlgorithm:v(m),productType:(0,u.v5)(r,null),role:l,hasAiFeatureAccess:h},(0,c.trackEvent)(y.RA,E,{forwardToDatadog:!0})},[e,h,l,r,o])}function v(e){switch(e){case g.Jc.ALL:return(0,h.h8)()?y.Nv:y.NP;case g.Jc.EXTENSIONS:return y.uP;case g.Jc.ASSETS:case g.Sn.ASSETS_TAB_DETAIL_VIEW:return y.tq;default:(0,o.xb)(e)}}function T(e){if(!e)return!1;if(e===g.Jc.ALL||e===g.Jc.ASSETS||e===g.Jc.EXTENSIONS)return!0;switch(e){case g.Sn.ASSETS_TAB_DETAIL_VIEW:case g.Sn.VISUAL_SEARCH:return!0;case g.Sn.EXTENSION_DETAILS:case g.Sn.REGENERATE_TEXT_TOAST:case g.Sn.MAGIC_LINK_DONE_TOAST:case g.Sn.BACKGROUND_REMOVE_TOAST:case g.Sn.UPSCALE_IMAGE_TOAST:case g.Sn.RENAME_LAYERS_TOAST:case g.Sn.GENERATE_IMAGE:case g.Sn.EDIT_IMAGE:case g.Sn.IMAGE_TO_DESIGN:case g.Sn.IMAGE_TO_DESIGN_ORACLE:case g.Sn.MAGIC_LINK:case g.Sn.PLUGIN_PARAMETER_ENTRY:case g.Sn.PLUGIN_SUBMENU_ENTRY:case g.Sn.TRANSLATE:case g.Sn.REWRITE:case g.Sn.SHORTEN:case g.Sn.FIRST_DRAFT:case g.Sn.FIRST_DRAFT_KIT_PICKER:case g.Sn.FIRST_DRAFT_MAKE_CHANGES:case g.Sn.FIRST_DRAFT_LINT:case g.Sn.FIRST_DRAFT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT:case g.Sn.MAKE_EDITS:case g.Sn.FIRST_DRAFT_FINE_TUNE:case g.Sn.ASSISTANT_CHAT:case g.Sn.LINK_TO_COMPONENT:case g.Sn.FOR_TESTING:case g.Sn.FIGJAM_AI_CONTEXTUAL_FEATURES:case g.Sn.LIBRARY_CSS_EXTRACTION:return!1;default:(0,o.xb)(e)}}function I({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.xb)(r))}function S(e){(0,c.trackEvent)(y.W3,e,{forwardToDatadog:!0})}function A(e){(0,c.trackEvent)(y.OW,e,{forwardToDatadog:!0})}function w(e,r){return{...e,onAction:n=>{var a;let i=n.shortcut;a={source:r,shortcutText:i?(0,E.OZ)(i):"",actionText:e.text||""},(0,c.trackEvent)(y.Be,a),e.onAction&&e.onAction(n)}}}function C(e){let r=s.zl.get(O);return!r.has(e)&&(r.add(e),s.zl.set(O,r),!0)}function N(){return s.zl.get(p.wg)?y.qE.EDITOR:y.qE.VIEWER}let L=(0,s.eU)(null),O=(0,s.E2)("ai_actions_used",new Set,l.z.set(l.z.string()))},122586:(e,r,n)=>{n.d(r,{$I:()=>k,Jf:()=>F,KY:()=>U,RM:()=>G,gn:()=>B,h$:()=>H,iP:()=>x,jD:()=>M});var a=n(186606),i=n(768618),o=n(19180),s=n(382902),l=n(989232),c=n(315933),d=n(476254),u=n(182317),p=n(952039),m=n(371366),_=n(453370),h=n(995218);n(696786);var g=n(353231),f=n(433166),E=n(274466),y=n(259964),b=n(197696);n(697051);var v=n(748790),T=n(944239),I=n(345394),S=n(880801),A=n(241211),w=n(307843),C=n(131258),N=n(803107),L=n(661601),O=n(511137),R=n(27855);let P=(0,s.eU)(null),D=(0,s.eU)(new Set);function k({trackingData:e,moduleToOpen:r}){let n=d.D.dispatch;if((0,f.T)(d.D.getState().progressBarState.mode)||"fullscreen"!==d.D.getState().selectedView.view)return;let o=B(r);(0,w.Fi)({isQAV2:o,moduleToOpen:r})&&c.sn.start(A.mP);let l=d.D.getState(),h={keyboardShortcut:"",currentSelection:(0,E.l)(l),fileKey:l.openFile?.key??"",productType:(0,g.v5)(l.selectedView,null),role:(0,w.WZ)(),hasAiFeatureAccess:(0,v.W7)(),...e};if(s.zl.set(w.zF,e.source),s.zl.set(N.rE,h),o){if(s.zl.set(N.Bu,!0),s.zl.set(I.oh,{type:"close",source:I.Yg.ToolSelected}),s.zl.get(N.dd)||(s.zl.set(N.dd,(0,u.g)()),s.zl.set(m.q4)),s.zl.set(P,null),r){if(r.beforeModuleOpen){let e=function(){let e=s.zl.get(N.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:i.UN().getCurrentPage()?.directlySelectedNodes,searchQuery:s.zl.get(N.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(s.zl.set(N.Lk,r.module),r.filter&&s.zl.set(O.t,r.filter)):s.zl.set(N.YH,e=>[{module:r.module,name:r.name},...e])}a.qmM.setDefaultTool(),n(p.F.dequeue({matchTimeout:"ephemeral"}))}else n(_.j7({type:b.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,w.Mq)({...h,qaVersion:A.U3,quickActionsSessionId:e,timeToShowModal:c.sn.tryStop(A.mP)||0,module:C.Jc.ALL})}}}))}function M(e,r,n){if(s.zl.get(N.Bu)){if(!n.forceClose&&s.zl.get(N.ZG))return!1;s.zl.set(N.Bu,!1),s.zl.set(N.dd,null),(0,R.R)(),(0,L.b)()}else r?.type===b.jv&&e(_.oB());return!0}function F(e){return s.zl.get(N.Bu)||e?.type===b.jv}function x(e,r={},n){!s.zl.get(N.Bu)&&(!(!function(e){for(let r of Object.values(S.JT))if(e===r)return r;return null}(e)||(0,v.W7)())||s.zl.get(D).has(e)||(s.zl.get(N.dd)||s.zl.set(N.dd,(0,u.g)()),s.zl.set(P,{action:e,payload:r,guid:n})))}function U(e={}){let{dismissedAction:r,actionToClear:n}=e;if(s.zl.get(P)){if(n&&n!==s.zl.get(P)?.action)return;if(s.zl.set(P,null),r){let e=s.zl.get(D);s.zl.get(D).has(r)||s.zl.set(D,new Set([...e,r])),l.definedAnalyticsHandler.trackDefinedEvent("ai_productivity.actions_suggestion_dismissed",{action:r})}}}function B(e){let r=a.Ez5.uiState().isUI3.getCopy(),n=d.D.getState().selectedView,i=(0,h.JV)(n),s=[y.nT.Figmake];return(0,o.k)().figjam_quick_actions_v2||s.push(y.nT.Whiteboard),!!(i&&!s.includes(i)&&(r||e))}let G=(0,T.n)((e,r)=>{let n=r?.isUI3??a.Ez5.uiState().isUI3.getCopy(),i=d.D.getState().selectedView,o=r?.editorType??(0,h.JV)(i);return!!(o&&(o===y.nT.Design||o===y.nT.Slides)&&(n||e))});class V{isQuickActionsShown(){return F(d.D.getState().dropdownShown)}}function H(){new V}},803107:(e,r,n)=>{n.d(r,{Bu:()=>h,Bw:()=>l,JB:()=>y,Lk:()=>p,Q8:()=>d,Rt:()=>u,TT:()=>c,YH:()=>_,ZG:()=>E,dd:()=>m,fq:()=>f,hw:()=>v,jh:()=>b,rE:()=>g});var a=n(848318),i=n(382902),o=n(182317),s=n(131258);let l=(0,i.tx)({}),c=(0,i.tx)(null),d=(0,i.tx)(""),u=(0,i.eU)((0,o.g)());(0,i.eU)({loaded:!1,extensions:[]});let p=(0,i.tx)(s.Jc.ALL),m=(0,i.tx)(null);(0,i.eU)(null);let _=(0,i.tx)([]);(0,i.Iz)(e=>(0,i.eU)(r=>{let[n]=r(_);return n?.name===e}));let h=(0,i.eU)(!1),g=(0,i.eU)(null),f=(0,i.eU)(0),E=(0,i.eU)(!1);function y(){let e=(0,i.AY)(c);return(0,a.useCallback)(()=>{e()},[e])}function b(){let e=(0,i.AY)(c),r=(0,i.AY)(d),n=(0,i.AY)(_),o=(0,i.AY)(p);return(0,a.useCallback)(()=>{e(),r(),n(),o()},[n,r,e,o])}function v(){let e=(0,i.AY)(d);return(0,a.useCallback)(()=>{e()},[e])}(0,i.eU)(null),(0,i.eU)(null)},291686:(e,r,n)=>{n.d(r,{P:()=>l});var a=n(848318),i=n(544405),o=n(271020);n(720522);var s=n(708115);function l(e){let r=a.createElement(i.h,null,e.label);return a.createElement("div",{className:s.kv},a.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},965:(e,r,n)=>{n.d(r,{r:()=>f});var a=n(848318),i=n(353317),o=n(128080),s=n.n(o),l=n(865114),c=n(857607),d=n(781239),u=n(156974),p=n(297638),m=n(511067),_=n(335744),h=n(196921),g=n(416406);function f(e){return a.createElement(y,{...e,buttonComponent:E})}function E(e){let r=d.rf(d.Pt(e,"dropdownIconButton"),"click",()=>{e.onSelect()});return a.createElement(i.d,{"aria-label":e.iconAriaLabel,"aria-expanded":e.isActive,variant:"secondary",onClick:e=>{e.stopPropagation(),r()}},e.iconSvg)}function y(e){let r=a.useRef(null),n=e.buttonRef||r,i=(0,a.useId)(),o=e.id??i,{toggle:d,hide:f,showing:E}=(0,m.BK)(o),y=(0,l.ZC)(E),[b,v]=(0,a.useState)(),T=()=>{let e=n.current;e&&(v(e.getBoundingClientRect()),document?.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),d())},I=(0,a.useCallback)(()=>{f()},[f]),{onFocus:S,active:A}=e;(0,a.useEffect)(()=>{S&&A&&S()},[A,S]),(0,g.kz)(c.Uz.ENTER,r=>{if(!r.target||!A)return;let n=e.items.filter(e=>"checkableOption"===e.type).find(e=>e.text===r.target.text);n&&w(n),T()},A);let w=(0,a.useCallback)(r=>{r.disabled||(r.onSelectOverride?r.onSelectOverride():e.onSelectedChange&&r.value&&e.onSelectedChange(r.value),I())},[I,e]);return(0,a.useEffect)(()=>{void 0!==y&&y!==E&&e.onVisibleChange?.(E)},[y,e,E]),a.createElement("div",null,a.createElement("div",{ref:n},a.createElement(h.c,{active:!!A},a.createElement(e.buttonComponent,{...e,onSelect:T,isActive:E}))),E&&b&&a.createElement(_.Jz,{"aria-labelledby":e.buttonId,autoHeight:!0,autofocusPrevOnDismount:!0,displayAboveTarget:e.displayAboveTarget,focusContainerOnMount:e.focusContainerOnMount,hideDropdown:I,id:e.menuId,lean:e.lean||"left",maxWidth:e.maxWidth,options:e.items.map((r,n)=>{switch(r.type){case"header":return a.createElement(u.c$,{key:n,disabled:!0},a.createElement("div",{className:p.s.overflowHidden.ellipsis.block.$},r.text));case"separator":return a.createElement(u.wv,{key:n});case"option":return a.createElement(u.c$,{key:n,disabled:r.disabled,onClick:()=>w(r)},a.createElement("div",{className:p.s.overflowHidden.ellipsis.block.$},r.text));case"checkableOption":return a.createElement(u.MM,{key:n,disabled:r.disabled,onClick:()=>w(r),checked:s()(e.selected,r.value)},a.createElement("div",{className:p.s.overflowHidden.ellipsis.block.$},r.text))}}),targetRect:b}))}},697587:(e,r,n)=>{n.d(r,{y:()=>u});var a=n(848318),i=n(264478),o=n(297638),s=n(967688),l=n(17753),c=n(880801),d=n(215039);function u({variant:e,helpUrlVariant:r}){let[n,u]=a.useState(!1);return a.createElement(i.N_,{className:o.s.hAuto.flexShrink0.$,"data-tooltip":(0,s.t)("qa.learn_more"),"data-tooltip-show-above":!0,"data-tooltip-type":l.Ib.TEXT,href:function(e){switch(e){case c.JT.TRANSLATE_TEXT:case c.JT.REWRITE_TEXT:case c.JT.SHORTEN_TEXT:return c.pY;case c.JT.SLIDES_REWRITE_TEXT:return c.rr;case c.JT.FIRST_DRAFT:case c.JT.FIRST_DRAFT_MAKE_CHANGES:case c.JT.FIRST_DRAFT_MAKE_KIT:case c.JT.FIRST_DRAFT_MAKE_KIT_DEBUG:case c.JT.FIRST_DRAFT_COMPONENTIZE:case c.JT.FIRST_DRAFT_SUGGEST_PROPS:case c.JT.FIRST_DRAFT_LINTING:case c.JT.FIRST_DRAFT_DEBUG:case c.JT.FIRST_DRAFT_FINE_TUNE:return c.zw;case c.JT.IMAGE_FILL:case c.JT.GENERATE_IMAGE:case c.JT.EDIT_IMAGE:case c.JT.REMOVE_BACKGROUND:case c.JT.UPSCALE_IMAGE:return c.LC;case c.JT.AUTO_RENAME_LAYERS:return c.gj;case c.JT.MAGIC_LINK:return c.Xy;case c.JT.CONTENT_FILL:return c.KL;case c.JT.BOARD_TO_DECK:return c.TJ;case c.JT.SLIDES_GENERATE_SPEAKER_NOTES:return c.GI;case c.JT.FIND_INSPIRATION:case c.JT.TEXT_SEARCH:return c.IA;case c.JT.SUGGEST_TEXT:return c.iP;case c.JT.IMAGE_TO_DESIGN:case c.JT.IMAGE_TO_DESIGN_ORACLE:case c.JT.MAKE_EDITS:case c.JT.ASSISTANT_CHAT:case c.JT.CODE_CHAT:case c.JT.FIGMAKE:case c.JT.LIVING_DESIGNS:case c.JT.PUBLISH_LIBRARY_FOR_AI:case c.JT.SLIDES_GENERATE_OUTLINE:case c.JT.SLIDES_OUTLINE_TO_DECK:case"default":return c.d7;case c.JT.WHITEBOARD_GENERATE_CONTENT:case c.JT.SUMMARIZE_STICKIES:case c.JT.SORT_STICKIES_BY_TOPIC:case c.JT.SORT_STICKIES_BY_COLOR:case c.JT.SORT_STICKIES_BY_AUTHOR:case c.JT.SORT_STICKIES_BY_STAMP_COUNT:case c.JT.SORT_STICKIES_BY_STAMP_TYPE:case c.JT.MIND_MAP_GENERATE_IDEAS:case c.JT.CREATE_IDEAS:case c.JT.CANVAS_GENERATE_IMAGE:return c.UW}}(r),onBlur:()=>{u(!1)},onClick:e=>e.stopPropagation(),onFocus:()=>{u(!0)},target:"_blank",trusted:!0},a.createElement(d.E,{variant:e,focused:n},(0,s.tx)("qa.ai_beta")))}},416406:(e,r,n)=>{n.d(r,{F1:()=>S,TH:()=>v,kz:()=>b,qI:()=>m,s3:()=>g});var a=n(848318),i=n(660376),o=n(857607),s=n(656329),l=n(781239),c=n(146859),d=n(764872),u=n(48912),p=n(131258);function m(){let[e,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=e=>{"Tab"===e.key&&h((0,u.x)())&&r(document.activeElement!==document.body)},n=()=>{r(!1)};return document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0)}},[]),e}let _=a.createContext({registerKeyDownHandler:(e,r,n,a)=>{},removeKeyDownHandler:(e,r,n)=>{},setAllowDefaultTabOverride:e=>{}}),h=(e,r)=>{if(!e)return!1;if(void 0!==r)return r;switch(e){case p.Jc.ALL:case p.Jc.EXTENSIONS:case p.Sn.PLUGIN_PARAMETER_ENTRY:case p.Sn.PLUGIN_SUBMENU_ENTRY:case p.Jc.ASSETS:case p.Sn.ASSETS_TAB_DETAIL_VIEW:case p.Sn.ASSISTANT_CHAT:case p.Sn.FIRST_DRAFT_MAKE_KIT:case p.Sn.FIRST_DRAFT_LINT:case p.Sn.FIRST_DRAFT_DEBUG:case p.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case p.Sn.LINK_TO_COMPONENT:case p.Sn.IMAGE_TO_DESIGN:case p.Sn.IMAGE_TO_DESIGN_ORACLE:case p.Sn.FIRST_DRAFT_KIT_PICKER:return!1;case p.Sn.BACKGROUND_REMOVE_TOAST:case p.Sn.UPSCALE_IMAGE_TOAST:case p.Sn.FIRST_DRAFT_MAKE_CHANGES:case p.Sn.MAKE_EDITS:case p.Sn.FIRST_DRAFT_FINE_TUNE:case p.Sn.MAGIC_LINK:case p.Sn.MAGIC_LINK_DONE_TOAST:case p.Sn.REGENERATE_TEXT_TOAST:case p.Sn.RENAME_LAYERS_TOAST:case p.Sn.SHORTEN:case p.Sn.EXTENSION_DETAILS:case p.Sn.TRANSLATE:case p.Sn.VISUAL_SEARCH:case p.Sn.FIGJAM_AI_CONTEXTUAL_FEATURES:case p.Sn.REWRITE:case p.Sn.FIRST_DRAFT:case p.Sn.GENERATE_IMAGE:case p.Sn.EDIT_IMAGE:case p.Sn.LIBRARY_CSS_EXTRACTION:case p.Sn.FOR_TESTING:return!0;default:(0,i.xb)(e)}};function g({name:e,recordingKey:r,children:n,forwardUnhandledEventsToFullscreen:i=!0}){let s=a.useRef(new Map),p=a.useRef(null),[m,g]=a.useState(void 0),f=(0,u.x)(),E=a.useCallback(e=>{"Tab"!==e.key||h(f,m)||e.preventDefault();let r=I({key:e.keyCode,modifier:[e.metaKey?o.xH.META:void 0,e.ctrlKey?o.xH.CONTROL:void 0,e.altKey?o.xH.ALT:void 0,e.shiftKey?o.xH.SHIFT:void 0].filter(e=>!!e)}),n=!1;for(let[a,i]of s.current)a.endsWith(r)&&(i(e),n=!0);return!n&&i&&(n=(0,c.jr)(e)),n},[f,m,i]),y=(0,l.v_)(r,"keydown",e=>{E(e)}),b=(0,l.fo)((0,l.Pt)(r,"fullscreen"),"keydown",e=>{E(e.event)&&e.accept()});return a.useEffect(()=>{let e=p.current;if(e)return e.addEventListener("keydown",y),()=>{e.removeEventListener("keydown",y)}},[y]),a.createElement(_.Provider,{value:{registerKeyDownHandler:(e,r,n,a)=>{let i=T({id:e,key:r,modifier:n});s.current.set(i,a)},removeKeyDownHandler:(e,r,n)=>{let a=T({id:e,key:r,modifier:n});s.current.delete(a)},setAllowDefaultTabOverride:g}},a.createElement(d.vL,{name:e,handleKeyDown:b,focusOnMount:!0},a.createElement("div",{ref:p},n)))}function f(e){return e!==o.xH.META||s.Ay.mac?e:o.xH.CONTROL}function E({key:e,modifier:r}){return r?{key:e,modifier:r.map(f)}:{key:e}}function y(e,r,n,s){let l=a.useMemo(()=>r.map(E),[r]),c=a.useId(),{registerKeyDownHandler:d,removeKeyDownHandler:u}=a.useContext(_),p=a.useCallback(e=>{for(let{key:r,modifier:a}of l)if(e.keyCode===r&&(!a||a.every(r=>(function(e,r){switch(e){case o.xH.META:return r.metaKey;case o.xH.CONTROL:return r.ctrlKey;case o.xH.ALT:return r.altKey;case o.xH.SHIFT:return r.shiftKey;default:(0,i.xb)(e)}})(r,e)))){n(e,{key:r,modifier:a});return}},[n,l]);a.useEffect(()=>(s?l.forEach(({key:e,modifier:r})=>{d(c,e,r??[],p)}):l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])}),()=>{l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])})}),[s,l,p,d,u,c])}function b(e,r,n=!0){y("keydown",[{key:e}],r,n)}function v(e,r,n=!0){y("keydown",e,r,n)}function T({id:e,key:r,modifier:n}){return`${e}-${I({key:r,modifier:n})}`}function I(e){return`${e.key}-${e.modifier?.join("-")??""}`}function S(e){return I(e)}},116319:(e,r,n)=>{n.d(r,{XG:()=>G,aU:()=>H});var a=n(848318),i=n(301168),o=n(658029),s=n(531788),l=n(682196),c=n(1511),d=n(124810),u=n(82433),p=n(19180),m=n(536384),_=n.n(m),h=n(63163),g=n(857607),f=n(781239),E=n(755534),y=n(297638),b=n(967688),v=n(744577),T=n(142896),I=n(353231),S=n(549899),A=n(821503),w=n(331208),C=n(849911),N=n(219706),L=n(345174),O=n(441764),R=n(965),P=n(697587),D=n(416406),k=n(600651),M=n(257688),F=n(685098);function x(){return a.createElement("div",{className:y.s.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.$},(0,b.tx)("whiteboard.ai_modal.hint_tab"))}function U({promptHistory:e,onChange:r,textAreaRef:n}){let i=(0,a.useMemo)(()=>{let r=[];return e.length>0&&(r.push({type:"header",text:(0,b.t)("first_draft.prompt_history_header")}),r.push(...e.map(e=>({type:"option",value:e,text:e})))),r},[e]);return a.createElement(R.r,{displayAboveTarget:!0,focusContainerOnMount:!0,iconAriaLabel:(0,b.t)("first_draft.prompt_history_label"),iconSvg:a.createElement(l.A,{style:{marginLeft:-8,marginRight:-8}}),items:i,lean:"right",maxWidth:320,onSelectedChange:e=>{r(e),n.current?.focus()},onVisibleChange:e=>{e||n.current?.focus()},selected:null})}let B=(0,a.forwardRef)(({value:e,onChange:r,recordingKey:n,minLength:i,maxLength:o,verticalPromptLayout:s,height:l,maxHeight:c,onFocus:d,placeholder:u,useClose:p=!1,suggestion:m},_)=>{let b=(0,a.useRef)(null);(0,h.h)(()=>{let e=_?.current;e&&!d&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length),e.addEventListener("keydown",e=>{e.keyCode===g.Uz.ENTER&&0===(0,g.sN)(e)&&e.stopPropagation()}));let r=b.current;r&&r.scrollToBottom()}),(0,S.C)(_);let v=f.AF(f.Pt(n,"textArea"),"change",e=>{r(e.currentTarget.value)}),T=V(s,p);return a.createElement(E.P,{height:l,maxHeight:c,ref:b},a.createElement("div",{className:y.s.grid.borderBox.overflowWrapAnywhere.$,style:T},a.createElement("textarea",{ref:_,"aria-describedby":"textarea-desc",className:y.s.resizeNone.borderBox.bgTransparent.overflowHidden.zIndex1.$,"data-testid":"textArea",maxLength:o,minLength:i,onChange:v,onFocus:d,placeholder:u,rows:1,style:{gridArea:"1 / 1 / 2 / 2"},value:e}),a.createElement("span",{id:"textarea-desc",className:"x1s85apg"},m),a.createElement("div",{className:y.s.preWrap.invisible.borderBox.$,style:{gridArea:"1 / 1 / 2 / 2"}},function(e){return e.endsWith("\n")?e+"\u200B":e}(e))))});function G({action:e,value:r,onChange:n,suggestion:l,suggestionPills:u=[],promptHistory:m=[],disableAutoComplete:h=!1,recordingKey:E,onBack:S,featureNameForInstrumentation:N,refocusToInput:L=!1,minLength:O,maxLength:R,topNavContent:k,bottomContent:M,growVertically:G,width:H,textAreaRef:z,useClose:K=!1}){let W=(0,a.useRef)(null),j=z||W,Y=l&&r!==l&&l.startsWith(r),$=!h&&Y,q=l?.slice(r.length)||"",{isRoot:X,pop:J}=(0,C.cq)(),Z=!(r.length>0||M),Q=Z&&u.length>0,ee=(0,p.k)().first_draft_prompt_history&&m.length>0&&Z,et=(0,i.Pj)().getState(),er=(0,D.qI)(),en=document.activeElement?.tagName==="TEXTAREA";(0,D.kz)(g.Uz.TAB,e=>{$&&(!er||en)&&(e.preventDefault(),n(l),(0,I.ds)("actions_prompt_tab_completed",et.openFile?.key,et,{feature:N,suggestion:l}))}),(0,w.y)(r,j),(0,A.z)();let ea=!!(S||!X)&&!K,ei=!k,eo=!ei;L&&j.current?.focus();let es=V(ei,K);return a.createElement("div",{className:_()(y.s.borderBox.p4.mb8.colorBgSecondary.wFull.flex.flexColumn.bRadius5.relative.$),style:v.sx.if(eo,v.sx.add(v.sx.if(G,{minHeight:"128px"},{height:"128px"}))).add(v.sx.if(G,{width:`${H}px`})).$,onClick:()=>{let e=j?.current;e&&e.focus()}},a.createElement("div",{className:_()(y.s.flex.relative.overflowHidden.if(eo,y.s.flexColumn).$,T.Dm),style:eo&&!G?{height:128}:{}},(ea||eo)&&a.createElement("div",{className:y.s.h24.flex.flexRow.relative.justifyBetween.$},a.createElement("div",{className:y.s.flex.flexRow.gap4.$},ea&&a.createElement(o.K,{recordingKey:f.Pt(E,"backButton"),onClick:S||J,"aria-label":(0,b.t)("qa.go_back")},a.createElement(c.C,null))),eo&&a.createElement(a.Fragment,null,a.createElement("div",{className:y.s.flex.flexGrow1.$},k),a.createElement("div",{className:y.s.flex.pr4.$},a.createElement(P.y,{helpUrlVariant:e})))),a.createElement("div",{className:y.s.flex1.relative.font13.ml8.$,style:v.sx.add({lineHeight:"24px"}).if(!G,{height:"96px"}).$},a.createElement("div",{className:y.s.if(!G,y.s.absolute.top0.left0.right0).$},a.createElement(B,{ref:j,height:G?void 0:96,maxHeight:96,maxLength:R,minLength:O,onChange:n,recordingKey:E,suggestion:l,useClose:K,value:r,verticalPromptLayout:ei})),Y&&a.createElement("div",{className:_()(y.s.absolute.top0.wFull.selectNone.eventsNone.colorTextTertiary.overflowWrapAnywhere.$,$?F.m:""),style:es},a.createElement("span",{className:y.s.invisible.$},r),a.createElement("span",{className:y.s.$},q),$&&a.createElement("span",{className:y.s.inlineFlex.itemsCenter.ml4.$},a.createElement(x,null))),ei&&a.createElement("div",{className:y.s.absolute.flex.flexRow.$,style:{top:K?0:4,right:K?0:4}},a.createElement(P.y,{helpUrlVariant:e}),K&&a.createElement(o.K,{recordingKey:f.Pt(E,"closeButton"),onClick:S||J,"aria-label":(0,b.t)("common.close")},a.createElement(d.A,{style:{"--color-icon":"var(--color-icon-secondary)"}}))))),(Q||ee)&&a.createElement("div",{className:_()(y.s.wFull.flex.flexWrap.pre.pr16.gap8.$,y.s.absolute.zIndex1.$,y.s.overflowHidden.$),style:{bottom:8,left:8,height:24}},ee&&a.createElement(U,{promptHistory:m,onChange:n,textAreaRef:j}),Q&&u.map((e,r)=>a.createElement(s.$n,{key:r,variant:"secondary",onClick:()=>{n(e.prompt),j.current?.focus(),N&&(0,I.ds)("actions_prompt_suggestion_clicked",et.openFile?.key,et,{feature:N,suggestion:e.prompt})}},e.label))),M&&a.createElement("div",{className:_()(y.s.wFull.$)},M))}function V(e,r){return e?{paddingRight:58+(r?24:0),paddingLeft:r?4:0}:{paddingLeft:8,paddingRight:8,paddingTop:4}}function H({value:e,onChange:r,recordingKey:n,minLength:i=1,maxLength:o,aiTrackingContext:s,onRun:l,promptHistory:c=[]}){let d=(0,a.useRef)(null);(0,A.z)();let[p,m]=(0,a.useState)(!1),_=(0,a.useCallback)(()=>{m(!0)},[]),h=(0,M.o)();return a.createElement("div",{className:"xh8yej3"},a.createElement("div",{className:T.Dm},a.createElement("div",{...u.Ay.props(z.prompt(h-16))},c.length>0&&0===e.length&&a.createElement("div",{className:"x1kpt5kx"},a.createElement(U,{promptHistory:c,onChange:r,textAreaRef:d})),a.createElement("div",{className:"x98rzlu xsgzr2y"},a.createElement(B,{ref:d,maxHeight:100,maxLength:o,minLength:i,onChange:r,onFocus:_,placeholder:(0,b.t)("fullscreen_actions.edit_image.placeholder"),recordingKey:n,value:e,verticalPromptLayout:!1})))),p&&a.createElement(k.B,{fullWidth:!0,justify:"end"},a.createElement(O.r,{shortcuts:[{key:g.Uz.ENTER,modifier:[g.xH.META]}],onAction:e=>{s&&(0,N.SX)({...s,...(0,N.Q0)(e),interaction:L.NI.GENERATE}),l()},disabled:e.trim().length<i,recordingKey:(0,f.Pt)(n,"enter")},(0,b.tx)("fullscreen_actions.edit_image"))))}let z={prompt:e=>[{boxSizing:"x9f619",padding:"x9dr4nv",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,marginBottom:"x6drftx",backgroundColor:"x1v8gsql",maxWidth:null==e?null:"x10cxd3o",display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,position:"x1n2onr6",$$css:!0},{"--maxWidth":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]}},16309:(e,r,n)=>{n.d(r,{vj:()=>O});var a=n(848318),i=n(658029),o=n(122019),s=n(124810);n(82433);var l=n(536384),c=n.n(l),d=n(781239),u=n(720522),p=n(297638),m=n(967688),_=n(142896),h=n(675257),g=n(17753),f=n(549899),E=n(821503),y=n(331208),b=n(849911),v=n(845026),T=n(620637),I=n(600651),S=n(590676),A=n(377036);let w="search";function C({onClear:e,focus:r}){return a.createElement(i.K,{"aria-label":(0,m.t)("search.search_bar.clear"),onClick:n=>{n.stopPropagation(),e(),r()},htmlAttributes:{"data-tooltip":(0,m.t)("search.search_bar.clear"),"data-tooltip-type":g.Ib.TEXT}},a.createElement(o.C,{style:{"--color-icon":"var(--color-icon-secondary)"}}))}let N=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,placeholder:n,onPaste:i},o)=>a.createElement("input",{ref:o,"aria-autocomplete":"list",className:c()(S.Rt,_.Dm),"data-component":"QuickActionsV2SearchInput","data-testid":"quick-actions-search-input",dir:"auto",maxLength:150,onChange:r,onPaste:i,placeholder:n??(0,h.A)("quick-actions-with-wand-modal-placeholder"),spellCheck:!1,type:"search",value:e}));function L({onSearchChange:e}){let r=a.useRef(null);return{searchInputRef:r,isRoot:(0,b.cq)().isRoot,focus:(0,v.Y)(r).focus,onSearchChangeInner:d.AF(w,"change",r=>{e(r.currentTarget.value)})}}let O=(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:i,placeholder:o,forceRoot:s,searchTag:l,onPaste:m,showIcon:_=!0},h)=>{let{searchInputRef:g,isRoot:b,focus:v,onSearchChangeInner:O}=L({onSearchChange:r});(0,a.useImperativeHandle)(h,()=>({focus:v}),[v]),(0,f.C)(g),(0,E.z)(s),(0,y.y)(e,g);let R=b||s?a.createElement(u.B,{svg:A.A,className:S.qc}):a.createElement("div",{className:p.s.pl4.pr4.$},a.createElement(T.o,{recordingKey:(0,d.Pt)(w,"back-button")}));return a.createElement("div",{className:c()(S.$P)},_?R:a.createElement("div",{className:p.s.pl4.pr4.$}),l,a.createElement(N,{onSearchChange:O,placeholder:o,searchQuery:e,onPaste:m,ref:g}),n&&e?a.createElement("div",{className:p.s.flex.mr6.$},a.createElement(C,{onClear:n,focus:v})):i?a.createElement("div",{className:p.s.mr6.$},a.createElement(I.b,null,i)):null)});(0,a.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:o,placeholder:l,forceRoot:c,searchTag:d,onPaste:_,showIcon:h=!0},g)=>{let{searchInputRef:v,focus:T,onSearchChangeInner:w}=L({onSearchChange:r});(0,a.useImperativeHandle)(g,()=>({focus:T}),[T]),(0,f.C)(v),(0,E.z)(c),(0,y.y)(e,v);let O=a.createElement(u.B,{svg:A.A,className:S.qc}),{close:R}=(0,b.cq)();return a.createElement("div",{className:"x78zum5 x6s0dn4 xkh2ocl xg2d0mh xf7z5ut"},a.createElement("div",{className:"x1iyjqo2 x78zum5 x6s0dn4 x1sxf85j x1v8gsql"},h?O:a.createElement("div",{className:p.s.pl4.pr4.$}),d,a.createElement(N,{onSearchChange:w,placeholder:l,searchQuery:e,onPaste:_,ref:v}),n&&e?a.createElement("div",{className:p.s.flex.mr6.$},a.createElement(C,{onClear:n,focus:T})):o?a.createElement("div",{className:p.s.mr6.$},a.createElement(I.b,null,o)):null),a.createElement(i.K,{onClick:R,"aria-label":(0,m.t)("common.close")},a.createElement(s.A,{style:{"--color-icon":"var(--color-icon-secondary)"}})))})},620601:(e,r,n)=>{n.d(r,{fu:()=>E,oz:()=>f});var a=n(848318),i=n(647893),o=n(627049),s=n(857607),l=n(781239);n(561258);var c=n(297638),d=n(924948);n(965);var u=n(196921),p=n(416406),m=n(600651);n(705102);var _=n(959742),h=n(598171),g=n(466584);function f({tabId:e,onAction:r,children:n,navigatingShortcut:o,recordingKey:m,htmlAttributes:f}){let E=(0,h.U)(),b=(0,l.Pt)(E,"tabs",m??e),v=(0,a.useRef)(null),{activeTabId:T}=a.useContext(y),{active:I,target:S}=(0,d.H)({ref:v,focusOptions:{autoFocusOverride:T===e,enableAutoFocus:!1}});(0,p.TH)(o?[o]:[],e=>{e.preventDefault(),r()});let A=(0,a.useMemo)(()=>({shortcuts:[{key:s.Uz.ENTER}],onAction:r}),[r]),{onClickCallback:w}=(0,_.k)({primaryAction:A,active:I,actionLabel:!1,target:S}),C=(0,l.rf)(b,"click",w);return a.createElement("button",{ref:v,tabIndex:0,onClick:C,"data-testid":`tab-${e}`,...f},a.createElement(u.c,{active:I},a.createElement("div",{className:g.e},a.createElement(i.c,{id:e,value:e}),a.createElement("label",{htmlFor:e,className:c.s.noWrap.$},n))))}function E({children:e,onChange:r,value:n}){return a.createElement(m.B,{primary:!1,gap:8,fullWidth:!0,justify:"space-between"},a.createElement(o.b,{value:n,onChange:r,className:g.g},a.createElement(y.Provider,{value:{activeTabId:n}},e)))}let y=a.createContext({activeTabId:""})},542097:(e,r,n)=>{n.d(r,{Kp:()=>p,w0:()=>m});var a=n(848318),i=n(301168),o=n(244534),s=n(57762),l=n(996046),c=n(355755),d=n(166045),u=n(766482);function p(e){let r=m();return(0,a.useCallback)(()=>{r((0,s.NG)(e))},[r,e])}function m(){let e=function(){let e=(0,i.d4)(e=>e.recentlyUsedQuickCommands),r=(0,i.wA)();return(0,a.useCallback)(n=>{let a=(0,d.EG)(n),i=n.runPluginArgs,s=e.filter(e=>e.displayName!==a);s.unshift({displayName:a,runPluginArgs:i}),r(o.PQ(s)),(0,u.s)({displayText:a,runPluginArgs:i,localFileIdOrPluginId:n.pluginLocalFileId??n.pluginId})},[r,e])}(),r=(0,l.c4)(),n=(0,c.p8)("isReadOnly");return(0,a.useCallback)((a,i)=>{let o=(0,s.UK)({item:a,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:i});o.length>1||e(o[0])},[e,r,n])}},946250:(e,r,n)=>{n.d(r,{JL:()=>o,Z9:()=>c,fX:()=>l}),n(848318);var a=n(768618),i=n(601167);let o="1.2",s={noPanningZoomingMs:300,screenAreaThresholdPercentage:.12,frameVisiblePercentage:.9,frameNotVisiblePercentage:.25,largestFrameWeight:.3,mostCentralFrameWeight:.7,maxDepth:6};function l(e,r){let n=(0,a.UN)().getCurrentPage();if(!n)return;let o=function(e,r,n){let a=function(e){let r=[];for(let n of e.childrenNodes)if("FRAME"===n.type||"SECTION"===n.type){if("SECTION"===n.type)for(let e of n.childrenNodes)"FRAME"===e.type&&r.push(e);else r.push(n)}return r}(e),i=[],o=[];for(let e of a){let a=d(e,r);a>=n.frameVisiblePercentage?i.push(e):a<n.frameNotVisiblePercentage&&o.push(e)}if(1===i.length&&o.length===a.length-1)return i[0]}(n,e,r);if(o)return o.guid;let s=function(e,r,n){let{width:a,height:o}=(0,i.qc)(r),s=a*o,l=[],c=[{node:e,depth:0}];for(;c.length;){let{node:e,depth:a}=c.pop();if(!(a>=n.maxDepth)&&e.visible&&!e.isInternalOnlyNode&&!(e.opacity<=0)&&("CANVAS"===e.type||"DOCUMENT"===e.type||("FRAME"===e.type||"GROUP"===e.type||"SECTION"===e.type||"SLIDE_GRID"===e.type||"SLIDE_ROW"===e.type||"RESPONSIVE_SET"===e.type||"SLIDE"===e.type||"SECTION_OVERLAY"===e.type)&&u(e,r)/s>=n.screenAreaThresholdPercentage))for(let r of("FRAME"===e.type&&l.push(e),e.childrenNodes))c.push({node:r,depth:a+1})}return l}(n,e,r);if(!s.length)return;let l=s.filter(n=>{var a;return a=r.frameVisiblePercentage,d(n,e)>=a});l.length||l.push(...s);let c=function(e,r,n){let a=e.map(e=>(function(e,r){let{x:n,y:a,width:o,height:s}=(0,i.qc)(r);return Math.sqrt(Math.pow(n+o/2-(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w/2),2)+Math.pow(a+s/2-(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h/2),2))})(e,r)),o=e.map(e=>u(e,r)),s=Math.max(...a),l=Math.max(...o),c=a.map(e=>e/s),d=o.map(e=>e/l),p=c.map((e,r)=>n.largestFrameWeight*d[r]-n.mostCentralFrameWeight*e);return e[p.indexOf(Math.max(...p))]}(l,e,r);if(c)return function(e,r,n){var a,i,o;let s=e;for(;s.parentNode&&"FRAME"===s.parentNode.type&&(a=s.parentNode,i=r,o=n.frameVisiblePercentage,d(a,i)>=o);)s=s.parentNode;return s}(c,e,r).guid}function c(e={}){return{...s,...e}}function d(e,r){return u(e,r)/(e.absoluteBoundingBox.w*e.absoluteBoundingBox.h)}function u(e,r){let{offsetX:n,offsetY:a,zoomScale:i,width:o,height:s}=r,l=Math.max(e.absoluteBoundingBox.x,n-o/2/i),c=Math.min(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w,n+o/2/i),d=Math.max(e.absoluteBoundingBox.y,a-s/2/i);return Math.max(0,c-l)*Math.max(0,Math.min(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h,a+s/2/i)-d)}},201587:(e,r,n)=>{n.d(r,{wO:()=>A});var a=n(848318);n(10967);var i=n(660376),o=n(412892),s=n(186606);n(768618);var l=n(19180),c=n(967688);n(642935);var d=n(8578),u=n(101872),p=n(624236);n(982685);var m=n(766174);n(775164),n(355755);var _=n(880801),h=n(279753),g=n(619534),f=n(849911);n(991510),n(330841);var E=n(649352),y=n(580605);n(363379);var b=n(566654),v=n(572982),T=n(430808);function I({state:e,onRun:r,aiTrackingContext:n,targets:a,onMakeChanges:i,stop:o,prompt:s,onChangePrompt:l,onUndo:c}){let d=getContentFillPlaceholders()[0];assertNotNullish(d);let{promptHistory:u,addPromptToHistory:p}=usePromptHistory(promptHistoryAtom,e=>e),m=getActiveTSSceneGraph().getCurrentPage()?.directlySelectedNodes,[_,h]=React.useState(ImagesFillModelType.UNSPLASH),g=useLongRunningAction(AI_ACTIONS.IMAGE_FILL,fillImageAction),f=useMemo(()=>getFeatureFlags().aip_content_fill_image&&m?getDescendantImageNodesForAllNodes(getActiveNodesFromSelection()):[],[m]),{close:E}=useNavigation(),y=()=>{o(),E()},b=()=>{let e=[];getFeatureFlags().aip_content_fill_image&&(e=getDescendantImageNodesForAllNodes(getActiveNodesFromSelection())),p(s),l(""),r({prompt:s}).then(()=>{getFeatureFlags().aip_content_fill_image&&(resetLongRunningAction(AI_ACTIONS.IMAGE_FILL),g.start({nodes:e,modelType:_}))})},{state:v}=getLongRunningActionState(AI_ACTIONS.IMAGE_FILL);switch(e){case ActionState.INITIAL:return React.createElement(PromptView,{action:AI_ACTIONS.CONTENT_FILL,aiTrackingContext:n,extraFooter:getFeatureFlags().aip_content_fill_image&&f.length>0?React.createElement(ImageActionModelPicker,{modelType:_,setModelType:h,includeUnsplash:!0}):null,featureNameForInstrumentation:"content_fill",onChangePrompt:l,onRun:b,prompt:s,promptHistory:u,recordingKey:"contentFill.prompt",submitLabel:tx("fullscreen_actions.ai_content_fill.replace_content"),suggestion:d.content});case ActionState.RUNNING:return React.createElement(RunningView,{onCancel:y,aiTrackingContext:n},tx("ai.replacing"));case ActionState.DONE:if(getFeatureFlags().aip_content_fill_image)switch(v){case ActionState.RUNNING:return React.createElement(RunningView,{onCancel:y,aiTrackingContext:n},tx("fullscreen_actions.ai_content_fill.replacing_images"));case ActionState.DONE:}return React.createElement(RegenerateTextDoneView,{action:AI_ACTIONS.CONTENT_FILL,recordingKey:"regenerateText.done",targets:a,regenerateWithPrompt:e=>{i(),l(""),r({prompt:e})},aiTrackingContext:n,onUndo:c});case ActionState.ERROR:return React.createElement(S,{onSubmit:b});case ActionState.CANCELLED:return null}}n(352448);function S(e){let r;let n=(0,g.RL)(_.JT.CONTENT_FILL,m.c),i=null;if(n.state!==g.qy.ERROR)return null;let{error:o,tasks:s,aiTrackingContext:l}=n,h=s.length,f=s.filter(e=>e.state===g.z8.FAILED).length;return o instanceof T.Vz||o instanceof p.Lg||(0,u.sZ)(o)===d.B.CONTENT_LENGTH_LIMIT?a.createElement(E.E,{error:o,aiTrackingContext:n.aiTrackingContext,customMessage:(0,c.tx)("ai.error.content_length_limit")}):(o instanceof T.Jd&&(r=(0,c.tx)("fullscreen_actions.ai_content_fill.missing_font")),o instanceof p.Aq)?a.createElement(E.E,{error:o,aiTrackingContext:n.aiTrackingContext,customMessage:(0,c.tx)("fullscreen_actions.ai_content_fill.no_duplicates_to_replace_error")}):(h>0&&f>0&&f<h&&(i=(0,c.tx)("fullscreen_actions.ai_content_fill.couldnt_count",{failed:f,total:h})),r)?a.createElement(E.E,{error:o,aiTrackingContext:l,customMessage:r,secondaryMessage:i}):(0,u.sZ)(o)===d.B.UNSAFE_OR_HARMFUL_CONTENT?a.createElement(E.E,{error:n.error,secondaryMessage:i,aiTrackingContext:l}):a.createElement(E.E,{error:n.error,buttons:[{type:E.f.TRY_AGAIN,callback:()=>{e.onSubmit()}}],secondaryMessage:i,aiTrackingContext:l})}function A(){let e=(0,g.RL)(_.JT.CONTENT_FILL,m.c),r=(0,h.s)(_.JT.CONTENT_FILL),{start:n,stop:d,state:u,aiTrackingContext:p}=e,{close:E}=(0,f.cq)();switch((0,a.useEffect)(()=>{r.state===h.w.SELECTION_OK&&u===g.qy.INITIAL&&n({guids:[],numExampleRows:1,source:"ACTIONS_MENU"})},[r.state,n,u]),u){case g.qy.INITIAL:return a.createElement(y.A,{action:_.JT.CONTENT_FILL,actionIcon:a.createElement(o.c,null),actionLabel:(0,c.tx)("fullscreen_actions.ai_content_fill.replace_content"),onPerform:()=>{(!(0,l.k)().aip_content_fill_single||s.biQ&&s.biQ.repeatedContentFillAvailableBindings())&&n({guids:[],numExampleRows:1,source:"ACTIONS_MENU"})},aiTrackingContext:p,instructionAction:{type:"learn_more",url:_.KL}},(0,c.tx)("fullscreen_actions.ai_content_fill.select_a_stack_of_repeating_frames"));case g.qy.RUNNING:return a.createElement(b.F,{onCancel:()=>{d(),E()},aiTrackingContext:p},(0,c.tx)("ai.replacing"));case g.qy.DONE:{let r=e.result.iterationParams,i=e.result.reset;return a.createElement(v.A,{action:_.JT.CONTENT_FILL,regenerateWithPrompt:e=>{n({...r,userPrompt:e,nodesFromMagicHandle:[]})},recordingKey:"regenerateText.done",aiTrackingContext:p,targets:r.guids,onUndo:()=>{i(),E()}})}case g.qy.ERROR:{let r=e.originalParams;return a.createElement(S,{onSubmit:()=>n(r)})}case g.qy.CANCELLED:return null;default:(0,i.xb)(u)}}},572982:(e,r,n)=>{n.d(r,{A:()=>_});var a=n(848318),i=n(352483),o=n(382902),s=n(781239),l=n(967688),c=n(991510),d=n(345174),u=n(730783),p=n(363379);let m=(0,o.E3)("content_fill_prompt_history",[]);function _({action:e,regenerateWithPrompt:r,recordingKey:n,aiTrackingContext:o,targets:_,onUndo:h}){let[g,f]=a.useState(!1),[E,y]=a.useState(""),{promptHistory:b,addPromptToHistory:v}=(0,c.a)(m,e=>e);return g?a.createElement(p.A,{action:e,aiTrackingContext:o,disableAutoComplete:!0,onChangePrompt:y,onRun:()=>{r(E),v(E)},prompt:E,promptHistory:b,recordingKey:(0,s.Pt)(n,"prompt"),submitLabel:(0,l.tx)("fullscreen_actions.ai_content_fill.update_content"),suggestion:(0,l.t)("fullscreen_actions.ai_content_fill.prompt_suggestion")}):a.createElement(u.Oq,{iterateOptions:[{type:u.is.UNDO,callback:h},{type:u.is.MAKE_CHANGES,callback:()=>{f(!0),o.clientLifecycleId=(0,i.eJ)()}}],recordingKey:(0,s.Pt)(n,"iterate"),targets:_,aiTrackingContext:{...o,iteration_view_type:d.$J.SUCCESS_WITH_ITERATION}})}},430808:(e,r,n)=>{n.d(r,{Jd:()=>c,Vz:()=>s,k4:()=>d}),n(848318),n(81538),n(92454),n(938982),n(186606),n(320953);var a=n(768618);n(19180),n(382902);var i=n(594680);n(476254),n(841807),n(998568),n(297638),n(967688),n(376732),n(353231),n(642935),n(101872),n(303397),n(775164),n(483057),n(880801),n(619534),n(803107),n(600651),n(352448);class o extends Error{constructor(e){super(),this.message=e}}class s extends Error{constructor(){super(),this.reportToSentry=!1,this.name="TooManyTextLayersError",this.message="Too many text layers"}}class l extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NoTextCharactersFoundError",this.type="no_text_characters_found"}}class c extends Error{constructor(){super(),this.reportToSentry=!1,this.name="MissingFontsError",this.message="Missing Fonts"}}async function d(e,r=100){let n=(0,a.UN)().get(e.findContainingTopLevelFrameOrSelf());return n?(await (0,i.oy)(n,{includeIDs:!0,excludeImageData:!0,excludeVectorData:!0,includeNames:!0,ignoreFetchingComponentData:!0,includeNodeTypes:["RECTANGLE","ROUNDED_RECTANGLE","TEXT","FRAME","GROUP","INSTANCE"],fieldGroups:[],strict:!1,includeInstanceSublayers:!0,ignoreDeveloperFriendlyIds:!0,focusNodeId:e.guid,maxSerializeNodes:r})).jsxStr:Promise.resolve("")}},709076:(e,r,n)=>{n.d(r,{Km:()=>eO,hc:()=>eM,jk:()=>eF,mX:()=>eD,wU:()=>eR,z6:()=>eP});var a=n(848318),i=n(660376),o=n(879169),s=n(773511),l=n(577972),c=n(896886),d=n(696483),u=n(757071),p=n(972233),m=n(768618),_=n(19180),h=n(382902),g=n(536384),f=n.n(g),E=n(989232),y=n(410441),b=n(63163),v=n(238462),T=n(781239),I=n(461979),S=n(182317),A=n(297638),w=n(967688),C=n(744577),N=n(87463),L=n(371366),O=n(867499),R=n(466930),P=n(696786),D=n(403451),k=n(391375),M=n(730143),F=n(922484),x=n(138528),U=n(535884),B=n(815270),G=n(720722),V=n(475166),H=n(17753),z=n(168852),K=n(874728),W=n(331084),j=n(412189),Y=n(609335),$=n(937629),q=n(113173),X=n(880801),J=n(494064),Z=n(821503),Q=n(849911),ee=n(924948),et=n(219706),er=n(131258),en=n(122586),ea=n(803107),ei=n(620637),eo=n(237116),es=n(600651),el=n(988182),ec=n(144500),ed=n(16309),eu=n(620601),ep=n(598171),em=n(843786),e_=n(263455),eh=n(98197),eg=n(27855),ef=n(286522),eE=n(399879),ey=n(306090),eb=n(798674),ev=n(273095),eT=n(156859),eI=n(475297),eS=n(605825),eA=n(912655),ew=n(693941),eC=n(314921),eN=n(846650),eL=n(832218);let eO="actions-asset-tab-library-filter",eR=300;function eP({isVisualSearch:e=!1,isFigmake:r=!1,initialTab:n=eb.Qx.PLAN_FILE_ASSETS,initialSearchTagType:u,closeOnEscape:p=!1,assetInsertionCallback:m,hubFileFragmentInsertionCallback:_}){let{currentSearch:g}=(0,h.md)(J.WP),N=(0,h.md)(O.hO.currentSearchAtom),Y=(0,h.md)(O.hO.currentCommunitySearchAtom);e=e||r&&Y?.input.type==="input-image";let ee=(0,eh.V)(),er=(0,$.Ko)(),[en,ei]=(0,h.fp)(ea.Q8),ep=(0,h.Xr)(ea.Rt),{recentFragments:ey}=(0,O.cN)(!ee),{recommendedHubFileFragments:eL}=(0,O.vz)(),eP=(0,eI.U)(!0);(0,W.b)();let ex=a.useRef(null),eU=a.useRef(null),eB=a.useRef(null),eG=(0,ef.w5)(Y),eV=(0,et._M)({action:e?X.JT.FIND_INSPIRATION:X.JT.TEXT_SEARCH,clientLifecycleId:void 0});(0,B.C)(),(0,Z.z)(),a.useEffect(()=>{if(e)return()=>{(0,eg.R)(),h.zl.set(J.WP,{currentSearch:null})}},[e]);let[eH,ez]=a.useState(!1),eK=a.useCallback(e=>{ez(e)},[]),eW=r?O.G4.FIGMAKE:e?O.G4.ACTIONS_VISUAL_SEARCH_VIEW:O.G4.ACTIONS_ASSETS_TAB_DETAIL,{close:ej}=(0,Q.cq)(),{libraries:eY,presets:e$,librariesForConnectedProject:eq}=(0,j.g)(),eX=(0,h.md)(U.Sh),eJ=e?0===eY.length&&0===eq.length:!eX&&0===eY.length&&0===e$.length&&0===eq.length,eZ=(0,P.GS)(),eQ=a.useMemo(()=>(0,K.N2)(eZ,!0),[eZ]),{onToggleLibraryModal:e0}=(0,D.u)({entrypoint:eQ,modalType:"editor",initialTab:G.Wv.TEAM_LIBRARIES}),e1=a.useCallback(()=>{ej(),e0()},[ej,e0]),e2={title:(0,w.t)("assets_in_actions.browse_libraries_button"),onAction:()=>{e1()},recordingKey:"assetsTab.assetsBrowseLibraries"},e3=a.useCallback(()=>{(0,eE.k)()},[]),{debouncedAssetSearch:e8,clearAssetSearchAndCancelDebounce:e6,cancelDebouncedAssetSearch:e4,flushDebouncedAssetSearch:e5}=(0,J.TC)({debounceWait:eR,onSearchSuccess:e3}),{debouncedFragmentTextSearch:e7,clearFragmentSearchAndCancelDebounce:e9,cancelDebouncedFragmentTextSearch:te,flushDebouncedFragmentTextSearch:tt}=(0,e_.S)({debounceWait:eR,entryPoint:eW,onSearchSuccess:e3}),{debouncedFragmentTextSearch:tr,cancelDebouncedFragmentTextSearch:tn,clearFragmentSearchAndCancelDebounce:ta,flushDebouncedFragmentTextSearch:ti}=(0,e_.S)({debounceWait:eR,entryPoint:eW,isCommunity:!0,onSearchSuccess:e3,isFigmake:r}),[to,ts]=(0,h.fp)(J.B1),tl=e?"actions-visual-search-library-filter":eO,tc=!e||er,[td,tu,tp]=o.t.useTabs({[eb.Qx.PLAN_FILE_ASSETS]:tc,[eb.Qx.COMMUNITY]:!0},{defaultActive:n}),[tm,t_]=(0,h.fp)(O.hO.sortByAtom),th=(0,h.md)(L.CZ),[tg,tf]=(0,a.useState)(u),tE=tg&&tp.activeTab===eb.Qx.PLAN_FILE_ASSETS;function ty(r){let n,o,u;switch(r){case eb.qG.COMPONENTS:n=A.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgComponentTertiary.colorTextComponent.colorBorderComponent.$,o={"--color-icon":"var(--color-icon-component)"},u=a.createElement(l.k,{style:o});break;case eb.qG.DESIGNS:n=A.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgBrandTertiary.colorTextBrand.colorBorderBrand.$,o={"--color-icon":"var(--color-icon-brand)"},u=a.createElement(c.q,{style:o});break;default:(0,i.xb)(r)}return a.createElement("div",{className:n,style:C.sx.add({paddingTop:"3px",paddingBottom:"3px",marginRight:"8px"}).$},a.createElement("div",{className:A.s.flex.itemsCenter.justifyCenter.w16.h16.flexShrink0.$},u),a.createElement("span",{className:A.s.truncate.$},r),a.createElement(s.E,{recordingKey:(0,T.Pt)(t1,"dismiss"),onClick:()=>{if(!e)switch(r){case eb.qG.COMPONENTS:(0,O.G1)(en)&&e7(en);break;case eb.qG.DESIGNS:(0,J.kN)(en)&&e8(en,{type:z.I.ALL})}to.type!==z.I.ALL&&(ts({type:z.I.ALL}),g&&(0,J.ES)({...g.input,assetTypeOption:{type:z.I.ALL}})),"percent_match"!==tm&&t_("percent_match"),th&&(h.zl.set(L.q4),N&&(0,O.Hl)(N?.input,eW)),E.definedAnalyticsHandler.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,ew.D)(eb.Qx.PLAN_FILE_ASSETS,void 0)}),tf(void 0)},className:A.s.bgTransparent.$,"aria-label":(0,w.t)("assets_in_actions.clear_search_tag",{tagType:r})},a.createElement(d.f,{style:o})))}let tb=h.zl.get(ea.dd),tv=a.useMemo(()=>(0,ew.D)(tp.activeTab,tg),[tg,tp.activeTab]),tT=a.useMemo(()=>{let e={entryPoint:eW,session_id:tb||"",assets_tab_type:tv};return tp.activeTab===eb.Qx.COMMUNITY?{search_id:Y?.searchId||"",query_type:Y?.input.type,query_text:Y?.input.type==="input-text"?Y?.input.value:void 0,query_node_id:Y?.input.type==="input-selection"?Y?.input.node.guid:void 0,...e}:tg===eb.qG.DESIGNS?{search_id:N?.searchId||"",query_type:N?.input.type,query_text:N?.input.type==="input-text"?N?.input.value:void 0,query_node_id:N?.input.type==="input-selection"?N?.input.node.guid:void 0,...e}:{search_id:g?.queryId||"",query_type:g?.input.type,query_text:g?.input.type==="input-text"?g.input.query:"",query_node_id:g?.input.type==="input-selection"?g.input.node.guid:"",...e}},[eW,tb,tv,tp.activeTab,tg,g,Y,N]),tI=a.useCallback(e=>{let[r]=e;r.isIntersecting&&E.definedAnalyticsHandler.trackDefinedEvent("fragment_search.assets_details_panel_reached_bottom_of_scroll",{...tT,is_community_fragment_search:tp.activeTab===eb.Qx.COMMUNITY})},[tT,tp.activeTab]),tS=a.useCallback(e=>{let r=new IntersectionObserver(tI,{threshold:1});return e&&r.observe(e),()=>{r.disconnect()}},[tI]),tA=a.useCallback(r=>{if(!e)switch(r){case eb.Qx.PLAN_FILE_ASSETS:tn(),(0,J.kN)(en)&&(e8(en,to),e5()),ee&&(0,O.G1)(en)&&(e7(en),tt());break;case eb.Qx.COMMUNITY:ee&&te(),e4(),(0,O.G1)(en,!0)&&(tr(en),ti());break;default:(0,i.xb)(r)}tp.setActiveTab(td[r].id),E.definedAnalyticsHandler.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,ew.D)(r,tg)}),eU.current?.focus(),(0,eE.k)()},[to,e,tp,td,tT,tg,tn,en,ee,e8,e5,e7,tt,te,e4,tr,ti]),tw=(0,x.T5)("ActionsSearchResultsView").unwrapOr(null),tC=tw?.name,tN=(0,M.q5)(),tL=tC||tN?.name,tO=tL&&tL.length>20,tR=a.createElement(eu.fu,{value:tp.activeTab,onChange:v.lQ,numItems:tc?2:1},a.createElement(eu.oz,{tabId:eb.Qx.PLAN_FILE_ASSETS,onAction:()=>tA(eb.Qx.PLAN_FILE_ASSETS),htmlAttributes:tO?{"data-tooltip":tL,"data-tooltip-type":H.Ib.TEXT}:void 0},tL&&(0,I.EJ)(tL,20)),a.createElement(eu.oz,{tabId:eb.Qx.COMMUNITY,onAction:()=>tA(eb.Qx.COMMUNITY)},(0,w.tx)("assets_in_actions.detail_view.community_tab.title"))),tP=(0,F.oh)(R.fi),tD=(0,k.g5)(V.$A.Design).productComponents,tk=!g&&!tP&&(!tD.length||(0,q.kK)()),tM=!ee||tk,tF=ey?ey.length:0,tU=!tg||tg===eb.qG.COMPONENTS,tB=!tg&&!tM&&(!!N||tF>0)||tg===eb.qG.DESIGNS,tG=ee&&(!tg||tg===eb.qG.DESIGNS),tV=tM||!!tg,tH=tp.activeTab===eb.Qx.PLAN_FILE_ASSETS,tz=tp.activeTab===eb.Qx.COMMUNITY,tK=a.useCallback(e=>{ei(e),ep((0,S.g)()),tU&&(tH||0===e.length)&&e8(e,to),tG&&(tH||0===e.length)&&e7(e),(tz||0===e.length)&&tr(e)},[to,ei,ep,tH,tz,e8,e7,tr,tU,tG]),tW=g?.queryId,tj=N?.searchId,tY=Y?.searchId,t$=a.useCallback(()=>tH&&tG?tj:tz?tY:void 0,[tj,tY,tG,tH,tz]),tq=a.useCallback(()=>{if(tH&&tU)return tW},[tW,tH,tU]),tX=a.useCallback((e,r,n,a,i,o)=>{let s;let l=tz?Y:tU?g:N;tz&&Y?.input.type==="input-text"?s=Y?.input.value:tU&&g?.input.type==="input-text"?s=g?.input.query:N?.input.type==="input-text"&&(s=N?.input.value),(0,E.trackEvent)("Search Feedback",{feedbackType:e,feedback:r,activeTab:tv,clientLifecycleId:n,entryPoint:a,fileKey:i,inputText:s,inputType:l?.input.type,queryId:tq(),searchId:t$(),sessionId:o})},[N,g,Y,tq,t$,tz,tU,tv]),tJ=a.useCallback((e,r)=>{tX(e.toString(),r,eV.clientLifecycleId,eW,eV.file_key,eV.quick_actions_session_id)},[tX,eV,eW]),tZ=a.useCallback((e,r)=>{tX(e.toString(),r,eV.clientLifecycleId,eW,eV.file_key,eV.quick_actions_session_id)},[tX,eV,eW]),tQ=(0,eC.s)();(0,b.h)(()=>(E.definedAnalyticsHandler.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT}),()=>{eD(h.zl.get(ea.Q8),v.lQ,ee,!0,tQ,O.G4.ACTIONS_ASSETS_TAB_DETAIL),h.zl.set(L.q4),ts({type:z.I.ALL})}));let t0=(()=>{switch(tp.activeTab){case eb.Qx.PLAN_FILE_ASSETS:return tW;case eb.Qx.COMMUNITY:return tY;default:(0,i.xb)(tp.activeTab)}})(),t1=e?"visualSearchView":"assetsDetailView",t2=!Y||"disabled"===Y.result.status;if(e&&t2)return a.createElement(ef.o1,{aiTrackingContext:eV});let t3=eJ&&(en.length>0||e),t8=!t3&&(tg===eb.qG.COMPONENTS||!ee)&&en.length>0,t6=tg===eb.qG.DESIGNS&&!!N;return a.createElement(el.n,{additionalFeedbackCallback:tZ,aiTrackingContext:eV,bodyFontMedium:!0,dataTestId:t1,gatherFeedback:!0,height:480,rateOutputStrOverride:(0,w.t)("qa.rate_output_helpful"),recordingKey:t1,sentimentFeedbackCallback:tJ,width:(0,y.jz)(eN.X)},e&&a.createElement(eo.t,{ref:ex,key:t0}),a.createElement(el.n.Header,null,a.createElement("div",{className:A.s.flex.flexColumn.$,ref:eB},e?a.createElement(ek,{searchTag:tE?ty(tg):void 0,closeOnEscape:p}):a.createElement(ed.vj,{ref:eU,searchQuery:en,onSearchChange:tK,forceRoot:p,onClear:()=>{tf(void 0),ei(""),e6(),ee&&e9(),ta()},onPaste:e=>eF(e),endEnhancer:a.createElement(eM,{entryPoint:eW,aiTrackingContext:eV,activeTab:tp.activeTab===eb.Qx.PLAN_FILE_ASSETS&&er?eb.xA.COMPONENTS:eb.xA.COMMUNITY}),placeholder:eP,searchTag:tE?ty(tg):void 0}),tc&&a.createElement("div",{className:A.s.if(e,A.s.py4).px8.if(!e,A.s.pb8).$},a.createElement(es.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},a.createElement("div",null,tR),a.createElement(o.t.TabPanel,{...tu[eb.Qx.PLAN_FILE_ASSETS]},a.createElement("div",{className:A.s.if(!e,A.s.h24).if(e,A.s.h32).flex.itemsCenter.$},t8&&a.createElement(eS.i,{onSetAssetType:r=>{if(g)switch(g.input.type){case"input-image":case"input-selection":if(!e)throw Error("Cannot run text search on visual input");ts(r),(0,J.ES)({...g.input,assetTypeOption:r});return;case"input-text":if(e)throw Error("Cannot run visual search on text input");ts(r),e8(en,r),e5();return;default:(0,i.xb)(g.input)}},value:to,dropdownDataTestId:tl,recordingKey:tl,showTooltipOnEllipsis:!0}),t6&&a.createElement(em.s,{containerRef:eB,entryPoint:eW}))),a.createElement(o.t.TabPanel,{...tu[eb.Qx.COMMUNITY]},a.createElement("div",{className:A.s.if(!e,A.s.h24).if(e,A.s.h32).flex.itemsCenter.$})))))),a.createElement(el.n.Body,{key:eG},a.createElement(eb.wg.Provider,{value:{activeTabId:tp.activeTab}},tc&&a.createElement(o.t.TabPanel,{...tu[eb.Qx.PLAN_FILE_ASSETS]},a.createElement(eb.ZD.Provider,{value:{activeSearchTag:tg}},a.createElement(ec.q,{key:tW},eJ&&!ee?a.createElement(eA.S,{fillHeight:!0},a.createElement(K.Ee,{onClickExplore:ej,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement("div",{className:f()(A.s.gap6.if(tV,A.s.hFull).$)},tU&&a.createElement(ev.O,{onLoadStateChange:eK,header:!tg&&ee?{title:(0,w.t)("assets_in_actions.assets_section.title"),icon:a.createElement(l.k,null),seeMore:t3?e2:{title:(0,w.t)("assets_in_actions.see_more_button"),onAction:()=>{E.definedAnalyticsHandler.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,ew.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.COMPONENTS)}),E.definedAnalyticsHandler.trackDefinedEvent("asset_search.see_more",{...tT}),tf(eb.qG.COMPONENTS)},recordingKey:t1+".assetsSeeMore"}}:void 0,numberOfGridColumns:5,maxResults:!tg&&ee?5:void 0,stretchEmptyStates:tV,noLibraries:t3,assetInsertionCallback:m}),tB&&a.createElement(eT.M,{entryPoint:eW,focusHandle:e?ex:eU,forceLoadingState:eH,header:tg?void 0:{title:(0,w.t)("assets_in_actions.fragments_section.title"),icon:a.createElement(c.q,null),seeMore:{title:(0,w.t)("assets_in_actions.see_more_button"),onAction:()=>{E.definedAnalyticsHandler.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,ew.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.DESIGNS)}),(0,E.trackEvent)("Fragment search see more",{...(0,O.d3)(eW,tb,N?N.searchId:"",N?N.input:null,!1,void 0,!1)}),tf(eb.qG.DESIGNS)},recordingKey:t1+".fragmentsSeeMore"}},initialState:e?void 0:{type:"recents",recents:ey},isCommunity:!1,lastSearchResultRef:tS,maxResults:tg?void 0:3,numberOfGridColumns:3,stretchEmptyStates:tV}))))),a.createElement(o.t.TabPanel,{...tu[eb.Qx.COMMUNITY]},a.createElement(ec.q,{key:tY},a.createElement(eT.M,{header:!Y&&eL&&eL.length>0?{title:(0,w.t)("assets_in_actions.recommended_fragments_header"),primaryText:!0,px:12}:void 0,focusHandle:e?ex:eU,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:eL},entryPoint:eW,lastSearchResultRef:tS,hubFileFragmentInsertionCallback:_}))))))}function eD(e,r,n,a,i,o){let s=h.zl.get(ea.dd),l=h.zl.get(M.ze);if(!s||!l)return;let{currentSearch:c}=h.zl.get(J.WP),d=c?.input.assetTypeOption,u=h.zl.get(L.CZ),p=h.zl.get(O.hO.sortByAtom),m=d?.type!==z.I.ALL;e&&(n&&((0,O.G1)(e)||u||"percent_match"!==p)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o),((0,J.kN)(e)||m)&&(0,J.ES)({type:"input-text",query:e,assetTypeOption:{type:z.I.ALL},isKnownLibrary:i}),a&&(0,O.G1)(e,!0)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o,void 0,void 0,void 0,!0)),r()}function ek({searchTag:e,closeOnEscape:r=!1}){let n;let i=(0,h.md)(O.hO.currentCommunitySearchAtom),o=(0,$.Ko)(),s=a.useRef(null),l=(0,ep.U)();switch(i?.input.type){case"input-image":n=i.input.imageFile.name;break;case"input-selection":n=i.input.name;break;default:n=void 0}return(0,Z.z)(r),a.createElement("div",{className:A.s.flex.itemsCenter.justifyBetween.py12.if(o,A.s.bSolid.bb1.colorBorder).if(r,A.s.px12,A.s.px8).$,ref:s},a.createElement("div",{className:A.s.flex.gap6.itemsCenter.$},!r&&a.createElement(ei.o,{recordingKey:(0,T.Pt)(l,"backButton")}),a.createElement(N.E,{fontSize:13},(0,w.tx)("fragment_search.visual_search_results_title")),a.createElement(N.E,{fontSize:13,color:"secondary"},n),e))}function eM({entryPoint:e,aiTrackingContext:r,activeTab:n,recordingKey:i}){let o=a.useRef(null),{active:l}=(0,ee.H)({ref:o,focusOptions:{enableAutoFocus:!1}}),c=a.useRef(null),d=a.useCallback(()=>{e===O.G4.FIGMAKE?((0,E.trackEvent)("Visual search in search bar clicked",{has_selection:m.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:h.zl.get(ea.dd),entry_point:e}),c.current?.click()):function(e){(0,E.trackEvent)("Visual search in search bar clicked",{has_selection:m.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:h.zl.get(ea.dd)}),(0,Y.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null});let r=e===eb.xA.COMMUNITY?eb.Qx.COMMUNITY:eb.Qx.PLAN_FILE_ASSETS;(0,en.$I)({moduleToOpen:{type:"custom",module:(0,$.P5)()?a.createElement(eP,{initialTab:r,isVisualSearch:!0}):a.createElement(ef.WS,{initialTab:e}),beforeModuleOpen:()=>(0,ef.jp)(O.G4.ACTIONS_SEARCH_BAR_ICON),name:er.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})}(n)},[e,n]);return a.createElement(a.Fragment,null,a.createElement(ef.xC,{aiTrackingContext:r,ref:c}),a.createElement(s.E,{ref:o,"aria-label":(0,w.t)("fragment_search.visual_search_icon_button_tooltip"),onClick:d,htmlAttributes:(0,_.k)().fragment_search_tweaks?{"data-tooltip-type":H.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip":ey.S,"data-tooltip-ai-beta-text":(0,w.t)("fragment_search.visual_search_icon_button_tooltip_with_beta_tag"),"data-tooltip-ai-beta-action":X.JT.FIND_INSPIRATION}:{"data-tooltip":(0,w.t)("fragment_search.visual_search_icon_button_tooltip"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip-show-above":!0},recordingKey:i,className:f()(eL.g,{[eL.H]:l})},(0,_.k)().fragment_search_tweaks?a.createElement(u.T,null):a.createElement(p.A,null)))}function eF(e){let r=e.clipboardData.files;if(1===r.length&&r[0]?.type.startsWith("image/")){let n=r[0];e.preventDefault(),(0,en.$I)({moduleToOpen:{type:"custom",module:(0,_.k)().hub_file_fragments?a.createElement(eP,{isVisualSearch:!0,closeOnEscape:!0}):a.createElement(ef.WS,null),beforeModuleOpen:()=>(0,ef.qF)(O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE,n),name:er.Sn.VISUAL_SEARCH},trackingData:{source:O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE}})}}},273095:(e,r,n)=>{n.d(r,{O:()=>W});var a=n(848318),i=n(301168),o=n(304848),s=n(536070),l=n(382902),c=n(349048),d=n(524488),u=n.n(d),p=n(354175),m=n(857607),_=n(561258),h=n(297638),g=n(967688),f=n(744577),E=n(466930),y=n(391375),b=n(730143),v=n(822879),T=n(555958),I=n(922484),S=n(475166),A=n(168852),w=n(357741),C=n(796490),N=n(824662),L=n(709114),O=n(113173),R=n(494064),P=n(6178),D=n(803107),k=n(738205),M=n(6538),F=n(76689),x=n(405591),U=n(936378),B=n(454986),G=n(912655),V=n(241658),H=n(4391),z=n(646011),K=n(559748);function W({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:d,suggestion:p,onClickSuggestion:f,largeSpacing:T,noLibraries:w,onLoadStateChange:C,assetInsertionCallback:N}){let{currentSearch:L}=(0,l.md)(R.WP),V=(0,i.d4)(b.tB),H=(0,y.g5)(S.$A.Design).productComponents,z=(0,c.k9)(()=>H.map(e=>e.library_key),[H]),K=(0,v.U)(z),W=(0,I.oh)(E.fi)||"loading"===K.status,$=(0,c.k9)(()=>L?.result.data?.map(e=>e.library_key),[L]),q=(0,v.U)($||[]),X=(0,_.z3)("faux"),J=(0,P.s)(L),Z="";L&&"input-text"===L.input.type?Z=L.input.query:J&&(Z=J.name);let Q=T?12:8,ee=!W&&!!d,et=!L&&!(0,O.kK)()&&W||L?.result.status==="loading"||"loading"===q.status;if(a.useEffect(()=>{C?.(et)},[et,C]),et)return a.createElement("div",null,ee&&a.createElement(j,{title:d.title,icon:d.icon}),a.createElement(x.V,{columns:e,padding:Q,gap:12},Array.from({length:r??3*e}).map((e,r)=>a.createElement(x.V.Item,{key:r},a.createElement("div",{className:h.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(U.Y,{animationDelay:150*r})),a.createElement("div",{className:h.s.wFull.pt8.$},a.createElement(F.O.Container,null,a.createElement(F.O.SkeletonLine,{index:r}),a.createElement(F.O.SkeletonLine,{index:r,bottom:!0})))))));if(!L||"disabled"===L.result.status){if(0===H.length||(0,O.kK)())return a.createElement("div",{className:h.s.if(n,h.s.hFull).$},a.createElement(G.S,{fillHeight:n},a.createElement(M.N,null,a.createElement(M.N.ArtworkIcon,null,a.createElement(o.W,null)),a.createElement(M.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.initial_state.title"),dataTestId:"assets-grid-initial-state"}))));let i=H.slice(0,r??H.length).map((e,r)=>a.createElement(Y,{key:e.node_id,asset:e,assetInsertionCallback:N,assetTypeDropdownSelection:A.I.ALL,libraryNameByLibraryKeyFromLG:K.data||{},onDragStart:X,openFileKey:V?.key??"",queryId:L?L.queryId:"",searchQuery:Z,searchSessionId:l.zl.get(D.dd)??"",sectionPosition:r}));return a.createElement("div",{"data-testid":"recents-assets-grid"},d&&a.createElement(j,{title:d.title,icon:d.icon,seeMore:d.seeMore}),a.createElement(B.a,null),a.createElement(k.x,{primary:!0,columns:e,padding:Q,gap:12},i))}if("errors"===L.result.status)return a.createElement("div",{className:h.s.if(n,h.s.hFull).$},d&&a.createElement(j,{title:d.title,icon:d.icon,seeMore:d.seeMore}),a.createElement(G.S,{fillHeight:n},a.createElement(M.N,null,a.createElement(M.N.ArtworkIcon,{variant:"danger"},a.createElement(s.r,null)),a.createElement(M.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,g.t)("assets_in_actions.assets_section.error.description")}))));if(w)return a.createElement("div",{className:h.s.if(n,h.s.hFull).$},d&&a.createElement(j,{title:d.title,icon:d.icon,seeMore:d.seeMore}),a.createElement(G.S,{fillHeight:n},a.createElement("span",{className:h.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.no_results_no_libraries.title"))));let er=L.result.data;if(!er||0===er.length)return a.createElement("div",{className:h.s.if(n,h.s.hFull).$},d&&a.createElement(j,{title:d.title,icon:d.icon}),a.createElement(G.S,{fillHeight:n},a.createElement("span",{className:h.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.assets_section.no_results.title",{query:u()(Z,{length:24})}))));let en=er.slice(0,r??L.result.data.length).map((e,r)=>a.createElement(Y,{key:e.node_id,asset:e,assetInsertionCallback:N,assetTypeDropdownSelection:A.I.ALL,libraryNameByLibraryKeyFromLG:q.data||{},onDragStart:X,openFileKey:V?.key??"",queryId:L?L.queryId:"",searchQuery:Z,searchSessionId:l.zl.get(D.dd)??"",sectionPosition:r}));return p&&en.push(a.createElement(k.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:m.Uz.ENTER}],onAction:f},singleClick:!0,defaultFocusOptions:{block:"center",inline:"nearest"}},a.createElement(k.x.GridItemHighlight,null,p))),a.createElement("div",null,d&&a.createElement(j,{title:d.title,icon:d.icon,seeMore:d.seeMore}),a.createElement(B.a,null),a.createElement(k.x,{primary:!0,columns:e,padding:Q,gap:12},en))}function j({title:e,icon:r,seeMore:n}){let i=n?a.createElement(V.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:h.s.h24.$});return a.createElement(H.X,null,r&&a.createElement(H.X.Icon,null,r),a.createElement(H.X.Title,{endEnhancer:i},e))}function Y({asset:e,libraryNameByLibraryKeyFromLG:r,assetTypeDropdownSelection:n,searchQuery:i,openFileKey:o,sectionPosition:s,onDragStart:l,disableActionShortcuts:c,assetInsertionCallback:d}){let u=r[e.library_key],{afterSuccessfulInsert:p,componentInsertSwapCallback:m}=(0,z.H$)({asset:e,assetTypeDropdownSelection:n,sectionPosition:s,openFileKey:o,assetInsertionCallback:d}),{primaryAction:_,secondaryAction:g,tertiaryAction:f}=(0,K.b)({asset:e,afterSuccessfulInsert:p,componentInsertSwapCallback:m,source:"assets_grid",disableActionShortcuts:c});return a.createElement(k.x.Item,{primaryAction:_,secondaryAction:g,tertiaryAction:f,defaultFocusOptions:{block:"center",inline:"nearest"}},a.createElement(k.x.GridItemHighlight,null,a.createElement($,{asset:e,sectionPosition:s,fileName:u,isSearch:!!i,onDragStart:l,afterSuccessfulInsert:p})),a.createElement(k.x.ItemFooter,null,a.createElement("div",{className:h.s.pt8.flex.flexColumn.gap2.alignLeft.$},a.createElement("span",{className:h.s.textBodyMedium.colorText.truncate.$},(0,T.kH)(e.name)),a.createElement("span",{className:h.s.textBodyMedium.colorTextSecondary.truncate.$},u))))}function $({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:i,fileName:o,onDragStart:s}){let l=(0,C.Y)(e),c=(0,a.useRef)(null),[d,u]=a.useState({width:0,height:0});(0,p.wY)(c,()=>{u({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let m=(0,w.F)(e,L.K.ACTIONS_ASSETS,r,"Actions Component Search");return a.createElement("div",{className:h.s.wFull.$,style:f.sx.add({aspectRatio:"1/1"}).$},a.createElement("div",{ref:c,className:h.s.wFull.hFull.$},a.createElement(N.lX,{alwaysShowBorder:!1,buttonProps:{onContextMenu:m},displayType:"grid",draggable:{sourceForTracking:"actions_assets_tab",afterSuccessfulInsert:i,sectionNameForTracking:z.Bd,onDragStart:s},fileName:o,height:d.height,hideNameOverlay:!1,isSearch:n,item:e,numVariants:l,sectionPosition:r,shouldHideTooltip:!0,showName:!1,showTooltipImmediately:!1,useBaseTile:!0,width:d.width})))}},208971:(e,r,n)=>{n.d(r,{B:()=>et});var a=n(848318),i=n(301168),o=n(660376),s=n(879169),l=n(672449),c=n(382902);n(536384),n(524488);var d=n(989232),u=n(410441),p=n(63163),m=n(238462),_=n(461979),h=n(182317),g=n(297638),f=n(967688),E=n(371366),y=n(867499);n(466930),n(403451);var b=n(391375);n(730143),n(922484);var v=n(138528),T=n(535884),I=n(274466);n(720722);var S=n(475166),A=n(168852),w=n(874728),C=n(331084),N=n(412189),L=n(937629);n(113173);var O=n(880801),R=n(494064),P=n(849911),D=n(219706),k=n(241211),M=n(307843),F=n(131258),x=n(803107),U=n(600651),B=n(988182),G=n(144500),V=n(16309),H=n(620601),z=n(843786),K=n(263455),W=n(98197);n(6538);var j=n(709076),Y=n(798674),$=n(273095),q=n(156859),X=n(475297),J=n(605825),Z=n(912655),Q=n(314921),ee=n(846650);function et({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=Y.xA.COMPONENTS}){let et=(0,W.V)(),er=(0,L.eH)(),en=(0,v.T5)("AssetsTabDetailView").unwrapOr(null),ea=en?.name,ei=a.useRef(null),{currentSearch:eo}=(0,c.md)(R.WP),es=(0,c.md)(y.hO.currentSearchAtom),el=(0,c.md)(y.hO.currentCommunitySearchAtom),[ec,ed]=(0,c.fp)(x.Q8),eu=(0,c.Xr)(x.Rt),{recentFragments:ep}=(0,y.cN)(!et),em=(0,X.U)(et);(0,C.b)({disabled:!e});let{close:e_}=(0,P.cq)(),{libraries:eh,presets:eg,librariesForConnectedProject:ef}=(0,N.g)(),eE=!(0,c.md)(T.Sh)&&0===eh.length&&0===eg.length&&0===ef.length,{debouncedAssetSearch:ey,clearAssetSearchAndCancelDebounce:eb,cancelDebouncedAssetSearch:ev,flushDebouncedAssetSearch:eT}=(0,R.TC)({debounceWait:j.wU}),{debouncedFragmentTextSearch:eI,clearFragmentSearchAndCancelDebounce:eS,cancelDebouncedFragmentTextSearch:eA,flushDebouncedFragmentTextSearch:ew}=(0,K.S)({debounceWait:j.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:eC,cancelDebouncedFragmentTextSearch:eN,clearFragmentSearchAndCancelDebounce:eL,flushDebouncedFragmentTextSearch:eO}=(0,K.S)({debounceWait:j.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eR,eP]=(0,c.fp)(R.B1),eD=(0,L.Nv)(eo?.input.type==="input-text"),ek=a.useCallback(e=>{d.definedAnalyticsHandler.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:eD,entryPoint:"actions-assets-tab",featureSlug:"library-filter-usage"}),eP(e),ey(ec,e),eT()},[ey,eT,ec,eD,eP]),eM=(0,Q.s)(),eF=a.useRef(null),[ex,eU,eB]=s.t.useTabs({[Y.xA.COMPONENTS]:!0,[Y.xA.FRAGMENTS]:et,[Y.xA.COMMUNITY]:er},{defaultActive:n});(0,p.h)(()=>()=>{c.zl.set(E.q4),eP({type:A.I.ALL}),(0,j.mX)(c.zl.get(x.Q8),m.lQ,et,er,eM,y.G4.ACTIONS_ASSETS_TAB_DETAIL)});let eG=(0,b.g5)(S.$A.Design).productComponents.length,eV=ep?ep.length:0,eH=(0,a.useMemo)(()=>eB.activeTab===Y.xA.COMPONENTS?eG:eB.activeTab===Y.xA.FRAGMENTS?eV:(eB.activeTab,Y.xA.COMMUNITY,0),[eG,eV,eB.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,c.md)(x.dd),s=(0,c.md)(x.Rt),l=(0,i.d4)(I.l),{query:d,queryId:u,results:p,loaded:m}=function(e){let{currentSearch:r}=(0,c.md)(R.WP),n=(0,c.md)(y.hO.currentSearchAtom);return e===Y.xA.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===Y.xA.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),_=(0,M.Ev)(),h=(0,a.useRef)(new Set),g=`${e}-${u}`;(0,a.useEffect)(()=>{(m||r>0&&n)&&!h.current.has(g)&&(_({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:d,numSearchResults:m?p.length:r,currentSelection:l,module:F.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:k.$L,searchQueryResults:""}),h.current.add(g))},[_,o,s,l,g,e,d,p.length,m,r,n])}({activeTab:eB.activeTab,numRecentItems:eH,isEmptySearchQuery:0===ec.length});let ez=a.useCallback(e=>{switch(e){case Y.xA.COMPONENTS:et&&eA(),er&&eN(),(0,R.kN)(ec)&&(ey(ec,eR),eT());break;case Y.xA.FRAGMENTS:ev(),er&&eN(),(0,y.G1)(ec)&&(eI(ec),ew());break;case Y.xA.COMMUNITY:et&&eA(),ev(),(0,y.G1)(ec,!0)&&(eC(ec),eO());break;default:(0,o.xb)(e)}eB.setActiveTab(ex[e].id),ei.current?.focus()},[eA,ey,eR,eT,ev,eI,ew,ec,eB,ex,et,er,eN,eC,eO]),eK=a.useCallback(e=>{ed(e),eu((0,h.g)()),(eB.activeTab===Y.xA.COMPONENTS||0===e.length)&&ey(e,eR),et&&(eB.activeTab===Y.xA.FRAGMENTS||0===e.length)&&eI(e),er&&(eB.activeTab===Y.xA.COMMUNITY||0===e.length)&&eC(e)},[ed,eu,eB.activeTab,et,er,ey,eR,eI,eC]),eW=a.createElement(H.fu,{value:eB.activeTab,onChange:m.lQ,numItems:er?3:2},a.createElement(H.oz,{tabId:Y.xA.COMPONENTS,onAction:()=>ez(Y.xA.COMPONENTS)},(0,f.tx)("assets_in_actions.detail_view.components_tab.title")),et&&a.createElement(H.oz,{tabId:Y.xA.FRAGMENTS,onAction:()=>ez(Y.xA.FRAGMENTS)},(0,f.tx)("assets_in_actions.detail_view.fragments_tab.title")),er&&a.createElement(H.oz,{tabId:Y.xA.COMMUNITY,onAction:()=>ez(Y.xA.COMMUNITY)},(0,f.tx)("assets_in_actions.detail_view.community_tab.title"))),ej=eo?.queryId,eY=es?.searchId,e$=el?.searchId,eq=et&&eo&&"loaded"===eo.result.status?a.createElement("div",{className:g.s.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},a.createElement(l.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),a.createElement("span",{className:g.s.ml8.textBodyMedium.$},ea?(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:a.createElement("span",{className:g.s.textBodyMediumStrong.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,_.EJ)(ea,20)}):(0,f.tx)("assets_in_actions.fragments_section.empty_state.text")),a.createElement("span",{className:g.s.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,eX=eo&&!eE,eJ=a.useCallback(e=>{et&&(0,j.jk)(e)},[et]),eZ=(0,D._M)({action:O.JT.FIND_INSPIRATION,clientLifecycleId:void 0});return a.createElement(B.n,{width:(0,u.jz)(ee.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},a.createElement(B.n.Header,null,a.createElement("div",{ref:eF,className:g.s.flex.flexColumn.$},a.createElement(V.vj,{ref:ei,searchQuery:ec,onSearchChange:eK,forceRoot:r,onClear:()=>{ed(""),eb(),et&&eS(),er&&eL()},onPaste:eJ,endEnhancer:et&&a.createElement(j.hc,{entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,aiTrackingContext:eZ,activeTab:eB.activeTab}),placeholder:em}),(et||er||eX)&&a.createElement("div",{className:g.s.px8.pb8.$},a.createElement(U.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},a.createElement("div",null,(et||er)&&eW),a.createElement("div",null,eX&&a.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},a.createElement("div",{className:g.s.h24.flex.itemsCenter.$},a.createElement(J.i,{onSetAssetType:ek,value:eR,dropdownDataTestId:j.Km,recordingKey:j.Km,showTooltipOnEllipsis:!0}))),et&&a.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},a.createElement("div",{className:g.s.h24.flex.itemsCenter.$},es&&a.createElement(z.s,{containerRef:eF,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),er&&a.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},a.createElement("div",{className:g.s.h24.$}))))))),a.createElement(B.n.Body,null,a.createElement(Y.fJ.Provider,{value:{activeTabId:eB.activeTab}},a.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},a.createElement(G.q,{key:ej},eE?a.createElement(Z.S,{fillHeight:!0},a.createElement(w.Ee,{onClickExplore:e_,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):a.createElement($.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:et&&eq,onClickSuggestion:()=>{ez(Y.xA.FRAGMENTS)}}))),et&&a.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},a.createElement(G.q,{key:eY},a.createElement(q.M,{focusHandle:ei,initialState:{type:"recents",recents:ep},stretchEmptyStates:!0,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),er&&a.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},a.createElement(G.q,{key:e$},a.createElement(q.M,{focusHandle:ei,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}},156859:(e,r,n)=>{n.d(r,{M:()=>O});var a=n(848318),i=n(660376),o=n(536070),s=n(382902),l=n(524488),c=n.n(l),d=n(561258),u=n(297638),p=n(967688),m=n(867499),_=n(138528),h=n(113173),g=n(6178),f=n(738205),E=n(289826),y=n(6538),b=n(563979),v=n(555089),T=n(803425),I=n(76689),S=n(405591),A=n(936378),w=n(201571),C=n(912655),N=n(241658),L=n(4391);function O({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:i=3,maxResults:l,stretchEmptyStates:d=!1,header:f,isFigmake:E=!1,forceLoadingState:b,hideEditorNames:N,isCommunity:L,largeSpacing:O,searchResultRef:D,lastSearchResultRef:k,hubFileFragmentInsertionCallback:M}){let F=(0,s.md)(L?m.hO.currentCommunitySearchAtom:m.hO.currentSearchAtom),x=(0,s.md)(m.hO.sortByAtom),U=(0,g.s)(F),B=(0,_.T5)("FragmentsGrid").unwrapOr(null),G=B?.name,V=O?12:8,H=(0,h.kK)()||!G;if(n?.type==="recents"&&null===n.recents||F?.result.status==="loading"||b)return a.createElement("div",null,f&&a.createElement(P,{title:f.title,icon:f.icon,primaryText:f.primaryText,px:f.px}),a.createElement(S.V,{columns:i,padding:V,gap:12},Array.from({length:l??3*i}).map((e,r)=>a.createElement(S.V.Item,{key:r},a.createElement("div",{className:u.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},a.createElement(A.Y,{animationDelay:150*r})),a.createElement("div",{className:u.s.wFull.pt8.$},a.createElement(I.O.Container,null,a.createElement(I.O.SkeletonLine,{index:r}),a.createElement(I.O.SkeletonLine,{index:r,bottom:!0})))))));if(!F||"disabled"===F.result.status){if(!n)return null;let o=L?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_community"):H?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,p.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:G}),s=L?(0,p.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,p.t)("assets_in_actions.fragments_section.empty_state.text"),c=L?"community-fragments-grid-initial-state":"fragments-grid-initial-state",m=L?"community-fragment-initial-state-with-data":"fragments-grid-fragments-initial-state-with-data";return n.recents?.length?a.createElement("div",null,f&&a.createElement(P,{title:f.title,icon:f.icon,seeMore:f.seeMore,px:f.px,primaryText:f.primaryText}),a.createElement(R,{dataTestId:m,disableDragging:E,entryPoint:r,focusHandle:e,fragments:n.recents,hideEditorNames:N,hubFileFragmentInsertionCallback:M,isCommunity:L,largeSpacing:O,lastSearchResultRef:k,maxResults:l,numberOfGridColumns:i,searchResultRef:D})):a.createElement("div",{className:u.s.if(d,u.s.hFull).$},a.createElement(C.S,{fillHeight:d},a.createElement(y.N,null,a.createElement(y.N.ArtworkIllustration,{light:a.createElement(T.A,null),dark:a.createElement(v.A,null)}),a.createElement(y.N.Text,{title:o,subtitle:s,dataTestId:c}))))}if("errors"===F.result.status)return a.createElement("div",{className:u.s.if(d,u.s.hFull).$},f&&a.createElement(P,{title:f.title,icon:f.icon}),a.createElement(C.S,{fillHeight:d},a.createElement(y.N,null,a.createElement(y.N.ArtworkIcon,{variant:"danger"},a.createElement(o.r,null)),a.createElement(y.N.Text,{title:(0,p.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,p.t)("assets_in_actions.fragments_section.error.description")}))));if(0===F.result.data.length){let e="";return"input-text"===F.input.type?e=F.input.value:U&&(e=U.name),a.createElement("div",{className:u.s.if(d,u.s.hFull).$},f&&a.createElement(P,{title:f.title,icon:f.icon}),a.createElement(C.S,{fillHeight:d},a.createElement("span",{className:u.s.textBodyMedium.colorTextSecondary.$},(0,p.tx)("assets_in_actions.fragments_section.no_results.title",{query:c()(e,{length:24})}))))}let z=(0,w.t)(F.result.data,x);return a.createElement("div",null,f&&a.createElement(P,{title:f.title,icon:f.icon,seeMore:f.seeMore}),a.createElement(R,{disableDragging:E,entryPoint:r,focusHandle:e,fragments:z,hideEditorNames:N,hubFileFragmentInsertionCallback:M,isCommunity:L,largeSpacing:O,lastSearchResultRef:k,maxResults:l,numberOfGridColumns:i,searchResultRef:D}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:p,searchResultRef:m,lastSearchResultRef:_,disableActionShortcuts:h,disableDragging:g,hubFileFragmentInsertionCallback:y,dataTestId:v}){let T=(0,E.r)("fragments_grid",r,o,h,y),S=(0,d.z3)("faux");return a.createElement(f.x,{primary:!0,columns:n,padding:p?12:8,gap:12,dataTestId:v},e.slice(0,s??e.length).map((r,n)=>{let d=a.createElement(I.O.Container,null,a.createElement(I.O.Title,null,r.file_name),c?a.createElement(I.O.CommunityMetadata,{name:r.editor_name}):a.createElement(I.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l})),{primaryAction:p,secondaryAction:h,tertiaryAction:E}=T(r,n,null,e),y="";switch(r.type){case"fig-file-fragment":y=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":y=`${r.hub_file_id}-${r.node_id}`;break;default:(0,i.xb)(r)}let v=s?s-1:e.length-1;return a.createElement(f.x.Item,{key:y,primaryAction:p,secondaryAction:h,tertiaryAction:E},a.createElement(f.x.GridItemHighlight,null,a.createElement(b.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:S,disabled:g,ref:0===n?m:n===v?_:null})),a.createElement(f.x.ItemFooter,null,a.createElement("div",{className:u.s.pt8.$},d)))}))}function P({title:e,icon:r,seeMore:n,primaryText:i,px:o}){let s=n?a.createElement(N.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):a.createElement("div",{className:u.s.h24.$});return a.createElement(L.X,{px:o},a.createElement(L.X.Icon,null,r),a.createElement(L.X.Title,{endEnhancer:s,primaryText:i},e))}},400334:(e,r,n)=>{n.d(r,{C:()=>en});var a=n(848318),i=n(301168);n(938982);var o=n(658029),s=n(1511),l=n(135451),c=n(572220),d=n(382902),u=n(346126),p=n(540882);n(998568);var m=n(461979),_=n(755534),h=n(720522),g=n(52859),f=n(297638),E=n(967688),y=n(744577),b=n(912873),v=n(343973),T=n(792533),I=n(564837),S=n(652576),A=n(764474),w=n(17753),C=n(877686),N=n(880801),L=n(821503),O=n(849911),R=n(63890),P=n(307843);n(131258);var D=n(237116),k=n(724257),M=n(988182),F=n(959742),x=n(511137),U=n(638166),B=n(873197),G=n(265820),V=n(317325),H=n(519680),z=n(916469),K=n(669778),W=n(562029),j=n(481563),Y=n(6507),$=n(693499);function q({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:i}=(0,O.cq)();(0,L.z)();let o=a.useRef(null),{onAction:s,actionText:l}=(0,R.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c=B.H5.DETAILS,d=(0,G.D)({source:c,text:l,onAction:s,augmentedExtension:e,submenuRef:o,hideShortcutOnKeyboardFocus:!0}),u=(0,H.DS)(e);u&&(u=(0,P.M$)(u,c)),(0,F.k)({primaryAction:d,tertiaryAction:u,actionLabel:!0,active:!0,target:null});let p=(0,g.x)(),m=N.HW-48-41,h=n.unique_run_count,E=n.like_count;return a.createElement(M.n,{height:N.HW,width:p,dataTestId:"extension-details-view"},a.createElement(D.t,null),a.createElement(J,{extension:r,onGoBack:i}),a.createElement(_.P,{height:m,className:f.s.px16.$},a.createElement(Z,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),a.createElement(Q,{name:r.name,numLikes:E,numRuns:h}),a.createElement(ee,{publishedExtension:n}),a.createElement(et,{description:r.description})),a.createElement(z.Xq,{augmentedExtension:e}))}function X({augmentedExtension:e}){let r=(0,d.md)(x.t);return a.createElement(V.M6,{numResults:1,moduleFilters:r},a.createElement(q,{augmentedExtension:e}))}function J({extension:e,onGoBack:r}){let n=(0,A.k0)(e),d=n?(0,E.t)("qa.extensions.widget"):(0,E.t)("qa.extensions.plugin"),p=e.plugin_id,m=function(e){let r=(0,i.wA)(),n=(0,A.k0)(e)?(0,C.ox)(e.plugin_id):(0,C.ab)(e.plugin_id);return(0,a.useCallback)(()=>{(0,u.e)(n)||r((0,I.RK)({rawInput:n}))},[r,n])}(e),_=(0,i.wA)(),h=a.useCallback(()=>{_(T.S({url:n?(0,C.ox)(p):(0,C.ab)(p),linkType:n?"widget":"plugin"}))},[_,n,p]);return a.createElement("div",{className:f.s.p8.$,style:y.sx.add({height:"48 px"}).$},a.createElement("div",{className:f.s.flex.h32.px4.itemsCenter.justifyBetween.$},a.createElement("div",{className:f.s.flex.flexRow.$},a.createElement(o.K,{onClick:r,"aria-label":(0,E.t)("qa.go_back")},a.createElement(s.C,null)),a.createElement("div",{className:f.s.pl8.colorText.textBodyLarge.$},d)),a.createElement("div",{className:f.s.flex.flexRow.itemsCenter.gap8.$},a.createElement(o.K,{onClick:m,"aria-label":(0,E.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,E.t)("qa.extensions.open_in_community"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(l.N,null)),a.createElement(o.K,{onClick:h,"aria-label":(0,E.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,E.t)("qa.copy_link"),"data-tooltip-type":w.Ib.TEXT}},a.createElement(c.W,null)))))}function Z({imgUrl:e,extensionName:r}){let n=(0,v.X)(e);return a.createElement("div",{className:f.s.overflowHidden.bRadius5.mb12.$,style:y.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},a.createElement("img",{src:e,className:f.s.hFull.wFull.eventsNone.$,style:y.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function Q({name:e,numLikes:r,numRuns:n}){return a.createElement("div",{className:f.s.flex.flexRow.justifyBetween.$},a.createElement("div",{className:f.s.colorText.textHeadingMedium.$},e),a.createElement("div",{className:f.s.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:f.s.flex.flexRow.gap2.$},a.createElement(h.B,{svg:$.A,className:f.s.colorIconSecondary.$,style:y.sx.add({margin:"3px"}).$}),a.createElement("div",null,(0,m.$M)(r))),a.createElement("div",{className:f.s.flex.flexRow.gap2.$},a.createElement(h.B,{svg:Y.A,className:f.s.mx2.colorIconSecondary.$}),a.createElement("div",null,(0,m.$M)(n)))))}function ee({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:i}=r;return a.createElement("div",{className:f.s.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},a.createElement("div",{className:f.s.flex.$},a.createElement(b.H8,{user:{img_url:n,name:i},size:b.Pf.SMALL16}),a.createElement("div",{className:f.s.pl8.$},(0,U.kB)(e))),a.createElement("div",null,a.createElement(K.o,{publishedExtension:e,showTooltip:!0})))}function et({description:e}){return a.createElement("div",{className:f.s.pt16.pb8.$},a.createElement(p.R,{value:e,quillClassName:j.C,fallback:null,errorFallback:null}))}function er(){let{pop:e}=(0,O.cq)();return(0,a.useEffect)(()=>{e()},[e]),null}function en({extensionId:e,extensionType:r}){let n=(0,S._P)(e,!0),i=(0,W.Oy)();if(!n.loaded)return a.createElement(k.R,null);let o=n.plugin;if(!o)return a.createElement(er,null);let s=i(o,r);return(0,W.JT)(s)?a.createElement(er,null):s.publishedExtension?a.createElement(X,{augmentedExtension:{...s,publishedExtension:s.publishedExtension}}):a.createElement(k.R,null)}},265820:(e,r,n)=>{n.d(r,{D:()=>d});var a=n(848318),i=n(609335),o=n(307843),s=n(416406);n(700742);var l=n(873197),c=n(317325);function d({source:e,text:r,onAction:n,augmentedExtension:d,submenuRef:u,hideShortcutOnKeyboardFocus:p=!1}){let m=(0,c.OX)(),_=(0,s.qI)();return a.useMemo(()=>{let a={text:r,shortcuts:p&&_?[]:[l.Hz],onAction:e=>{d&&(0,i.wI)({extensionId:d.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:m.numResults,searchQuery:m.searchQuery,moduleFilters:m.moduleFilters}),n(e)},submenuRef:u};return(0,o.M$)(a,e)},[_,d,m.moduleFilters,m.numResults,m.searchQuery,p,n,e,u,r])}},317325:(e,r,n)=>{n.d(r,{M6:()=>l,OX:()=>c});var a=n(848318),i=n(382902),o=n(803107);let s=a.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return a.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=a.useContext(s),r=(0,i.md)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},519680:(e,r,n)=>{n.d(r,{DS:()=>f});var a=n(301168),i=n(967688),o=n(718284),s=n(63443),l=n(760641),c=n(125761),d=n(722563),u=n(324747),p=n(764474),m=n(849911),_=n(842449),h=n(873197),g=n(562029);function f(e){let r=function(e){let r=(0,a.wA)(),n=(0,d.U_)(),{extension:l,types:c}=e,{unsave:u}=E(e);if(!(e.types.has(h.Ag.RECENT)||e.types.has(h.Ag.USER_SAVED)||e.types.has(h.Ag.LOCAL)))return;let m=!!((0,p.ZQ)(l)&&e.publishedExtension);return{displayText:m?(0,i.t)("universal_insert.remove_local_version"):(0,i.t)("universal_insert.remove"),callback:()=>{!(c.has(h.Ag.LOCAL)&&(0,p.ZQ)(l)&&(r(o.qR(l.localFileId)),m))&&(c.has(h.Ag.RECENT)&&n&&r(((0,p.k0)(l)?s.Kq:s.lD)({storeInRecentsKey:n,resourceId:l.plugin_id})),c.has(h.Ag.USER_SAVED)&&u())}}}(e),n=function(e){let{save:r}=E(e),n=(0,a.wA)(),o=(0,d.U_)(),l=(0,c.TA)();if(!e.types.has(h.Ag.USER_SAVED)&&!(0,g.JT)(e))return{displayText:(0,i.t)("community.saves.save"),callback:()=>{if(r(),o&&l){let{extension:r}=e;n(((0,p.k0)(r)?s.RH:s.gU)({storeInRecentsKey:o,id:r.plugin_id,version:e.extension.id,currentUserId:l,skipPluginRun:!0}))}}}}(e),l=r||n,{pop:u}=(0,m.cq)();if(l)return{shortcuts:[h.r7],onAction:()=>{l.callback(),u()},text:l.displayText}}function E(e){let{extension:r}=e,n=(0,_.zX)({extensionId:r.plugin_id});return(0,l._i)(r.plugin_id,(0,p.k0)(r)?u.vt.WIDGET:u.vt.PLUGIN,e.publishedExtension,n)}},916469:(e,r,n)=>{n.d(r,{S3:()=>v,U4:()=>b,Xq:()=>y,q8:()=>E});var a=n(848318),i=n(301168),o=n(938982),s=n(998568);n(297638),n(744577);var l=n(453370),c=n(105653),d=n(409438),u=n(996046),p=n(511067),m=n(764474),_=n(849911),h=n(542097),g=n(870271);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,p.Um)(),i=b(r),l=(0,u.c4)(),{close:m}=(0,_.cq)(),f=(0,h.w0)();if(!i||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.e.AI_FOR_PRODUCTION,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||m()}));return a.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,p.Um)();return(0,m.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function v({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,i.wA)();return a.useCallback(a=>{if(e)o(l.oB());else if(a){let e=a.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,m.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},669778:(e,r,n)=>{n.d(r,{o:()=>g});var a=n(848318),i=n(720522),o=n(297638),s=n(967688),l=n(87463),c=n(900003),d=n(324747),u=n(17753),p=n(154709);function m({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?a.createElement("div",{"data-testid":"freemium-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),a.createElement(i.B,{svg:p.A,className:o.s.colorIconSecondary.$})):a.createElement("div",{"data-testid":"freemium-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function _({publishedExtension:e}){return e.monetized_resource_metadata?a.createElement("div",{"data-testid":"free-trial-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function h({showTooltip:e}){return e?a.createElement("div",{"data-testid":"off-platform-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),a.createElement(i.B,{svg:p.A,className:o.s.colorIconSecondary.$})):a.createElement("div",{"data-testid":"off-platform-text"},a.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?a.createElement(m,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?a.createElement(_,{publishedExtension:e}):(0,d.zF)(e)?a.createElement(h,{showTooltip:r}):null}},562029:(e,r,n)=>{n.d(r,{JT:()=>u,Oy:()=>d});var a=n(848318),i=n(652576);n(391720),n(162934);var o=n(982588),s=n(180294);n(125761);var l=n(20687),c=n(764474);function d(){let e=(0,i.tB)(),r=(0,i.ll)(),n=(0,i.U6)(),d=(0,i.cW)(),u=(0,i.ZT)(),p=(0,o.FP)(),m=(0,i.$1)(),_=(0,s.sZ)();return a.useCallback((a,i)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:a,publishedPlugins:i,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:p,type:m}){let _;let h=(0,o.Y8)({extension:e,publishedPlugins:i,publishedWidgets:s,communityPaymentsState:u});h&&(_=Object.values(d).find(e=>e.plugin_id===h.id));let g={types:new Set([m]),publishedExtension:h,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:p[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:_};if((0,c.ZQ)(e))return h&&!(0,l.nf)(h)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,v=r.widget_requests_allowed,T=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(T?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let I=!!(T?a:n)[e.plugin_id];return{...g,extension:e,canRun:I,canRequest:!I&&(T?v:b)}})({extension:a,org:_,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:m,communityPaymentsState:p,lastUsedTimestampById:e,type:i}),[_,r,n,d,u,m,p,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(131258),n(873197)},963586:(e,r,n)=>{n.d(r,{d$:()=>y});var a=n(848318);n(938982);var i=n(531788),o=n(773511),s=n(347701),l=n(808943),c=n(186606),d=n(768618),u=n(833420),p=n(63163);n(857607),n(781239),n(146968),n(52859);var m=n(297638);n(967688);var _=n(87463),h=n(887864);n(697494),n(299731);var g=n(303397);n(859480),n(730143),n(17753);var f=n(996306);n(849911),n(441764),n(965);var E=n(600651);function y({validationFailures:e,category:r,supportedKitType:n,selectedKit:i,shouldAutoFix:o}){return a.createElement(a.Fragment,null,[...e.system.filter(e=>e.rule.category===r).filter(e=>!n||e.rule.supportedKitTypes.includes(n)).map(e=>a.createElement(v,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:i.dsKitKey,shouldAutoFix:o})),...e.component.filter(e=>e.rule.category===r).map(e=>a.createElement(b,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:o}))])}function b({rule:e,output:r,shouldAutoFix:n}){let i=a.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,a=(0,d.UN)();for(let i in r){let o=a.get(i);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return g.Y5.triggerAction("commit"),n}},[e,r]),o=a.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:a.createElement(T,{rule:e,guids:o,meta:null,autofix:i,shouldAutoFix:n})}function v({dsKitKey:e,rule:r,output:n,shouldAutoFix:i}){let o=a.useCallback(a=>(a?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:a.createElement(T,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:i})}function T({rule:e,guids:r,meta:n,autofix:o,shouldAutoFix:h}){let[g,f]=a.useState(!1),[y,b]=a.useState(!1),[v,T]=a.useState(!1),A=e=>{T(o(e))},w=a.useCallback(e=>{c.Egt.clearSelection(),c.Egt.addToSelection(e)},[]),C=a.useMemo(()=>r.map(e=>(0,d.UN)().get(e)).filter(Boolean),[r]);return((0,p.h)(()=>{h&&A()}),0===r.length)?null:a.createElement(a.Fragment,null,a.createElement(E.B,{fullWidth:!0,justify:"space-between",align:"center"},a.createElement("button",{onClick:()=>b(!y),className:m.s.cursorPointer.flex.itemsCenter.$},y?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(S,{severity:e.severity}),a.createElement(_.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&a.createElement(i.$n,{variant:"secondary",onClick:A},v?"Fixed":"Autofix")),y&&a.createElement(u.Y1,{padding:{horizontal:12},direction:"vertical"},a.createElement(_.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),w&&a.createElement(i.$n,{variant:"link",onClick:()=>w(r)},"Select offending layers"),a.createElement("button",{onClick:()=>f(!g),className:m.s.cursorPointer.flex.itemsCenter.$},g?a.createElement(s.O,null):a.createElement(l.k,null),a.createElement(_.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),g&&a.createElement("div",{className:m.s.flex.flexColumn.wFull.maxH100.px12.overflowYScroll.$},n?a.createElement(_.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):a.createElement("div",{className:m.s.wFull.flex.flexWrap.gap4.$},C.map(e=>a.createElement(I,{key:e.guid,node:e}))))))}function I({node:e}){let r=a.useMemo(()=>a.createElement(f.xH,{guid:e.guid,node:e,useUI3Icon:!0}),[e]);return a.createElement(o.E,{className:m.s.borderBox.h24.flex.px8.gap4.itemsCenter.b1.radiusMedium.maxW150.font11.colorBorder.$,onClick:()=>{c.glU.panToNode(e.guid,!1);let r=(0,d.UN)().getCurrentPage();r&&(r.directlySelectedNodes=[e])},recordingKey:"nodeButton"},r,a.createElement("span",{className:m.s.truncate.$},e.name))}function S({severity:e}){switch(e){case h.x$.ERROR:return a.createElement("div",{className:m.s.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case h.x$.WARNING:return a.createElement("div",{className:m.s.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}n(988182),n(912655)},111427:(e,r,n)=>{n.d(r,{Ne:()=>Y,Xy:()=>j});var a=n(60324),i=n.n(a),o=n(81587),s=n(339549),l=n(167057),c=n(155209),d=n(405624),u=n(62648),p=n(461868),m=n(477676),_=n(929977),h=n(472297),g=n(877034),f=n(144602),E=n(622922),y=n(10060),b=n(563093),v=n(307759),T=n(235695),I=n(231541),S=n(255772),A=n(435312),w=n(905795),C=n(588045),N=n(746753),L=n(244697),O=n(450216),R=n(23048),P=n(480956),D=n(828508),k=n(233353),M=n(594713),F=n(645279),x=n(373580),U=n(453293),B=n(894978),G=n(857619),V=n(331142),H=n(662917),z=n(165668),K=n(333259),W=n(455738);let j=0,Y=2;new Map().set(0,F.A).set(i()(.25*Y,2),x.A).set(i()(Y/2,2),U.A).set(i()(.75*Y,2),B.A).set(Y,G.A),new Map().set(0,V.A).set(i()(.25*Y,2),H.A).set(i()(Y/2,2),z.A).set(i()(.75*Y,2),K.A).set(Y,W.A),new Map().set("Plus Jakarta Sans",N.A).set("Outfit",O.A).set("Inter",C.A).set("Public Sans",R.A).set("Domine",w.A).set("Source Serif 4",k.A).set("Roboto Serif",D.A).set("Roboto Mono",P.A).set("JetBrains Mono",L.A).set("Space Mono",M.A),new Map().set("Plus Jakarta Sans",l.A).set("Outfit",d.A).set("Inter",s.A).set("Public Sans",u.A).set("Domine",o.A).set("Source Serif 4",_.A).set("Roboto Serif",m.A).set("Roboto Mono",p.A).set("Space Mono",h.A).set("JetBrains Mono",c.A),new Map().set("Plus Jakarta Sans",E.A).set("Outfit",b.A).set("Inter",f.A).set("Public Sans",v.A).set("Domine",g.A).set("Source Serif 4",S.A).set("Roboto Serif",I.A).set("Roboto Mono",T.A).set("Space Mono",A.A).set("JetBrains Mono",y.A)},704764:(e,r,n)=>{n.d(r,{qq:()=>d});var a=n(186606),i=n(320953),o=n(768618),s=n(303397),l=n(775164);n(355755),n(614092);let c=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function d({create:e,canvasGrid:r,selectTargetNode:n=!0,size:d={x:1024,y:1024}}){let u,p,m;let _=r&&r.length>0,h=(0,o.UN)(),g=h.getCurrentPage();if(!g)throw Error("Something went wrong");let f=a.Egt?.hasGridCellSelection(),E=(0,l.i2)();if(1===E.length){var y;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,a=r.height/r.zoomScale,i=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-a/2,c=r.offsetY+a/2,d=e.absoluteBoundingBox,u=d.x+d.w,p=d.y+d.h;return!(u>o)&&!(p>c)&&!(d.x<i)&&!(d.y<l)}(u=E[0])&&(u=void 0),_){if(u?.isOrInSlide){let e=u.containingSlideId;p=h.get(e)}else u?.containingCooperFrame()&&(p=u.containingCooperFrame())}(y=u)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL","VECTOR","BOOLEAN_OPERATION"].includes(y.type)&&(!y.isCooperFrame||y.fills.some(e=>"IMAGE"===e.type))||(u=void 0),u&&u.isGrid&&f&&(m=u,u=void 0)}return i.l7.user("generate image",()=>{if(!u&&e){let e=s.Y5.getViewportInfo();if((u=h.createNode("RECTANGLE")).size=d,u.x=e.offsetX-u.size.x/2,u.y=e.offsetY-u.size.y/2,_){if(!p){let e=a.Ez5.canvasGrid().getClosestGridCoord({x:u.x,y:u.y},null),n=e.row>=0?e.row:0,i=e.col>=0?e.col:0,o=r[n]?.[i];if(o){let e=h.get(o);e?.isInstance||(p=e)}}if(p){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(p);u.x=e.x-u.size.x/2,u.y=e.y-u.size.y/2}}u.fills=[{type:"IMAGE",image:{hash:c("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}];let i=!1;f&&m&&(i=!!a.HV5?.insertGeneratedImageAtSelectedCell(m.guid,u.guid)),i||h.getCurrentPage()?.appendChild(u),n&&g.setSelectionToSingleNode(u.guid),a.glU.showSelectionOverlayImmediately()}}),u??null}},636074:(e,r,n)=>{n.d(r,{g:()=>G});var a=n(848318),i=n(301168),o=n(660376),s=n(189819),l=n(97612),c=n(186606),d=n(382902),u=n(476254),p=n(857607),m=n(967688),_=n(324762),h=n(303397),g=n(906314),f=n(702038),E=n(554326),y=n(313405),b=n(197696),v=n(222116),T=n(998390),I=n(513749),S=n(129256),A=n(880801),w=n(619534),C=n(849911),N=n(131258),L=n(122586),O=n(714967),R=n(649352),P=n(11929),D=n(580605),k=n(566654),M=n(663645);function F(){return a.createElement(v.d,null,a.createElement(U,null))}function x(e){return c.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function U(){let e=(0,i.wA)(),r=(0,w.RL)(A.JT.MAGIC_LINK,S.e),{start:n,stop:l,state:u,aiTrackingContext:p}=r,{close:_}=(0,C.cq)(),g=(0,a.useRef)(null),b=(0,E.ut)((0,f.aY)(),c.FAf.DESIGN);(0,a.useEffect)(()=>{u===w.qy.INITIAL&&null===g.current&&(g.current=b,(0,f.NT)(c.FAf.PROTOTYPE))},[u,b]),(0,a.useEffect)(()=>()=>{u===w.qy.INITIAL&&null!==g.current&&(0,f.NT)(g.current)},[u]);let v=(0,d.Xr)(I.d_),N=(0,d.Xr)(I.pD),L=(0,d.md)(I.pD),{selectedDisplayAmount:O,tlfAmount:F,onlyTopLevelNodesSelected:U,topLevelFrameIds:G}=c.X3B.getMagicLinkSelectionInfo(),V=!U;switch((0,a.useEffect)(()=>{if(u===w.qy.RUNNING&&V){f.tJ(G),N((0,m.tx)("magic_link.running_and_selecting_top_level_frames"));let e=setTimeout(()=>{N((0,m.tx)("magic_link.running"))},1e3);return()=>clearTimeout(e)}},[N,V,u,G]),u){case w.qy.INITIAL:return a.createElement(D.A,{action:A.JT.MAGIC_LINK,actionIcon:a.createElement(s.B,null),actionLabel:(0,m.tx)("fullscreen_actions.quick_actions.add-interactions-v2"),onPerform:()=>{g.current=null,n({})},getCustomDisabledTextFromSelectedNodes:r=>{let n,a;return F>10&&(n=(0,m.tx)("magic_link.tlf_selection_too_large"),a="Select 10 or fewer frames"),a&&e((0,y.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:a,numSelectedNodes:O,numSelectedTlfs:F}})),n},getCustomSelectedNodesAmount:x,aiTrackingContext:p,instructionAction:{type:"learn_more",url:A.Xy}},(0,m.tx)("magic_link.select_a_few_top_level_frames"));case w.qy.RUNNING:return v(!1),h.Y5.triggerAction("start-magic-link"),a.createElement(k.F,{onCancel:()=>{l(),_()},aiTrackingContext:p},L);case w.qy.DONE:return a.createElement(M.h,{magicLinkOutput:r.result,aiTrackingContext:p});case w.qy.ERROR:if(h.Y5.triggerAction("end-magic-link"),r.error instanceof T.ft)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),a.createElement(B,null);if(r.error instanceof T.sT)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),a.createElement(P.u,null,(0,m.tx)("magic_link.no_interactions_generated_general"));if(r.error instanceof T._U)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),a.createElement(P.u,null,(0,m.tx)("magic_link.no_interactions_generated_existing_interactions"));return a.createElement(R.E,{error:r.error,aiTrackingContext:p});case w.qy.CANCELLED:return h.Y5.triggerAction("end-magic-link"),null;default:(0,o.xb)(u)}}function B(){let e=(0,_.Tv)();return a.createElement(P.u,{buttons:[{label:(0,m.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,L.$I)({moduleToOpen:{type:"custom",module:a.createElement(O.A,{source:c.uQ6.MAGIC_LINK}),name:N.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,w.cT)(A.JT.MAGIC_LINK),(0,b.Yh)(u.D.getState().mirror.appModel,A.JT.AUTO_RENAME_LAYERS)&&(0,w.Ag)(A.JT.AUTO_RENAME_LAYERS,g.Ay,{source:c.uQ6.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:a.createElement(l._,null),shortcuts:[{key:p.Uz.ENTER,modifier:[p.xH.META]}]}]},(0,m.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}function G(e){let r=u.D.dispatch,n=(0,b.Yh)(u.D.getState().mirror.appModel,A.JT.MAGIC_LINK);(0,L.$I)({moduleToOpen:{type:"custom",module:a.createElement(F,null),name:N.Sn.MAGIC_LINK,beforeModuleOpen:()=>{r((0,y.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions_suggestion"}})),(0,w.B3)(A.JT.MAGIC_LINK),n&&(0,w.Ag)(A.JT.MAGIC_LINK,S.e,e)}},trackingData:{source:"prototype_magic_link_triggered"}})}},711625:(e,r,n)=>{n.d(r,{Y:()=>a});let a=()=>{}},934316:(e,r,n)=>{n.d(r,{H:()=>o,vE:()=>s});var a=n(382902),i=n(10082);let o=(0,a.eU)({isVideoNodeHovered:!1,pointerDownOnVideo:!1}),s=(0,i.hR)(null,{changeFileBehavior:i.hW.RESET_VALUE_ON_FILE_CHANGE});(0,a.eU)({})},69946:(e,r,n)=>{n.d(r,{Vm:()=>d,ks:()=>u}),n(848318);var a=n(382902),i=n(810503);n(601167),n(614092);let o=(0,a.eU)({}),s=(0,a.eU)(null,(e,r,n)=>{let a=e(o);if(n.parentNodeId&&!a[n.parentNodeId]){(0,i.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(o,e=>({...e,[n.nodeId]:n}))}),l=(0,a.eU)(null,(e,r,n)=>{let a=e(c(n)).map(e=>e.nodeId),i=new Set([n,...a]);r(o,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!i.has(e))))}),c=((0,a.eU)(e=>Object.keys(e(o)).length>0),(0,a.Iz)(e=>(0,a.eU)(r=>Object.values(r(o)).filter(({parentNodeId:r})=>r===e))));function d(e,r,n){a.zl.set(s,{nodeId:e,component:r,...n})}function u(e){a.zl.set(l,e)}function p({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let a=useSceneSelectorDangerouslyReturningNodeObjects((e,r)=>e.get(r),r.nodeId),i=useAtomValue(c(r.nodeId));if(!a)return null;let o=a.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,i.map(r=>React.createElement(p,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,a.eU)(e=>Object.values(e(o)).filter(({parentNodeId:e})=>!e))},460083:(e,r,n)=>{n.d(r,{TT:()=>m,go:()=>h,oo:()=>p,ul:()=>_});var a=n(19180),i=n(476254),o=n(615233),s=n(967688),l=n(533737),c=n(17753);let d=(0,o.ck)("6a475d98f86a36f65dcb117d395ba97299936193"),u="#FADCA2",p={"set-tool-default":{assetUrl:(0,o.ck)("9b325bed1ac3574234e9c70763ecdd885da55cb7"),assetBgColor:"#FFC470",getDescription:()=>(0,s.t)("help_on_hover.select_and_move_objects")},"set-tool-scale":{assetUrl:(0,o.ck)("695d3c7532184cf5a8ef6747952a8364630231f8"),assetBgColor:"#FFC470",getDescription:()=>(0,s.t)("help_on_hover.proportionally_resize_objects")},"set-tool-frame":{assetUrl:(0,o.ck)("3c6700181ba85f0d0e79c98d4261bdaded9a10bd"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.draw_containers_to_hold_designs")},"set-tool-section":{assetUrl:(0,o.ck)("bda225edcdd987d7031e762b1b4d50dff769c6b0"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.group_related_designs_to_organize_your_canvas_for_collaborators")},"set-tool-slice":{assetUrl:(0,o.ck)("6cd822eb7d3f0ddf161a5df473f6500e08658364"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.export_a_specific_part_of_your_design")},"set-tool-rectangle":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-line":{assetUrl:(0,o.ck)("8d7c470e7cfc3ad3b163d549df7119ff6e611aee"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_lines_between_two_points")},"set-tool-arrow":{assetUrl:(0,o.ck)("1ab8ad201e6b384e4e0e1aa22c101f9eeabe369f"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_arrows_between_two_points")},"set-tool-ellipse":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-regular-polygon":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-star":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},place:{assetUrl:(0,o.ck)("367bd03bfb73337091cc9a6f78a192d021d666e9"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.add_images_or_video_to_your_design")},"set-tool-pen":{assetUrl:(0,o.ck)("953fba23ddb40a712dc12ddef0c774814c761053"),assetBgColor:"#FFC6F2",getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_and_paths")},"set-tool-pencil":{assetUrl:(0,o.ck)("7788b8b59b8aac4b6e40bd999aa24fda8b9c0ce9"),assetBgColor:"#FFC6F2",getDescription:()=>(0,s.t)("help_on_hover.draw_freehand_sketches")},"set-tool-type":{assetUrl:(0,o.ck)("81cb004fdcc52a09b70f279dfecd345809b890d5"),assetBgColor:"#D5EB97",getDescription:()=>(0,s.t)("help_on_hover.add_a_text_box")},"component-insert":{assetUrl:(0,o.ck)("a013b57cf8f53dce708621e1055ba2ba05e80067"),assetBgColor:"#E9FDEF",getDescription:()=>(0,s.t)("help_on_hover.run_plugins_and_widgets_or_add_components_from_libraries")},"set-tool-hand":{assetUrl:(0,o.ck)("47b9fd427186f071f21f2c5fde49f235a255377a"),assetBgColor:"#80CAFF",getDescription:()=>(0,s.t)("help_on_hover.navigate_the_canvas")},"set-tool-comments":{assetUrl:(0,o.ck)("e5fa78c66fa8ba1a544d2b511df5dac34722a443"),assetBgColor:"#C7B9FF",getDescription:()=>(0,s.t)("help_on_hover.leave_notes_or_tag_collaborators")}},m=Object.keys(p);function _(e){return e?.kind===c.Ui.KEY&&m.includes(e.key)}function h(){return(0,a.k)().exp_help_on_hover_ff&&i.D&&i.D.getState().userFlags.in_help_on_hover_exp_treatment?[{name:"show-ui-hints-in-toolbar",get checked(){return!i.D.getState().userFlags.disabled_help_on_hover_ui_hints},callback:(e,r,n)=>{n(l.b({disabled_help_on_hover_ui_hints:!i.D.getState().userFlags.disabled_help_on_hover_ui_hints}))},flags:["design"]}]:[]}},296028:(e,r,n)=>{n.d(r,{tz:()=>M});var a=n(848318),i=n(301168),o=n(19180),s=n(410725),l=n(97481),c=n(967688),d=n(384192),u=n(807949),p=n(453370),m=n(31898),_=n(587745),h=n(381673),g=n(211971),f=n(303397),E=n(92338),y=n(730143),b=n(125761),v=n(318147),T=n(55116),I=n(407638),S=n(535884),A=n(679996),w=n(520779),C=n(259964),N=n(129723),L=n(386252),O=n(830899),R=n(274016),P=n(946877),D=n(285908),k=n(976089);function M(){let e=(0,y.q5)(),r=(0,i.wA)(),n=(0,i.d4)(e=>(0,I.getPermissionsStateMemoized)(e)),M=(0,i.d4)(S.F9),F=(0,s.Rs)(T.iY3,{branchFileKey:e?.key||""},{enabled:!!e}),x=(0,d.c$)(e?.key||""),U=x.data?.map(e=>e.id)??[],B=(0,i.d4)(e=>e.selectedView),G=(0,i.d4)(e=>e.plans),V=(0,i.d4)(e=>e.teams);a.useEffect(()=>{r((0,g.hr)({loadedPlans:G}))},[]);let H=function(){let e=(0,i.d4)(e=>e.plans),r=(0,i.d4)(e=>e.teams),n=(0,b.iZ)(),a=n?.external_restricted_org_id;return e.filter(e=>e.has_drafts).map(e=>{let i="org"===e.plan_type||!e.is_guest&&r?.[e.plan_id]?.pro_team;return{workspaceName:e.plan_name,userId:n?.id??"",orgId:e.plan_type===N.O.ORG?e.plan_id:null,teamId:e.plan_type===N.O.TEAM?e.plan_id:null,draftFolderId:e.draft_folder_id,isDisabledDueToECC:null!==a&&e.plan_id!==a,isFigJamDisabled:e.is_figjam_disabled,isFigmakeDisabled:!e.is_figmake_available||e.is_figmake_disabled,isCooperDisabled:e.is_cooper_disabled,isSitesDisabled:i&&e.is_sites_disabled,isSlidesDisabled:e.is_slides_disabled,isPlanLocked:e.is_plan_locked}})}(),z=F.data?.file?.project,K=z&&e?.editorType&&(0,l.d6)(z,e.editorType),W=e?.project&&K,j=B.editorType!==C.nT.Whiteboard,Y=!!(e&&j&&(0,_.Kz)(e)),$=W?Y?(0,c.t)("fullscreen.filename_view.duplicate-as-new"):(0,c.t)("fullscreen.filename_view.duplicate"):(0,c.t)("fullscreen.filename_view.duplicate-to-drafts"),q=e?.currentPlanUser?.draftsFolderId,X=(0,s.Rs)(T.oGE,{projectId:q||""},{enabled:!!q&&(0,o.k)().filter_pro_plus_sites_make_web}),J=a.useMemo(()=>{if(!e||!q)return!1;switch(e.editorType){case"figmake":return X?.data?.project?.canCreateFigmakeFile;case"sites":return e?.plan?.tier===v.Ag.PRO||e?.plan?.tier===v.Ag.ORG||e?.plan?.tier===v.Ag.ENTERPRISE;default:return!0}},[e,q,X]),Z=a.useMemo(()=>{if(e?.editorType!=="figmake"&&e?.editorType!=="sites")return!0;if(e?.editorType==="figmake")return W||!!q&&X?.data?.project?.canCreateFigmakeFile;if(e?.editorType==="sites"){let e=!!G.find(e=>"org"===e.plan_type||!e.is_guest&&V?.[e.plan_id]?.pro_team);return W||e}},[e,W,q,X?.data?.project?.canCreateFigmakeFile,V,G]),Q=W||J,ee=H.length>0;return{duplicateFile:()=>{if(!e)return;r(p.oB());let a=(0,E.xp)(e,e.project,n);if(a){e?.editorType===v._Y.SITES&&k.M?r(m.to({type:k.M,data:{team:a}})):e?.editorType===v._Y.FIGMAKE&&(0,P.W)()?r(m.to({type:D.i,data:{team:a}})):r(m.to({type:R.DV,data:{team:a,resource:e?.editorType!==v._Y.FIGMAKE||(0,o.k)().bake_starter_limit?w.vL.FILE:w.Bi.FIGMAKE,action:L.ZN.DUPLICATE_FILES,editorType:e?.editorType||v._Y.DESIGN,currentPlan:h.F.Plan.STARTER,upsellPlan:h.F.Plan.PRO,upsellSource:A.b.FILE_DUPLICATE}}));return}let i=r=>{f.Y5.dispatchIfSaved(u.YW({file:e,folderId:r,checkOssSalesExperiment:M,cmsCollectionIds:U}))};Q||!(0,o.k)().dtm_deprecation_plan_picker_for_files?i():ee&&r((0,m.to)({type:O.h,data:{payload:{workspaces:H,onSelectWorkspace:e=>{i(e.draftFolderId)},editorType:e.editorType,useCase:"fileDuplication"}}}))},duplicateDisplayText:$,canDuplicate:!!Z}}},446695:(e,r,n)=>{let a;var i=n(848318),o=n(301168),s=n(938982),l=n(773511),c=n(534497),d=n(19180),u=n(382902),p=n(418193),m=n(536384),_=n.n(m),h=n(978877),g=n(755596),f=n(410725),E=n(329228),y=n(781239),b=n(998568),v=n(129170),T=n(345249),I=n(720522),S=n(699342),A=n(297638),w=n(967688),C=n(873031),N=n(981733),L=n(972402);n(363367);var O=n(361964),R=n(807949),P=n(978036),D=n(244534),k=n(699547),M=n(431698),F=n(863270),x=n(696786),U=n(281294),B=n(587745),G=n(257270),V=n(162299),H=n(361323),z=n(433166),K=n(92338),W=n(459403);n(353806);var j=n(162261),Y=n(730143);n(672940);var $=n(125761),q=n(200300),X=n(55116),J=n(280255),Z=n(407638),Q=n(259964),ee=n(780673),et=n(17753),er=n(991675),en=n(943241),ea=n(698429),ei=n(102710),eo=n(849097),es=n(183143),el=n(296937),ec=n(304330),ed=n(573534),eu=n(852462),ep=n(282497),em=n(226455),e_=n(944761),eh=n(195159),eg=n(975695),ef=n(945639),eE=n(286981),ey=n(413469),eb=n(648013),ev=n(487624),eT=n(583053);let eI=(0,K.ck)(),eS="FULLSCREEN_FILENAME_CHEVRON",eA="FULLSCREEN_FILENAME_DROPDOWN";class ew extends y.o6{constructor(e){super(e),this.startRenaming=y.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(D.vg())}),this.submitFileName=e=>{this.props.dispatch(D.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(D.Wk())},this.nameRef=i.createRef()}renderButton(){let e=(0,T._C)({textRef:this.nameRef,text:this.props.name}),r=(0,w.t)("fullscreen.filename_view.file_input_title.aria_label",{fileName:this.props.name});return i.createElement(l.E,{className:_()(ev.DD,{[ev.il]:!!this.props.user}),onClick:this.startRenaming,ref:this.nameRef,htmlAttributes:{"data-tooltip":e?this.props.name:void 0,"data-tooltip-type":et.Ib.TEXT,"data-testid":this.props.dataTestId||"filename",onKeyDown:e=>(0,H.hx)({e,onClickHandler:this.startRenaming})},"aria-label":r},this.props.name)}render(){return this.props.isRenaming?i.createElement(ec.A,{className:_()(ev.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:y.Pt(this.props,"input"),maxLength:this.props.maxLength,inputId:"filename",hiddenLabelText:(0,w.t)("fullscreen.filename_view.file_input_title")}):this.renderButton()}}function eC(e){let r=(0,x.GS)();return i.createElement(ew,{...e,name:(0,B.oj)(e.repo),onRename:r=>{e.dispatch(k.NN({repo:e.repo,name:r}))},isUI3:r})}function eN(e){let r=(0,o.wA)(),n=(0,$.iZ)(),a=(0,Y.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,u.md)(U.lu),c=!!a&&(0,eg.DF)(a,n),d=null==a&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:a,canRename:c};return i.createElement(eL,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eL(e){let r,n,a;let o=(0,E.gY)(U.b_),l=(0,x.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,a=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return i.useEffect(()=>{d&&n&&a&&(0,G.hL)(n,(0,Q.wN)(a))},[d,n,a]),i.createElement(ew,{...e,name:n||(0,w.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:U.oE.EDITOR}):c.openFile?e.dispatch(R.Nw({file:c.openFile,name:r})):(0,b.$D)(s.e.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function eO({file:e}){let r=(0,o.wA)(),n=(0,M.n6)();if(!e||!(0,B.Kz)(e))return null;let a=er.e0.EDITOR_TOOLBAR_ACTION;return i.createElement("div",{className:ev._H},i.createElement(eo.a$,{branchFileKey:e.key,size:v.vj.LARGE,onClick:e=>{r(P.hx({direction:ee.Kn.TO_SOURCE,trackingContextName:a,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}ew.displayName="EditableName";let eR=e=>{let r=(0,f.Rs)(X.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,eo.AM)(e)).some(e=>e===eo.pT.IN_REVIEW||e===eo.pT.CHANGES_REQUESTED||e===eo.pT.APPROVED)};function eP({file:e,viewOnly:r}){let n=(0,f.Rs)(X.Std,{orgId:e.parentOrgId}),a=(0,f.Rs)(X.nn0,{fileKey:e.key}),s=(0,ea.ks)(),l=(0,L._I)(),c=(0,O.l7)(),d="loading"===n.status||e.parentOrgId&&!e.org,u=(0,ei.Yj)(e.fileRepoId),p=e.fileRepoId?u:null,m=(0,o.wA)(),_=(0,eb.kU)({file:e,viewOnly:r}),g=r&&!_;if(!e||p?.status==="loading"||d||"loading"===a.status||g)return null;let E=!!(e.repo&&(0,B.Ns)(e,e.repo)),y=!!(0,B.Kz)(e)&&!!e.trashedAt;return s&&!l?i.createElement("div",{className:A.s.flex.itemsCenter.wFitContent.$},i.createElement(eu.g,{variant:"toolbar-secondary",text:(0,w.t)("general.dev_mode")})):i.createElement(h.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},i.createElement("div",{className:A.s.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&i.createElement(eD,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:m,branchInfo:p}),i.createElement(i.Fragment,null,i.createElement(ef.A,null),!y&&!c&&i.createElement(eE.a,{file:e,viewPermission:_,recordingKey:"fileNamePermission"}))))}function eD(e){let r=eR(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let a=n.data.activeBranches.length;return a<1?null:i.createElement(S.L,{text:(0,w.t)("fullscreen.filename_view.branch-count",{BRANCHES:a}),onClick:()=>e.dispatch(P.o5({trackingContextName:er.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:ev.q3})}function ek({openFile:e,user:r}){let n=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:n.id===r?.personal_drafts_folder_id?(0,w.t)("fullscreen.filename_view.drafts_to_move"):(0,w.t)("fullscreen.filename_view.drafts")}(e,r),a=n.length>25?n:void 0,o=(0,x.GS)(),s=(0,ey.CR)(),l=(0,q.o3)(q.nt.interopFiles),p=(0,u.Xr)(el.V1),m=e?.project?.activeProjectResourceConnections?.[0],h=(0,Y.l3)(),g=h?.ownerRole?.userId===r?.id,f=!e?.teamId&&!e?.parentOrgId&&g,E=(0,d.k)().dtm_deprecation_pre_migration_onboarding&&f,b=!!m&&i.createElement(i.Fragment,null,i.createElement(N.W,{hostPlanName:m.hostPlanName,connectedPlanName:m.connectedPlanName,dataOnboardingKey:C.y}),i.createElement(C.f,{resourceConnection:m,projectUrl:s})),v=y.rf("folder-name-link","click",e=>{l&&(e?.preventDefault(),p(e=>!e))});return i.createElement("span",{className:n?ev.TV:ev.jw,title:a},s?i.createElement(c._,{htmlAttributes:{"data-testid":"folder-name-link"},className:ev.ub,"aria-label":n,href:s,newTab:!0,onClick:v,"data-onboarding-key":en.l},n):i.createElement("div",{className:_()(ev.ZL)},n),!o&&i.createElement(I.B,{ariaHidden:!0,svg:eT.A,className:ev.xo}),b,E&&i.createElement(en.O,{isOwner:g}))}class eM extends y.o6{constructor(e){super(e),a=i.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,a=!!e&&e.type===eA;return i.createElement(eh.i4,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:a,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e){let r=i.createElement(i.Fragment,null,i.createElement(es.c,{ariaLabel:(0,w.t)("fullscreen.filename_view.edit_file_menu"),className:e?ev.ai:ev.fN,dataOnboardingKey:eS,dataTestId:"filename-menu-chevron",divRef:a,dropdownKey:eA,rcsHandlerId:"Filename chevron clicked",recordingKey:this.props.recordingKey}),this.renderDropdownMenu());return i.createElement("div",{className:_()({[ev.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},r)}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,B.Kz)(r)),c=!!(r&&s&&(0,B.Ns)(r,s)),d=!!r&&(0,eg.DF)(r,e),u=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,p=!!r&&(0,J.Pe)(r),m=!n&&e&&r&&!p&&!this.props.isLimitedDevMode&&!this.props.hideChevron,h=!n&&e&&r&&this.props.isLimitedDevMode,f=m||h,E=!eI&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return i.createElement("div",{className:_()(ev.iW,{[ev.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":em.G8,onContextMenu:e=>{if(a.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});a.current.dispatchEvent(r),e.preventDefault()}}},i.createElement("div",{className:n?ev.Tt:ev.W},r?.fileRepoId&&e?.id&&i.createElement(i.Fragment,null,i.createElement(g.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),i.createElement(j.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,E&&!o&&i.createElement("div",{className:ev.tL},i.createElement(ey.Hl,{iconClassName:ev.ht})),i.createElement(ek,{user:e,openFile:r}),!n&&l&&s&&i.createElement(ed.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:er.e0.EDITOR_TOOLBAR_ACTION}),c&&s?i.createElement(eC,{dispatch:this.props.dispatch,user:e,repo:s,canRename:d,isRenaming:n}):i.createElement(eN,{recordingKey:y.Pt(this.props,"fileName")}),!n&&r&&e&&i.createElement("div",{className:ev.ld},i.createElement(eO,{file:r})),!n&&r&&i.createElement(e_.s,{openFile:r}),i.createElement("div",{className:_()({[ev.Dg]:!f})},f&&this.renderChevronWithDropdown(c)),(0,W.MP)()&&i.createElement(ep.e,{isUI3:!1,targetKey:eS}),!n&&r&&i.createElement(eP,{file:r,viewOnly:u})))}}eM.displayName="FilenameView",eM.contextType=F.QE;let eF=(0,p.xx)(V.vp);(0,o.Ng)(function(e){let r=(0,Z.getPermissionsState)(e),n=eF(r.user,r.currentUserOrgId,r.currentTeamId),a=(0,z.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,i=!1;return i=e.plans.length>1,{editorIsReadOnly:a,isLimitedDevMode:(0,ea.$A)(e.selectedView)&&!(0,L.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:n,hasMultipleWorkspaces:i,workspaceName:(0,V.HE)(e,n),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...r}})(eM)},195159:(e,r,n)=>{n.d(r,{i4:()=>ek});var a=n(848318),i=n(301168),o=n(186606),s=n(562027),l=n(19180),c=n(382902),d=n(870567),u=n(410725),p=n(967688),m=n(939742),_=n(89853),h=n(769642),g=n(640483),f=n(972402),E=n(361964),y=n(864907),b=n(807949),v=n(572073),T=n(453370),I=n(422444),S=n(207445),A=n(244534),w=n(31898),C=n(908301),N=n(431698),L=n(863270),O=n(892189),R=n(222556),P=n(425835),D=n(696786),k=n(353231),M=n(578590),F=n(587745),x=n(176440),U=n(212504),B=n(298035),G=n(497655),V=n(983178),H=n(249726),z=n(303397),K=n(643841),W=n(854640),j=n(92338),Y=n(788903),$=n(7148),q=n(730143),X=n(125761),J=n(106340),Z=n(318147),Q=n(55116),ee=n(407638),et=n(535884),er=n(779388),en=n(679996),ea=n(606672),ei=n(259964),eo=n(553709),es=n(197696),el=n(991675),ec=n(698429),ed=n(235169),eu=n(858541),ep=n(245662),em=n(849097),e_=n(831047),eh=n(62467),eg=n(678405),ef=n(101281),eE=n(171939),ey=n(175051),eb=n(882009),ev=n(516122),eT=n(442022),eI=n(296028),eS=n(254028),eA=n(596224),ew=n(157777),eC=n(756672),eN=n(2801),eL=n(975695),eO=n(413321);let eR=(0,j.ck)();var eP=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eP||{});let eD=e=>{let r=(0,i.d4)(e=>e.library.publishedByLibraryKey);if(!e)return!1;let n=e.teamId,a=e.libraryKey;return!!n&&!!a&&Object.keys(r.components[n]?.[s.l(a)]??[]).length>0};function ek({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:s,dropdownVisible:j,activatePathOnMount:eP,leanPadding:ek}){let eM=(0,i.d4)(e=>e.mirror.appModel),eF=(0,i.d4)(e=>e.selectedView),ex=(0,i.d4)(e=>(0,ee.getPermissionsStateMemoized)(e)),eU=(0,i.d4)(e=>e.userStateLoaded),eB=(0,q.q5)(),eG=(0,i.d4)(e=>e.fileVersion),eV=(0,q.Cq)({useSinatraType:!0}),eH=(0,i.d4)(e=>e.repos),ez=(0,i.d4)(e=>e.teams),eK=(0,i.d4)(e=>e.currentUserOrgId),eW=(0,i.d4)(e=>e.currentTeamId),ej=!!(0,X.iZ)(),eY=(0,i.d4)(e=>e.plans),e$=(0,ed.Q)({currentOrgId:eK,currentTeamId:eW}),eq=(0,D.GS)(),eX=(0,eC.sO)(),eJ=(0,eA.cJ)(),eZ=(0,eS.Oc)(),eQ=!!((0,l.k)().ds_pubplat_sts||(0,l.k)().ds_pubplat_sts_code),e0=(0,g.to)(),e1=(0,eO.F)(),e2=(0,ew.e)(),e3=function(e){let r=[Z.Ag.ORG,Z.Ag.ENTERPRISE],n=e?.plan?.tier,a=eD(e),i=(0,ec.ks)(),o=((0,l.k)().dt_component_browser??!1)&&a&&!!e?.canAccessFullDevMode,s=!!n&&r.includes(n);return o&&i&&s}(eB),e8=(0,E.ju)(),e6=(0,$.BI)(),e4=(0,$.m0)(),e5=(0,u.Rs)(Q.dTR,{fileKey:eB?.key||""},{enabled:!!eB?.key}),e7=(0,i.d4)(et.fA),e9=(0,c.md)(et.p9);(0,Y.SR)();let te=(0,u.Rs)(Q.iY3,{branchFileKey:eB?.key||""},{enabled:!!eB}),tt=(0,O.JT)(),tr=a.useMemo(()=>{if(eB&&"loaded"===e$.status)return(0,V.T0)(e$.data,eB.key)},[eB,e$]),tn=(0,i.d4)(et.F9),ta=(0,i.d4)(e=>e.mirror.appModel.topLevelMode),ti=(0,eE.jT)(eB,tn).unwrapOr(!1),to=(0,U.$n)(),ts=(0,N.n6)(),tl=(0,P.kD)(),tc=(0,P.J3)(),td=(0,P.JU)(tc),tu=tc===P.kN.FILE_IN_DRAFTS,tp=(0,h.pH)(eB?.key??null,{enabled:!!eB}),tm=(0,h.GI)("filename-context-menu"),t_=!!o.Ez5&&o.Ez5.uiState().isRecovery.getCopy(),th=a.useMemo(()=>e9?e7?"publish":"show_upsell_modal":"disabled",[e7,e9]),tg=(0,K.R6)(),{colorProfilePreference:tf}=(0,W.jK)(),tE=(0,W.hP)(tf),ty=(0,eu.S)(),tb=R.h.useTrackingContext({trigger:en.b.FILE_DUPLICATE}),tv=!1,tT=!1,tI=!1,tS=null;"loaded"===e5.status&&(tv=!!e5.data?.file?.canTrash&&!!(0,d.oA)(e5.data?.file?.canTrash),tT=!!(0,d.oA)(e5.data?.file?.canMove),tI=!!(e5.data.file&&(0,M._R)(e5.data.file.editorType??Z._Y.DESIGN,e5.data.file.currentPlanUser)),tS=(0,d.oA)(e5.data?.file?.canMoveWithReasons)||null);let tA=(0,er.jB)({files:[{editor_type:eB?.editorType??null,folder_id:eB?.project?.id??null}],repos:[],destinationFolderId:eB?.project?.id??null,isDestinationDrafts:!1}),tw=(0,er.Cp)(tA.destinationPlan?.key||null,tA.licenseType),tC=(0,f.xo)(),tN=tT,tL=!1;eB&&eF.editorType&&(tL=eF.editorType===ei.nT.Slides&&(0,d.oA)(eB.org?.isSlidesDisabled)||eF.editorType===ei.nT.Sites&&!!eB.org?.isSitesDisabled||eF.editorType===ei.nT.Cooper&&!!eB.org?.isCooperDisabled);let tO=eZ&&tA.requiresUpgrade&&!e2,tR=(0,er.Px)(tA,tL),tP=tC||tR||tO,tD=ex.user,tk=(0,eL.DF)(eB,tD),tM=tt&&tt.profile.entityType===eo.o1.TEAM,tF=!!tD&&tv&&!tM,tU=a.useCallback(()=>({canMove:!!tN,isUserViewerRestricted:!!tI,planUser:e5.data?.file?.currentPlanUser??null,inDrafts:!!e5.data?.file?.isDraftFile,draftsMoveData:tA,hasConnectedPlanUserInOrg:tw,canMoveWithReasons:tS||void 0}),[tN,tA,e5.data?.file?.currentPlanUser,e5.data?.file?.isDraftFile,tw,tI,tS]);a.useEffect(()=>{e4&&(e4._move_to_project=()=>{tN&&!tP&&(0,eL.RG)(s,eB,eH,tU())()}),e6?.updateFilePermissionV2?.(tk,tN&&!tP,tF)},[tk,tN,tF,tP,s,e6,e4,eB,tU,eH]);let tB=(0,eI.tz)();if(!eB||!j)return null;let tG=eF.editorType,tV=tG!==ei.nT.Whiteboard,tH=!!(tV&&(0,F.Kz)(eB)),tz="loaded"===e$.status&&(0,V.gV)(e$.data,eK),tK="loaded"===te.status&&(null===te.data.file||te.data.file&&(0,em.AM)(te.data.file)===em.pT.MERGED),tW=tH&&("loaded"!==te.status||tK),tj=!eB.canExport,tY=tG===ei.nT.Whiteboard&&!!eB.org?.figjamDisabledAt||tG===ei.nT.Slides&&(0,d.oA)(eB.org?.isSlidesDisabled)||tG===ei.nT.Sites&&!!eB.org?.isSitesDisabled||tG===ei.nT.Cooper&&!!eB.org?.isCooperDisabled||(0,ee.isOrgUserExternallyRestrictedFromState)(ex)||tj,t$=tD&&eB.canManage,tq=!!(tH&&eB.trashedAt),tX=tq&&!tW,tJ=!!tr,tZ=!!eY.find(e=>eB?.plan?.tier===Z.Ag.ORG||eB?.plan?.tier===Z.Ag.ENTERPRISE?`organization::${e.plan_id}`===eB?.plan?.id:`team::${e.plan_id}`===eB?.plan?.id),tQ=eB.project,t0=null;tQ&&""!==tQ.path&&(t0=tQ);let t1=eB.folderId===tD?.personal_drafts_folder_id,t2=eB.canEdit&&!!eB.thumbnailGuid,t3=e$.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],t8=e$.data?.currentUser?.userSidebarSections!=null?(0,d.oA)(e$.data.currentUser.userSidebarSections):null,t6=(0,V.t$)(t8??[],t3),t4=t6.find(e=>e.id===tr?.resource.sidebarSectionId),t5=()=>{let e=[];return 0===t6.length&&e.push({recordingKey:"favorite-custom",displayText:(0,p.t)("sidebar.starred"),isChecked:!1,callback:()=>rt(!1)}),t6.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,p.t)("sidebar.starred"):r.name,isChecked:!!t4&&t4.id===r.id,callback:()=>rt(!!t4&&t4.id===r.id,r.id)})}),e},t7=()=>{if("loaded"!==tp.status||!tp.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:a}=tp.data;return e?[{displayText:(0,p.t)("tile.dropdown.pin_to_workspace"),callback:()=>tm(eB.key,a)}]:r?[{displayText:(0,p.t)("tile.dropdown.edit_workspace_pin"),callback:()=>rr(n)},{displayText:(0,p.t)("tile.dropdown.remove_workspace_pin"),callback:()=>rn(n)}]:[]},t9=()=>{s(w.to({type:ey.dD,data:{entrypoint:eb.RR.FILENAME_VIEW_DROPDOWN}}))},re=()=>{let e=eB.teamId&&ez[eB.teamId];s(w.to({type:ev.$3,data:{afterFileMove:t9,team:e||null}}))},rt=(e,r)=>{if(!eV)return;let n={entrypoint:"editor",favoriteId:tr?.resource.id,sectionId:r,file:J.F.toLiveGraph(eV),fileBrowserEntryPoint:!1};e?s(y.qP(n)):s(y.Fb(n))},rr=e=>{s(w.to({type:(0,m.l)(),data:{pinnedFileId:e}}))},rn=e=>{s(w.to({type:(0,_.I)(),data:{pinnedFileId:e}}))},ra=!eR&&eF.editorType===ei.nT.Design&&eB.canEdit,ri=(0,eh.jv)((0,x.t)(to,el.e0.EDITOR_TOOLBAR,ta),{appModel:eM,selectedView:eF}),ro=(0,eh.jv)((0,x.m)(to,el.e0.EDITOR_TOOLBAR,ta,ts),{appModel:eM,selectedView:eF}),rs=(()=>{if(eR||!ej)return[];let e=[];return ty&&!t1&&(tZ&&(!tz||tJ)&&e.push({displayText:tJ?(0,p.t)("favorited_resources.indicate_section_prefix")+": "+(t4&&""!==t4.name?t4.name:(0,p.t)("sidebar.starred")):(0,p.t)("favorited_resources.add_to_sidebar"),children:t5()}),tJ&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,p.t)("favorited_resources.remove_from_sidebar"),callback:()=>rt(!0,t4?.id)})),e.push(...t7()),e})(),rl=(e,r)=>e?r:[],rc=[...ro,...rl(tH,ri),{separator:!0,displayText:""},...rl(ej&&!eR&&!t_&&!eZ,[{disabled:!(0,es.Yh)(eM,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,eg.Ah)(eM.activeCanvasEditModeType)?(0,p.t)("fullscreen.filename_view.version-history-hide"):(0,p.t)("fullscreen.filename_view.version-history-show"),callback:()=>{s(T.oB()),(0,eg.Ah)(eM.activeCanvasEditModeType)?s((0,ea.Eg)()):s((0,ea._b)({source:el.e0.EDITOR_TOOLBAR}))}}]),...rl(!!tl,[(0,e_.rC)({dispatch:s,fileKey:tl?.fileKey||"",templateName:tl?.name||""})]),...rl(td&&!eZ,[(0,e_.we)({dispatch:s,file:{key:eB.key,name:eB.name,folder_id:eB.folderId,team_id:eB.teamId,editor_type:eB.editorType,parent_org_id:eB.parentOrgId},fileNeedsMovingBeforePublish:tu,isPublished:!!tl,source:"filename-context-menu"})]),...rl(ej&&!eR&&!(tV&&tH)&&tG!==ei.nT.Whiteboard&&!e0&&!eX&&!eZ&&(!eJ||eQ),[{disabled:"disabled"===th,recordingKey:"publishVersion",displayText:(0,p.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===th?re():"publish"===th&&t9()}}]),...rl(!!ti,[{recordingKey:"viewFileAnalytics",displayText:(0,p.t)("fullscreen.filename_view.file_analytics"),callback:()=>{s((0,w.to)({type:ef.e,data:{fileKey:eB.key,entrypoint:G.F.FileView}}))}}]),...rl(e3,[{recordingKey:"codeConnect",displayText:(0,p.t)("dev_handoff.component_browser.title"),callback:()=>{e8()}}]),...rl(tV&&!eX&&!e0&&!eJ&&!t_&&!eZ,[{disabled:!tD,recordingKey:"exportSelectedExportables",displayText:(0,p.t)("fullscreen.filename_view.export"),shortcut:eM.keyboardShortcuts&&(0,es.c1)(eM.keyboardShortcuts,"export-selected-exportables"),callback:()=>{z.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...rl(e1&&eB.canEdit,[{disabled:!tD,recordingKey:"copyToFigmaSlides",displayText:(0,p.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,k.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eN.fx)(eB,eG).then(e=>{(0,eN.PF)(s,e)})}}]),...rl(rs.length>0,[{separator:!0,displayText:""},...rs]),{separator:!0,displayText:""},...rl(!tH,ri),{separator:!0,displayText:""},...rl(ra,[(0,B.o)(tg,tE)]),{separator:!0,displayText:""},...rl(ej&&!eR&&!t1&&(!(0,l.k)().filter_pro_plus_sites_make_web||tB.canDuplicate),[{disabled:!eU||tY,recordingKey:"duplicate",displayText:tB.duplicateDisplayText,callback:tB.duplicateFile}]),...rl(ej&&!tq,[{disabled:!tk,recordingKey:"rename",displayText:tH?(0,p.t)("fullscreen.filename_view.rename-branch"):(0,p.t)("fullscreen.filename_view.rename"),callback:()=>{s(T.oB()),s(A.vg())}}]),...rl(ej&&!eR&&tX,[{disabled:!t$,displayText:"Restore",callback:()=>{s(T.oB()),eV&&s(v.Rh({fileKeys:{[eB.key]:eV},userInitiated:!0}))}}]),...rl(ej&&!eR&&!!t0,[{disabled:!1,displayText:(0,p.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(t0){let e=(0,H.cU)(t0.id,t0.orgId??null,t0.teamId,ex,!!t0?.team?.canView);s(I.V3({url:e}))}}}]),...rl(ej&&!eR&&!tH,[{disabled:tP,sideText:(0,er.zS)(tA,tP,tw),rightJustifySideText:!0,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,p.t)("fullscreen.filename_view.move_file"),callback:(0,eL.RG)(s,eB,eH,tU())}]),...rl(!ty&&(tJ||!tz)&&!t1,[{recordingKey:"favorite",displayText:tJ?(0,p.t)("fullscreen.filename_view.unfavorite_label"):(0,p.t)("fullscreen.filename_view.favorite_label"),callback:()=>rt(!!tJ)}]),...rl(ej&&!eR&&!tq&&!t1&&tv,[{disabled:!tF,recordingKey:"delete",displayText:tH?(0,p.t)("fullscreen.filename_view.archive-branch"):(0,p.t)("fullscreen.filename_view.move_to_trash"),callback:tH?()=>{s(T.oB()),eV&&(s(C.VK({fileKeys:{[eB.key]:eV},userInitiated:!0})),e("Branch Archived",{fileKey:eB.key,fileRepoId:eB.fileRepoId}))}:()=>{if(s(T.oB()),!eB||!eV)return;let e=(0,F.up)(eB,eH);e&&(0,F.SA)(eB,e)?eB.repo?.canEdit&&!e.trashed_at&&s(S.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:eV}}})):tF&&s(S.U1({filesByKey:{[eB.key]:eV}}))}}]),...rl(ej&&!eR&&tq,[{disabled:!t$,displayText:(0,p.t)("fullscreen.filename_view.delete-branch"),callback:()=>{s(T.oB()),s(w.to({type:ep.e,data:{fileName:eB.name,onConfirm:()=>s(S.kj({fileKeys:{[eB.key]:!0},userInitiated:!0}))}}))}}]),...rl(!!t2,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,l.k)().dse_library_pg_thumbnails?(0,p.t)("fullscreen.filename_view.restore_default_file_thumbnail"):(0,p.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{s(b.$m({file_key:eB.key,thumbnail_guid:null}))}}])];return a.createElement(L.fu,{name:el.e0.EDITOR_FILENAME_DROPDOWN,properties:{...tb,slideConversionDropdownEntrypoint:e1}},a.createElement(eT.j,{activatePathOnMount:eP,allowCodegenOptions:eF.editorType===ei.nT.Design,dispatch:s,items:rc,lean:eq?"right":void 0,leanPadding:ek,onSelectItem:e=>{e.callback&&e.callback("",{},s)},parentRect:r,recordingKey:n,shouldUsePortal:eq,showPoint:!eq}))}},975695:(e,r,n)=>{n.d(r,{DF:()=>d,Qy:()=>p,RG:()=>u});var a=n(918777),i=n(584026),o=n(453370),s=n(587745),l=n(677334),c=n(680090);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,a.A)(e.createdAt).add(30,"s").isAfter((0,a.A)())||e.canEdit)}function u(e,r,n,a){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,i.h)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,is_published_site:r.isPublishedSite,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,a)}}function p(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},648013:(e,r,n)=>{n.d(r,{$5:()=>D,Kw:()=>k,Xo:()=>F,kU:()=>M,oH:()=>x});var a=n(848318),i=n(301168),o=n(186606),s=n(19180),l=n(410725),c=n(748008),d=n(345964),u=n(967688),p=n(560596),m=n(877146),_=n(696786),h=n(578590),g=n(7148),f=n(730143),E=n(125761),y=n(318147),b=n(55116),v=n(280255),T=n(532511),I=n(156495),S=n(692853),A=n(698429),w=n(487535),C=n(706251),N=n(710923),L=n(903747),O=n(901792),R=n(852462),P=n(98782);let D="edit_button_upgrading_to_edit";var k=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.PLAN_REQUEST_UPGRADE="planRequestUpgrade",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_EDIT_ROLE_REQUEST="pendingEditRoleRequest",e.VIEW_ONLY="viewOnly",e))(k||{});function M(e){let r=e.file,n=(0,E.iZ)(),o=(0,a.useMemo)(()=>!!r&&(0,v.Pe)(r),[r]),d=(0,i.d4)(({openFile:e})=>e?.org?.name),p=r.canEdit,_=(0,f.l3)(),w=!!(_&&_.editorType===y._Y.WHITEBOARD&&_.org?.figjamDisabledAt),C=r.editorType===y._Y.SLIDES&&!!(0,c.oA)(r.org?.isSlidesDisabled),L=r.editorType===y._Y.SITES&&(!!r.org?.isSitesDisabled||!!r?.team?.studentTeamAt),O=r.editorType===y._Y.COOPER&&!!r.org?.isCooperDisabled,R=w||C||L||O,P=(0,A.ks)(),{handleUpgrade:D,getUpgradeEligibility:k,getPendingRequest:M,getUpgradePathway:F,getIsUpgradeHandlerLoading:x,getHasProvisionalAccess:U}=(0,T.wH)(),B=(0,l.Rs)(b.OiG,{fileKey:r.key,orgId:r.parentOrgId}),G=(0,g.BI)();if("loading"===B.status)return{type:"editButtonLoading"};if("loaded"===B.status){let e=r.org?.inviteWhitelist?.guestInviteSetting===I.Gv.REQUIRE_APPROVAL&&!!B.data.orgJoinRequest,a=B.data.file?.fileRoleRequests.find(e=>e.requesterUserId===n?.id);G?.updateHasPendingEditRequest&&G.updateHasPendingEditRequest(!!a);let i=(0,u.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:d||""}),l=(0,u.t)("fullscreen.toolbar.pending-edit-request-tooltip"),c=e?i:a?l:void 0;if(null===r.editorType)return null;if(x())return{type:"editButtonLoading"};if(R)return{type:"viewOnly",isRestrictedView:o,isDisabledView:R,hasPendingRequest:!1};let _=(0,h.wR)(r.editorType),g=U(_),f=k(_,p);if(!B.data.file?.currentPlanUser){if(e)return{type:"viewOnly",isRestrictedView:o,isDisabledView:R,pendingToolTipMessage:i,hasPendingRequest:e};if(B.data.file?.mustRequestEditorRoleToEdit)return{type:"requestEditView",fileKey:r.key,isDevMode:P};if((0,s.k)().campfire_pending_edit_role_request&&a)return{type:"pendingEditRoleRequest",pendingToolTipMessage:l}}switch(f){case S.q.CAN_UPGRADE:let E=F(_);return{type:"planRequestUpgrade",upgrade:D({afterUpgradeCallback:()=>{},licenseType:_,upgradeReason:N.i.EDIT_BUTTON,entryPoint:m.tc.ASK_TO_EDIT}),upgradeOneClick:D({afterUpgradeCallback:()=>{},licenseType:_,upgradeReason:N.i.EDIT_BUTTON,entryPoint:m.tc.ASK_TO_EDIT_ONE_CLICK}),upgradePathway:E,fileKey:r.key,planType:r.parentOrgId?y.OL.ORG:y.OL.TEAM,planId:r.parentOrgId??r.teamId,licenseType:_};case S.q.CANNOT_UPGRADE:case S.q.UPGRADE_NOT_NEEDED:let b=M(_);if(b&&!g)return{type:"pendingUpgradeRequest",pendingUpgradeRequest:b,editorType:r.editorType,isRestrictedView:o,isDisabledView:!!w,pendingToolTipMessage:c,orgId:r.parentOrgId,hasPendingRequest:!0};if(B.data.file?.mustRequestEditorRoleToEdit)return{type:"requestEditView",fileKey:r.key,isDevMode:P};if(a)return{type:"pendingEditRoleRequest",pendingToolTipMessage:g?(0,u.t)("fullscreen.toolbar.we_ve_sent_your_request_to_the_file_s_owner_you_can_edit_other_files_up_to_3_days_while_admins_review_your_request"):(0,u.t)("fullscreen.toolbar.we_ve_sent_your_request_to_the_file_s_owner_you_can_create_and_edit_other_files_in_the_meantime")};if(p)break;return{type:"viewOnly",isRestrictedView:o,isDisabledView:R,pendingToolTipMessage:c,hasPendingRequest:!1}}}return null}function F({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:i,disableAutoAppearingTooltips:o}){let s=(0,_.GS)();switch(e.type){case"editButtonLoading":return a.createElement("div",{className:P.Hg},a.createElement(p.$,{"aria-label":(0,u.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},a.createElement("span",{className:P.yx},(0,u.t)("fullscreen.toolbar.edit-file-button")),a.createElement(d.kt,{className:P.yU})));case"requestEditView":return a.createElement(w.N,{fileKey:e.fileKey,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return a.createElement(R.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});let l={...e,variant:r,hideViewOnlyText:i,disableAutoAppearingTooltips:o};return a.createElement(O.K,{...l})}case"viewOnly":return a.createElement(R.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:i});case"planRequestUpgrade":return a.createElement(C.I,{onClick:e.upgrade,oneClickHandler:e.upgradeOneClick,variant:r,upgradePathway:e.upgradePathway,fileKey:e.fileKey,planType:e.planType,planId:e.planId,licenseType:e.licenseType});case"pendingEditRoleRequest":return a.createElement(L.m,{variant:r,pendingToolTipMessage:e.pendingToolTipMessage})}}function x(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&o.Ez5?.uiState().isRecovery.getCopy())}},253066:(e,r,n)=>{n.d(r,{U:()=>x});var a=n(848318),i=n(301168),o=n(186606),s=n(382902),l=n(315933),c=n(480960),d=n(410725),u=n(972402),p=n(462794),m=n(792830),_=n(521375),h=n(235312),g=n(666667),f=n(453370),E=n(244534),y=n(986368),b=n(533737),v=n(995218),T=n(696786),I=n(303397),S=n(702038),A=n(730143),w=n(125761),C=n(55116),N=n(20687),L=n(606672),O=n(259964),R=n(434289),P=n(764474),D=n(849911),k=n(731889),M=n(369844),F=n(723741);function x(e,r){let n=(0,i.wA)(),[x,U]=(0,s.fp)(M.R),[B,G]=(0,s.fp)(F.c),V=(0,T.GS)(),H=(0,A.tS)()??"",z=d.Rs(C.dDF,{key:H})?.data?.file?.hasPermission,K=(0,u._I)(),W=(0,u.U4)(),j=s.md(_.d)?.data,[Y,$]=(0,s.fp)(h.t),q=(0,i.d4)(e=>e.selectedView),X=(0,i.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),J=!(0,w.iZ)(),Z=(0,v.E3)(),Q=Z===O.nT.DevHandoff,ee=Z===O.nT.Illustration,et=Q?"handoff":ee?"illustration":"design",er=(0,i.Pj)(),en=(0,m.W)(),{close:ea}=(0,D.cq)();return(0,a.useCallback)(a=>{if(U(!1),G(!1),J||a===et)return!1;if(ea(),"handoff"===a){let a;if(!W)return!1;l.sn.start("switch_to_inspect_mode.left_panel_tti"),l.sn.start("switch_to_inspect_mode.right_panel_tti");let i=er.getState();if(i.universalInsertModal.showing&&((0,S.ax)(o._gJ.PLUGIN),i.universalInsertModal.fdPreviewResource)){let e=(0,N.my)(i.universalInsertModal.fdPreviewResource.id,i.publishedPlugins),r=(0,N.uF)(e);(0,N.M5)(r)&&(a={id:i.universalInsertModal.fdPreviewResource.id,type:k.s.PLUGIN})}return n(f.$T({...q,view:"fullscreen",editorType:O.nT.DevHandoff})),"fullscreen"===q.view&&q.compareVersionId&&(n(E.Y6({mode:o.Oin.KEEP_UI,type:R.lF.SPINNER})),n((0,L.Nb)({id:q.compareVersionId}))),X&&I.Y5.triggerAction("toggle-prototyping-info"),a&&n(y.IN({fdPreviewResource:a})),(0,p.Ym)(i,O.nT.DevHandoff,e,r,en),!0}if("illustration"===a){if(!(0,c.m)().ce_il_root)return!1;l.sn.start("switch_to_illustration_mode.right_panel_tti"),l.sn.start("switch_to_illustration_mode.toolbelt_animation");let a=er.getState();return n(f.$T({...q,view:"fullscreen",editorType:O.nT.Illustration})),n(g.r),(0,p.Ym)(a,O.nT.Illustration,e,r,en),!0}{l.sn.start("switch_to_design_mode.toolbelt_animation");let a=er.getState();if(S.tw()?.getCopy()===o._gJ.PLUGIN&&a.universalInsertModal.fdPreviewResource){let e=(0,N.my)(a.universalInsertModal.fdPreviewResource.id,a.publishedPlugins),r=(0,N.uF)(e);r?.manifest?.editorType?.includes(P.FW.FIGMA)&&n(y.pM({id:a.universalInsertModal.fdPreviewResource.id,isWidget:!1}))}return"fullscreen"===q.view&&q.devModeFocusId&&a.versionHistory.activeId&&a.versionHistory.activeId!==L.V_&&n((0,L.Eg)()),n(f.$T({...q,view:"fullscreen",editorType:O.nT.Design,devModeFocusId:void 0,showDevModeVariablesTable:void 0})),V&&n(y.KE()),K||(j||n(b.b({dev_mode_should_see_paywall_reminder:!0})),z||(0,S.NT)(o.FAf.INSPECT),$(h.c.DEFAULT)),(0,p.Ym)(er.getState(),O.nT.Design,e,r,en),!0}},[U,G,J,et,W,er,n,q,X,e,r,en,V,K,j,z,$,ea])}},628017:(e,r,n)=>{n.d(r,{Cv:()=>eC});var a=n(848318),i=n(301168),o=n(658029),s=n(748059),l=n(575055),c=n(877770),d=n(124810),u=n(347701),p=n(952647),m=n(186606),_=n(82433),h=n(19180),g=n(382902),f=n(536384),E=n.n(f),y=n(277930),b=n(410441),v=n(29188),T=n(637640),I=n(996202),S=n(865114),A=n(857607),w=n(116848),C=n(753269),N=n(61503),L=n(14564),O=n(214014),R=n(264478),P=n(439382),D=n(755534),k=n(401970),M=n(297638),F=n(967688),x=n(364421),U=n(363367),B=n(361964),G=n(453370),V=n(422444),H=n(244534),z=n(533737),K=n(67188),W=n(456028),j=n(696786),Y=n(330362),$=n(361323),q=n(459403),X=n(590781),J=n(856731),Z=n(730143),Q=n(493228),ee=n(424227),et=n(313405),er=n(259939),en=n(472287),ea=n(810807),ei=n(17753),eo=n(150340),es=n(240092),el=n(175964),ec=n(335744),ed=n(40808),eu=n(220184),ep=n(153203),em=n(812051),e_=n(254028),eh=n(596224),eg=n(259810),ef=n(697211),eE=n(209265),ey=n(755042),eb=n(27776),ev=n(574786),eT=n(586892),eI=n(821527);let eS="multiplayer-nickname-dropdown",eA=(0,q.ck)(),ew=(0,b.jz)(eb.rJv);function eC(e){let r=(0,Z.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,l=(0,i.wA)(),c=(0,i.d4)(e=>"prototype"===e.selectedView.view),d=(0,Q.dR)(),u=(0,Q.Ww)(),p=(0,w.B4)(),_=a.useCallback(e=>{!function(e,r,n,a,i,o,s){if(!i)return;let l=e.sessionID,c=l===r,d=o&&o.sessionID===r;if(c&&d)s();else if(a){let r=i.observingSessionID===l||i.sessionID===l?-1:e.sessionID,a=-1!==i.observingSessionID,o=i.observingSessionID!==l&&i.sessionID!==l;a&&n((0,et._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:i.observingSessionID,multiplayerSessionID:i.sessionID}})),o&&(n((0,et._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:l,multiplayerSessionID:i.sessionID}})),n(z.b({aware_of_observation_mode:!0}))),n(H.J4({...i,observingSessionID:r}))}else m.h3O.observeUser(l),i.observingSessionID!==l&&i.sessionID!==l&&n(z.b({aware_of_observation_mode:!0}))}(e,u?.sessionID,l,c,o,d,p)},[u?.sessionID,l,c,o,d,p]),h=c?null:r;return n?a.createElement(a.Fragment,null,!eA&&h&&n&&a.createElement(ep.k,{fileKey:h.key}),a.createElement(eN,{dropdownShown:s,multiplayer:o,user:n,editingFile:h,onUserClick:_})):a.createElement(a.Fragment,null,!eA&&h&&n&&a.createElement(ep.k,{fileKey:h.key}),a.createElement(eF,{dropdownShown:s,multiplayer:o,user:n,editingFile:h,onUserClick:_}))}function eN(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,W.DG)(s?.key||"").enabled;return a.createElement("div",{className:ev.Wh},a.createElement(ey.sK,null),l&&a.createElement(eM,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i}),s&&a.createElement(ed.w,{user:n,editingFile:s,isFileInWorkshop:c}))}function eL(e){let{query:r,usersToSearch:n}=e,[i,o]=a.useState(n),s=a.useRef(!1),l=(0,I.am)(),c=a.useRef(!1),d=c.current,u=a.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,eE.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),p=(0,y.A)(u,200);return a.useEffect(()=>(p(r),()=>{p.cancel(),s.current=!0}),[p,r,n]),{searchResults:i}}let eO=(0,a.forwardRef)(function(e,r){let{query:n,setQuery:i}=e,s=(0,S.ZC)(n),l=a.useRef(null),[u,p]=a.useState(!1),m=(0,j.GS)();return(a.useEffect(()=>{l.current&&n!==s&&(l.current.scrollWidth>l.current.clientWidth?p(!0):p(!1))},[s,n]),m)?a.createElement("div",{ref:r,className:ev.MT},a.createElement("div",{className:ev.qc,"aria-hidden":!0},a.createElement(k.U,{svg:eT.A,"aria-label":(0,F.t)("fullscreen.accessibility.search_icon")},a.createElement(c.h,null))),a.createElement(P.L,{ref:l,placeholder:(0,F.t)("collaboration.spotlight.menu.search.placeholder"),className:E()({[ev.Rt]:!0,[ev.ro]:u}),value:n,onClick:K.dG,onChange:e=>{i(e.target.value),(0,K.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&i(""),(0,K.dG)(e)},spellCheck:!1,autoFocus:!0}),a.createElement("div",{className:ev.WY},!!n&&a.createElement(o.K,{onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,F.t)("search.sidebar_search_clear")},a.createElement("div",{className:ev.i3},a.createElement(k.U,{svg:eI.default},a.createElement(d.A,null)))))):null});function eR({targetRect:e,arrowOffsetFromRectLeft:r,currentUser:n,peopleList:o,previousViewerList:s,previousViewerListRenderer:l,userListRenderer:c,onUserClick:d,onKeyDown:u,shouldDisableSpotlight:m,spotlightDisabledReason:_,dropdownRef:h}){let f=(0,j.GS)(),y=(0,a.useRef)(null),b=(0,a.useRef)(null),[v,T]=(0,g.fp)(C.ah),[I,S]=(0,g.fp)(C.Dv),[A,L]=a.useState(f?310:220),P=(0,a.useRef)(null),[k,U]=a.useState(0),B=(0,i.wA)(),V=(0,N.Av)(),H=Math.min(window.innerHeight-V-22,f?465:450);a.useLayoutEffect(()=>{y.current&&b.current&&L(H-y.current.offsetHeight-b.current.offsetHeight-16*k)},[f,H,k]);let z=(0,a.useCallback)(()=>{m||T(!0)},[T,m]),{start:K,cancel:W}=(0,ee.Z)(z),Y=(0,a.useCallback)(()=>{W(),T(!1)},[W,T]),$=(0,w.Vi)(),q=(0,a.useCallback)(()=>{m||($(),Y(),S(!0),B(G.oB()))},[Y,B,S,$,m]),X=(0,w.B4)(),J=(0,a.useCallback)(()=>{X(),B(G.oB())},[B,X]),Z=(0,Q.dR)(),et=Z&&n.sessionID===Z.sessionID?a.createElement(O.pz,{onClick:J,className:ev.BK},(0,F.tx)("collaboration.spotlight.button.stop")):a.createElement(R.$$,{onClick:q,className:ev.BK,onMouseOver:()=>{K(300)},onMouseLeave:Y,disabled:m,"data-dropdown-tooltip":m&&_?_:void 0,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip-show-below":!0},(0,F.tx)("collaboration.spotlight.tooltip.spotlight_me")),er=f&&o.length+(s?.length??0)>8,[en,ea]=a.useState(""),{searchResults:eo}=eL({query:en,usersToSearch:o}),{searchResults:el}=eL({query:en,usersToSearch:s??[]}),ed=eo.length>0&&el.length>0,eu=eo.length>0||el.length>0,em=0===eo.length&&0===el.length,e_=a.createElement("div",{className:ev.zW},a.createElement("div",{className:ev.me}));(0,a.useEffect)(()=>{U((er?1:0)+(""!==en&&em?1:0)+(eu?1:0))},[er,en,em,eu]);let eh=a.createElement(p.J,{mode:"dark"},a.createElement("div",{ref:y,className:ev.Km},a.createElement(es.Q,{user:n,isOverflow:!0,isCurrentUserHeaderRow:f}),a.createElement("div",{className:ev.Vr},et,a.createElement(ep.L,null))),er&&a.createElement(a.Fragment,null,e_,a.createElement("div",{className:ev.zK,ref:f?b:void 0},a.createElement(eO,{ref:f?void 0:b,query:en,setQuery:ea}))),""!==en&&em&&a.createElement(a.Fragment,null,e_,a.createElement("div",{className:`${ev.hg} ${M.s.mb8.$}`},(0,F.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),eu&&a.createElement(a.Fragment,null,e_,a.createElement(D.P,{width:ew-16,maxHeight:A,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:P},ed&&a.createElement("div",{className:ev.hg},(0,F.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),eo.length>0&&a.createElement(a.Fragment,null,a.createElement(x.W,{label:(0,F.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:c,onSelect:e=>{e.length&&(d(e[0]),B(G.oB()))},initiallyNotSelected:!0,customClassName:ev.aK},eo)),el.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ev.hg},(0,F.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),a.createElement(x.W,{label:(0,F.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:l,initiallyNotSelected:!0,customClassName:ev.aK},el)),f&&a.createElement("div",{className:M.s.pt12.$}))));return a.createElement(ec.Cf,{arrowOffsetFromRectLeft:r,className:E()(ev.qN,ev.QD),contentRef:h,disableDropdownScrollContainer:!0,lean:"center",maxHeight:H,maxWidth:ew,onKeyDown:u,propagateCloseClick:!0,removeUI3BorderPadding:f,showPoint:!f,targetRect:e},eh)}function eP({currentUser:e,peopleList:r,previousViewerList:n,onUserClick:o,shouldDisableSpotlight:c,spotlightDisabledReason:d,containerProps:u,multiplayer:m,orgPathPart:h,isSites:f,nominatePresenter:E,cancelPresenterNomination:y,hidePopover:b}){let I=(0,j.GS)(),S=(0,a.useRef)(null),L=(0,a.useRef)(null),[P,k]=(0,g.fp)(C.ah),[x,U]=(0,g.fp)(C.Dv),[B,V]=a.useState(I?310:220),H=(0,a.useRef)(null),[z,K]=a.useState(0),W=(0,i.wA)(),Y=(0,N.Av)(),$=Math.min(window.innerHeight-Y-22,I?465:450);a.useLayoutEffect(()=>{S.current&&L.current&&V(Math.min($-S.current.offsetHeight-L.current.offsetHeight-16*z,310))},[I,$,z]);let q=(0,a.useCallback)(()=>{c||k(!0)},[k,c]),{start:X,cancel:Z}=(0,ee.Z)(q),et=(0,a.useCallback)(()=>{Z(),k(!1)},[Z,k]),er=(0,w.Vi)(),en=(0,a.useCallback)(()=>{c||(er(),et(),U(!0),W(G.oB()),b())},[et,W,U,er,c,b]),ea=(0,w.B4)(),eo=(0,a.useCallback)(()=>{ea(),W(G.oB()),b()},[W,ea,b]),el=(0,Q.dR)(),ec=el&&e.sessionID===el.sessionID?a.createElement(O.pz,{onClick:eo,className:ev.BK},(0,F.tx)("collaboration.spotlight.button.stop")):a.createElement(R.$$,{onClick:en,className:ev.BK,onMouseOver:()=>{X(300)},onMouseLeave:et,disabled:c,"data-dropdown-tooltip":c&&d?d:void 0,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip-show-below":!0},(0,F.tx)("collaboration.spotlight.tooltip.spotlight_me")),ed=I&&r.length+(n?.length??0)>8,[eu,e_]=a.useState(""),{searchResults:eh}=eL({query:eu,usersToSearch:r}),{searchResults:eg}=eL({query:eu,usersToSearch:n??[]}),ef=eh.length>0&&eg.length>0,eE=eh.length>0||eg.length>0,ey=0===eh.length&&0===eg.length,eb=a.createElement("div",{className:ev.zW},a.createElement("div",{className:ev.me}));(0,a.useEffect)(()=>{K((ed?1:0)+(""!==eu&&ey?1:0)+(eE?1:0))},[ed,eu,ey,eE]);let eT=(e,r)=>{let n=(0,A.Gc)(()=>{let r=`/files${h}/user/${e.userID}`;T.Ay.redirect(r,v.eD?void 0:"_blank")}),i=[],s=m.sessionNominatedByCurrentUser===e.sessionID,l=m.presenterSessionID===e.sessionID,d=f&&!!e.sitesViewState&&(0,em.a6)(e.sitesViewState);return!r||l||c||(s?i.push({text:(0,F.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&y(e.sessionID,m)},key:"cancel-ask-to-spotlight"}):i.push({text:(0,F.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&E(e.sessionID,m)},disabled:d,key:"ask-to-spotlight"})),i.push({text:(0,F.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}),a.createElement(es.Q,{key:e.sessionID,user:e,isOverflow:!0,onUserClick:r?o:void 0,secondaryActions:i,hidePopover:b})},eI=a.createElement(p.J,{mode:"dark"},a.createElement("div",{ref:S,className:ev.Km},a.createElement(es.Q,{user:e,isOverflow:!0,isCurrentUserHeaderRow:I}),a.createElement("div",{className:ev.Vr},ec,a.createElement(ep.L,{hidePopover:b}))),ed&&a.createElement(a.Fragment,null,eb,a.createElement("div",{className:ev.zK,ref:I?L:void 0},a.createElement(eO,{ref:I?void 0:L,query:eu,setQuery:e_}))),""!==eu&&ey&&a.createElement(a.Fragment,null,eb,a.createElement("div",{className:`${ev.hg} ${M.s.mb8.$}`},(0,F.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),eE&&a.createElement(a.Fragment,null,eb,a.createElement(D.P,{width:ew-16,maxHeight:B,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:H},ef&&a.createElement("div",{className:ev.hg},(0,F.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),eh.length>0&&eh.map(e=>a.createElement(a.Fragment,{key:`currentViewer-${e.userID}`},eT(e,!0))),eg.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ev.hg},(0,F.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),eg.map(e=>a.createElement(a.Fragment,{key:`previousViewer-${e.userID}`},eT(e,!1)))),I&&a.createElement("div",{className:M.s.pt12.$}))));return a.createElement(s.mc,{...u(_.Ay.props(eD.popoverContainer($,ew)))},a.createElement(l.i,null,eI))}let eD={popoverContainer:(e,r)=>[{backgroundColor:"xon4yw5",borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xf7z5ut",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,boxSizing:"x9f619",maxHeight:"x1kb659o",maxWidth:"x10cxd3o",$$css:!0},{"--maxHeight":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`),"--maxWidth":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${r}px`)}]},ek="multiplayer-tools-dropdown",eM=a.memo(function(e){let r;let{multiplayer:n,dropdownShown:o,currentUser:l,onUserClick:c,thresholdUsesContainerWidth:d}=e,p=(0,a.useRef)(null),_=(0,a.useRef)(null),f=(0,a.useRef)(null),y=(0,a.useRef)(null),b=(0,a.useRef)(null),S=(0,j.GS)(),N=(0,J.wF)(),O=(0,B.ZO)(),R=(0,Y.k)(),P=(0,L.WN)(),D=(0,i.wA)(),[k,M]=a.useState(!1),x=(0,e_.Oc)(),H=o?.type,z=!x&&H===ek,W=(0,a.useMemo)(()=>n.allUsers.filter(e=>e.sessionID!==l?.sessionID),[n.allUsers,l]),q=(0,i.d4)(e=>"prototype"===e.selectedView.view||"presentation"===e.selectedView.view),Z=(0,U.e)(),ee=(0,X.Zr)("spotlight-me"),et=(0,em.G7)(),en=!q&&(Z||O||!ee);en&&et&&(r=(0,F.t)("left_rail.only_available_on_canvas"));let[ea,el]=(0,g.fp)(C.ah);ea&&!z&&el(!1);let ec=p.current&&_.current?p.current.clientWidth-_.current.clientWidth:void 0,ed=(0,J.Wq)(ec,d),{users:eu,overflowUsers:ep}=(0,J.uC)(W,null,!1,ed),ef=(0,a.useMemo)(()=>[...eu,...ep].filter(e=>e&&e.userID!==l.userID),[ep,eu,l]),eE=(0,a.useMemo)(()=>N?.filter(e=>!ef.some(r=>e.userID===r.userID)&&e.userID!==l.userID),[ef,N,l]),ey=(0,I.am)(),eb=(0,a.useCallback)(e=>{if((0,K.dG)(e),!_.current)return;f.current=_.current.getBoundingClientRect();let r=o?.type===ek;D(V.gR({type:ek})),r||ey("Multiplayer Tools Opened",{currentUserSessionID:l.sessionID,otherUserSessionsCount:ef.length})},[l.sessionID,D,o?.type,ef.length,ey]),eT=(0,Q.dR)(),eI=eT&&eT.sessionID!==l.sessionID?eT:null,eS=(0,er.q)(),eA=(0,w.tu)(),ew=(0,w.oJ)(),eC=(0,eh.cJ)(),eN=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let i=(0,A.Gc)(()=>{let r=`/files${eS}/user/${e.userID}`;T.Ay.redirect(r,v.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID,l=n.presenterSessionID===e.sessionID,c=eC&&!!e.sitesViewState&&(0,em.a6)(e.sitesViewState);return l||en||(s?o.push({text:(0,F.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&ew(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,F.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&eA(e.sessionID,n)},disabled:c,key:"ask-to-spotlight"})),o.push({text:(0,F.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(es.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[eC,n,eS,eA,ew,en]),eL=ef.length+1,eO=a.createElement(eg.s,{featured:eI,quickAccess:eu,maxVisibleUsers:(S?J.A8:J.Q2)-1,onUserClick:c,totalUserCount:eL}),[eD,eM]=a.useState(!1),{getTriggerProps:eF,getContainerProps:ex}=s.fP({isOpen:eD,onOpenChange:eM,type:"dialog",softDismiss:!0}),eU=(0,h.k)().a11y_multiplayer_dropdown?eF():{},eB=a.createElement(eo.x,null,a.createElement("button",{ref:_,"aria-expanded":null!=f.current&&o?.type===ek,"aria-label":(0,F.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),className:E()({[ev.XE]:!0,[ev.yx]:S&&ep.length>0,[ev.Ge]:S&&0===ep.length,[ev.wH]:z,[ev.yo]:!z&&k&&!x}),"data-tooltip":(0,F.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":_.current&&b.current?_.current.offsetWidth/2-b.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":_.current&&p.current?p.current.clientHeight/2-_.current.clientHeight/2:0,"data-tooltip-type":ei.Ib.TEXT,id:"multiplayer-toolbar-container",onClick:K.dG,onKeyDown:e=>{(0,$.hx)({e,onClickHandler:e=>{R?P(m.rcl.FOLLOW_PRESENTER):eb(e)},onEscapeHandler:()=>{_?.current?.blur()}})},onMouseDownCapture:e=>{R?P(m.rcl.FOLLOW_PRESENTER):eb(e)},onMouseLeave:()=>{M(!1)},onMouseOverCapture:e=>{M(!0),(0,K.dG)(e)},...eU},a.createElement("span",{key:l.sessionID,ref:y,className:ev.r9},a.createElement(es.Q,{user:l,key:l.sessionID,isOverflow:!1})),a.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ev.rR},ep.length>0&&a.createElement("span",{className:E()({[ev.zk]:!0,[ev.r9]:!0,[ev.wH]:z,[ev.yo]:!z&&k&&!x}),style:{minWidth:eL<10?8:eL<100?15:22}},`${eL}`),!x&&a.createElement("span",{ref:b},a.createElement(u.O,{className:E()({[ev.ai]:!0,[ev.wH]:z})}))))),eG=(0,a.useCallback)(()=>{D(G.oB()),p.current?.focus()},[D]),[eV,eH]=a.useState(null);return(0,a.useEffect)(()=>{eV&&eV.focus()},[eV]),a.createElement("span",{className:ev.EI,ref:p,"data-onboarding-key":"multiplayer-users-container"},S?a.createElement(a.Fragment,null,eB,eO):a.createElement(a.Fragment,null,eO,eB),!(0,h.k)().a11y_multiplayer_dropdown&&o?.type===ek&&b.current&&a.createElement(eR,{arrowOffsetFromRectLeft:b.current?b.current.offsetWidth/2+1:0,currentUser:l,dropdownRef:eH,onKeyDown:e=>{"Escape"===e.key&&eG()},onUserClick:c,peopleList:ef,previousViewerList:eE,previousViewerListRenderer:{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:r}){let n=(0,A.Gc)(()=>{let r=`/files${eS}/user/${e.userID}`;T.Ay.redirect(r,v.eD?void 0:"_blank")}),i=[{text:(0,F.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return a.createElement(es.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:i})}},shouldDisableSpotlight:en,spotlightDisabledReason:r,targetRect:b.current.getBoundingClientRect(),userListRenderer:eN}),(0,h.k)().a11y_multiplayer_dropdown&&b.current&&a.createElement(eP,{cancelPresenterNomination:ew,containerProps:ex,currentUser:l,hidePopover:()=>{eM(!1)},isSites:eC,multiplayer:n,nominatePresenter:eA,onUserClick:c,orgPathPart:eS,peopleList:ef,previousViewerList:eE,shouldDisableSpotlight:en,spotlightDisabledReason:r}))});function eF(e){let{multiplayer:r,user:n,onUserClick:i,dropdownShown:o,editingFile:s}=e,l=(0,a.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,a.useEffect)(()=>{},[r,n]);let c=(0,W.DG)(s?.key||"").enabled;return a.createElement("div",{className:ev.Wh},a.createElement(ey.sK,null),a.createElement(eU,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:i,editingFile:s}),s&&a.createElement(ed.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let ex="multiplayer-users-dropdown";function eU(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),p=(0,i.wA)(),m=(0,a.useCallback)(e=>{(0,K.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),p(V.gR({type:ex})))},[p]),_=o?.type,h=(0,a.useMemo)(()=>_===eS&&u.current?u.current.getBoundingClientRect():null,[_]),g=(0,eu.C$)(),f=(0,er.q)(),E=(0,ea.Lk)(),y=r?.key??null,{usersNotInCall:b}=(0,en.W5)(y,!0),I=n.allUsers,S=(0,J.D4)(),C=(0,i.d4)(e=>y&&e.voice.activeCall[y])||!1,{users:N,overflowUsers:L}=(0,J.uC)(E?b:I,s,C,S),O=a.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),R=(0,w.tu)(),P=(0,w.oJ)(),D=(0,eh.cJ)(),k=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let i=(0,A.Gc)(()=>{let r=`/files${f}/user/${e.userID}`;T.Ay.redirect(r,v.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID,l=n.presenterSessionID===e.sessionID,c=D&&!!e.sitesViewState&&(0,em.a6)(e.sitesViewState);return l||(s?o.push({text:(0,F.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&P(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,F.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,J.AD)(e)&&R(e.sessionID,n)},disabled:c,key:"ask-to-spotlight"})),o.push({text:(0,F.tx)("avatar.tooltip.view_profile"),onClick:e=>{i(e)},key:"view-profile"}),a.createElement(es.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[D,n,f,R,P]);return a.createElement("span",{className:ev.VV,"data-onboarding-key":"multiplayer-avatars"},N.map((e,r)=>{let n=a.createElement(es.Q,{user:e,onboardingKey:O(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?a.createElement("span",{key:e.sessionID,ref:u},n):n}),L.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,F.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===ex,className:ev.O5,ref:c,onMouseDown:m,onKeyDown:e=>{(0,$.hx)({e,onClickHandler:e=>{m(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:K.dG},a.createElement(el.f,{className:ev.zb,text:`${L.length}`})),o?.type===ex&&c.current&&a.createElement(eu.WM,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&p(G.oB())}},a.createElement(x.W,{autofocus:!0,label:"More multiplayer users",renderer:k,onSelect:e=>{e.length&&(l(e[0]),p(G.oB()))},customClassName:ev.cu},L))),o?.type===eS&&h&&a.createElement(ec.Cf,{targetRect:h,maxHeight:g,className:ev.a1,propagateCloseClick:!0},a.createElement(ef.M,null)))}},566090:(e,r,n)=>{n.d(r,{ec:()=>A});var a=n(186606),i=n(19180),o=n(967688),s=n(972402),l=n(2138),c=n(760641);n(614092);var d=n(197696),u=n(244780),p=n(582434),m=n(953508),_=n(108581);let h=[a.m1T.DESIGN_LAYOUT,a.m1T.WHITEBOARD_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT,a.m1T.BUZZ_LAYOUT,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.TEXT,a.m1T.COMMENTS],g=h.concat([a.m1T.VECTOR]),f=h.concat([a.m1T.VECTOR,a.m1T.PLACE_IMAGE]),E=[a.m1T.VECTOR],y=[a.m1T.PLACE_IMAGE],b=[a.m1T.PREVIEW,a.m1T.BRANCHING,a.m1T.COMPARE_CHANGES,a.m1T.HISTORY],v=[a.m1T.DESIGN_LAYOUT,a.m1T.SITES_LAYOUT,a.m1T.TEXT,a.m1T.RASTER,a.m1T.GRADIENT,a.m1T.PREVIEW,a.m1T.COMMENTS,a.m1T.BRANCHING,a.m1T.HISTORY,a.m1T.COMPARE_CHANGES],T={type:m.ZU.FLYOUT,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:a.NLJ.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:a.NLJ.SCALE,recordingKey:"toolScale"}],editModes:f,recordingKey:"moveFlyout"},I={type:m.ZU.FLYOUT,name:"shape-flyout",editModes:h,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:a.NLJ.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:a.NLJ.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:a.NLJ.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:a.NLJ.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:a.NLJ.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:a.NLJ.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},S={type:m.ZU.FLYOUT,name:"comments-flyout",editModes:h,recordingKey:"commentsFlyout",children:[{action:"set-tool-comments",property:"currentTool",propertyValue:a.NLJ.COMMENTS,recordingKey:"toolComments"},{action:"set-tool-annotate",property:"currentTool",propertyValue:a.NLJ.ANNOTATE,recordingKey:"toolAnnotate"},{action:"set-tool-measure",property:"currentTool",propertyValue:a.NLJ.MEASURE,recordingKey:"toolMeasure"}]},A={type:m.ZU.TOOL,tool:a.NLJ.COMMENTS,action:"set-tool-comments",editModes:h.concat([a.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},w={type:m.ZU.ACTION,action:"component-insert",editModes:h,recordingKey:"toolResourceInsert",onboardingKey:"insert",isActive:c.kg};[{type:m.ZU.TOOL,tool:a.NLJ.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:b,recordingKey:"toolDefault"},T,{type:m.ZU.FLYOUT,name:"region-flyout",editModes:h,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:a.NLJ.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:a.NLJ.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:a.NLJ.SLICE,recordingKey:"toolSlice"}]},I,{type:m.ZU.FLYOUT,name:"pen-flyout",editModes:g,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:a.NLJ.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:a.NLJ.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:m.ZU.TOOL,tool:a.NLJ.VECTOR_BEND,action:"set-tool-bend",editModes:E,recordingKey:"toolBend"},{type:m.ZU.TOOL,tool:a.NLJ.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:E,recordingKey:"toolPaintBucket"},{type:m.ZU.TOOL,tool:a.NLJ.VECTOR_LASSO,action:"set-tool-vector-lasso",editModes:E,recordingKey:"toolVectorLasso",featureFlags:["ce_il_la_tool"]},{type:m.ZU.TOOL,tool:a.NLJ.VECTOR_VAR_WIDTH_POINT,action:"set-tool-var-width-point",editModes:E,recordingKey:"toolVarWidthPoint",featureFlags:["ce_il_var_width_points"],nonEditorsAllowed:!1,newFileDisabled:!1,onlyShowInReadOnly:!1},{type:m.ZU.TOOL,tool:a.NLJ.VECTOR_CUT,action:"set-tool-cut",editModes:E,recordingKey:"toolCut",featureFlags:["ce_il_vem_cut_tool"]},{type:m.ZU.TOOL,tool:a.NLJ.OFFSET_PATH,action:"set-tool-offset-path",editModes:E,recordingKey:"toolOffsetPath",featureFlags:["ce_il_vem_offset_path"]},{type:m.ZU.TOOL,tool:a.NLJ.SHAPE_BUILDER,action:"set-tool-shape-builder",editModes:E,recordingKey:"toolShapeBuilder",featureFlags:["ce_il_sb_tool"]},{type:m.ZU.TOOL,tool:a.NLJ.TYPE,action:"set-tool-type",editModes:h,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},w,{type:m.ZU.TOOL,tool:a.NLJ.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:v,recordingKey:"toolHand"},A,{type:m.ZU.LABEL,label:"toolbar-place-image",editModes:y,recordingKey:"toolPlaceOneImage"},{type:m.ZU.TEXT_BUTTON,action:"place-all-images",editModes:y,recordingKey:"toolPlaceAllImages"},{type:m.ZU.TEXT_BUTTON,action:"discard-all-images",editModes:y,recordingKey:"toolDiscardAllImages"},{type:m.ZU.TEXT_BUTTON,action:"leave-edit-mode",editModes:E,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}].map(e=>e===A?S:e);let C={type:m.ZU.ACTION,action:"focus-mode-component-set-toggle",editModes:[a.m1T.DESIGN_LAYOUT,a.m1T.SITES_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>a.Ez5.uiState().focusModeState.getCopy()===a.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},N=[{type:m.ZU.ACTION,action:"multi-edit-text",editModes:h,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:m.ZU.ACTION,action:"select-matching",editModes:[a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT],recordingKey:"selectMatching"},C];function L(e){return(r,n,a)=>!!n?.[e]}m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,a.m1T.DESIGN_LAYOUT,a.m1T.SITES_LAYOUT,m.ZU.ACTION,a.m1T.SITES_LAYOUT,m.ZU.ACTION,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT,a.m1T.BUZZ_LAYOUT,e=>O(e);let O=e=>!((0,i.k)().sts_multiedit_toggle&&a.Ez5?.editorPreferences().toggleResponsiveSetAutoFocus.getCopy()&&a.Ez5?.currentEditModeInDesign()===a.m1T.SITES_LAYOUT)&&(0,d.Yh)(e,"select-matching");m.ZU.ACTION,a.m1T.DESIGN_LAYOUT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT,m.ZU.ACTION,m.ZU.ACTION,[...h,a.m1T.DEV_HANDOFF],m.ZU.ACTION,[...h,a.m1T.DEV_HANDOFF],m.ZU.ACTION,a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,L(a.YnC.SIZE),m.ZU.ACTION,L(a.YnC.EXPORTS),m.ZU.ACTION,L(a.YnC.EFFECTS),m.ZU.ACTION,L(a.YnC.LAYER),m.ZU.ACTION,L(a.YnC.VISIBLE),m.ZU.ACTION,L(a.YnC.NAME),m.ZU.ACTION,L(a.YnC.FILL),m.ZU.ACTION,L(a.YnC.STROKE),m.ZU.ACTION,L(a.YnC.TEXT),m.ZU.ACTION,L(a.YnC.TEXT_STYLE),m.ZU.ACTION,L(a.YnC.PROTOTYPE_INTERACTIONS),m.ZU.ACTION,L(a.YnC.OVERLAY),m.ZU.ACTION,m.ZU.ACTION,l.P,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,(0,i.k)().sts_code_authoring||(0,i.k)().sts_code_authoring_by_plan,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.ACTION,m.ZU.FLYOUT,p.uo,m.ZU.FLYOUT,p.IF,[m.ZU.ACTION,m.ZU.ACTION,...N,m.ZU.ACTION,m.ZU.ACTION,m.ZU.FLYOUT,m.ZU.ACTION,m.ZU.ACTION,(m.ZU.ACTION,l.P,()=>a.Ez5.editorState().selectionIsMask.getCopy()===a.F84.ON),m.ZU.FLYOUT,m.ZU.ACTION,(m.ZU.ACTION,a.m1T.DESIGN_LAYOUT,a.m1T.TEXT,a.m1T.SLIDE_LAYOUT,a.m1T.SITES_LAYOUT),m.ZU.ACTION,(m.ZU.ACTION,[...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],(e,r,n)=>n?.canEdit||(0,s.tn)({openFile:n})),(m.ZU.ACTION,[...h,a.m1T.DEV_HANDOFF,a.m1T.PREVIEW],()=>!0)],m.ZU.TOOL,a.NLJ.SELECT,a.m1T.DEV_HANDOFF,a.m1T.DEV_HANDOFF_HISTORY,_.A,m.ZU.TOOL,a.NLJ.MEASURE,a.m1T.DEV_HANDOFF,m.ZU.TOOL,a.NLJ.ANNOTATE,a.m1T.DEV_HANDOFF,m.ZU.TOOL,a.NLJ.COMMENTS,a.m1T.DEV_HANDOFF,m.ZU.FLYOUT,h.concat([a.m1T.DEV_HANDOFF,a.m1T.PREVIEW,a.m1T.MAGIC_LINK]),m.ZU.FLYOUT,u.Iv,u.Iv,u.Iv},953508:(e,r,n)=>{n.d(r,{IF:()=>s,Xz:()=>l,ZU:()=>a,gc:()=>o,uo:()=>c});var a=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(a||{}),i=(e=>(e.STANDARD_BUTTON="STANDARD_BUTTON",e.DIALOG_TRIGGER_BUTTON="DIALOG_TRIGGER_BUTTON",e.DROPDOWN_TRIGGER_BUTTON="DROPDOWN_TRIGGER_BUTTON",e.DROPDOWN_GROUP_HEADER="DROPDOWN_GROUP_HEADER",e))(i||{});let o="MODIFIERS_OVERFLOW_FLYOUT_ID",s="BOOLEAN_OPERATIONS_FLYOUT_ID",l="COMPONENT_CONTROLS_ID",c="CREATE_COMPONENT_OPTIONS_ID"},955095:(e,r,n)=>{n.d(r,{p:()=>j});var a=n(848318),i=n(301168),o=n(762217),s=n(587606),l=n(347701),c=n(186606),d=n(19180),u=n(536384),p=n.n(u),m=n(138094),_=n(996202),h=n(813009),g=n(857607),f=n(781239),E=n(156974),y=n(699342),b=n(967688),v=n(972402),T=n(453370),I=n(995218),S=n(858160),A=n(696786),w=n(755860),C=n(303397),N=n(732545),L=n(959750),O=n(659502),R=n(590781),P=n(511067),D=n(554326),k=n(259964),M=n(17753),F=n(197696),x=n(960161),U=n(698429),B=n(80133),G=n(304330),V=n(442022),H=n(707520),z=n(709864);let K="zoom-input-dropdown";function W({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o}){let l=(0,_.am)();a.useEffect(()=>{l("View Menu Opened")},[l]);let u=(0,I.E3)(),p=(0,A.GS)(),m=(0,D.J2)((0,N.d)().activeCanvasCurrentZoom),g=(0,D.J2)((0,L.UK)().activeCanvasPixelPreview),f=(0,D.J2)((0,N.d)().activeCanvasRetinaMode),E=(0,h.R)(e=>e.mirror.appModel.keyboardShortcuts),y=(0,i.d4)(e=>!e.mirror.appModel.isReadOnly),b=(0,i.d4)(e=>!!e.user),T=(0,i.d4)(e=>(0,U.$A)(e.selectedView)),S=(0,v._I)(),P=(0,B.XR)(),M=(0,D.J2)(c.Ez5.uiState().filterAnnotationCategoryId),x=u===k.nT.Design,G=u===k.nT.Slides,V=u===k.nT.Sites,K=u===k.nT.Figmake,W=u===k.nT.Illustration,Y="design"===(0,k.oD)(u),$="whiteboard"===(0,k.oD)(u),q=(0,i.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),X=(0,D.J2)(c.Ez5.editorPreferences().showPropertyLabels),J=(0,D.J2)(c.Ez5.editorPreferences().showFrameGrids),Z=(0,D.J2)((0,N.d)().showFrameGridsViewOnly),Q=(0,H.Td)(),ee=!Q,et=ee?"showFrameGrids":"showFrameGridsViewOnly",er=(0,D.J2)((0,d.k)().figjam_snap_to_dot_grid_reset?(0,L.UK)().snapToDotGridStagingReset:(0,L.UK)().snapToDotGrid),en=(0,D.J2)((0,L.UK)().snapToPixelGrid),ea=Y?en:er,ei=(0,D.J2)((0,L.UK)().showDotGrid),eo=(0,D.J2)((0,L.UK)().renderGrid),es=Y?eo:ei,el=Y?"renderGrid":"showDotGrid",ec=T,ed=!1,eu=!1;T?P.length>0?(ec=!1,ed=!1,eu=!0):(ec=!0,ed=!1,eu=!1):S&&!Q&&!W&&(ec=!1,ed=!0,eu=!1,(0,d.k)().dt_annotations_always_expand&&(ec=!0,ed=!1,eu=!1));let ep=[{type:"ZOOM_IN",shortcut:(0,F.c1)(E,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,R.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,F.c1)(E,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,R.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,F.c1)(E,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,F.c1)(E,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:g,recordingKey:"activeCanvasPixelPreview",hidden:!x&&!T&&!W,disabled:(0,R.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,F.c1)(E,"toggle-pixel-preview"),isChecked:!g,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:g&&!f,shortcut:f?void 0:(0,F.c1)(E,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:g&&f,shortcut:f?(0,F.c1)(E,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:$?"DOT_GRID":"PIXEL_GRID",shortcut:(0,F.c1)(E,Y?"toggle-grid":"toggle-show-dot-grid"),recordingKey:el,isChecked:es,disabled:!(0,R.Zr)("toggle-grid")},{type:$?"SNAP_TO_DOT_GRID":"SNAP_TO_PIXEL_GRID",shortcut:(0,F.c1)(E,Y||G?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:$?"snapToDotGrid":"snapToPixelGrid",isChecked:ea,disabled:!(0,R.Zr)(x||G||V||K||W?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:T},{type:"LAYOUT_GRIDS",shortcut:(0,F.c1)(E,"toggle-shown-layout-grids"),recordingKey:et,hidden:!Y||!b,isChecked:ee?J:Z,disabled:(0,R.Zr)(et)},{type:"RULERS",shortcut:(0,F.c1)(E,"toggle-rulers"),recordingKey:"renderRulers",hidden:!Y,isChecked:(0,D.J2)((0,L.UK)().renderRulers),disabled:(0,R.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!Y||!b,disabled:(0,R.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,F.c1)(E,"toggle-outlines"),isChecked:(0,D.J2)((0,N.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,D.J2)((0,N.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,D.J2)((0,N.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,F.c1)(E,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!(0,O.RF)(),disabled:(0,R.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:X,hidden:!p},{type:"separator"},{type:"COMMENTS",shortcut:(0,F.c1)(E,"toggle-show-comments"),recordingKey:"showComments",isChecked:(0,i.d4)(e=>!!e.mirror.appModel.showComments),disabled:(0,R.Zr)("showComments")},{type:"SHOW_ANNOTATIONS",shortcut:(0,F.c1)(E,"toggle-show-annotations"),recordingKey:"showAnnotationsInDevMode",isChecked:(0,O.oQ)(),disabled:!(0,R.Zr)("toggle-show-annotations"),hidden:!ec},{type:"ALWAYS_EXPAND_ANNOTATIONS",recordingKey:"alwaysExpandAnnotations",isChecked:(0,O.DH)(),disabled:!(0,R.Zr)("toggle-always-expand-annotations"),hidden:!ed},{type:"ANNOTATIONS_MENU",recordingKey:"annotationFilters",hidden:!eu,children:[{type:"SHOW_ANNOTATIONS",shortcut:(0,F.c1)(E,"toggle-show-annotations"),recordingKey:"showAnnotationsInDevMode",isChecked:(0,O.oQ)(),disabled:!(0,R.Zr)("toggle-show-annotations")},...P.length>0?[{type:"separator"},{type:"SHOW_ALL_ANNOTATION_CATEGORIES",icon:a.createElement(s.y,{className:z.n$}),isChecked:!M,recordingKey:"showAllAnnotationCategories"},...P.map(e=>{let r=(0,B.uA)(e);return{type:"SHOW_ANNOTATION_CATEGORY",displayText:r,displayTextClassName:z.Mg,icon:a.createElement("div",{className:z.UF,style:{backgroundColor:(0,B.FQ)(e)??void 0}}),isChecked:e.id===M,callback:()=>{l("filter_annotation_category",{categoryLabel:r,source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(e.id)},recordingKey:`showAnnotationCategory-${r}`}})]:[]]},{type:"PROTOTYPING",shortcut:(0,F.c1)(E,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!x||y,isChecked:q}],em=a.useCallback(e=>{c.glU.setCanvasZoomScale(e/100)},[]);return a.createElement(j,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o,allowCodegenOptions:Y,currentZoom:100*m,dropdownItems:ep,onSelectDropdownItem:(e,r,a)=>{switch(e){case"ZOOM_IN":C.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":C.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":C.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":c.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":c.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":c.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":w.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":w.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":w.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":w.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":w.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":w.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":w.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":C.Y5.triggerAction("toggle-show-property-labels",{source:"zoom-menu"});break;case"PROTOTYPING":w.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":w.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":w.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":w.VU.get("toggle-show-comments","toolbar")(r);break;case"SHOW_ANNOTATIONS":w.VU.get("toggle-show-annotations","toolbar")(r);break;case"ALWAYS_EXPAND_ANNOTATIONS":w.VU.get("toggle-always-expand-annotations","toolbar")(r);break;case"SHOW_ALL_ANNOTATION_CATEGORIES":l("filter_annotation_category",{categoryLabel:"all",source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(null);break;case"SHOW_ANNOTATION_CATEGORY":a?.();break;case"OUTLINES":C.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":C.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":C.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":g&&C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":g||C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),f&&C.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":g||C.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),f||C.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:em})}function j({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:o,currentZoom:s,dropdownItems:l,displayAboveTarget:c,onSelectDropdownItem:u,onSubmitCustomZoom:p}){let m=(0,i.wA)(),_=(0,A.GS)(),h=(0,i.d4)(e=>(0,U.$A)(e.selectedView)),y=(0,B.XR)(),v=a.useMemo(()=>({ZOOM_IN:(0,b.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,b.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,b.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,b.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,b.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,b.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,b.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,b.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,b.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,b.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,b.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,b.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,b.t)("fullscreen_actions.toggle-shown-layout-guides"),MULTIPLAYER_CURSORS:(0,b.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,b.t)("fullscreen_actions.toggle-show-property-labels"),RULERS:(0,b.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,b.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,b.t)("fullscreen_actions.toggle-show-comments"),SHOW_ANNOTATIONS:!((0,d.k)().dt_annotations_always_expand&&!h)&&y.length>0?(0,b.t)("fullscreen_actions.toggle-show-annotations-v2"):(0,b.t)("fullscreen_actions.toggle-show-annotations"),ALWAYS_EXPAND_ANNOTATIONS:(0,b.t)("fullscreen_actions.toggle-always-expand-annotations"),ANNOTATIONS_MENU:(0,b.t)("fullscreen_actions.annotations-menu"),SHOW_ALL_ANNOTATION_CATEGORIES:(0,b.t)("fullscreen_actions.show-all-annotation-categories"),SHOW_ANNOTATION_CATEGORY:"",OUTLINES:(0,b.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,b.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,b.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,b.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,b.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,b.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,b.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,b.t)("fullscreen_actions.single-properties-panel")}),[h,y.length]),I=a.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...a}=r,i={displayText:r.displayText??v[r.type]};switch(r.type){case"ZOOM_TO_50":i.isChecked=50===s;break;case"ZOOM_TO_100":i.isChecked=100===s;break;case"ZOOM_TO_200":i.isChecked=200===s}return n&&(i.children=n.map(e)),{...a,...i}};return l.map(e)},[s,l,v]),S=a.useCallback((e,r)=>{u(e.type,r,e.callback)},[u]);return a.createElement(V.j,{allowCodegenOptions:o,alwaysShowCheckMarkOffset:!0,dispatch:m,displayAboveTarget:c,items:I,onSelectItem:S,parentRect:e,recordingKey:f.Pt(n,"dropdown"),showPoint:!_},a.createElement("div",{style:{height:2}}),a.createElement("div",{className:z.zj,onKeyDown:e=>{(e.keyCode===g.Uz.ENTER||e.keyCode===g.Uz.ESCAPE)&&r&&m(T.oB())}},a.createElement(G.A,{className:z.hF,inputId:"zoom-input-menu",hiddenLabelText:(0,b.t)("fullscreen.zoom_menu.zoom_view_options"),placeholderValue:`${Math.round(s)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&p(r)},recordingKey:f.Pt(n,"dropdown","zoomInput")})),a.createElement(E.wv,null))}a.memo(function({recordingKey:e}){let r=a.useRef(null),n=100*(0,D.J2)((0,N.d)().activeCanvasCurrentZoom),i=(0,P.BK)(K),[s,c]=(0,a.useState)(null),d=(0,A.GS)(),{isPropertiesPanelCollapsed:u}=(0,S.iT)(),_=a.useCallback(()=>{c(r?.current?.getBoundingClientRect()||null)},[r]);a.useEffect(()=>(_(),m._.addListener(_),window.addEventListener("resize",_),()=>{m._.removeListener(_),window.removeEventListener("resize",_)}),[_]);let h=a.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(),i.toggle({hasOwnEscKeyHandler:!1})},[i,_]),g=i.showing&&s&&a.createElement(W,{targetRect:s,showingZoomDropdown:i.showing,toggleZoomMenu:i.toggle,recordingKey:e}),E=d?z.l4:z.Xf,v=d?i.showing?z.wg:u?z.Jk:z.Y7:i.showing?z.om:z.wR,T=d?i.showing?z.S0:z.i5:z.cm,I=a.createElement("div",{className:v,ref:d?r:void 0},a.createElement("div",{className:T,"data-testid":"zoom-amount"},function(){let e=Math.round(n);return d?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),a.createElement("div",{className:p()(z.FH,{[z.WB]:d&&i.showing}),ref:r},a.createElement(l.O,null)));return a.createElement("div",{className:z.sH},a.createElement(o.o,{eventListeners:["onClick"]},a.createElement(y.L,{"aria-controls":K,"aria-expanded":i.showing,"aria-haspopup":"menu",ariaLabel:(0,b.t)("fullscreen.zoom_menu.zoom_view_options.aria_label",{zoomPercentage:Math.round(n)}),className:E,"data-tooltip":(0,b.t)("fullscreen.zoom_menu.zoom_view_options"),"data-tooltip-type":M.Ib.TEXT,enabled:!0,isUI3:d,onClick:h,onboardingKey:x.q,recordingKey:f.Pt(e,"zoomButton"),selected:i.showing},I),g))})},850389:(e,r,n)=>{n(848318),n(63163),n(967688),n(15105),n(293529),n(546021),n(175393)},780508:(e,r,n)=>{n(848318),n(967688),n(957872),n(293529)},762826:(e,r,n)=>{n(848318),n(301168),n(186606),n(768618),n(63163),n(967688),n(293529),n(675172),n(546021)},875531:(e,r,n)=>{n(848318),n(301168),n(186606),n(768618),n(63163),n(967688),n(533737),n(15105),n(293529),n(675172),n(21614),n(546021),n(556049),n(850389)},329362:(e,r,n)=>{n(848318),n(301168),n(536384),n(615233),n(264478),n(967688),n(533737),n(863270),n(696786),n(506428),n(959750),n(686464),n(513806),n(601167),n(752181),n(554326),n(115958),n(286202),n(546021),n(67391);var a=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(a||{});let i=e=>"dark"===e?staticAssetWithUploadsPath("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):staticAssetWithUploadsPath("99d648a7ac711ba9d19976515105d6395eeb2d4c"),o=e=>"dark"===e?staticAssetWithUploadsPath("e27a5d39945685c389cd50e9f08144678edefeab"):staticAssetWithUploadsPath("2357b697bfe85711b1de702dc63611ef8bb75859"),s=e=>"dark"===e?staticAssetWithUploadsPath("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):staticAssetWithUploadsPath("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),l=e=>"dark"===e?staticAssetWithUploadsPath("045c7e1324e953b8ee9ec91ac4e944995662e11e"):staticAssetWithUploadsPath("c764bcd0a726bf2d31f70f16808785efeae4de56"),c=e=>"dark"===e?staticAssetWithUploadsPath("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):staticAssetWithUploadsPath("32f4843d9b24a4b95129bacd47f6b81fe439228f")},577612:(e,r,n)=>{n.d(r,{B:()=>a}),n(848318),n(301168),n(63163),n(967688),n(533737),n(696786),n(15105),n(293529),n(675172),n(546021),n(175393);let a="text-panel-container"},260387:(e,r,n)=>{n(848318),n(301168),n(382902),n(533737),n(34375),n(34542),n(709292),n(730143),n(125761),n(752181),n(526594),n(263336),n(136169),n(967688),n(565294),n(957872),n(67308),n(292024),n(355755),n(318147),n(434289),n(293529),n(850389),n(780508),n(762826),n(577612),n(186606),n(244534),n(702038),n(556049),n(546021),n(768618),n(21614),n(875531),n(329362),n(118287),n(63163),n(15105),n(175393),n(43258)},546021:(e,r,n)=>{n.d(r,{Qf:()=>o}),n(195124),n(303397),n(702038);var a=n(278244);n(601167);var i=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(i||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==a.e)throw e}return r}},72899:(e,r,n)=>{n.d(r,{$:()=>c,L:()=>d});var a=n(186606),i=n(708959),o=n(286536),s=n(720722),l=n(462835);function c(e){let r=a.CWU.detachPaintVariables((0,i.GP)(e));if(!r)return e;let n=(0,l.K)(r);return n?n.paint:e}function d(e){if(!e.colorVar?.value?.alias)return null;let r=o.dI(e.colorVar.value.alias),n=a.CWU.getLocalVariableInfo(r);if(n)return(0,s.kz)(n);let i=a.CWU.getSubscribedVariableInfo(r);return i?(0,s.ZI)(i):null}},620512:(e,r,n)=>{n.d(r,{Cr:()=>w,Gx:()=>T,V5:()=>N,_X:()=>I,hu:()=>C,nE:()=>A});var a=n(848318),i=n(301168),o=n(354427),s=n(186606),l=n(320953),c=n(454805),d=n(813147),u=n(238004),p=n(303397),m=n(788903),_=n(273555),h=n(52463),g=n(190561),f=n(419756),E=n(346288),y=n(33441),b=n(985789),v=n(224747);function T(e,r,n,o){let{setVariableValueOrOverrideForMode:h}=(0,m.mm)(),g=(0,i.wA)(),f=(0,i.d4)(e=>e.variablePickerShown),E=(0,a.useCallback)(a=>{a?g((0,d.Yi)({item:a,callback:a=>{h(e,r,n,(0,b.y$)(o,a),_.zk.YES,"alias-variable")}})):l.l7.user("unalias-variable",()=>s.CWU.detachVariableValueForMode(r,n,null))&&p.Y5.triggerAction("commit")},[g,o,h,e,r,n]);return[f.isShown&&"variable-picker-alias"===f.type&&f.variableID===r&&f.modeID===n,(0,a.useCallback)((e,a)=>{let i=e.getBoundingClientRect();g((0,u.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new c.Mi(i.left,i.bottom),initialView:a?.initialView,variableID:r,modeID:n,resolvedType:o,onVariableSelected:E}))},[r,n,o,g,E]),E]}function I({children:e,...r}){return a.createElement(S,{...r,children:e})}function S({fields:e,children:r,resolvedType:n,requestedTypes:s,editingStyleGuid:l,responsiveTextStyleVariantIndex:c,initialPickerPosition:p,onVariableSelected:_,onExpressionSubmitted:g,onComponentPropSelected:v}){let{consumedVariable:T}=(0,b.u3)(e,l,c),I=(0,E.MH)(T),S=(0,m.u)(I??void 0),A=!!S&&(0,E.eF)(S),w=(0,b.Ek)(e),[C,N,L,O,R]=function(e,r,n,s,l,c,p,m){let{mapVariableIdToTypedValue:_}=s??{},g=(0,i.wA)(),f=(0,i.d4)(e=>e.variablePickerShown),{updateVariableConsumption:E,clearVariableConsumption:v}=(0,b.u3)(e),T=(0,a.useCallback)((e,a)=>{n?n(e):e?g((0,d.Yi)({item:e,callback:n=>{_?E(_({variable:e,variableId:n}),a):E((0,b.y$)(r,n),a)}})):v()},[n,g,E,r,v,_]);return[f.isShown&&"variable-picker-fields"===f.type&&(0,o.c2)(f.fields,e)&&f.responsiveTextStyleVariantIndex===m&&s?.metadata===f.metadata,(0,a.useCallback)((n,a)=>{let i=a?.initialPosition??p?.()??(0,h.VZ)(n,y.d9,!1);g((0,u.C)({type:"variable-picker-fields",isShown:!0,initialPosition:i,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:a?.currentFieldValue,onVariableSelected:T,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:void 0,onComponentPropSelected:c,responsiveTextStyleVariantIndex:m}))},[p,g,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,T,c,m]),T,void 0,c]}(e,n,_,{requestedTypes:s},0,v,p,c),P=(0,a.useMemo)(()=>({showBindingUI:N,isShowingBindingUI:C,onVariableSelected:L,boundVariableId:I,isBoundVariableDeleted:A,onExpressionSubmitted:O,onComponentPropSelected:R,mismatchedValue:w}),[N,C,L,I,A,O,w,R]);return a.createElement(f.p.Provider,{value:P},r)}function A({variableSetId:e,variableID:r,modeID:n,children:i,resolvedType:o}){let[s,l,c]=T(e,r,n,o),d=(0,m.bL)(r,n),u=(0,E.MH)(d??null),p=(0,m.u)(u??void 0),_=!!p&&(0,E.eF)(p),h=(0,a.useMemo)(()=>({showBindingUI:l,isShowingBindingUI:s,onVariableSelected:c,boundVariableId:u,isBoundVariableDeleted:_}),[l,s,c,u,_]);return a.createElement(f.p.Provider,{value:h},i)}function w({children:e,pickerType:r="create-modal",resolvedType:n,variableValue:i,onVariableValueChange:o,onVariableSelected:l}){let d=a.useRef(),[u,p]=a.useState(!1),_=(0,a.useCallback)(()=>{p(!1)},[]),h=(0,a.useCallback)(e=>{let r=e.getBoundingClientRect();d.current=new c.Mi(r.left,r.bottom),p(!0)},[]),y=i.type===s.Z_n.ALIAS?i.value:void 0,b=(0,m.u)(y),T=!!b&&(0,E.eF)(b),I=(0,a.useMemo)(()=>({showBindingUI:h,isShowingBindingUI:u,boundVariableId:y??null,isBoundVariableDeleted:T}),[h,u,y,T]),S=(0,m.BQ)(y);return a.createElement(f.p.Provider,{value:I},e,u?i.resolvedType!==s.rXF.COLOR?a.createElement(v.Ti,{resolvedType:n,onVariableSelected:l,onClose:_,initialPosition:d.current,pickerType:r}):i.type===s.Z_n.COLOR?a.createElement(g.h,{disabledVariableIds:new Set,color:i.value,boundVariable:null,initialPosition:d.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...e,a:1}}),onVariableChange:l,onClose:_}):i.type===s.Z_n.ALIAS?a.createElement(g.h,{disabledVariableIds:new Set,color:S.value,boundVariable:b,initialPosition:d.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...e,a:1}}),onVariableChange:l,onClose:_}):void 0:null)}function C({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:d}){let p=(0,m.u)(e??void 0),_=!!p&&(0,E.eF)(p),[h,g,y]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let d=(0,a.useId)(),p=(0,i.wA)(),m=(0,i.d4)(e=>e.variablePickerShown);return[m.isShown&&"variable-picker-controlled"===m.type&&m.key===d,(0,a.useCallback)((a,i)=>{let m=a.getBoundingClientRect();p((0,u.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:i?.initialPosition??o?.()??new c.Mi(m.left,m.bottom),initialView:i?.initialView,variableID:n,key:d,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[p,n,d,e,r,o,s,l]),d]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return a.createElement(f.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:_,isShowingBindingUI:h,showBindingUI:g,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:y}},d)}function N({variableScope:e,onPickerClose:r}){let n=(0,i.wA)(),o=(0,a.useCallback)(()=>{r?.(),n((0,u.B)())},[n,r]),s=a.useContext(f.p)?.isShowingBindingUI,l=a.useContext(f.p)?.variableBindingContextKey,c=(0,i.d4)(e=>e.variablePickerShown);return s&&c.isShown&&"variable-picker-controlled"===c.type&&c.key===l?a.createElement(v.ND,{...c,onClose:o,variableScopes:e?new Set([e]):void 0}):null}},2910:(e,r,n)=>{n.d(r,{IQ:()=>s,Kq:()=>l});var a=n(186606);n(489082),n(788903);var i=n(42725),o=n(346288);function s(e,r,n,i){return i&&r?{type:a.Z_n.ALIAS,resolvedType:e,value:i}:n?{type:(0,o.e4)(e),resolvedType:e,value:n}:void 0}function l(e,r,n){return e&&r&&!!(0,i.fx)(n)}n(985789)},985789:(e,r,n)=>{n.d(r,{Ek:()=>Z,JG:()=>F,Px:()=>G,QT:()=>X,R1:()=>M,_B:()=>$,e4:()=>W,kN:()=>U,oU:()=>j,pc:()=>K,u3:()=>z,uA:()=>q,y$:()=>D,yK:()=>V});var a=n(848318),i=n(301168),o=n(354427),s=n(402923),l=n(186606);n(673786),n(320953);var c=n(553547),d=n(286536),u=n(19180),p=n(382902),m=n(349048),_=n(239910),h=n.n(_);n(523035),n(476254);var g=n(813009);n(967688),n(952039);var f=n(43322),E=n(324762),y=n(764539);n(361964),n(31898),n(353231);var b=n(489082),v=n(95664),T=n(963307),I=n(788903);n(614092),n(84849),n(700436);var S=n(720722),A=n(273555),w=n(698429),C=n(515092);n(882839),n(432843);var N=n(460374),L=n(50652),O=n(439796),R=n(709393),P=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(P||{});function D(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function k(e){let r=e[0];if(!r)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.c2)(e[r],e[0]))return b.oV}return r.isMixed?b.oV:r}function M(){let e=(0,g.R)(e=>{let r=e.mirror.selectionProperties.variableConsumptionInfo;return b.E7(r)?.variableConsumptionMap||{}}),r=(0,T.A5)("variableConsumptionInfo");return{variableConsumptionMap:e,setVariableConsumptionMap:(0,a.useCallback)((e,n=A.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function F(){return(0,b.E7)((0,v.b)("variableConsumptionMap"))||{}}function x(e){return(0,T.kl)(1===e?"focusNodeVariableConsumptionInfo":"variableConsumptionInfo")}function U(e=0){let r=x(e),n=(0,m.k9)(()=>b.E7(r)?.variableSetKeyToModeData||{},[r]),a=function(e=0){let r=x(e);return(0,m.k9)(()=>b.E7(r)?.variableSetKeyToPageLevelPresetMode||{},[r])}(e),i=function(){let e=(0,I.jI)();return(0,m.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return h()(r,e=>e.key)}return{}},[e])}();return(0,m.wm)(()=>{for(let[e,r]of Object.entries(a))if(!n[e]&&i[e]){let a=i[e];if(!a?.modes?.find(e=>e.id===r))continue;n[e]={collectionID:a.node_id,collectionName:a.name,modeOptions:a.modes?.map(e=>({modeId:{guid:e.id,collectionKey:a.key,extendedCollectionId:null},name:e.name,sortPosition:e.sortPosition,isCompatible:!0,collectionName:a.name}))??[],explicitMode:{guid:r,collectionKey:a.key,extendedCollectionId:null},inheritMode:null,libraryKey:a.library_key}}return n},[i,a,n])}let B=(0,u.k)().ds_modes_util_include_subtree_by_default;function G({includeSubtree:e=B}={}){let r=(0,T.kl)("variableConsumptionInfo");return(0,m.k9)(()=>(e?b.E7(r)?.variableSetKeyToModeIncludingSubtree:b.E7(r)?.variableSetKeyToMode)??{},[r,e])}function V(e){let r=function(e){let r=(0,I.u)(e),n=U(0),a=(0,I.G6)(r?.variableSetId);if(!r||!a)return null;let i="LOCAL"===a.subscriptionStatus?a.keyForPublish:a.key;return n?.[i]??null}(e),n=(0,I.G6)(r?.collectionID);if(!r||!n)return null;let a=r.modeOptions,i=r.explicitMode,o=r.inheritMode,s=i??o;return"MIXED"===s?null:a.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}var H=(e=>(e[e.SELECTION=0]="SELECTION",e[e.FOCUS_NODE=1]="FOCUS_NODE",e))(H||{});function z(e,r,n){let i;let{variableConsumptionMap:o,setVariableConsumptionMap:s}=M(),u=(0,v.b)("guid"),p=F(),m=(0,v.b)("responsiveTextStyleVariants"),_=m&&!(0,b.gl)(m)&&void 0!==n?m[n]:void 0,h=r&&(0,b.hS)(u)&&c.aI(r,u);return{consumedVariable:(i=h&&_?(0,b.E7)(_.variableConsumptionMap)||{}:h?p:o)&&k(e.map(e=>i[e])),updateVariableConsumption:(0,a.useCallback)((r,n)=>{let a={},o={modeContext:n?.modeContext,attachmentSurfaceKey:n?.entryPoint??"",currentColor:n?.currentColor,currentFloat:n?.currentFloat,queryId:n?.queryId,sessionId:n?.sessionId,property:n?.property};e.forEach(e=>{let n=i[e];if(n&&!n?.isMixed&&n.type===l.Z_n.ALIAS){let e=d.sH(n.value);o.previousVariableKey=e?.assetRef?.key}a[e]=r,(0,R.oz)(e,r,o)}),(0,C.f)(l.VD3.VARIABLE_ATTACH,l.e0R.DIRECT,()=>{s(a)})},[s,e,i]),clearVariableConsumption:(0,a.useCallback)((r=A.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,C.f)(l.VD3.VARIABLE_DETACH,l.e0R.DIRECT,()=>{s(n,r)})},[s,e])}}function K(e,r,n,a){return j(e,function(e,r){if(!(void 0===e||0===e&&!r||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r,!0),n,a)}function W(e,r,n,a){return j(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n,a)}function j(e,r,n,a){let i=(0,E.uQ)(),o=(0,y.Q)(),s=(0,w.ks)(),c=(0,f.v4)(),{variableConsumptionMap:d}=M(),u=n||d,p=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(u&&k([e].map(e=>u[e]))||null),m=L.ZM[e]??l.j0r.ALL_SCOPES,_=!p&&s&&i&&r&&!a?l.w3z.getIdsOfVariablesWithValue(i,[m],{type:r.type,value:r.value}):[],h=(0,I.u)(p);if(!h)return _.length>0&&r?{matchingVars:{ids:_,rawValue:r}}:{};let g=(0,f.xv)(h,c.id),v=s&&"code"===o.inspectionMode&&g?g:h?.name;return{variable:h,variableDisplayName:v}}function Y(e,r,n){if(!e)return{};let{colorVar:a,color:i,opacity:o}=r;if(a?.value?.alias)return{boundVar:d.dI(a.value.alias)};if(!i||!n)return{};let s=(0,I.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...i,a:i.a*(o??1)}});return s?{matchingVars:{ids:s,rawValue:{type:l.Z_n.COLOR,value:{...i,a:i.a*(o??1)}}}}:{}}function $(e,r){let n=(0,E.uQ)(),a=(0,y.Q)(),i=(0,f.v4)(),o=(0,w.ks)(),{boundVar:s,matchingVars:l}=Y(n,e,r);return J((0,I.u)(s),{variableId:s,matchingVars:l},i.id,o,a.inspectionMode)}function q(e,r,n,a,i){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:a,matchingVars:i}=Y(r,e.paint,n);return{variableId:a,matchingVars:i}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let a=p.zl.get((0,O.Ev)(n.variableId));if(a)return{variable:a,variableData:n};let i=l.CWU.getSubscribedVariableInfo(n.variableId);return i?{variable:(0,S.ZI)(i),variableData:n}:{variable:null,variableData:n}}(e,r),s=J(o.variable,o.variableData,n,a,i);return{...e,variable:s}}function X(e,r,n,a,i){return e.map(e=>e.type===N.q.STYLE?function(e,r,n,a,i){let o=e.paints.map(e=>q(e,r,n,a,i));return{...e,paints:o}}(e,r,a.id,i,n):q(e,r,a.id,i,n))}function J(e,r,n,a,i){let o=(0,f.xv)(e,n),s=a&&"code"===i&&o?o:e?.name;return{variable:e,variableDisplayName:s,matchingVars:a?r.matchingVars:void 0}}function Z(e){return(0,i.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},a=e.map(e=>{let r=n[e]??void 0;return(0,s.UU)(r)&&"isMixed"in r?b.oV:r});return 0===a.length?void 0:1===a.length?a[0]:a.every(e=>(0,o.c2)(e,a[0]))?a[0]:b.oV})}},122537:(e,r,n)=>{n.r(r),n.d(r,{CreateVariableForm:()=>J,CreateVariableFormInput:()=>Z,VariableCreateModalRoot_UNSAFE:()=>K,VariableFormRow:()=>$,useDetachedVariableValue:()=>Y,useHandleVariableSelected:()=>X,useHideContextMenu:()=>q,useVariableCreateModalActions:()=>W});var a=n(848318),i=n(301168),o=n(660376),s=n(871043),l=n(622518),c=n(93275),d=n(531788),u=n(658029),p=n(981637),m=n(186606),_=n(320953),h=n(705237),g=n(7376),f=n(239910),E=n.n(f),y=n(410441),b=n(63163),v=n(781239),T=n(810503),I=n(439382),S=n(401970),A=n(967688),w=n(925085),C=n(813147),N=n(788903),L=n(511067),O=n(720722),R=n(17753),P=n(614892),D=n(120846),k=n(709393),M=n(159354),F=n(620512),x=n(985789),U=n(64525),B=n(980061),G=n(27776),V=n(306456),H=n(435789);let z=2*(0,y.jz)(G.dGl);function K({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariable:o,onClose:s}){(0,k.NF)({resolvedType:i});let{onCreateVariableSubmit:l}=W({onCreateVariable:o,onClose:s});return a.createElement(j,{initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,onCreateVariableSubmit:l,onClose:s,recordingKey:"createVariableModal"})}function W({onCreateVariable:e,onClose:r}){return{onCreateVariableSubmit:function({varSetID:n,varName:a,varValue:i}){if(!m.CWU.isValidVariableName(a,n)){(0,T.x1)("variables","Attempted to submit variable name that is invalid",{varName:a,_varSetID:n});return}_.l7.user("create-variable",()=>{let r=n??m.CWU.createVariableSet((0,A.t)("variables.variable_collection"),m.G6k.AUTOMATIC_FIRST_COLLECTION),s=m.CWU.createVariable(a,r,i,m.HS4.VARIABLE_PICKER),l=m.CWU.getLocalVariableInfo(s);(0,o.B1)(l,`variable with id ${s} not found`),e((0,O.kz)(l))}),r()}}}function j({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:i,recordingKey:o,onCreateVariableSubmit:s,onClose:d}){return a.createElement(l.bL,{onClose:d,defaultPosition:e,width:n,recordingKey:o},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,(0,A.tx)("variables.create_modal.title"))),a.createElement(c.nB,{padding:0},a.createElement(J,{resolvedType:i,initialValue:r,recordingKey:v.Pt(o,"createVariableForm"),onSubmit:s}))))}function Y(e){let r=(0,N.BQ)(e.type===m.Z_n.ALIAS?e.value:void 0);return(0,s.Vq)(r)&&"MIXED"!==r?r:null}function $({label:e,labelFor:r,labelId:n,input:i}){return a.createElement(w.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:z}},a.createElement(P.JU,{htmlFor:r,id:n},e),i)}function q(e){(0,a.useEffect)(()=>{let r=e.current;if(!r)return;let n=e=>e.preventDefault();return r.addEventListener("contextmenu",n),()=>{r.removeEventListener("contextmenu",n)}},[e])}function X(e,r,n){let o=(0,i.wA)();return(0,a.useCallback)(async a=>{if(a){let e=await o((0,C.Oe)(a));n((0,x.y$)(r,e))}else e.type===m.Z_n.ALIAS&&n((0,h.WI)(r))},[o,e,r,n])}function J({resolvedType:e,initialValue:r,recordingKey:n,onSubmit:i}){let o=(0,a.useRef)(null);q(o);let[s,l]=(0,a.useState)({varName:"",varValue:r??(0,h.WI)(e),varSetID:null}),c=a.useMemo(()=>m.CWU.isValidVariableName(s.varName??"",s.varSetID??null),[s]),u=v.of(n,"submit",()=>{c&&i({varName:s.varName,varValue:s.varValue,varSetID:s.varSetID??null})});return a.createElement("form",{onSubmit:u,autoComplete:"no"},a.createElement(w.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:o},a.createElement(w.Y,{direction:"vertical",spacing:`${(0,y.jz)(G.dGl)}px`,padding:{top:z},height:"hug-contents"},a.createElement(Z,{recordingKey:n??"",initialVarValue:r,resolvedType:e,setVariableFormSubmitData:l,variableFormSubmitData:s}))),a.createElement(w.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},a.createElement(d.$n,{type:"submit",disabled:!c,recordingKey:v.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,A.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":c?void 0:R.Ib.TEXT}},(0,A.tx)("variables.create_modal.create_button"))))}function Z({recordingKey:e,initialVarValue:r,resolvedType:n,setVariableFormSubmitData:i,variableFormSubmitData:o}){let s=(0,N.yp)(),l=a.useId();n===m.rXF.TEXT_DATA&&(n=m.rXF.STRING);let[c,d]=(0,g.Vc)("last-used-variable-set-bottoms-up",s.length>0?s[0].node_id:null),_=(0,a.useMemo)(()=>{let e=s.find(e=>e.node_id===c);return!e&&s.length>0?s[0]:e},[s,c]),f=(0,N.rW)(_?.node_id??null),E=(0,a.useRef)(null);function y(e,r,n){i({varName:e,varValue:r,varSetID:n})}function T(e){y(o.varName,e,o.varSetID)}(0,b.h)(()=>{E.current?.select(),y((0,U.Wc)(f,n),r??(0,h.WI)(n),_?.node_id??null)});let w=Y(o.varValue),C=X(o.varValue,n,T);return a.createElement(a.Fragment,null,s.length>0&&!!_&&a.createElement($,{label:(0,A.tx)("variables.create_modal.collection_label"),labelId:l,input:a.createElement("div",{className:V.hF},a.createElement(Q,{ariaLabelledBy:l,selectedVariableSetID:_.node_id,variableSets:s,onChange:e=>{d(e),y(o.varName,o.varValue,e)}}))}),a.createElement($,{label:(0,A.tx)("variables.create_modal.name_label"),input:a.createElement(I.L,{className:V._Z,name:"variableName",value:o.varName,onChange:e=>{y(e.target.value,o.varValue,o.varSetID)},ref:E,recordingKey:v.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),a.createElement($,{label:(0,A.tx)("variables.create_modal.value_label"),input:a.createElement("div",{className:V.hF},a.createElement(F.Cr,{resolvedType:n,variableValue:o.varValue,onVariableValueChange:e=>T(e),onVariableSelected:C},a.createElement(B.gJ,{variableValue:o.varValue,contextType:M.$.FORM,onChange:e=>T(e),recordingKey:v.Pt(e,"variableValueInput")}),w&&a.createElement(u.K,{type:"button","aria-label":(0,A.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>T(w),recordingKey:v.Pt(e,"detachVariableButton"),htmlAttributes:{"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,A.t)("variables.authoring_modal.table.detach_alias")}},a.createElement(S.U,{svg:H.A},a.createElement(p.U,null)))))}))}function Q({selectedVariableSetID:e,variableSets:r,onChange:n,ariaLabelledBy:o}){let s=(0,i.wA)(),l=(0,L.Um)(),c=(0,a.useMemo)(()=>E()(r,e=>e.node_id),[r]);return a.createElement(D.l6,{ariaLabelledBy:o,id:"variable-create-modal-variable-set-select",property:c[e],formatter:{format:e=>e?.name??""},dispatch:s,chevronClassName:V.mL,inputClassName:V.NI,dropdownShown:l,onChange:e=>n(e.node_id)},r.map(function(e){return a.createElement(D.c$,{key:e.node_id,value:e})}))}},346288:(e,r,n)=>{n.d(r,{Hr:()=>y,Io:()=>g,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>p,WB:()=>E,e4:()=>_,eF:()=>h,rY:()=>m});var a=n(660376),i=n(354427),o=n(186606),s=n(286536),l=n(206639),c=n(967688),d=n(632727),u=n(489082);function p(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:if(e.type===o.Z_n.DATE)return null;return e.value;case o.rXF.IMAGE:case o.rXF.JS_RUNTIME_ALIAS:return null;default:return JSON.stringify(e.value)}}function m(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,a.B1)(e.value.colorValue),(0,a.B1)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,i.c2)(e,r)}}function _(e){switch(e){case o.rXF.BOOLEAN:return o.Z_n.BOOLEAN;case o.rXF.FLOAT:return o.Z_n.FLOAT;case o.rXF.STRING:return o.Z_n.STRING;case o.rXF.COLOR:return o.Z_n.COLOR;case o.rXF.MAP:return o.Z_n.MAP;case o.rXF.SYMBOL_ID:return o.Z_n.SYMBOL_ID}}function h(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let g={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],OVERRIDDEN_SYMBOL_ID:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT],HYPERLINK:[o.rXF.LINK],CMS_SERIALIZED_RICH_TEXT_DATA:[o.rXF.JS_RUNTIME_ALIAS],SLOT_CONTENT_ID:[o.rXF.SLOT_CONTENT_ID],GRID_ROW_GAP:[o.rXF.FLOAT],GRID_COLUMN_GAP:[o.rXF.FLOAT]};function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}function E(e){switch(e){case o.rXF.BOOLEAN:return o.J0O.BOOL;case o.rXF.FLOAT:return o.J0O.NUMBER;case o.rXF.STRING:case o.rXF.TEXT_DATA:return o.J0O.TEXT;default:throw Error(`Unknown resolved type: ${e}`)}}function y(e){switch(e){case o.rXF.BOOLEAN:return"boolean";case o.rXF.FLOAT:return"number";case o.rXF.STRING:return"string";case o.rXF.COLOR:return"color";case o.rXF.MAP:return"map";case o.rXF.SYMBOL_ID:return"symbol_id";case o.rXF.FONT_STYLE:return"font_style";case o.rXF.TEXT_DATA:return"text_data";case o.rXF.IMAGE:return"image";case o.rXF.LINK:return"link";case o.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case o.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}},906419:(e,r,n)=>{n.d(r,{HZ:()=>en,Rm:()=>ef});var a=n(848318),i=n(301168),o=n(660376),s=n(938982),l=n(353317),c=n(773511),d=n(422482),u=n(88706),p=n(750046),m=n(186606),_=n(869143),h=n(19180),g=n(382902),f=n(536384),E=n.n(f),y=n(979309),b=n(781239),v=n(998568),T=n(561258),I=n(720522),S=n(334804),A=n(453648),w=n(297638),C=n(302941),N=n(967688),L=n(640483),O=n(706846),R=n(67188),P=n(431054),D=n(389541),k=n(992288),M=n(900980),F=n(180294),x=n(555958),U=n(474132),B=n(671346),G=n(17753),V=n(693964),H=n(434328),z=n(578386),K=n(888663),W=n(130768),j=n(346288),Y=n(368112),$=n(190878),q=n(375347),X=n(674349),J=n(27376),Z=n(323010),Q=n(821561),ee=n(230645),et=n(844984);function er(e,r){(0,a.useLayoutEffect)(()=>{e&&(r?e.fauxFocus():e.fauxBlur())},[e,r])}let en=a.forwardRef(function({listItems:e,selectedItemID:r,disabledVariableIds:n,highlightedItemID:i,pickerType:o,className:s,recordingKey:l,onItemHighlight:c,onItemSelect:d,onItemContextMenu:u,onItemMouseLeave:p},m){let h=a.useRef(null),g=(0,_.Te)({count:e.length,getScrollElement:()=>h.current,estimateSize:r=>(0,Y.jx)(e[r],"list"),getItemKey:r=>(0,Y.vu)(e[r],r),overscan:10});return(0,a.useImperativeHandle)(m,()=>({scrollToTop:()=>g.scrollToOffset(0),scrollToIndex:(e,r)=>g.scrollToIndex(e,r),getVirtualItems:()=>g.getVirtualItems()})),a.createElement("div",{ref:h,style:{height:(0,Y.w4)({layout:"list",listHeightPx:g.getTotalSize()}),overflow:"auto"},className:s},a.createElement("div",{style:{height:`${g.getTotalSize()}px`,position:"relative"}},g.getVirtualItems().map(s=>a.createElement("div",{className:Z.ws,key:s.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${s.size}px`,transform:`translateY(${s.start}px)`}},a.createElement(ea,{disabledVariableIds:n,highlightedItemID:i,index:s.index,listItem:e[s.index],onItemContextMenu:u,onItemHighlight:c,onItemMouseLeave:p,onItemSelect:d,pickerType:o,recordingKey:l,selectedItemID:r})))))});function ea({listItem:e,index:r,selectedItemID:n,disabledVariableIds:i,highlightedItemID:s,pickerType:l,recordingKey:c,onItemHighlight:d,onItemSelect:u,onItemContextMenu:p,onItemMouseLeave:m}){let _=(0,a.useMemo)(()=>[1,r],[r]),h=(0,L.to)();switch(e.type){case Y.Yc.ASSET_TYPE:return a.createElement(es,{assetType:e.name,tooltip:e.tooltip});case Y.Yc.SECTION_HEADER:return a.createElement(el,{groupName:e.name,fileName:e.fileName,secondaryText:e.secondaryText});case Y.Yc.HIERARCHY_PATH:return a.createElement(ed,{groupName:e.name});case Y.Yc.FILE_NAME:return a.createElement(ec,{fileNameItem:e,onItemHighlight:d,onItemSelect:u,isHighlighted:!!e.libraryKey&&(0,Y.tx)(e)===s});case Y.Yc.SEPARATOR:return a.createElement("div",{className:Z.me});case Y.Yc.VARIABLES:{let r=e.items[0],o=(0,Y.tx)(r);return a.createElement(eu,{disabledVariableIds:i,isHighlighted:o===s,isSelected:o===n,keyboardNavigationPath:_,onItemHighlight:d,onItemMouseLeave:m,onItemSelect:u,pickerType:l,recordingKey:o?b.Pt(c,o):void 0,variable:r,variableSet:e.variableSet})}case Y.Yc.STYLES:{let r=e.items[0],i=(0,Y.tx)(r);return a.createElement(W.m3,{dsStyle:r,additionalClassName:w.s.flex.wFull.$},a.createElement(em,{dsStyle:r,hideContextMenu:h,isHighlighted:i===s,isSelected:i===n,keyboardNavigationPath:_,onItemContextMenu:p,onItemHighlight:d,onItemMouseLeave:m,onItemSelect:u,recordingKey:i?b.Pt(c,i):void 0}))}case Y.Yc.EXPRESSION:return a.createElement(e_,{expression:e.expressionItem,isHighlighted:e.expressionItem.name===s,keyboardNavigationPath:_,recordingKey:b.Pt(c,e.expressionItem.name),onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m});case Y.Yc.COMPONENT_PROPS:{let r=e.items[0],n=(0,Y.lC)(r);return a.createElement(eh,{componentPropItem:r,isHighlighted:n===s,keyboardNavigationPath:_,recordingKey:b.Pt(c,n),onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m})}case Y.Yc.CMS_FIELDS:{let r=e.item,n=r.value.id,i=r.value.name;return a.createElement(eg,{cmsFieldItem:r,isDisabled:e.disabled,tooltip:e.tooltip,isHighlighted:n===s,recordingKey:b.Pt(c,i),keyboardNavigationPath:_,onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m})}default:(0,o.xb)(e)}}var ei=(e=>(e[e.NONE=0]="NONE",e[e.HIGHLIGHTED=1]="HIGHLIGHTED",e))(ei||{});let eo=(0,a.forwardRef)(function({isLinterItem:e,isSelected:r,highlightStyle:n,isDisabled:i,itemName:o,value:s,tooltip:l,recordingKey:c,onMouseDown:d,onMouseMove:u,onMouseLeave:p,onContextMenu:m},_){return a.createElement(C.S.recordableDiv,{forwardedRef:_,onMouseMove:u,onMouseDown:d,onMouseLeave:p,onContextMenu:m,recordingKey:c,className:E()(Z.f0,{[Z.uz]:r,[Z.Ke]:1===n,[Z.wR]:!!e}),"data-tooltip-type":l?G.Ib.TEXT:void 0,"data-tooltip":l},a.createElement("div",{className:E()(Z.gV,{[Z.r9]:i})},o),s&&a.createElement("div",{className:Z.Oy},s))});function es({assetType:e,tooltip:r,recordingKey:n}){return a.createElement(eo,{itemName:a.createElement("div",{className:Z.Rn},a.createElement("span",{className:Z.ox},e),a.createElement(I.B,{className:Z.vm,svg:ee.A,"data-tooltip-type":G.Ib.TEXT,"data-tooltip":r})),isSelected:!1,highlightStyle:0,recordingKey:n,isDisabled:!1})}function el({groupName:e,fileName:r,secondaryText:n,recordingKey:i}){return a.createElement(eo,{itemName:a.createElement("div",{className:Z.bV},!!r&&a.createElement("div",{className:Z.IZ},r),!!r&&a.createElement("div",{className:Z.W},"/"),a.createElement("div",{className:Z.Gz},e),!!n&&a.createElement("div",{className:Z.e9},n)),isSelected:!1,highlightStyle:0,recordingKey:i,isDisabled:!1})}function ec({fileNameItem:e,onItemSelect:r,onItemHighlight:n,isHighlighted:i}){let{name:o,libraryKey:s,collapsed:l}=e,c=(0,F.sZ)(),p=(0,U.Oe)(c),m=(0,D.fV)(s),_=(0,g.md)(V.V9),f=s?_[s]?.hubFileId??null:null,E=(0,a.useCallback)(()=>{n(e)},[n,e]),y=(0,a.useCallback)(()=>{r(e)},[r,e]),b=(0,a.useCallback)(()=>{i||E()},[E,i]);return(0,h.k)().dse_collapse_variable_and_style_libraries?a.createElement(eo,{itemName:a.createElement("span",{className:Z.Md},i&&a.createElement("span",{className:Z.Yp},l?a.createElement(d.R,null):a.createElement(u.r,null)),a.createElement("span",{className:Z.$u},o),p&&m&&a.createElement("div",{className:w.s.flex.alignCenter.justifyCenter.ml4.$},a.createElement(k.KP,{libraryKey:s})),f&&a.createElement("div",{className:w.s.flex.alignCenter.justifyCenter.ml4.$},a.createElement(M.E,{libraryKey:s}))),isSelected:!1,onMouseDown:y,onMouseMove:b,highlightStyle:i?1:0,isDisabled:!1}):a.createElement(eo,{itemName:a.createElement("span",{className:Z.Md},a.createElement("span",{className:Z.$u},o),p&&m&&a.createElement("div",{className:w.s.flex.alignCenter.justifyCenter.ml4.$},a.createElement(k.KP,{libraryKey:s})),f&&a.createElement("div",{className:w.s.flex.alignCenter.justifyCenter.ml4.$},a.createElement(M.E,{libraryKey:s}))),isSelected:!1,highlightStyle:0,isDisabled:!1})}function ed({groupName:e,recordingKey:r}){let n=a.createElement(S.G,{text:e,showTooltip:A.i.WHEN_TRUNCATED});return a.createElement(eo,{itemName:n,isSelected:!1,highlightStyle:0,isDisabled:!1,recordingKey:r})}function eu({isLinterItem:e,variable:r,variableSet:n,isSelected:i,disabledVariableIds:o,isHighlighted:s,recordingKey:l,pickerType:c,keyboardNavigationPath:d,onItemHighlight:u,onItemSelect:p,onItemMouseLeave:m,valuePreview:_=null}){let{thumbnailValue:h}=(0,$.A)({variable:r,variableCollection:n}),g=(0,x.kH)(r.name),f=(0,a.useCallback)(()=>{u(r)},[u,r]),{setKeyboardNavigationElement:E,keyboardNavigationItem:y}=(0,T.M3)({path:d,id:(0,Y.tx)(r),onFauxFocus:f});er(y,s);let b=(0,a.useCallback)(()=>{s||f()},[s,f]),v=(0,a.useCallback)(()=>{p(r)},[p,r]),I=(0,a.useCallback)(()=>{m(r)},[m,r]),S=o.has(r.node_id);return a.createElement(eo,{ref:E,highlightStyle:s?1:0,isDisabled:S,isLinterItem:e,isSelected:i,itemName:a.createElement("div",{className:Z.JN},a.createElement(J.LO,{value:h,onColorChitMouseDown:v,resolvedTypeFallback:r.resolvedType,disabled:S}),a.createElement("div",{className:Z.Nk,"data-testid":"variable-list-item-name","data-test-variable-source":r.subscriptionStatus},g)),onMouseDown:v,onMouseLeave:I,onMouseMove:b,recordingKey:l,value:a.createElement(ep,{pickerType:c,resolvedType:r.resolvedType,variableThumbnail:h,valuePreview:_})})}function ep({pickerType:e,resolvedType:r,valuePreview:n=null,variableThumbnail:i}){return n||("fields"===e&&r!==m.rXF.COLOR?a.createElement(a.Fragment,null,(0,j.Oi)(i)):null)}function em({dsStyle:e,hideContextMenu:r=!1,isLinterItem:n,isSelected:o,isHighlighted:s,recordingKey:c,keyboardNavigationPath:d,onItemHighlight:u,onItemSelect:p,onItemContextMenu:m,onItemMouseLeave:_}){let h=(0,x.kH)(e.name),{showStyleDetails:g,hideStyleDetails:f}=(0,X.XM)(),E=(0,a.useCallback)(()=>{u(e)},[u,e]),{setKeyboardNavigationElement:v,keyboardNavigationItem:S}=(0,T.M3)({path:d,id:(0,Y.tx)(e)??void 0,onFauxFocus:E});er(S,s);let A=(0,a.useCallback)(()=>{s||E()},[E,s]),w=(0,a.useCallback)(r=>{(0,P.i)(r)||(p(e),f())},[p,e,f]),C=(0,a.useCallback)(()=>{_(e)},[_,e]),L=(0,a.useCallback)(r=>{m(e,{x:r.clientX,y:r.clientY})},[m,e]),O=a.useRef(),D=(0,i.d4)(r=>(0,B.e)(r,e)),k=(0,a.useCallback)(()=>{let r=O.current?.getBoundingClientRect();r&&g({dsStyle:e,position:r})},[e,g]);return a.createElement(eo,{ref:(0,y.A)(O,v),highlightStyle:s?1:0,isDisabled:!1,isLinterItem:n,isSelected:o,itemName:a.createElement("div",{className:Z.JN},a.createElement("div",{className:Z.q3},a.createElement(K.zi,{dsStyle:e,size:K.iL.Standard,disableTooltip:!0})),a.createElement("div",{className:Z.Nk},h)),onContextMenu:L,onMouseDown:w,onMouseLeave:C,onMouseMove:A,recordingKey:c,value:r?null:a.createElement("div",{className:Z.Em},a.createElement(l.d,{"aria-label":(0,N.t)("design_systems.styles.edit_style"),recordingKey:b.Pt(c,"editStyleButton"),htmlAttributes:{"data-tooltip":(0,N.t)("design_systems.styles.edit_style"),"data-tooltip-type":G.Ib.TEXT,onMouseDown:R.dG},"aria-expanded":D,onClick:k},a.createElement(I.B,{svg:Q.A})))})}function e_({expression:e,isHighlighted:r,recordingKey:n,keyboardNavigationPath:i,onItemHighlight:o,onItemSelect:s,onItemMouseLeave:l}){let c=(0,a.useCallback)(()=>{o(e)},[o,e]),{setKeyboardNavigationElement:d,keyboardNavigationItem:u}=(0,T.M3)({path:i,onFauxFocus:c});er(u,r);let p=(0,a.useCallback)(()=>{r||c()},[c,r]),m=(0,a.useCallback)(()=>{s(e)},[e,s]),_=(0,a.useCallback)(()=>{l(e)},[l,e]);return a.createElement(eo,{ref:d,highlightStyle:r?1:0,isDisabled:!1,isSelected:!1,itemName:e.name,onMouseDown:m,onMouseLeave:_,onMouseMove:p,recordingKey:n,value:e.value})}function eh({componentPropItem:e,isHighlighted:r,recordingKey:n,keyboardNavigationPath:i,onItemHighlight:o,onItemSelect:s,onItemMouseLeave:l}){let c=(0,a.useCallback)(()=>{o(e)},[o,e]),{setKeyboardNavigationElement:d,keyboardNavigationItem:u}=(0,T.M3)({path:i,onFauxFocus:c});er(u,r);let p=(0,a.useCallback)(()=>{r||c()},[c,r]),m=(0,a.useCallback)(()=>{s(e)},[e,s]),_=(0,a.useCallback)(()=>{l(e)},[l,e]),h=e.value,g=(0,z.Cq)(h);return a.createElement(eo,{ref:d,highlightStyle:r?1:0,isDisabled:!1,isSelected:!1,itemName:g?a.createElement("div",{className:Z.JN},a.createElement(J.LO,{value:g,onColorChitMouseDown:m,resolvedTypeFallback:h.varValue.resolvedType,disabled:!1,variableThumbnailIconType:J.sW.COMPONENT}),a.createElement("div",{className:Z.Nk,"data-testid":"variable-list-item-name"},h.name)):h.name,onMouseDown:m,onMouseLeave:_,onMouseMove:p,recordingKey:n,value:g&&a.createElement(a.Fragment,null,(0,j.Oi)(g))})}function eg({cmsFieldItem:e,isDisabled:r,isHighlighted:n,recordingKey:i,tooltip:o,keyboardNavigationPath:l,onItemHighlight:c,onItemSelect:d,onItemMouseLeave:u}){let _=(0,a.useCallback)(()=>{c(e)},[c,e]),{setKeyboardNavigationElement:h,keyboardNavigationItem:g}=(0,T.M3)({path:l,onFauxFocus:_});er(g,n);let f=(0,a.useCallback)(()=>{n||_()},[_,n]),E=(0,a.useCallback)(()=>{d(e)},[e,d]),y=(0,a.useCallback)(()=>{u(e)},[u,e]),b=e.value,I=null;if(e.value.fieldType===O._j.IMAGE&&e?.itemField?.value)try{let r=O.Dh.parse(JSON.parse(e.itemField.value));I=a.createElement(J.LO,{value:{type:m.Z_n.IMAGE,resolvedType:m.rXF.IMAGE,value:r},onColorChitMouseDown:E,resolvedTypeFallback:m.rXF.STRING,disabled:!1,variableThumbnailIconType:J.sW.NONE})}catch(r){(0,v.$D)(s.e.CMS,Error("could not parse CMS image field value for VariableListCMSFieldItem thumbnail"),{extra:{cmsItemFieldId:e.itemField.id,collectionFieldSchemaId:e.value.id}})}else e.value.fieldType===O._j.RICH_TEXT&&(I=a.createElement(J.gF,{disabled:r,icon:a.createElement(p.I,null),svgSrc:et.A}));return null===I&&(I=a.createElement(J.LO,{value:{type:m.Z_n.STRING,resolvedType:m.rXF.STRING,value:b.name},onColorChitMouseDown:E,resolvedTypeFallback:m.rXF.STRING,disabled:!1,variableThumbnailIconType:J.sW.NONE})),a.createElement(eo,{ref:h,highlightStyle:n?1:0,isDisabled:r,isSelected:!1,itemName:a.createElement("div",{className:Z.JN},I,a.createElement("div",{className:Z.Nk,"data-testid":"variable-list-item-name"},b.name)),onMouseDown:E,onMouseLeave:y,onMouseMove:f,recordingKey:i,tooltip:o})}let ef=a.forwardRef(function({listItems:e,selectedItemID:r,highlightedItemID:n,className:i,recordingKey:o,onItemHighlight:s,onItemSelect:l,onItemContextMenu:c,onItemMouseLeave:d},u){let p=a.useRef(null),m=(0,_.Te)({count:e.length,getScrollElement:()=>p.current,estimateSize:r=>(0,Y.jx)(e[r],"grid"),getItemKey:r=>(0,Y.vu)(e[r],r),overscan:10,paddingStart:Y.Vc,paddingEnd:Y.Vc});return(0,a.useImperativeHandle)(u,()=>({scrollToTop:()=>m.scrollToOffset(0),scrollToIndex:(e,r)=>m.scrollToIndex(e,r),getVirtualItems:()=>m.getVirtualItems()})),a.createElement("div",{ref:p,style:{height:(0,Y.w4)({layout:"grid",listHeightPx:m.getTotalSize()}),overflow:"auto"},className:i},a.createElement("div",{style:{height:`${m.getTotalSize()}px`,position:"relative"}},m.getVirtualItems().map(i=>a.createElement("div",{className:Z.mz,key:i.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${i.size}px`,transform:`translateY(${i.start}px)`}},a.createElement(eE,{listItem:e[i.index],index:i.index,selectedItemID:r,highlightedItemID:n,recordingKey:o,onItemHighlight:s,onItemSelect:l,onItemContextMenu:c,onItemMouseLeave:d})))))});function eE({listItem:e,index:r,selectedItemID:n,highlightedItemID:i,recordingKey:s,onItemHighlight:l,onItemSelect:c,onItemMouseLeave:d,onItemContextMenu:u}){let p=(0,a.useMemo)(()=>[1,r],[r]);switch(e.type){case Y.Yc.ASSET_TYPE:return a.createElement(es,{assetType:e.name,tooltip:e.tooltip});case Y.Yc.SECTION_HEADER:return a.createElement(el,{groupName:e.name,fileName:e.fileName,secondaryText:e.secondaryText});case Y.Yc.HIERARCHY_PATH:return a.createElement(ed,{groupName:e.name});case Y.Yc.FILE_NAME:{let r=(0,Y.tx)(e);return a.createElement(ec,{fileNameItem:e,onItemHighlight:l,onItemSelect:c,isHighlighted:!!r&&r===i})}case Y.Yc.VARIABLES:return a.createElement("div",{className:Z.Dm},e.items.map((r,o)=>{let u=(0,Y.tx)(r);return a.createElement(ey,{key:(0,Y.tx)(r),column:o,isHighlighted:(0,Y.tx)(r)===i,isSelected:(0,Y.tx)(r)===n,keyboardNavigationPath:p,onItemHighlight:l,onItemMouseLeave:d,onItemSelect:c,recordingKey:u?b.Pt(s,u):void 0,variable:r,variableSet:e.variableSet})}));case Y.Yc.STYLES:return a.createElement("div",{className:Z.KP},e.items.map((e,r)=>{let o=(0,Y.tx)(e);return a.createElement(W.m3,{key:e.key,dsStyle:e},a.createElement(eb,{column:r,dsStyle:e,isHighlighted:(0,Y.tx)(e)===i,isSelected:(0,Y.tx)(e)===n,keyboardNavigationPath:p,onItemContextMenu:u,onItemHighlight:l,onItemMouseLeave:d,onItemSelect:c,recordingKey:o?b.Pt(s,o):void 0}))}));case Y.Yc.SEPARATOR:return a.createElement("div",{className:Z.me});case Y.Yc.EXPRESSION:case Y.Yc.COMPONENT_PROPS:case Y.Yc.CMS_FIELDS:return null;default:(0,o.xb)(e)}}function ey({variable:e,variableSet:r,isSelected:n,isHighlighted:i,recordingKey:o,keyboardNavigationPath:s,column:l,onItemHighlight:d,onItemSelect:u,onItemMouseLeave:p}){let{thumbnailValue:_}=(0,$.A)({variable:e,variableCollection:r}),h=(0,a.useCallback)(()=>{d(e)},[d,e]),{setKeyboardNavigationElement:g,keyboardNavigationItem:f}=(0,T.M3)({path:s,column:l,id:(0,Y.tx)(e),onFauxFocus:h});er(f,i);let y=(0,a.useCallback)(()=>{i||h()},[h,i]),b=(0,a.useCallback)(()=>{u(e)},[u,e]),v=(0,a.useCallback)(()=>{p(e)},[p,e]);if("MIXED"===_||_?.resolvedType!==m.rXF.COLOR)return null;{let r=_.value;return a.createElement(c.E,{ref:g,className:E()(Z.a5,{[Z.FL]:i,[Z.J1]:n}),htmlAttributes:{"data-tooltip":(0,x.kH)(e.name),"data-tooltip-type":G.Ib.TEXT,onMouseLeave:v,onMouseMove:y},onClick:b,recordingKey:o},a.createElement(H.J,{className:Z.xH,color:r}))}}function eb({dsStyle:e,isSelected:r,isHighlighted:n,recordingKey:i,keyboardNavigationPath:o,column:s,onItemHighlight:l,onItemSelect:c,onItemMouseLeave:d,onItemContextMenu:u}){let p=(0,a.useCallback)(()=>{l(e)},[l,e]),{setKeyboardNavigationElement:m,keyboardNavigationItem:_}=(0,T.M3)({path:o,column:s,id:(0,Y.tx)(e),onFauxFocus:p});er(_,n);let h=(0,a.useCallback)(()=>{n||p()},[p,n]),g=(0,a.useCallback)(()=>{d(e)},[d,e]),f=(0,a.useCallback)(()=>{c(e)},[c,e]),E=(0,a.useCallback)(r=>{u(e,{x:r.clientX,y:r.clientY})},[u,e]);return a.createElement(ev,{ref:m,recordingKey:i,dsStyle:e,isSelected:r,isHighlighted:n,onClick:f,onMouseMove:h,onMouseLeave:g,onContextMenu:E})}let ev=a.forwardRef(function({dsStyle:e,isSelected:r,isHighlighted:n,recordingKey:i,onClick:o,onMouseMove:s,onMouseLeave:l,onContextMenu:d},u){return a.createElement(c.E,{ref:u,className:E()(Z.LH,{[Z.ut]:n,[Z.X$]:r}),htmlAttributes:{"data-tooltip-type":G.Ib.SPECIAL,"data-tooltip":q.Z,"data-tooltip-style-name":(0,x.kH)(e.name||""),"data-tooltip-style-description":e.description,onContextMenu:d,onMouseLeave:l,onMouseMove:s},recordingKey:i,onClick:o},a.createElement(K.zi,{dsStyle:e,size:K.iL.Large_variables,disableTooltip:!0}))})},774334:(e,r,n)=>{n.d(r,{Y:()=>i});var a=n(382902);let i=(0,a.eU)({type:"ALL_LIBRARIES"});(0,a.eU)({type:"LOCAL_VARIABLES"})},224747:(e,r,n)=>{n.d(r,{ND:()=>D,Q8:()=>P,Ti:()=>M,rf:()=>k});var a=n(848318),i=n(301168),o=n(658029),s=n(990140),l=n(186606),c=n(320953),d=n(813009),u=n(781239),p=n(401970),m=n(967688),_=n(523669),h=n(238004),g=n(303397),f=n(788903),E=n(273555),y=n(17753),b=n(52463),v=n(499025),T=n(901044),I=n(986285),S=n(345900),A=n(33441),w=n(491892),C=n(787287),N=n(2910),L=n(156625);function O({disabledVariableIds:e,boundVariable:r,resolvedType:n,requestedTypes:i,variableFilters:l,fields:c,pickerType:h,variableScopes:g,recordingKey:f,onVariableSelected:E,onComponentPropSelected:b,onClose:T,openCreationModal:S}){let{VariableAndComponentPropCreateModalRoot:A}=(0,a.useContext)(I.l)??{},C=(0,d.R)(e=>(0,v.Nw)(e)??(0,v.y7)(e)),L=(0,a.useMemo)(()=>(0,N.Kq)(!!A,!!C,c),[A,C,c]);function O(){S?.()}return a.createElement(w.Rp,{key:"Libraries",disabledVariableIds:e,onClose:T,onComponentPropSelected:b,onVariableSelected:E,pickerType:h,recordingKey:f,requestedTypes:i,resolvedType:n,selectedItem:r,setControlRightButtons:function(){if(void 0===n||"fields"!==h&&"prop-assignment"!==h)return;let e=L?(0,m.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,m.t)("variables.binding_ui.create_variable_button_tooltip");return a.createElement(o.K,{"aria-label":e,recordingKey:u.Pt(f,"createVariable"),onClick:O,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":y.Ib.TEXT}},a.createElement(p.U,{svg:_.KC["plus-32"]},a.createElement(s.e,null)))}(),variableFilters:l,variableScopes:g})}function R({variableID:e,modeID:r,resolvedType:n,initialPosition:o,initialView:s,onVariableSelected:d,variableFilters:p}){let _=(0,i.wA)(),y=(0,f.bL)(e,r),b=(0,f.u)(y?.type===l.Z_n.ALIAS?y?.value:void 0),v=(0,a.useCallback)(()=>{_((0,h.B)())},[_]),I=(0,a.useCallback)((n,a)=>{let i={type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:n};c.l7.user("set-color-variable-value",()=>l.CWU.setVariableValueForMode(e,r,i))&&a===E.zk.YES&&g.Y5.triggerAction("commit")},[e,r]);if(y?.resolvedType===l.rXF.COLOR&&y?.type!==l.Z_n.NODE_FIELD_ALIAS)return a.createElement(a.Fragment,null,a.createElement(L.I,{disabledVariableIds:new Set([e]),boundVariable:b,variableValue:y,initialPosition:o,initialView:s,onColorChange:I,onVariableSelected:d,onClose:v,recordingKey:"variableBindingsDropdown"}),a.createElement(w.$3,{recordingKey:u.Pt("variableBindingsDropdown","closer"),onClose:v}));let S={tabs:[{name:"library",displayText:(0,m.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(O,{disabledVariableIds:new Set([e]),boundVariable:b,resolvedType:n,variableFilters:p,onVariableSelected:d,onClose:v,pickerType:"alias",recordingKey:"variableBindingsDropdown"})}]};return a.createElement(T.k,{tabProps:S,onClose:v,initialPosition:o,initialWidth:A.d9,recordingKey:"variableBindingsDropdown"})}function P(){let e=(0,i.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?a.createElement(R,{...e}):null}function D({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:i,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c}){let d=(0,f.u)(i),[u,p]=(0,a.useState)(!1),_=(0,a.useRef)(null),h=_.current?(0,b.cn)(_.current,S.i):void 0,g={tabs:[{name:"library",displayText:(0,m.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(O,{boundVariable:d,disabledVariableIds:new Set,onClose:l,onComponentPropSelected:s,onVariableSelected:o,openCreationModal:()=>p(!0),pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown",requestedTypes:r,resolvedType:e,variableScopes:c})}]};return a.createElement(a.Fragment,null,a.createElement(T.k,{tabProps:g,onClose:l,initialPosition:n,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:_}),u&&h&&a.createElement(C.x,{resolvedType:e,creationModalInitialPosition:h,onClose:()=>p(!1),onVariableSelected:o}))}function k({variableScope:e}){let r=(0,i.wA)(),n=(0,a.useCallback)(()=>{r((0,h.B)())},[r]),o=(0,i.d4)(e=>e.variablePickerShown);return o.isShown&&"variable-picker-controlled"===o.type?a.createElement(D,{...o,onClose:n,variableScopes:e?new Set([e]):void 0}):null}function M({resolvedType:e,onVariableSelected:r,onClose:n,initialPosition:i,pickerType:o}){let[s,l]=(0,a.useState)(!1),c=(0,a.useRef)(null),d=c.current?(0,b.cn)(c.current,S.i):void 0,u=(0,a.useMemo)(()=>(0,N.IQ)(e,null),[e]),p={tabs:[{name:"library",displayText:(0,m.tx)("variables.binding_ui.variable_library_tab_name"),content:a.createElement(O,{disabledVariableIds:new Set,boundVariable:null,resolvedType:e,onVariableSelected:r,onClose:n,pickerType:o,recordingKey:"variableBindingsDropdown",openCreationModal:()=>l(!0)})}]};return a.createElement(a.Fragment,null,a.createElement(T.k,{tabProps:p,onClose:n,initialPosition:i,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:c}),s&&void 0!==e&&d&&a.createElement(C.x,{resolvedType:e,creationModalInitialPosition:d,newVariableInitialValue:u,onClose:()=>l(!1),onVariableSelected:r}))}n(50652),n(557167),n(31510)},491892:(e,r,n)=>{n.d(r,{$3:()=>eu,Rp:()=>Q,di:()=>el});var a=n(848318),i=n(660376),o=n(143823),s=n(186606),l=n(693108),c=n(19180),d=n(536384),u=n.n(d),p=n(63163),m=n(865114),_=n(857607),h=n(979309),g=n(781239),f=n(146968),E=n(561258),y=n(720522),b=n(994924),v=n(967688),T=n(389541),I=n(680004),S=n(87148),A=n(788903),w=n(511067),C=n(355755),N=n(730143),L=n(180294),O=n(474132),R=n(720722),P=n(595342),D=n(614892),k=n(447071),M=n(130768),F=n(527301),x=n(147367),U=n(906419),B=n(368112),G=n(513390),V=n(674349),H=n(709393),z=n(927036),K=n(985789),W=n(263267),j=n(50652),Y=n(557167),$=n(31510),q=n(794523),X=n(720598);function J({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function Z(e,r,n,i){return a.createElement("div",{className:q.p$,style:{height:(0,B.Ih)({layout:r})}},e.length>0?(0,v.t)("variables.binding_ui.no_search_results"):i===s.rXF.COLOR?(0,v.t)("variables.binding_ui.no_colors_empty_state"):n?(0,v.t)("variables.binding_ui.no_variables_props_empty_state"):(0,v.t)("variables.binding_ui.no_variables_empty_state"))}function Q({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:o,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:p,onStyleSelected:m,onComponentPropSelected:_,onClose:h,keepOpenOnItemSelect:g}){let{currentView:E,setCurrentView:y,toggleLayout:b}=(0,x.R)({selectedItem:e,resolvedType:r}),v=function(e){switch(e.type){case"ALL_LIBRARIES":return en;case"LOCAL_VARIABLES":return er;case"SUBSCRIBED_VARIABLES":return ee;default:(0,i.xb)(e,"Unhandled view for picker body")}}(E),T=(0,a.useMemo)(()=>J({requestedTypes:n,resolvedType:r??null}),[n,r]),[I,S]=(0,a.useState)(""),A=a.useRef(null),w=(0,a.useCallback)(()=>{A.current&&A.current.focus(),b()},[b,A]);return a.createElement(f.tH,{boundaryKey:"VariablePicker",fallback:Z(I,E.layout,!!_,r)},a.createElement(v,{currentView:E,disabledVariableIds:l,keepOpenOnItemSelect:g,onClose:h,onComponentPropSelected:_,onSearchInputChange:S,onStyleSelected:m,onVariableSelected:p,pickerType:s,recordingKey:u,renderSetControls:i=>a.createElement(ed,{currentView:E,onStyleSelected:m,onToggleLayout:w,recordingKey:u,requestedTypes:n,resolvedType:r,searchQuery:I,selectedItem:e,setControlRightButtons:c,setCurrentView:y,variableSets:i}),requestedTypes:n,resolvedType:r,searchInputRef:A,searchQuery:I,selectedItem:e,variableFilters:o,variableScopes:d}),a.createElement(F.M,{resolvedTypes:T,selectedItem:e}))}function ee({selectedItem:e,currentView:r,resolvedType:n,pickerType:i,recordingKey:o,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:p,onSearchInputChange:m,variableScopes:_,variableFilters:h,searchInputRef:g,renderSetControls:f}){let E=r.fileKey,y=(0,A.kf)(E),b=(0,A.u5)(E),v="loading"===b.status||"loading"===y.status,T=y.data??[],I=b.data??[];return n===s.rXF.COLOR&&"color-picker"===i&&c?a.createElement(et,{fileKey:E,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({isLoading:s,dsStyles:E})=>a.createElement(el,{currentView:r,disabledVariableIds:new Set,dsStyles:E,isLoading:s||v,onClose:d,onSearchInputChange:m,onStyleSelected:c,onVariableSelected:l,pickerControls:f(I),pickerType:i,recordingKey:o,requestedTypes:u,resolvedType:n,searchInputRef:g,searchQuery:p,selectedItem:e,variableFilters:h,variableScopes:_,variableSets:I,variables:T})}):a.createElement(el,{currentView:r,disabledVariableIds:new Set,dsStyles:[],onClose:d,onSearchInputChange:m,onVariableSelected:l,pickerControls:f(I),pickerType:i,recordingKey:o,requestedTypes:u,resolvedType:n,searchInputRef:g,searchQuery:p,selectedItem:e,variableScopes:_,variableSets:I,variables:T})}function et({fileKey:e,selectedStyle:r,render:n}){let i=(0,k.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:i}),c=s[e]?.styles??[];return a.createElement(M.mY,null,n({isLoading:"loaded"!==o,dsStyles:c}))}function er({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:_,onSearchInputChange:h,variableScopes:g,variableFilters:f,onComponentPropSelected:E,searchInputRef:y,renderSetControls:b}){let v=(0,A.Rb)(),T=(0,A.yp)();return i===s.rXF.COLOR&&"color-picker"===o&&u?a.createElement(ea,{styleType:l.s4.FILL,render:s=>a.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:s,onClose:p,onSearchInputChange:h,onStyleSelected:u,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:i,searchInputRef:y,searchQuery:_,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v})}):E?a.createElement(ei,{render:s=>a.createElement(el,{componentProps:s,currentView:n,disabledVariableIds:r,dsStyles:[],onClose:p,onComponentPropSelected:E,onSearchInputChange:h,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:i,searchInputRef:y,searchQuery:_,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v}),pickerType:o,requestedTypes:m,resolvedType:i}):a.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:[],onClose:p,onSearchInputChange:h,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:i,searchInputRef:y,searchQuery:_,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v})}function en({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:i,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onComponentPropSelected:p,onClose:m,keepOpenOnItemSelect:_,requestedTypes:h,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,renderSetControls:v}){let T=(0,A.Rb)(),I=(0,A.yp)(),S=(0,A.pN)(),w="loaded"!==S.status,C=S.data?.libraryVariables,N=S.data?.libraryVariableSets,L=(0,a.useMemo)(()=>[...T,...C??[]],[T,C]),O=(0,a.useMemo)(()=>[...I,...N??[]],[I,N]);return i===s.rXF.COLOR&&"color-picker"===o&&u?a.createElement(eo,{styleType:l.s4.FILL,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({dsStyles:s,isLoading:l})=>a.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:s,isLoading:l||w,keepOpenOnItemSelect:_,onClose:m,onSearchInputChange:f,onStyleSelected:u,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:h,resolvedType:i,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L})}):p?a.createElement(ei,{render:s=>a.createElement(el,{componentProps:s,currentView:n,disabledVariableIds:r,dsStyles:[],isLoading:w,onClose:m,onComponentPropSelected:p,onSearchInputChange:f,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:h,resolvedType:i,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L}),pickerType:o,requestedTypes:h,resolvedType:i}):a.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:[],isLoading:w,onClose:m,onSearchInputChange:f,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:h,resolvedType:i,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L})}function ea({styleType:e,render:r}){return r((0,k.Je)(e))}function ei({render:e,pickerType:r,requestedTypes:n,resolvedType:i}){return e(a.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,c.k)().ds_variable_props_proto?s.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return[];default:return s.CWU.getComponentPropsForFieldsList()}})(),a=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{a.push(...(0,B.LV)(e.values,n,i))}),a},[r,n,i])())}function eo({styleType:e,selectedStyle:r,render:n}){let i=(0,k.Je)(e),o=(0,k.AH)(r?.key||null,r),{status:s,stylesByFileKey:c}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,a.useMemo)(()=>Object.values(c).reduce((e,{styles:r})=>(e.push(...r),e),[]),[c]),u=(0,a.useMemo)(()=>i.concat(d),[i,d]);return a.createElement(M.mY,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function es(e){let r=(0,K.Px)({includeSubtree:!0});return a.useMemo(()=>e.some(e=>"MIXED"===("LOCAL"===e.subscriptionStatus?r[e.keyForPublish]:r[e.key])),[e,r])}function el({variables:e,variableSets:r,dsStyles:n,currentView:i,selectedItem:l,disabledVariableIds:d,resolvedType:p,pickerType:h,recordingKey:f,isLoading:y,onVariableSelected:b,onStyleSelected:A,onClose:C,keepOpenOnItemSelect:k,requestedTypes:M,searchQuery:x,onSearchInputChange:K,variableScopes:W,variableFilters:X,onComponentPropSelected:Q,componentProps:ee,onCMSFieldSelected:et,cmsCollectionItem:er,pickerControls:en,searchInputRef:ea}){(0,H.D)({isLoading:y??!1,eventName:"variables.variable_picker_load_time"});let ei=(0,N._G)(),eo=(0,w.Um)(),el=l?(0,B.tx)(l):null,[ed,eu]=a.useState(null);a.useRef(null).current=ed;let em=es(r),e_=x.length>0||em?"list":i.layout,eh=(0,z.s1)(),eg=(0,a.useMemo)(()=>J({requestedTypes:M,resolvedType:p??null}),[M,p]),ef=A?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],eE=(0,F.A)(eg,l?.type!=="CMS_FIELD"?l:null,ef),ey=(0,L.sZ)(),eb=(0,T.Fl)(),ev=(0,O.Oe)(ey)&&(0,I.NX)(eb),eT=ec({selectedItem:l,resolvedType:p,requestedTypes:M,onStyleSelected:A}),eI=(0,S.B8)(),[eS,eA]=a.useState(()=>(0,c.k)().dse_collapse_variable_and_style_libraries?new Set(eT.filter(({libraryKey:e})=>eI(e)).map(({libraryKey:e})=>e)):new Set),ew=a.useCallback(e=>{eA(r=>{let n=new Set(r);return n.has(e)?n.delete(e):n.add(e),n})},[eA]),eC=(0,a.useMemo)(()=>{let e={};return(ev?eT:eE).forEach(r=>{e[r.libraryKey]=r.fileName}),e},[eE,eT,ev]),eN=(0,a.useMemo)(()=>M?e.filter(e=>M.includes(e.resolvedType)):e.filter(e=>void 0===p||e.resolvedType===p),[e,p,M]),eL=(0,a.useMemo)(()=>W?eN.filter(e=>(0,B.tx)(e)===el||(0,j.AQ)(e,W)):eN,[eN,W,el]),eO=(0,G.qF)(eL,x),eR=(0,a.useMemo)(()=>x.length>0?eO:eO.filter(e=>{let r=e.resolvedType,n=X?.[P.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let a=X?.[P.t.MUST_INCLUDE_ONE_OF];if(a&&a[r]?.length){let n=a[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===s.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[eO,x,X]),eP=(0,G.bT)(n,x),eD=(0,G.tZ)(ee??[],x),ek=(0,G.Ui)(er?.cmsFields??[],x),eM=(0,a.useMemo)(()=>{if("ALL_LIBRARIES"===i.type)return(0,B.dC)({variables:eR,variableSets:r,styles:eP,componentProps:eD,layout:e_,fileNamesByLibraryKey:eC,collapsedLibraryKeys:eS,openFileLibraryKey:ei,slideThemeId:eh});if("CMS_FIELDS"===i.type)return(0,B.kE)({collectionName:er?.collectionName,cmsFields:ek,fieldTypes:er?.fieldTypes??[]});if(p===s.rXF.COLOR)return(0,B.w$)({variables:eR,variableSets:r,styles:eP,layout:e_,isLocal:"LOCAL_VARIABLES"===i.type,slideThemeId:eh});{let e=(0,B.HK)({variables:eR,variableSets:r,layout:e_});if(!Q)return e;let n=(0,B.dh)({componentProps:eD});return n.length>0&&e.length>0&&n.push({type:B.Yc.SECTION_HEADER,name:(0,v.t)("variables.binding_ui.set_labels.variables_created_in_file")}),n.concat(e)}},[i.type,p,eR,r,eP,eD,e_,eC,eS,ei,eh,er?.collectionName,er?.fieldTypes,ek,Q]),eF=a.useRef([]);eF.current=eM;let ex=a.useRef(null),eU=(0,a.useCallback)(()=>{ex.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(eF.current);eu(e?(0,B.tx)(e)??null:null)},[]),eB=(0,a.useCallback)((e,r)=>{let n=(0,B.oM)(eF.current,e);n>=0&&ex.current?.scrollToIndex(n,r),eu(e)},[]),eG=(0,N.tS)(),eV=(0,a.useContext)(Y.d2);(0,$.g$)({variables:e,variableSets:r,subscribedLibraries:eE,variableRerankingData:eV,fileKey:eG??"",orgId:ey?.id});let eH=(0,m.ZC)(x);(0,a.useLayoutEffect)(()=>{!y&&eH!==x&&(x.length>0||!el?eU():x||eB(el,{align:"center"}))},[x,y,eU,eB,el,eH]);let{showStyleContextMenu:ez,hideStyleContextMenu:eK}=(0,V.XM)(),eW=(0,a.useCallback)((e,r)=>{e.type===R.PW.STYLE&&ez({dsStyle:e,position:r})},[ez]),ej=(0,a.useCallback)(e=>{let r=(0,B.tx)(e);r&&eu(r)},[eu]),eY=(0,a.useCallback)(e=>{ed===(0,B.tx)(e)&&eu(null)},[ed,eu]),e$=(0,a.useCallback)(e=>{if(e.type===B.Yc.FILE_NAME){(0,c.k)().dse_collapse_variable_and_style_libraries&&e.libraryKey&&ew(e.libraryKey);return}e.type===R.PW.VARIABLE?b(e,eV):e.type===R.PW.STYLE?A?.(e,{fromSearch:x.length>0}):"COMPONENT_PROP"===e.type?Q?.(e):"CMS_FIELD"===e.type&&et?.(e),k||C()},[k,b,A,x.length,Q,ew,et,C,eV]),eq=(0,a.useCallback)(e=>{K(e.currentTarget.value)},[K]),eX=(0,a.useCallback)(r=>{if(r.keyCode===_.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:a,cmsFields:i}){return e?[...r,...n,...a,...i].find(r=>(0,B.tx)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eD,cmsFields:ek,highlightedItemID:ed});r?e$(r):l&&b(),C()}else r.keyCode===_.Uz.ESCAPE?C():((0,E.Nt)(r,!1)||(0,E.c2)(r,!1)||(0,E.yn)(r.code,!1)||(0,E.lv)(r.code,!1))&&(ed?(ex.current?.getVirtualItems()??[]).some(e=>{let r=eF.current[e.index];return"items"in r&&r.items.some(e=>(0,B.tx)(e)===ed)})||eB(ed,{align:"center"}):el?eB(el,{align:"center"}):eU())},[e,n,eD,ek,ed,C,e$,l,b,el,eB,eU]);return a.createElement(E.dP,{recordingKey:f,onClick:eK},a.createElement("div",{className:q.PP},a.createElement(ep,{inputRef:ea,value:x,onChange:eq,onKeyDown:eX,recordingKey:g.Pt(f,"input")})),en,a.createElement(D.Id,{className:u()({[q.eB]:p!==s.rXF.COLOR,[q.a2]:!0})},y?a.createElement("div",{className:q.S,style:{height:(0,B.Ih)({layout:e_})}},a.createElement(o.k,null)):0===eP.length&&0===eR.length&&0===eD.length&&0===ek.length?Z(x,e_,!!Q,p):"list"===e_?a.createElement(U.HZ,{ref:ex,className:q.jG,disabledVariableIds:d,highlightedItemID:ed,listItems:eM,onItemContextMenu:eW,onItemHighlight:ej,onItemMouseLeave:eY,onItemSelect:e$,pickerType:h,recordingKey:f,selectedItemID:el??null}):a.createElement(U.Rm,{ref:ex,className:q.jG,highlightedItemID:ed,listItems:eM,onItemContextMenu:eW,onItemHighlight:ej,onItemMouseLeave:eY,onItemSelect:e$,recordingKey:f,selectedItemID:el??null})),eo?.type===V.A7&&a.createElement(V.ip,{dsStyle:eo.data.dsStyle,position:eo.data.position,recordingKey:g.Pt(f,"contextMenu")}))}function ec({selectedItem:e,resolvedType:r,requestedTypes:n,onStyleSelected:i}){let o=(0,a.useMemo)(()=>J({requestedTypes:n,resolvedType:r??null}),[n,r]),s=i?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],l=(0,F.A)(o,e?.type!=="CMS_FIELD"?e:null,s),c=(0,L.sZ)(),d=(0,T.Fl)(),u=(0,O.Oe)(c)&&(0,I.NX)(d);return(0,a.useMemo)(()=>{if(u){let e=l.map(({fileKey:e,libraryKey:r,fileName:n})=>({key:e,name:n,libraryKey:r}));return(0,I.k9)({libraries:e,approvedLibraryKeysByResourceType:d}),e.map(({key:e,libraryKey:r,name:n})=>({fileKey:e,fileName:n,libraryKey:r}))}return l.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[l,u,d])}function ed({variableSets:e,currentView:r,setCurrentView:n,onToggleLayout:i,selectedItem:o,resolvedType:s,setControlRightButtons:l,recordingKey:c,onStyleSelected:d,requestedTypes:u,searchQuery:p}){let m=ec({selectedItem:o,resolvedType:s,requestedTypes:u,onStyleSelected:d}),_=es(e),h=0===p.length,g=p.length>0||_?"list":r.layout,f=(0,a.useMemo)(()=>({...r,layout:g}),[r,g]);return a.createElement(W.Z,{recordingKey:c,currentView:f,resolvedType:s,subscribedLibraries:m,setControlRightButtons:l,onSetSelect:n,onToggleLayoutIconClick:h?i:void 0,disableGridLayout:_?W.t.MIXED_MODES:void 0})}function eu({recordingKey:e,onClose:r}){let n=g.rf(e,"mousedown",a.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,C.dH)()===s.NLJ.DROPPER_COLOR?null:a.createElement(b.n.div,{className:q.ZA,onMouseDown:n})}function ep({inputRef:e,value:r,onChange:n,onKeyDown:i,recordingKey:o}){let s=a.useRef(null);return(0,p.h)(()=>{s.current&&s.current.focus()}),a.createElement("div",{className:q.ON},a.createElement(y.B,{className:q.qc,svg:X.A}),a.createElement(D.jT,{ref:(0,h.A)(e,s),className:q.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,v.t)("variables.binding_ui.search_placeholder"),onKeyDown:i,recordingKey:o}))}},50652:(e,r,n)=>{n.d(r,{$8:()=>B,AQ:()=>U,B3:()=>P,Ku:()=>M,Mm:()=>F,Us:()=>R,ZM:()=>D,aZ:()=>G,iG:()=>x,my:()=>T});var a=n(848318),i=n(430385),o=n(419367),s=n(268363),l=n(265075),c=n(27012),d=n(430848),u=n(56896),p=n(186606),m=n(720522),_=n(967688),h=n(374356),g=n(731650),f=n(668810),E=n(936763),y=n(598494),b=n(77351),v=n(844984),T=(e=>(e.SCOPE="scope",e.LABEL="label",e))(T||{});let I=new Set([p.rXF.FLOAT,p.rXF.COLOR,p.rXF.STRING]),S=new Set([p.rrT.FILL,p.rrT.STROKE,p.rrT.EFFECT]),A=new Set([p.j0r.FRAME_FILL,p.j0r.SHAPE_FILL,p.j0r.TEXT_FILL]),w=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,_.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.CORNER_RADIUS,name:(0,_.tx)("variables.scopes.corner_radius"),iconElement:a.createElement(m.B,{svg:h.A})},{type:"scope",scope:p.j0r.WIDTH_HEIGHT,name:(0,_.tx)("variables.scopes.width_height"),iconElement:a.createElement(m.B,{svg:y.A})},{type:"scope",scope:p.j0r.GAP,name:(0,_.tx)("variables.scopes.gap"),iconElement:a.createElement(m.B,{svg:f.A}),subLabel:(0,_.tx)("variables.scopes.auto_layout")},{type:"scope",scope:p.j0r.TEXT_CONTENT,name:(0,_.tx)("variables.scopes.text_content"),iconElement:a.createElement(m.B,{svg:v.A})},{type:"scope",scope:p.j0r.STROKE_FLOAT,name:(0,_.tx)("variables.scopes.stroke"),iconElement:a.createElement(m.B,{svg:b.A})},{type:"scope",scope:p.j0r.OPACITY,name:(0,_.tx)("variables.scopes.layer_opacity"),iconElement:a.createElement(o.N,null)},{type:"scope",scope:p.j0r.EFFECT_FLOAT,name:(0,_.tx)("variables.scopes.effects"),iconElement:a.createElement(m.B,{svg:g.A})},{type:"label",key:"typography",label:(0,_.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:p.j0r.FONT_STYLE,name:(0,_.tx)("variables.scopes.font_weight"),iconElement:a.createElement(s.j,null)},{type:"scope",scope:p.j0r.FONT_SIZE,name:(0,_.tx)("variables.scopes.font_size"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:p.j0r.LINE_HEIGHT,name:(0,_.tx)("variables.scopes.line_height"),iconElement:a.createElement(c.e,null)},{type:"scope",scope:p.j0r.LETTER_SPACING,name:(0,_.tx)("variables.scopes.letter_spacing"),iconElement:a.createElement(d.y,null)},{type:"scope",scope:p.j0r.PARAGRAPH_SPACING,name:(0,_.tx)("variables.scopes.paragraph_spacing"),iconElement:a.createElement(u.o,null)},{type:"scope",scope:p.j0r.PARAGRAPH_INDENT,name:(0,_.tx)("variables.scopes.paragraph_indent"),iconElement:a.createElement(m.B,{svg:E.A})}],C=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,_.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.ALL_FILLS,name:(0,_.tx)("variables.scopes.all_fills")},{type:"scope",scope:p.j0r.FRAME_FILL,name:(0,_.tx)("variables.scopes.frame_fill"),devModeName:(0,_.tx)("variables.scopes.frame_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.SHAPE_FILL,name:(0,_.tx)("variables.scopes.shape_fill"),devModeName:(0,_.tx)("variables.scopes.shape_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.TEXT_FILL,name:(0,_.tx)("variables.scopes.text_fill"),devModeName:(0,_.tx)("variables.scopes.text_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.STROKE,name:(0,_.tx)("variables.scopes.stroke")},{type:"scope",scope:p.j0r.EFFECT_COLOR,name:(0,_.tx)("variables.scopes.effects")}],N=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,_.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.TEXT_CONTENT,name:(0,_.tx)("variables.scopes.text_content"),iconElement:a.createElement(m.B,{svg:v.A})},{type:"scope",scope:p.j0r.FONT_FAMILY,name:(0,_.tx)("variables.scopes.font_family"),iconElement:a.createElement(l.Z,null)},{type:"scope",scope:p.j0r.FONT_STYLE,name:(0,_.tx)("variables.scopes.font_weight_or_style"),iconElement:a.createElement(s.j,null)}],L=[...w,...C,...N].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.name),e),{}),O=[...w,...C,...N].reduce((e,r,n,a)=>("scope"in r&&(e[r.scope]=r.devModeName??r.name),e),{});function R(e,{devMode:r=!1}={}){return r?O[e]:L[e]}function P(e){let r;if(e?.length===0)return(0,_.tx)("variables.scopes.no_supported_properties");if(e.includes(p.j0r.ALL_SCOPES))return(0,_.tx)("variables.scopes.all_properties_label");for(let n of(0,i.RP)(e,e=>R(e)))r=r?a.createElement(a.Fragment,null,(0,_.tx)("variables.scopes.scope_list",{scope1:r,scope2:n})):n;return r??(0,_.tx)("variables.scopes.no_supported_properties")}let D={CORNER_RADIUS:p.j0r.CORNER_RADIUS,STACK_SPACING:p.j0r.GAP,STACK_PADDING_LEFT:p.j0r.GAP,STACK_PADDING_TOP:p.j0r.GAP,STACK_PADDING_RIGHT:p.j0r.GAP,STACK_PADDING_BOTTOM:p.j0r.GAP,TEXT_DATA:p.j0r.TEXT_CONTENT,WIDTH:p.j0r.WIDTH_HEIGHT,HEIGHT:p.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:p.j0r.GAP,GRID_ROW_GAP:p.j0r.GAP,GRID_COLUMN_GAP:p.j0r.GAP,MIN_WIDTH:p.j0r.WIDTH_HEIGHT,MAX_WIDTH:p.j0r.WIDTH_HEIGHT,MIN_HEIGHT:p.j0r.WIDTH_HEIGHT,MAX_HEIGHT:p.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:p.j0r.STROKE_FLOAT,OPACITY:p.j0r.OPACITY,PARAGRAPH_SPACING:p.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:p.j0r.PARAGRAPH_INDENT,FONT_FAMILY:p.j0r.FONT_FAMILY,FONT_STYLE:p.j0r.FONT_STYLE,FONT_VARIATIONS:p.j0r.PARAGRAPH_SPACING,FONT_SIZE:p.j0r.PARAGRAPH_SPACING,LETTER_SPACING:p.j0r.LETTER_SPACING,LINE_HEIGHT:p.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null,OVERRIDDEN_SYMBOL_ID:null,HYPERLINK:null,CMS_SERIALIZED_RICH_TEXT_DATA:null,SLOT_CONTENT_ID:null};Object.keys(p.Z6A).filter(e=>isNaN(Number(e)));let k={FRAME:p.j0r.FRAME_FILL,SYMBOL:p.j0r.FRAME_FILL,INSTANCE:p.j0r.FRAME_FILL,VECTOR:p.j0r.SHAPE_FILL,BRUSH:p.j0r.SHAPE_FILL,STAR:p.j0r.SHAPE_FILL,LINE:p.j0r.SHAPE_FILL,ELLIPSE:p.j0r.SHAPE_FILL,RECTANGLE:p.j0r.SHAPE_FILL,REGULAR_POLYGON:p.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:p.j0r.SHAPE_FILL,TEXT:p.j0r.TEXT_FILL,TEXT_PATH:p.j0r.TEXT_FILL,VECTOR_OPERATION:p.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,CANVAS_ROW:null,CANVAS_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null,CODE_LIBRARY:null,CODE_FILE:null,CODE_INSTANCE:null,CODE_LAYER:null,MANAGED_STRING:null,TRANSFORM:null,CMS_RICH_TEXT:null,REPEATER:null,JSX:null,EMBEDDED_PROTOTYPE:null,REACT_FIBER:null};function M(e){return k[e]}function F(e){return e===p.rXF.FLOAT?w:e===p.rXF.COLOR?C:e===p.rXF.STRING?N:[]}function x(e){let r=new Set;for(let n of e)D[n]&&r.add(D[n]);return r}function U(e,r){if(!I.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(A.has(e)){n=!0;break}for(let a of e.scopes)if(r.has(a)||a===p.j0r.ALL_SCOPES||a===p.j0r.ALL_FILLS&&n)return!0;return!1}function B(){return[p.rXF.FLOAT,p.rXF.COLOR,p.rXF.STRING]}function G(e,r){if(!e||!r||!S.has(e))return;let n=new Set;switch(e){case p.rrT.STROKE:case p.rrT.STROKE_PRESET:n.add(p.j0r.STROKE);break;case p.rrT.FILL:for(let e in r){let r=k[e];r&&n.add(r)}break;case p.rrT.EFFECT:n.add(p.j0r.EFFECT_COLOR)}return n.size?n:void 0}},557167:(e,r,n)=>{n.d(r,{JC:()=>S,Mv:()=>A,O0:()=>b,UN:()=>T,_e:()=>v,_t:()=>w,cQ:()=>I,d2:()=>g,hW:()=>y});var a=n(848318),i=n(186606),o=n(432121),s=n(19180),l=n(206639),c=n(227276),d=n(438071),u=n(944239),p=n(331234),m=n(813831),_=n(190878);let h=1/0,g=(0,a.createContext)({}),f=new Set(["FRAME","TEXT","VECTOR","INSTANCE","SYMBOL"]);function E(){return new Promise(e=>setTimeout(e,0))}function y(e){let r=e.value?.alias;return r?r.guid?"LOCAL":r.assetRef?.key:void 0}function b(e){return e.currentColor?{color_value:e.currentColor}:void 0!==e.currentFloat?{number_value:e.currentFloat}:{}}function v(e){switch(e){case i.rXF.COLOR:return"color";case i.rXF.FLOAT:return"float";default:return}}function T(e){switch(e){case i.rXF.COLOR:return"COLOR";case i.rXF.FLOAT:return"FLOAT";default:return}}let I=(0,u.n)((e,r,n,a)=>{let i=Array.from(n.values()).reduce((e,r)=>e+r,0),o=Array.from(a.values()).reduce((e,r)=>e+r,0);return{is_top_level_node:e.isTopLevelFrame(),num_descendant_nodes:e.getVisibleDescendantIds().length,is_component:e.isComponentish,depth_from_top_level_frame:e.depthFromTopLevelFrame,edit_info_valid:!!e.editInfo,layer_name:e.name,property:r,node_type:function(e){return e.isIconLike?"ICON-LIKE":f.has(e.type)?e.type:"OTHER"}(e),selected_components:function(e){let r=e.mainComponent?.componentKey?.toString();if(!r)return[];let n="component",a=e.mainComponent?.containingStateGroupId;return a?[{type:n,key:r,state_group_id:a,name:e.name}]:[{type:n,key:r,name:e.name}]}(e),file_total_variable_usages:i,containing_subtree_total_variable_usages:o}}),S=(0,u.n)(async(e,r)=>{let n=performance.now(),a=new Map,o=new Map;return(0,s.k)().aip_flower_garden_shadow_reranker&&e&&(r.suggestionType!==i.rXF.FLOAT||(0,s.k)().aip_flower_garden_shadow_number_reranker)&&(a=i.mHF?.getVariableConsumptionForDocument()??new Map,(0,s.k)().aip_flower_garden_subtree_variable_count_feat&&(await E(),o=i.mHF?.getVariableConsumptionForHighestNodeContainer(e)??new Map,await E())),{data:{variableConsumptionInDocument:a,variableConsumptionInSubtree:o},timing:performance.now()-n}}),A=(0,u.n)(async(e,r,n,a,d,u,g,f,y)=>{let b=performance.now(),T={data:[],timing:0};if(!(0,s.k)().aip_flower_garden_shadow_reranker||g===i.rXF.FLOAT&&!(0,s.k)().aip_flower_garden_shadow_number_reranker)return T;let I=v(g);if(!I)return T;let S=n??{},A=new Map;r.forEach(e=>{e.node_id&&A.set(e.node_id,e)});let w=new Map;for(let[e,r]of y)w.set(e,new Set(r));let C=await (0,c.w0)(m.Cg),N=C.get(m.wp,m.dg),L=C.get(m.qg,m.A7),O=[],R=[];for(let r=0;r<e.length;r++){r>0&&r%L==0&&await E();let n=e[r];if(!n||n?.resolvedType!==g)continue;let s=A.get(n.variableSetId);if(!s)continue;let c=o.sH(s.node_id);if(!c)continue;let m=function(e){if(e&&"MIXED"!==e){if(e.resolvedType===i.rXF.COLOR)return{color_value:e.value};if(e.resolvedType===i.rXF.FLOAT)return{number_value:e.value}}}("LIBRARY"===s.subscriptionStatus?(0,_.Z)({variable:n,variableCollectionKey:s.key,variableCollectionCheckpointId:s.checkpoint_id,collectionId:c,modeContext:S}):u[n.node_id]);if(!m)continue;let y={name:n.name,variable_id:n.node_id,variable_set_id:n.variableSetId,variable_resolved_data_type:I,usage_type:n.subscriptionStatus,value:m,variable_num_usages_in_file:a?.get(n.node_id)??0,variable_num_usages_in_containing_subtree:d?.get(n.node_id)??0,elapsed_seconds_since_last_insertions:(0,p.y)(n.node_id)},b=!1;if("LIBRARY"===s.subscriptionStatus){let e=s.library_key.toString();b=w.get(e)?.has(n.node_id)??!1}if(b)O.push(y);else{let e=function(e,r){return e.color_value&&r.color_value?(0,l._W)(e.color_value,r.color_value):e.number_value&&r.number_value?Math.abs(e.number_value-r.number_value):h}(m,f);R.push({candidate:y,distance:e})}}return R.length>N&&R.sort((e,r)=>e.distance-r.distance),{data:[...O,...R.slice(0,N).map(e=>e.candidate)],timing:performance.now()-b}}),w=(0,u.n)(e=>setTimeout(()=>{e.filter(e=>"LIBRARY"===e.subscriptionStatus).forEach(e=>{(0,d.RI)(e)})},500))},31510:(e,r,n)=>{n.d(r,{Fs:()=>S,g$:()=>A});var a=n(848318),i=n(186606),o=n(768618),s=n(19180),l=n(382902),c=n(349048),d=n(989232),u=n(227276),p=n(182317),m=n(788903),_=n(720722),h=n(567434),g=n(21614),f=n(483656),E=n(985789),y=n(557167),b=n(813831);let v=(0,l.eU)({status:"unset"}),T=(0,l.eU)({status:"unset"}),I=(0,l.eU)({status:"unset"});function S(e,r,n,i,o){let s=(0,a.useRef)((0,p.g)()),l=(0,E.Px)();return(0,a.useMemo)(()=>({suggestionType:n,entryPoint:r,property:e,modeContext:l,sessionId:s.current,queryId:"",currentColor:o,currentFloat:i}),[s,l,e,r,n,i,o])}function A({variables:e,variableSets:r,subscribedLibraries:n,variableRerankingData:E,fileKey:S,orgId:A}){let w=(0,a.useMemo)(()=>!!E.sessionId,[E]),C=function(e,r){let n=(0,g.uQ)(),[i,o]=(0,l.fp)(v);return(0,a.useEffect)(()=>{if(!r){o({status:"unset"});return}return o({status:"loading"}),(0,y.JC)(n,e).then(({data:e,timing:r})=>{o({status:"loaded",data:e,timing:r})}).catch(e=>{console.error("Error computing variable consumption:",e),o({status:"error",error:e})}),()=>{o({status:"unset"})}},[n,o,e,r]),i}(E,w),N=(0,c.k9)(()=>w?r.map(e=>e):[],[r,w]),L=(0,c.k9)(()=>w?e.map(e=>e):[],[e,w]),O=(0,c.k9)(()=>w?n.map(e=>e.libraryKey):[],[n,w]);!function(e,r,n){let[i,o]=(0,l.fp)(T),c=(0,a.useMemo)(()=>(0,y.UN)(e),[e]);(0,a.useEffect)(()=>(n?(o({status:"loading"}),(0,s.k)().aip_flower_garden_shadow_reranker&&(0,s.k)().aip_flower_garden_shadow_reranker_top_k&&c)?(0,u.w0)(b.Cg).then(e=>{let n=e.get(b.wj,b.hs);return(0,f.kA)({library_keys:r,entity_type:"VARIABLE",entity_value_type:c,max_results_per_library:n})}).then(e=>{o({status:"loaded",data:e,timing:0})}).catch(e=>{console.error("Error fetching top k assets",e),o({status:"error",error:e})}):o({status:"loaded",data:new Map,timing:0}):o({status:"unset"}),()=>{o({status:"unset"})}),[r,c,o,n])}(E.suggestionType,O,w);let R=function(e,r,n,i){let o=(0,l.md)(v),c=(0,l.md)(T),[d,u]=(0,l.fp)(I);(0,a.useEffect)(()=>{if(!(0,s.k)().aip_flower_garden_shadow_reranker||!i)return;let e=(0,y._t)(r);return()=>clearTimeout(e)},[r,i]);let p=(0,a.useMemo)(()=>(0,s.k)().aip_flower_garden_shadow_reranker?e.filter(_.XN).map(e=>e.node_id):[],[e]),h=(0,a.useMemo)(()=>n.modeContext??{},[n]),g=(0,a.useMemo)(()=>(0,y.O0)(n),[n]),f=(0,m.qd)(p,h);return(0,a.useEffect)(()=>{if(!i){u({status:"unset"});return}if("loaded"===o.status&&"loaded"===c.status&&p.length)return u({status:"loading"}),(0,y.Mv)(e,r,h,o.data.variableConsumptionInDocument,o.data.variableConsumptionInSubtree,f,n.suggestionType,g,c.data).then(({data:e,timing:r})=>{u({status:"loaded",data:e,timing:r})}).catch(e=>{console.error("Error computing reranker candidates:",e),u({status:"error",error:e})}),()=>{u({status:"unset"})}},[e,r,n,h,o,p,f,c,g,u,i]),d}(L,N,E,w),P=function(e,r){let n=(0,g.uQ)(),[i]=(0,l.fp)(v);return(0,a.useMemo)(()=>{if(!(0,s.k)().aip_flower_garden_shadow_reranker||!n||!r||!e||"loaded"!==i.status)return null;let a=performance.now(),l=(0,o.UN)().get(n);return l?{context:(0,y.cQ)(l,r,i.data.variableConsumptionInDocument,i.data.variableConsumptionInSubtree),timing:performance.now()-a}:null},[n,r,i,e])}(w,E?.property);(0,a.useEffect)(()=>{let e;if((0,s.k)().aip_flower_garden_shadow_reranker&&w&&"loaded"===C.status&&"loaded"===R.status&&P){switch(E.suggestionType){case i.rXF.COLOR:e="COLOR";break;case i.rXF.FLOAT:e="NUMBER"}e&&d.definedAnalyticsHandler.trackDefinedMetric("ai_productivity.variable_suggestion_context_collection_time",{loadTimeMS:R.timing+P.timing+C.timing,candidatesLoadTimeMS:R.timing,selectionContextLoadTimeMS:P.timing,variableConsumptionLoadTimeMS:C.timing,suggestionType:e})}},[C,R,P,E,w]),function({variableRerankingData:e,candidates:r,selectionContext:n,subscribedLibraryKeys:o,fileKey:l,orgId:c,isValidRerankingContext:d}){(0,a.useEffect)(()=>{if(!d||!(0,s.k)().aip_flower_garden_shadow_reranker||e.suggestionType===i.rXF.FLOAT&&!(0,s.k)().aip_flower_garden_shadow_number_reranker)return;let a=(0,y._e)(e?.suggestionType);if(!n||!a||"loaded"!==r.status||!e.sessionId||!e.modeContext||!e.entryPoint||!e.currentColor&&void 0===e.currentFloat)return;let u=(0,p.g)(),m={org_id:c?Number(c):void 0,entry_point:e.entryPoint,open_file_key:l??"",query_id:u,session_id:e.sessionId,candidates:r.data,current_value:(0,y.O0)(e),subscribed_library_keys:o,current_value_data_type:a,used_product_components_on_page:[],selection_context:n};e.queryId=u;try{h.D.recommendVariables(m)}catch{}},[r,l,o,e,n,c,d])}({candidates:R,selectionContext:P?.context??void 0,variableRerankingData:E,subscribedLibraryKeys:O,fileKey:S,orgId:A,isValidRerankingContext:w})}},439796:(e,r,n)=>{n.d(r,{A6:()=>eT,BJ:()=>eb,Cg:()=>ep,Eo:()=>W,Ev:()=>ey,Gc:()=>eh,H2:()=>Y,Ho:()=>Z,Jo:()=>et,L9:()=>eg,LC:()=>ei,Oj:()=>J,Ri:()=>X,TD:()=>ed,XC:()=>j,Yt:()=>Q,ZG:()=>K,bO:()=>eE,cp:()=>q,hy:()=>em,hz:()=>ee,jt:()=>ec,qy:()=>H,uk:()=>e_,wh:()=>$,xA:()=>eu});var a=n(430385),i=n(871043),o=n(673786),s=n(186606),l=n(19180),c=n(382902),d=n(317720),u=n(223926),p=n.n(u),m=n(239910),_=n.n(m),h=n(563304),g=n.n(h),f=n(149674),E=n.n(f),y=n(429958),b=n(157949),v=n(238462),T=n(757685),I=n(810503),S=n(271326),A=n(87148),w=n(303397),C=n(173592),N=n(4881),L=n(10082),O=n(231159),R=n(55116),P=n(720722),D=n(693964);let k=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),M=(0,c.eU)(e=>e(k).map(P.Rn)),F=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),x=(0,c.eU)(e=>e(F).map(P.Dt)),U=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),B=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),G=(0,c.eU)(e=>e(B).map(P.kz)),V=(0,c.eU)(e=>e(U).map(P.ZI));(0,c.eU)(e=>({..._()(e(x),e=>e.keyForPublish),..._()(e(M),e=>e.key)})),(0,c.eU)(e=>({..._()(e(G),e=>e.keyForPublish),..._()(e(V),e=>e.key)}));let H=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,c.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=_()(r.added.map(P.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,C.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),z=(0,c.eU)(e=>({...e(H),...e(eu)})),K=(0,c.Iz)(e=>(0,c.eU)(r=>r(H)[e]));(0,c.Iz)(e=>(0,c.eU)(r=>r(eu)[e]));let W=(0,c.Iz)(e=>(0,c.eU)(r=>r(z)[e])),j=(0,c.Iz)(e=>(0,N.Wh)(()=>(0,c.eU)(r=>{let n=r(W(e));if(!n||!(0,l.k)().ds_extended_collections)return{};let a=r(ef);if((0,P.GI)(n)){let a=r(j(n.backingVariableSetId)),o=r(eT(e)),s={};return Object.entries(a).forEach(([e,r])=>{s[e]={originVariableSetId:r.originVariableSetId,resolvedType:r.resolvedType,modeValues:Object.fromEntries(n.modes.map(e=>{if(!e.parentModeId)return(0,I.x1)("Mode in extended collection has no parent mode set","variableTableDataForVariableSetAtom",{mode:e,variable:r,variableSet:n},{reportAsSentryError:!0}),null;let a=r.modeValues[e.parentModeId];return a?[e.id,a]:((0,I.x1)("Parent mode value not found in backing variable collection","variableTableDataForVariableSetAtom",{parentModeId:e.parentModeId,variable:r,variableSet:n},{reportAsSentryError:!0}),null)}).filter(i.Vq)),modeValueOriginVariableSetId:Object.fromEntries(n.modes.map(e=>[e.id,n.backingVariableSetId]))}}),Object.values(o).forEach(r=>{let a=s[r.overriddenVariableID];if(!a){(0,I.x1)("Variable not found in backingVariableSet","variableTableDataForVariableSetAtom",{overriddenVariableID:r.overriddenVariableID,extensionVariableSetID:e,backingVariableSetID:n.backingVariableSetId,returnValue:s},{reportAsSentryError:!0});return}if(!r.overrideValues){(0,I.x1)("VariableOverride has no overrideValues","variableTableDataForVariableSetAtom",{override:r,extensionVariableSetID:e},{reportAsSentryError:!0});return}Object.entries(r.overrideValues).forEach(([e,r])=>{a.resolvedType=r.resolvedType,a.modeValues[e]=r,a.modeValueOriginVariableSetId[e]=n.node_id})}),s}{let e=a[n.node_id];return e?e.reduce((e,r)=>{let a={};return Object.keys(r.modeValues).forEach(e=>a[e]=n.node_id),{...e,[r.node_id]:{originVariableSetId:n.node_id,modeValues:r.modeValues,modeValueOriginVariableSetId:a,resolvedType:r.resolvedType}}},{}):{}}})));(0,c.Iz)(e=>(0,y.BV)(r=>n=>n(r({fileKey:e}))));let Y=(0,c.Iz)(e=>(0,c.eU)(r=>{let n={};for(let a of e)n[a]=r(R.o9k.Query({fileKey:a}));return n}),a.lu),$=(0,c.Iz)(e=>(0,c.eU)(r=>g()(_()(e),e=>r(R.BbB.Query({libraryKey:e})))),a.lu),q=(0,c.Iz)(e=>(0,y.eS)(r=>n=>n(r({fileKey:e}))));function X(e){return R.eHy.Query(e?{hubFileId:e}:null)}let J=(0,c.Iz)(e=>(0,c.eU)(r=>{let n={};for(let a of e)n[a]=r((0,b.he)(R.cmY)({variableCollectionKey:a}));return n}),a.lu),Z=(0,c.Iz)(e=>(0,c.eU)(r=>g()(_()(e),e=>r(R.Ipg.Query({libraryKey:e})))),a.lu),Q=(0,c.Iz)(e=>(0,c.eU)(r=>{let n={};for(let a of e)n[a]=r(R.jXq.Query({fileKey:a}));return n}),a.lu),ee=(0,c.Iz)(e=>(0,c.eU)(r=>{let n={};for(let a of e)n[a]=r(R.eHy.Query({hubFileId:a}));return n}),a.lu);function et(e){let r=g()(_()(e),()=>d.Qw.disabled());return(0,c.eU)(r)}let er=(0,c.eU)(e=>{let r=e(eE),n=e(D.TG),a=Object.values(r).filter(e=>!(0,A.lR)(e,n)).map(e=>e.key).sort();return e((0,y.a5)(a.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),en=(0,c.eU)(e=>{let r=e(eE),n=e(D.TG),a=(e(S.JB)?Object.values(r).filter(e=>(0,A.lR)(e,n)):[]).map(e=>e.key).sort().map(e=>({key:e})),i=(0,A.ku)(A.p9,a,e);return"loaded"!==i.status?{}:i.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),ea=(0,c.eU)(e=>({...e(er),...e(en)}),v.lQ),ei=(0,O.Pj)(ea,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),eo=(0,c.eU)(e=>{let r=[...new Set(Object.values(e(er)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort();return e((0,y.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},v.lQ),es=(0,c.eU)(e=>{let r=[...new Set(Object.values(e(en)).map(e=>e.data?.variable?.variableCollection.key).filter(i.Vq))].sort().map(e=>({key:e})),n=(0,A.ku)(A.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let a=(0,o.ey)(n.key);return{...e,[a]:r.result}},{})}),el=(0,c.eU)(e=>({...e(eo),...e(es)}),v.lQ),ec=(0,O.Pj)(el,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,c.eU)(e=>{let r=Object.keys(e(H));if(0!==r.length)return r[0]});let ed=(0,c.eU)(e=>Object.values(e(H))),eu=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,c.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=_()(r.added.map(P.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,C._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),ep=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,c.FZ)(e,(e,r)=>{if(r){if("added"in r)return r.added&&"map"in r.added||(0,I.x1)("variableChange is malformed, expected added to be an array","variableChange",{variableChange:r},{reportAsSentryError:!0}),{...e,..._()(r.added.map(P.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return E()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return E()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,C.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),em=(0,c.Iz)(e=>(0,c.eU)(r=>r(ep)[e]??null)),e_=(0,c.eU)(e=>Object.keys(e(ep)).map(r=>e(em(r))).sort((e,r)=>-(0,T.Ez)(e.sortPosition,r?.sortPosition))),eh=(0,c.eU)(e=>p()(e(e_),e=>e.variableSetId)),eg=(0,c.eU)(e=>p()(e(eE),e=>e.variableSetId)),ef=(0,c.eU)(e=>{let r=e(eh),n=e(eg);return{...r,...n}}),eE=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,c.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,..._()(r.added.map(P.ZI),e=>e.node_id)};if("deleted"in r)return E()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return E()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,C.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})();(0,c.Iz)(e=>(0,c.eU)(r=>r(eE)[e]??null));let ey=(0,c.Iz)(e=>(0,c.eU)(r=>r(ep)[e]??r(eE)[e]??null));function eb(e,r){let n=w.Y5.isReady(),a=new Map(Object.entries(r)),i=n&&e?s.CWU.getVariableResolvedValue(e,a):null,o=(0,c.eU)(i);return e&&(o.onMount=r=>{n||w.Y5.onReady().then(()=>{r(s.CWU.getVariableResolvedValue(e,a))});let i=(0,C.RW)(e,()=>{r(s.CWU.getVariableResolvedValue(e,a))});return()=>{i(),r(null)}}),o}let ev=(()=>{let e=(0,c.eU)({}),r=(0,c.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,..._()(r.added.map(P.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return E()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,C.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),eT=(0,c.Iz)(e=>(0,c.eU)(r=>{let n=Object.values(r(ev)).filter(r=>r.variableSetId===e);return _()(n,e=>e.overriddenVariableID)}))},709393:(e,r,n)=>{n.d(r,{D:()=>I,NF:()=>S,oz:()=>w});var a=n(848318),i=n(186606),o=n(553547),s=n(286536),l=n(19180),c=n(382902),d=n(989232),u=n(476254),p=n(63163),m=n(865114),_=n(810503),h=n(353231),g=n(965686),f=n(162394),E=n(730143),y=n(125761),b=n(439796),v=n(331234);function T(e){switch(e){case i.rXF.BOOLEAN:return"boolean";case i.rXF.FLOAT:return"float";case i.rXF.STRING:return"string";case i.rXF.COLOR:return"color";case i.rXF.MAP:return"map";case i.rXF.SYMBOL_ID:return"symbol_id";case i.rXF.FONT_STYLE:return"font_style";case i.rXF.TEXT_DATA:return"text_data";case i.rXF.IMAGE:return"image";case i.rXF.LINK:return"link";case i.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case i.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}function I({isLoading:e,eventName:r}){let n=(0,m.ZC)(e),i=(0,a.useRef)();(0,p.h)(()=>{i.current=performance.now()});let o=function(e){let r=(0,a.useRef)(!1);return function(){r.current||(e(),r.current=!0)}}(function(){if(i.current){let e=performance.now()-i.current;d.definedAnalyticsHandler.trackDefinedMetric(r,{loadTimeMs:e})}});n&&!e&&o()}function S({resolvedType:e}){let r=(0,E.tS)(),n=(0,y.TA)();(0,p.h)(()=>{r&&n&&d.definedAnalyticsHandler.trackDefinedEvent("variables.inline_creation_dialog_opened",{fileKey:r,userId:n,resolvedType:T(e)})})}function A(e){return"type"in e}function w(e,r,n){try{if(A(r)?r.type===i.Z_n.ALIAS:"ALIAS"===r.dataType){let d=A(r)?r.value:(0,s.dI)(r.value?.alias),p=A(r)?T(r.resolvedType):r.resolvedDataType,m=u.D.getState(),_=Object.keys(m.mirror.sceneGraphSelection),E=m.openFile?.key,y=m.user&&m.user.id,I=c.zl.get((0,b.Ev)(d)),S=I?.variableSetId?c.zl.get(b.Eo(I?.variableSetId))?.node_id:null,w=I?.variableSetId?c.zl.get(b.Eo(I?.variableSetId))?.sortPosition:null,C=i.CWU.getSubscribedVariableInfo(d),N=(0,g.ZR)(I??(0,g.O8)(C),m.openFile),L=(0,f.X)(N),O=m.mirror.selectedStyleProperties.guid;O&&(_=[o.dI(O)]);let R=function(){if((0,l.k)().aip_flower_garden_design_logging&&i.mHF)return JSON.stringify(Object.fromEntries(i.mHF.getVariableSetConsumptionForDocument()))}(),P=(0,v.y)(d);for(let r of((0,v.v)(d),_)){var a;let o=function(e){if((0,l.k)().aip_flower_garden_design_logging&&i.mHF)return JSON.stringify(Object.fromEntries(i.mHF.getVariableSetConsumptionForHighestNodeContainer(e)))}(r);(0,h.ds)("ds_variable_reference_set",E,m,{userId:y,variable_id:d,collection_id:S,value_type:p?.toString().toUpperCase(),node_id:r,variable_field_id:e,is_style:!!O,is_shared:I?.subscriptionStatus==="SUBSCRIBED",library_key:N,partner_type:L,appleEulaAccepted:!!m.userFlags.apple_eula_accepted,attachmentSurfaceKey:n?.attachmentSurfaceKey,attachmentRecordingKey:n?.attachmentRecordingKey,previousValueVariableKey:n?.previousVariableKey,previousValueStyleLibraryKey:n?.previousStyleKey,hasVisiblePaintBelow:n?.hasVisiblePaintBelow,modeContext:(a=n?.modeContext)?JSON.stringify(Object.entries(a).map(([e,r])=>({variableSetKey:e,modeGuidOrMixed:r}))):null,variableSetConsumptionForSelection:o,variableSetConsumptionForDocument:R,sessionId:n?.sessionId,elapsedSecondsSinceLastInsertions:P,rerankerQueryId:n?.queryId,variable_collection_position:w},{forwardToDatadog:!0})}}else if(A(r)&&r.type===i.Z_n.FONT_STYLE){let n=r.value.asString??r.value.asFloat,a=u.D.getState(),s=Object.keys(a.mirror.sceneGraphSelection),l=a.openFile?.key,d=a.user&&a.user.id,p=c.zl.get((0,b.Ev)(n?.value)),m=p?.variableSetId?c.zl.get(b.Eo(p?.variableSetId))?.node_id:null,_=p?.variableSetId?c.zl.get(b.Eo(p?.variableSetId))?.sortPosition:null,E=i.CWU.getSubscribedVariableInfo(n?.value),y=(0,g.ZR)(p??(0,g.O8)(E),a.openFile),v=(0,f.X)(y),I=a.mirror.selectedStyleProperties.guid;for(let r of(I&&(s=[o.dI(I)]),s))(0,h.ds)("ds_variable_reference_set",l,a,{userId:d,variable_id:n?.value,collection_id:m,value_type:n?.resolvedType?T(n?.resolvedType).toUpperCase():void 0,node_id:r,variable_field_id:e,is_style:!!I,is_shared:p?.subscriptionStatus==="SUBSCRIBED",library_key:y,partner_type:v,appleEulaAccepted:!!a.userFlags.apple_eula_accepted,variable_collection_position:_},{forwardToDatadog:!0})}}catch(e){(0,_.x1)("variables","Could not log variable consumption",{exception:e},{reportAsSentryError:!0})}}},994140:(e,r,n)=>{n.d(r,{j$:()=>E});var a=n(848318),i=n(531788),o=n(469508),s=n(150934),l=n(851765);n(82433);var c=n(781239);n(720522);var d=n(967688),u=n(511067),p=n(24599),m=n(755668),_=n(379202),h=n(10201);function g({title:e,text:r,actions:n}){return a.createElement("div",{className:"x6s0dn4 x9f619 x78zum5 x5yr21d xl56j7k x15fnm84 xh8yej3 x87ps6o"},a.createElement("div",{className:"x6s0dn4 xl56j7k x78zum5 xdt5ytf x167g77z"},a.createElement("div",{className:"x1va8c73 x2b8uid x1vzchgk x123g5w4 xt5tia6 xyw1wl8"},e),a.createElement("div",{className:"x1va8c73 x2b8uid x1n0bwc9 x17akokd x1qxcl5b xno9bf3 x1betce5"},r),a.createElement("div",{className:"x1xmf6yo x1hq5gj4"},n??null)))}function f({setRenamingVariableID:e,variableSetID:r,selectedGroup:n,groups:o,recordingKey:l,setSelectedVariableID:p}){let _=a.useRef(null),{showing:h,toggle:g,hide:f}=(0,u.BK)(m.oU);return a.createElement(a.Fragment,null,e&&a.createElement(i.$n,{iconPrefix:a.createElement(s.x,null),"aria-label":(0,d.t)("variables.authoring_modal.create_variable_button_label"),ref:_,variant:"primary",onClick:()=>g(),recordingKey:c.Pt(l,"createVariableButton")},(0,d.t)("variables.authoring_modal.create")),e&&h&&_.current&&a.createElement(m.mw,{targetRect:_.current.getBoundingClientRect(),variableSetID:r??null,selectedGroup:n,groups:o,recordingKey:l,setRenamingVariableID:e,onClose:f,setSelectedVariableID:p,insertVariableBetweenIDs:null}))}function E({groups:e,mayShowCreateVariableAction:r,clearFilterState:n,clearQuery:s,recordingKey:c,selectedGroup:u,setRenamingVariableID:m,variableSetID:E,setSelectedVariableID:y,hasVariableSets:b,tableRowItemsEmptyReason:v}){return v===_.I9.filterApplied?a.createElement(g,{title:(0,d.t)("variables.authoring_modal.no_variables_match_filters"),text:(0,d.t)("variables.authoring_modal.no_variables_match_filters.text"),actions:a.createElement(i.$n,{iconPrefix:a.createElement(l.w,null),onClick:n,variant:"secondary"},(0,d.t)("variables.authoring_modal.no_variables_match_filters.clear_filters"))}):v===_.I9.queryApplied?a.createElement(g,{title:(0,d.t)("variables.authoring_modal.no_variables_match_search"),text:(0,d.t)("variables.authoring_modal.no_variables_match_search.text"),actions:a.createElement(i.$n,{iconPrefix:a.createElement(l.w,null),onClick:s,variant:"secondary"},(0,d.t)("variables.authoring_modal.no_variables_match_search.clear_search"))}):a.createElement(g,{title:b?(0,d.t)("variables.authoring_modal.no_variables_in_collection"):(0,d.t)("variables.authoring_modal.no_variables_in_file"),text:a.createElement(a.Fragment,null,(0,d.t)("variables.authoring_modal.empty_state_text")," ",a.createElement(o.N,{href:"https://help.figma.com/hc/articles/15339657135383-Guide-to-variables-in-Figma",trusted:!0,newTab:!0},(0,d.t)("variables.authoring_modal.empty_state_learn_more_link")," \u2192")),actions:r&&(0,h.H)(e)&&(0,p.hO)(e)?a.createElement(f,{setRenamingVariableID:m,variableSetID:E,selectedGroup:u,groups:e,recordingKey:c,setSelectedVariableID:y}):null})}},579879:(e,r,n)=>{n.d(r,{t:()=>N});var a=n(848318),i=n(301168),o=n(812295),s=n(779367),l=n(410725),c=n(748008),d=n(133318),u=n(297638),p=n(178806),m=n(967688),_=n(744577),h=n(925085),g=n(31898),f=n(679617),E=n(740495),y=n(957872),b=n(863270),v=n(55116),T=n(253332),I=n(446951),S=n(414607),A=n(982963),w=n(376298);function C(e){let r=(0,i.wA)(),n=(0,A.$Y)(e.teamId),g=void 0===e.canEditTeam?n:e.canEditTeam,b=(0,l.Rs)(v.Aqu,{teamId:e.teamId}),I=(0,E.E9)();if("loaded"!==b.status||b.data.team?.stripeCustomerId.status!=="loaded")return null;let S=!!(0,c.oA)(b.data.team?.stripeCustomerId),C=[],N=(0,c.oA)(b.data.team?.allProjects),L=N?.length??0,O=N?.filter(e=>e.isViewOnly).length??0,R=N?.filter(e=>e.isInviteOnly).length??0,P=b.data.team?.teamFileCounts?.designFileCount??0,D=b.data.team?.teamFileCounts?.whiteboardFileCount??0,k=parseInt(b.data.team?.teamFileCounts?.slideFileCount??"0",10),M=(e,r,n)=>{e>r&&C.push({limitExceededType:n,limitExceededCount:e-r})};if(I?M((0,c.oA)(b.data.team?.teamFileCounts?.totalFileCount)??0,T.WW,"global_file_count"):(M(P,T.WW,"design_file_count"),M(D,T.WW,"whiteboard_file_count"),M(k,T.WW,"slides_file_count")),M(L,T.Wf,"total_project_count"),L<=T.Wf&&(M(O,T.h,"view_only_project_count"),M(R,T.PX,"invite_only_project_count")),0===C.length)return null;let F=g?(0,m.tx)("locked_team.card.title"):(0,m.tx)("locked_team.card.title_viewer"),x=g?S?(0,m.tx)("locked_team.card.editor_previously_paid_description"):(0,m.tx)("locked_team.card.editor_previously_on_trial_description"):(0,m.tx)("locked_team.card.view_only_description"),U=g?S?(0,m.tx)("locked_team.card.editor_previously_paid_cta"):(0,m.tx)("locked_team.card.editor_previously_on_trial_cta"):null,B=e=>{switch(e.limitExceededType){case"design_file_count":return(0,m.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,m.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"slides_file_count":return(0,m.tx)("locked_team.card.move_figma_slides_files",{numSlidesFiles:e.limitExceededCount});case"global_file_count":return(0,m.tx)("locked_team.card.move_files",{numFiles:e.limitExceededCount});case"total_project_count":return(0,m.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return a.createElement(h.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},a.createElement("div",{className:u.s.flex.justifyBetween.wFull.$},a.createElement("div",{className:u.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},a.createElement(o.s,{className:w.K})),!!e.onClose&&a.createElement(d.Jn,{onClick:e.onClose})),a.createElement("div",{className:u.s.font14.fontSemiBold.lh24.$},F),a.createElement("div",{className:u.s.font13.lh24.$},x),g&&a.createElement("div",{className:u.s.wFull.bb1.bSolid.$,style:_.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},C.map(e=>a.createElement("div",{key:e.limitExceededType,className:u.s.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:_.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},a.createElement(s.U,{className:u.s.minW24.$}),a.createElement("div",{className:u.s.font11.lh16.$},B(e))))),!!U&&a.createElement(p.Ih,{onClick:()=>r(f.WX({teamId:e.teamId})),variant:"primary",trackingProperties:{teamId:e.teamId,trackingDescriptor:S?y.c.UPGRADE_TO_PROFESSIONAL:y.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},U))}let N=(0,I.Ju)(function(e){let r=(0,i.wA)();return a.createElement(S.aF,{size:500},a.createElement(b.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},a.createElement(C,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},788523:(e,r,n)=>{n.d(r,{A:()=>o});var a=n(848318),i=n(967688);function o({styles:e,props:r,Event:{onSignUpClick:n,onLogInClick:o},Component:{ModalCloseButton:s,BrandButton:l,ButtonSecondaryTracked:c,Svg:d}}){return a.createElement(a.Fragment,null,a.createElement(s,{...r}),a.createElement("div",{className:e.graphic},r.icon&&a.createElement(d,{svg:r.icon,useOriginalSrcFills_DEPRECATED:!0})),a.createElement("div",{className:e.header},r.headerText),a.createElement("div",{className:e.subHeader},(0,i.tx)("community.logged_out.sign_up_modal_body")),a.createElement(l,{type:"submit",className:e.primaryWideButton,onClick:n},(0,i.tx)("community.signed_out_modal.sign_up")),a.createElement(c,{className:e.logInButton,onClick:o},(0,i.tx)("community.signed_out_modal.log_in")))}},790873:(e,r,n)=>{n.d(r,{S:()=>g});var a=n(848318),i=n(301168),o=n(264478),s=n(345964),l=n(967688),c=n(952039),d=n(966936),u=n(229511),p=n(446951),m=n(299946),_=n(414607),h=n(318500);function g(e){let{profileId:r,profileHandle:n,emptyStateText:p}=e,_=(0,i.wA)(),[g,f]=a.useState([]),[E,y]=a.useState(!1);a.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},v=(e,r)=>{b(e,r),_(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?I(e):T(e)}}}))},T=r=>{_(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!0)}))},I=r=>{_(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!1)}))},S=g&&g.length>0;if(!p&&!S)return a.createElement(a.Fragment,null);if(E)return a.createElement(s.kt,null);let A=S?a.createElement(a.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):a.createElement(a.Fragment,null,p," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:a.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),w=a.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},a.createElement("div",{className:h.tB},g.map(e=>a.createElement(m.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?a.createElement(o.nR,{onClick:I.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):a.createElement(o.$$,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return a.createElement(a.Fragment,null,a.createElement("div",{className:h.bV},(0,l.tx)("settings_tab.community_commenters_label")),A,w)}(0,p.Ju)(function(e){return a.createElement(_.aF,{className:h.Iy,popStack:!0},a.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},714351:(e,r,n)=>{n(848318),n(461979),n(720522),n(967688),n(67257),n(900003),n(324747),n(17753)},729365:(e,r,n)=>{n.d(r,{K:()=>I});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(658029),d=n(531788),u=n(755603),p=n(656329),m=n(401970),_=n(967688),h=n(925085),g=n(87463),f=n(792533),E=n(31898),y=n(794025),b=n(17753),v=n(446951),T=n(908408);let I=(0,v.Ju)(function(e){let{localPlugin:r}=e,n=(0,i.wA)(),v=o.hS({open:e.open,onClose:e.onClose}),{error:I}=r;if(!I)return null;let S=(0,y.M)(),A=!!S?.isCompatibleWith({desktopVersion:80}),w=p.Ay.mac?(0,_.tx)("universal_insert.show_in_finder"):(0,_.tx)("universal_insert.show_in_explorer");return a.createElement(s.bL,{manager:v,width:"md"},a.createElement(l.vo,null,a.createElement(l.Y9,null,a.createElement(l.hE,null,(0,_.t)("universal_insert.manifest_error_title"))),a.createElement(l.nB,null,a.createElement(h.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start"},a.createElement(h.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},a.createElement(g.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},I.text)),a.createElement(c.K,{onClick:()=>{n(f.lW({stringToCopy:I.text}))},"aria-label":(0,_.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,_.t)("inspect_panel.copy")}},a.createElement(m.U,{svg:T.A},a.createElement(u.a,null))))),a.createElement(l.wi,null,a.createElement(l.jk,null,a.createElement(d.$n,{onClick:()=>n(E.Lo()),variant:"secondary"},(0,_.tx)("universal_insert.cancel")),a.createElement(d.$n,{onClick:()=>{A?S?.openExtensionManifest(r.localFileId):S?.openExtensionDirectory(r.localFileId)},variant:"primary"},A?(0,_.tx)("universal_insert.edit_manifest"):w)))))},"DevelopmentResourceErrorModal")},881457:(e,r,n)=>{n.d(r,{xY:()=>u});var a=n(848318);n(301168),n(536384),n(264478);var i=n(720522),o=n(967688);n(80100);var s=n(17753),l=n(522242),c=n(267849),d=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(d||{});function u(){return a.createElement("div",{className:l.QW,"data-tooltip-type":s.Ib.TEXT,"data-tooltip":(0,o.t)("community.buyer.update_payment_info_to_retain_access")},a.createElement(i.B,{svg:c.A}))}},755063:(e,r,n)=>{n.d(r,{E0:()=>o,wR:()=>s});var a=n(410441);n(967688),n(645445);var i=n(27776);(0,a.hG)(i.BuT),(0,a.hG)(i.yUQ),(0,a.hG)(i.XaD),(0,a.hG)(i.fWT),(0,a.hG)(i.nnJ);let o=(0,a.hG)(i.tui),s=(0,a.hG)(i.i_6)},411067:(e,r,n)=>{n(848318),n(656329),n(781239),n(979890),n(720522),n(967688),n(17753)},930776:(e,r,n)=>{n(848318)},179222:(e,r,n)=>{n(848318),n(297638)},313434:(e,r,n)=>{n.d(r,{mk:()=>c});var a=n(848318);n(301168),n(382902);var i=n(410441);n(813009);var o=n(454805);n(900003),n(466930),n(834428),n(654574),n(652576),n(106358),n(730143),n(180294),n(125761),n(543177),n(922484),n(152545),n(431063),n(342463),n(764474),n(336004),n(925144);var s=n(755063),l=n(27776);function c(e,r){let n=(0,a.useRef)(null),i=(0,a.useRef)(!1);return r.every(e=>!!e)&&!i.current&&(n.current=e,i.current=!0),null!==n.current?n.current:e}(0,i.hG)(l.Yr1),(0,i.hG)(l.Eg1),new o.Mi(s.wR,s.wR+s.E0),a.createContext(null)},961687:(e,r,n)=>{n.d(r,{I:()=>C});var a=n(848318),i=n(891627),o=n(301168),s=n(773511),l=n(186606),c=n(536384),d=n.n(c),u=n(454805),p=n(230618),m=n(994924),_=n(967688),h=n(63443),g=n(303397),f=n(769782),E=n(125761),y=n(475166),b=n(17753),v=n(541731),T=n(839866),I=n(215533),S=n(357202),A=n(740623);function w({children:e,mini:r,user:n}){return r?a.createElement("div",{className:d()(A.HG,A.ET)},e):a.createElement("div",{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:d()(A.HG)},e)}function C({user:e,hideName:r,mini:n,searchQuery:i,triggeredFrom:s}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,p=(0,v.$L)(e.id,v.us),_=(0,T.LL)(d,e.name||e.handle||"",p),b=(0,E.TA)(),S=(0,I.b)(),C=(0,o.wA)(),P=a.useCallback(()=>{C(h.F9({currentUserId:b??void 0,storeInRecentsKey:y.$A.FigJam,item:{id:e.id,user:e,type:y.vt.FaceStamp}}))},[b,C,e]),{dragState:D,onInsertableResourcePointerDown:k}=(0,f.Z)({iconSrc:_,insertAction:r=>{let{dropPosition:n}=r,a=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,i=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),s=n.subtract(new u.Mi(a*o.x,i*o.y)).subtract(new u.Mi(5,5));(0,T.xG)(_,s.x,s.y,e.id,"drag",l.zkO.USER),P(),S()},clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:S,resource:{id:e.id,name:e.name||"",img:_},triggeredFrom:s,searchQuery:i,mini:n});return n&&!_?null:a.createElement(w,{mini:n,user:e},_?a.createElement(m.n.recordableDiv,{className:A.RX,onPointerDown:k},a.createElement(O,{stampImageUrl:_,username:e.handle||"",onClick:()=>{let r=g.Y5.getViewportInfo();(0,T.xG)(_,r.offsetX,r.offsetY,e.id,"click",l.zkO.USER),P(),S()},dragging:null!==D,mini:n}),a.createElement(R,{dragState:D,imageUrl:_}),!r&&a.createElement(L,{username:e.name||e.handle||""})):a.createElement(a.Fragment,null,a.createElement(N,{mini:n}),!r&&a.createElement(L,{username:""})))}function N({mini:e}={}){return a.createElement("div",{className:d()(A.HG,{[A.ET]:e,[A.M4]:!e})},a.createElement("div",{className:d()(A.eP,A.iE)}),!e&&a.createElement("div",{className:d()(A.t$,A.OP)}))}function L({username:e}){return a.createElement("div",{title:e,className:A.OP},e)}function O(e){return a.createElement(s.E,{className:A.RT,recordingKey:"facestamp",onClick:e.onClick,htmlAttributes:{"data-testid":`facestamp-${e.username}${e.mini?"-mini":""}`}},a.createElement(p.oW,{draggable:!1,src:e.stampImageUrl,className:d()(A.iE,{[A.Jy]:e.dragging,[A.dG]:e.mini}),alt:(0,_.t)("whiteboard.face_stamps.aria_label",{userName:e.username})}))}function R(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=g.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,i.createPortal)(a.createElement(p.oW,{alt:"",className:d()(S.$J,{[S.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},284425:(e,r,n)=>{n.d(r,{qK:()=>c});var a=n(848318),i=n(301168),o=n(924476),s=n(730143),l=n(656320);function c(){let e=(0,i.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!s.q5()?.org,r=(0,i.d4)(e=>(0,l.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return a.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(475166)},66646:(e,r,n)=>{n(848318)},620803:(e,r,n)=>{n.d(r,{Yx:()=>E});var a=n(848318),i=n(301168),o=n(186606),s=n(320953);n(781239),n(994924);var l=n(967688);n(495105);var c=n(31898);n(63443),n(7148),n(848751),n(534619),n(431063),n(475166),n(930776),n(313434),n(66646),n(215533);var d=n(130953),u=n(760641),p=n(446951),m=n(175393),_=n(620958),h=n(770360);let g="delightful-toolbar-media-button",f="InsertMediaModal";function E(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e),n=()=>{s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r))};return{insertToolWithDragAction:e=>{let{dropPosition:a,isClick:i}=e;i?n():s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,a.x,a.y))},insertToolOnClickAction:n}}(0,p.Ju)(function(){let e=(0,i.wA)(),r=(0,i.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=a.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:g},{initialModalPosition:p,modalPosition:E,setModalPosition:y}=(0,u.ts)(s,157,320),b=a.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:f}))},[e]),v=a.useCallback(e=>{y(e)},[y]),T=!E||!!p?.equals(E);return(a.useEffect(()=>{let e=e=>{let r=n.current?.getEl(),a=(0,d.Tc)(g);if(!r||!a)return;let i=r.contains(e.target),o=a.contains(e.target);!T||i||o||b()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[b,T]),p)?a.createElement(m.vx,{ref:n,arrowPosition:m.F_.BOTTOM,arrowRelativeX:r?void 0:160,containerClassName:h.jT,dragHeaderOnly:!0,headerClassName:h.N1,initialPosition:p,initialWidth:320,isFigJam:!0,onClose:b,onDragEnd:v,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),smallArrow:!0,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title")},a.createElement("div",{className:h.hQ,"data-testid":"insert-media-modal"},a.createElement(_.q,{onSuccess:b}))):null},f),n(334676),n(23897),n(938627),n(98154)},842449:(e,r,n)=>{n.d(r,{zX:()=>l});var a=n(848318),i=n(301168),o=n(410725);n(652576),n(982588),n(760641);var s=n(55116);function l({extensionId:e}){let r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(s.BB3,{orgId:r});return a.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}n(324747)},709303:(e,r,n)=>{var a=n(848318);n(301168),n(19180),n(536384),n(540882),n(156974),n(755534),n(720522);var i=n(967688),o=n(718284);n(566726);var s=n(31898);n(863270),n(652576),n(982588),n(345121),n(760641),n(511067),n(7148),n(922484),n(20687),n(431063),n(324747);var l=n(446951);n(740224),n(335744),n(714351),n(881457),n(755063),n(179222),n(313434),n(215533);var c=n(414607);n(269100),(0,l.Ju)(function({dispatch:e}){return a.createElement(c.Rw,{cancelText:(0,i.t)("whiteboard.inserts.widget_development_error_modal_close"),confirmText:(0,i.t)("whiteboard.inserts.widget_development_import_manifest"),confirmationTitle:(0,i.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,i.t)("whiteboard.inserts.widget_development_error_modal_description"),disableClickOutsideToHide:!0,hideCancel:!1,hideOnConfirm:!1,onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},popStack:!0,size:"small"})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},870271:(e,r,n)=>{n.d(r,{ms:()=>l});var a=n(848318),i=n(301168);n(29188),n(156974),n(967688),n(718284),n(792533),n(31898),n(557993),n(652576),n(345121),n(760641),n(511067),n(180294),n(20687),n(324747),n(764474),n(562826),n(960306),n(740224),n(877686),n(698429);var o=n(442022),s=n(335744);function l(e){let r=(0,i.wA)();return a.createElement(o.j,{...e,dispatch:r,showPoint:!0,type:s.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}n(709303)},638166:(e,r,n)=>{n.d(r,{Kr:()=>c,Nh:()=>m,Zm:()=>p,kB:()=>_});var a=n(848318);n(301168),n(382902);var i=n(410441);n(461979),n(297638);var o=n(967688);n(19746),n(338104),n(601167),n(645445),n(328292),n(698429),n(411067),n(137686),n(255063);var s=n(27776);n(968638),(0,i.hG)(s.rDe);let l=(0,i.hG)(s.SKA);(0,i.hG)(s.rZj);let c=44;(0,i.hG)(s.wgS);let d=(0,i.hG)(s.iah),u=(0,i.hG)(s.LdP);(0,i.hG)(s.paq);let p=6;function m(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}a.createContext(null)},731889:(e,r,n)=>{n.d(r,{s:()=>a});var a=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(a||{}),i=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(i||{})},293493:(e,r,n)=>{n.d(r,{Kl:()=>u,e3:()=>d}),n(848318);var a=n(871043),i=n(562027),o=n(382902),s=n(677334),l=n(180495);let c=s.M4.Query({fetch:async()=>(await l.Z.getDefaultLibraries({editorType:"whiteboard_shapes"})).data.meta}),d=(0,o.eU)(e=>{let r=e(c({}));return r.data?new Set(r.data.files.map(e=>e.library_key).filter(a.Vq).map(i.l)):new Set});function u(){return(0,o.md)(d)}(0,o.eU)(e=>{let r=e(c({}));if(!r.data)return{};let n={};for(let e of r.data.files){let r=e.library_key;r&&(n[(0,i.l)(r)]=e.name)}return n})},137686:(e,r,n)=>{n(301168),n(696786),n(645445)},664068:(e,r,n)=>{n.d(r,{fD:()=>i});var a=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(a||{}),i=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(i||{})},7695:(e,r,n)=>{n.d(r,{bb:()=>eh});var a=n(848318),i=n(301168),o=n(469508),s=n(544405),l=n(271020),c=n(531788),d=n(19180),u=n(382902),p=n(536384),m=n.n(p),_=n(942744),h=n(63163),g=n(10855),f=n(615233),E=n(820780),y=n(781239),b=n(61503),v=n(454805),T=n(304756),I=n(256350),S=n(264478),A=n(740028),w=n(755534),C=n(720522),N=n(967688),L=n(952039),O=n(113752),R=n(792533),P=n(31898),D=n(533737),k=n(511067),M=n(209595),F=n(752181),x=n(259964),U=n(528356),B=n(446951),G=n(475005),V=n(120846),H=n(175393),z=n(326537),K=n(105972),W=n(734215),j=n(75936),Y=n(805095),$=n(230645),q=n(794786),X=n(237029);let J=(0,u.eU)(!1),Z=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),Q=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,N.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function ee(e){return!et(e)}function et(e){return"error"in e}let er={gid:"",name:"Pick an option"},en=(0,u.eU)(!0),ea=(0,u.eU)(""),ei=(0,u.eU)(""),eo=(0,u.eU)(""),es=(0,u.eU)(er),el=(0,u.eU)(er),ec=(0,u.eU)(!1);function ed(e){let[r,n]=a.useState([]),[s,l]=a.useState(new Map),c=(0,i.wA)();return a.useEffect(()=>{(async()=>{try{let{data:e}=await U.o.getMeta();n(e.meta.severity),l(Z(e.meta.product_area))}catch(e){c(L.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[c]),a.createElement(eu,{...e,descriptionLabel:(0,N.t)("bug_reporter.modal.description"),descriptionPlaceholder:(0,N.t)("bug_reporter.modal.description_placeholder"),endpoint:"/api/bug_reports",modalTitle:(0,N.t)("help_widget.menu.report_issue"),onError:e=>{c(L.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0}))},productAreaGroups:s,recordingKey:"bugReporter",severityOptions:r,shareFileLabel:(0,N.t)("bug_reporter.modal.include_filekey"),showTitle:!0,submitButtonText:(0,N.t)("bug_reporter.modal.submit"),successMessage:(0,N.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:a.createElement(o.N,{newTab:!0,href:"https://go/find-oncall",trusted:!0},(0,N.tx)("bug_reporter.notify_oncall"))}),supportsTaskUpdates:!0})}function eu({recordingKey:e,endpoint:r,severityOptions:n,productAreaGroups:o,supportsTaskUpdates:s=!1,showTitle:l=!0,descriptionLabel:c,descriptionPlaceholder:d,submitButtonText:p,modalTitle:m,shareFileLabel:y,onSubmit:b,onError:I,successMessage:S}){let w=(0,i.d4)(e=>e.multiplayer.allUsers.length),C=(0,i.d4)(e=>e.user?.id),R=(0,M._6)(),k=(0,i.wA)(),{windowInnerHeight:B}=(0,g.l)(),V=(0,G.v)(),[z,W]=(0,u.fp)(ea),j=(0,u.Xr)(ei),Y=(0,u.Xr)(eo),$=(0,u.Xr)(es),q=(0,u.Xr)(el),X=(0,u.Xr)(ec),[Z,ed]=(0,u.fp)(en),[eu,em]=a.useState(!1),[eh,eg]=a.useState(!1),ef=a.useRef(""),eE=a.useRef(""),ey=a.useRef(""),eb=a.useRef(""),ev=a.useRef(""),eT=a.useRef([]),eI=a.useRef(null),eS=a.useRef(0),eA=(0,u.Xr)(J),ew=()=>{k(P.Ce())},eC=(0,F.f)("seen_bug_reporter_modal");(0,h.h)(()=>{eC||k(D.b({seen_bug_reporter_modal:!0})),eA(!0)});let eN=()=>U.o.getGetTask({taskGid:ef.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof T.Dr&&e.data?.message&&(r=e.data.message),k(L.F.enqueue({message:r,error:!0}))}),eL=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await eR(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return eT.current=n.filter(et).map(({error:e})=>e),{attachments:n.filter(ee),errorMessages:n.filter(et).map(({error:e})=>e)}},eO=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await eR(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},eR=async(e,r)=>{let n=await U.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:a,fields:i,uuid:o}=n.data.meta,s=new FormData;for(let e in i)s.append(e,i[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(a,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eP=async(e,n,a,i,o,c,d,u)=>{eg(!0),eb.current=e.substring(0,250),ev.current=n,k(L.F.enqueue({type:"bug-reporter-submitting",message:(0,N.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:O.zX.SPINNER})),k(L.F.enqueue({type:"bug-reporter-submitting-long",message:(0,N.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:O.zX.SPINNER}));let p={env:(0,f.tl)().cluster_name,user_agent:navigator.userAgent,view:R.view,user_id:C,org_id:(0,f.tl)().org_id,tracking_session_id:(0,f.tl)().tracking_session_id,release_commit:(0,f.tl)().release_manifest_git_commit,device_info:(0,E.l)(),num_people_in_file:w,datadog_rum_session_id:_.Tf.sessionId?`http://go/dd/rum/session/${_.Tf.sessionId}`:void 0};"fullscreen"===R.view?(p.editor_type=(0,x.Bu)(R.editorType),o&&(p.file_key=R.fileKey,p.url=window.location.href)):p.url=window.location.href;let m={title:l?e:void 0,severity:a.gid,product_area:i.gid,description:n,metadata:p,is_performance_issue:d},h=[eL(c),eO(u)],[g,y]=await Promise.all(h);g.attachments.length>0&&(m.attachments=g.attachments),y.attachments.length>0&&(m.profileUuid=y.attachments[0].uuid),(g.errorMessages.length||y.errorMessages.length)&&(eT.current=[...g.errorMessages,...y.errorMessages]);try{let e;if(!s||Z?(e=await T.Ay.post(r,m),eE.current=e.data.meta.task_url,ef.current=e.data.meta.task_gid):e=await T.Ay.put(`${r}/update_task`,{...m,task_gid:Q(z)}),e.status>=200&&e.status<300)k(L.F.dequeue({matchType:"bug-reporter-submitting"})),k(L.F.dequeue({matchType:"bug-reporter-submitting-long"})),eE.current=e.data.meta.task_url,ef.current=e.data.meta.task_gid,Z||(ey.current=e.data.meta.slack_url),eS.current=eI.current?.getCurrentContentSize()?.y||0,em(!0),X(!0),eg(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){k(L.F.dequeue({matchType:"bug-reporter-submitting"})),k(L.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof T.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),I?.(e),eg(!1)}},eD=async e=>{ef.current=e,ed(!1);let r=await eN();r&&(j(l?r.meta.title:""),Y(r.meta.description),$(r.meta.severity??er),q(r.meta.product_area??er))};return a.createElement(H.vx,{ref:eI,title:m,initialPosition:(()=>{let e=V?A.lc:A.Ug,r=A.lc;return eu&&(r=B-(eS.current+H.uF)-A.lc),new v.Mi(e,r)})(),initialConstraints:{x:"right",y:eu?"top":"bottom"},onClose:ew,recordingKey:e,headerClassName:K.yK,dragHeaderOnly:!0},eu?a.createElement(e_,{recordingKey:e,isNewReport:!s||Z,taskUrl:eE.current,taskGid:ef.current,slackUrl:ey.current,title:l?eb.current:void 0,description:ev.current,submissionErrorMessages:eT.current,successMessage:S}):a.createElement(ep,{attachFromTask:s?eD:void 0,clearForm:()=>{ed(!0),j(""),Y(""),q(er),$(er),ef.current="",W("")},descriptionLabel:c,descriptionPlaceholder:d,isNewReport:!s||Z,isSubmitting:eh,onClose:ew,onSubmit:b,productAreaGroups:o,recordingKey:e,selectedView:R,severityOptions:n,shareFileLabel:y,showTitle:l,submitButtonText:p,submitReport:eP,supportsTaskUpdates:s}))}function ep(e){let r=e.recordingKey,n=e.isPerformanceIssue??!1,o=(0,k.Um)(),p=(0,i.wA)(),_=(0,b.Av)(),{windowInnerHeight:f}=(0,g.l)(),[E,v]=(0,u.fp)(ea),[T,O]=(0,u.fp)(ei),[R,P]=(0,u.fp)(eo),[D,M]=(0,u.fp)(es),[F,x]=(0,u.fp)(el),[U,B]=(0,u.fp)(ec),[G,j]=a.useState(!0),[Y,q]=a.useState(!1),[X,J]=a.useState(!1),[Z,ee]=a.useState([]),[et,en]=a.useState(void 0),ed=a.useId(),eu=a.useId(),ep=f-(_+H.uF+A.Ug)-A.lc;(0,h.h)(()=>{!0===U&&(e_(),B(!1))});let e_=()=>{j(!0),ee([]),e.clearForm()},eh=a.useCallback(()=>!e.isSubmitting&&!!R.trim()&&(!e.showTitle||!!T.trim())&&(!e.isNewReport||(!e.severityOptions||!!D.gid)&&(!e.productAreaGroups||!!F.gid)),[R,e.isNewReport,e.isSubmitting,e.severityOptions,e.productAreaGroups,e.showTitle,F.gid,D.gid,T]),eg=r=>{if(r)try{let n=Q(r);e.attachFromTask?.(n)}catch(e){p(L.F.enqueue({message:`${e}`,error:!0}))}},ef=y.AF(y.Pt(r,"link-input"),"change",e=>{let r=e.target.value;v(r),""===r&&e_()}),eE=y.AF(y.Pt(r,"title-input"),"change",e=>{O(e.target.value)}),ey=y.AF(y.Pt(r,"productAreaSearch"),"change",e=>{eR(e.target.value),""===e.target.value&&x(er)}),eb=y.AF(y.Pt(r,"description-input"),"change",e=>{let r=e.target.value;P(r),n&&O(r)}),ev=y.qP(y.Pt(r,"severity-input")??"","change",e=>{M(e)}),eT=y.qP(y.Pt(r,"product-area-input")??"","change",e=>{x(e),eR("")}),eI=a.useCallback(e=>{let r=[],n=[];for(let a of e)if(a.size>0x3200000)n.push(a.name);else{let e=URL.createObjectURL(a);r.push({fileContent:a,url:e,name:a.name,type:a.type})}if(n.length>0){let e=`Error: files could not be attached (over 50MB limit): [${n.join(", ")}].`;console.error(e),p(L.F.enqueue({error:!0,message:e}))}return r},[p]),eS=e=>{if(e.files.length>0){let r=eI([...e.files]);ee(e=>[...e,...r])}q(!1)},eA=y.AF(y.Pt(r,"include-filekey-input"),"change",e=>{j(e.currentTarget.checked)}),ew=a.useCallback(()=>{eh()&&(e.submitReport(T,R,D,F,G,Z,n,et),e.onSubmit?.())},[Z,eh,R,G,et,e,F,D,T,n]),eC=y.of(r,"submit",e=>{e.preventDefault(),ew()}),eN=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?ew():("description"!==r&&e.preventDefault(),"asanaInput"===r&&eg(E),"productAreaSearch"===r&&J(!0))),"Escape"===e.key&&n&&n.blur()},eL=y.v_(y.Pt(r,"asanaInput"),"keydown",e=>{eN(e,"asanaInput")}),[eO,eR]=a.useState("");return a.createElement(I.Y,{className:m()(Y&&K.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{q(!0)},onTargetDragLeave:()=>{q(!1)},onTargetDrop:e=>eS(e)},Y&&a.createElement("div",{className:K.$1},a.createElement(C.B,{svg:W.A}),(0,N.tx)("bug_reporter.drop_attachments")),a.createElement(w.P,{maxHeight:ep,hideScrollbar:Y},a.createElement("form",{onSubmit:eC,onPaste:e=>{if(e.clipboardData.files.length>0){let r=eI([...e.clipboardData.files]);ee(e=>[...e,...r])}},className:m()(K.yl,Y&&K.vw)},!e.isPerformanceIssue&&e.supportsTaskUpdates&&a.createElement("div",{className:K.uu},a.createElement(s.J,{className:K.y8},(0,N.tx)("bug_reporter.asana_hint")),a.createElement(S.ks,{className:K._Z,placeholder:(0,N.t)("bug_reporter.modal.asana_link_placeholder"),value:E,onChange:ef,onPaste:e=>{let r=e.clipboardData.getData("text");try{Q(r),eg(r)}catch{}},onKeyDown:eL,maxLength:150})),e.showTitle&&a.createElement("div",null,a.createElement(s.J,{className:K.Pf},(0,N.tx)("bug_reporter.modal.title")),a.createElement(S.ks,{className:K._Z,placeholder:(0,N.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eN(e,"title"),value:T,onChange:eE,maxLength:150})),e.severityOptions&&a.createElement("div",null,a.createElement(s.J,{htmlAttributes:{id:ed},className:K.Pf},(0,N.tx)("bug_reporter.modal.severity")),a.createElement(V.l6,{ariaLabelledBy:ed,id:"bug_reporter_select_severity",dispatch:p,property:D,onChange:ev,dropdownShown:o,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&a.createElement(V.c$,{key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>a.createElement(V.c$,{value:e,key:e.gid},e.name)))),e.productAreaGroups&&a.createElement("div",null,a.createElement(s.J,{htmlAttributes:{id:eu},className:K.Pf},(0,N.tx)("bug_reporter.modal.product_area")),a.createElement(S.ks,{className:K._Z,placeholder:(0,N.t)("bug_reporter.modal.search_filter_placeholder"),autoFocus:!0,onKeyDown:e=>eN(e,"productAreaSearch"),value:eO,onChange:ey,maxLength:150}),a.createElement(V.l6,{ariaLabelledBy:eu,dataTestId:"bug_reporter_select_product_area",dispatch:p,dropdownShown:o,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid},id:"bug_reporter_select_product_area",onChange:e=>{eT(e)},property:F,setTriggerDropdown:J,triggerDropdown:X},(r=>{if(!e.productAreaGroups)return[];if(0===e.productAreaGroups.size)return a.createElement(V.c$,{value:null,key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading"));let n=[];return e.productAreaGroups.forEach((e,i)=>{(r?e.filter(({name:e})=>e.toLowerCase().includes(r.toLowerCase())):e).length>0&&(n.push(a.createElement(V.c$,{value:null,key:i,isHeader:!0,disabled:!0},i)),e.forEach(e=>{(!r||e.name.toLowerCase().includes(r.toLowerCase()))&&n.push(a.createElement(V.c$,{value:e,key:e.gid,dataTestId:e.gid},e.name))}),n.push(a.createElement(V.sK,{key:`${i}.divider`})))}),n.pop(),n})(eO))),a.createElement("div",null,a.createElement(s.J,{className:K.Pf},e.descriptionLabel),a.createElement(S.ks,{className:[K._Z,K.Tg].join(" "),placeholder:e.descriptionPlaceholder,type:"textarea",value:R,onChange:eb,onKeyDown:e=>eN(e,"description"),maxLength:1e3})),a.createElement("div",null,a.createElement(s.J,{className:K.Pf},(0,N.tx)("bug_reporter.modal.images_and_videos")),a.createElement(em,{attachmentFiles:Z,setAttachmentFiles:ee,validateInputFiles:eI})),(0,d.k)().in_app_performance_profiling&&a.createElement("div",null,a.createElement(a.Fragment,null,a.createElement(s.J,{className:K.Pf},(0,N.tx)("bug_reporter.profiler.title")),a.createElement(z.J,{onProfilingFinish:e=>{en(e)}}),et&&(0,N.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&a.createElement(l.S,{checked:G,onChange:(e,{event:r})=>eA(r),label:a.createElement(s.J,null,a.createElement("div",{className:K.HI},e.shareFileLabel,a.createElement("div",{className:K.kB},a.createElement(C.B,{svg:$.A}),a.createElement("div",{className:K.dX},(0,N.tx)("bug_reporter.modal.include_filekey_info")))))}),a.createElement(S.e2,{className:K.GC},a.createElement(c.$n,{variant:"secondary",onClick:e.onClose},(0,N.tx)("bug_reporter.modal.cancel")),a.createElement(c.$n,{variant:"primary",type:"submit",disabled:!eh()},e.submitButtonText)))))}function em(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:i}=e,o=a.useRef(null),s=a.useCallback(()=>{o.current&&(o.current.value="")},[]),l=a.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=i([...e]);n(e=>[...e,...r]),s()},[s,i,n]),c=(e,r,a)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(a)};return a.createElement("div",{className:K.VL},r.length>0&&r.map((e,r)=>a.createElement("div",{className:K.Dq,key:r},a.createElement("div",null,e.type.startsWith("image")?a.createElement("img",{className:K.cR,alt:e.name,key:r,src:e.url}):a.createElement("video",{className:K.cR,key:r,src:e.url}),a.createElement("div",{className:K.Lw})),a.createElement("button",{onClick:n=>c(n,r,e.url)},a.createElement(C.B,{className:K.Yz,svg:X.A})))),a.createElement("label",{className:K.UM,htmlFor:"file-upload"},a.createElement(C.B,{svg:Y.A})),a.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function e_(e){let r=(0,i.wA)(),n=y.rf(y.Pt(e.recordingKey,"asana-link"),"click",()=>{});return a.createElement("div",{className:K.yl},a.createElement("div",{className:K.lM},(0,N.tx)("bug_reporter.success_message")),a.createElement("div",{className:K.U3},a.createElement("div",{className:K.AX},a.createElement(C.B,{svg:q.A}),a.createElement(o.N,{newTab:!0,onClick:n,href:e.taskUrl,trusted:!0},(0,N.tx)("bug_reporter.asana_link"))),a.createElement("div",{className:K.AX},a.createElement(C.B,{svg:j.A}),a.createElement(c.$n,{variant:"link",onClick:()=>{r(R.lW({stringToCopy:e.taskUrl}))}},(0,N.tx)("bug_reporter.copy_link")))),e.isNewReport&&a.createElement("div",null,e.successMessage),e.slackUrl&&a.createElement("div",null,a.createElement(o.N.Button,{href:e.slackUrl,newTab:!0},(0,N.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>a.createElement("p",{key:e},e.toString())))}let eh=(0,B.Ju)(e=>a.createElement(ed,{...e,recordingKey:"bugReporter"}),"BugReporterModal");(0,B.Ju)(e=>a.createElement(eu,{...e,descriptionLabel:(0,N.t)("bug_reporter.modal.description_label_performance"),descriptionPlaceholder:(0,N.t)("bug_reporter.modal.description_placeholder_performance"),endpoint:"/api/perf_reports",modalTitle:(0,N.t)("help_widget.menu.report_performance_issue"),onSubmit:()=>{_.Tf.optUserIntoDebugFlow()},recordingKey:"perfReporter",shareFileLabel:(0,N.t)("bug_reporter.modal.include_filekey_performance"),showTitle:!1,submitButtonText:(0,N.t)("bug_reporter.modal.submit_performance"),successMessage:(0,N.tx)("bug_reporter.success_perf_follow_along",{slackChannel:a.createElement(o.N,{newTab:!0,href:"https://go/slack-performance-reports",trusted:!0},"#performance-reports")}),supportsTaskUpdates:!1}),"PerfReporterModal")},850699:(e,r,n)=>{n.d(r,{l:()=>u});var a=n(848318),i=n(264478),o=n(967688),s=n(31898),l=n(890257),c=n(893704);function d(e){return a.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return a.createElement(l.XV,{...e,isCloseHidden:!0},a.createElement(d,{height:18}),e.children&&a.createElement("div",{className:c.Vw},e.children,a.createElement(d,{height:18})),a.createElement(p,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class p extends a.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return a.createElement("div",{className:this.props.className},a.createElement(i.JU,{className:c.Pf},a.createElement(i.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),a.createElement("div",{className:c.aV},!this.props.hideCancelButton&&a.createElement(i.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?a.createElement(i.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):a.createElement(i.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}p.displayName="CheckboxConfirmButtons"},978665:(e,r,n)=>{n.d(r,{WB:()=>R});var a=n(848318),i=n(162796),o=n(309488),s=n(93275),l=n(41099),c=n(250838),d=n(544405),u=n(382902),p=n(297638),m=n(66699),_=n(850426),h=n(967688),g=n(523669),f=n(87463),E=n(31898),y=n(863270),b=n(910398),v=n(854640),T=n(225258),I=n(446951),S=n(301781),A=n(187370);let w=(e,r)=>{switch(e){case T.M.SRGB:return{text:(0,h.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case T.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,h.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,h.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,h.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,h.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,h.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,h.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,h.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},C="user-color-profile",N={srgbOption:`${C}-srgb-option`,p3Option:`${C}-p3-option`,supportDetailsWarningIcon:`${C}-warning-icon`,supportDetailsInfoIcon:`${C}-info-icon`},L=(0,u.eU)(!1),O=(0,I.Ju)(function(e){let r=(0,v.jK)(),n=function(e){switch(e){case T.M.DEFAULT:case T.M.SRGB:return T.M.SRGB;case T.M.DISPLAY_P3:return T.M.DISPLAY_P3}}(r.colorProfilePreference),E=w(n,(0,b.Av)()),I=function(e){switch(e){case T.M.SRGB:return(0,h.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case T.M.DISPLAY_P3:return(0,h.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(n),[C,O]=(0,u.fp)(L);a.useEffect(()=>(C||O(!0),()=>{C&&((0,m.YQ)({id:"user_color_profile_modal_closed"}),O(!1))}),[O,C]);let R=i.hS(e);return a.createElement(y.fu,{name:"color_management_user_color_profile_modal"},a.createElement(o.bL,{manager:R,width:"md"},a.createElement(s.vo,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,(0,h.t)("fullscreen.color_management.user_color_profile_modal.title"))),a.createElement(s.nB,null,a.createElement("form",null,a.createElement(l.b,{legend:a.createElement(c.s,null,(0,h.tx)("fullscreen.color_management.user_color_profile_modal.options.label")),value:n,onChange:e=>{(0,v.it)({colorProfilePreference:e,id:r.id})}},a.createElement("div",{className:p.s.flex.flexRow.gap20.mb12.$},a.createElement(l.c,{value:T.M.SRGB,label:a.createElement(d.J,null,(0,h.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),htmlAttributes:{"data-testid":N.srgbOption}}),a.createElement(l.c,{value:T.M.DISPLAY_P3,label:a.createElement(d.J,null,(0,h.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value")),htmlAttributes:{"data-testid":N.p3Option}})))),a.createElement(f.E,{color:"secondary"},I),a.createElement("div",{className:A.jH}),a.createElement(f.E,{color:"secondary"},(0,h.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(_.Ph,{newTab:!0,trusted:!0,href:S.s},(0,h.tx)("rcs.rcs_shared.learn_more")),a.createElement("div",{className:A.jH}),a.createElement("div",{className:A.yF}),a.createElement("div",{className:A.cd},a.createElement(g.In,{icon:"warning"===E.type?"warning-32":"info-32",dataTestId:"warning"===E.type?N.supportDetailsWarningIcon:N.supportDetailsInfoIcon}),a.createElement("span",null,E.text,"warning"===E.type&&a.createElement(a.Fragment,null,a.createElement("span",{style:{whiteSpace:"pre"}}," "),a.createElement(_.Ph,{newTab:!0,trusted:!0,href:S.s},(0,h.tx)("rcs.rcs_shared.learn_more")))))))))},"user_color_profile_modal");function R(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,E.to)({type:O}))}}}},739657:(e,r,n)=>{n.d(r,{FF:()=>I,G$:()=>N});var a=n(848318),i=n(301168),o=n(264478),s=n(208245),l=n(967688),c=n(966936),d=n(31898),u=n(533737),p=n(660948),m=n(863270),_=n(991675),h=n(446951),g=n(125952),f=n(522258),E=n(414607),y=n(272179),b=n(52565),v=n(884682);let T={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var I=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(I||{});let S=(e,r)=>e.indexOf(r)>-1;function A({user:e,variations:r}){return a.createElement(a.Fragment,null,a.createElement(g.Ro,{className:v.my,entity:e,size:100}),S(r,0)&&a.createElement("div",null,a.createElement(y.eR,{backgroundColor:T.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),a.createElement(y.eR,{backgroundColor:T.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),a.createElement(y.eR,{backgroundColor:T.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),a.createElement(y.eR,{backgroundColor:T.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),a.createElement(y.eR,{backgroundColor:T.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),a.createElement("h1",{className:v.wx},e?.handle),a.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),a.createElement("h3",{className:v.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&a.createElement(a.Fragment,null,a.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function w(){return a.createElement(a.Fragment,null,a.createElement("h1",{className:v.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),a.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function C(){return a.createElement("div",{className:v.Il},a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),a.createElement(y.iF,null)),a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.be_respectful")),a.createElement(y.B1,null)),a.createElement("li",null,a.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:a.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),a.createElement(y.$E,null)))}let N="COMMUNITY_OPT_IN";(0,h.Ju)(function({userId:e,onFinish:r,variations:n}){let h=(0,i.d4)(e=>e.user);e=e||h?.id;let g=(0,i.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},T=S(n,0)&&1===n.length,I=S(n,0)?1===n.length?v.aq:v.Qc:v.FT;return a.createElement(E.aF,{className:I},a.createElement(m.fu,{name:_.e0.PROFILE_CREATE_MODAL,properties:{action:p.s0.COMMUNITY_OPT_IN,communityHubEntity:p.ZO.USERS,communityHubEntityId:e}},S(n,1)&&h?a.createElement(A,{user:h,variations:n}):a.createElement(w,null),S(n,0)&&a.createElement(C,null),a.createElement(s.Q9,{type:"submit",className:v.C5,onClick:()=>{y();let a=S(n,1);a&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),a||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!T&&a.createElement(o.tM,{className:v.IK,onClick:y},(0,l.tx)("general.cancel"))))},N)},327139:(e,r,n)=>{n.d(r,{E0:()=>f,G5:()=>p,I_:()=>d,Ij:()=>E,OP:()=>h,as:()=>g,eN:()=>u,em:()=>m,lq:()=>_,uF:()=>l});var a=n(410441),i=n(454805),o=n(27776),s=n(178043);let l=(0,a.hG)(o.Flg)+1,c=(0,a.hG)(o.tui),d=16,u=c,p=0,m=0,_=0;var h=(e=>(e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e))(h||{});function g(e){let r=e.includes("top"),n=e.includes("bottom"),a=e.includes("left"),i=e.includes("right");return r&&a||n&&i?s.YL:r&&i||n&&a?s.wX:r||n?s.cb:a||i?s.NZ:null}function f(e,r){let{left:n,top:a,right:o,bottom:s,lockAspectRatio:c}=r,d=r.maxWidth||1/0,u=r.maxHeight||1/0,p=r.minWidth||0,m=r.minHeight||0,_=o-n,h=s-a,g=_<=0||h<=0;if(c&&g)return null;if(c){let e=h-l,r=Math.min(d/_,(u-l)/e);r<1&&(_*=r,e*=r);let n=Math.max(p/_,m/e);n>1&&(_*=n,e*=n),h=e+l}else _=Math.max(_=Math.min(_,d),p),h=Math.max(h=Math.min(h,u),m);let f=n;e.left&&(f=o-_);let E=a;return e.top&&(E=s-h),{position:new i.Mi(f,E),width:_,height:h}}function E(e,r,n){let s=n?0:(0,a.hG)(o.LdP),c=new i.Mi(e.pageX,e.pageY).subtract(r.mousePosition);return r.elementPosition.add(c).clampY({y:s,height:window.innerHeight-l-s})}},964886:(e,r,n)=>{n.d(r,{K:()=>u});var a=n(848318),i=n(410441),o=n(781239),s=n(327139),l=n(27776),c=n(178043);let d=(0,i.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:i,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:_,setResizeDirections:h,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:i,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:p,hidden:_,mirrorResizeHorizontally:h=!1}){let g=a.useRef(),f=a.useRef(),E=a.useRef([]),y=a.useRef({x:0,y:0}),[b,v]=a.useState(!1),T=a.useCallback(()=>{v(!1),i(void 0),l([]),E.current=[],c?.()},[v,i,c,l]),I=a.useCallback(({x:r,y:a},i,o)=>{if(!n||!f.current||!e){v(!1);return}if(n&&0===o){T();return}let l=u||i,c={x:r-y.current.x,y:a-y.current.y};c.y=Math.max(c.y,d);let{left:p,top:_,right:g,bottom:E}=m(c,f.current,n,l,h);e({[s.OP.TOP]:_!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:p!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:p,top:_,right:g,bottom:E,lockAspectRatio:l})},[n,u,h,e,T]),S=a.useRef(T);S.current=T,(0,a.useEffect)(()=>()=>{n&&S.current()},[n]);let A=o.rf(p,"mouseup",T),w=o.rf(p,"mousemove",a.useCallback(e=>{if(_)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)I(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),i(e)}},[_,n,I,i,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),C=o.v_(p,"keydown",a.useCallback(e=>{e.shiftKey&&g.current&&I(g.current,!0)},[I])),N=o.v_(p,"keyup",a.useCallback(e=>{g.current&&I(g.current,e.shiftKey)},[I]));return(0,a.useEffect)(()=>{if(b)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",A),document.addEventListener("keydown",C),document.addEventListener("keyup",N),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",A),document.removeEventListener("keydown",C),document.removeEventListener("keyup",N)}},[b,w,A,C,N]),{startResizing:a.useCallback((e,n)=>{E.current=e;let a=r();f.current=a;let i={x:e.includes(s.OP.LEFT)?a.left:e.includes(s.OP.RIGHT)?a.right:n.x,y:e.includes(s.OP.TOP)?a.top:e.includes(s.OP.BOTTOM)?a.bottom:n.y};y.current={x:n.x-i.x,y:n.y-i.y},v(!0)},[r,v]),stopResizing:T}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:i,isResizing:u,setIsResizing:_,setResizeDirections:h,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:a.createElement("div",null,Object.values(s.OP).map((n,i)=>e.includes(n)?a.createElement(p,{key:i,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((i,s)=>e.includes(n)&&e.includes(i)?a.createElement(p,{key:s,directions:[n,i],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,i)}):null)))}class p extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return a.createElement("div",{className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let m=(e,r,n,a,i)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,p=n[s.OP.BOTTOM]?l:r.bottom;if(i){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(a){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),a=n[s.OP.LEFT]?r.left-o:o-r.right,i=n[s.OP.TOP]?r.top-l:l-r.bottom,m=n[s.OP.LEFT]||n[s.OP.RIGHT],_=n[s.OP.TOP]||n[s.OP.BOTTOM];if(m&&_){let o,l;let m=a/e;m<i?(o=a,l=m,n[s.OP.TOP]?u=r.top-l:p=r.bottom+l):(o=i*e,l=i,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(m){let a=n[s.OP.LEFT]?r.left-o:o-r.right;p=r.bottom+a/e}else if(_){let a=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+a*e}}return{left:c,top:u,right:d,bottom:p}}},414607:(e,r,n)=>{n.d(r,{Nb:()=>S,Rw:()=>C,aF:()=>A});var a=n(848318),i=n(301168),o=n(536384),s=n.n(o),l=n(989232),c=n(857607),d=n(56867),u=n(570518),p=n(781239),m=n(133318),_=n(264478),h=n(345964),g=n(148584),f=n(967688),E=n(523669),y=n(31898),b=n(142896),v=n(863270),T=n(289198),I=(e=>(e.CLICK_OUTSIDE="click_outside",e.PRESS_ESCAPE="press_escape",e))(I||{});function S(e){let r,n;let{useModalViewScroll:i=!0,tintedModalBackground:o=!0,hide:l,disableClickOutsideToHide:p,size:m,alignment:_,absolutePosition:h,padding:g,height:f,maxHeight:E,width:y,title:v,titleClassName:I,className:S,fixedTop:A,backgroundClassName:w,onKeyDown:C,disableKeyboardEventPropagation:N,modalRef:L,onModalClick:O,enableEscapeToClose:R,children:P,animateIn:D,disableFocusTrap:k,noPadding:M,disableFocusOnMount:F}=e;(0,d.h)();let x=a.useCallback(()=>{p||l("click_outside")},[p,l]),U=a.useCallback(e=>{e.stopPropagation()},[]),B=a.useCallback(e=>{O&&O(e)},[O]),G=a.useCallback(e=>{if(e.keyCode===c.Uz.ESCAPE&&(!p||R)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}C&&C(e),N&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[p,l,C,N,R]),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(F||V.current.matches(":focus-within")||V.current.focus(),k)return;let e=(0,u.M)(e=>{e.target.closest('[aria-modal="true"]')||V.current?.focus()});return document.body.addEventListener("focus",e,!0),()=>document.body.removeEventListener("focus",e,!0)},[F,k]),"number"==typeof m&&(r=m,n=m);let H=s()({[T.JY]:"small"===m,[T.ew]:"fitContent"===m,[T.Gx]:"mobile"===m,[T.R7]:!m||"medium"===m||"number"==typeof m}),z=s()(T.K1,w,b.Dm,{[T.Y0]:o,[T.CY]:A,[T.Xt]:"left"===_,[T.Ir]:"right"===_,[T.L4]:"leftNoPadding"===_}),K=s()(H,S,{[T.yl]:i,[T.Er]:!i,[T.KJ]:!!h,[T.HY]:D,[T.pN]:M}),W={minWidth:r,maxWidth:n,height:f,maxHeight:E,width:y,padding:g,...h?{top:h.top,left:h.left}:{}};return a.createElement("div",{tabIndex:0,className:z,onMouseDown:x,onKeyDown:G,ref:V,"data-testid":"modal-background"},a.createElement("div",{className:K,style:W,onMouseDown:U,onClick:B,ref:L,role:"dialog","aria-modal":"true","data-testid":e["data-testid"]},v&&a.createElement("div",{className:`${T.DD} ${I||""}`},v),P))}function A(e){let r=(0,i.wA)(),{onHide:n,popStack:o}=e,{name:s,properties:c}=(0,v.j6)(),d=c?.fileKey,u=c?.productType,p=a.useCallback(e=>{o?r(y.Lo()):r(y.Ce()),n&&n(),(0,l.trackEvent)("Modal Close",{source:e,trackingContext:s,fileKey:d,productType:u})},[r,d,s,n,o,u]);return a.createElement(S,{...e,hide:p})}let w={playback:()=>({preventDefault:()=>{}})};function C(e){let r=e.recordingKey??"",n=e.destructive??!1,o=e.autoFocusCta??!0,s=(0,i.wA)(),{dontClose:l,popStack:c}=e,d=a.useCallback(()=>{l||(c?s(y.Lo()):s(y.Ce()))},[s,l,c]),{onCloseButtonClick:u}=e,b=a.useCallback(()=>{d(),u?.()},[d,u]),v=(0,p.rf)(r,"click",b),{hideOnConfirm:I,onConfirm:S}=e,C=a.useCallback(e=>{e.preventDefault(),(I??!0)&&d(),S()},[d,I,S]),N=(0,p.qP)(r,"confirm",C,w),{hideOnCancel:L,onCancel:O}=e,R=a.useCallback(e=>{e.preventDefault(),(L??!0)&&d(),O?.()},[d,L,O]),P=(0,p.qP)(r??"","cancel",R,w),D=n?_.qM:_.vd,k=!(e.dontClose||e.hideClose);return a.createElement(A,{size:e.size||"small",...e,className:e.className||T.yl,onHide:e.overrideOnHide??e.onCancel},k&&a.createElement(m.i0,{...e,className:e.closeClass,onClick:v}),a.createElement(g.i,{displayAs:g.C.Block},!e.hideConfirmationTitle&&a.createElement("div",{className:e.titleClass??T.DD},a.createElement("h2",null," ",e.confirmationTitle??(0,f.tx)("modal.are_you_sure"))),e.children?e.children:a.createElement("div",{className:T.jE},e.content),a.createElement("div",{className:T.v0},a.createElement("div",{className:e.helperTextClass??T._f},e.helperText),!e.hideCancel&&a.createElement(_.tM,{onClick:P,autoFocus:!!o&&n},e.cancelText??(0,f.tx)("modal.cancel")),e.isLoading?a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.LO,disabled:!0,trackingProperties:e.trackedConfirmationProperties||{}},a.createElement(h.kt,{size:"small",className:e.loadingText?T.FQ:T.u1}),e.loadingText):a.createElement("form",{onSubmit:N},a.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.pL,disabled:e.disableConfirm,autoFocus:!!o&&!n,trackingProperties:e.trackedConfirmationProperties||{}},e.confirmText))),e.bottomWarningText&&a.createElement("div",{className:T.$$},a.createElement(E.In,{icon:"warning-32"}),e.bottomWarningText)))}},167418:(e,r,n)=>{n.d(r,{J:()=>b,M:()=>y});var a=n(848318),i=n(398612),o=n(637640),s=n(615233),l=n(264478),c=n(82436),d=n(297638),u=n(967688),p=n(180294),m=n(446951),_=n(78144),h=n(448841),g=n(965092);let f=d.s.colorIcon.h32.w28.pb32.$,E=d.s.w300.maxWFull.font13.h40.cursorPointer.$,y="LINK_EXPIRED_MODAL",b=(0,m.Ju)(function(){let{frame_context:e}=(0,s.Ay)(),r=(0,i.GZ)()&&e?.type==="embed",n=(0,p.sZ)();return(0,_.K)()&&n?a.createElement(h.H,{org:n}):a.createElement(c.u,{imageSrc:g.A,imageClassName:f,headerText:(0,u.t)("link_expired.header"),secondaryText:(0,u.t)("link_expired.description")},!r&&a.createElement(l.vd,{className:E,type:"submit",onClick:()=>{o.Ay.redirect("/")}},(0,u.tx)("link_expired.go_back_to_figma")))},y)},388981:(e,r,n)=>{n.d(r,{Lu:()=>N});var a=n(848318),i=n(301168),o=n(162796),s=n(469508),l=n(309488),c=n(93275),d=n(531788),u=n(186606),p=n(989232),m=n(637640),_=n(615233),h=n(656329),g=n(781239),f=n(967688),E=n(453370),y=n(995218),b=n(730143),v=n(259964),T=n(446951),I=n(500194),S=n(349918),A=n(639088);function w(e,r={}){(0,p.trackEvent)("memory_warning_event",{currentAllocatedBytes:u.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:u.hMR?.getMaxUsedHeapMemory(),...e,...r})}var C=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(C||{});let N="memory-warning-modal";function L(e){let r=o.hS({open:!0,preventUserClose:!0,onClose:()=>{}}),n=(0,i.d4)(e=>e.mirror.appModel.isReadOnly),p=(0,i.d4)(e=>e.selectedView),T=(0,y.XE)(p)===v.nT.Design,C=(0,b.tS)()||_.Ay().editing_file?.source_file?.key||"",N=(0,i.wA)(),L={view:"fullscreen",editorType:T?v.nT.Design:v.nT.Whiteboard,fileKey:C,isRecoveryMode:!0},O=u.hMR?.getHeapMemoryMode()===u.rCR.RECOVERY,R=n||O?"showReload":h.Ay.isWasm4gbSupported?"showRecoveryMode":"showBrowserUpgradeAndDesktop",P=a.createElement(s.N,{href:h.Ay.mac?"/download/desktop/mac":"/download/desktop/win",newTab:!0},(0,f.tx)("memory_warning_modal.desktop_app_download_link")),D="showReload"===R?{title:(0,f.t)("memory_warning_modal.reload_modal_title"),content:(0,f.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,f.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,f.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===R?{title:(0,f.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,f.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,f.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,f.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:{title:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,f.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:h.Ay.browserType&&({chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"})[h.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?a.createElement(I.E,null):a.createElement(l.bL,{manager:r,width:"lg"},a.createElement(c.vo,null,a.createElement(c.Y9,null,a.createElement(c.hE,null,D.title)),a.createElement(c.nB,null,a.createElement("div",{className:S.j},a.createElement("div",null,D.content,a.createElement("br",null),"\xa0",a.createElement("br",null)),"showBrowserUpgradeAndDesktop"===R?(0,f.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:P}):D.contentCTA,a.createElement("br",null)),a.createElement("div",{className:A.v0},D.secondaryButtonCTA&&D.secondaryButtonExternalLink&&a.createElement(s.N.Button,{onClick:()=>{D.secondaryButtonCTA===(0,f.t)("memory_warning_modal.learn_more")&&w({warningEvent:"LEARN_MORE",fileKey:C},{isReadOnly:n})},recordingKey:g.Pt(e,"crash"),href:D.secondaryButtonExternalLink,newTab:!0,variant:"secondary"},D.secondaryButtonCTA),a.createElement("div",{className:A.pL},D.buttonExternalLink?a.createElement(s.N.Button,{variant:"primary",href:D.buttonExternalLink,newTab:!0,recordingKey:g.Pt(e,"crash")},D.buttonCTA):a.createElement(d.$n,{variant:"primary",recordingKey:g.Pt(e,"crash"),onClick:()=>{D.buttonCTA===(0,f.t)("memory_warning_modal.recovery_mode_button")&&w({warningEvent:"OPEN_RECOVERY_MODE",fileKey:C},{isReadOnly:n}),("showRecoveryMode"===R||n)&&N(E.$T(L)),("showReload"===R||"showRecoveryMode"===R)&&m.Ay.reload("Memory warning panel")}},D.buttonCTA))))))}(0,T.qK)(N,e=>{let{isBranching:r}=e.modalShown.data;return a.createElement(L,{isBranching:r})})},593713:(e,r,n)=>{n.d(r,{Ay:()=>N,CR:()=>k,NJ:()=>P,OA:()=>D,gm:()=>R,uv:()=>C});var a=n(848318),i=n(531788),o=n(952647),s=n(553547);n(382902);var l=n(536384),c=n.n(l),d=n(410441),u=n(967139),p=n(238462),m=n(850426),_=n(967688),h=n(957872),g=n(863270),f=n(156818),E=n(506428),y=n(531288),b=n(601167),v=n(642775),T=n(175393),I=n(651349),S=n(160674),A=n(27776),w=n(809086);let C=(0,d.hG)(A.W8e);function N(e){let r=(0,f.Yk)(),n=(0,b._X)({subscribeToUpdates_expensive:!0}),i=a.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:s.AD}),[o,l]=a.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=a.useMemo(()=>(0,I.P7)(e.pointerType||I.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=a.useCallback(()=>{if(!i.current){l(null);return}let a=(0,b.Yb)(n,i.current.absoluteBounds),o={x:a.x+n.x,y:a.y+n.y,height:a.height,width:a.width};l((0,I.my)({width:e.width,height:e.height,targetRect:o,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,alignPointerToTop:e.alignPointerToTop,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.alignPointerToTop,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return a.useEffect(()=>{let r=(0,y.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{i.current=e.position,u()});return i.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,y.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,S.pc)({location:o,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),o}function L(e,r){switch(e){case T.F_.TOP:case T.F_.BOTTOM:return{left:r};case T.F_.LEFT_TITLE:case T.F_.RIGHT_BODY:return{top:r};case T.F_.TOP_RIGHT:case T.F_.RIGHT_TITLE:return{}}}let O={[T.F_.TOP]:{foregroundStyle:w.FQ,backgroundStyle:w.oX},[T.F_.BOTTOM]:{foregroundStyle:w.nW,backgroundStyle:w.a5},[T.F_.LEFT_TITLE]:{foregroundStyle:w.Hn,backgroundStyle:w.gF},[T.F_.RIGHT_TITLE]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny},[T.F_.RIGHT_BODY]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny},[T.F_.TOP_RIGHT]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny}};function R(e){let{foregroundStyle:r,backgroundStyle:n}=O[e.arrowPosition],i={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?L(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?L(e.arrowPosition,e.arrowOffset):{}};return a.createElement(a.Fragment,null,a.createElement("div",{"aria-hidden":!0,className:n,style:o}),a.createElement("div",{"aria-hidden":!0,className:r,style:i}))}function P(e){let r=(0,I.P7)(I.gm.arrow),n=e.width||r.defaultModalWidth,i=n+2*(e.noPadding?0:C),s=e.backgroundColor,l=e.onVisibilityChange,d=e.setArrowPosition,[u,p]=a.useState(0),m=a.useCallback(e=>{null!==e&&p(e.getBoundingClientRect().height)},[]),h=(e.isCanvasNode?N:S.eP)({targetKey:e.targetKey,height:u,width:i,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost,pointerOffsetOverride:e.pointerOffsetOverride}),g=!!h;if(a.useEffect(()=>{l&&l(g)},[g,l]),a.useEffect(()=>{h?.pointerPosition&&d&&d(h.pointerPosition)},[h?.pointerPosition,d]),!h)return null;let f={left:h.left,top:h.top,width:n};e.topOffset&&(f.marginTop=e.topOffset),e.leftOffset&&(f.marginLeft=e.leftOffset);let E=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return e.hideIfArrowPositionDoesNotMatch&&h.pointerPosition!==e.arrowPosition?null:a.createElement(o.J,{mode:e.colorMode||"dark"},a.createElement("div",{className:c()(e.className||w.Lq,e.noPadding&&w.$T,e.noAnimation&&w.gh),style:{...f,...E},ref:m},a.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&a.createElement(R,{arrowPosition:h.pointerPosition,arrowOffset:h.pointerOffset,modalColor:s}),e.shouldNotWrapInParagraphTag?e.children:a.createElement("p",null,e.children),e.dismissModal&&!e.hideCloseButton&&a.createElement("div",{className:c()(w.b,e.closeButtonClassName)},a.createElement(v.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,_.t)("general.close")})))))}function D(e){let{arrowPosition:r}=e,n=(0,I.P7)(I.gm.arrow),i=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,E.DP)(),l="light"===e.background,[d,u]=a.useState(0),p=a.useCallback(e=>{null!==e&&u(e.getBoundingClientRect().height)},[]),h=(0,S.eP)({targetKey:e.targetKey,height:d,width:i+2*C,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!h&&!e.shouldCenterModal)return null;let f=a.createElement("div",{className:c()(w._S,{[w.uS]:!(l&&!s)&&e.isUI3})},a.createElement(v.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,_.t)("general.close"),emphasized:!0})),y=a.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&a.createElement("div",{className:w.ZA},e.bottomLeftText&&a.createElement("b",null,e.bottomLeftText),a.createElement("div",{className:w.OQ},e.secondaryCtaText&&e.secondaryCtaHref&&a.createElement("span",{className:w.P1},a.createElement(m.pW,{newTab:!0,href:e.secondaryCtaHref,variant:"secondary"},e.secondaryCtaText)),e.secondaryCtaText&&e.onClickSecondaryCta&&a.createElement(g.$z,{className:l?w.jS:w.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&a.createElement(M,{onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),b={backgroundColor:o,width:i,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},T=h?{left:h.left,top:h.top}:{left:0,right:0,top:0,bottom:0};return a.createElement("div",{className:l?w.IL:w.wV,ref:p,style:{...b,...T}},a.createElement("div",null,h&&a.createElement(R,{arrowPosition:h.pointerPosition,arrowOffset:h.pointerOffset,modalColor:l?"var(--color-bg)":void 0}),a.createElement("h1",null,e.title),e.children,f),y)}let k=a.forwardRef(function(e,r){let[n,i]=a.useState(0),o=a.useCallback(e=>{null!==e&&i(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),s=a.useRef(null),l=e.disableClickOutsideToHide?p.lQ:e.dismissModal;(0,u.ww)(s,l);let d=a.useRef(null),m=(0,S.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*C,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});a.useEffect(()=>{m&&(d.current=m)},[m]);let g=m||d.current,f=e.hideIfTargetLost&&null==m;if(!g||f||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!m)return null;let E=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",y=e.pointerForegroundColor||"var(--color-bg, white)",b={left:g.left+(e.arrowPadding??0),top:g.top,width:e.width};e.height&&(b.height=e.height);let T=e.animateQuickly?w.B9:w.w0,I=e.pointerPaddingOffset??0;return a.createElement("div",{ref:s},a.createElement("div",{className:e.className?`${e.className}`:T,style:b,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&a.createElement(R,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset+I,modalColor:y,pointerBorderColor:E,pointerBorder:!0}),e.children,!e.hideCloseButton&&a.createElement("div",{className:c()(w.b,e.closeButtonClassName,{[w.uS]:e.useWhiteCloseButton})},a.createElement(v.Jn,{onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close","aria-label":(0,_.t)("general.close"),trackingProperties:{trackingDescriptor:h.c.CLOSE_BUTTON}}))))}),M=(0,g.tf)(function(e){return a.createElement(i.$n,{...e,variant:"primary"})})},208598:(e,r,n)=>{n.d(r,{C8:()=>T,GW:()=>b,Jo:()=>v,KL:()=>f,PK:()=>p,PL:()=>m,So:()=>g,YG:()=>u,k0:()=>E,m3:()=>h,mV:()=>y,sp:()=>_});var a=n(660376),i=n(938982),o=n(998568),s=n(967688),l=n(877146),c=n(594950),d=n(318147);let u={type:"RequestOrgUpgradeModal"},p={type:"RequestProUpgradeModal"};function m(e,r,n,u){switch(n){case l.tc.SHARE_DRAFTS:case l.tc.IN_EDITOR_RESTRICTED_DRAFT:case l.tc.RESTRICTED_DRAFT_SHARED_EMAIL:switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.header.design.share_drafts");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam.share_drafts");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides.share_drafts");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.header.dev_mode.share_drafts");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites.share_drafts");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake.share_drafts");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design.share_drafts");default:(0,a.xb)(e)}case l.PE.FileMoveUpsell:switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.header.design.move_drafts");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam.move_drafts");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides.move_drafts");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.header.dev_mode.move_drafts");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites.move_drafts");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake.move_drafts");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design.move_drafts");default:(0,a.xb)(e)}case l.Q7.RUN_PLUGIN:switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.header.design.run_plugins");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam.run_plugins");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides.run_plugins");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.header.dev_mode.run_plugins");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites.run_plugins");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake.run_plugins");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design.run_plugins");default:(0,a.xb)(e)}case l.Q7.RUN_WIDGET:switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.header.design.run_widgets");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam.run_widgets");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides.run_widgets");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.header.dev_mode.run_widgets");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites.run_widgets");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake.run_widgets");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design.run_widgets");default:(0,a.xb)(e)}case l.Q7.MANAGE_EXTENSIONS:switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.header.design.manage_extensions");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam.manage_extensions");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides.manage_extensions");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.header.dev_mode.manage_extensions");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites.manage_extensions");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake.manage_extensions");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design.manage_extensions");default:(0,a.xb)(e)}case l.tc.USER_SETTINGS:case l.tc.DOWNGRADE_EMAIL:case l.tc.LIFECYCLE_REUPGRADE_EMAIL:if(void 0===r){(0,o.$D)(i.e.MONETIZATION_EXPANSION,Error("Undefined seatTypeKey passed in for User Settings entrypoint"));break}switch(r){case c.ud.COLLABORATOR:return(0,s.t)("request_upgrade_modal.header.collab");case c.ud.DEVELOPER:return(0,s.t)("request_upgrade_modal.header.dev");case c.ud.EXPERT:return(0,s.t)("request_upgrade_modal.header.full");case c.ud.CONTENT:return(0,s.t)("request_upgrade_modal.header.content");default:(0,a.xb)(r)}case l.tc.PUBLISH_SITES:if(e===d.G_.FIGMAKE)return(0,s.t)("request_upgrade.header.figmake.publish");if(e===d.G_.SITES)return(0,s.t)("request_upgrade.header.sites.publish");break;case l.tc.SITE_SETTINGS:if(e===d.G_.FIGMAKE)return(0,s.t)("request_upgrade.header.figmake.publish")}switch(e){case d.G_.DESIGN:return u?(0,s.t)("1_click_expansion.request_sent_add_details_to"):(0,s.t)("request_upgrade.header.design");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.header.figjam");case d.G_.SLIDES:return(0,s.t)("request_upgrade.header.slides");case d.G_.DEV_MODE:return u?(0,s.t)("request_upgrade.header.dev_mode.one_click_v2"):(0,s.t)("request_upgrade.header.dev_mode");case d.G_.SITES:return(0,s.t)("request_upgrade.header.sites");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.header.figmake");case d.G_.COOPER:return(0,s.t)("request_upgrade.header.design");default:(0,a.xb)(e)}}function _(e,r,n,i,o){if(i===l.tc.USER_SETTINGS)switch(o){case c.ud.COLLABORATOR:return(0,s.tx)("request_upgrade_modal.body.collab");case c.ud.DEVELOPER:return(0,s.tx)("request_upgrade_modal.body.dev");case c.ud.EXPERT:return(0,s.tx)("request_upgrade_modal.body.full")}if(r)switch(e){case d.G_.DESIGN:return n?(0,s.tx)("1_click_expansion.well_let_you_know_when"):(0,s.tx)("request_upgrade_modal.body.design",{planName:r});case d.G_.DEV_MODE:return n?(0,s.tx)("dev_handoff.paywall.success_modal.no_grace_period.description"):(0,s.tx)("request_upgrade_modal.body.dev_mode",{planName:r});case d.G_.WHITEBOARD:return(0,s.tx)("request_upgrade_modal.body.figjam",{planName:r});case d.G_.SLIDES:return(0,s.tx)("request_upgrade_modal.body.slides",{planName:r});case d.G_.SITES:return(0,s.tx)("request_upgrade_modal.body.sites",{planName:r});case d.G_.FIGMAKE:return(0,s.tx)("request_upgrade_modal.body.figmake",{planName:r});case d.G_.COOPER:return(0,s.tx)("request_upgrade_modal.body.design",{planName:r});default:(0,a.xb)(e)}switch(e){case d.G_.DESIGN:return n?(0,s.tx)("1_click_expansion.well_let_you_know_when"):(0,s.tx)("request_upgrade_modal.body.no_plan_name.design");case d.G_.DEV_MODE:return n?(0,s.tx)("dev_handoff.paywall.success_modal.no_grace_period.description"):(0,s.tx)("request_upgrade_modal.body.no_plan_name.dev_mode");case d.G_.WHITEBOARD:return(0,s.tx)("request_upgrade_modal.body.no_plan_name.figjam");case d.G_.SLIDES:return(0,s.tx)("request_upgrade_modal.body.no_plan_name.slides");case d.G_.SITES:return(0,s.tx)("request_upgrade_modal.body.no_plan_name.sites");case d.G_.FIGMAKE:return(0,s.tx)("request_upgrade_modal.body.no_plan_name.figmake");case d.G_.COOPER:return(0,s.tx)("request_upgrade_modal.body.no_plan_name.design");default:(0,a.xb)(e)}}function h(e,r){switch(e){case d.G_.DESIGN:case d.G_.SITES:case d.G_.FIGMAKE:return(0,s.tx)("auto_upgrade_confirmation_modal.body.full",{planName:r});case d.G_.DEV_MODE:return(0,s.tx)("auto_upgrade_confirmation_modal.body.dev",{planName:r});case d.G_.SLIDES:case d.G_.WHITEBOARD:return(0,s.tx)("auto_upgrade_confirmation_modal.body.collab",{planName:r});case d.G_.COOPER:return null;default:(0,a.xb)(e)}}function g(e,r,n){switch(e){case d.G_.DESIGN:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.design",{planName:r,otherProducts:n});case d.G_.WHITEBOARD:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.figjam",{planName:r,otherProducts:n});case d.G_.SLIDES:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.slides",{planName:r,otherProducts:n});case d.G_.SITES:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.sites",{planName:r,otherProducts:n});case d.G_.DEV_MODE:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.dev_mode",{planName:r,otherProducts:n});case d.G_.FIGMAKE:return(0,s.tx)("admin_auto_upgrade_confirmation_modal.body.figmake",{planName:r,otherProducts:n});case d.G_.COOPER:return null;default:(0,a.xb)(e)}}function f(e,r){switch(e){case d.G_.DESIGN:return(0,s.tx)("auto_upgrade_confirmation_modal.body.design",{planName:r});case d.G_.WHITEBOARD:return(0,s.tx)("auto_upgrade_confirmation_modal.body.figjam",{planName:r});case d.G_.SLIDES:return(0,s.tx)("auto_upgrade_confirmation_modal.body.slides",{planName:r});case d.G_.SITES:return(0,s.tx)("auto_upgrade_confirmation_modal.body.sites",{planName:r});case d.G_.FIGMAKE:return(0,s.tx)("auto_upgrade_confirmation_modal.body.figmake",{planName:r});case d.G_.COOPER:case d.G_.DEV_MODE:return null;default:(0,a.xb)(e)}}function E(e){switch(e){case d.G_.DESIGN:case d.G_.SITES:case d.G_.FIGMAKE:return(0,s.tx)("auto_upgrade_confirmation_modal.title.full");case d.G_.DEV_MODE:return(0,s.tx)("auto_upgrade_confirmation_modal.title.dev");case d.G_.SLIDES:case d.G_.WHITEBOARD:return(0,s.tx)("auto_upgrade_confirmation_modal.title.collab");case d.G_.COOPER:return null;default:(0,a.xb)(e)}}function y(e){switch(e){case d.G_.DESIGN:return(0,s.tx)("auto_upgrade_confirmation_modal.title.design");case d.G_.WHITEBOARD:return(0,s.tx)("auto_upgrade_confirmation_modal.title.figjam");case d.G_.SLIDES:return(0,s.tx)("auto_upgrade_confirmation_modal.title.slides");case d.G_.SITES:return(0,s.tx)("auto_upgrade_confirmation_modal.title.sites");case d.G_.FIGMAKE:return(0,s.tx)("auto_upgrade_confirmation_modal.title.figmake");case d.G_.COOPER:case d.G_.DEV_MODE:return null;default:(0,a.xb)(e)}}function b(e,r,n){if(r)switch(e){case d.G_.DESIGN:return n?(0,s.tx)("1_click_expansion.you_can_work_in_figma",{numDays:3}):(0,s.tx)("request_upgrade_modal.provisional_access.design",{numDays:3,planName:r});case d.G_.DEV_MODE:return n?(0,s.tx)("request_upgrade.description_dev_mode_grace_period_one_click",{numDays:3}):(0,s.tx)("request_upgrade_modal.provisional_access.dev_mode",{numDays:3,planName:r});case d.G_.WHITEBOARD:return(0,s.tx)("request_upgrade_modal.provisional_access.figjam",{numDays:3,planName:r});case d.G_.SLIDES:return(0,s.tx)("request_upgrade_modal.provisional_access.slides",{numDays:3,planName:r});case d.G_.SITES:return(0,s.tx)("request_upgrade_modal.provisional_access.sites",{numDays:3,planName:r});case d.G_.FIGMAKE:return(0,s.tx)("request_upgrade_modal.provisional_access.figmake",{numDays:3,planName:r});case d.G_.COOPER:return(0,s.tx)("request_upgrade_modal.provisional_access.design",{numDays:3,planName:r});default:(0,a.xb)(e)}switch(e){case d.G_.DESIGN:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.design",{numDays:3});case d.G_.DEV_MODE:return n?(0,s.tx)("request_upgrade.description_dev_mode_grace_period_one_click",{numDays:3}):(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.dev_mode",{numDays:3});case d.G_.WHITEBOARD:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.figjam",{numDays:3});case d.G_.SLIDES:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.slides",{numDays:3});case d.G_.SITES:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.sites",{numDays:3});case d.G_.FIGMAKE:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.figmake",{numDays:3});case d.G_.COOPER:return(0,s.tx)("request_upgrade_modal.provisional_access.no_plan_name.design",{numDays:3});default:(0,a.xb)(e)}}function v(e){switch(e){case d.G_.DESIGN:return(0,s.t)("request_upgrade.placeholder.design");case d.G_.DEV_MODE:return(0,s.t)("request_upgrade.placeholder.dev_mode");case d.G_.WHITEBOARD:return(0,s.t)("request_upgrade.placeholder.figjam");case d.G_.SLIDES:return(0,s.t)("request_upgrade.placeholder.slides");case d.G_.SITES:return(0,s.t)("request_upgrade.placeholder.sites");case d.G_.FIGMAKE:return(0,s.t)("request_upgrade.placeholder.figmake");case d.G_.COOPER:return(0,s.t)("request_upgrade.placeholder.design");default:return(0,a.xb)(e)}}function T(e,r){if(r)switch(e){case d.G_.DESIGN:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.design");case d.G_.DEV_MODE:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.dev_mode");case d.G_.WHITEBOARD:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.figjam");case d.G_.SLIDES:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.slides");case d.G_.SITES:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.sites");case d.G_.FIGMAKE:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.figmake");case d.G_.COOPER:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.curf.design");default:return(0,a.xb)(e)}else switch(e){case d.G_.DESIGN:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.design");case d.G_.DEV_MODE:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.dev_mode");case d.G_.WHITEBOARD:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.figjam");case d.G_.SLIDES:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.slides");case d.G_.SITES:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.sites");case d.G_.FIGMAKE:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.figmake");case d.G_.COOPER:return(0,s.tx)("upgrades.drafts_move_drafts_share.provisional_access.design");default:return(0,a.xb)(e)}}},334532:(e,r,n)=>{n.d(r,{y:()=>L});var a=n(848318),i=n(301168),o=n(93275),s=n(544405),l=n(788502),c=n(962076),d=n(773511),u=n(531788),p=n(162796),m=n(309488),_=n(186606),h=n(989232),g=n(781239),f=n(810503),E=n(967688),y=n(384192),b=n(31898),v=n(244718),T=n(730143),I=n(606672),S=n(446951),A=n(191718),w=n(375517);let C=class e extends g.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",a=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(v.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:a})),this.hideModal(),(0,h.trackEvent)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(v.m({fileKey:this.props.fileKey,label:n,description:a})),this.hideModal(),(0,h.trackEvent)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:a.length})),this.clearSavedInputs()},this.hideModal=()=>{this.props.dispatch(b.Lo())},this.onSubmit=g.P_(this,"submit",()=>{this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.onLabelChange=e=>{this.setState({label:e})},this.onLabelBlur=e=>{this.onLabelChange(e.target.value)},this.onDescriptionChange=e=>{this.setState({description:e})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e.target.value)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,I._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}hydrateLabelAndDescription(){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.hydrateLabelAndDescription(),super.componentDidMount()}UNSAFE_componentWillReceiveProps(){this.hydrateLabelAndDescription()}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,E.tx)("collaboration.feedback.save_modal.save"),n=(0,E.tx)("collaboration.feedback.save_modal.cancel");return a.createElement(a.Fragment,null,a.createElement(o.nB,null,a.createElement("div",{className:w.u},this.props.isEditingMergeSavepoint&&a.createElement(s.J,{htmlFor:"savepoint-modal-title"},(0,E.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),a.createElement(l.p,{id:"savepoint-modal-title",disabled:this.props.isLabelReadOnly,onChange:this.onLabelChange,htmlAttributes:{onBlur:this.onLabelBlur},placeholder:(0,E.t)("fullscreen.savepoint_modal.title"),"aria-label":(0,E.t)("fullscreen.savepoint_modal.title_label"),recordingKey:g.Pt(this.props,"title"),value:this.state.label})),a.createElement("div",{className:w.u},this.props.isEditingMergeSavepoint&&a.createElement(s.J,{htmlFor:"savepoint-modal-description"},(0,E.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),a.createElement(c.T,{id:"savepoint-modal-description","aria-label":(0,E.t)("fullscreen.savepoint_modal.description_label"),value:this.state.description,placeholder:(0,E.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,htmlAttributes:{onBlur:this.onDescriptionBlur},recordingKey:g.Pt(this.props,"description")})),this.props.hasCMSData&&a.createElement("div",{className:w.u},a.createElement(A.B,null)),a.createElement("div",{className:w.u},!this.props.isHistoryMode&&!this.props.hideShowFullVersionHistoryCTA&&a.createElement(d.E,{className:w.R,onClick:this.goHistoryMode},(0,E.tx)("fullscreen.savepoint_modal.show_full_version_history")))),a.createElement(o.wi,null,a.createElement(o.jk,null,a.createElement(u.$n,{variant:"secondary",onClick:this.onCancel},n),a.createElement(u.$n,{type:"submit",disabled:e,"data-testid":"savepoint-modal-submit",onClick:this.onSubmit},r))))}};function N(e,r){return e?r?(0,E.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,E.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,E.tx)("collaboration.feedback.save_modal.add_to_version_history")}C.displayName="SavepointModal",C.keepSavepointModalInput=!1,C.savedLabelInput="",C.savedDescriptionInput="";let L=(0,S.Ju)(function(e){let r=p.hS(e),n=(0,T.q5)(),s=(0,i.wA)(),l=(0,i.d4)(e=>e.mirror.appModel.topLevelMode===_.lyf.HISTORY),c=e.description||"",d=e.label||"",u=e.savepointID,h=e.isEditingMergeSavepoint||!1,g=e.hideShowFullVersionHistoryCTA||!1,E=n?.key,b=(0,y.fk)(E),v=N(u,h);return n&&null!=E?a.createElement(m.bL,{manager:r,width:"lg"},a.createElement(o.vo,null,a.createElement(o.Y9,null,a.createElement(o.hE,null,v)),a.createElement(C,{description:c,dispatch:s,editingSavepointID:u,fileKey:E,hasCMSData:b,hideShowFullVersionHistoryCTA:g,isEditingMergeSavepoint:h,isHistoryMode:l,isViewOnly:!n.canEdit,label:d,recordingKey:"savepointModal"}))):((0,f.x1)("Save Point Modal","File key is missing.",{},{reportAsSentryError:!0}),null)});(0,S.Ju)(function(e){let r=(0,T.q5)(),n=(0,i.wA)(),s=p.hS(e),l=N(e.savepointID,!1);return r?a.createElement(m.bL,{manager:s,width:"lg"},a.createElement(o.vo,null,a.createElement(o.Y9,null,a.createElement(o.hE,null,l)),a.createElement(C,{description:e.description??"",dispatch:n,editingSavepointID:e.savepointID,fileKey:r.key,hasCMSData:!1,isHistoryMode:!0,isLabelReadOnly:!0,isViewOnly:!r.canEdit,label:e.label??"",recordingKey:"savepointModal"}))):null},"DevModeSavepointModal")},160674:(e,r,n)=>{n.d(r,{eP:()=>d,pc:()=>l,xT:()=>c});var a=n(848318),i=n(66699),o=n(944239),s=n(651349);function l({location:e,onTargetLost:r,targetKey:n,targetType:o}){let s=a.useRef(null),l=a.useRef(null),c=a.useRef(!1);a.useEffect(()=>{!c.current&&e&&(c.current=!0)},[c,e]),a.useEffect(()=>{e?(s.current=e,l.current=n):l.current===n&&((0,i.YQ)({id:"Lost DOM Target"}),r?.(c.current,o))},[e,r,n,o])}function c(e){let r;try{r=document.querySelectorAll(`[data-onboarding-key=${e}]`)}catch(e){return null}if(0===r.length)return null;for(let e=0;e<r.length;e++)if(function(e){if(!e||"function"==typeof e.checkVisibility&&!e.checkVisibility({visibilityProperty:!0}))return!1;let r=e.getBoundingClientRect();return!(0===r.left&&0===r.right&&0===r.height&&0===r.width)}(r[e]))return r[e];return null}let d=(0,o.D)(e=>{let r=(0,s.P7)(e.pointerType||s.gm.arrow);e.pointerOffsetOverride&&(r.standardPointerOffset=e.pointerOffsetOverride);let n=e.topPadding||-r.pointerTargetOverlap,i=a=>{let i=c(e.targetKey);if(null!=i){let o=(0,s.my)({width:e.width,height:e.height,targetRect:i.getBoundingClientRect(),positioningConstants:r,alignPointerToLeft:e.alignPointerToLeft,alignPointerToTop:e.alignPointerToTop,shouldCenterArrow:e.shouldCenterArrow,topPadding:n,targetType:"dom",arrowPosition:e.arrowPosition});return null==a||o.top!==a.top||o.left!==a.left?{type:"CHANGED",location:o}:{type:"UNCHANGED"}}return{type:"NOT_FOUND"}},o=null,[d,u]=a.useState(()=>{let e=i(null);return"CHANGED"===e.type&&(o=e.location),o}),[p,m]=a.useState(null);a.useEffect(()=>{let r=i(d);if("CHANGED"===r.type?o=r.location:"UNCHANGED"===r.type&&(o=d),void 0!==r&&u(o),m(e.targetKey),e.shouldScrollTargetIntoView){let r=c(e.targetKey);r?.scrollIntoView()}},[e.targetKey]);let _=a.useRef();function h(){let e=i(d);"CHANGED"===e.type?u(e.location):"NOT_FOUND"===e.type&&u(null)}return(a.useEffect(()=>{_.current=h}),a.useEffect(()=>{let e=setInterval(function(){_.current()},50);return()=>clearInterval(e)},[]),l({location:d,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"dom"}),p!==e.targetKey)?o:d})},864848:(e,r,n)=>{n.d(r,{J4:()=>P,YU:()=>U,Kd:()=>G,Iz:()=>B,_9:()=>D,lG:()=>F,fb:()=>k,p8:()=>M,mi:()=>H,ET:()=>V});var a=n(848318),i=n(23207),o=n(544405),s=n(366391),l=n(955729),c=n(571211),d=n(333357),u=n(759102),p=n(19180),m=n(461979),_=n(509567),h=n(401970),g=n(967688),f=n(696786),E=n(180294),y=n(318147),b=n(259964),v=n(386252),T=n(17753),I=n(213374),S=n(125952);let A="audience_selector--radioText--OD-3K",w="audience_selector--radioOption--4NDFa",C="audience_selector--radioSubtitle--g3Mry",N="audience_selector--flexRow--cOscx";var L=n(432314),O=n(591748),R=n(112829),P=(e=>(e.VIEW="view",e.EDIT="edit",e))(P||{}),D=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(D||{});let k={[y.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[y.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[y.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[y.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[y.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[y.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[y.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[y.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},M={[y.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[y.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[y.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function F(e,r){return"anyone"===e?"edit"===r?y.PQ.EDIT:y.PQ.VIEW:"org"===e?"edit"===r?y.PQ.ORG_EDIT:y.PQ.ORG_VIEW:y.PQ.INVITE_ONLY}let x=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function U(e){let r={[y.vt.TEAM]:["invite_only"],[y.vt.FOLDER]:["invite_only"],[y.vt.FILE]:["anyone","invite_only"],[y.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],n=null;e.org&&(e.workspace&&e.workspace.id!==I.O&&r.splice(1,0,"workspace"),r.splice(1,0,"org")),e.isPrototype&&(r=r.filter(r=>x(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===r.length&&"anyone"===r[0]&&(n=(0,g.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let m={anyone:(0,g.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,g.t)("permissions.audience_selector.only_invited_people")},_=(0,f.GS)(),E={anyone:a.createElement(h.U,{svg:O.A},a.createElement(s.Y,null)),workspace:e.workspace&&(_?a.createElement(l.w,null):a.createElement(S.z6,{entity:e.workspace,size:16})),org:e.org&&(_?a.createElement(c.Y,null):a.createElement(h.U,{svg:R.A},a.createElement(c.Y,null))),team:e.team&&a.createElement(S.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16}),folder:a.createElement(a.Fragment,null),invite_only:a.createElement(h.U,{svg:L.A},a.createElement(d.c,null))},v=a.useCallback(()=>{let r={[y.vt.TEAM]:(0,g.t)("permissions.audience_selector.team_resource_name"),[y.vt.FOLDER]:(0,g.t)("permissions.audience_selector.project_resource_name"),[y.vt.FILE]:(0,g.t)("permissions.audience_selector.file_resource_name"),[y.vt.FILE_REPO]:(0,g.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===b.nT.Slides&&(0,p.k)().slides_paywall_string?(0,g.t)("permissions.audience_selector.presentation_resource_name"):(0,g.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),A=a.useMemo(()=>{let r=v();switch(e.value){case"anyone":return e.editorType===b.nT.Slides?(0,g.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,g.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,g.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,g.t)("permissions.audience_selector.org_members")});return(0,g.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,g.t)("permissions.audience_selector.org_members")});case"workspace":return(0,g.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,g.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,g.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,g.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,v]);return a.createElement("div",{"data-testid":"create-team-modal-audience-selector"},a.createElement(i.bL,{value:e.value,onChange:e.onChange},a.createElement(i.l9,{label:a.createElement(o.h,null,(0,g.t)("permissions.audience_selector.aria_label")),disabled:!!n||e.disabled,size:"lg",width:"fill"},a.createElement("div",{className:"audience_selector--audienceSelectorTrigger--VKOKc"},a.createElement("div",{className:N},E[e.value],a.createElement("span",null,m[e.value])),n&&a.createElement(u.b,{"data-tooltip-type":T.Ib.TEXT,"data-tooltip":n}))),a.createElement(i.mc,null,r.map(r=>a.createElement(i.c$,{key:r,value:r,disabled:"anyone"===r&&e.publicLinksBanned},a.createElement("div",{className:N,"data-testid":`audience-option-${r}`},a.createElement("div",{className:"audience_selector--audienceSelectorIcon--lTBRF"},E[r]),m[r]))))),a.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},A))}function B(e){return a.createElement(a.Fragment,null,a.createElement(_.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},a.createElement(_.Z,{key:"view-only",value:"view",className:w,disabled:e.disabled},a.createElement("p",{className:A},(0,g.tx)("team_creation.view"))),a.createElement(_.Z,{key:"edit",value:"edit",className:w,disabled:e.disabled||e.disableEdit},a.createElement("p",{className:A},e.teamCanAccess?(0,g.tx)("permissions.level_name_capitalized.can_access"):(0,g.tx)("team_creation.edit")))))}function G(e){return E.sZ()?.k12_google_org&&(0,p.k)().student_plan_no_hidden_teams?a.createElement(_.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(_.Z,{key:"org_browsable",value:v.Fb.ORG_BROWSABLE,className:w},a.createElement("p",{className:A},(0,g.tx)("team_creation.visible"))),a.createElement("p",{className:C},(0,g.tx)("team_creation.anyone_can_find_this_team"))):a.createElement(a.Fragment,null,a.createElement(_.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},a.createElement(_.Z,{key:"org_browsable",value:v.Fb.ORG_BROWSABLE,className:w},a.createElement("p",{className:A},(0,g.tx)("team_creation.visible"))),a.createElement("p",{className:C},(0,g.tx)("team_creation.anyone_can_find_this_team")),a.createElement(_.Z,{key:"hidden",value:v.Fb.HIDDEN,className:w},a.createElement("p",{className:A},(0,g.tx)("team_creation.hidden"))),a.createElement("p",{className:C},(0,g.tx)("team_creation.only_team_members_can_find_and_access"))))}function V(e,r,n,i,o){return e===y.PQ.EDIT||e===y.PQ.VIEW?i?(0,g.tx)("file_audience_row.anyone_with_password"):(0,g.tx)("permissions.anyone"):e===y.PQ.ORG_EDIT||e===y.PQ.ORG_VIEW?r&&(0,g.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===y.PQ.WORKSPACE_EDIT||e===y.PQ.WORKSPACE_VIEW?(0,g.tx)("permissions.anyone_in_container_name",{containerName:n?.name??(0,g.tx)("folder_permissions_modal.project_name_s_workspace",{projectName:(0,m.EJ)(o??"",30)})}):e===y.PQ.INVITE_ONLY||e===y.PQ.INHERIT?(0,g.tx)("permissions.only_those_invited"):a.createElement(a.Fragment,null)}function H(e){return e===y.PQ.EDIT||e===y.PQ.ORG_EDIT||e===y.PQ.WORKSPACE_EDIT?(0,g.tx)("file_access_row.can_edit"):e===y.PQ.VIEW||e===y.PQ.ORG_VIEW||e===y.PQ.WORKSPACE_VIEW?(0,g.tx)("file_access_row.can_view"):void 0}},210585:(e,r,n)=>{n.d(r,{mK:()=>f,ox:()=>g});var a=n(848318),i=n(301168),o=n(918777),s=n(304756),l=n(66699),c=n(31898),d=n(618500),u=n(125761),p=n(167418),m=n(709067);function _(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let h=(e,r)=>{let n=a.useRef(null);a.useEffect(()=>{let a=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==a&&a<0x7fffffff?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},a)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,i.wA)(),{file:o,onCanvasExpired:s}=e,m=o?.key,g=(0,d.v)(e.file),f=a.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,v=g?.accessReverted;a.useEffect(()=>{b&&v&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,v,b]),h(E,a.useCallback(()=>{m&&(b&&r||(n(c.to({type:p.J})),s?.()),_(m))},[n,s,m,r,b]))}function f(e,r){h(m.d4(r)?.toISOString(),a.useCallback(()=>{_(e)},[e]))}},352355:(e,r,n)=>{n.d(r,{j:()=>g});var a=n(848318),i=n(301168),o=n(773511),s=n(313122),l=n(536384),c=n.n(l),d=n(446470),u=n(967688),p=n(952039),m=n(730143),_=n(633468);function h(){let e=(0,i.wA)(),r=function(){let e=(0,m.q5)();return a.useCallback(()=>e?(0,_.jN)({file:e,isFigmakeFullscreenPreview:!0}):null,[e])}(),n=async()=>{try{let n=r();n&&(await (0,d.Dk)(n),e(p.F.enqueue({type:"make_preview_link_copied_to_clipboard",message:(0,u.t)("figmake.share_modal.link_copied_to_clipboard")})))}catch(e){}};return a.createElement(o.E,{className:c()("figmake--workshopRow--cNBoG"),onClick:n},a.createElement("div",{className:"figmake--workshopRowIcon--7go8R role_row--linkAccessIcon--kLG-n role_row--roleRowIcon--BatSn"},a.createElement(s.K,null)),a.createElement("div",{className:"figmake--workshopRowInfo--HD-jM"},a.createElement("div",null,(0,u.t)("figmake.share_modal.copy_link_to_preview")),a.createElement("div",{className:"figmake--descriptionRow--EExtB"},(0,u.t)("figmake.share_modal.copy_link_to_preview_chat_hint"))))}function g(){return a.createElement(h,null)}},759975:(e,r,n)=>{n.d(r,{$:()=>c});var a=n(31898),i=n(381673);n(318147);var o=n(520779),s=n(259964),l=n(274016);function c(e,r,n){e((0,a.to)({type:l.DV,data:{team:n,editorType:(0,s.oD)(r),resource:o.Bi.PASSWORD_PROTECTION,currentPlan:i.F.Plan.STARTER,upsellPlan:i.F.Plan.PRO}}))}},208189:(e,r,n)=>{n.d(r,{L:()=>s});var a=n(848318),i=n(175957),o=n(348646);function s(){let e=(0,o.o)();return(0,a.useCallback)(()=>{e(i.A5.INVITE)},[e])}},236254:(e,r,n)=>{n.d(r,{KM:()=>P,Ku:()=>F});var a=n(848318),i=n(301168),o=n(531788),s=n(41099),l=n(250838),c=n(544405),d=n(382902),u=n(398612),p=n(615233),m=n(45137),_=n(297638),h=n(967688),g=n(744577),f=n(533737),E=n(863270),y=n(730143),b=n(633468),v=n(175957),T=n(864848),I=n(348646),S=n(674578),A=n(73063),w=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(w||{});let C=(0,p.ck)("cee072aec57608cbb49c64eb6cb3765896cea921"),N="share-to-google-classroom-row",L=(0,d.eU)(null),O=(0,E.tf)(S.sR);function R(e){let r=(0,i.wA)(),n=(0,d.Xr)(L),o=a.useRef(null);a.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=a.createElement("div",{ref:o,className:A.S},a.createElement("img",{src:C,alt:"share to google classroom",className:A.S}));return a.createElement(E.fu,{name:"share_to_google_classroom_row"},a.createElement(O,{icon:s,text:(0,h.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(f.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:N,dataOnboardingKey:N,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function P({org:e,currentUser:r}){var n;let i=(0,I.o)(),o=e?.k12_google_org,s=(n=r?.profile?.jobTitle||"","education"===(0,m.HB)(n));return o||s?a.createElement(R,{onClick:()=>i(v.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let D=(0,E.tf)(o.$n),k=g.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,M=g.sx.add({transform:"translateY(-4px)"}).$;function F(e){let r=T.fb[e.linkAccess].audienceAccessLevel!==T.J4.EDIT,n=(0,y.q5)(),[i,o]=(0,a.useState)("edit"),d=(0,I.o)();return a.createElement(E.fu,{name:"google_classroom_share_modal"},a.createElement("div",{className:_.s.flex.flexColumn.p16.$},a.createElement("form",null,a.createElement(s.b,{legend:a.createElement(l.s,null,r?a.createElement("div",{className:_.s.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,h.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:a.createElement(E.$z,{onClick:()=>d(v.A5.SHARE_SETTINGS),type:"button",style:k},(0,h.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):a.createElement(a.Fragment,null)),value:i,onChange:o},a.createElement("div",{className:_.s.mt8.$},a.createElement(s.c,{value:"edit",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,h.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?a.createElement("div",{style:M},(0,h.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),a.createElement(s.c,{value:"duplicate",label:a.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,h.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?a.createElement("div",{style:M},(0,h.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),a.createElement("div",{className:_.s.flex.flexRow.justifyEnd.$},a.createElement(D,{variant:"primary",onClick:()=>{let r=n?(0,b.jN)({file:n}):"",a="duplicate"===i?"/duplicate":"",o=r?`?url=${r}${a}`:"";(0,u.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:i},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,h.tx)("general.next")))))}},748660:(e,r,n)=>{n.d(r,{HU:()=>D,b8:()=>k});var a=n(848318),i=n(23207),o=n(544405),s=n(88706),l=n(782073),c=n(82433),d=n(536384),u=n.n(d),p=n(410441),m=n(156974),_=n(401970),h=n(66699),g=n(967688),f=n(925085),E=n(87463),y=n(453370),b=n(863270),v=n(353231),T=n(335744),I=n(701417),S=n(759151),A=n(372455),w=n(769773);let C=(0,p.hG)(S.p3),N=(0,p.hG)(I.km),L=(0,p.hG)(I.LF),O=(0,p.hG)(I.hX),R=C-N/2;function P({dispatch:e,dropdownClassName:r,dropdownShown:n,options:i,value:o,onChange:s,trackingProperties:l={}}){let[c,d]=(0,a.useState)(0),[p,_]=(0,a.useState)(window.innerWidth),h=()=>{_(window.innerWidth)};(0,a.useEffect)(()=>(window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[]);let g=a.useRef(null),b=a.useRef(null);(0,a.useEffect)(()=>{if(g.current&&b.current){let e=g.current.getBoundingClientRect(),r=g.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(g.current.scrollIntoView(!1),b.current.scrollBy(8)),d(e.width)}},[]);let v={...n?.data?.position||{top:0,left:0}},I=0,S=0,w=!1,P=-1,D=i.map((r,n)=>{if("separator"===r.type)return w||(I+=O),S+=O,a.createElement(m.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let c=r.key===o;c&&(P=n),w=w||c;let d=r.subtext?L:N;w||(I+=d),S+=d;let u={};return r.subtext&&i[n+1]?.type!=="separator"&&(u.paddingBottom=8,S+=8),a.createElement("div",{key:String(r.key),ref:c?g:null,style:u,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},a.createElement(m.rr,{checked:c,onClick:n=>{n.stopPropagation(),c||s(r.key),e(y.oB())},trackingProperties:{...l,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},a.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&a.createElement(a.Fragment,null,r.icon),a.createElement(f.Y,{direction:"vertical",spacing:4,height:d,verticalAlignItems:"center"},a.createElement(E.E,{fontSize:12},r.text),r.subtext&&a.createElement(E.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});c+v.left+4>p&&(v.left="auto",v.right=4);let k=16;P===i.length-1&&(k=8),"auto"!==v.top&&void 0!==v.top&&(v.top-=Math.min(I,R-k),v.top=Math.max(16,v.top));let M=a.createElement(T.g1,{maxDropdownHeight:e=>"auto"===v.top||void 0===v.top?C:Math.min(C,Math.round(e-v.top-8-16)),dropdownChildrenHeight:S,ref:b},D);return a.createElement(m.gw,{stopScrollPropagation:!0,dispatch:e,className:u()(A.N1,r),style:v},M)}function D({dispatch:e,dropdownShown:r,value:n,options:i,onChange:o,id:l,placeholder:c,disabled:d=!1,dropdownData:p={},isOpen:m,trackingProperties:g={},dataOnboardingKey:f,onOpenRcsEvent:E,ui3Icon:v}){let T=(0,a.useRef)(null),I=i.findIndex(e=>"option"===e.type&&e.key===n),S=i[I],C=S?.type==="option"?S.selectedLabel||S.text:c,N=S?.type==="option"&&S.selectedLabelClass||"";return m=m??r?.type===l,a.createElement("div",{ref:T},a.createElement(b.jm,{trackingProperties:g,className:u()({[A.Lt]:!d,[A.rp]:v}),onClick:d?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===l?e(y.oB()):i.length&&!d&&(e(y.j7({type:l,data:{...p,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(T)}})),E&&(0,h.YQ)({id:E}))}},v,a.createElement("div",{className:`${A.Ck} ${N}`,"data-testid":"dropdown-label"},C),!d&&a.createElement("div",{className:A.Lo},a.createElement(_.U,{"data-onboarding-key":!d&&f?f:"",svg:w.A},a.createElement(s.r,null)))),m&&a.createElement(P,{dispatch:e,dropdownShown:r,dropdownClassName:A.W8,value:n,options:i,onChange:o,trackingProperties:g}))}function k({value:e,options:r,onChange:n,getPermissionName:s,getPermissionDescription:l,showSeparators:d,label:u}){let p=a.useCallback(e=>l?a.createElement(a.Fragment,null,a.createElement("div",{...c.xk(M.selectPrimaryText)},s(e)),a.createElement("div",{...c.xk(M.selectSecondaryText)},l(e))):s(e),[s,l]),m=(0,b.j6)(),_=e=>e.toString(),h=a.useCallback(e=>{let r=parseInt(e);n(isNaN(r)?e:r),m&&(0,v.Cu)({...m.properties,trackingContext:m.name,newValue:e})},[n,m]);return a.createElement(i.bL,{value:_(e),onChange:h},a.createElement(i.l9,{label:a.createElement(o.h,null,u||(0,g.t)("folder_permissions_modal.email_invite_level"))},s(e)),a.createElement(i.mc,null,r.map((e,n)=>a.createElement(a.Fragment,{key:_(e)},a.createElement(i.c$,{value:_(e)},p(e)),d&&n<r.length-1&&a.createElement(i.wv,null)))))}let M={selectPrimaryText:{...l.g.textBodyMediumStrong,$$css:!0},selectSecondaryText:{...l.g.textBodyMedium,color:"xoq6bns",maxWidth:"x256u9z",textWrap:"xk4td0m",$$css:!0}}},769215:(e,r,n)=>{n.d(r,{k:()=>_});var a=n(848318),i=n(760893),o=n(376771),s=n(347701);n(82433);var l=n(178806),c=n(850426),d=n(967688),u=n(179040),p=n(479009),m=n(957872);function _({seatType:e,userInfo:r,priceString:n}){let[_,h]=(0,a.useState)(!1),g=a.createElement("div",{className:"x1g2dr8m xiqqdae xkezfkh x14kxzw3 x1giz659"},(0,d.t)("file_permissions_modal.update_seat_tab.this_may_impact_your_costs")),f=()=>h(!_),E=a.createElement(c.Ph,{href:p.Z,trusted:!0,newTab:!0,trackingProperties:{trackingDescriptor:m.c.LEARN_MORE}},(0,d.t)("file_permissions_modal.update_seat_tab.learn_more")),y=n?(0,d.tx)("file_permissions_modal.update_seat_tab.if_there_is_an_available_seat_proration_enabled",{userString:r,seatType:(0,u.JT)(e),priceString:n,learnMoreLink:E}):(0,d.tx)("file_permissions_modal.update_seat_tab.if_there_is_an_available_seat_proration_not_enabled",{userString:r,seatType:(0,u.JT)(e),learnMoreLink:E});return a.createElement(i.Yy,{variant:"default"},_?a.createElement(o.Q,null,a.createElement(l.e6,{onClick:f,trackingProperties:{trackingDescriptor:m.c.SEAT_COST_MESSAGING},className:"x78zum5 x1q0g3np x1qughib xh8yej3"},g,a.createElement(s.O,{className:"x19jd1h0"})),a.createElement("div",{className:"x1rmmofs"},y)):a.createElement(l.e6,{onClick:f,trackingProperties:{trackingDescriptor:m.c.SEAT_COST_MESSAGING},className:"x78zum5 x1q0g3np x1qughib xh8yej3"},a.createElement(o.Q,null,g),a.createElement(s.O,null)))}},255063:(e,r,n)=>{n.d(r,{$f:()=>w,I$:()=>A,Jr:()=>C,UM:()=>N});var a=n(615233),i=n(652021),o=n(49984),s=n(553709),l=n(946322),c=n(540539);let d={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},u={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},p={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[o.s.FIGMA_PARTNER]},m={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},_={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},h="1098405969270214551",g="1094001923188252679",f="1101944648482192724",E="1151936790942917527",y={[d.id]:h,[p.id]:f,[u.id]:g,[m.id]:E},b="1220512233196109878",v="1220802563996996107",T={[p.id]:b,[u.id]:v};function I(){return"prod"===(0,a.tl)().cluster_name}function S(e){if(!I())return[];switch(e){case h:return[_,d];case v:case g:return[_,u];case b:case f:return[_,p];case E:return[_,m];default:return[]}}function A(e){if(!I())return e;let r=S(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),a=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:a}}}function w(e){if(!I())return e;let r=i.qY(e)?.id;if(!r)return e;let n=S(r);if(0===n.length)return e;let a=(e.community_publishers?.accepted??[]).filter(e=>!n.find(r=>r.id===e.id)),o=n.concat(a);return{...e,community_publishers:{...e.community_publishers,accepted:o}}}async function C(e){if(!I())return[];try{let r=y[e];if(r){let e=(await c.U.getVersions({widgetId:r})).data.meta.plugin;return[A(e)]}}catch(e){console.error(e)}return[]}async function N(e){if(!I())return[];try{let r=T[e];if(r){let e=(await l.V.getVersions({pluginId:r})).data.meta.plugin;return[A(e)]}}catch(e){console.error(e)}return[]}},892576:(e,r,n)=>{n.d(r,{AB:()=>eI,Ce:()=>ey,Ho:()=>eu,Q7:()=>eg,TL:()=>eA,Xg:()=>eb,v_:()=>ew});var a,i,o,s,l,c=n(848318),d=n(301168),u=n(660376),p=n(536384),m=n.n(p),_=n(637640),h=n(857607),g=n(656329),f=n(210185),E=n(103661),y=n(129170),b=n(900089),v=n(476273),T=n(720522),I=n(642014),S=n(967688),A=n(952039),w=n(792001),C=n(143943),N=n(900003),L=n(823898),O=n(652021),R=n(577888),P=n(120094),D=n(81884),k=n(453370),M=n(31898),F=n(863270),x=n(913026),U=n(240176),B=n(103873),G=n(125761),V=n(543177),H=n(20687),z=n(324747),K=n(764474),W=n(17753),j=n(770686),Y=n(125952),$=n(175964),q=n(829623),X=n(970408),J=n(984107),Z=n(877686),Q=n(695552),ee=n(328292),et=n(335744),er=n(784508),en=n(739657),ea=n(776412),ei=n(417669),eo=n(409073),es=n(903761),el=n(445903),ec=n(579393),ed=n(424579);function eu(e){let r;let[n,a]=c.useState(!1),i=!n&&e.isSet?ei.Bz:e.isWhiteboard?ei.kj:ei.h1,o=e.showNewBadge?c.createElement(eg,null):e.showFigPickBadge?c.createElement(eh,null):c.createElement(c.Fragment,null),s=m()(e.isSet?ei.mH:ei.ZX,{[ei.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>a(!0),alt:e.alt,draggable:!1}):c.createElement(w.Xy,{className:s,image:e.image,onLoad:()=>a(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(Q.Ek,null),c.createElement("div",{className:i,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ei.cT},c.createElement(I.t,{svg:ed.A,className:ei.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ed.A})),e.showWhiteboardIcon&&c.createElement(ef,null))}function ep(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,a=e.plugin.org_id&&r?.[e.plugin.org_id],i=(0,H.uF)(e.plugin),{tagline:o,description:s,name:l}=i,u=(0,L.G8)({description:e.isPublishing?"":e.descriptionOverride??s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ei.Ak},c.createElement("div",{className:ei.vG},c.createElement("img",{src:i.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ei.wA},c.createElement(j.V,{plugin:i,className:ei.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ei.K9},l),u&&c.createElement("div",{className:l?ei.Ry:ei.Tk},u),n&&a&&c.createElement("div",{className:ei.jG},c.createElement(ea.H,{entityId:a.id,entityName:a.name,imgUrl:a.img_url,hideTooltip:!0}),a.name),e.showNewBadge?c.createElement(eg,null):e.showInstalledIcon&&c.createElement("span",{className:ei.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ei.ZR},e.name):c.createElement("div",{className:ei._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ei.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ei.cR:ei.i1,onClick:e.onClick},c.createElement("div",{className:ei.__},c.createElement("a",{className:ei.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(eu,{alt:e.name,hubFileId:e.hubFileId,image:e.backgroundImage,isSet:!!e.thumbnailIsSet,isWhiteboard:e.isWhiteboard,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showOriginalThumbnail:e.showOriginalThumbnail,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard}))),c.createElement("div",{className:ei.HC},c.createElement("div",{className:ei.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ei.bI},c.createElement("div",{className:ei.vz},em(e.commentsSetting)&&c.createElement(e_,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let em=e=>e!==B.Ni.ALL_DISABLED;function e_(e){return c.createElement("div",{className:ei.Z2},c.createElement(T.B,{className:ei.Ls,svg:el.A})," ",e.count)}function eh(){return c.createElement("div",{className:ei.jq,"data-tooltip-type":W.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ei.q2}))}function eg(){return c.createElement("div",{className:ei.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ei.q2}))}function ef(){return c.createElement("div",{className:ei.o_,"data-tooltip-type":W.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(I.t,{svg:eo.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:eo.A}))}function eE(e){let{CreatorsOverlay:r,creatorsOverlayProps:n}=a.useCreatorsHoverOverlay({resource:e.plugin}),i=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,N.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ei.IM:e.showAuthorByDefault?ei.Gf:ei.U$,onClick:e.onClick},i&&c.createElement(C.Mr,{resource:i||e.plugin}),c.createElement(r,{...n},c.createElement("div",{className:ei.w},c.createElement("div",{className:ei._F},c.createElement(ey,{plugin:e.plugin,showNewBadge:e.showNewBadge,showInstalledIcon:e.showInstalledIcon,isPublishing:e.isPublishing,descriptionOverride:e.descriptionOverride,isPublicOverride:e.isPublicOverride})),c.createElement(eb,{plugin:e.plugin,showInstallCount:e.showInstallCount,author:e.author,isPaid:e.isPaid,isPublicOverride:e.isPublicOverride,dropdown:e.dropdown}))))}function ey({plugin:e,showNewBadge:r,showInstalledIcon:n,isPublishing:a,descriptionOverride:i,isPublicOverride:o,...s}){let l=ev(e,o);return c.createElement(ep,{showInstalledIcon:n??l,showNewBadge:r,isPublishing:a,plugin:e,descriptionOverride:i},c.createElement("div",{className:ei.bs},c.createElement(v.C,{...s})))}function eb({plugin:e,showInstallCount:r,author:n,isPaid:i,dropdown:o,isPublicOverride:s}){let{AuthorsJSX:l}=a.useCreatorsHoverOverlay({resource:e}),u=(0,d.d4)(e=>e.authedActiveCommunityProfile),p=(0,x.cs)(u),m=ev(e,s),_=s??!!e.roles.is_public,h=(0,G.iZ)(),f=(0,d.wA)(),y=e.publisher||e.creator,v=c.createElement("div",{className:ei.gx},c.createElement("div",{className:ei.MN},l)),I=c.useCallback(r=>{if(r?.stopPropagation(),r?.preventDefault(),m)h&&(f(D.s1({id:e.id,resourceType:z.vt.PLUGIN,source:D.uR.COMMUNITY_HUB})),f(A.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{f(D.oj({id:e.id,resourceType:z.vt.PLUGIN,orgId:void 0}))}}})));else{if(!h){if(g.rr){window.location.href="/login";return}f(E.Ts({origin:"plugin_install_signed_out"})),f(M.to({type:er.l,data:{headerText:(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost"),icon:es.A,dispatch:f}}));return}f(D.oj({id:e.id,resourceType:z.vt.PLUGIN,orgId:void 0}))}},[m,e,h,f]);return c.createElement("div",{className:ei.uB},r&&c.createElement("div",{className:ei.Rw},_&&(n||v),!_&&c.createElement("div",{className:ei.Wf},c.createElement(T.B,{className:ei.hz,svg:ec.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ei.y},_&&em(e.comments_setting)&&c.createElement(e_,{count:e.comment_count}),i?c.createElement(ee.Ij,{metric:e.unique_run_count||0}):c.createElement("div",{className:g.Ay.mobile?ei.hA:ei.Pw},c.createElement(b.f,{className:g.Ay.mobile||p?ei.Ys:m?ei.XC:ei.sn,count:e.install_count,prefix:c.createElement("div",{className:ei.uu},m?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||p?void 0:I}),m&&c.createElement("div",{className:ei.a_,onClick:g.Ay.mobile||p?void 0:I},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),o)),!r&&c.createElement(Y.Ro,{entity:y,size:24}))}function ev(e,r){let n=(0,d.d4)(e=>e.authedActiveCommunityProfile),a=(0,x.zp)();return(void 0===r||r)&&e.roles.is_public?n?(0,J.a)(n,e):e.profile_install_status===K.u8.PLUGIN_INSTALLED_FOR_USER:e.install_status===K.u8.PLUGIN_INSTALLED_FOR_USER||!!a&&e.install_status===K.u8.PLUGIN_INSTALLED_FOR_ORG}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(et.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:et.it.LIGHT,className:ei.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ei.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,a=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],i=c.useRef(null),o=({profile:a,ref:i})=>c.createElement("span",{onMouseEnter:()=>{n(i),r(c.createElement(X.Qi,{publisher:a,className:ei.Ah}))},ref:i,className:e.avatarContainerClassName,key:`author-link-${a.id}`},c.createElement(X.Qi,{publisher:a,className:ei.CD,avatarClassName:ei.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(X.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ei.CD,avatarClassName:ei.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:a})=>{let i=c.createElement(X.Qi,{publisher:e[0],className:ei.CD});return c.createElement("div",{className:ei.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:i}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:i,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:a,className:ei.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ei.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:a[0]}),l({profiles:u,ref:i})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:a[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:a[r]})),(({profiles:a,ref:i})=>c.createElement("span",{ref:i,onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,a.map(e=>s({profile:e,stylesOverride:ei.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement($.f,{size:e.avatarSize,className:ei.zb,text:`${a.length}`})))({profiles:u.slice(4),ref:a[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:i}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:a={size:24,containerClassName:ei.H,showAuthorAndOthersTextLabel:!1}}){let[i,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:i,avatarStyleOverrides:a}),[l,o,s,i,a]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:a.showAuthorAndOthersTextLabel,avatarSize:a.size,avatarContainerClassName:a.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,a]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(a||(a={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,h.oJ)(e)){_.Ay.redirect((0,Z.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()}}render(){return c.createElement(eE,{onClick:this.onClick,showInstallCount:!0,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),dropdown:this.props.dropdown,plugin:this.props.plugin,isPublicOverride:this.props.isPublicOverride})}}e.ConnectedPluginTile=(0,d.Ng)(null,(e,r)=>({onClick:()=>{r.onClick?.(),e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(M.to({type:en.G$,data:{variations:[en.FF.OPT_IN],userId:n.id,onFinish:()=>e(P.C({id:r.pluginId,resourceType:z.vt.PLUGIN}))}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),a=r.plugin||(0,H.my)(r.pluginId,n);return c.createElement(e.ConnectedPluginTile,{...r,plugin:a})}})(i||(i={}));let eT=i.PluginTile,eI=(0,F.tf)(eT);class eS extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eS.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,h.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,V.a6)(this.props.hubFile);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.Ai,style:{backgroundColor:(0,U.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,Z.X$)(this.props.hubFile.id)},c.createElement("div",{className:ei.tr},c.createElement("div",{className:ei.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(k.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,h.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,H.uF)(this.props.resource),r=(0,z.xQ)(this.props.resource);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.IC,onClick:this.onPluginClick,href:r?(0,Z.YW)(this.props.resource.id):(0,Z.ho)(this.props.resource.id)},c.createElement(j.V,{className:ei.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ei.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,z.xQ)(r.resource)?e(k.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,h.oJ)(e)){let e=this.props.publicProfile;if(!e)return;_.Ay.redirect((0,R.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ei.uy} ${this.props.notTabletSidebarOptimized?ei.HG:""}`},c.createElement("div",{className:ei.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(Y.Ro,{entity:r,size:96,className:ei.W8})),c.createElement("div",{className:ei.kl},c.createElement("div",{className:ei.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ei.TD},c.createElement("div",{className:ei.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(ew,null)),e.location&&c.createElement("div",{className:ei._7},e.location),c.createElement("div",{className:ei.k1},!this.props.isOwnProfile&&c.createElement(q.W,{profile:e,followClassName:ei.u8,followingClassName:ei.u8,unfollowClassName:ei.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ei.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ei.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ei.iR},this.props.resources.map(e=>{let r=(0,O.Vm)(e);switch(r){case z.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case z.vt.PLUGIN:case z.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.xb)(r)}}),c.createElement(eS,{numResources:this.props.resources.length,maxResources:6,className:ei.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ei.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),a=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(k.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,a)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,a)((0,F.tf)(r))})(l||(l={}));let eA=l.ConnectedPublicProfileTile;function ew({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ei.x7})}l.ConnectedPublicProfileTileTracked},482999:(e,r,n)=>{n.d(r,{xZ:()=>R,z2:()=>P});var a=n(848318),i=n(301168),o=n(952647),s=n(186606),l=n(19180),c=n(536384),d=n.n(c),u=n(410441),p=n(29188),m=n(615233),_=n(656329),h=n(345964),g=n(720522),f=n(338104),E=n(209595),y=n(463117),b=n(318147),v=n(181630),T=n(259964),I=n(434289),S=n(698429),A=n(27776),w=n(32836),C=n(426430);let N=!1,L=()=>{if(N)return;N=!0;let e="",r=e=>Math.atan(e);for(let n=0;n<200;n++){let a=n/200,i=r(50*a)/r(50);e+=(100*a).toFixed(3)+"%{transform:scaleX("+i.toFixed(3)+");}"}let n="@-moz-keyframes progress-bar-animation {"+e+"}@-webkit-keyframes progress-bar-animation {"+e+"}",a=document.createElement("style");a.nonce=(0,m.Ay)().csp_nonce,a.textContent=n,document.head.appendChild(a)};function O(){return(0,l.k)().pride_inclusive_loading_bar?w.DT:""}function R(){let e=(0,E._6)();if("fullscreen"!==e.view)return null;let r=(0,v.ju)(e);return a.createElement(M,{editorType:(0,T.oD)(e.editorType),progressPaused:!0,editorTheme:r})}function P(e){switch(e.progressBarMode){case s.Oin.KEEP_UI:return a.createElement(D,{progressBarType:e.progressBarType,left:e.left});case s.Oin.HIDE_UI:case s.Oin.ON_AND_LOCKED:return a.createElement(M,{editorType:e.editorType,isViewer:e.isViewer,shouldNotOverflow:e.shouldNotOverflow});case s.Oin.OFF:return a.createElement(a.Fragment,null)}}function D(e){let r=(0,i.d4)(e=>(0,S.$A)(e.selectedView)?0:(0,u.jz)(A.uj0));return a.createElement("div",{className:w.A7},a.createElement("div",{className:w.BT}),a.createElement("div",{className:w.cE,style:{right:r}}),a.createElement(k,{progressBarType:e.progressBarType,left:e.left}))}function k(e){switch(e.progressBarType){case I.lF.SPINNER:return a.createElement("div",{className:w.AV},a.createElement(h.nt,null));case I.lF.BAR:default:return a.createElement(V,{className:w.Wn,style:{left:`${e.left||0}`}})}}function M(e){let r="whiteboard"===e.editorType?b._Y.WHITEBOARD:e.isViewer?"viewer":b._Y.DESIGN;return a.createElement(o.J,{brand:e.editorTheme},a.createElement("div",{className:d()(w.A7,e.shouldNotOverflow?w.ZT:null)},a.createElement("div",{className:d()({[w.dV]:"whiteboard"===r,[w.Dn]:"design"===r&&!_.rr,[w.k1]:"design"===r&&_.rr,[w.Mf]:"viewer"===r&&!_.rr,[w.mb]:"viewer"===r&&_.rr})}),"whiteboard"!==r&&a.createElement(x,{type:r,progressPaused:e.progressPaused}),"whiteboard"===r&&a.createElement(F,{progressPaused:e.progressPaused})))}function F(e){return a.createElement("div",{className:d()(w.Dg,{[w.cu]:e.progressPaused})},a.createElement("div",{className:w.oQ},a.createElement("div",{className:w.pm},a.createElement("div",{className:w.BL})),a.createElement("div",{className:w.pn},a.createElement("div",{className:w.Ts}),a.createElement("div",{className:w.n1})),a.createElement("div",{className:w.xo},a.createElement("div",{className:w.Ag}),a.createElement("div",null))),a.createElement(G,{type:"whiteboard",progressPaused:e.progressPaused}))}function x(e){let[r,n]=a.useState(!1),i=(0,y.aq)();return((p.eD?p.eD.getZoomFactor():_.Ay.chrome||_.Ay.safari?Promise.resolve(window.outerWidth/window.innerWidth):Promise.resolve(void 0)).then(e=>{e&&(e<.95||e>1.05)&&i()&&!r&&n(!0)}),r||(0,_.KR)()||f.z4.getIsExtension())?a.createElement(U,{type:e.type,progressPaused:e.progressPaused}):a.createElement(B,{type:e.type,progressPaused:e.progressPaused})}function U(e){let r="design"===e.type,n="viewer"===e.type&&_.rr,i="viewer"===e.type&&!_.rr;return a.createElement("div",{className:d()(w.Dg,{[w.iI]:e.progressPaused})},a.createElement("div",{className:d()({[w.OU]:!0,[w.Uo]:n,[w.v0]:i,[w.uq]:r})},a.createElement(g.B,{className:w.wn,svg:C.A})),a.createElement(G,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function B(e){let r="design"===e.type,n="viewer"===e.type&&_.rr,i="viewer"===e.type&&!_.rr;return a.createElement("div",{className:d()(w.Dg,{[w.cu]:e.progressPaused})},a.createElement("div",{className:d()({[w.OU]:!0,[w.Uo]:n,[w.v0]:i})},a.createElement("div",{className:w.pm},a.createElement("div",{className:`${w.hj} ${w.nR}`}),a.createElement("div",{className:`${w.Rp} ${w.nR}`}),a.createElement("div",{className:`${w.CU} ${w.nR}`}),a.createElement("div",{className:w.U0},a.createElement("div",{className:`${w.A6} ${w.nR}`}))),a.createElement("div",{className:w.pn},a.createElement("div",{className:`${w.Ts} ${w.nR}`}),a.createElement("div",{className:`${w.n1} ${w.nR}`})),a.createElement("div",{className:w.xo},a.createElement("div",{className:`${w.Ag} ${w.nR}`}),a.createElement("div",null))),a.createElement(G,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function G(e){let{type:r,progressPaused:n}=e,i=O();return a.createElement("div",{className:d()({[w.QT]:"design"===r,[w.WH]:"mobile_viewer"===r,[w.y6]:"desktop_viewer"===r,[w.Pd]:"whiteboard"===r})},a.createElement("div",{className:d()({[w.fb]:"design"===r,[w.$8]:"mobile_viewer"===r,[w.Zu]:"desktop_viewer"===r,[w._M]:"whiteboard"===r,[w.BM]:!0!==n,[i]:!0})},a.createElement("div",{className:w.On})))}function V({className:e,style:r,seconds:n=120}){let i=O();return L(),a.createElement("div",{className:`${w.pT} ${e||""} ${i}`,style:{MozAnimation:`progress-bar-animation ${n}s linear`,WebkitAnimation:`progress-bar-animation ${n}s linear`,...r}})}V.displayName="ProgressBarRelative"},813092:(e,r,n)=>{n.d(r,{C0:()=>u,EM:()=>d,fQ:()=>p,lT:()=>l,zX:()=>m});var a=n(476254),i=n(508328),o=n(225495),s=n(172797);function l(e){let r=localStorage.getItem((0,i.F)(e));return null===r?{sessions:[]}:JSON.parse(r)}function c(e,r){let n=(0,i.F)(e);localStorage.setItem(n,JSON.stringify(r))}function d(e){c(e,{sessions:[]})}async function u(e,r){let n=await l(e);n&&c(e,{sessions:n.sessions.filter(e=>e.startTime!==r)})}async function p(e,r){if(!r.actions||0===r.actions.length)return;let n=await l(e);if(!n){c(e,{sessions:[r]});return}n.sessions.push(r),c(e,n)}async function m(e){let r=await l(e),n=a.D.getState();try{let e=await (0,o.v)(),a=new e.ZipWriter(new e.BlobWriter("application/zip"));await a.add("session_history.json",new e.TextReader(JSON.stringify(r,null,2)));let i=await a.close(),l=URL.createObjectURL(i),c=new Date().toISOString().replace(/[:.]/g,"-"),d=`prototype_session_${n.openFile?._name}_${c}.zip`;s.hI.downloadFile(l,d),URL.revokeObjectURL(l)}catch(e){console.error("Failed to create and download session history zip:",e)}}},507354:(e,r,n)=>{n.d(r,{HC:()=>b,dU:()=>L});var a=n(848318),i=n(301168),o=n(534497),s=n(19180),l=n(536384),c=n.n(l),d=n(672496),u=n(967688),p=n(620105),m=n(375602),_=n(41795),h=n(67644),g=n(249555);let f="accessibilitytree--node--xYG8O",E="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",y="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function b({viewer:e,autofocus:r,setAutofocus:n}){let o;let s=(0,p.e)(),l=(0,i.d4)(e=>!!e.modalShown),d=a.useRef(s);return l||(d.current=s),o=d.current&&e?.hasActiveScene()?a.createElement(v,{viewer:e,autofocus:r,setAutofocus:n}):a.createElement("p",{className:g.Q},(0,u.t)("viewer.accessibilitytree.disabled_placeholder")),a.createElement("main",{className:c()("accessibilitytree--container--CjsLk","viewer-forward-keyevents")},o)}function v({autofocus:e,setAutofocus:r,viewer:n}){let i=function(e){let r=a.useMemo(()=>new C(e),[e]),n=(0,m._)(r);return a.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&n.updateSubtree(r)},a=r=>{let a=e.getPrototypeNode(r);a&&n.updateSubtree(a)};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),e.on("accessibilityNodeInvalidated",a),()=>{e.off("accessibilityNodeInvalidated",a),e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[r,n,e]),n}(n);return a.createElement(T,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:i})}let T=a.memo(function({accessibilityScope:e,autofocus:r,setAutofocus:n,viewer:i}){let[o,s]=a.useState(void 0),l=function(e,r){let n=a.useRef(null),i=n.current,o=i?.contains(i?.ownerDocument?.activeElement);return a.useLayoutEffect(()=>{if(!e&&!o)return;let a=n.current;a&&(e||!a.contains(a.ownerDocument.activeElement))&&(a.focus(),e&&r?.(!1))}),n}(r,n);return(a.useEffect(()=>{let e=()=>{let e=i.getTopmostFrameNode();e&&s(i.nodeId(e))};return i.on("topLevelFrameChange",e),()=>{i.off("topLevelFrameChange",e)}},[i]),a.useEffect(()=>{let e=i.getTopmostFrameNode();s(e?i.nodeId(e):void 0)},[i]),o)?a.createElement(I,{key:o,nodeId:o,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:i}):null});function I({parentId:e,nodeId:r,enabled:n=!0,focusRef:i,accessibilityScope:o,viewer:l}){let c;let u=(0,m.W)(r,o),p=l.getPrototypeNode(r);if(!u||!p)return null;let{isClickable:_,tag:h="div",role:g,label:b}=u,v=w.get(h)||{};switch(l.nodeType(p)){case"TABLE":c=function(e,r){let n=e.nodeTableCells(r).map(r=>({text:e.nodeTableCellContent(r),pos:e.nodeDisplayBounds(r)})).sort((e,r)=>e.pos.x<r.pos.x?-1:1),i={};for(let e of n)i[e.pos.y]?i[e.pos.y].push(e):i[e.pos.y]=[e];let o=Object.keys(i).sort();return[a.createElement("div",{role:"rowgroup",key:"table-header"},i[o[0]].map((e,r)=>a.createElement("span",{key:`header-${r}`,role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}}))),a.createElement("div",{role:"rowgroup",key:"table-body"},o.map((e,r)=>a.createElement("div",{key:e,role:"row","aria-rowindex":r},i[e].map((r,n)=>a.createElement("span",{key:`${e}-${n}`,role:"cell",className:f,style:{display:"inline-block",left:r.pos.x,top:r.pos.y,width:r.pos.width,height:r.pos.height}},r.text)))))]}(l,p);break;case"CODE_BLOCK":(0,s.k)().slides_viewer_a11y&&(c=function(e,r){let n=e.mapChildren(r,e=>e)?.[0];if(!n)return[];let i=O(e,n,"Line numbers"),o=O(e,n,"Text");if(!i||!o)return[];let s=(e.nodeText(i)||"").split("\n"),l=e.nodeText(o)||"";return s.length&&l.length?[a.createElement(a.Fragment,null,a.createElement("pre",null,a.createElement("code",null,l)),a.createElement("div",{className:"line-numbers"},s.map(e=>a.createElement("span",{key:e},e))))]:[]}(l,p));break;case"TEXT":c=L(l.nodeText(p)||"",l.nodeLineData(p)||[],l.nodeCharacterStyles(p),l.navigateToFrameAndCloseOverlays);break;default:c=u.childIds.map(e=>a.createElement(I,{key:e,nodeId:e,accessibilityScope:o,focusRef:void 0,viewer:l,parentId:r}))}let T=l.nodeScrollBounds(p),C=e&&l.getPrototypeNode(e),N=!n&&"none"||C||"canvas",R=A(l,p,T?"scrollContainer":N),P=_?{onClick:e=>{(0,d.f)(d.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),l.nodeTriggerInteraction(p,"ON_CLICK")},onFocus:()=>void l.nodeHover(p),onBlur:()=>void l.nodeReverseHover(p)}:{},D=a.createElement(h,{className:!n&&E||!!T&&y||f,style:R,tabIndex:i?0:void 0,ref:i,role:g,key:r,"aria-label":b,...v,...P},c);return T&&(D=a.createElement(S,{displayRect:A(l,p,N),enabled:n,scrollRect:T,onScrolled:(e,r)=>l.nodeScrollTo(p,e,r),scrollAreaContent:D})),D}function S({displayRect:e,enabled:r,onScrolled:n,scrollRect:i,scrollAreaContent:o}){let s=a.useRef(null),l=a.useRef(!1),c=a.useCallback(e=>{let r=e.target;("number"==typeof r?.scrollLeft||"number"==typeof r?.scrollTop)&&(l.current?l.current=!1:n?.(r.scrollLeft*i.width/r.scrollWidth,r.scrollTop*i.height/r.scrollHeight))},[n,i.height,i.width]);return a.useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scrollend",c),()=>e.removeEventListener("scrollend",c)},[c]),a.useEffect(()=>{let e=s.current;e&&(l.current=!0,i.width&&(e.scrollLeft=i.x*e.scrollWidth/i.width),i.height&&(e.scrollTop=i.y*e.scrollHeight/i.height))},[i.x,i.y,i.width,i.height]),a.createElement("div",{className:r?y:E,style:e,ref:s},o)}function A(e,r,n){switch(n){case"none":return{};case"canvas":{let{x:n,y:a,width:i,height:o}=e.nodeDisplayBounds(r);return{left:n,top:a,width:i,height:o}}case"scrollContainer":{let n=e.nodeCanvasSpaceBounds(r),a=e.nodeScrollBounds(r);if(!a)return{};{let e="100%",r="100%";return 0!==a.height&&(e=`${100*a.height/n.height}%`),0!==a.width&&(r=`${100*a.width/n.width}%`),{height:e,width:r}}}default:{let a=e.nodeCanvasSpaceBounds(n),i=e.nodeScrollBounds(n),o=e.nodeCanvasSpaceBounds(r),s=i?i.width:a.width,l=i?i.height:a.height,c=a.x,d=a.y,u=(o.x-c)/s,p=(o.y-d)/l,m=o.width/s,_=o.height/l;return{top:`${100*p}%`,left:`${100*u}%`,height:`${100*_}%`,width:`${100*m}%`}}}}let w=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);class C{constructor(e){this.viewer=e,this.comparePayloads=void 0}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&"SLIDE"!==n&&r)return r}interpret(e){return function(e,r){let n;let a=e.nodeType(r),i=e.nodeInteractions(r),o=!!i.find(e=>"ON_CLICK"===e.trigger),l=!!i.find(e=>("URL"===e.to||"INTERNAL_NODE"===e.to)&&"NAVIGATE"===e.type&&"ON_CLICK"===e.trigger),c=!!e.nodeScrollBounds(r),d=e.getTopmostFrameNode()===r,u=!e.nodeVisible(r),{tag:p,role:m,label:g}=function({tag:e,role:r,label:n}){let a,i,o;return e&&"AUTO"!==e&&(a=e.toLowerCase()),r&&"AUTO"!==r&&(i=r.toLowerCase()),n&&""!==n&&(o=n),{tag:a,role:i,label:o}}(e.nodeAccessibilityProperties(r)),f=p||m||g?_.vF.INCLUDE:void 0;if(u)void 0===f&&(f=_.vF.OMIT),f=void 0===f?_.vF.OMIT:f,p="div";else if(["SLIDE_GRID","SLIDE_ROW"].includes(a))f=_.vF.CHILDREN,p="div";else if(o&&"SLIDE"!==a){if(void 0===f&&(f=_.vF.INCLUDE),p||="button",l&&(m||="link"),!e.nodeText(r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,label:a,childIds:r}}}else switch((d||o||c)&&void 0===f&&(f=_.vF.INCLUDE),a){case"SLIDE":case"FRAME":if(d)p||="article",g||=e.nodeName(r),void 0===f&&(f=_.vF.INCLUDE);else{if(p||="div",!m&&N(e,r)){let a=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,inclusion:_.vF.INCLUDE,role:"img",label:e.label||a,childIds:r}}void 0===f&&(f=_.vF.CHILDREN)}break;case"BOOLEAN_OPERATION":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"VECTOR":N(e,r)?(p||="div",m||="img",g||=e.nodeName(r),void 0===f&&(f=_.vF.INCLUDE)):(p||="div",void 0===f&&(f=_.vF.OMIT));break;case"SHAPE_WITH_TEXT":{if(!(0,s.k)().slides_viewer_a11y){f=_.vF.OMIT;break}p||="section";let n=(0,h.ZG)(e.nodeShapeWithTextType(r));g||=n||e.nodeName(r),void 0===f&&(f=_.vF.INCLUDE);break}case"SYMBOL":case"INSTANCE":p||="article",void 0===f&&(f=_.vF.INCLUDE),g||=e.nodeName(r);break;case"TEXT":p||="p",void 0===f&&(f=_.vF.INCLUDE);break;case"TABLE":p||="div",m||="table",void 0===f&&(f=_.vF.INCLUDE);break;case"TABLE_CELL":p||="td",void 0===f&&(f=_.vF.OMIT);break;case"CODE_BLOCK":if(!(0,s.k)().slides_viewer_a11y){f=_.vF.OMIT;break}p||="figure",m||="code",void 0===f&&(f=_.vF.INCLUDE);break;default:p||="div",void 0===f&&(f=_.vF.INCLUDE),n=(e,r)=>(f=r.length?_.vF.INCLUDE:_.vF.OMIT,{...e,inclusion:f,childIds:r})}let E={inclusion:f,tag:p,role:m,label:g,isClickable:o};return n?.bind(null,E)??E}(this.viewer,e)}children(e){return this.viewer.mapChildren(e,e=>e)}}function N(e,r){let n=e.nodeFillTypes(r);return 1===n.length&&"IMAGE"===n[0]}function L(e,r,n,i){let s=e.split(/\n/mu),l=[];function c(e){for(;l.length>e+1;){let e,r;let[n,i]=l.pop();switch(n){case"UNORDERED_LIST":e="ul",r="li";break;case"ORDERED_LIST":e="ol",r="li";break;default:e="p",r="span"}l[l.length-1][1].push(a.createElement(e,{key:l[l.length-1][1].length},i.map((e,n)=>a.createElement(r,{key:n},e))))}}let d=0;for(let e=0;e<s.length;e++){let u=s[e],p=r[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===p.lineType&&(p.indentLevel=0),c(p.indentLevel),l.length>1&&l[l.length-1][0]!==p.lineType&&c(p.indentLevel-1);l.length<p.indentLevel+1;)l.push([p.lineType,[]]);l[l.length-1][1].push(function(e,r){let s=[];for(let l of n){let{start:n,end:c,props:d}=l,u=[...r].length;if(n>e+u)break;if(c<=e)continue;n=Math.max(0,n-e),c=Math.min(u,c-e);let p=RegExp(`(?:[^]{${n}})([^]{${c-n}})`,"u"),m=r.match(p)?.[1],_=d?.get?.("HYPERLINK"),h=d?.get?.("FONT_STYLE"),g=h?.toLowerCase()?.includes("italic"),f=h?.toLowerCase()?.includes("bold"),E=d?.get?.("FONT_SIZE"),y=d?.get?.("TEXT_DECORATION"),b={fontWeight:f?"bold":void 0,fontStyle:g?"italic":void 0,fontSize:E?`${E}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(y)};if("string"==typeof _?.url)s.push(a.createElement(o._,{key:n+e,style:b,href:_.url,newTab:!0,trusted:!0},m));else if(i&&"object"==typeof _?.guid){let r=_.guid;s.push(a.createElement("button",{key:n+e,type:"button",role:"link",onClick:()=>i(`${r.sessionID}:${r.localID}`)},m))}else f||g||E||y?s.push(a.createElement("span",{key:n+e,style:b},m)):s.push(m)}return s}(d,u)),d+=u.length+1}return c(0),l[0][1].map((e,r)=>"string"!=typeof e?e:a.createElement("p",{key:r},e))}function O(e,r,n){let a=e.mapChildren(r,e=>e);return a?.find(r=>e.nodeName(r)===n)??null}},360817:(e,r,n)=>{n.d(r,{Bt:()=>i,IO:()=>o,nO:()=>a});let a="prototyping-auth-comments-modal",i="prototype-comments-view",o="prototype-sidebar-panel"},898433:(e,r,n)=>{n.d(r,{F:()=>f});var a=n(848318),i=n(301168),o=n(967688),s=n(807949),l=n(31898),c=n(142896),d=n(765770),u=n(896156),p=n(209595),m=n(480945),_=n(244979),h=n(442022),g=n(710269);function f(e){let{nodeId:r,clientX:n,clientY:f,prototypeUrl:E,fileKey:y,startingPointsData:b}=e,v=(0,p.mr)(),T=(0,i.wA)(),I=(0,u.p)(),{showHotspots:S,showProtoSidebar:A,scalingInfo:w}=v,C=(0,m.b)(I,m.d.PROTOTYPE_FLOW_CONTEXT_MENU),N=(e,r)=>{let n=(0,_.vp)({scalingInfo:w,nodeId:e,startingPointNodeId:e,showHotspots:S,showProtoSidebar:A},null,null,C);T(s.S({fileKey:y,source:m.d.PROTOTYPE_FLOW_CONTEXT_MENU,url:`${r}${n}`,visualBellMessageOverride:(0,d.dE)({startingPointNodeId:e,startingPointsData:b}),visualBellButton:{text:(0,o.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>{T((0,l.to)({type:g.g_,data:{fileKey:y,source:d.nk.prototypeCopyLinkButtonVisualBell}}))}}}))},L=[{displayText:(0,o.t)("viewer.flows_sidebar.copy_link_to_flow"),callback:()=>N(r,E)}];return a.createElement("div",{className:`${c.Dm}`},a.createElement(h.j,{dispatch:T,items:L,parentRect:{width:10,height:10,left:n+100,top:f,right:n+110,bottom:f-10},onSelectItem:e=>{e.callback&&e.callback("",null,T)},showPoint:!1}))}},87127:(e,r,n)=>{n.d(r,{Z:()=>o});var a=n(848318),i=n(648346);function o(e,r,n){let o=n?.prototypeStartingPointsData(),s=n?.getActivePrototypeStartingPointNodeId();a.useEffect(()=>{let n=e.pages.find(r=>r.nodeId===e.currentPageId);n&&(0,i.i3)(r,n.name,o,s)},[r,e.pages,e.currentPageId,o,s])}},57109:(e,r,n)=>{n.d(r,{e:()=>d});var a=n(86956),i=n(857607),o=n(656329),s=n(61503),l=n(339042);let c=class e{constructor(r,n){this._isUIShown=r,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new a.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,r)=>{let n=e.clientY,a=window.innerHeight-e.clientY,i=85>Math.abs(window.innerWidth/2+r/2-e.clientX)&&a<60;n<(0,s.bG)()?this.showUiAndScheduleFade():i?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,r)=>{(r&&this._isUIShown()||e.keyCode===i.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=r=>{let a=!r&&this._inCommentsMode,i=!r&&this._rcsUserFlags.reduce((r,n)=>r||e.RCS_SHOWN_ON_UI.has(n),!1);a||i||n(r)}}};c.FADE_DELAY_MS=o.rr?1e3:2e3,c.RCS_SHOWN_ON_UI=new Set([l.e]);let d=c},159281:(e,r,n)=>{n.d(r,{Y9:()=>es});var a=n(848318),i=n(301168),o=n(534497),s=n(773511),l=n(469508),c=n(202272),d=n(239547),u=n(749214);let p=(0,a.memo)(function(e){return(0,u.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,u.jsx)("path",{fill:"var(--color-icon)",d:"M19.204 5.01A2 2 0 0 1 21 7v10l-.01.204a2 2 0 0 1-1.786 1.785L19 19H5l-.204-.01a2 2 0 0 1-1.785-1.786L3 17V7a2 2 0 0 1 1.796-1.99L5 5h14zM5 6a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h4V6zm14 12a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-9v12z"})})});var m=n(886911),_=n(668272),h=n(120124),g=n(19180),f=n(382902),E=n(536384),y=n.n(E),b=n(672496),v=n(398612),T=n(206639),I=n(630677),S=n(637640),A=n(354175),w=n(238462),C=n(287105),N=n(781239),L=n(540698),O=n(156974),R=n(720522);n(699342);let P={"data-fpl-audit-approved":""};var D=n(967688),k=n(952039),M=n(364619),F=n(453370),x=n(244534),U=n(52161),B=n(222428),G=n(620105),V=n(459403);n(353806);var H=n(511067),z=n(730143),K=n(209595),W=n(125761),j=n(313405),Y=n(17753),$=n(437631),q=n(628017),X=n(300656),J=n(360817),Z=n(655771),Q=n(241622),ee=n(813092),et=n(139801),er=n(454783),en=n(688699);let ea="PROTOTYPE_SETTINGS_DROPDOWN",ei="proto_header_options_dropdown",eo=(0,V.ck)();function es(e){let{prototype:r,file:n,shouldShowUI:l,recordingKey:d,optionsMenu:u,isCommentsDisabled:p}=e,m=(0,i.wA)(),_=(0,W.iZ)(),h=(0,H.Um)(),E=(0,K.mr)(),b=a.useRef(null),A=a.useRef(null),w=e=>{e.preventDefault(),m((0,j._P)({name:"Prototype Logo Clicked"})),m((0,x.eH)())},O=(e,r)=>b.current&&b.current.getBoundingClientRect().width<970?e:r,R=!!_&&n.canView,k=v.GZ()&&!(0,L.nl)(),M=k&&null==(0,C.qg)(S.Ay.location.search).fullscreen,B=window.matchMedia("(max-width:830px)").matches&&!(0,L.PN)(),G=er.wx;if(M&&!eo){let r=(0,T.sN)(T.Uv,(0,T.HL)(e.prototypeBGColor));G=(0,T.HD)(r)?er.RA:er.cZ}let V=!!h&&h.type===ea,z=(0,f.md)(Z.jH),Y=(0,f.md)(Z.M);return l&&r.showProgressBar?a.createElement(ec,{onClickLogo:w}):a.createElement(a.Fragment,null,a.createElement("div",{className:y()(G,{[er.Wc]:e.shouldHideHeader&&"loading"!==Y&&!z,[er.G2]:e.sidebarData.isSidebarOpen||e.isCommentsSidebarOpen}),ref:b,...P,role:"region","aria-label":(0,D.t)("viewer.menu_bar.accessible_label"),onBlurCapture:e.onBlurCapture,onFocusCapture:e.onFocusCapture,onMouseMove:e.onMouseMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:er.Cd},!k&&a.createElement(eu,{recordingKey:N.Pt(d,"accessibility-button"),setAccessibilityTreeFocus:e.setAccessibilityTreeFocus}),a.createElement(el,{onClickLogo:w}),!k&&e.startingPointsData&&e.startingPointsData?.length>0&&a.createElement("div",{ref:A},a.createElement(em,{setShowSidebar:e.sidebarData.setShowSidebar,isSidebarOpen:!!E.showProtoSidebar,sidebarId:e.sidebarData.sidebarId})),(!k||eo)&&a.createElement(ep,{recordingKey:N.Pt(d,"comments-button"),selected:e.prototype.showComments,onClick:_?()=>{r.showComments?m(U.BZ()):p||m(U._b())}:e.showAuthCommentsModal,targetId:_?J.Bt:J.nO,disabled:p}),!k&&e.startingPointsData&&e.startingPointsData?.length>0&&(0,g.k)().internal_prototyping_debug_tool&&(0,g.k)().prototype_debug_recorder_enabled&&a.createElement(eh,{selected:!1,viewer:e.viewer,dispatch:m})),a.createElement("div",{className:er.SP},!k&&!1,!k&&a.createElement("h1",{className:R?er.Ou:er.DD,dir:"auto"},n.name),k&&a.createElement("h1",null,a.createElement(o._,{newTab:!0,trusted:!0,className:er.DD,href:`/proto/${n.key}`},n.name)),!k&&R&&a.createElement("div",{className:er.hg},a.createElement(s.E,{"aria-label":(0,D.t)("proto.options_dropdown"),"aria-expanded":V,"aria-haspopup":"menu","aria-controls":V?ei:void 0,onClick:e=>{e.stopPropagation(),V?m(F.oB()):m(F.j7({type:ea}))},className:er.pz},a.createElement(c.k,null)),V&&a.createElement(ed,{viewer:e.viewer||null,file:n}))),a.createElement("div",{className:er.DK},(0,g.k)().prototype_preload_offline&&a.createElement(Z.ez,null),(!k||eo)&&e.multiplayer&&!e.shouldHideHeader&&a.createElement(q.Cv,{dropdownShown:h,multiplayer:e.multiplayer,user:_}),(!k||eo)&&a.createElement(et.Ay,{user:_,shareText:O((0,D.t)("viewer.menu_bar.share"),(0,X.f)(e.file.editorType)?(0,D.t)("viewer.menu_bar.share_presentation"):(0,D.t)("viewer.menu_bar.share_prototype")),loginText:O((0,D.t)("viewer.menu_bar.log_in"),(0,D.t)("viewer.menu_bar.log_in_or_create_account")),fileKey:n.key}),!B&&u,!eo&&a.createElement(e_,{inFullScreenMode:e.inFullScreenMode,dispatch:m}))),!k&&!eo&&!_&&!E.hideUI&&a.createElement($.P,{origin:I.DT.PROTOTYPE,hideOnMobile:!0,overrideUseFedCMPrompt:!1}))}function el(e){let r=v.GZ()&&!eo&&null==(0,C.qg)(S.Ay.location.search).fullscreen,n=er.UF;return r&&(n=er.m_),a.createElement("div",{className:n},a.createElement(l.N,{href:"/",onClick:e.onClickLogo,"aria-label":(0,D.t)("proto.file_browser")},r&&a.createElement(R.B,{svg:en.A}),!r&&a.createElement(R.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="18" viewBox="0 0 12 18"><path fill="#1abcfe" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M6 9c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3"/><path fill="#0acf83" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M0 15c0-1.657 1.343-3 3-3h3v3c0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3"/><path fill="#ff7262" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M6 0v6h3c1.657 0 3-1.343 3-3 0-1.657-1.343-3-3-3z"/><path fill="#f24e1e" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M0 3c0 1.657 1.343 3 3 3h3V0H3C1.343 0 0 1.343 0 3"/><path fill="#a259ff" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M0 9c0 1.657 1.343 3 3 3h3V6H3C1.343 6 0 7.343 0 9"/></svg>',useOriginalSrcFills_DEPRECATED:!0})))}function ec(e){return a.createElement("div",{className:er.uH},a.createElement(el,{onClickLogo:e.onClickLogo}))}function ed(e){let{viewer:r,file:n}=e,o=(0,i.wA)(),[s,l]=(0,Q.nN)(),c=r?.getBaseScreenId(),d=`/file/${n.key}/${encodeURIComponent(n.name)}?node-id=${c}`;return s&&l&&(d+=`&prev-plan-id=${s}&prev-plan-type=${l}`),a.createElement("div",{className:er.fh},a.createElement(O.X3,{id:ei,hideDropdown:()=>o(F.oB()),options:[a.createElement(O.c$,{key:"open-in-editor",href:d,onMouseDown:()=>{o((0,j._P)({name:"Prototype Original Source Clicked"}))}},(0,D.tx)("viewer.menu_bar.open_in_editor"))]}))}function eu({setAccessibilityTreeFocus:e,recordingKey:r}){let n=a.useRef(null),[o,s]=a.useState(!1),{width:l}=(0,A.wY)(n)??A.cU,c=a.useCallback(()=>s(!0),[]),d=a.useCallback(()=>s(!1),[]),u=(0,i.wA)(),p=(0,G.e)(),m=e=>{u(k.F.enqueue({type:"accessibility-dom-enabled",role:"status",get message(){return e?(0,D.t)("viewer.options.accessible_dom_enabled"):(0,D.t)("viewer.options.accessible_dom_disabled")}})),u((0,B.X7)({enabled:e,scope:"SESSION"}))},_=N.rf(r,"click",r=>{(0,b.f)(p?b.h.SKIP_TO_CONTENT:b.h.ENABLE_AND_SKIP_TO_CONTENT,{isMouseEvent:r?.screenX!==0&&r?.screenY!==0}),m(!0),e(!0)});return a.createElement("div",{ref:n,className:er.ts,style:o?void 0:{marginLeft:-l}},a.createElement("button",{className:er.O6,onClick:_,onFocus:c,onBlur:d},(0,D.tx)("proto.header.skip_to_content")))}class ep extends N.o6{constructor(){super(...arguments),this.onClick=N.cZ(this,"click",()=>{this.props.onClick()})}render(){return a.createElement(s.E,{onClick:this.onClick,"aria-label":(0,D.t)("proto.comment"),"aria-controls":this.props.targetId,className:y()(this.props.selected&&!this.props.disabled?er.WB:er.zQ,{[er.r9]:this.props.disabled}),htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-testid":"prototype-header-comments-button","data-tooltip":this.props.disabled?(0,D.t)("fullscreen_actions.comments-disabled"):(0,D.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"}),"data-onboarding-key":"prototype-comment"}},a.createElement(d.f,{className:y()({[er.WO]:this.props.disabled})}))}}function em(e){let r=N.rf(e.recordingKey,"click",()=>{e.setShowSidebar(!e.isSidebarOpen)});return a.createElement(s.E,{htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":`${e.isSidebarOpen?(0,D.t)("viewer.flows_sidebar.close_sidebar"):(0,D.t)("viewer.flows_sidebar.open_sidebar")}`},onClick:r,"aria-label":(0,D.t)("proto.flows"),"aria-controls":e.sidebarId,className:er.e3},a.createElement(p,null))}ep.displayName="ToggleCommentsButton";class e_ extends a.PureComponent{constructor(){super(...arguments),this.onClick=v.R7.fullscreen?()=>{this.props.dispatch((0,M._M)())}:w.lQ}render(){let e;let r=v.R7.fullscreen;return e=r?this.props.inFullScreenMode?(0,D.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,D.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,D.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement(s.E,{"aria-label":e,className:this.props.classNameOverride||(v.R7.fullscreen?er.Yd:er.E1),disabled:!r,onClick:this.onClick,htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":e}},this.props.inFullScreenMode?a.createElement(m.p,null):a.createElement(_.O,null))}}function eh(e){let r=(0,z.tS)(),[n,i]=a.useState(()=>e.viewer?.isRecordingCommands()||!1);return a.useEffect(()=>{i(e.viewer?.isRecordingCommands()||!1)},[e.viewer]),a.createElement(s.E,{onClick:()=>{if(r){if(e.viewer?.isRecordingCommands()){let n=e.viewer?.stopRecordingCommands();(0,ee.fQ)(r,n),i(!1)}else e.viewer?.restartPrototype(),e.viewer?.beginRecordingCommands(),i(!0)}},disabled:!r,"aria-label":r?(0,D.t)("viewer.menu_bar.record"):(0,D.t)("viewer.menu_bar.record_unavailable"),className:y()(e.selected&&r?er.WB:er.zQ,{[er.r9]:!r}),htmlAttributes:{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":r?(0,D.t)("viewer.menu_bar.record"):(0,D.t)("viewer.menu_bar.record_unavailable"),"data-testid":"prototype-header-record-button"}},a.createElement(h.m,{className:y()({[er.DN]:n},{[er.WO]:!r})}))}e_.displayName="ToggleFullScreenButton"},434124:(e,r,n)=>{n.d(r,{bi:()=>v,hg:()=>S});var a=n(660376),i=n(186606),o=n(553547),s=n(382902),l=n(476254),c=n(303397),d=n(702038),u=n(903660),p=n(313405),m=n(441831),_=n(93067),h=n(289508),g=n(618061);let f=0,E=()=>{0!==f&&(l.D.dispatch((0,p.Zh)({name:"prototype.frame_following_selection_replaced",params:{jumps:f}})),f=0)},y=()=>{(f+=1)>=5&&E()};var b=(e=>(e[e.SHOWN=0]="SHOWN",e[e.HIDDEN=1]="HIDDEN",e[e.NOT_LOADED=2]="NOT_LOADED",e))(b||{}),v=(e=>(e[e.OPEN=0]="OPEN",e[e.CLOSED=1]="CLOSED",e[e.NOT_LOADED=2]="NOT_LOADED",e))(v||{});let T={navigateForwardEnabled:!1,navigateBackwardEnabled:!1,currentPresentedNode:null,requestedNodeId:null,modalStatus:2,wasModalOpenedSinceViewerLoaded:!1,sizeInfo:null,scalingInfo:{viewportScalingMode:"scale-down-width",contentScalingMode:"fixed"},targetFrameFollowingEnabled:!1,targetFrameFollowingScrollToNode:void 0,showDeviceFrameEnabled:!0,getCurrentViewerSize:null,previewKeyForErrorBoundary:0,isCrashed:!1,exporting:!1,buzzInlinePreviewStatus:2,buzzInlinePreviewPosition:{left:0,top:0},timelinePlayerState:{status:"stopped",currentTimeMs:0,totalTimeMs:0}},I=e=>(g.A.ensureClosed(),E(),{...e,requestedNodeId:null,currentPresentedNode:null,modalStatus:1}),S=(0,s.um)(T,(e,r)=>{let{type:n}=r,l=e;switch(n){case"OPEN_INLINE_PREVIEW":{let{sceneGraph:n,requestedNodeId:i,onOpen:o}=r.payload;g.A.navigateTo(i),g.A.notifyWasModalOpenedSinceViewerLoaded(!0),s.zl.set(u.yw,!0);let c=n.get(i);(0,a.vA)(!!c,"expected selectedNode to exist");let d=(0,h.hF)(e.sizeInfo,!1,e.showDeviceFrameEnabled,i,n);o(d.initialViewerSize);let p=e.isCrashed?e.previewKeyForErrorBoundary+1:e.previewKeyForErrorBoundary;l={...e,requestedNodeId:i,currentPresentedNode:i,sizeInfo:d,modalStatus:0,wasModalOpenedSinceViewerLoaded:!0,isCrashed:!1,previewKeyForErrorBoundary:p};break}case"OPEN_SLIDES_INLINE_PREVIEW":l={...e,scalingInfo:{viewportScalingMode:"contain",contentScalingMode:"fixed"},forceScalingInfo:{viewportScalingMode:"contain",contentScalingMode:"fixed"},modalStatus:1,targetFrameFollowingEnabled:!0};break;case"OPEN_BUZZ_INLINE_PREVIEW":{let{sceneGraph:n,requestedNodeId:i,onOpen:o}=r.payload;g.A.navigateTo(i),g.A.notifyWasModalOpenedSinceViewerLoaded(!0),s.zl.set(u.yw,!0);let c={viewportScalingMode:"contain",contentScalingMode:"fixed"};g.A.setScalingMode(c,!1);let d=n.get(i);(0,a.vA)(!!d,"expected selectedNode to exist");let p=(0,h.hF)(e.sizeInfo,!1,e.showDeviceFrameEnabled,i,n);o(p.initialViewerSize);let m=e.isCrashed?e.previewKeyForErrorBoundary+1:e.previewKeyForErrorBoundary;l={...e,requestedNodeId:i,sizeInfo:p,isCrashed:!1,previewKeyForErrorBoundary:m,forceScalingInfo:c,scalingInfo:c,buzzInlinePreviewStatus:1};break}case"UPDATE_BUZZ_INLINE_PREVIEW":{let{status:n,position:a,size:i,requestedNodeId:o}=r.payload;l={...o?C(e,o,!1):e,...void 0!==n&&{buzzInlinePreviewStatus:n},...a&&{buzzInlinePreviewPosition:a},...i&&{sizeInfo:{breakpoint:e.sizeInfo?.breakpoint||{type:h.l5.SMALL},initialViewerSize:i}}};break}case"CLOSE_INLINE_PREVIEW":l=I(e);break;case"RESET_INLINE_PREVIEW":g.A.ensureClosed(),l={...T,targetFrameFollowingScrollToNode:e.targetFrameFollowingScrollToNode,modalStatus:1};break;case"HANDLE_EDITOR_SELECTION_CHANGED":{if(0!==e.modalStatus)break;let n=i.X3B.getInlinePreviewNodeIdOnSelectionChange(),{sceneGraph:a}=r.payload;l=o.fn(o.sH(n))?C(e,n):w(e,a);break}case"UPDATE_PRESENTED_NODE":e.targetFrameFollowingEnabled&&r.payload.nodeId!==e.currentPresentedNode&&(y(),(0,d.tJ)([r.payload.nodeId],!1),(0,a.vA)(!!e.targetFrameFollowingScrollToNode,"Scroll callback should have been set already through SET_SCROLL_CALLBACK."),e.targetFrameFollowingScrollToNode(r.payload.nodeId)),l={...e,currentPresentedNode:r.payload.nodeId};break;case"UPDATE_FRAME_CONTROLS":l={...e,navigateForwardEnabled:r.payload.navigateForwardEnabled,navigateBackwardEnabled:r.payload.navigateBackwardEnabled};break;case"CHANGE_DEVICE_FRAME":{let n,i;if(0!==e.modalStatus)break;(0,a.B1)(e.sizeInfo,"sizeInfo must be set");let{sceneGraph:o,oldPresetIdentifier:s,oldRotation:c,newPresetIdentifier:d,newRotation:u}=r.payload;(e=>{e[e.DEVICE=0]="DEVICE",e[e.ROTATION=1]="ROTATION",e[e.STYLE=2]="STYLE"})(n||(n={}));let p=!!s&&!!d,m=c===u&&p&&(0,_.Ew)(d,s);if(s!==d&&m?i=2:s===d&&p?c!==u&&(i=1):i=0,(0,a.vA)(void 0!==i,"changeType must be set"),1===i){(0,a.vA)(!!e.getCurrentViewerSize,"getCurrentViewerSize must be set");let r=e.getCurrentViewerSize();(0,a.vA)(e.sizeInfo.breakpoint.type===h.l5.DEVICE,"breakpoint must be device"),l={...e,sizeInfo:{breakpoint:{type:h.l5.DEVICE,x:e.sizeInfo.breakpoint.y,y:e.sizeInfo.breakpoint.x},initialViewerSize:{x:r.y,y:r.x}}}}else if(0===i){(0,a.vA)(!!e.currentPresentedNode,"currentPresentedNode must be set");let r=(0,h.hF)(e.sizeInfo,!0,e.showDeviceFrameEnabled,e.currentPresentedNode,o);l={...e,sizeInfo:r}}else 2===i||(0,a.xb)(i);break}case"RESIZE_MODAL":{let{sceneGraph:n}=r.payload;(0,a.vA)(!!e.currentPresentedNode,"currentPresentedNode must be set"),(0,a.vA)(!!e.sizeInfo,"sizeInfo must be set");let i=n.get(e.currentPresentedNode);(0,a.vA)(!!i,"expected selectedNode to exist");let o=(0,h.HS)(n,i);l={...e,sizeInfo:{...e.sizeInfo,breakpoint:o}};break}case"HANDLE_VIEWER_LOADED":g.A.setScalingMode(e.scalingInfo,!1),g.A.navigateTo(e.requestedNodeId),c.Y5.triggerAction("inline-preview-loaded");break;case"HANDLE_READY_TO_RECEIVE_MESSAGES":g.A.notifyWasModalOpenedSinceViewerLoaded(e.wasModalOpenedSinceViewerLoaded);break;case"TOGGLE_TARGET_FRAME_FOLLOWING":E(),l={...e,targetFrameFollowingEnabled:!e.targetFrameFollowingEnabled};break;case"ENABLE_TARGET_FRAME_FOLLOWING":l={...e,targetFrameFollowingEnabled:!0};break;case"TOGGLE_SHOW_DEVICE_FRAME":l={...e,showDeviceFrameEnabled:!e.showDeviceFrameEnabled};break;case"SET_SCROLL_CALLBACK":l={...e,targetFrameFollowingScrollToNode:r.payload};break;case"SET_CURRENT_VIEWER_SIZE_CALLBACK":l={...e,getCurrentViewerSize:r.payload};break;case"HANDLE_PREVIEW_CRASHED":l={...I(e),isCrashed:!0};break;case"SET_PREVIEW_IS_RESPONSIVE":if(r.payload){let r={viewportScalingMode:"contain",contentScalingMode:"responsive"};l={...e,scalingInfo:r,forceScalingInfo:r}}else{let r=A(e);l={...e,scalingInfo:r,forceScalingInfo:void 0}}g.A.setScalingMode(l.scalingInfo,!0);break;case"REQUEST_EXPORT":{let{nodeIds:n}=r.payload;g.A.export(n),l={...e,exporting:!0};break}case"HANDLE_EXPORT_COMPLETED":l={...e,exporting:!1};break;case"TIMELINE_PLAYER_PLAY":g.A.play();break;case"TIMELINE_PLAYER_PAUSE":g.A.pause();break;case"UPDATE_TIMELINE_PLAYER_STATE":{let{status:n,currentTimeMs:a,totalTimeMs:i}=r.payload;l={...e,timelinePlayerState:{status:n,currentTimeMs:a,totalTimeMs:i}};break}default:(0,a.xb)(n)}if(!l.forceScalingInfo&&l.sizeInfo?.breakpoint?.type!==e.sizeInfo?.breakpoint?.type){let e=A(l);l={...l,scalingInfo:e},g.A.setScalingMode(e,!1)}return N(e,l,r),l}),A=e=>e.sizeInfo?.breakpoint?.type===h.l5.DEVICE?{viewportScalingMode:"fit-width",contentScalingMode:"fixed"}:{viewportScalingMode:"scale-down-width",contentScalingMode:"fixed"},w=(e,r)=>{let{currentPresentedNode:n}=e;if(n&&null==r.get(n)){let r=(0,m.s)();return r?(g.A.navigateTo(r),{...e,requestedNodeId:r,currentPresentedNode:r}):(g.A.ensureClosed(),{...e,requestedNodeId:null,currentPresentedNode:null,modalStatus:1})}return e},C=(e,r,n=!0)=>{let{requestedNodeId:a,currentPresentedNode:i}=e;return r===a&&r===i?e:(g.A.navigateTo(r),{...e,requestedNodeId:r,...n&&{currentPresentedNode:r}})},N=(e,r,n)=>{let{type:i}=n,o=e=>{c.Y5.triggerAction("inline-preview-presented-node-changed",{currentHighlightedNode:e})},s=r.currentPresentedNode!==e.currentPresentedNode,l=0===r.modalStatus;switch(i){case"UPDATE_PRESENTED_NODE":l&&s&&o(r.currentPresentedNode);break;case"OPEN_INLINE_PREVIEW":o(r.currentPresentedNode);break;case"CLOSE_INLINE_PREVIEW":o(null);break;case"HANDLE_EDITOR_SELECTION_CHANGED":s&&o(r.currentPresentedNode);break;case"OPEN_SLIDES_INLINE_PREVIEW":case"OPEN_BUZZ_INLINE_PREVIEW":case"UPDATE_BUZZ_INLINE_PREVIEW":case"TOGGLE_TARGET_FRAME_FOLLOWING":case"TOGGLE_SHOW_DEVICE_FRAME":case"CHANGE_DEVICE_FRAME":case"RESIZE_MODAL":case"HANDLE_VIEWER_LOADED":case"HANDLE_READY_TO_RECEIVE_MESSAGES":case"UPDATE_FRAME_CONTROLS":case"RESET_INLINE_PREVIEW":case"SET_SCROLL_CALLBACK":case"SET_CURRENT_VIEWER_SIZE_CALLBACK":case"HANDLE_PREVIEW_CRASHED":case"SET_PREVIEW_IS_RESPONSIVE":case"ENABLE_TARGET_FRAME_FOLLOWING":case"REQUEST_EXPORT":case"HANDLE_EXPORT_COMPLETED":case"TIMELINE_PLAYER_PLAY":case"TIMELINE_PLAYER_PAUSE":case"UPDATE_TIMELINE_PLAYER_STATE":break;default:(0,a.xb)(i)}}},289508:(e,r,n)=>{n.d(r,{HS:()=>g,hF:()=>b,l5:()=>p,xY:()=>m});var a=n(301168),i=n(660376),o=n(186606);n(967688),n(952039);var s=n(899386),l=n(303397),c=n(259964),d=n(175393),u=n(93067),p=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(p||{});function m(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides||e.selectedView.editorType===c.nT.Illustration)}let _=16/9,h=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:a}=n;return a?a.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:a.type===o.XQq.NONE?null:a.rotation===o.xOL.NONE?a.size:{x:a.size.y,y:a.size.x}:null};function g(e,r){let n=h(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},a)=>{let i=n/e.y,o=Math.min(i,r/e.x),{x:s,y:l}=f(a);if(o<1){if(o===i){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},a)=>{let{x:i,y:o}=f(a),s=o/e.y,l=Math.max(s,i/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let p=c.get(o);(0,i.vA)(!!p,"expected node to exist");let m=g(c,p);if(e&&(0,a.bN)(e.breakpoint,m)&&!r)return e;let h=l.Y5.getViewportInfo(),f=h.height-d.uF-32,b=Math.max(.5*h.width,104),v=(0,u.$W)(c),T=!!v&&(0,s.L_)(v);if(!(0===m.type&&n&&T)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/_};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,i.xb)(e)}}(m,p),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:m}}let I=c.getCurrentPage()?.prototypeDevice?.rotation;(0,i.B1)(I,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:A}=(0,u.is)(v,I),w=E(S,{x:b,y:f},c);return w=y(w,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(w,A,S),breakpoint:m}}},437977:(e,r,n)=>{n.d(r,{y:()=>A});var a=n(848318),i=n(301168),o=n(19180),s=n(979890),l=n(140357),c=n(156974),d=n(720522),u=n(967688),p=n(453370),m=n(90224),_=n(116103);let h="internal_debug_tools--button--3-eAq";var g=n(825840),f=n(204638),E=n(769773),y=n(231206),b=n(1757),v=n(954184),T=n(35715),I=n(643112);let S="PROTOTYPE_DEBUG_TOOLS_MENU";function A(e){let r=(0,i.d4)(e=>e.dropdownShown),n=(0,i.wA)(),A=r?.type===S,[,w]=a.useState({}),C=a.useCallback(()=>w({}),[]),{viewer:N}=e,[L,O]=a.useState(!1),[R,P]=a.useState(!1),D=(0,m.QJ)();return(0,o.k)().internal_prototyping_debug_tool?a.createElement("div",{className:"internal_debug_tools--debugContainer--CtxqL"},a.createElement(s.D8,{className:"internal_debug_tools--dropdownMenu--D-LuC",onClick:function(e){e.stopPropagation(),A?n(p.oB()):n(p.j7({type:S}))}},a.createElement("div",{className:"internal_debug_tools--dropdownMenuButton--5NXqo"},a.createElement("span",null,(0,u.tx)("viewer.debug_tools.debug_tools")),a.createElement("div",{className:"internal_debug_tools--buttonChevron--l5X4a"},a.createElement(d.B,{svg:E.A}))),A&&a.createElement(c.ms,{className:"internal_debug_tools--dropdown--5KC-1"},a.createElement(c.c$,{onClick:()=>{N?.isConnected()?N?.disconnectForTesting():N?.reconnectForTesting(),C()}},N?.isConnected()?(0,u.t)("viewer.debug_tools.disconnect_from_multiplayer"):(0,u.t)("viewer.debug_tools.reconnect_to_multiplayer")),a.createElement(c.c$,{onClick:()=>{(0,_.v)(!1);let e=document.getElementById("viewer_debug_stats");e?e.remove():N?(0,l.FL)(N):console.error("Viewer object doesn't exist")}},(0,u.tx)("viewer.debug_tools.toggle_debug_stats")),a.createElement(c.c$,{onClick:()=>window.testFakeLostContext?.()},(0,u.tx)("viewer.debug_tools.test_fake_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>window.testRealLostContext?.()},(0,u.tx)("viewer.debug_tools.test_real_web_gl_context_loss")),a.createElement(c.c$,{onClick:()=>{N?.takeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{N?.clearTileCachesAndTakeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.clear_tile_caches_and_take_spector_snapshot")),a.createElement(c.c$,{onClick:()=>{N&&(L?(N.renderLayerByLayerDeactivate(),O(!1),P(!1)):(N.renderLayerByLayerActivate(),O(!0)))}},(0,u.tx)("viewer.debug_tools.render_layer_by_layer")),a.createElement(c.c$,{onClick:()=>{N?.toggleRenderTreePrinting()}},(0,u.tx)("viewer.debug_tools.toggle_render_tree_printing")),a.createElement(c.c$,{onClick:D},"Feature Flag Bisector (\u2318\u2325\u2303X)"))),L?a.createElement("div",{className:"internal_debug_tools--layerByLayerRenderingControls--Oj1Jd"},a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerRewind()}},a.createElement(d.B,{svg:T.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerBackward()}},a.createElement(d.B,{svg:g.A})),R?a.createElement("button",{className:h,onClick:()=>{N&&R&&(N.renderLayerByLayerPause(),P(!1))}},a.createElement(d.B,{svg:I.A})):a.createElement("button",{className:h,onClick:()=>{N&&!R&&(N.renderLayerByLayerPlay(),P(!0))}},a.createElement(d.B,{svg:b.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerForward()}},a.createElement(d.B,{svg:y.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerDecreaseSpeed()}},a.createElement(d.B,{svg:f.A})),a.createElement("button",{className:h,onClick:()=>{N?.renderLayerByLayerIncreaseSpeed()}},a.createElement(d.B,{svg:v.A}))):null):null}},259525:(e,r,n)=>{n.d(r,{i:()=>g});var a=n(848318),i=n(143823),o=n(531788),s=n(989232),l=n(637640),c=n(656329),d=n(140357),u=n(720522),p=n(967688),m=n(553007),_=n(699531);function h(){let e=(0,m.b0)();return a.createElement("button",{type:"button",className:"loading_state_overlay--offlineSecondaryAction--tZCt4",onClick:()=>{e?location.reload():l.Ay.reload("The viewer is taking a long time to load.")}},(0,p.tx)("viewer.loading_overlay.reload"))}function g(e){let r=(()=>{let r=e.viewerEl?.getBoundingClientRect();return{top:r?.top||0,left:r?.left||0,width:r?.width||0,height:r?.height||0}})(),[n,l]=a.useState("LOADED"),[g,f]=a.useState(null),[E,y]=a.useState(null),[b,v]=a.useState(null),T=(0,m.b0)(),I=a.useCallback(e=>{"LOADED"!==e&&"SHORT_LOADING"!==e&&s.definedAnalyticsHandler.trackDefinedEvent("prototype.viewer_overlay_state",{overlayState:e,isInEmbed:(0,m.dH)(),isMirror:(0,c.Ji)(),isInlinePreview:T,interactionId:g||"",interactionCause:E||"",destinationId:b||""}),l(e)},[T,g,E,b]),S=a.useRef(null);return(a.useEffect(()=>{S.current&&clearTimeout(S.current),"SHORT_LOADING"===n?S.current=setTimeout(()=>{I("LONG_LOADING")},700):"LONG_LOADING"===n&&(S.current=setTimeout(()=>{navigator.onLine?I("LOADING_ERROR"):I("CONNECTION_ERROR")},1e4))},[n,I]),d.O5(e.viewer,"requestedStateChange",e=>{S.current&&clearTimeout(S.current),I("SHORT_LOADING"),e&&(y(e.cause),v(e.destinationId),f(e.interactionId))}),d.O5(e.viewer,"requestedStateChangeInitiated",e=>{S.current&&clearTimeout(S.current),I("LOADED")}),"LOADED"===n||"SHORT_LOADING"===n)?null:a.createElement("div",{className:"loading_state_overlay--overlayContainer--egThs"},r&&a.createElement("div",{className:"loading_state_overlay--contentContainer--20M6N",style:{...r}},"LONG_LOADING"===n?a.createElement(i.k,null):"LOADING_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--longLoadingContainer--FQgxf"},a.createElement(i.k,null),a.createElement("div",{className:"loading_state_overlay--longLoadingHelperText--Vp9LZ text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.this_is_taking_some_time_hang_on_while_this_finishes_loading")),a.createElement(h,null)):"CONNECTION_ERROR"===n?a.createElement("div",{className:"loading_state_overlay--offlineContainer--TMfk0"},a.createElement(u.B,{className:"loading_state_overlay--offlineSvg--GHCgu",svg:_.A}),a.createElement("div",{className:"loading_state_overlay--offlineTextContainer--kn7QV"},a.createElement("div",{className:"loading_state_overlay--offlineTitle--6hlCW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.can_t_connect_to_the_internet")),a.createElement("div",{className:"loading_state_overlay--offlineHelperText--qBa0p text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.check_your_connection_to_continue_with_the_prototype"))),a.createElement("div",{className:"loading_state_overlay--offlineButtonContainer--MyWop"},a.createElement(o.$n,{variant:"primary",onClick:()=>I("LONG_LOADING")},(0,p.tx)("viewer.loading_overlay.try_again")),a.createElement(h,null))):void 0))}},877137:(e,r,n)=>{n.d(r,{Ag:()=>j});var a=n(848318),i=n(301168),o=n(660376),s=n(773511),l=n(647900),c=n(461352),d=n(892419),u=n(912334),p=n(155132),m=n(767168),_=n(19180),h=n(382902),g=n(536384),f=n.n(g),E=n(398612),y=n(637640),b=n(656329),v=n(287105),T=n(781239),I=n(540698),S=n(720522),A=n(401970),w=n(967688),C=n(453370),N=n(31898),L=n(899386),O=n(209595),R=n(313405),P=n(456977),D=n(684246),k=n(442022),M=n(655771),F=n(553007),x=n(241622),U=n(454783),B=n(784500),G=n(769773),V=n(205658),H=n(679914),z=n(150813),K=n(542365),W=n(63815);function j({device:e,showHotspots:r,showPrototypeOptions:n,showDeviceFrame:g,setHideUI:j,recordingKey:Y,dropdownShown:$,isFooter:q}){let X=E.GZ()&&!(0,I.nl)()&&null==(0,v.qg)(y.Ay.location.search).fullscreen,J=(0,O.mr)(),Z=(0,i.wA)(),Q=a.useRef(null),ee=(0,h.md)(F.Bf),et=(0,M.s7)(),er=(0,b.o4)(),en=null!=e&&"PRESET"===e.type;(0,o.vA)(!q||en);let ea=!q&&en,ei=q&&en,eo=n&&!ea,es=en&&!ei,el=!ei,ec=!ei&&!er,ed=ei?"PROTOTYPE_OPTIONS_MENU_FOOTER":"PROTOTYPE_OPTIONS_MENU",eu=$&&$.type===ed;function ep(e){e.stopPropagation(),eu?Z(C.oB()):Z(C.j7({type:ed,data:{position:Q.current?.getBoundingClientRect()}}))}let em=(0,R.M9)(J),e_=eo?(function(e,r,n,i,o,s,d){let _=(0,F.Pz)(o,n),h=(0,F.Ac)(r,_),g=(_.findIndex(e=>e.scalingOptionId===h)+1)%_.length,f=_[g],E=n=>(function({option:e,currentScalingInfo:r,scalingHandlerOverride:n,recordingKey:i,showShortcut:o,dispatch:s,isFooter:d}){let _=(0,F.Ac)(r,[e]);return{displayText:(0,F.GP)(e.scalingOptionId,d),isChecked:_===e.scalingOptionId,callback:()=>n?n(e):void s((0,R.Jr)({...e.scalingInfo,userInitiated:!0,source:"presentation"})),recordingKey:i,shortcut:o?"Z":void 0,icon:d?void 0:function(e){switch(e){case F.IK.FIT_TO_SCREEN:return a.createElement(A.U,{svg:z.A,className:B.Fp},a.createElement(u.H,null));case F.IK.FIT_WIDTH:return a.createElement(A.U,{svg:K.A,className:B.Fp},a.createElement(p.v,null));case F.IK.FILL_SCREEN:return a.createElement(A.U,{svg:H.A,className:B.Fp},a.createElement(m.m,null));case F.IK.ACTUAL_SIZE:return a.createElement(A.U,{svg:V.A,className:B.Fp},a.createElement(l.O,null));case F.IK.RESPONSIVE:return a.createElement(A.U,{svg:W.A,className:B.Fp},a.createElement(c.V,null));default:return}}(e.scalingOptionId),unsetStrokeOnActiveOption:!0,name:e.scalingOptionId}})({dispatch:e,option:n,showShortcut:n.scalingOptionId===f.scalingOptionId,currentScalingInfo:r,scalingHandlerOverride:s,recordingKey:T.Pt({recordingKey:i},`option-${(0,F.Ti)(n.scalingOptionId)}`),isFooter:d});if(!(n!==F.Yu.DEFAULT&&!d&&_.length>=4))return _.map(e=>E(e));{let e=_.slice(0,2).map(e=>E(e)),r=_.slice(2).map(e=>E(e));return[{disabled:!0,displayText:(0,w.t)("viewer.options_menu.recommended_scaling_options")},...e,{disabled:!0,displayText:(0,w.t)("viewer.options_menu.other_scaling_options")},...r]}})(Z,em,ee,Y,e?.type,void 0,q).concat(P.w):[],eh=function(){let e=!!(0,O.mr)().disableDefaultKeyboardNav,r=F.pw();return{displayText:(0,w.t)("viewer.options_menu.disable_default_keyboard_navigation_v1"),isChecked:!e,callback:function(){r(!e)}}}(),eg=e=>{e!==em.contentScalingMode&&Z((0,R.Jr)({contentScalingMode:e,userInitiated:!0,source:"presentation"}))},ef=[{displayText:(0,w.t)("viewer.options_menu.fixed_size"),icon:a.createElement(A.U,{svg:V.A,className:B.Fp},a.createElement(l.O,null)),isChecked:"responsive"!==em.contentScalingMode,callback:()=>eg("fixed"),recordingKey:"fixed",unsetStrokeOnActiveOption:!0},{displayText:(0,w.t)("viewer.options_menu.responsive"),icon:a.createElement(A.U,{svg:W.A,className:B.Fp},a.createElement(c.V,null)),isChecked:"responsive"===em.contentScalingMode,callback:()=>eg("responsive"),recordingKey:"responsive",unsetStrokeOnActiveOption:!0},P.w],eE=function(e,r,n,a,i,{hideHotspots:o,hideDeviceFrame:s}={}){let l=[];return o||l.push({displayText:(0,w.t)("viewer.options_menu.show_hints_on_click"),isChecked:e,callback:function(){i((0,R.KJ)({showHotspots:!e}))},"data-onboarding-key":"toggleHotspots"}),s||l.push({displayText:(0,w.t)("viewer.options_menu.show_device_frame"),isChecked:n,callback:function(){i((0,R.t0)({showDeviceFrame:!n}))},recordingKey:"option-toggle-device-frame",hidden:!a,"data-onboarding-key":"toggleDeviceFrame"}),r?l:[]}(r,n,g,en,Z,{hideHotspots:ei,hideDeviceFrame:ea}),ey=function(){let e=(0,O.mr)(),r=(0,i.wA)(),n=(0,x.gV)(e),o=a.useCallback(e=>({recordingKey:T.Pt("device-option",e.presetIdentifier),isChecked:n?.presetIdentifier===e.presetIdentifier,callback:()=>{r((0,R.Zh)({name:"prototype.viewer_device_picker_changed",params:{presetIdentifier:e.presetIdentifier,framePresetWidth:e.framePresetSize.x,framePresetHeight:e.framePresetSize.y}})),r((0,R.mf)({newDevice:{type:"PRESET",presetIdentifier:e.presetIdentifier,size:e.framePresetSize,rotation:n?.rotation||"NONE"}}))},displayText:e.getI18nDeviceName(),sideText:`${e.framePresetSize.x}\u200A\xd7\u200A${e.framePresetSize.y}`,rightJustifySideText:!0}),[r,n]),s=e.initialDevice;return a.useMemo(()=>{let e=s?.presetIdentifier?(0,L.Fh)(L.hY[s.presetIdentifier].deviceName,s):null;if(!s||!e)return[];let r=[];r.push({disabled:!0,displayText:(0,w.t)("viewer.options_menu.device_dropdown.default")}),r.push(o(e)),r.push(P.w);let n=(0,L.qt)(s.presetIdentifier),a=(0,L.WT)(L.LM[n],s);r.push(...a.map(o));let i=(0,L.WT)(L.UV[n],s).filter(e=>!a.find(r=>r.presetIdentifier===e.presetIdentifier));return i.length>0&&r.push({displayText:(0,w.t)("viewer.options_menu.device_dropdown.other"),recordingKey:T.Pt({recordingKey:"device-option"},"other-options"),children:i.map(o)}),r.push(P.w),r},[s,o])}(),eb=function(e,r,{hideUIToggle:n}={}){return n?[]:[{displayText:(0,w.t)("viewer.options_menu.hide_ui"),isChecked:!1,callback:function(){e(!0),r((0,R._P)({name:"Prototype Hide UI",params:{hide:!0}}))},recordingKey:"hide-ui",shortcut:(0,F.Fg)()}]}(j,Z,{hideUIToggle:ei}),ev=function(e,r=!1){return r?[]:[{displayText:(0,w.t)("viewer.options_menu.accessibility_settings"),callback:()=>{e((0,N.to)({type:D.L}))},isChecked:!1}]}(Z,ei),eT=(0,_.k)().prototype_preload_offline?[{children:[...el?[eh]:[],...eE,...ec?[et]:[],...ev],displayText:(0,w.t)("proto.option_menu.advanced_settings"),recordingKey:"advanced-settings"}]:[...el?[eh]:[],...eE,...ev],eI=X?e_:[...ei?ey:[],...e_,...es?ef:[],...eT,...eb],eS=a.createElement(s.E,{onClick:ep,recordingKey:T.Pt({recordingKey:Y},"toggle"),"aria-label":(0,w.t)("viewer.options_menu.options"),className:U.My},a.createElement(d.P,{style:{margin:"0 8px"}})),eA=q?e?.presetIdentifier&&L.hY[e?.presetIdentifier].getI18nDeviceName()||"UNKNOWN DEVICE":void 0,ew=a.createElement(s.E,{onClick:ep,recordingKey:T.Pt({recordingKey:Y},"toggle"),htmlAttributes:{"data-fullscreen-intercept":!0,tabIndex:0},className:f()([B.kv,B.zG])},a.createElement("div",{className:B.g7},eA),a.createElement("div",{className:B.UT},a.createElement(S.B,{svg:G.A}))),eC=$?.data?.position??void 0,eN=f()({[B.HF]:q,[B.v6]:!q});return a.createElement("div",{className:eN,ref:Q},!q&&eS,q&&ew,eu&&!!eC&&a.createElement(k.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:eC,dispatch:Z,items:eI,recordingKey:"options-menu-dropdown",displayAboveTarget:q,alwaysShowCheckMarkOffset:!0}))}},827976:(e,r,n)=>{n.d(r,{AH:()=>d,Md:()=>l,pb:()=>s,z2:()=>o,zM:()=>c});var a=n(382902),i=n(38832),o=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(o||{}),s=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(s||{});let l=(0,a.um)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,r)=>{if(1===e.status)return e;switch(r.type){case 0:if(e.viewerInstanceLoaded)return i.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return i.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}});function c(e){return a.zl.sub(l,()=>{d()&&e()})}function d(){return 1===a.zl.get(l).status}},241622:(e,r,n)=>{n.d(r,{gV:()=>l,nN:()=>s,tK:()=>c});var a=n(848318),i=n(301168),o=n(209595);function s(){let e=(0,i.d4)(e=>e.lastVisitedPlan),r=(0,i.d4)(e=>e.lastVisitedPlanId),n=null;return e&&(r=e.planId,n=e.planType),[r,n]}function l(e){return e.initialDevice?.presetIdentifier===e.overrideDevice?.presetIdentifier?e.initialDevice||null:e.overrideDevice||e.initialDevice||null}function c(){let e=(0,o.mr)();return(0,a.useMemo)(()=>l(e),[e])}},660398:(e,r,n)=>{n.d(r,{z:()=>I});var a=n(848318),i=n(301168),o=n(19180),s=n(989232),l=n(637640),c=n(287105),d=n(314979),u=n(38832),p=n(127867),m=n(960199),_=n(209595),h=n(7531),g=n(259964),f=n(795234);let E=new class{constructor(){this.CanvasSchemaValidator=(0,f.vh)()}getCanvas(e){return this.CanvasSchemaValidator.validate(async({xr:r})=>await r.get(`/file/${e.fileKey}/canvas`,null,{responseType:"arraybuffer"}))}},y=new class{constructor(){this.CanvasFkSchemaValidator=(0,f.vh)()}getCanvasFk(e){return this.CanvasFkSchemaValidator.validate(async({xr:r})=>await r.get(`/version/${e.versionId}/canvas?fk=${e.fileKey}`,null,{responseType:"arraybuffer"}))}};var b=n(553007);async function v(e,r){try{return await y.getCanvasFk({versionId:e,fileKey:r})}catch{return(0,s.trackEvent)("Prototype Version Load Failed",{file_key:r,version_id:e}),null}}async function T(e){try{return await E.getCanvas({fileKey:e})}catch{return null}}function I(e){let{viewer:r,entry:n}=e,s=(0,i.wA)(),{file:f,versionId:E,nodeId:y,startingPointNodeId:I}=(0,_.mr)(),S=a.useRef(!1);return a.useEffect(()=>{(async()=>{if(!f.key||S.current)return;let e=(0,c.qg)(l.Ay.location.search),a="1"===e["disable-mp"]&&(0,o.k)().internal_only_debug_tools;h.T(),p.Q.setLoadTimeTracker(u.Su);let i=(b.dH()||"feed"===e["redirect-src"])&&E,_=i||a;if(_){let e=null;(e=i?await v(E,f.key):await T(f.key))?(r.loadFile({bytes:e.data,nodeId:y||"",startingPointNodeId:I||"",imagePrefixURL:`/file/${f.key}/image`,videoPrefixURL:`/api/files/${f.key}/videos`,editorType:(0,g.y9)(f.editor_type)},m.M),S.current=!0):s(d.s.flash("This prototype isn't available."))}else r.connectTo({fileKey:f.key,nodeId:y||"",startingPointNodeId:I||"",editorType:(0,g.y9)(f.editor_type)},m.M),S.current=!0;u.Su.handleAfterConnectTo({entry:n,connectionType:_?"file":"multiplayer",fullscreen:"Fullview-IC",logViewerWaiting:!1})})()},[s,f,E,y,I,r,n]),null}},306850:(e,r,n)=>{n.d(r,{L:()=>d});var a=n(848318),i=n(536384),o=n.n(i),s=n(256350),l=n(755534),c=n(297638);function d(e){let r=e.showSidebar;return a.createElement("div",{className:o()({"right_sidebar_panel--sidebarContainer--VeCtS right_sidebar_panel--container--CtQ1g":r,"right_sidebar_panel--sidebarContainerHidden--POHqM right_sidebar_panel--container--CtQ1g":!r,"right_sidebar_panel--withoutHeaderMargin--R9T7p":e.withoutHeaderMargin})},a.createElement(s.V,{className:c.s.flex.flex1.flexColumn.$},!1===e.scrollable?e.children:a.createElement(l.P,{className:"right_sidebar_panel--scrollContainer--ORIOM right_sidebar_panel--sidebarDragContainer--n0xNj",hideScrollbar:!0},e.children)))}},139801:(e,r,n)=>{n.d(r,{Ay:()=>w,Tk:()=>A,wh:()=>C});var a=n(848318),i=n(301168),o=n(531788),s=n(398612),l=n(630677),c=n(637640),d=n(656329),u=n(103661),p=n(311045),m=n(297638),_=n(967688),h=n(31898),g=n(696786),f=n(765770),E=n(169567),y=n(17753),b=n(844462),v=n(710269),T=n(454783);let I="node-id",S="prototype_header_nav_google_sso",A="slides_presentation_header_nav_google_sso";function w(e){let{user:r,fileKey:n,shareText:m,loginText:y}=e,A=(0,i.wA)(),w=(0,g.GS)(),N=!(0,d.C8)(),L=a.useCallback(()=>N,[N]),O=a.useCallback(()=>{let e=c.Ay.location.pathname,r=new URLSearchParams(c.Ay.location.search).get(I);r&&(e=s.dR(e,{[I]:r})),A(u.Ts({origin:"prototype_header_nav",redirectUrl:e})),A(h.to({type:b.x,data:{}}))},[A]);return w?a.createElement(C,{user:r,shareText:m,loginText:y,fileKey:n,showDefaultAuthModal:O,getShouldShowGoogleSSOButton:L,ssoOrigin:S}):r?a.createElement(a.Fragment,null,a.createElement("div",{className:T.TC},a.createElement(o.$n,{onClick:()=>{A(h.to({type:v.g_,data:{fileKey:n,source:f.nk.prototypeHeader}}))},htmlAttributes:{"data-onboarding-key":"share-prototype"}},m))):a.createElement("div",{className:T.TC},a.createElement(o.$n,{variant:N?"secondary":"primary",onClick:O},y),N&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:A,origin:S,redirectUrl:(0,s.jM)()}).then(e=>"login"===e.type&&A(u.My({userId:e.user.id})),e=>{(0,p.g)("google_signup_error",S,{error:e.message})})}},(0,_.tx)("footer_banner.continue_with_google")))}function C(e){let{user:r,fileKey:n,shareText:c,loginText:d,sharingDisabled:g,showDefaultAuthModal:b,ssoOrigin:T,getShouldShowGoogleSSOButton:I,tooltip:S}=e,A=(0,i.wA)();if(r)return a.createElement(a.Fragment,null,a.createElement(o.WW,{onClick:()=>{A(h.to({type:v.g_,data:{fileKey:n,source:f.nk.prototypeHeader}}))},disabled:g,htmlAttributes:{"data-tooltip":S,"data-tooltip-type":y.Ib.TEXT,"data-onboarding-key":"share-prototype"}},c));let w=I();return a.createElement("div",{className:m.s.flex.gap8.$},a.createElement(o.WW,{variant:w?"secondary":"primary",onClick:b},d),w&&a.createElement(E.H,{onClick:()=>{l.Rm({dispatch:A,origin:T,redirectUrl:(0,s.jM)()}).then(e=>"login"===e.type&&A(u.My({userId:e.user.id}))).catch(e=>{(0,p.g)("google_signup_error",T,{error:e.message})})},large:!0},(0,_.tx)("footer_banner.continue_with_google")))}},18009:(e,r,n)=>{n.d(r,{iO:()=>ea,xt:()=>en,rI:()=>ed});var a=n(848318),i=n(301168),o=n(559389),s=n(19180),l=n(7376),c=n(536384),d=n.n(c),u=n(540882),p=n(781239),m=n(133318),_=n(256350),h=n(755534),g=n(720522),f=n(967688),E=n(453370),y=n(614892),b=n(891627),v=n(658029),T=n(618695),I=n(948269),S=n(257019),A=n(990255),w=n(819632),C=n(868326),N=n(319647),L=n(958760),O=n(869704),R=n(730143),P=n(17753),D=n(813092);let k="recording_panel--scrollContainer--hLaXt legacy_pages_panel--scrollContainer--YR8Lw",M="recording_panel--flowDescriptionInnerPanelContent--ykIHD text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",F="recording_panel--sessionViewContainer--m6skq",x="recording_panel--sessionSelectContainer--6iJFo",U="recording_panel--resultsTable--4kXkD",B="recording_panel--tableActionRow--XQPQn",G="recording_panel--timestampCol--sIorH",V="recording_panel--labelCol--Yrqf2",H="recording_panel--timelineContainer--qlWoc",z="recording_panel--verticalLine--ho6-N",K="recording_panel--contentWithTopPadding--1htz0",W="recording_panel--timelineContainerPlayed--HHMtG",j="recording_panel--fakeBackground--Iuvig";var Y=n(954184);let $=function(e){let r=`${e}`;switch(e){case 0:case 6:r=(0,f.t)("viewer.prototype_recorder.reverse_hover");break;case 1:r=(0,f.t)("viewer.prototype_recorder.timer");break;case 2:r=(0,f.t)("viewer.prototype_recorder.hover");break;case 3:r=(0,f.t)("viewer.prototype_recorder.press");break;case 4:r=(0,f.t)("viewer.prototype_recorder.click");break;case 5:r=(0,f.t)("viewer.prototype_recorder.drag");break;case 7:r=(0,f.t)("viewer.prototype_recorder.reverse_press");break;case 8:r=(0,f.t)("viewer.prototype_recorder.mouse_down");break;case 9:r=(0,f.t)("viewer.prototype_recorder.mouse_up");break;case 10:case 12:r=(0,f.t)("viewer.prototype_recorder.mouse_in");break;case 11:case 13:r=(0,f.t)("viewer.prototype_recorder.mouse_out");break;case 14:case 16:r=(0,f.t)("viewer.prototype_recorder.scroll")}return r},q=e=>{let r=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);return`${r<10?"0"+r:r}:${n<10?"0"+n:n}`};function X(e){let{index:r,currActionIndex:n,startTime:i,sessionAction:o,onClick:s,onDelete:l,isRecording:c}=e,u=e?.sessionAction?.name?.split("|")[0]?.trim()||"",p=q(o.timeRecorded-i),m="INTERACTION"===o.type?`${$(o.action)} - ${u}`:(0,f.t)("viewer.prototype_recorder.misclick"),_=(e=>{if("MISCLICK"===e.type)return a.createElement(T.V,null);if("INTERACTION"===e.type){let r=$(e.action);if(r===(0,f.t)("viewer.prototype_recorder.click"))return a.createElement(I.V,null);if(r===(0,f.t)("viewer.prototype_recorder.scroll"))return a.createElement(S.N,null);if(r===(0,f.t)("viewer.prototype_recorder.hover")||r===(0,f.t)("viewer.prototype_recorder.mouse_in"))return a.createElement(A.R,null);if(r===(0,f.t)("viewer.prototype_recorder.misclick"))return a.createElement(T.V,null);else if(r===(0,f.t)("viewer.prototype_recorder.reverse_hover")||r===(0,f.t)("viewer.prototype_recorder.mouse_out"))return a.createElement(g.B,{svg:Y.A});else return a.createElement(I.V,null)}})(o),h=d()({[B]:!0,"recording_panel--tableActionRowInteractive--fU3ge":!0}),E=d()({"recording_panel--fakeBackground2--uKv7U":!0,"recording_panel--moved--2dxcB":r<=n});return a.createElement("button",{className:h,onClick:()=>{s()},type:"button"},a.createElement("span",{className:G},p),a.createElement("span",{className:H},a.createElement("span",{className:"recording_panel--circle--TfZ5i"},a.createElement("span",{className:j}),a.createElement("span",{className:E})),a.createElement("span",{className:z},a.createElement("span",{className:j}),a.createElement("span",{className:E}))),a.createElement("span",{className:V},a.createElement("span",{className:"recording_panel--actionIcon--loV-L"},_)," ",m,c&&a.createElement("div",{className:"recording_panel--deleteButtonContainer--K8TLd"},a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.delete_action"),onClick:e=>{e.stopPropagation(),l&&l(r)}},a.createElement(w.f,null)))))}function J(e){let r=(0,R.tS)(),[n,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(0),[l,c]=(0,a.useState)(-1),[u,p]=(0,a.useState)(!1),m=e.viewer?.isRecordingCommands()||!1,_=a.useRef(null),g=a.useRef(m),E=n?.sessions[o];a.useEffect(()=>{(async()=>{if(!r){i(null);return}let e=await (0,D.lT)(r);i(e),s(e.sessions.length-1)})()},[r]),a.useEffect(()=>{let n=null;return m&&r&&(n=setInterval(()=>{try{let r=e.viewer.getCurrentRecording();r&&(i({sessions:[r]}),s(0))}catch(e){console.error("Error polling current recording:",e)}},500)),()=>{n&&clearInterval(n)}},[m,e.viewer,r]),a.useEffect(()=>{g.current&&!m&&r&&(async()=>{try{let e=await (0,D.lT)(r);i(e),s(e.sessions.length-1)}catch(e){console.error("Error fetching complete session history after recording:",e)}})(),g.current=m},[m,r]);let y=e=>new Promise(r=>setTimeout(r,e)),b=async r=>{if(!E||!m)return;let n=E.actions.slice(0,r);e.viewer.stopRecordingCommands(),e.viewer.restartPrototype(),void 0!==E.startingNodeGUID&&"-1:-1"!==E.startingNodeGUID&&e.viewer.navigateToFrameAndCloseOverlays(E.startingNodeGUID),e.viewer.beginRecordingCommands();for(let e=0;e<n.length;e++){let r=n[e];void 0!==r&&await T(e,r,!1)}c(n.length-1)},T=async(r,n,a)=>{let i="MISCLICK"===n.type?250:750;c(r),a&&await y(i),p(!0),await y(250),p(!1),e.viewer.runProtoCommand(n)},I=async r=>{if(E&&0!==E.actions.length){if(r<l){e.viewer.restartPrototype(),void 0!==E.startingNodeGUID&&"-1:-1"!==E.startingNodeGUID&&e.viewer.navigateToFrameAndCloseOverlays(E.startingNodeGUID);for(let e=0;e<=r;e++){let r=E.actions[e];void 0!==r&&await T(e,r,!0)}}else if(r>l)for(let e=l+1;e<=r;e++){let r=E.actions[e];void 0!==r&&await T(e,r,!0)}}},S=async function(){if(E&&0!==E.actions.length){e.viewer.restartPrototype(),void 0!==E.startingNodeGUID&&"-1:-1"!==E.startingNodeGUID&&e.viewer.navigateToFrameAndCloseOverlays(E.startingNodeGUID);for(var r=0;r<E.actions.length;r++){let e=E.actions[r];void 0!==e&&await T(r,e,!0)}c(E.actions.length+1)}},A=function(){if(!E||0===E.actions.length)return a.createElement("div",null);let r=[];E.actions.forEach((n,i)=>{r.push(a.createElement(X,{key:i,currActionIndex:l,index:i,isRecording:m,onClick:async()=>{await I(i)},onDelete:m?b:void 0,sessionAction:n,setActiveRowIdx:c,startTime:E.startTime,viewer:e.viewer}))});let n=d()({[H]:!0,[W]:l>-1}),i=d()({[H]:!0,[W]:l>=E.actions.length-1,"recording_panel--timelineContainerPlayedEnd--bQGYh":l>=E.actions.length-1}),o=d()({[z]:!0,"recording_panel--verticalLineStartEnd--vSw8B":!0});return[a.createElement("div",{key:"start-timeline",className:B},a.createElement("span",{className:G},"00:00"),a.createElement("span",{className:n},a.createElement("span",{className:o})),a.createElement("span",{className:V})),...r,a.createElement("div",{key:"end-timeline",className:B},a.createElement("span",{className:G},q(E.endTime-E.startTime)),a.createElement("span",{className:i},a.createElement("span",{className:o})),a.createElement("span",{className:V}))]},j=a.createElement("select",{className:"recording_panel--sessionSelect--XTAsC",onChange:e=>{s(parseInt(e.target.value)),c(-1)},value:o},n?.sessions.map((e,r)=>{let n=e.startTime;return a.createElement("option",{key:r,value:r},f.t("viewer.prototype_recorder.session_label",{sessionNumber:r+1}),n?", "+new Date(n).toLocaleString():"")})),Y=()=>{e.viewer.restartPrototype(),c(-1)},$=u&&l>=0&&null!=E&&null!=E.actions&&l<E.actions.length&&E?.actions[l]?.canvasViewSpaceMousePosition!==void 0,J=[0,0];if($){let r=E?.actions[l]?.canvasViewSpaceMousePosition;r&&(J=e.viewer?.convertCanvasSpaceToViewportSpace([r.x,r.y]))}return r?a.createElement(a.Fragment,null,m&&a.createElement(h.P,{className:k,hideScrollbar:!0,width:e.width},a.createElement("div",{className:`${M} ${K}`,dir:"auto"},a.createElement("div",{className:F},a.createElement("div",{className:x},a.createElement("div",{className:"recording_panel--recordingStatusContainer--EfTOQ"},a.createElement("div",{className:"recording_panel--recordingStatusDot--Nt08U"}),(0,f.t)("viewer.prototype_recorder.recording_session",{sessionNumber:n?n.sessions.length:1})),a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.reset_all"),onClick:Y},a.createElement(C.E,null))),a.createElement("div",{className:U},A())))),!m&&a.createElement(h.P,{className:k,hideScrollbar:!0,width:e.width},a.createElement("div",{className:`${M} ${K}`,dir:"auto"},a.createElement("div",{className:F},a.createElement("div",{className:"recording_panel--manageContainer--T9lB4"},a.createElement("span",{className:"recording_panel--manageLabel--YxtI9"},(0,f.t)("multi_select_list.manage")),a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.upload_json"),onClick:()=>{r&&confirm((0,f.t)("viewer.prototype_recorder.upload_warning"))&&_.current?.click()},htmlAttributes:{"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,f.t)("viewer.prototype_recorder.upload_json"),"data-testid":"prototype-recorder-upload-button"}},a.createElement(N.A,null)),a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.download_json"),onClick:()=>r&&(0,D.zX)(r),htmlAttributes:{"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,f.t)("viewer.prototype_recorder.download_json"),"data-testid":"prototype-recorder-download-button"}},a.createElement(L.b,null)),a.createElement("input",{ref:_,type:"file",accept:".json,application/json",onChange:e=>{if(!r)return;let n=e.target.files?.[0];if(!n)return;if((0,D.EM)(r),!n.name.endsWith(".json")&&"application/json"!==n.type){alert((0,f.t)("viewer.prototype_recorder.invalid_json_file"));return}let a=new FileReader;a.onload=async e=>{try{let n=e.target?.result,a=JSON.parse(n);if(a.sessions&&Array.isArray(a.sessions))for(let e of a.sessions){if(!e.startTime||!e.endTime||!Array.isArray(e.actions))throw Error("Invalid session data structure in sessions array");await (0,D.fQ)(r,e)}else throw Error('Invalid JSON structure. Expected an object with a "sessions" array.');let o=await (0,D.lT)(r);i(o),s(o.sessions.length-1)}catch(e){console.error("Error parsing JSON file:",e),alert((0,f.t)("viewer.prototype_recorder.json_parse_error"))}_.current&&(_.current.value="")},a.readAsText(n)},className:"recording_panel--uploadFileInput--IrULo"})),a.createElement("div",{className:x},j,a.createElement("span",{className:"recording_panel--push--FA-JP"},a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.play_all"),onClick:S},a.createElement(O.H,null))),a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.reset_all"),onClick:Y},a.createElement(C.E,null)),n&&n.sessions.length>1&&a.createElement(v.K,{"aria-label":(0,f.t)("viewer.prototype_recorder.delete_session"),onClick:async()=>{if(r&&E&&confirm((0,f.t)("viewer.prototype_recorder.delete_session_confirm",{sessionNumber:o+1}))){await (0,D.C0)(r,E.startTime);let e=await (0,D.lT)(r);i(e),0===e.sessions.length?s(0):o>=e.sessions.length&&s(e.sessions.length-1),c(-1)}}},a.createElement(w.f,null))),$&&a.createElement(Z,{x:J[0],y:J[1],type:E?.actions[l]?.type??""}),a.createElement("div",{className:U},A()))))):a.createElement(h.P,{className:k,hideScrollbar:!0,width:e.width},a.createElement("div",{className:M,dir:"auto"},a.createElement("div",{className:F},a.createElement("div",{className:"recording_panel--noFileMessage--aWdtv"},a.createElement("p",null,(0,f.t)("viewer.prototype_recorder.no_file_available"))))))}function Z({x:e,y:r,type:n}){let[i]=(0,a.useState)(()=>document.getElementById("viewerContainer"));if(!i)return null;let o="MISCLICK"===n,s=d()({"recording_panel--circleTargetBase--0Q3OZ":!0,"recording_panel--circleTargetNormal--GzxV9":!o,"recording_panel--circleTargetMisclick--t7Pw-":o}),l=o?"recording_panel--misclickAnimation--zr3KZ":"recording_panel--clickAnimation--LwAA6";return b.createPortal(a.createElement("div",{className:`${s} ${l}`,style:{top:r-25+"px",left:e-25+"px"}}),i)}let Q="sidebar_panel--scrollContainer--Gng-6 legacy_pages_panel--scrollContainer--YR8Lw";var ee=n(7452),et=n(364616),er=n(45121);let en=240,ea="PROTOTYPE_FLOW_CONTEXT_MENU_DROPDOWN";function ei(e){return Math.max(en,Math.min(500,e||0))}var eo=(e=>(e[e.HEIGHT=0]="HEIGHT",e[e.WIDTH=1]="WIDTH",e))(eo||{});let es=(e,r,n)=>{if(l.x4){let a=JSON.parse(l.x4.getItem("viewer-sidebar-panel")||"{}");a[e]={...a[e],...0===r&&{height:n},...1===r&&{width:n}},l.x4.setItem("viewer-sidebar-panel",JSON.stringify(a))}},el=(e,r)=>{if(l.x4){let n=JSON.parse(l.x4.getItem("viewer-sidebar-panel")||"{}");0===r?delete n[e].height:1===r&&delete n[e].width,l.x4.setItem("viewer-sidebar-panel",JSON.stringify(n))}},ec=e=>{if(l.x4)return JSON.parse(l.x4.getItem("viewer-sidebar-panel")||"{}")[e]};function ed(e){let[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),s="SidebarPanel",l=(0,a.useRef)(!1),c=a.useMemo(()=>i?ei(i):en,[i]),d=p.rf(s,"mousedown",()=>{n(!0)}),u=p.rf(s,"mousemove",e=>{if(!r)return p.aH;{let r=ei(e.clientX);r!==c&&o(r)}}),m=p.rf(s,"mouseup",a=>{if(!r)return p.aH;a.stopPropagation(),e.setSidebarWidthInParent(c),n(!1)});(0,a.useEffect)(()=>(document.addEventListener("mousemove",u),document.addEventListener("mouseup",m,!0),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m,!0)}),[u,m]);let{openFileKey:_,startingPointsData:h,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,showSidebar:y,setSidebarWidthInParent:b}=e;(0,a.useEffect)(()=>{_&&i&&es(_,1,i)},[i,_]),(0,a.useEffect)(()=>{_&&(e=>{let r=ec(e);r&&r.width&&(o(r.width),b(r.width))})(_)},[_,b]),(0,a.useEffect)(()=>{!l.current&&h.length>0?l.current=!0:l.current&&0===h.length&&y&&E(!1)},[h,y,E]);let v=a.createElement(a.Fragment,null,a.createElement("nav",{className:"sidebar_panel--content--Ebl5L","aria-labelledby":ep,"aria-hidden":!e.showSidebar},a.createElement(e_,{recordingKey:"sidebarViewerPanel",width:c,openFileKey:_,startingPointsData:h,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,viewer:e.viewer})),a.createElement("div",{className:"sidebar_panel--edge--Rc8Ap",style:{left:c},onMouseDown:d,onDoubleClick:()=>{o(null),e.setSidebarWidthInParent(null),e.openFileKey&&el(e.openFileKey,1)}}));return a.createElement(eu,{id:e.id,showSidebar:e.showSidebar,width:c,viewer:e.viewer},v)}function eu({id:e,children:r,showSidebar:n,width:i}){let o=n?"shown":"hidden",[s,l]=a.useState(o),c=s!==o?"transition":s,d=(0,a.useCallback)(()=>{l(o)},[o]);return(0,a.useEffect)(()=>{if("hidden"===s&&"shown"===o){let e=requestAnimationFrame(()=>void l(o));return()=>void cancelAnimationFrame(e)}},[s,o]),a.createElement("div",{id:e,className:"hidden"===c?"sidebar_panel--panelContainerDisplayNone--e6-Gw sidebar_panel--container--nl8-a":"sidebar_panel--panelContainer--0R0Wb sidebar_panel--container--nl8-a",style:{width:i,marginLeft:"shown"===c?0:-i},onTransitionEnd:d},r)}let ep="sidebar-panel-heading-title";function em(){return a.createElement("div",{id:ep,className:"sidebar_panel--flowsHeaderText--vATd7 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L legacy_pages_panel--pagesHeaderText--vgHeJ",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(0,f.tx)("viewer.flows_sidebar.flows"))}function e_(e){let r=(0,a.useMemo)(()=>{let r={};for(let n=0;n<e.startingPointsData.length;n++)r[e.startingPointsData[n].id]=e.startingPointsData[n].description;return r},[e.startingPointsData]),[n,l]=(0,a.useState)(e.activePrototypeStartingPointNodeId),[c,b]=(0,a.useState)(r[e.activePrototypeStartingPointNodeId]),[v,T]=(0,a.useState)(!1),[I,S]=(0,a.useState)(null),[A,w]=(0,a.useState)(window.innerHeight),[C,N]=(0,a.useState)(!1),L=(0,a.useRef)(0),O=(0,a.useRef)(0),R=(0,a.useRef)(0),{openFileKey:P,activePrototypeStartingPointNodeId:D}=e,k=(0,i.wA)();(0,a.useEffect)(()=>{P&&I&&es(P,0,I)},[I,P]),(0,a.useEffect)(()=>{P&&(e=>{let r=ec(e);r&&r.height&&S(F(r.height))})(P)},[P]);let M=e=>{O.current=L.current=e.clientY,R.current=e.clientY-86,S(R.current)},F=e=>{let r=16-(e-7)%32;return r<0&&(r+=32),e+r},x=(0,a.useCallback)(e=>Math.max(55,Math.min(e,Math.round(A-64-96))),[A]),U=(0,a.useMemo)(()=>(0,o.s)(()=>{w(window.innerHeight)},45),[]);function B(r){e.onSelectFlow(r)}(0,a.useEffect)(()=>{let e=()=>{U()};return window.addEventListener("resize",e),()=>{U.cancel(),window.removeEventListener("resize",e)}},[U]),(0,a.useEffect)(()=>{let e=e=>{e.clientY!==L.current&&(S(x(R.current+e.clientY-O.current)),L.current=e.clientY)},r=r=>{v&&(r.preventDefault(),r.stopPropagation(),e(r))},n=e=>{e.stopPropagation(),e.preventDefault(),T(!1)},a=r=>{v&&(r.preventDefault(),r.stopPropagation(),e(r.touches[0]))},i=e=>{T(!1)};return document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchend",i),document.addEventListener("touchmove",a),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a)}},[x,v]),(0,a.useEffect)(()=>{l(D),b(r[D])},[D,r]);let G=c&&"<p><br></p>"!==c;return a.createElement("div",{className:"sidebar_panel--verticalFlexContainer--HTP2n",style:{width:e.width}},a.createElement("div",{className:d()("sidebar_panel--flowsListPanelContent--vU15E",C?"sidebar_panel--flowsListPanelContentExpanded--UIXbo":"sidebar_panel--flowsListPanelContentCollapsed--j3x3E")},a.createElement("div",{className:"sidebar_panel--flowsHeaderContainerWithShadow--ku5dU legacy_pages_panel--pagesHeaderContainerWithShadow--eCg-j legacy_pages_panel--pagesHeaderContainer--LWPh-"},a.createElement(em,null),a.createElement(m.Jn,{useOriginalSrcFills_DEPRECATED:!0,recordingKey:p.Pt(e,"closeSidebar"),className:"sidebar_panel--closeButton--XWnCD",onClick:()=>e.setShowSidebar(!1),innerText:"close",svg:er.A})),e.startingPointsData?a.createElement(_.V,null,a.createElement("div",{style:{height:I?x(I):(()=>{let r=32*e.startingPointsData.length,n=Math.round(.25*(A-64));return F(Math.min(r=32*Math.ceil(r/32)+16,n))})()},className:"sidebar_panel--flowsList--lbQgB legacy_pages_panel--pagesList--20gAo"},a.createElement(h.P,{className:Q,width:e.width,hideScrollbar:!0},e.startingPointsData.map((e,r)=>{let i="sidebar_panel--flowsRowSpacer--fu7iG";return 0===r&&(i="sidebar_panel--flowsRowSpacerInsertBeforeTop--j7UnJ sidebar_panel--flowsRowSpacer--fu7iG"),a.createElement("div",{className:i,key:e.id},a.createElement("button",{role:"link",className:"sidebar_panel--flowRow--1yyNX legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh","aria-current":n===e.id,key:e.id,onClick:()=>B(e.id),onTouchStart:()=>B(e.id),onContextMenu:r=>(function(e,r){e.preventDefault();let{clientX:n,clientY:a}=e;k(E.j7({type:ea,data:{clientX:n,clientY:a,nodeId:r}}))})(r,e.id)},a.createElement(g.B,{svg:ee.A,className:d()("sidebar_panel--flowRowSvg--GhKTM",n===e.id?"sidebar_panel--visibleCheckmark--0Ts8X":"sidebar_panel--hiddenCheckmark--O-kpW")}),a.createElement(y.JU,{className:d()(n===e.id?"sidebar_panel--flowNameSelected--T5iAg text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":"sidebar_panel--flowNameUnselected--DUjvf text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L")},e.name)))})))):null),a.createElement("div",{className:"sidebar_panel--resizeLineContainer--tIXt8"},a.createElement("div",{className:"sidebar_panel--resizeLine--u3PU-",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),M(e),T(!0)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),M(e.touches[0]),T(!0)},onDoubleClick:()=>{S(null),e.openFileKey&&el(e.openFileKey,0)}})),a.createElement("section",{"aria-label":(0,f.t)("proto.flow_description"),className:d()("sidebar_panel--flowDescriptionPanelContent--ogSmt",{"sidebar_panel--flowDescriptionText--pCFYA":G},C?"sidebar_panel--flowDescriptionPanelContentExpanded--kEcq4":"sidebar_panel--flowDescriptionPanelContentCollapsed--V6FZk")},a.createElement(h.P,{className:Q,hideScrollbar:!0},a.createElement("div",{className:"sidebar_panel--flowDescriptionInnerPanelContent--H7-qc text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",dir:"auto"},a.createElement(u.R,{fallback:null,errorFallback:null,value:G?c:(0,f.t)("viewer.flows_sidebar.no_description")})))),(0,s.k)().internal_prototyping_debug_tool&&(0,s.k)().prototype_debug_recorder_enabled&&a.createElement("div",{className:d()("sidebar_panel--recordingPanelSection--8qls1",C?"sidebar_panel--recordingPanelExpanded--Scme7":"sidebar_panel--recordingPanelCollapsed--7Rkk-")},a.createElement("div",{className:"sidebar_panel--recordingPanelHeader--nnpHA"},a.createElement("button",{className:"sidebar_panel--recordingPanelToggleButton--rz3PK text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",onClick:()=>{N(!C)},"aria-expanded":C},a.createElement(g.B,{svg:et.A,className:d()("sidebar_panel--recordingPanelToggleIcon--aR8Tf",C?"sidebar_panel--recordingPanelToggleIconExpanded--1ecFz":"sidebar_panel--recordingPanelToggleIconCollapsed--4DQO-")}),a.createElement("span",{className:"sidebar_panel--recordingPanelHeaderText--v6yoB"},(0,f.t)("viewer.flows_sidebar.recording")))),C&&a.createElement("div",{className:"sidebar_panel--recordingPanelContent--4V4m4"},a.createElement(J,{viewer:e.viewer,width:e.width}))))}},395910:(e,r,n)=>{n.d(r,{V:()=>ee});var a=n(848318),i=n(301168),o=n(186606),s=n(19180),l=n(382902),c=n(398612),d=n(464555),u=n(656329),p=n(810503),m=n(650395),_=n(304756),h=n(217172),g=n(198495),f=n(47440),E=n(972402),y=n(31898),b=n(863270),v=n(783310),T=n(353231),I=n(765770),S=n(783641),A=n(7148),w=n(209595),C=n(318147),N=n(313405),L=n(181630),O=n(357353),R=n(991675),P=n(578413),D=n(495831),k=n(715790),M=n(482999),F=n(293831),x=n(138111),U=n(981420),B=n(55276),G=n(710269),V=n(655771),H=n(827976),z=n(553007),K=n(660398),W=n(536384),j=n.n(W),Y=n(410441),$=n(27776),q=n(249555),X=n(143628);function J(e){let r;let n=(0,i.d4)(e=>!!e.modalShown),o=(0,Y.jz)($.P4e);return r=e.offscreen?"translateY(100vh)":`translateY(-${o}px)`,a.createElement("div",{"aria-hidden":n,className:j()({[X.E3]:!0,[X.Oy]:!0,[q.Q]:e.srOnly}),style:{transform:r}},e.children)}var Z=n(201140);function Q(e){let{livegraphData:r}=e,n=(0,w.mr)(),o=(0,i.d4)(e=>e.prototype),c=(0,i.d4)(e=>e.multiplayer),h=(0,i.d4)(e=>e.user),g=(0,i.wA)();a.useEffect(()=>(document.body.classList.add(Z.$7),()=>{document.body.classList.remove(Z.$7)}),[]);let f=(0,A.Yi)(n),v=(0,d.l7)()&&!(0,d.br)(),S=(0,E.xo)(),C=f||v||S,N=o.showComments&&!C,[L,O]=a.useState(null);(0,z.kZ)();let P=(0,z.l1)(L,n,e.scalingInfo,c,e.showHotspots,e.showDeviceFrame,N,o,h,"design"),[D,k]=a.useState(!1);a.useEffect(()=>{"prototype"===n.view&&P&&k(!0)},[P,n.view]);let M=a.useRef(!1);a.useEffect(()=>{(async()=>{if(n.file.key&&!M.current&&(0,m.x2)()&&(u.Ay.ios||u.Ay.android||u.Ay.mac&&navigator.maxTouchPoints>0))try{await _.Ay.post(`/file/${n.file.key}/generate_compressed_textures`),M.current=!0}catch(e){(0,p.xi)("image","Failed to generate compressed textures",{fileKey:n.file.key,error:e})}})()},[n.file]);let x=(0,l.md)(H.Md),W=r?r.file.key:"",j=a.useRef(!1);return a.useEffect(()=>{!j.current&&x.status===H.z2.LOADED&&n.share&&""!==W&&h&&(g((0,y.to)({type:G.g_,data:{fileKey:W,source:I.nk.fullscreenToolbar}})),j.current=!0)},[x.status,n.share,g,W,h]),(0,V.lF)(),a.createElement(a.Fragment,null,r&&(0,b.T8)(a.createElement(a.Fragment,null,a.createElement(B.A,null),a.createElement(F.Yp,{file:r.file,isCommentsDisabled:C,isCommentsMode:N,org:e.org,recordingKey:"prototypeView",scalingInfo:e.scalingInfo,setViewerElement:O,showDeviceFrame:e.showDeviceFrame,showHotspots:e.showHotspots,showPrototypeOptions:!0,viewer:P,viewerElement:L})),R.e0.PROTOTYPE,(0,T.oP)(r.file)),D&&!!P&&a.createElement(K.z,{viewer:P,entry:n.inlinePreview?"Preview":"Prototype"}),(0,s.k)().react_scenegraph&&a.createElement(U.U,{fallback:null}))}function ee(){let e=(0,w.mr)(),r=(0,i.d4)(e=>e.prototype),n=(0,i.d4)(e=>e.flashes),s=(0,i.d4)(e=>e.user),l=(0,i.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),p=(0,i.d4)(e=>e.interactionTestDialogShown),m=a.useRef(null),_=(0,d.f3)(),E=(0,v.Z)(_||"dark",m,e,!0),y=(0,z.PG)(e);if((0,k.d)())return a.createElement(k.O,null);let b=null==e.showHotspots||e.showHotspots,T=null==e.showDeviceFrame||e.showDeviceFrame;return a.createElement(L.uW.Provider,{value:E},a.createElement(D.K,{recordingKey:"inAppPage",containerRef:m},u.nW&&s&&!(0,c.GZ)()&&a.createElement(h.R,{userIdForTracking:s?.id,isCompact:!0}),a.createElement(Q,{scalingInfo:(0,N.M9)(e),showHotspots:b,showDeviceFrame:T,org:l,livegraphData:y}),!(0,d.jc)()&&(!y||r.showProgressBar)&&a.createElement(M.z2,{editorType:C._Y.DESIGN,isViewer:!0,progressBarMode:o.Oin.HIDE_UI}),a.createElement(g.a,{flashes:n}),a.createElement(P.V,null),a.createElement(f.Z,{positioner:J}),a.createElement(x.hG,null),p&&null,a.createElement(O.d,null,a.createElement(S.Ji,null))))}},67391:(e,r,n)=>{n.d(r,{Gv:()=>m,Uj:()=>u,ak:()=>p,iy:()=>_});var a,i=n(848318),o=n(469508),s=n(536384),l=n.n(s),c=n(863270),d=n(169752);let u=i.createContext(void 0);function p(e){return i.createElement("div",{className:l()(d.Qs,e.className)},e.children)}function m(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),i.createElement(u.Consumer,null,n=>i.createElement("div",{className:l()(d.Dg,e.containerClassName)},i.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function _(e){return i.createElement("div",{className:e.className?e.className:d.qr},e.children)}(a||(a={})).Content=function(e){return i.createElement("div",{className:e.className||d.xC,style:e.style},e.children)},(0,c.tf)(e=>i.createElement(o.N,{newTab:!0,trusted:!0,href:e.href,onClick:e.onClick},e.children))},89743:(e,r,n)=>{var a=n(848318),i=n(301168);n(938982),n(19180),n(536384),n(82009),n(865114),n(410725),n(998568),n(156974),n(264478),n(949325),n(720522),n(297638);var o=n(967688);n(952039),n(113752),n(912873),n(792700),n(453370),n(198479);var s=n(31898);n(533737),n(995218),n(696786),n(381673),n(511067),n(730143),n(318147),n(55116),n(520779),n(386252),n(17753);var l=n(446951);n(446695),n(195159),n(975695),n(175393),n(274016);var c=n(593713),d=n(226455);(0,l.Ju)(function(){let e=(0,i.wA)();return a.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},a.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},533978:(e,r,n)=>{n.d(r,{x:()=>c});var a=n(848318),i=n(536384),o=n.n(i),s=n(160674),l=n(884009);class c extends a.Component{componentDidMount(){this.interval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.interval)}render(){let e=(0,s.xT)(this.props.target);if(!e||!e.offsetParent)return a.createElement("div",null);{let r=e.getBoundingClientRect(),n=r.left+r.width/2,i=r.top+r.height/2,s=o()(l.xl,{[l.Df]:this.props.isBrandColor});return a.createElement("div",{className:s,style:{top:i,left:n}})}}}c.displayName="RcsCallout"},226455:(e,r,n)=>{n.d(r,{G8:()=>o,ao:()=>i,oi:()=>s,v4:()=>a});let a="share",i={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{})},704410:(e,r,n)=>{n.d(r,{LN:()=>a,No:()=>c,_L:()=>i,q3:()=>l});var a=(e=>(e.TOP_RIGHT="top-right",e.CENTER="center",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(a||{}),i=(e=>(e.LEFT_TITLE="left_title",e.RIGHT_TITLE="right_title",e))(i||{}),o=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.RIGHT_TITLE=2]="RIGHT_TITLE",e[e.RIGHT_BODY=3]="RIGHT_BODY",e[e.LEFT_TITLE=4]="LEFT_TITLE",e[e.TOP_RIGHT=5]="TOP_RIGHT",e))(o||{}),s=(e=>(e.FALLBACK="fallback",e.BEST_EFFORT="best_effort",e))(s||{}),l=(e=>(e.DRAGGABLE="draggable",e.FEATURE_UPDATE="feature_update",e.WELCOME="welcome",e.SELF_CONTAINED="self_contained",e.WALK_THROUGH="walk_through",e.ANNOUNCEMENT_POINTER="announcement_pointer",e.POINTER="pointer",e))(l||{});let c=740;var d=(e=>(e.ON_DARK="on_dark",e.ON_LIGHT="on_light",e.HIGH_CONTRAST="high_contrast",e.HIDDEN="hidden",e))(d||{})},28524:(e,r,n)=>{n.d(r,{CR:()=>y});var a=n(430385),i=n(382902),o=n(967688),s=n(638345),l=n(752181),c=n(138528),d=n(254028);let u=(0,i.eU)(()=>({questionKey:"what_do_you_do_k12_v1",options:new Set((0,a.k4)(["student","educator"])),getOptionDisplay:h})),p=(0,i.eU)(()=>{let e=(0,a.k4)(["developer","designer","marketer","product_manager","research","ux_writing","data_analytics"]);return e.push("something_else"),{questionKey:"what_do_you_do_org_ent_v1",options:new Set(e),getOptionDisplay:h}}),m=(0,i.eU)(()=>{let e=(0,a.k4)(["developer","designer","marketer","product_manager","research","ux_writing","data_analytics","student","educator"]);return e.push("something_else"),{questionKey:"what_do_you_do_free_pro_v1",options:new Set(e),getOptionDisplay:h}});function _(){let e=(0,i.md)(p),r=(0,i.md)(m),n=(0,c.X$)("useWhatDoYouDoV3"),{questionKey:a,options:s,getOptionDisplay:l}=(0,c.Az)(n).unwrapOr(!1)?e:r;return{questionKey:a,options:s,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.what_do_you_do"),getOptionDisplay:l}}function h(e){switch(e){case"developer":return(0,o.t)("auth.extra-info.job-type.software-development");case"designer":return(0,o.t)("auth.extra-info.job-type.design");case"product_manager":return(0,o.t)("auth.extra-info.job-type.product-management");case"marketer":return(0,o.t)("auth.extra-info.job-type.marketing");case"research":return(0,o.t)("user_onboarding_signals.v1.answer.research");case"ux_writing":return(0,o.t)("user_onboarding_signals.v1.answer.ux_writing");case"data_analytics":return(0,o.t)("user_onboarding_signals.v1.answer.data_analytics");case"educator":return(0,o.t)("user_onboarding_signals.answer.educator");case"student":return(0,o.t)("user_onboarding_signals.answer.student");case"something_else":return(0,o.t)("user_onboarding_signals.v2.answer.other")}}function g(){let{questionKey:e,options:r,getOptionDisplay:n}=_();return{questionKey:e,options:r,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.what_do_you_do_for_work"),questionSubtitle:(0,o.t)("new_user_experience.user_onboarding_signals.description.if_youre_multi_talented_pick_what_you_do_most_often"),getOptionDisplay:n}}let f=(0,i.eU)(()=>{let e=(0,a.k4)(["student","educator"]);return e.push("something_else"),{questionKey:"what_do_you_do_school_v1",options:new Set(e),getOptionDisplay:h}});function E(){let{questionKey:e,options:r,getOptionDisplay:n}=_();return{questionKey:e,options:r,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.which_role_best_describes_you"),questionSubtitle:(0,o.t)("new_user_experience.user_onboarding_signals.description.if_youre_multi_talented_pick_what_you_do_most_often"),getOptionDisplay:n}}function y(e){let r=(0,d.Oc)(),n=(0,i.md)(s.eS),a=(0,l.f)("not_gen_0"),p=function(){let{questionKey:e,options:r,getOptionDisplay:n}=(0,i.md)(u);return{questionKey:e,options:r,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.what_best_describes_you"),getOptionDisplay:n}}(),m=function(e){let r=g(),n=function(){let{questionKey:e,options:r,getOptionDisplay:n}=(0,i.md)(f);return{questionKey:e,options:r,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.whats_your_role_at_school"),questionSubtitle:(0,o.t)("new_user_experience.user_onboarding_signals.description.this_helps_us_know_what_tips_and_resources_to_share_with_you"),getOptionDisplay:n}}(),a=E();switch(e){case"work":return r;case"school":return n;default:return a}}(e),_=function(){let e=g(),r=E(),n=(0,c.X$)("useWhatDoYouDoGen1");return(0,c.Az)(n).unwrapOr(!1)?e:r}();return n.data?p:a&&!r?_:m}},883111:(e,r,n)=>{n.d(r,{z:()=>c});var a=n(848318),i=n(996202),o=n(611209),s=n(967688),l=n(630478);function c({clientType:e}){let r=(0,i.U)();(0,a.useEffect)(()=>{let n=Date.now();return()=>{let a=Date.now()-n;r("reconnecting_modal_shown",{msElapsed:a,clientType:e}),a>1e3&&(0,o.B3)(e)}},[e,r]);let n=`${l.hd} ${l.ME}`;return a.createElement("div",{className:n},a.createElement("div",{className:l.nw},(0,s.tx)("reconnecting_modal.loading")))}},833637:(e,r,n)=>{n.d(r,{w:()=>S});var a=n(848318),i=n(143823),o=n(82433),s=n(382902),l=n(989232),c=n(879263),d=n(665107),u=n(740495),p=n(863270),m=n(506428),_=n(594950),h=n(709292),g=n(209595),f=n(318147),E=n(677334),y=n(867078),b=n(592249),v=n(787194);let T={container:{borderRadius:"x1mxnbhz",boxShadow:"x1wu5q8a",display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",alignItems:"x6s0dn4",padding:"xtdwleo",minHeight:"x1wxaq2x",$$css:!0}},I={design:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-blue-900)":"var(--ramp-pale-blue-100)"}],whiteboard:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-purple-900)":"var(--ramp-pale-purple-100)"}],slides:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-persimmon-900)":"var(--ramp-pale-persimmon-100)"}],sites:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-violet-900)":"var(--ramp-pale-violet-100)"}],dev_mode:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-green-800)":"var(--ramp-pale-green-100)"}],figmake:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-violet-900)":"var(--ramp-pale-violet-100)"}],cooper:e=>[{background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},{"--background":"dark"===e?"var(--ramp-pale-pink-900)":"var(--ramp-pale-pink-100)"}]};function S(e){let r=(0,m.DP)(),n=(0,s.md)(h.NT),S="fullscreen"===(0,g._6)().view,A=(0,u.kt)(),w=a.useMemo(()=>e.numAvatarsRequested??d.EH,[e.numAvatarsRequested]),C=a.useCallback(()=>A(e.licenseType,e.entryPoint),[A,e.licenseType,e.entryPoint]),[N]=(0,E.IT)((0,v.Ki)({seatType:e.seatType,licenseType:e.licenseType,planParentId:e.planData.planParentId,planType:e.planData.planType})),[L]=(0,E.IT)((0,v.B7)({seatType:e.seatType,licenseType:e.licenseType,numAvatarsRequested:w,jobTitleQueryResult:n,totalActiveUsersQueryResult:N,planData:e.planData,isInExperiment:C})),O=a.useMemo(()=>e.licenseType??function(e){switch(e){case _.ud.EXPERT:return f.G_.DESIGN;case _.ud.COLLABORATOR:return f.G_.WHITEBOARD;case _.ud.DEVELOPER:return f.G_.DEV_MODE;default:return f.G_.DESIGN}}(e.seatType),[e.licenseType,e.seatType]);if((0,c.I)(null!=L.data,r=>{l.definedAnalyticsHandler.trackDefinedEvent("activation.time_to_load_social_proof",{loadTimeMS:r,planType:e.planData.planType,planParentId:e.planData.planParentId,planTier:e.planData.planTier,licenseType:e.licenseType??"",seatType:e.seatType??"",socialProofEntryPoint:e.entryPoint})}),"loaded"!==n.status||"loaded"!==N.status)return null;if("loading"===L.status)return a.createElement("div",{"data-testid":"social-proof",...o.xk(T.container,I[O](r))},a.createElement(i.k,null));if("loaded"!==L.status||0===L.data.length)return null;let R=L.data,P=N.data.total_active_users,D={planType:e.planData.planType,planParentId:e.planData.planParentId,planTier:e.planData.planTier,licenseType:e.licenseType,seatType:e.seatType,jobTitle:n.data,socialProofEntryPoint:e.entryPoint,socialProofTotalActiveUsers:P,socialProofActiveUserAvatars:R.map(e=>e.id).join(",")};return a.createElement(p.fu,{name:"Social Proof",properties:D},a.createElement("div",{"data-testid":"social-proof",...o.xk(T.container,I[O](r),O===f.G_.WHITEBOARD&&S&&I.whiteboard("light"))},a.createElement(y.Y,{users:R,maxShow:w,licenseType:O,isInFullScreen:S}),a.createElement(b.z,{firstUserName:R[0]?.name??"",totalActiveUsers:P,licenseType:e.licenseType,seatType:e.seatType})))}},141839:(e,r,n)=>{n.d(r,{Qv:()=>b,RO:()=>y,we:()=>E});var a=n(848318);n(891627),n(301168),n(186606),n(320953),n(553547),n(768618),n(19180),n(382902);var i=n(536384),o=n.n(i);n(989232);var s=n(410441);n(857607),n(781239),n(755534);var l=n(967688),c=n(925085);n(834428);var d=n(506428),u=n(61717);n(526867),n(303397),n(489082);var p=n(95664);n(511067),n(17753),n(756672),n(303010),n(706488),n(827930),n(14850);var m=n(215148);n(614892),n(120846);var _=n(888663),h=n(27776),g=n(464758);let f=2*(0,s.hG)(h.dGl);function E({selectedStyleProperties:e,snug:r}){let[n,i]=a.useState(!1),s=e.styleType,l="TEXT"===s,p="FILL"===s,m="dark"===(0,d.DP)(),{containerClassName:h,previewClassName:E}=a.useMemo(()=>({containerClassName:o()({[g.$9]:l,[g.vL]:!n&&p,[g.mj]:n&&p,[g.ig]:!l&&!p,[g.lD]:r}),previewClassName:o()({[g.Lq]:!n,[g.s1]:n,[g.Gv]:!0,[g.gH]:l,[g.SI]:l&&m,[g.hj]:p,[g.mm]:r})}),[n,l,p,m,r]),y=a.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return p?n?e:void 0:e},[n,l,p]);return a.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:p&&!r?f:0,right:p&&!r?f:0,top:p&&!r?f:0,bottom:r?0:f},verticalAlignItems:"start"},a.createElement("div",{style:y,className:h},e.url?a.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{i(!0)}}):a.createElement(_.zi,{dsStyle:{style_type:e.styleType}})))}function y({recordingKey:e}){let r=(0,p.b)("styleType");return a.createElement(a.Fragment,null,"FILL"===r&&a.createElement(m.B8,{key:"fill",recordingKey:e,shouldUseSelectedStyleProperties:!0}),"GRID"===r&&a.createElement(m.tC,{key:"grids",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"TEXT"===r&&a.createElement(m.gc,{key:"type",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"EFFECT"===r&&a.createElement(m.w5,{key:"effects",shouldUseSelectedStyleProperties:!0,recordingKey:e}))}function b(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_guide");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(h.wQn)},120784:(e,r,n)=>{n.d(r,{W:()=>c});var a=n(848318),i=n(90931),o=n(32731),s=n(428968),l=n(118234);function c(e){return a.createElement(d,{tabs:e.tabs,left:e.left,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile,centerFullWidth:e.centerFullWidth,containerClassName:e.containerClassName||l.Jw,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex})}function d(e){return a.createElement(a.Fragment,null,a.createElement(o.i,{tabs:e.tabs,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile}),a.createElement(i.Y,{tabs:e.tabs,left:e.left,center:e.center,centerFullWidth:e.centerFullWidth,containerClassName:e.containerClassName,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex}))}d.propTypes={tabs:(e,r,n)=>{let a=e[r];if(!a)return null;if(a.some(e=>e.type.WrappedComponent.name!==s.pG))throw Error(`${r} of ${n} must be a list of elements created from calling ToolBarTabContainer`);return null}}},263961:(e,r,n)=>{n.d(r,{T:()=>c,g:()=>l});var a=n(848318),i=n(297638),o=n(967688),s=n(244052);let l=(0,s.ex)("preload_success",function(){return a.createElement("div",{className:i.s.pr8.$},a.createElement("div",{className:i.s.colorTextTooltip.textBodyMediumStrong.$},(0,o.t)("proto.preload.loaded.tooltip.header")),a.createElement("div",{className:i.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.loaded.tooltip.body")))}),c=(0,s.ex)("preload_error",function({isSlides:e}){return a.createElement("div",{className:i.s.pr8.$},a.createElement("div",{className:i.s.colorTextTooltip.textBodyMediumStrong.$},e?(0,o.t)("proto.preload.error.tooltip.header.slides"):(0,o.t)("proto.preload.error.tooltip.header")),a.createElement("div",{className:i.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.error.tooltip.body")))},e=>({isSlides:"true"===e.getAttribute("data-tooltip-slides")}))},138111:(e,r,n)=>{n.d(r,{$v:()=>K,En:()=>z,aT:()=>q,aZ:()=>J,hG:()=>j});var a=n(848318),i=n(301168),o=n(660376),s=n(186606),l=n(19180),c=n(382902),d=n(536384),u=n.n(d),p=n(989232),m=n(398612),_=n(410441),h=n(461979),g=n(61503),f=n(454805),E=n(910314),y=n(882062),b=n(123629),v=n(744577),T=n(446244),I=n(675257),S=n(303397),A=n(601167),w=n(764286),C=n(259964),N=n(972089),L=n(17753),O=n(197696),R=n(685319),P=n(261877),D=n(460083),k=n(648018),M=n(244052),F=n(27776),x=n(736956);let U=(0,_.hG)(F.Yub),B=(0,_.hG)(F.CE4),G=(0,_.hG)(F.Yoj),V={[L.Ib.LOOKUP]:100,[L.Ib.TEXT]:0,[L.Ib.SPECIAL]:100},H=(0,_.jz)(F.LdP)+5;function z(e){let r=e["data-tooltip-type"],n=e["data-tooltip"];switch(r){case L.Ib.TEXT:return n;case L.Ib.LOOKUP:return(0,I.A)(n)}return""}function K(e){let r;if(!e.visible)return null;try{if(!(r=document.querySelectorAll(`[data-tooltip-key=${e.tooltipKey}]`)[0]))return null}catch(e){return null}let n=Y(r);return n?a.createElement(W,{tooltip:{...n,state:L.zr.SHOWING},keyboardShortcuts:{}}):null}function W(e){let r;let n=(0,k.z)(),i=()=>{let r=e.tooltip.targetRect;if(!r)return new f.Mi(0,0);switch(e.tooltip.position){case L.Zj.ABOVE:return new f.Mi(r.left+r.width/2,r.top);case L.Zj.BELOW:return new f.Mi(r.left+r.width/2,r.bottom);case L.Zj.RIGHT:return new f.Mi(r.right,r.top+r.height/2);case L.Zj.LEFT:return new f.Mi(r.left,r.top+r.height/2)}},o=r=>{if(r.key===L.MW.HYPERLINK_POPUP){let n;let{editorType:i,urlString:o,entityKey:s,targetRefKey:l}=r.data,c=r.data.canEdit;c&&e.tooltip.targetRefMap&&(c&&=e.tooltip.targetRefMap[l]?.current);try{let e=new URL(o);n={type:"mailto:"===e.protocol?N.F.MAILTO:"tel:"===e.protocol?N.F.TEL:(0,w.F4)(e.hostname)||(0,w.F4)(e.host)?(0,b.Sh)(e.pathname)?N.F.FIGMA_PROTOTYPE:e.searchParams.has("version-id")?N.F.FIGMA_VERSION:N.F.FIGMA_FILE:N.F.GENERIC,url:e}}catch(e){n={type:N.F.INVALID,urlString:o}}return a.createElement("div",{className:x.Hv},a.createElement(R.Ec,{data:n,editorType:i,urlString:o,canEdit:c,showHyperlinkEditor:()=>{if(e.tooltip.targetRefMap){let r=e.tooltip.targetRefMap[l];r.current?.editHyperlinkFromTooltip(s,e.tooltip.targetRect)}}}))}{let e=(0,M.TN)(r.key);if(e){let n=e.component;return r.data?a.createElement(n,{...r.data}):a.createElement(n,null)}return a.createElement("div",null)}},s=r=>r.shortcut?r.shortcut:r.shortcutKey?(0,O.c1)(e.keyboardShortcuts,(0,h.VZ)(r.shortcutKey)):null,c=e.tooltip.target,d=(0,D.ul)(c)&&e.tooltip.position===L.Zj.RIGHT;if(e.tooltip.state!==L.zr.SHOWING)return null;let m=n();if(d&&!m)return null;let _=Math.random(),g=null,E=i();switch(e.tooltip.position){case L.Zj.ABOVE:g={left:E.x-U,top:Math.floor(E.y-U)},r=x.EE;break;case L.Zj.BELOW:g={left:E.x-U,top:E.y},r=x.xU;break;case L.Zj.RIGHT:g={left:E.x,top:E.y-U},r=x.v5;break;case L.Zj.LEFT:g={left:E.x-U-1,top:E.y-U},r=x.Ox}if(m){let r=D.oo[c.key].assetBgColor;switch(e.tooltip.position){case L.Zj.BELOW:g.borderBottomColor=r;break;case L.Zj.RIGHT:g.borderRightColor=r}}if(e.enableTracking&&null==e.tooltip.timeoutID){let r,n;switch(e.tooltip.target?.kind){case L.Ui.TEXT:r=e.tooltip.target.text;break;case L.Ui.KEY:r=(0,I.A)((0,h.VZ)(e.tooltip.target.key)),n=e.tooltip.target.key;break;case L.Ui.ELEMENT:n=e.tooltip.target.key}let a={};(0,l.k)().exp_help_on_hover_ff&&(0,D.ul)(c)&&(a.isHelpOnHoverTooltip=m,m&&(a.isHelpOnHoverDropdownTooltip=d)),(0,p.trackEvent)("Tooltip Shown",{text:r,key:n,...a},{forwardToDatadog:!1})}let T=(0,D.ul)(c)&&e.tooltip.position===L.Zj.RIGHT;return a.createElement("div",{className:u()({[x.IA]:!e.tooltip.interactive,[x.EF]:e.tooltip.lightMode})},!T&&a.createElement("div",{className:r,style:g,"data-is-the-tooltip":!0}),a.createElement("div",{key:_,className:x.Qs,ref:r=>{if(r){let a;let o=r.cloneNode(!0);o.style.cssText=v.sx.block.invisible.fixed.str(),r.parentElement.appendChild(o);let s=e.tooltip.maxWidth?e.tooltip.maxWidth:180,l=o.offsetHeight+1,c=e.tooltip.target,d=c&&c.kind===L.Ui.ELEMENT&&c.data&&c.data.unconstrainWidth||n();a=d?o.offsetWidth+1:o.offsetWidth+1<s?o.offsetWidth+1:s,d||(o.style.width=`${a-2*G}px`,l=o.offsetHeight+1);let u=i();switch(e.tooltip.position){case L.Zj.ABOVE:case L.Zj.BELOW:{e.tooltip.position===L.Zj.ABOVE?u.y-=o.offsetHeight+U:u.y+=U,u.x-=o.offsetWidth/2;let r=a/2-2*G;e.tooltip.tipAlign===L.qd.RIGHT?u.x-=r:e.tooltip.tipAlign===L.qd.LEFT&&(u.x+=r),u.x=Math.max(u.x,B),u.y=Math.max(u.y,B);let n=u.x+a,i=window.innerWidth-B;n>i&&(u.x=i-a);break}case L.Zj.RIGHT:u.x+=U,u.y-=l/2,u.x=Math.max(u.x,B),u.y=Math.max(u.y,B);break;case L.Zj.LEFT:u.x-=U+a,u.y-=l/2,u.x=Math.max(u.x,B),u.y=Math.max(u.y,B)}n()&&e.tooltip.position===L.Zj.RIGHT&&(u.y=H),r.style.cssText=`left: ${0|u.x}px; top: ${0|u.y}px; max-width: ${d?a:s}px`,r.style.width=o.style.width,o.remove()}},"data-is-the-tooltip":!0,dir:"auto"},(()=>{let r=e.tooltip;if(!r.target)return a.createElement("div",null);let i=-1!==r.maxLines,l=u()(x.Qq,{[x.kb]:"left"===r.textAlign,[x.pG]:"right"===r.textAlign,[x.mG]:"inline"===r.textAlign,[x.IC]:i}),c=u()({[x.IC]:i}),d={WebkitLineClamp:i?r.maxLines:void 0};switch(r.target.kind){case L.Ui.TEXT:{let e=s(r.target);if(e)return a.createElement("span",{className:x.GQ},a.createElement("span",{className:c,style:d},r.target.text),a.createElement(y.S,{shortcut:e,className:x.LE}));return a.createElement("span",{className:l,style:d},a.createElement("p",null,r.target.text),r.target.subtext&&a.createElement("p",{className:x.W$},r.target.subtext))}case L.Ui.KEY:{let{target:i}=r;if(n())return a.createElement(P.x,{tooltipKey:i.key});let o=(0,I.A)((0,h.VZ)(r.target.key)),s=(0,O.c1)(e.keyboardShortcuts,(0,h.VZ)(r.target.key));if(s)return a.createElement("span",{className:x.GQ},a.createElement("span",{className:c,style:d},o),a.createElement(y.S,{shortcut:s,className:x.LE}));return a.createElement("span",{className:l,style:d},o)}case L.Ui.ELEMENT:return o(r.target)}})()))}function j(e){let r=(0,i.d4)(e=>e.mirror.appModel.keyboardShortcuts),n=(0,i.d4)(e=>e.tooltip);return a.createElement(W,{keyboardShortcuts:r,tooltip:n,enableTracking:e.enableTracking})}function Y(e,r,n,a){let i;let s=(0,l.k)().fpl_hide_tooltip_aria_expanded;r?.selectedView&&"fullscreen"===r.selectedView.view&&(i=r.selectedView.editorType);let c=i===C.nT.Whiteboard||i===C.nT.Cooper?500:1e3;if(e.hasAttribute("data-tooltip-show-on-target-only")&&null!=a&&a!==e)return null;let d=e.getAttribute("data-tooltip-proxy-element-id");if(d){let r=document.getElementById(d);r&&(e=r)}if(e.getAttribute("data-is-the-tooltip"))return r?.tooltip?{target:r.tooltip.target,position:r.tooltip.position,tipAlign:r.tooltip.tipAlign,targetRect:r.tooltip.targetRect,interactive:r.tooltip.interactive}:null;let u=(e,r)=>e?~~e:r,p=!!e.getAttribute("data-tooltip-show-immediately"),_=!!e.getAttribute("data-tooltip-hide-immediately"),h=!!e.getAttribute("data-tooltip-show-above"),g=!!e.getAttribute("data-tooltip-show-below"),f=u(e.getAttribute("data-tooltip-timeout-delay"),c),E=!!e.getAttribute("data-tooltip-interactive"),y=!!e.getAttribute("data-tooltip-light-mode"),b=!!e.getAttribute("data-tooltip-show-left"),v=!!e.getAttribute("data-tooltip-show-right"),T=!!e.getAttribute("data-tooltip-ignore-mouse"),I=u(e.getAttribute("data-tooltip-max-width"),180),S=u(e.getAttribute("data-tooltip-max-lines"),-1),A=u(e.getAttribute("data-tooltip-offset-x"),0),w=u(e.getAttribute("data-tooltip-offset-y"),0),N=!!e.getAttribute("data-tooltip-text-left"),O=!!e.getAttribute("data-tooltip-text-right"),R=!!e.getAttribute("data-tooltip-text-inline"),P=O?"right":N?"left":R?"inline":"center",D=!!e.getAttribute("data-tooltip-tip-align-right"),k=!!e.getAttribute("data-tooltip-tip-align-left"),F=!!e.getAttribute("data-tooltip-precise"),x=e.hasAttribute("data-tooltip-submenu-open")&&"false"!==e.getAttribute("data-tooltip-submenu-open")||e.hasAttribute("aria-expanded")&&"false"!==e.getAttribute("aria-expanded")&&s,U=L.qd.CENTER;D?U=L.qd.RIGHT:k&&(U=L.qd.LEFT);let B=null;function G(){return null===B&&(B=F&&n?function(e,r){let n=e.getClientRects(),{x:a,y:i}=r,o=null,s=null,l=1/0;for(let e=0;e<n.length;e++){let r=n[e];if(null===o)o=(0,m.E)(r);else if(r.top===o.top&&r.bottom===o.bottom)o.left=Math.min(r.left,o.left),o.right=Math.max(r.right,o.right),o.width+=r.width;else{if(a>=o.left&&a<=o.right&&i>=o.top&&i<=o.bottom)return o;o=(0,m.E)(r)}let c=Math.max(o.left,Math.min(a,o.right)),d=Math.max(o.top,Math.min(i,o.bottom)),u=Math.sqrt((a-c)**2+(i-d)**2);u<l&&(l=u,s=o)}return null!==o&&a>=o.left&&a<=o.right&&i>=o.top&&i<=o.bottom?(0,m.E)(o):(0,m.E)(s)}(e,n):(0,m.E)(e.getBoundingClientRect()),B.left+=A,B.right+=A,B.bottom+=w,B.top+=w),B}if(r?.dropdownShown||x){let r=e.getAttribute("data-dropdown-tooltip");if(r){let n=G(),a=L.Zj.RIGHT;return g?a=L.Zj.BELOW:(b||n.left+n.width>window.innerWidth-200)&&(a=L.Zj.LEFT),{target:(e.getAttribute("data-tooltip-type")??L.Ib.LOOKUP)===L.Ib.LOOKUP?{kind:L.Ui.KEY,key:r}:{kind:L.Ui.TEXT,text:r},position:a,tipAlign:U,targetRect:n,timeoutDelay:f,showImmediately:p,hideImmediately:_,interactive:E,lightMode:y,textAlign:P,maxWidth:I,maxLines:S,ignoreMouse:T}}}else{let r=e.getAttribute("data-tooltip-type"),n=e.getAttribute("data-tooltip"),a=e.getAttribute("data-tooltip-subtext"),i=u(e.getAttribute("data-tooltip-bottom-flip-margin"),V[r]);if(!n)return null;let s=G();switch(r){case L.Ib.LOOKUP:{let e=L.Zj.BELOW;return b?e=L.Zj.LEFT:h||window.innerHeight-s.bottom<i?e=L.Zj.ABOVE:v&&(e=L.Zj.RIGHT),{target:{kind:L.Ui.KEY,key:n},position:e,tipAlign:U,targetRect:s,timeoutDelay:f,showImmediately:p,hideImmediately:_,interactive:E,lightMode:y,textAlign:P,maxWidth:I,maxLines:S,ignoreMouse:T}}case L.Ib.TEXT:{let r=L.Zj.BELOW;b?r=L.Zj.LEFT:v?r=L.Zj.RIGHT:(h||window.innerHeight-s.bottom<i)&&(r=L.Zj.ABOVE);let o=e.getAttribute("data-tooltip-shortcut-key"),l=e.getAttribute("data-tooltip-shortcut");return{target:{kind:L.Ui.TEXT,text:n,subtext:a||"",shortcutKey:o,shortcut:l},position:r,tipAlign:U,targetRect:s,timeoutDelay:f,showImmediately:p,hideImmediately:_,lightMode:y,textAlign:P,interactive:E,maxWidth:I,maxLines:S,ignoreMouse:T}}case L.Ib.SPECIAL:{let r=e.getAttribute("data-tooltip");(0,o.KF)(-1!==Object.values(L.MW).indexOf(r)||(0,M.$L)(r),"missing/invalid tooltip key");let n={kind:L.Ui.ELEMENT,key:r};if(r===L.MW.HYPERLINK_POPUP){let a=e.getAttribute("data-tooltip-editor-type"),i=e.getAttribute("data-tooltip-url-string"),o=!!e.getAttribute("data-tooltip-can-edit"),s=e.getAttribute("data-tooltip-entity-key"),l=e.getAttribute("data-tooltip-target-ref-key"),c="true"===e.getAttribute("data-tooltip-unconstrain-width");n={kind:L.Ui.ELEMENT,key:r,data:{editorType:a,urlString:i,unconstrainWidth:c,canEdit:o,entityKey:s,targetRefKey:l,interactive:!0}}}else{let a=(0,M.TN)(r);a&&a.getProps&&(n={...n,data:a.getProps(e)})}let a=L.Zj.BELOW;return b?a=L.Zj.LEFT:v?a=L.Zj.RIGHT:(h||window.innerHeight-s.bottom<i)&&(a=L.Zj.ABOVE),{target:n,position:a,tipAlign:U,targetRect:s,timeoutDelay:f,showImmediately:p,hideImmediately:_,lightMode:y,textAlign:P,interactive:E,maxWidth:I,maxLines:S,ignoreMouse:T}}}}return null}function $(e,r){let n=e.target,a=e.target;if(!n||1!==n.nodeType||document.pointerLockElement)return"return";let i=null,o=e.clientX&&e.clientY?{x:e.clientX,y:e.clientY}:void 0;for(;n;){if(i=Y(n,r,o,a)){if(i.ignoreMouse)return"return";break}n=n.parentElement}return i}function q(e,r){let n=$(e,r);return!!n&&"return"!==n&&n.position===r.tooltip.position&&!!n.targetRect&&(0,m.t7)(n.targetRect,r.tooltip.targetRect)&&!!n.interactive}function X(e,r){var n,a;let i=r.getState(),o=i?.selectedView&&"fullscreen"===i.selectedView.view,d=$(e,i);if("return"!==d&&(d||(d=function(){let e=c.zl.get(E.HV);if(!e)return null;let r=S.Y5.getViewportInfo(),n=(0,A.Yb)(r,e.bounds);return n.y+=(0,g.bG)(),n.x+=r.x,{target:{kind:L.Ui.TEXT,text:e.text},position:L.Zj.ABOVE,targetRect:{top:n.y,left:n.x,width:n.width,height:n.height,right:n.x+n.width,bottom:n.y+n.height}}}()),!d&&o&&(d=function(){if(!S.Y5.isReady())return null;let e=s.glU?.getCanvasTooltip();if(!e)return null;let r=s.glU?.getCanvasTooltipMaxWidth(),n=e.bounds;return{target:{kind:L.Ui.TEXT,text:e.text},position:L.Zj.BELOW,targetRect:{top:n.y,left:n.x,width:n.width,height:n.height,right:n.x+n.width,bottom:n.y+n.height},maxWidth:0===r?void 0:r}}()),i.tooltip)){if(!d){if(i.tooltip.state===L.zr.PENDING||i.tooltip.hideImmediately)r.dispatch(T.jD());else if(i.tooltip.state===L.zr.SHOWING){let e=i.tooltip.hideAfterDelay??300;r.dispatch(T.ac({timeoutDelay:e}))}return}((0,l.k)().fpl_tooltip?(n=d,a=i.tooltip,n.position===a.position&&(0,m.t7)(n.targetRect,a.targetRect)&&function(e,r){if(e===r)return!0;if(!e||!r||e.kind!==r.kind)return!1;switch(e.kind){case L.Ui.TEXT:return e.text===r.text;case L.Ui.KEY:case L.Ui.ELEMENT:return e.key===r.key}}(n.target,a.target)):d.position===i.tooltip.position&&(0,m.t7)(d.targetRect,i.tooltip.targetRect))?i.tooltip.state===L.zr.SHOWING&&null!==i.tooltip.timeoutID&&r.dispatch(T.kA()):i.tooltip.state===L.zr.SHOWING||d.showImmediately?r.dispatch(T.eB({target:d.target,targetRect:d.targetRect,position:d.position,tipAlign:d.tipAlign,interactive:d.interactive,lightMode:d.lightMode,textAlign:d.textAlign,maxWidth:d.maxWidth,maxLines:d.maxLines,hideImmediately:d.hideImmediately})):r.dispatch(T.xE({target:d.target,targetRect:d.targetRect,position:d.position,tipAlign:d.tipAlign,timeoutDelay:d.timeoutDelay||1e3,interactive:d.interactive,lightMode:d.lightMode,textAlign:d.textAlign,maxWidth:d.maxWidth,maxLines:d.maxLines,hideImmediately:d.hideImmediately}))}}function J(e){let r=()=>{let r=e.getState().tooltip;return r.state===L.zr.SHOWING||r.state===L.zr.PENDING};document.addEventListener("mousedown",n=>{r()&&!q(n,e.getState())&&e.dispatch(T.jD())},!!(0,l.k)().fpl_tooltip),document.addEventListener("mouseleave",()=>{r()&&e.dispatch(T.jD())}),document.addEventListener("keydown",n=>{if(r()){if((0,l.k)().fpl_tooltip){var a;"Control"===(a=n.key)||"Shift"===a||"Alt"===a||"Meta"===a||e.dispatch(T.jD())}else e.dispatch(T.jD())}},!0),(0,l.k)().fpl_tooltip||document.addEventListener("keyup",()=>{r()&&e.dispatch(T.jD())},!0),document.addEventListener("wheel",()=>{r()&&e.dispatch(T.jD())}),document.addEventListener("pointerlockchange",()=>{r()&&e.dispatch(T.jD())}),(0,l.k)().fpl_tooltip?document.addEventListener("mouseover",r=>{X(r,e)},!0):document.addEventListener("mousemove",r=>{X(r,e)},!0),document.addEventListener("focusin",r=>{X(r,e)},!0)}K.displayName="TooltipView"},184283:(e,r,n)=>{n.d(r,{W:()=>E});var a=n(848318),i=n(301168),o=n(461979),s=n(967688),l=n(456028),c=n(209595),d=n(125761),u=n(259939),p=n(94831),m=n(175957),_=n(17753),h=n(596224),g=n(632409);function f(e,r,n){let a=(0,o.EJ)(e,25),i=n?function(e){switch(e){case p.e6.OWNER:return" (owner)";case p.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:a,roleName:i}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:a,roleName:i})}function E(e){let r=(0,d.iZ)(),n=(0,i.d4)(e=>e.multiplayer),o=(0,u.q)(),s=(0,h.cJ)(),p="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,E="user"in e?e.user:e.role.user,y=!1,b="sessionId"in E&&E.sessionId===n.sessionID,v=n.allUsers.find(e=>e.userID===E.id),T=s?v?.sitesViewState:void 0;r?y=E.id===r.id:"sessionId"in E&&(y=b);let I="role"in e?f(E.handle,y,e.role.level):f(E.handle,y),S=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:a,isInWorkshop:i,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==a.sessionID,c="sessionId"in n&&n.sessionId===a.sessionID,d="sessionId"in n&&n.sessionId===a.presenterSessionID,u="sessionId"in n&&a.observingSessionID===n.sessionId;return!l||(0,m.QB)(o)?s?g.c.NONE:g.c.VIEW_PROFILE:c?s||!r?i?g.c.EDIT_NAME:g.c.NONE:d?g.c.STOP_PRESENTING:g.c.NONE:d&&!u?g.c.FOLLOW_PRESENTER:u?g.c.STOP_OBSERVE:g.c.START_OBSERVE}({localUser:r,tooltipUser:e,multiplayer:(0,i.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(E),A=`/files${o}/user/${E.id}`;return a.createElement("div",{key:`avatar-${p}`,"data-tooltip":g.M,"data-tooltip-click-action":S,"data-tooltip-interactive":!0,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-timeout-delay":150,"data-tooltip-type":_.Ib.SPECIAL,"data-tooltip-user-handle":I,"data-tooltip-user-profile-url":A,"data-tooltip-user-session-id":"sessionId"in E?E.sessionId:void 0,"data-tooltip-user-view-state":T,id:e.id,style:{display:"inherit"}},e.children)}},206142:(e,r,n)=>{var a=n(382902);(0,a.eU)(null),(0,a.eU)(null),(0,a.eU)(null)},403425:(e,r,n)=>{n.d(r,{Bn:()=>y,Gl:()=>E,HX:()=>g,Ji:()=>m,Xe:()=>f,ad:()=>v,kN:()=>_,ph:()=>b,te:()=>h});var a=n(938982),i=n(553547);n(19180),n(382902),n(329228);var o=n(998568);n(87148);var s=n(489082);n(730143),n(55116),n(757357);var l=n(925144);n(206142);let c=/(#[0-9]+:[0-9]+)/g;function d(e){if("string"==typeof e){let r=e.toLowerCase();if("true"===r||"yes"===r||"on"===r)return!0;if("false"===r||"no"===r||"off"===r)return!1}return e}function u(e){return e.replace(/\s+/g," ")}function p(e){return e.replace(c,"").replace(/\s+/g," ").trim()}function m(e){try{if("INSTANCE"===e.type)return Object.entries(e.componentProperties()).reduce((e,[r,n])=>({...e,[p(r)]:n}),{});if("SYMBOL"===e.type){if(e.isState)return function(e){if(!e.parentNode)return{};let r=Object.entries(e.variantProperties()??{}).reduce((e,[r,n])=>({...e,[r]:{value:n,type:"VARIANT"}}),{});return Object.entries(e.parentNode.componentPropertyDefinitions()).reduce((e,[r,n])=>"VARIANT"===n.type?e:{...e,[p(r)]:{value:n.defaultValue,type:n.type}},{...r})}(e);return Object.entries(e.componentPropertyDefinitions()).reduce((e,[r,n])=>({...e,[p(r)]:{value:n.defaultValue,type:n.type}}),{})}}catch(e){"Component set for node has existing errors"!==e.message&&(0,o.$D)(a.e.DEVELOPER_TOOLS,e)}return{}}function _(e,r){let n=0,a=null,i=m(r);for(let r of e){let e=0;Object.entries(r.variant??{}).every(([r,n])=>{let a=u(r),o=Object.entries(i).reduce((e,[r,n])=>({...e,[u(r)]:{type:n.type,value:d(n.value)}}),{})[a];return o?.value===d(n)?(e++,!0):void 0===o})&&(!a||e>n)&&(a=r,n=e)}return a}function h(e){return(e?.publishID&&e?.publishID!==i.AD?e?.publishID:e?.guid)??null}function g(e,r,n){let a=r.get(e);if(!a)return{backingLibraryKey:null,backingNodeId:null};let{backingSymbolGUID:i,backingStateGroupGUID:o}=(0,l.nD)(new Set([(a?.type==="INSTANCE"?a?.symbolId:a?.guid)??""]),r),c=null,d=null;if((0,s.gl)(i)||null===i||(c=r.get(i)),(0,s.gl)(o)||null===o||(d=r.get(o)),"INSTANCE"===a.type&&a.symbolId){let e=r.get(a.symbolId);if(e?.isState){let e=d?.sourceLibraryKey;return{backingNodeId:h(d),backingComponentKey:c?.componentKey??void 0,backingStateGroupKey:d?.stateGroupKey??void 0,backingLibraryKey:""!==e?e:n}}{let e=c?.sourceLibraryKey;return{backingNodeId:h(c),backingComponentKey:c?.componentKey??void 0,backingLibraryKey:""!==e?e:n}}}return"SYMBOL"===a.type?a.isState?{backingNodeId:h(a.parentNode),backingLibraryKey:a.parentNode?.sourceLibraryKey&&a.parentNode?.sourceLibraryKey!==""?a.parentNode?.sourceLibraryKey:n,backingStateGroupKey:a.parentNode?.stateGroupKey??void 0}:{backingNodeId:h(a),backingLibraryKey:""!==a.sourceLibraryKey?a.sourceLibraryKey:n,backingComponentKey:a.componentKey??void 0}:{backingLibraryKey:null,backingNodeId:null}}function f(e,r){let n=[e=>"figmadoc"===e.type&&"React"===e.label,e=>"figmadoc"===e.type&&"Storybook"===e.label,e=>"figmadoc"===e.type&&"SwiftUI"===e.label,e=>"snippet"===e.type];for(let a of(r&&n.unshift(e=>e.label===r),n)){let r=e.find(a);if(r)return r}return e[0]}function E(e,r,n){if("INSTANCE"!==e.type)return null;let a=e.symbolId;if(!a)return null;let i=function(e,r,n){let{backingSymbolGUID:a,backingStateGroupGUID:i}=(0,l.nD)(new Set([e]),r);if((0,s.gl)(a)||null===a)return null;let o=r.get(a),c=(0,s.gl)(i)||null===i?null:r.get(i);return c?{backingNodeId:h(c),backingLibraryKey:""!==c.sourceLibraryKey?c.sourceLibraryKey:n}:o?{backingNodeId:h(o),backingLibraryKey:""!==o.sourceLibraryKey?o.sourceLibraryKey:n}:null}(a,r,n);if(!i)return null;let{backingNodeId:o,backingLibraryKey:c}=i;return c+","+o}var y=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(y||{});function b(e,r,n,a){let i=[e];for(;i.length>0;){let e=i.pop();if(e){let o=n(e);if(2===o)return;if(1===o)continue;for(let n of a?e.visibleChildren:e.childrenGuids){let e=r.get(n);e&&i.push(e)}}}}function v(e,r,n,a,i){if(!n)return[];let o=new Set,s=r.get(e);return s?(b(s,r,e=>{if("INSTANCE"===e.type){let n=E(e,r,i);n&&o.add(n)}},!a),Array.from(o.values())):[]}},124533:(e,r,n)=>{n(848318),n(301168),n(19180),n(382902),n(410725),n(355755),n(730143),n(626912),n(55116);var a=n(677334);n(535884),n(144487),n(700436),n(786835);var i=n(326252);n(206142),n(403425),a.M4.Query({fetch:async({nodes:e})=>0===e.length?{}:(await i.Q.getComponentNames(e)).data.meta.componentsById,stalenessPolicy:"never"}),a.M4.Query({fetch:async({assetKeys:e})=>0===e.length?{status:{}}:(await i.Q.getInContextPublishedComponentsStatus(e)).data.meta,stalenessPolicy:"never"})},42407:(e,r,n)=>{n.d(r,{XT:()=>E,iM:()=>g});var a=n(848318),i=n(301168),o=n(382902),s=n(989232),l=n(476254),c=n(353231),d=n(963307),u=n(21614),p=n(441792),m=n(861343),_=n(464558);let h={strokeWeight:"strokeWeight",paints:"strokePaints",strokeBrushGuid:"strokeBrushGuid",scatterStrokeSettings:"scatterStrokeSettings",stretchStrokeSettings:"stretchStrokeSettings",dynamicStrokeSettings:"dynamicStrokeSettings"};function g(e,r){let[n,s]=function(e,r){let[n,i]=(0,o.fp)(e);return[n[r],(0,a.useCallback)(e=>{i({[r]:e})},[i,r])]}(e,r),l=(0,m.Xd)(),c=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected),u=h[r],_=(0,d.kl)(u),g=(0,p.AP)(),f=!!c||g;return[f?_:n,(0,a.useCallback)(e=>{f?l({[u]:e}):s(e)},[s,f,l,u])]}let f={wiggle:"dynamicStrokeWiggle",frequency:"dynamicStrokeFrequency",smoothen:"dynamicStrokeSmoothen"};function E(e,r){let n=(0,u.Tv)(),[h,g]=(0,o.fp)(e),E=(0,m.Xd)(),y=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected),b=(0,d.kl)(f[r]),v=(0,p.AP)(),T=!!y||v,I="frequency"===r?"interval":r;return{value:(T?b:h.dynamicStrokeSettings?.[I])??_.Y4[r],setValue:(0,a.useCallback)(e=>{var a,i,o;(a=n??[],i={[r]:e},s.definedAnalyticsHandler.trackDefinedEvent("illustration.set_dynamic_stroke_settings",{numNodes:a.length,productType:(0,c.Dc)(l.D.getState().selectedView.editorType),...i}),T)?E({[f[r]]:e}):g({dynamicStrokeSettings:{...h.dynamicStrokeSettings??{interval:(o=_.Y4).frequency??_.Y4.frequency,wiggle:o.wiggle??_.Y4.wiggle,smoothen:o.smoothen??_.Y4.smoothen},[r]:e}})},[g,T,E,h,r,n])}}},313850:(e,r,n)=>{n.d(r,{X:()=>p,v:()=>m});var a=n(548530),i=n(615233),o=n(839982),s=n(656329);let l=s.XN?"iPadOS":s.Ay.osname,c=s.XN?"0":s.Ay.osversion;function d(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let u={browser_name:s.Ay.name,browser_version:+s.Ay.version,os_name:l,os_version:c,release:i.tl().release_manifest_git_commit,release_tag:i.tl().release_git_tag,page_locale:i.mm()[0],navigatorLanguage1:d(0),navigatorLanguage2:d(1),navigatorLanguage3:d(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,o.fF)(),isAppShell:(0,a.O)()};function p(){return u}function m(e){u={...u,...e}}},300322:(e,r,n)=>{n.d(r,{Mx:()=>p,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>m,yx:()=>u});var a=n(72462);let i={status:a.r.INIT},o={status:a.r.LOADING};function s(){return i}function l(){return o}function c(e){return{status:a.r.SUCCESS,value:e}}function d(e){return{status:a.r.FAILURE,error:e}}function u(e){return e.status===a.r.INIT}function p(e){return e.status===a.r.LOADING}function m(e){return e.status===a.r.SUCCESS}},311129:(e,r,n)=>{n.d(r,{Fe:()=>p,GH:()=>_,ce:()=>c,cm:()=>u}),n(848318);var a=n(382902),i=n(989232),o=n(313850),s=n(656329),l=n(998568);function c(){return!!(s.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches)}let d=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function u(e){return d.test(e)||"/"===e||""===e}function p(e){document.body.style.backgroundColor="#2c2c2c"}let m=(0,a.eU)(null);function _(){h(),s.Ay.chromeos&&s.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{c()&&(p("dark"),h())}),window.addEventListener("appinstalled",()=>{(0,i.trackEvent)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{a.zl.set(m,e)}))}function h(){let e=c();(0,l.kF)("chrome_os_app",e),e&&(0,o.v)({browser_name:"Figma ChromeOS App"})}},206639:(e,r,n)=>{n.d(r,{$q:()=>f,AW:()=>D,Bx:()=>B,DA:()=>J,En:()=>u,FN:()=>l,FO:()=>h,F_:()=>U,G$:()=>R,GL:()=>O,H0:()=>y,HD:()=>N,HL:()=>C,J1:()=>G,UE:()=>s,Uv:()=>o,X9:()=>E,YN:()=>m,YR:()=>X,YU:()=>x,_W:()=>I,di:()=>w,e3:()=>p,mx:()=>v,ol:()=>c,ql:()=>P,sN:()=>k,tK:()=>b,tM:()=>_,ty:()=>L,x1:()=>g});var a=n(376852),i=n(803565);let o={r:0,g:0,b:0,a:1},s={r:1,g:1,b:1,a:1},l=s;var c=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(c||{});let d={"#667799":"#4A5878","#007BE5":"#034AC1","#9747FF":"#681ABB","#FF24BD":"#971172","#F24822":"#9F1F18","#FFCD29":"#FFCD29","#14AE5C":"#024626"};function u(e){return d[e]??e}let p="var(--color-textondarkcanvas, #ffffff)",m="var(--color-textonlightcanvas, #000000)",_="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",h="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",g="inset 0px 0px 0px 2px var(--color-bordertranslucent)",f={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function E(e,r){return{...e,a:r}}function y(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,a=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:a,blue:i,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(a),b:parseFloat(i),a:o?parseFloat(o):r}}return null}(e,a)??w(e,a)??v(e,a)??b(e,n,a)??null}function b(e,r=!1,n=1){let a=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!a)return null;let i=a[1];if(i.length>=8&&r)return M(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),H(i.substring(6,8)));if(7===i.length&&r)return M(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),V(i[6]));if(i.length>=6)return M(H(i.substring(0,2)),H(i.substring(2,4)),H(i.substring(4,6)),n);if(5===i.length&&r)return M(V(i[0]),V(i[1]),V(i[2]),H(i.substring(3,5)));if(4===i.length&&r)return M(V(i[0]),V(i[1]),V(i[2]),V(i[3]));if(i.length>=3)return M(V(i[0]),V(i[1]),V(i[2]),n);if(2===i.length){let e=H(i);return M(e,e,e,n)}else if(1===i.length){let e=V(i);return M(e,e,e,n)}return null}function v(e,r=1){let n;return(n=Z.exec(e=e.trim()))?M(K(n[1]),K(n[2]),K(n[3]),null==n[4]?r:j(n[4])):(n=Q.exec(e))?M(z(n[1]),z(n[2]),z(n[3]),null==n[4]?r:j(n[4])):(n=ee.exec(e))?function(e,r,n,a){if(0===r)return M(n,n,n,a);let i=n<.5?n*(1+r):n+r-n*r,o=2*n-i,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(i-o)*6*n:2*n<1?s[r]=i:3*n<2?s[r]=o+(i-o)*(2/3-n)*6:s[r]=o}return M(s[0],s[1],s[2],a)}(Y(n[1]),K(n[2]),K(n[3]),null==n[4]?r:j(n[4])):(n=et.exec(e))?function(e,r,n,a){let i=(100*e+16)/116,o=r/500+i,s=i-n/200,l=e=>{let r=e**3;return r>T?r:(e-16/116)/7.787};i=l(i);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*i+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*i+.041556*s),p=c(.0556434*o+-.2040259*i+1.0572252*s);return M(q(d),q(u),q(p),a)}(K(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:j(n[4])):(n=er.exec(e))?(0,i.I0)({l:W(n[1],.01),c:W(n[2],.004),h:Y(n[3]),a:null==n[4]?r:j(n[4])}):(n=en.exec(e))?(0,i.oq)({l:W(n[1],.01),ax:W(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:j(n[4])}):null}let T=(6/29)**3;function I(e,r){return A(S(e),S(r))/.002741735}let S=e=>{let r,n,a,i=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*i+.7152*o+.0722*s)/1,a=(.0193*i+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))}},A=(e,r)=>{let n=e.l-r.l,a=e.a-r.a,i=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=a*a+i*i-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),p=c*c+d*d+u*u;return p<0?0:Math.sqrt(p)};function w(e,r=1){let n=f[e.toLowerCase()];return n?b(n,!1,r):null}function C(e){return{r:$(e.r),g:$(e.g),b:$(e.b),a:$(e.a)}}function N(e,r=.627){let n=y(e);return!!n&&G(n)<r}function L(e){if(!e)return!0;let r=y(e);return!r||r?.a===0}function O(e){return N(e)?p:m}function R(e){return N(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function P(e,r,n){let a=y(e),i=y(r);if(!a||!i)return;let o=k(a,i),s=G(a),l=G(o);if(n){let e=G(i);return"light"===n&&e>.9||"dark"===n&&e<.25?g:void 0}return s<.2&&l<s+.1?_:s>.8&&.1>Math.abs(l-s)?h:void 0}function D(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return k(...n)}).filter(r);return n.length?k(...n):void 0}function k(...e){return e.reduceRight((e,r)=>{let n=r.a,a=e.a,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function M(e,r,n,a=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(a)?null:{r:e,g:r,b:n,a}}function F({r:e,g:r,b:n,a}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*a)}}function x(e){let{r,g:n,b:a}=F(e);return`rgba(${r}, ${n}, ${a}, ${e.a})`}function U(e){let{r,g:n,b:a,a:i}=F(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,a),255),l=Math.min(Math.max(0,i),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),p=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${p}`}function B(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function G(e){return .299*e.r+.587*e.g+.114*e.b}function V(e){return H(`${e}${e}`)}function H(e){return $(parseInt(e,16))}function z(e){return $(parseFloat(e))}function K(e){return q(.01*parseFloat(e))}function W(e,r){return e.endsWith("%")?q(parseFloat(e)*r):parseFloat(e)}function j(e){return e?e.includes("%")?K(e):q(parseFloat(e)):1}function Y(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,a._g)(n,360))/360}function $(e){return q(e/255)}function q(e){return(0,a.qE)(e,0,1)}function X(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function J(e,r){let{r:n,g:i,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,a.xN)(n,l)&&(0,a.xN)(i,c)&&(0,a.xN)(o,d)&&(0,a.xN)(s,u)}let Z=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Q=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,et=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,er=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,en=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},716793:(e,r,n)=>{n.d(r,{Eg:()=>P,Hd:()=>p,Wn:()=>u,jA:()=>d});var a=n(376852);n(141760);var i=n(771674),o=n(244600),s=n(632727),l=n(263042),c=n(206639);function d(e,r,n="IGNORE",a){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let i=E(e),o=T(i),s=I(i.hsluv_l,o);if(a){let{LESS_THAN:r,GREATER_THAN:n}=a;if(r&&100*s<r||n&&100*s>n)return e}return v(i,r/1e3,o,s),"IGNORE"!==n&&C(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(i)}function u(e){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=E(e),n=T(r);return Math.floor(100*I(r.hsluv_l,n))}function p(e,r,n="IGNORE"){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let a=E(e),i=T(a),o=a.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let l=I(o,i);return v(a,I(s,i)/10,i,l),"IGNORE"!==n&&C(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(a)}let m=["red","orange","yellow","green","blue","purple"],_={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},h={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},g={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},f=e=>(e.hsluvToRgb(),{r:(0,a.qE)(e.rgb_r,0,1),g:(0,a.qE)(e.rgb_g,0,1),b:(0,a.qE)(e.rgb_b,0,1),a:1}),E=e=>{let r=new i.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},y={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function b(e){if((0,o.f)(e,c.UE)<=S)return N(e);let r=E(e),n=new i.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,f(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),O(n)}function v(e,r,n,a=5){r*=10;let i=_[n].a*a+_[n].b-e.hsluv_h;e.hsluv_h=_[n].a*r+_[n].b-i;let o=e.hsluv_s,s=h[n].a*a*a*a+h[n].b*a*a+h[n].c*a+h[n].d;e.hsluv_s=h[n].a*r*r*r+h[n].b*r*r+h[n].c*r+h[n].d,e.hsluv_s*=o/s,e.hsluv_l=g[n].a*r*r*r+g[n].b*r*r+g[n].c*r+g[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function T(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),m.forEach(a=>{let o=new i.h;o.rgb_r=l.r[a].r,o.rgb_g=l.r[a].g,o.rgb_b=l.r[a].b,o.rgbToHsluv(),v(o,n,a,5),o.hsluvToRgb();let s=(0,c._W)(f(e),f(o));r[a]=s/y[a]});let a="yellow",o=r[a];for(let e in r)r[e]<o&&(o=r[e],a=e);return e.rgbToHsluv(),a}function I(e,r){let n=(0,a.Ae)(g[r].a,g[r].b,g[r].c,g[r].d-e),i=n.filter(e=>0<e&&e<10);return 1===i.length?i[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let S=1.31,A={BLACK:c.Uv,WHITE:c.UE},w=(e,r)=>{let{colorForContrastCheck:n,contrastMinimum:a}=r,i=()=>(0,o.f)(l,n),s=(0,c.HD)(n)?.1:-.1,l=f(e);for(;i()<a+.02&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)l=f(e);return e.rgbToHsluv(),i()>=a+.02},C=(e,r,n)=>{let a;let i=f(e),s=(0,o.f)(c.UE,i),l=(0,o.f)(c.Uv,i);if(r&&n)a=l>=s?"BLACK":"WHITE";else{if(!r&&!n)return;a=r?"BLACK":"WHITE"}("BLACK"!==a||!(l>=4.5))&&("WHITE"===a&&s>=4.5||w(e,{contrastMinimum:4.5,colorForContrastCheck:A[a]}))},N=e=>({r:(0,a.qE)((e.r-1)/.55+1,0,1),g:(0,a.qE)((e.g-1)/.55+1,0,1),b:(0,a.qE)((e.b-1)/.55+1,0,1),a:1}),L=e=>{e.hsluvToRgb();let r=new i.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},O=e=>{let r=L(e);return w(r,{contrastMinimum:S,colorForContrastCheck:A.WHITE}),N(f(r))};function R(e){let r=[],n=new Set;return e.forEach(e=>{let a=s.z5.format(e);n.has(a)||(n.add(a),r.push(e))}),r}function P(e){if(e)return{base:e,widget:e,baseLight:R(e.map(e=>p(e,.6,"BLACK_AND_WHITE")||c.Uv)),sticky:R(e.map(e=>d(e,400,"BLACK",{LESS_THAN:400})||c.Uv)),highlight:R(e.map(b)),pencilUI3:e,codeBlockTheme:e}}},484169:(e,r,n)=>{n.d(r,{B2:()=>_,H3:()=>I,I:()=>v,Kq:()=>b,Kx:()=>T,L4:()=>N,Pq:()=>w,Rc:()=>function e(r=[],n=!0){let a=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let a={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(a.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),a});if(n&&a.length){let e=a[a.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return a},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++){let i=r[a],o=n[a];if(i.t!==o.t||i.user_id!==o.user_id)return!1;if(!g(i,o))return!1;if(i.profile_id!==o.profile_id)return!1;else if(i.link!==o.link)return!1;else if(!h(i,o))return!1;else if(!e(i.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>A,l5:()=>E,pV:()=>C,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let a=n.t||"",i=n.styles||[];n.user_annotated?(a=n.user_annotated.handle,i=["lightbold"]):n.profile_id||null===n.profile_id?(a="@"+n.t,i=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||a)&&(a+="\n"),a+=i.includes("ol")?`${o+1}. `:"* ",a+=e(n.children)}):(a=(0,l.x6)(a).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${m.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(i=["lightbold"]));let o=[];return i.forEach(e=>{"b"===e?o.push(m.hp):"lightbold"===e?o.push(m.XH):"i"===e?o.push(m.u5):"s"===e&&o.push(m.Vc)}),o.length&&(a=`<span class='${s()(...o)}'>`+a+"</span>"),r+a},"");return(0,d.F)(n)||""},vj:()=>f});var a=n(354427),i=n(871043),o=n(536384),s=n.n(o),l=n(343651),c=n(302982),d=n(952401),u=n(461979),p=n(454805),m=n(540111);let _=5,h=(e,r)=>{if((0,i.uy)(e.styles)&&(0,i.uy)(r.styles))return!0;if((0,i.uy)(e.styles)!==(0,i.uy)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,i.uy)(e.user_annotated)&&(0,i.uy)(r.user_annotated))||(0,i.uy)(e.user_annotated)===(0,i.uy)(e.user_annotated)&&(0,a.c2)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((a,i)=>{(e||n)&&(n+="\n"),n+=r.styles.includes("ol")?`${i+1}. `:"* ",n+=y(a.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),a=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(a)):Array.from(a)).length}function v(e){return 0===e.length||/^\s*$/.test(y(e))}function T(e){return v(e)||y(e).length<=5}function I(e){let r=!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT),n=e.activeThread?.id?e.threads[e.activeThread.id]:null,a=!(n&&!(n&&T(n.reply.messageMeta)&&0===Object.keys(n.reply.attachments||{}).length)&&(!n.discardAttempts||n.discardAttempts<c.IT));return r&&a}function S(e){return y(e).length>=17500}function A(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function w(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function C(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),a=Math.min(Math.max(e.y,r.y),r.y+r.height);return new p.Mi(n,a)}function N(e){return e.includes("-")}},410441:(e,r,n)=>{function a(e){return parseInt(e.split("px")[0])}function i(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>a,jz:()=>i})},920043:(e,r,n)=>{n.d(r,{y:()=>a});let a=n(848318).createContext(null)},258871:(e,r,n)=>{n.d(r,{Uc:()=>c,iZ:()=>l});var a=n(186606);n(19180);var i=n(7376),o=n(513806),s=n(99496);let l=new Map(Object.entries(a.XpX).map(([e,r])=>[e,r]));function c(){let e=s.dZ.get((0,s.v7)())||"UNKNOWN",r=o.y.isApple()?"mac":"!mac",n=function(){let e;if(!i.x4)return{};let r=i.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(a.XpX).map(([e,r])=>[r,e])},82009:(e,r,n)=>{n.d(r,{yN:()=>I,ql:()=>S,lP:()=>A});var a=n(848318);n(301168);var i=n(19180),o=n(317720),s=n(476254),l=n(183603),c=n(410725),d=n(807949),u=n(679111);n(52161);var p=n(699547),m=n(353231),_=n(55116),h=n(806349),g=n(677334),f=n(777315),E=n(755595),y=n(615233),b=n(795234),v=n(376132);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,b.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:E.Ip.ignore(),recent_prototype_repos:E.Ip.ignore(),org_drafts_owners:e.array(v.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",b.td.toAPIParameters({...e,fuid:y.Ay().user_data?.id})))}};let T=null;async function I(e){if(!T)return;let r=[],n={},a=[];for(let i of T??[])i?.file?.key&&e.includes(i.file.key)&&(r.push({key:i.file.key,parent_org_id:i.file.parentOrgId,team_id:i.file.teamId,folder_id:i.file.folderId}),n[i.id]=null,a.push(i.file.key));let i=f.f.removeRecentFiles({fileKeys:a}),o=(0,l.WB)().optimisticallyDelete({RecentFile2:n},i);(0,m.OH)("File RecentFiles Removed",r),await o}function S(e,r){let n="string"==typeof r,[i]=(0,g.IT)(n?_.gB$.Query({_editorTypeRaw:r}):_.wZi.Query({})),o=(0,a.useMemo)(()=>i.transform(e=>"recentFiles2ByEditorType"in e.currentUser?e.currentUser.recentFiles2ByEditorType:e.currentUser.recentFiles2),[i]);return"loaded"===o.status&&(T=o.data),(0,a.useEffect)(()=>{"loaded"===o.status&&w((0,h.YN)(o.data),e,!1)},[o,e]),a.useMemo(()=>o.transform(e=>(0,h.YN)(e).recent_files),[o])}function A(e){let r=(0,c.Rs)(_.wZi,{});return"loaded"===r.status&&(T=r.data.currentUser.recentFiles2),(0,a.useEffect)(()=>{r.status===o.H.LOADED&&w((0,h.YN)(r.data.currentUser.recentFiles2),e,!1)},[r,e]),a.useMemo(()=>r.transform(e=>(0,h.iP)(e.currentUser.recentFiles2)),[r])}function w(e,r,n){let a=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);s.D.dispatch(d.uo({files:e.recent_files.concat(a),subscribeToRealtime:!1})),s.D.dispatch(p.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),(0,i.k)().remove_recent_files_loadedfolders_dispatch||s.D.dispatch(u.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}},190243:(e,r,n)=>{n.d(r,{Xf:()=>g});var a,i=n(848318),o=n(865114),s=n(329228),l=n(304756),c=n(967688),d=n(353379),u=n(318147),p=n(677334),m=n(138528),_=n(651108),h=n(683703);function g(e,r=!0){let n=(0,m.D6)("useOrgBillingData"),l=(0,m.j_)(n).unwrapOr(!1),[d,u]=(0,s.IT)(a.orgBillingDataQuery(e),{enabled:r});(0,_.i)(d,(0,c.t)("org_billing_error_default"));let p=(0,o.ZC)(e),h=i.useMemo(()=>p!==e&&!!p,[e,p]),f=(0,o.ZC)(l),E=i.useMemo(()=>!1===f&&l&&d.data&&0===Object.keys(d.data).length,[l,d.data,f]),y=i.useMemo(()=>E||h,[E,h]);return(0,i.useEffect)(()=>{"loading"!==d.status&&y&&u.refetch()},[u,y,d.status]),d}(a||(a={})).orgBillingDataQuery=p.M4.Query({fetch:async e=>(await h.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),p.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:i,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:i}).catch(e=>{throw o(e),e});r.mutate(a.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),p.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),i=a.orgBillingDataQuery(e.orgId);return r.mutate(i,e=>{e&&(e.invoices=n.data.meta.invoices)}),e.planInvoiceId?(r.refetch(i),await (0,d.jL)({planType:u.OL.ORG,planId:e.orgId})):await r.refetch(i),n.data.meta}),p.M4.Mutation((e,{query:r})=>{r.refetch(a.orgBillingDataQuery(e))})},900552:(e,r,n)=>{n.d(r,{MD:()=>u,YO:()=>d,aQ:()=>c});var a=n(848318),i=n(317720),o=n(410725),s=n(97481),l=n(55116);function c(e){let r=e.canEdit,n=!e.isOrphanedOrgProject,a=e.canMove,i=e.isEmpty;return{canEdit:r,canEditDescription:e.canEdit&&!e.isEditingLockedForUser,canShare:n,canMove:a,canSkipDeletionConfirmation:i,...(0,s.VI)(e),canTransferExternally:e.canTransferExternally,canTransferCopy:e.canTransferCopy,canTrash:e.canTrash,canTrashWithReasons:e.canTrashWithReasons,canRestore:e.canRestore,canPermanentlyDelete:e.canPermanentlyDelete,canConnect:e.canConnect,isPlanAdmin:!!e.planPermissions?.isAdmin,isPlanMember:!!e.planPermissions?.isMember,planCanConnectWithReasons:e.planPermissions?.canConnectWithReasons}}function d(e,r=!0){let n=(0,o.Rs)(l.oGE,{projectId:e},{enabled:r});return i.Qw.useTransform(n,e=>e.project?c(e.project):null)}function u(e){return function(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({projectId:e})),[e]),d=(0,o.p)(l.oGE,n,{enabled:r});return{projects:(0,a.useMemo)(()=>i.Qw.all(d.map(e=>e.result)).transform(r=>{let n={};for(let a=0;a<e.length;a++){let i=e[a],o=r[a]?.project;o?n[i]=c(o):n[i]={canEdit:!1,canShare:!1,canMove:!1,canEditDescription:!1,canSkipDeletionConfirmation:!1,...s.DI.disabled(),canTransferExternally:!1,canTransferCopy:!1,canTrash:!1,canTrashWithReasons:{result:!1,publicDenyReasons:[]},canRestore:!1,canPermanentlyDelete:!1,canConnect:!1,isPlanAdmin:!1,isPlanMember:!1,planCanConnectWithReasons:{result:!1,publicDenyReasons:[]}}}return n}),[d,e])}}(a.useMemo(()=>{let r=[];return e.forEach(e=>{let n=e.id;r.push(n)}),r},[e]))}},519829:(e,r,n)=>{n.d(r,{Q:()=>l});var a=n(848318),i=n(317720),o=n(410725),s=n(55116);function l(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,o.p)(s.vE,n,{enabled:r});return(0,a.useMemo)(()=>i.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let a of e){var n;let e=a.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},97223:(e,r,n)=>{n.d(r,{CS:()=>_,Sk:()=>f,_H:()=>m,ae:()=>g,gX:()=>h,k8:()=>y,nL:()=>E,zj:()=>p});var a=n(848318),i=n(317720),o=n(870567),s=n(410725),l=n(578590),c=n(318147),d=n(55116);let u=e=>(r,n)=>n?r.filter(r=>{let a=n[r];return!!a?.[e]}):[],p=u("canDelete"),m=u("canRestore"),_=u("canRestoreToOtherFolders"),h=u("canForeverDelete"),g=u("canMove"),f=u("isDraftRepo");function E(e,r,n){return n?e.filter(e=>{let a=r[e],i=n[e];return i?.isMainBranch(a)}):[]}function y(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({repoId:e})),[e]),u=(0,s.p)(d.rwE,n,{enabled:r});return(0,a.useMemo)(()=>i.Qw.all(u.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e){let r=e.canEdit,n=e.canMove,a=!!e.project?.canView,i=e.canEdit&&!e.isTrashed,s=e.canEdit&&e.isTrashed,d=e.isTrashed&&!!(0,o.oA)(e.sourceFile?.canRestore),u=(0,o.oA)(e.canMoveWithReasons),p=!!(e.isTrashed&&(0,o.oA)(e.sourceFile?.canRestoreToOtherFolders)),m=!!e.sourceFile?.isFavorited,_=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,h=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,g=!!e.project&&e.canEdit,f=e.parentOrgId?"org":e.teamId?"team":null,E=e.parentOrgId||e.teamId||null,y=(0,l._R)(c._Y.DESIGN,e.currentPlanUser),b=e.isDraftRepo;return{canDelete:i,canRename:r,canShowInProject:a,isFavorited:m,canRestore:d,canRestoreToOtherFolders:p,canForeverDelete:s,canFavorite:_,canUnfavorite:h,isMainBranch:r=>r===e.sourceFile?.key,canMove:n,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:g,planId:E,planType:f,canOpenMoveModal:!0,isUserRestrictedForSeat:y,planUser:e.currentPlanUser,isDraftRepo:b,canMoveWithReasons:u}}(e))}return r}),[u])}},726300:(e,r,n)=>{n.d(r,{ci:()=>u,dr:()=>p});var a=n(848318),i=n(317720),o=n(410725),s=n(318147),l=n(55116),c=n(138528),d=n(94831);function u(e){let r=e.canRead,n=e.canAdmin,a=e.canDelete,i=!!(e.roleOnObjectForUser&&e.roleOnObjectForUser.level>=d.e6.VIEWER),o=!!e.currentPrivilegedOrgUser;return{canAdminOrg:!!(e.currentPlanUser&&(0,c.A8)(e.currentPlanUser,s.Xn.ADMIN)),canDelete:a,canView:r,isInTeam:i,isOrgMember:o,canAdmin:n}}function p(e){return function(e,r=!0){let n=(0,a.useMemo)(()=>e.map(e=>({teamId:e})),[e]),s=(0,o.p)(l.y_L,n,{enabled:r});return{teams:(0,a.useMemo)(()=>i.Qw.all(s.map(e=>e.result)).transform(r=>{let n={};for(let a=0;a<e.length;a++){let i=e[a],o=r[a]?.team;o?n[i]=u(o):n[i]={canAdmin:!1,canAdminOrg:!1,canDelete:!1,canView:!1,isInTeam:!1,isOrgMember:!1}}return n}),[s,e])}}(a.useMemo(()=>{let r=[];return e.forEach(e=>{let n=e.id;r.push(n)}),r},[e]))}},800909:(e,r,n)=>{n.d(r,{e:()=>a});class a extends Error{constructor(){super(),this.name="LinterAbortedError"}}},47687:(e,r,n)=>{n.d(r,{Av:()=>s,I:()=>h,KV:()=>d,L2:()=>l,ZM:()=>p,az:()=>m,rJ:()=>_,rT:()=>c,yd:()=>o,zZ:()=>u});var a=n(382902),i=n(4881);let o=(0,i.Wh)(()=>(0,a.eU)(null)),s=(0,i.Wh)(()=>(0,a.eU)(null)),l=(0,i.Wh)(()=>(0,a.eU)([]));(0,i.Wh)(()=>(0,a.eU)(null));let c=(0,i.Wh)(()=>(0,a.eU)(null)),d=(0,i.Wh)(()=>(0,a.eU)(null)),u=(0,i.Wh)(()=>(0,a.eU)(null));(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(null));let p=(0,i.Wh)(()=>(0,a.eU)(null)),m=(0,i.Wh)(()=>(0,a.eU)(null)),_=(0,i.Wh)(()=>(0,a.eU)(void 0)),h=(0,i.Wh)(()=>(0,a.eU)("initial"))},226601:(e,r,n)=>{n.d(r,{F9:()=>g,FD:()=>S,Iy:()=>y,VA:()=>h,VG:()=>m,W0:()=>N,XC:()=>f,fY:()=>E,jq:()=>T,m7:()=>_,nE:()=>v,qL:()=>A,qZ:()=>p,qp:()=>C,u2:()=>I,v4:()=>b});var a=n(19180),i=n(382902),o=n(476254),s=n(730143),l=n(4881),c=n(698429),d=n(439796),u=n(79083);function p(){if(!(0,a.k)().aip_flower_garden)return!1;let e=o.D?.getState()?.selectedView;return!!(0,c.Uq)(e)}let m=(0,l.Wh)(()=>(0,i.eU)(new Map)),_=(0,l.Wh)(()=>(0,i.eU)(new Map(new Map)));(0,l.Wh)(()=>(0,i.eU)(e=>e(h).size));let h=(0,l.Wh)(()=>(0,i.eU)(new Set)),g=(0,l.Wh)(()=>(0,i.eU)(new Set)),f=(0,l.Wh)(()=>(0,i.eU)(new Set)),E=(0,l.Wh)(()=>(0,i.eU)(null)),y=(0,l.Wh)(()=>(0,i.eU)(new Map)),b=(0,l.Wh)(()=>(0,i.eU)({libraryVariables:[],libraryVariableSetIdToSet:{},status:"uninitialized",libraryKeys:new Set})),v=(0,l.Wh)(()=>(0,i.eU)(e=>{let r=e(d.uk),n=e(b),a=e(C),i={};return a&&r.forEach(e=>{i[e.node_id]=e}),n.libraryVariables.forEach(e=>{i[e.node_id]=e}),i}));(0,l.Wh)(()=>(0,i.eU)(e=>{let r=e(C),n=e(d.qy);return{localVariableSets:r?n:{},libraryVariableSets:e(b).libraryVariableSetIdToSet}}));let T=(0,l.Wh)(()=>(0,i.eU)({status:"loading",subscribedStylesByFileKey:{},allStyles:[],localStyles:null})),I=(0,i.eU)(u.td.UNINITIALIZED),S=(0,i.eU)(!1);(0,i.eU)([]);let A=(0,l.Wh)(()=>(0,i.eU)(new Map));(0,l.Wh)(()=>(0,i.eU)(new Map));let w=(0,l.Wh)(()=>(0,i.eU)(new Set)),C=(0,l.Wh)(()=>(0,i.eU)(e=>{let r=e(w),n=e(s.ze);return r.has(n)??!1})),N=(0,l.Wh)(()=>(0,i.eU)(new Set))},251776:(e,r,n)=>{n.d(r,{Bw:()=>O,Hu:()=>P,jd:()=>C,kl:()=>w,pg:()=>R,xR:()=>D});var a=n(186606),i=n(672154),o=n(320953),s=n(19180),l=n(382902),c=n(141760),d=n(206639),u=n(781627),p=n(28827),m=n(176576),_=n(476254),h=n(227276),g=n(182317),f=n(813147),E=n(133595),y=n(45341),b=n(483656),v=n(346288);let T="aip_flower_garden_color_variable_config";function I(e,r){let n=0,a=e.length;for(;n<a;){let i=Math.floor((n+a)/2);r.distance<e[i].distance?a=i:n=i+1}e.splice(n,0,r)}function S({localVariables:e,libraryVariableSetIdToSet:r,libraryVariables:n,node:i,opacity:o,paintColor:s,maxColorDistance:l,contrastData:u}){let p=function({localVariables:e,libraryVariables:r}){return[...Object.values(e),...Object.values(r)].reduce((e,{variable:r,resolvedValue:n})=>{if(n){if(!n)return e;let a=(0,c.colorToHex)(n.value,n.value.a);e[a]||(e[a]=[]),e[a].push({variable:r,resolvedValue:n,variableId:r.node_id,variableSetId:r.variableSetId})}return e},{})}((0,m.TW)({node:i,resolvedType:a.rXF.COLOR,localVariables:e,libraryVariableSetIdToSet:r,libraryVariables:n})),_={...s,a:o??1},h=p[(0,c.colorToHex)(_,o)]??[];return h.length>0||Object.keys(p).forEach(e=>{let r=p[e]??[],n=r?.[0];if(!n)return;let a=n.resolvedValue.value,i=(0,d._W)(a,_);if(!(i>l)){if(u){let{aaPass:e}=(0,y.Ef)(a,u.backgroundColor,u.contrastRatios.AA,u.contrastRatios.AAA);if(!e)return}for(let e of r)I(h,{variable:e.variable,resolvedValue:e.resolvedValue,variableId:e.variableId,variableSetId:e.variableSetId,distance:i})}}),h}function A(e){if(e===p.C.REQUIRE_FILL_COLOR_VARIABLES||e===p.C.TEXT_BACKGROUND_CONTRAST_AA)return"FILL";if(e===p.C.REQUIRE_STROKE_COLOR_VARIABLES)return"STROKE";throw Error(`Unknown ruleId: ${e}`)}function w(e){let r=e.filter(e=>!!e.visible&&!!e.opacity&&e.opacity>0),n=r[r.length-1];return{index:e.findIndex(e=>n===e),paint:n}}function C(e){return"SOLID"===e.type&&e.color&&(!e.colorVar||"ALIAS"!==e.colorVar.dataType)?{opacity:e.opacity,color:e.color}:null}async function N({sourceNode:e,color:r,opacity:n,fixMetadata:a,prop:i,contrastData:o}){let s=await (0,h.w0)(T),l=s.get("llmMaxCandidates",20),c=s.get("llmMaxColorDistance",40),d={node:e,paintColor:r,opacity:n,localVariables:a.localVariables,libraryVariables:a.libraryVariables,libraryVariableSetIdToSet:a.libraryVariableSetIdToSet,maxColorDistance:c,contrastData:o},p=S(d).slice(0,l);if(0===p.length&&(d.maxColorDistance=2*c,0===(p=S(d)).length))return null;let m=(0,g.g)();if(1===p.length)return{fixes:p.map(e=>({variableId:e.variable.node_id,resolvedValue:e.resolvedValue})),suggestionId:m};let _=await (0,u.l)(e,p,i),f=p.find(({variable:e})=>e.name===_);if(!f){let r=p.slice(0,p.length/2);if(r.length>1&&(_=await (0,u.l)(e,r,i),f=p.find(({variable:e})=>e.name===_)),!f&&!(f=p[0]))return null}return{fixes:[{variableId:f.variable.node_id,resolvedValue:f.resolvedValue}],suggestionId:m}}async function L({sourceNode:e,color:r,opacity:n,fixMetadata:i,prop:o,contrastData:s}){let c=await (0,h.w0)(T),p=c.get("rerankerMaxSimilarCandidates",50),_=c.get("rerankerMaxColorDistance",40),f=c.get("rerankerMaxPopularCandidates",50),v=[...i.libraryKeys].map(e=>e.toString()),S=await (0,b.kA)({library_keys:v,entity_type:"VARIABLE",entity_value_type:"COLOR",max_results_per_library:f}),{popularVariables:A,similarVariables:w}=function({localVariables:e,libraryVariableSetIdToSet:r,libraryVariables:n,node:i,opacity:o,paintColor:s,maxColorDistance:l,topKVariables:c,contrastData:u}){let p=(0,m.TW)({node:i,resolvedType:a.rXF.COLOR,localVariables:e,libraryVariableSetIdToSet:r,libraryVariables:n}),_=new Map;for(let[e,r]of c)_.set(e,new Set(r));let h={...s,a:o??1},g=[],f=[],E=p.localVariables;return[...Object.values(p.libraryVariables),...Object.values(E)].forEach(e=>{let r=e.variable,n=e.resolvedValue;if(r.resolvedType!==a.rXF.COLOR||!n||"MIXED"===n||n.resolvedType!==a.rXF.COLOR)return;if(u){let{aaPass:e}=(0,y.Ef)(P(n.value),u.backgroundColor,u.contrastRatios.AA,u.contrastRatios.AAA);if(!e)return}let i={variable:r,resolvedValue:n,variableId:r.node_id,variableSetId:r.variableSetId,distance:void 0},o="LIBRARY"===r.subscriptionStatus?r.library_key.toString():"",s=_.get(o);s&&s.has(o)&&g.push(i),i.distance=(0,d._W)(n.value,h),i.distance>l||I(f,i)}),{popularVariables:g,similarVariables:f}}({node:e,paintColor:r,opacity:n,localVariables:i.localVariables,libraryVariables:i.libraryVariables,libraryVariableSetIdToSet:i.libraryVariableSetIdToSet,maxColorDistance:_,topKVariables:S,contrastData:s}),C=[...A,...w.slice(0,p)],N=(0,g.g)(),L=l.zl.get(E.Vg)??"",O=await (0,u.i)(e,C,r,N,L,Array.from(i.libraryKeys),o);return O&&0!==O.length?{fixContext:{fixes:O.map(e=>{let r=C.find(({variable:r})=>r.node_id===e);return r?{variableId:e,resolvedValue:r.resolvedValue}:null}).filter(e=>null!==e),suggestionId:(0,g.g)()},queryId:N}:null}async function O({sourceNode:e,color:r,opacity:n,fixMetadata:a,ruleId:i,contrastData:o,propToApply:l}){let c,d=null,u="LLM",p=l??A(i);if(!p)return null;if((0,s.k)().aip_flower_garden_rerank){u="RERANKER";let i=await L({sourceNode:e,color:r,opacity:n,fixMetadata:a,prop:p,contrastData:o});i&&(d=i.fixContext,c=i.queryId)}else d=await N({sourceNode:e,opacity:n,color:r,fixMetadata:a,prop:p,contrastData:o});if(!d)return null;let m=d.fixes.map(e=>{let r=a.availableVariables[e.variableId];return r?"LIBRARY"===r.subscriptionStatus?r.key.toString():r.keyForPublish.toString():null}).filter(e=>null!==e);return(0,E.gU)(d.suggestionId,c,m,u,i),d}async function R(e,r,n,a,s,l,c){let d;let u=c??A(a);if(!u)return!1;let{fixes:p,suggestionId:m}=r;if(!p||0===p.length)return!1;let h=p[0];if(!h)return!1;let{variableId:g,resolvedValue:y}=h;if(!g)return!1;let b=n.availableVariables[g];if(!b?.node_id)return!1;let v=i.sD.fromString(b.node_id);if(!v)return!1;let T=_.D.dispatch;if(!await T((0,f.Oe)(b)))return Promise.resolve(!1);let I=i.sD.toKiwi(v),{index:S,paint:C}=w("FILL"===u?e.fills:"STROKE"===u?e.strokePaints.data:[]);if(!C||-1===S)return Promise.resolve(!1);if(s){let e=y.value;d={...C},delete d.colorVar,d.color=e}else d={...C,colorVar:{resolvedDataType:"COLOR",dataType:"ALIAS",value:{alias:I}}};return o.l7.user("design-linter-fix-color-tokens",()=>{if("FILL"===u?e.fills=[...e.fills.slice(0,S),d,...e.fills.slice(S+1)]:"STROKE"===u&&(e.strokePaints={data:[...e.strokePaints.data.slice(0,S),d,...e.strokePaints.data.slice(S+1)],blobs:e.strokePaints.blobs}),!s&&l){let e=b.variableSetId,r="LIBRARY"===b.subscriptionStatus?b.key.toString():b.keyForPublish.toString();(0,E.Hf)({suggestionId:m,variableKey:r,subscriptionStatus:b.subscriptionStatus,variableSetId:e,ruleId:a})}}),!0}function P(e){let{r,g:n,b:a,a:i}=e??{};if(void 0!==r&&void 0!==n&&void 0!==a&&void 0!==i)return{r:Math.round(255*r)/255,g:Math.round(255*n)/255,b:Math.round(255*a)/255,a:Math.round(255*i)/255}}function D(e,r,n){if(!e||!e.colorVar||"ALIAS"!==e.colorVar.dataType)return null;let a=i.sD.fromString((0,v.MH)(e.colorVar)??"")??"",o=r[a];return!(!o||!("library_key"in o)||n.has(o.library_key))?{variableId:a.toString(),libraryKey:o.library_key}:null}},880191:(e,r,n)=>{n.d(r,{N:()=>d});var a=n(320953),i=n(28827),o=n(476254),s=n(813147),l=n(133595);let c={[i.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES]:"bottomLeftRadius",[i.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES]:"bottomRightRadius",[i.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES]:"topLeftRadius",[i.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES]:"topRightRadius"};async function d(e,r,n,i,d,u){let p=c[i];if(!p)return!1;let{fixes:m,suggestionId:_}=r;if(!m||0===m.length)return!1;let h=m[0];if(!h)return!1;let{variableId:g,resolvedValue:f}=h;if(!g)return!1;let E=n.availableVariables[g];if(!E?.node_id)return!1;let y=o.D.dispatch,b=await y((0,s.Oe)(E));if(!b)return Promise.resolve(!1);if(d){switch(e.rectangleCornerRadiiIndependent=!0,p){case"topLeftRadius":e.rectangleTopLeftCornerRadius=f.value;break;case"topRightRadius":e.rectangleTopRightCornerRadius=f.value;break;case"bottomLeftRadius":e.rectangleBottomLeftCornerRadius=f.value;break;case"bottomRightRadius":e.rectangleBottomRightCornerRadius=f.value}return!0}try{if(a.l7.user("design-linter-apply-corner-radius-variable",()=>{e.setBoundVariable(p,b)}),u){let e=E.variableSetId,r="LIBRARY"===E.subscriptionStatus?E.key.toString():E.keyForPublish.toString();(0,l.Hf)({suggestionId:_,variableKey:r,subscriptionStatus:E.subscriptionStatus,variableSetId:e,ruleId:i})}return!0}catch(e){return console.error("Design linting error setting bound variable: ",e),!1}}},812696:(e,r,n)=>{n.d(r,{n:()=>d});var a=n(320953),i=n(28827),o=n(476254),s=n(813147),l=n(133595);let c={[i.C.REQUIRE_TOP_PADDING_VARIABLES]:"paddingTop",[i.C.REQUIRE_BOTTOM_PADDING_VARIABLES]:"paddingBottom",[i.C.REQUIRE_LEFT_PADDING_VARIABLES]:"paddingLeft",[i.C.REQUIRE_RIGHT_PADDING_VARIABLES]:"paddingRight"};async function d(e,r,n,i,d,u){let p=c[i];if(!p)return!1;let{fixes:m,suggestionId:_}=r;if(!m||0===m.length)return!1;let h=m[0];if(!h)return!1;let{variableId:g,resolvedValue:f}=h;if(!g)return!1;let E=n.availableVariables[g];if(!E?.node_id)return!1;let y=o.D.dispatch,b=await y((0,s.Oe)(E));if(!b)return!1;if(d){switch(p){case"paddingTop":e.stackTopPadding=f.value;break;case"paddingBottom":e.stackBottomPadding=f.value;break;case"paddingLeft":e.stackLeftPadding=f.value;break;case"paddingRight":e.stackRightPadding=f.value}return!0}try{if(a.l7.user("design-linter-apply-padding-variable",()=>{e.setBoundVariable(p,b)}),u){let e=E.variableSetId,r="LIBRARY"===E.subscriptionStatus?E.key.toString():E.keyForPublish.toString();(0,l.Hf)({suggestionId:_,variableKey:r,subscriptionStatus:E.subscriptionStatus,variableSetId:e,ruleId:i})}return!0}catch(e){return console.error("Design linting error setting bound padding variable: ",e),!1}}},176576:(e,r,n)=>{n.d(r,{TW:()=>d,d$:()=>c,sB:()=>u});var a=n(186606),i=n(432121),o=n(28827),s=n(489082),l=n(190878);function c(e,r){let n=[a.j0r.ALL_FILLS,a.j0r.FRAME_FILL,a.j0r.SHAPE_FILL,a.j0r.TEXT_FILL],i=[a.j0r.STROKE];switch(e){case o.C.REQUIRE_ASSETS_FROM_SELECTED_LIBRARIES:switch(r){case"FILL":return n;case"STROKE":return i;case"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS":case"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS":case"RECTANGLE_TOP_LEFT_CORNER_RADIUS":case"RECTANGLE_TOP_RIGHT_CORNER_RADIUS":return[a.j0r.CORNER_RADIUS];case"STACK_SPACING_HORIZONTAL":case"STACK_SPACING_VERTICAL":case"STACK_PADDING_TOP":case"STACK_PADDING_BOTTOM":case"STACK_PADDING_LEFT":case"STACK_PADDING_RIGHT":return[a.j0r.GAP];default:return[]}case o.C.REQUIRE_FILL_COLOR_VARIABLES:return n;case o.C.REQUIRE_STROKE_COLOR_VARIABLES:return i;case o.C.TEXT_BACKGROUND_CONTRAST_AA:return[a.j0r.TEXT_FILL];case o.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:case o.C.REQUIRE_VERTICAL_SPACING_VARIABLES:case o.C.REQUIRE_TOP_PADDING_VARIABLES:case o.C.REQUIRE_BOTTOM_PADDING_VARIABLES:case o.C.REQUIRE_LEFT_PADDING_VARIABLES:case o.C.REQUIRE_RIGHT_PADDING_VARIABLES:return[a.j0r.GAP];case o.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case o.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case o.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case o.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:return[a.j0r.CORNER_RADIUS];default:return[]}}function d({localVariables:e,libraryVariables:r,libraryVariableSetIdToSet:n,node:o,resolvedType:c}){if([a.rXF.MAP,a.rXF.SYMBOL_ID,a.rXF.IMAGE,a.rXF.LINK,a.rXF.JS_RUNTIME_ALIAS,a.rXF.SLOT_CONTENT_ID].includes(c))throw Error(`Unsupported resolved type: ${c}`);let d=e.reduce((e,r)=>{if(r.resolvedType!==c)return e;let n=o.resolveVariable(r.node_id);return n&&n.resolvedType!==a.rXF.MAP&&n.resolvedType!==a.rXF.SYMBOL_ID&&(e[r.node_id]={variable:r,resolvedValue:n,variableSetId:r.variableSetId}),e},{}),u=(0,s.E7)(a.mHF?.getModeContext(o.guid))??{};return{localVariables:d,libraryVariables:r.reduce((e,r)=>{if(r.resolvedType!==c)return e;let a=n[r.variableSetId];if(!a)return e;let o=i.sH(a.node_id);if(!o)return e;let s=(0,l.Z)({variable:r,variableCollectionKey:a.key,variableCollectionCheckpointId:a.checkpoint_id,collectionId:o,modeContext:u});return s&&(e[r.node_id]={variable:r,resolvedValue:s,variableSetId:r.variableSetId}),e},{})}}function u({variablesMap:e,allowedScopes:r}){return{localVariables:Object.entries(e.localVariables).reduce((e,[n,a])=>{let i=a.variable.scopes;for(let o of r)i.includes(o)&&(e[n]=a);return e},{}),libraryVariables:Object.entries(e.libraryVariables).reduce((e,[n,a])=>{let i=a.variable.scopes;for(let o of r)i.includes(o)&&(e[n]=a);return e},{})}}},79083:(e,r,n)=>{n.d(r,{FR:()=>i,td:()=>a});var a=(e=>(e.UNINITIALIZED="UNINITIALIZED",e.INITIALIZED="INITIALIZED",e.IDLE="IDLE",e.DETECTION_REQUESTED="DETECTION_REQUESTED",e.DETECTING="DETECTING",e.GROUPING_PENDING="GROUPING_PENDING",e.GROUPING_COMPLETE="GROUPING_COMPLETE",e))(a||{}),i=(e=>(e.LIBRARY_SELECTOR_INITIAL="LIBRARY_SELECTOR_INITIAL",e.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW="LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW",e.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW="LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW",e.ALL_VISUAL_GROUPS_VIEW="ALL_VISUAL_GROUPS_VIEW",e.SELECTED_VISUAL_GROUP_VIEW="SELECTED_VISUAL_GROUP_VIEW",e))(i||{}),o=(e=>(e.LOADING="LOADING",e.EMPTY="EMPTY",e.CONTENT="CONTENT",e.ERROR="ERROR",e))(o||{})},366376:(e,r,n)=>{n.d(r,{DR:()=>y,Kx:()=>d,Lw:()=>c,Nt:()=>g,Pq:()=>m,SV:()=>l,f:()=>_,iy:()=>f,lk:()=>h,pe:()=>p,rx:()=>E,tz:()=>s});var a=n(19180),i=n(382902),o=n(29188);let s=(0,i.E3)("dev-mode-mcp-get-code-connect-tools-enabled",!0,{subscribeToChanges:!0}),l=(0,i.E3)("dev-mode-mcp-codebase-suggestions-enabled",!1,{subscribeToChanges:!0}),c=()=>i.zl.get(l)&&(0,a.k)().dt_my_cool_plugin_codebase_suggestions,d=(0,i.E3)("dev-mode-mcp-get-code-options","design_to_react",{subscribeToChanges:!0}),u=(0,i.E3)("dev-mode-mcp-image-options",o.eD?.hasFeature("addMcpImageSupport")?"local":"placeholder-svg",{subscribeToChanges:!0}),p=(0,i.yu)(u,({onSet:e})=>{e(()=>{o.eD?.sendMCPUpdate("tool_list",{})})}),m=(0,i.E3)("dev-mode-mcp-deny-overwriting-files",!0,{subscribeToChanges:!0}),_=(0,i.E3)("dev-mode-mcp-mock-dir-for-image-writes-to-disk",void 0,{subscribeToChanges:!0}),h=(0,i.E3)("dev-mode-mcp-use-tailwind",!0,{subscribeToChanges:!0});function g(){return{codeConnectToolsEnabled:i.zl.get(s),codebaseSuggestionsEnabled:c(),codeOption:i.zl.get(d),markupImageOptions:i.zl.get(p),useTailwind:i.zl.get(h),denyOverwritingFiles:i.zl.get(m)}}function f(){return{codeConnectToolsEnabled:i.zl.get(s),codebaseSuggestionsEnabled:c()??!1,codeOption:i.zl.get(d),markupImageOption:i.zl.get(p),useTailwind:i.zl.get(h),denyOverwritingFiles:i.zl.get(m)}}let E=(0,i.eU)(null),y=(0,i.eU)(null)},708754:(e,r,n)=>{n.d(r,{I_:()=>I,Kk:()=>A,_Q:()=>S});var a=n(938982),i=n(382902),o=n(476254),s=n(458608);n(329228);var l=n(998568),c=n(986219),d=n(35949),u=n(43322),p=n(85586),m=n(840652),_=n(353231),h=n(730143),g=n(302395),f=n(55116),E=n(693246),y=n(208624),b=n(403425),v=n(366376);function T(e,r,n,a=new Set){let i=(0,h.sS)(r),o=r.mirror.sceneGraph,s=(0,h.XJ)(r);if(!e)throw Error("No node provided");if(!o)throw Error("No sceneGraph provided");if(!i)throw Error("No fileKey provided");if(!s)throw Error("No openLibraryKey provided");let l=(0,m.q)(e,[],a),c=new Map;return!function(e,r,n,a,i,o){for(let s of r)try{let{backingNodeId:r,backingLibraryKey:o,backingComponentKey:l,backingStateGroupKey:c}=(0,b.HX)(s.guid,n,i),d=(0,b.ad)(s.guid,n,a,!1,i);if(!o||!r)continue;let u={nodeToFetch:s,backingNodeId:r,backingComponentKey:l,backingStateGroupKey:c,instanceList:d};e.has(o)||e.set(o,[]),e.get(o).push(u)}catch(e){console.error(`Error while preparing Code Connect mapping for node ${s.guid}:`,e instanceof Error?e.message:String(e)),o[s.guid]=`${e instanceof Error?e.message:String(e)}`}}(c,l,o,i,s,n),{fileKey:i,openLibraryKey:s,nodesByLibraryKey:c,sceneGraph:o}}async function I(e){let r=i.zl.get(v.rx);if(r)return[r,{}];let n={},a={},l=o.D.getState(),c=l.mirror.appModel.devHandoffCodeLanguage,d=(0,u.XP)(c),m=(0,p.yT)(d.id);if(!m)return(0,_.GS)("mcp.get_code_connect_mapping.no_label",o.D.getState().openFile?.key||"",o.D.getState(),{codeLanguage:JSON.stringify(c),validatedCodeLanguage:JSON.stringify(d)}),[{},{}];let{fileKey:h,nodesByLibraryKey:g,openLibraryKey:E,sceneGraph:y}=T(e,l,a);for(let[e,r]of g)for(let i=0;i<r.length;i+=20){let o=r.slice(i,i+20);try{let r=await (0,s.Ek)(f.Opb,{nodes:o.map(r=>`${e},${r.backingNodeId}`),openFileKey:h});await w({batch:o,result:r,libraryKey:e,fileKey:h,openLibraryKey:E,sceneGraph:y,label:m,nodeIdToCodeConnectContent:n,nodeIdToErrors:a})}catch(e){for(let r of o)console.error(`Error while fetching batch for node ${r.nodeToFetch.guid}:`,e instanceof Error?e.message:String(e)),a[r.nodeToFetch.guid]=`${e instanceof Error?e.message:String(e)}`}}return[n,a]}async function S(e,r){let n=i.zl.get(v.DR);if(n)return[n,{}];let a={},s={},l=o.D.getState(),c=await (0,g.Q)((0,E.mZ)(!0)),{nodesByLibraryKey:d}=T(e,l,s,r),u=new Map;for(let[e,r]of d.entries())for(let n of r){let r;(r=n.backingStateGroupKey?{type:"state_group",key:n.backingStateGroupKey}:n.backingComponentKey?{type:"component",key:n.backingComponentKey}:null)&&(u.has(r.key)||u.set(r.key,{type:r.type,libraryKey:e,nodes:[]}),u.get(r.key).nodes.push(n.nodeToFetch))}let p=Array.from(u.entries());for(let r=0;r<p.length;r+=20){let n=p.slice(r,r+20);if(0===n.length)continue;let i={assets:n.map(([e,{type:r,libraryKey:n}])=>({key:e,type:r,library_key:n})),planParentType:c.key.type,planParentId:c.key.parentId??"",numResultsPerAsset:3};try{let e=await y.$W.getCodeSuggestionsBulk(i);Object.entries(e.data.meta.results??{}).forEach(([e,r])=>{let n=u.get(e);if(!n)return;let i=r.map(e=>({componentName:e.name,source:e.src_path??""}));n.nodes.forEach(e=>{a[e.guid]=i})})}catch(r){console.error(`Error while fetching codebase suggestions for node ${e.guid}:`,r instanceof Error?r.message:String(r)),s[e.guid]=`${r instanceof Error?r.message:String(r)}`}}return[a,s]}async function A(e){let r=await (0,s.Ek)(f.J_J,{key:e});return"loaded"===r.file.status&&r.file.data?.hasPermission===!0}async function w({batch:e,result:r,libraryKey:n,fileKey:i,openLibraryKey:s,sceneGraph:c,label:d,nodeIdToCodeConnectContent:u,nodeIdToErrors:p}){if(!r.file?.preload_code_connect_lk){console.error(`No preload_code_connect_lk data found for library key: ${n}`);return}for(let m of e)try{let e=r.file.preload_code_connect_lk;if(!e||!e.docsById)continue;let p=e.docsById?.[`key-${n},${m.backingNodeId}`];if(!p)continue;let h=JSON.parse(p),g=function(e,r){let n="unknown";if(Array.isArray(e)){let a=e.find(e=>e.label===r);n=a?.type||n}return n}(h,d),f=(0,b.Xe)(h,d),E={},y=m.instanceList;try{for(let r of y){let n=e.docsById?.[`key-${r}`];if(!n)continue;let a=(0,b.Xe)(JSON.parse(n),d);a&&(E[`key-${r}`]=JSON.parse(a.figmadoc))}}catch(e){console.error("Error processing instance Code Connect:",e),(0,l.$D)(a.e.DEVELOPER_TOOLS,e,{extra:{instances:y,codeConnectDocRaw:p}})}let v=[];try{v=JSON.parse(f.figmadoc)}catch(e){console.error("Error parsing Code Connect:",e),(0,l.$D)(a.e.DEVELOPER_TOOLS,e,{extra:{figmadoc:f.figmadoc}});continue}if(Array.isArray(v)&&(v=v[0]||null),!v)continue;if(!v.component||!v.source){(0,_.GS)("mcp.get_code_connect_mapping.missing_data",i,o.D.getState(),{componentName:v.component||"",source:v.source||""});continue}u[m.nodeToFetch.guid]={componentName:v.component,source:v.source,snippet:await C({node:m.nodeToFetch,fileKey:i,openLibraryKey:s,sceneGraph:c,figmadocResult:v,instanceFigmadocs:E||{}}),version:g}}catch(e){console.error(`Error while processing Code Connect mapping for node ${m.nodeToFetch.guid}:`,e instanceof Error?e.message:String(e)),p[m.nodeToFetch.guid]=`${e instanceof Error?e.message:String(e)}`}}async function C({node:e,fileKey:r,openLibraryKey:n,sceneGraph:a,figmadocResult:i,instanceFigmadocs:o}){let s=await (0,d.qZ)({node:e,instanceFigmadocs:o,scene:a,template:i.template,openLibraryKey:n,fileKey:r});return s&&"SUCCESS"===s.result?(0,c.A)({output:s,sceneGraph:a,includeInstancePills:!1,unrenderableInstanceMessage:"{/* Code Connect Logic Instance */}"}).code:null}},58707:(e,r,n)=>{n.d(r,{t2:()=>S,w6:()=>I});var a=n(349277),i=n(938982),o=n(768618),s=n(19180),l=n(382902),c=n(979070),d=n.n(c),u=n(961736),p=n.n(u),m=n(29188),_=n(476254),h=n(998568),g=n(691195),f=n(353231),E=n(362501),y=n(80133),b=n(109161),v=n(366376),T=n(550586);function I(e,r,n){(0,f.GS)("mcp.client_tool_call_duration_split",_.D.getState().openFile?.key||"",_.D.getState(),{operation:e,durationMs:Math.round(r),toolName:n})}async function S(e,r,c,u,m){let{designToReact:_}=await Promise.all([n.e(650),n.e(8427),n.e(9880),n.e(7402)]).then(n.bind(n,169880)),f=l.zl.get(v.pe),S=l.zl.get(v.lk),N=l.zl.get(v.Pq),L=l.zl.get(v.f),O=new Map,R={transformer:b.B9,assets:O},P=new Set,[D]=c||[null,null],[k]=u||[null,null],M=new Set(D?Object.keys(D):[]),F=new Set(k?Object.keys(k):[]),x=k?Object.fromEntries(Object.entries(k).map(([e,r])=>[e,{"data-codebase-suggestions":JSON.stringify(r)}])):{},U=function(e){try{let r=function(e){let i=e.annotations.filter(e=>e.label);i.length>0&&(a[e.guid]=i.reduce((e,r)=>{let a=r.categoryId?n?.find(e=>e.id===r.categoryId):null,i=a?(0,y.uA)(a):"",o=(0,E.zb)(r.label);return e[i]?e[i].push(o):e[i]=[o],e},{})),e.childrenNodes.forEach(r)},n=e.sceneGraph.getRoot().annotationCategories,a={};return r(e),Object.entries(a).reduce((e,[r,n])=>(e[r]=Object.entries(n).reduce((e,[r,n])=>(e[r?`data-${r}-annotations`:"data-annotations"]=n.join(" | "),e),{}),e),{})}catch(r){return console.error("Error extracting annotations",r),(0,h.$D)(i.e.DEVELOPER_TOOLS,r,{extra:{rootNode:e?.guid}}),{}}}(e),B=(0,s.k)().d2r_refactor_mcp??!1,G=performance.now(),{files:V}=await _(e,async e=>{let r=performance.now(),n=await (0,b.hB)({assets:O,compactDOM:!0,isMcpGeneration:!0}),i=await n.serializeHTML(e.guid);return I("html_serialization",performance.now()-r,a.sj),i},{markupImageOption:f,imageAssetsOptions:R,convertToTailwindCSS:S,inlineStyleProperties:!S,useFigmaComponents:!0,useFigmaComponentForNode:e=>!M.has(e)&&!F.has(e),onlySerializeUsedVariants:!0,disableExtractFrames:!0,disableSvgImports:!0,optimizeCode:e=>{if(B){let r=performance.now(),n=(0,b.Py)(e,!0);return n.then(()=>{I("code_optimization",performance.now()-r,a.sj)}),n}return Promise.resolve(e)},domNodeToReactStr:({attributes:e})=>{let r=e?.getNamedItem("id")?.value;if(!r)return null;let n=(0,g.xg)(r);if(!n)return null;let a=(0,o.UN)().getFromDeveloperFriendlyId(n);if(!a||"INSTANCE"!==a.type)return null;if(D&&D[a.guid]){let e=function e(r,n,a){let i="INSTANCE"===r.type?n[r.guid]:null;if(i?.snippet)return a.add(`import ${i.componentName} from "${i.source}"`),[i.snippet];{let s=[];for(let i of r.childrenNodes){let r=e(i,n,a);s.push(...r)}if(i){let e="";try{var o;o=r.componentProperties(),e=Object.entries(o).map(([e,r])=>{let n=d()(e.split("#")[0]),a="string"==typeof r.value?`"${r.value}"`:`{${r.value}}`;return`${n}=${a}`}).join(" ")}catch(e){}let n=[],l=i.componentName;return a.add(`import ${l} from "${i.source}"`),s.length>0?(n.push(w({componentName:l,props:e,hasChildren:!0})),n.push(...s),n.push(w({componentName:l,props:"",isClosingTag:!0}))):n.push(w({componentName:l,props:e})),n}return s}}(a,D,P);if(e.length>0)return e.join("\n")}return null},attributes:p()(U,x)});I("design_to_react",performance.now()-G,a.sj);let H=V.find(e=>"index.tsx"===e.name)?.contents;if(!H||"string"!=typeof H)throw Error("No index.tsx string file found");if("local"===f){let e=performance.now();(0,a.Zw)(O),H=A(H,a.fJ),I("image_assets_update",performance.now()-e,a.sj)}else if("write-to-disk"===f){let e=performance.now(),r=m||L;if(!r)throw Error("Path for asset writes is required for write-to-disk option");let n=r.endsWith("/")?r.slice(0,-1):r;await C(O,n,N),H=A(H,n),I("image_write_to_disk",performance.now()-e,a.sj)}P.size>0&&(H=`${[...P].join("\n")}

${H}`);let z=performance.now(),K=(0,T.l)(e,r);I("variables_and_styles",performance.now()-z,a.sj);let W=[{type:"text",text:H}];return S&&W.push({type:"text",text:a.Ep}),Object.keys(K).length>0&&W.push({type:"text",text:`These variables are contained in the design: ${Object.entries(K).map(([e,r])=>`${e}: ${r}`).join(", ")}.`}),D&&Object.keys(D).length>0&&W.push({type:"text",text:a._0}),k&&Object.keys(k).length>0&&W.push({type:"text",text:a.s8}),"local"===f&&W.push({type:"text",text:a.n2}),Object.entries(U).length>0&&W.push({type:"text",text:a.pD}),"write-to-disk"===f&&(m||L)&&W.push({type:"text",text:(0,a.k9)(m||L)}),{content:W}}function A(e,r){return e.replace(/import\s+(\w+)\s+from\s+['"]figma:asset\/([^'"]+)\.png['"];/g,(e,n,a)=>`const ${n} = "${r}/${a}.png";`).replace(/import\s+(\w+)\s+from\s+['"]figma:asset\/([^'"]+)\.svg['"];/g,(e,n,a)=>`const ${n} = "${r}/${a}.svg";`)}function w({componentName:e,props:r,hasChildren:n=!1,isClosingTag:a=!1}){return a?`</${e}>`:""===r?n?`<${e}>`:`<${e} />`:n?`<${e} ${r}>`:`<${e} ${r} />`}async function C(e,r,n){if(m.eD&&e.size>0)for(let[a,i]of e.entries()){let e=new Uint8Array(await i.arrayBuffer()),o=`${r}/${a}`;try{await m.eD.writeFileToPath(o,e,n)}catch(e){throw Error(`Failed to write asset ${a} to disk at path ${o}: ${e.message}`)}}}},480540:(e,r,n)=>{n.d(r,{Lv:()=>o,jb:()=>i,oG:()=>s}),n(848318),n(349277),n(768618);var a=n(382902);n(29188),n(324762),n(439952),n(614092),n(366376),n(58707);let i=(0,a.eU)(null),o=(0,a.eU)(null),s=(0,a.eU)(null)},623788:(e,r,n)=>{n.d(r,{As:()=>s,uT:()=>o}),n(301168);var a=n(19180),i=n(29188);function o(e){let r=e.plans,n=e.openFile,a=r.find(e=>e.plan_id===n?.parentOrgId);return a?.is_dev_mode_mcp_disabled===!0}function s(){return!!(i.eD?.hasFeature("addMcpWrites")&&(0,a.k)().dt_mcp_write_assets_locally)}},29188:(e,r,n)=>{n.d(r,{O_:()=>h,S8:()=>_,Zy:()=>m,aw:()=>a.OpenTarget,eD:()=>u,fU:()=>y,hX:()=>p,hl:()=>E,y3:()=>b});var a=n(289644),i=n(313850),o=n(656329),s=n(998568),l=n(765239),c=n(509024),d=n(174220);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),p=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),m=!!navigator.userAgent.match(/Figma\//),_=window.bellFeedAPI?window.bellFeedAPI:null;function h(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}let g=u||p;g&&!navigator.userAgent.match(/figma-linux/)&&((0,i.v)({browser_name:"Figma Desktop",desktop_channel:g.beta?"beta":"stable",desktop_version:g.getInformationalVersion(),desktop_client_id:g.getClientID(),os_version:g.getOSVersion()}),(0,s.XM)("browser",{name:"Desktop",version:g.getInformationalVersion()}));let f=h(8);function E(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function y(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function b(){return!!u}f&&(0,i.v)({browser_name:"Figma Desktop",desktop_version:f.desktopAppVersion,os_version:f.osVersion})},984051:(e,r,n)=>{n.d(r,{W2:()=>w,_A:()=>C,_p:()=>E,hW:()=>A,vn:()=>S});var a=n(19180),i=n(382902),o=n(7376),s=n(637640),l=n(533737),c=n(318147),d=n(55116),u=n(656320),p=n(611922),m=n(398612),_=n(29188),h=n(476254),g=n(615233);let f=(()=>{if(o.Co){let e="initialPathName";if(o.Co[e])return o.Co[e];o.Co[e]=s.Ay.location.pathname}return s.Ay.location.pathname})();function E(){return!(0,m.GZ)()&&!_.eD&&!!(((0,g.tl)().editing_file||(0,g.tl)().link_password_input)&&y(b)||y(v))}function y(e){return e(f)&&e(s.Ay.location.pathname)}function b(e){return["/file/",...Object.values({[c._Y.DESIGN]:"/design/",[c._Y.WHITEBOARD]:"/board/",[c._Y.SLIDES]:"/slides/",[c._Y.SITES]:"/site/",[c._Y.COOPER]:"/buzz/",[c._Y.FIGMAKE]:"/make/"})].some(r=>e.startsWith(r))}function v(e){let r=(0,u.YP)(e);return r.length>=4&&"files"===r[1]&&"feed-posts"===r[2]&&!!r[3]}let T="autoOpenInDesktopApp",I="openInDesktopAppMenuModal";function S(){return(0,a.k)().desktop_use_db_auto_open_pref?i.zl.get(N):o.x4?o.x4[T]:void 0}function A(e){o.x4&&(o.x4[T]=e),(0,a.k)().desktop_write_auto_open_pref&&(p.e.setPreferenceValue({key:"auto_open_in_desktop",value:e}),h.D.dispatch(l.b({user_changed_auto_open_pref:!0})))}function w(){return o.x4?o.x4[I]:void 0}function C(e){o.x4&&(o.x4[I]=e)}let N=(0,i.eU)(e=>{let r=e(d.imP.Query({})),n=g.tl().user_data?.auto_open_in_desktop;return"loaded"===r.status&&r.data?.currentUser?.userPreferences?.status==="loaded"&&(n=r.data.currentUser.userPreferences.data?.preferences.auto_open_in_desktop),n})},174220:(e,r,n)=>{n.d(r,{JN:()=>l,x5:()=>c});var a=n(891772),i=n(382902),o=n(918777);let s=[{minVersion:"124.7.0",date:"2025-05-21"},{minVersion:"125.1.0",date:"2025-08-13"},{minVersion:"125.2.0",date:"2025-08-28"},{minVersion:"125.3.0",date:"2025-09-20"},{minVersion:"125.4.0",date:"2025-10-22"},{minVersion:"125.5.0",date:"2025-11-06"},{minVersion:"125.6.0",date:"2026-01-01"}];var l=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(l||{});function c(e,r=(0,o.A)(),n=s){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,a.Z)(e,"10.100.0")&&1===(0,a.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:i,date:s}of n){if(1!==(0,a.Z)(e,i))continue;let n=(0,o.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let d=(0,i.E3)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,i.eU)(e=>{let r=e(d);if(r){let e=(0,o.A)(r),n=(0,o.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(d,n?(0,o.A)().toISOString():"")})},664138:(e,r,n)=>{n.d(r,{a:()=>o});var a=n(29188),i=n(989232);function o(){a.eD&&(a.eD.setLoading(!1),a.eD.showFileBrowser(),console.error("Not signed in, aborting init!"),(0,i.trackEvent)("Desktop Logged Out Page Load"))}},875002:(e,r,n)=>{function a(e,r,n){let a=e;for(;a;){if(n(a))return a;if(a===r)break;a=a.parentElement}return null}function i(e){for(;;){var r;if(null==e)return null;if(null!=(r=e)&&r instanceof HTMLElement)return e;if(!("parentNode"in e))return null;e=e.parentNode}}function o(e){return!!e&&!!(d(e)||l(e)||p(e)||e.isContentEditable||e.hasAttribute("tabindex"))}function s(e){return!!e&&"INPUT"===e.tagName}function l(e){return!!e&&!!("A"===e.tagName&&e.hasAttribute("href"))}function c(e){return"button"===e.type||"submit"===e.type}function d(e){return!!e&&!!("BUTTON"===e.tagName||s(e)&&c(e))}function u(e){return l(e)||!!e&&!!(d(e)||function(e,...r){let n=e.getAttribute("role");return null!==n&&r.includes(n)}(e,"button"))}function p(e){return!!e&&(!!s(e)&&!c(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName)}n.d(r,{Ap:()=>p,Bu:()=>u,Og:()=>s,SD:()=>i,Xx:()=>o,qR:()=>a})},446470:(e,r,n)=>{n.d(r,{Dk:()=>T,RM:()=>y,gX:()=>g,k0:()=>E,wY:()=>I});var a=n(938982),i=n(19180),o=n(197638),s=n.n(o),l=n(752462),c=n(615233),d=n(656329),u=n(998568),p=n(810503),m=n(142896),_=n(944239),h=n(540698);class g extends l.s{constructor(e){super("Script load error.",e)}}let f=(0,_.D)((e,r,n=window.document)=>{let a=n.createElement("script");return e&&e.length>0&&(a.id=e),a.type="text/javascript",a.async=!0,a.setAttribute("nonce",(0,c.tl)().csp_nonce),r&&(a.crossOrigin="anonymous"),a});function E(e,r){let n=r?.window?.document||window.document;e||(console.error("bad src"),(0,u.$D)(a.e.CLIENT_PLATFORM,Error("bad loadScript src")));let i=r?.id,o=!r||!1!==r.cors,s=!r||!1!==r.retry,c=r?.waitForCondition,d=Error("original async stack"),m=new Promise((r,a)=>{let u=async n=>{if(void 0!==c)try{await new Promise((e,r)=>{let n=0,a=()=>{if(c())return e();++n<50?scheduler.postTask(a,{delay:100,priority:"background"}):r(Error("waitForCondition timed out"))};a()})}catch(r){(0,p.Lo)("loadScript","waitForCondition timed out",{src:e}),a(r)}r(n)},m=f(i,o,n);m.onload=u,m.onerror=r=>{let c=e=>{(0,p.Lo)("loadScript","Script load error event",{event:e}),a(new g({cause:d}))};if(!s){c(r);return}n.head.removeChild(m);let _=f(i,o,n);if(_.onload=u,_.onerror=e=>{n.head.removeChild(_),c(e)},!e){a(new l.s("invalid src",{cause:d}));return}let h=-1===e.indexOf("?")?"?":"&";_.src=e+h+"lsRetry="+Math.random(),n.head.appendChild(_);let E="string"==typeof r?r:r.message;(0,p.Lo)("loadScript","Retrying script load",{originalSrc:e,retrySrc:_.src,initialError:E})},m.src=e,n.head.appendChild(m)});return m.catch(r=>console.error(`Fetching ${e} failed: ${r.toString()}`)),m}function y(){if((d.Ay.safari&&Number(d.Ay.version)>=18&&19>Number(d.Ay.version)||d.Ay.ios&&d.Ay.chrome&&Number(d.Ay.version)>=135&&137>=Number(d.Ay.version)||d.Ay.webkit&&Number(d.Ay.version)>=135&&137>=Number(d.Ay.version))&&(0,i.k)().hook_webkit_text_decoder){let e=f(void 0,!0);e.text=`
    try {
      const originalDecode = TextDecoder.prototype.decode
      TextDecoder.prototype.decode = function (input, options = {}) {
        if (!this.bytesSinceDecoderReset) {
          this.bytesSinceDecoderReset = 0
        }
        this.bytesSinceDecoderReset += input.byteLength
        if (this.bytesSinceDecoderReset > 1024 * 1024 * 1024) {
          this.bytesSinceDecoderReset = 0
          this.delegate = new TextDecoder(this.encoding, this.options)
        }
        if (this.delegate) {
          return this.delegate.decode(input, options)
        }
        return originalDecode.call(this, input, options)
      }
    } catch (e) {
      // noop
    }
    `,document.head.appendChild(e)}}function b(){let e=!!(navigator.clipboard&&navigator.clipboard.read&&navigator.clipboard.write),r=window.FigmaMobile;return(e||!!r?.readClipboardData)&&!(0,h.nl)()}function v(e,{withLineBreaks:r=!1}={}){return new Promise((n,a)=>{let i=document.activeElement,o=!1;try{e.length>104857.6&&console.warn("string too long for copyText usage watchdog timer of 1s.  formatting will take too long");let n=r?document.createElement("textarea"):document.createElement("input");n.style.cssText="position: fixed; top: -100px",n.classList.add(m.Dm),document.body.appendChild(n),n.value=e,n.focus(),n.select(),(o=document.execCommand("copy"))||!d.Ay.msedge||(o=!0),n.remove()}finally{i?.focus()}o?n():a()})}async function T(e,r){if(b())try{await function(e,{withLineBreaks:r=!1}={}){return r||(e=e.replace(/$\s?/gm,"")),navigator.clipboard.writeText(e)}(e,r);return}catch{}return v(e,r)}async function I(e,r){if(b())try{await function(e,r){let n;let a=new Blob([e],{type:"text/html"});if(void 0===r){let r=document.createElement("div");r.innerHTML=s().sanitize(e),n=new Blob([r.innerText],{type:"text/plain"})}else n=new Blob([r],{type:"text/plain"});let i=new ClipboardItem({"text/plain":n,"text/html":a});return navigator.clipboard.write([i])}(e,r);return}catch{}return v(r)}},238444:(e,r,n)=>{n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>p,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>_,qe:()=>h,xf:()=>s,zN:()=>m});var a=n(306099),i=n(615233),o=n(514627);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=a.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function p(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function m(e){return e.toLowerCase().split("@")[1]||null}function _(e){return!!e&&e.endsWith((0,i.tl)().figma_email_suffix)}function h(e){let r=m(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com")||e.endsWith("@dev.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},464555:(e,r,n)=>{n.d(r,{Yw:()=>h,br:()=>p,f3:()=>f,ih:()=>u,jc:()=>m,l7:()=>d,qd:()=>g});var a=n(83178),i=n(19180),o=n(398612),s=n(637640),l=n(615233),c=n(287105);function d(){return(0,o.GZ)()&&l.Ay().frame_context?.type==="embed"}function u(){return(0,o.GZ)()&&l.Ay().frame_context?.type==="integration"}function p(){try{return window.self.origin===window.parent.origin}catch(e){return!1}}function m(){return d()&&!!(0,i.k)().embedkit_v2}function _(){return(0,c.v6)(s.Ay.location.search)}function h(){let e=_();return e.embed_host||e["embed-host"]}function g(){let e=_(),r=e.embed_host||e["embed-host"],n=e["node-id"],a="0"!==e["viewport-controls"];return{embedHost:r,hideUi:e.hide_ui,isCommunityViewer:!!e.community_viewer,isViewportControlsEnabled:a,nodeId:n,showFooter:"0"!==e.footer,showPageSelector:"0"!==e["page-selector"]&&!(n&&!a),theme:f(),isDevMode:"dev"===e.m||"dev"===e.mode}}function f(){if(m()){var e;return"system"===(e=(0,l.Ay)().embed_theme)?a.DARK_THEME_MEDIA_QUERY.matches?"dark":"light":e}}},422380:(e,r,n)=>{n.d(r,{n:()=>i});var a=n(810503);function i(){(0,a.ED)("[hideEmbedViewerLoader]","Hiding embed viewer loader");try{let e=document.getElementById("embed-viewer-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},250))}catch(e){(0,a.ED)("[hideEmbedViewerLoader]","Failed to hide embed viewer loader",e)}}},204571:(e,r,n)=>{n.d(r,{CV:()=>u,Cg:()=>c,Js:()=>l,KJ:()=>d,LU:()=>p}),n(19180);var a=n(197638),i=n(654670);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){if(!e.startsWith("<iframe"))return"";let r=a.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}function d(e){let r=c(e),n=r||e,a=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(a)?{isFromIFrame:!!r,url:a}:null}function u(e,r,n){let a=d(r.trim());return a?(e(i.M({clipboardText:r,url:a.url,isTextIframe:a.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function p(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=a.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),i=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(i);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},226697:(e,r,n)=>{n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>i});var a=n(989232);function i(e,r,n,i,o,s){(0,a.trackEvent)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:i,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,i,o,s){(0,a.trackEvent)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:i,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,a.trackEvent)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,a.trackEvent)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,a.trackEvent)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,a.trackEvent)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,a.trackEvent)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},594680:(e,r,n)=>{async function a(){return await Promise.resolve().then(n.bind(n,130198))}async function i(e,r={includeIDs:!1}){return(await a()).serializeJSX(e,r)}async function o(e,r={includeIDs:!1}){let n=await a();return await n.deserializeJSX(e,r)}async function s(e,r,n){let i=await a();return await i.getReactFunctionComponentDefinition(e,r,n)}n.d(r,{LZ:()=>o,gZ:()=>s,oy:()=>i})},524050:(e,r,n)=>{n.d(r,{PU:()=>o,jW:()=>a});let a=/^\/(?:file|design|board|slides|site|buzz|rev|make)\/([0-9a-zA-Z]{22,128})(?:\/|$)/,i=/(?:file|design|board|slides|site|buzz|rev|make)/;function o(e){return RegExp(`^${i.source}$`).test(e)}},490077:(e,r,n)=>{n.d(r,{AH:()=>g,_f:()=>f,jY:()=>h});var a=n(938982),i=n(186606),o=n(989232),s=n(315933),l=n(841807),c=n(53941),d=n(286003),u=n(827976),p=n(820780),m=n(998568),_=n(765618);function h(e){switch(e){case i.IPZ.SWT_CREATED:return"shapeWithTextCreated";case i.IPZ.SWT_EDITED:return"shapeWithTextEdited";case i.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case i.IPZ.SWT_RESIZED:return"shapeWithTextResized";case i.IPZ.STICKY_EDITED:return"stickyEdited";case i.IPZ.STICKY_DELETED:return"stickyDeleted";case i.IPZ.STICKY_RESIZED:return"stickyResized"}}class g{constructor(e,r,n=1,a=!1,d=null,u=()=>{},m=!1,h=()=>{},g=()=>{}){this._analyticsEventName=e,this._processTimersForLogging=r,this._timerDepth=n,this._forwardToDatadog=a,this._tsmerMetrics=d,this._customLogMetricsCallbackHistogram=u,this._isRecording=!1,this._isCanceled=!1,this._onFrameStartCallback=()=>{},this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownMetricsFrameMs=null,this._lastKnownFrameIndex=null,this._lastLogTime=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._gpuDeviceInfo=(0,p.l)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),null===this._lastLogTime&&(this._lastLogTime=this._lastKnownFrameMs),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let r={};return this._distributionByWorkName.forEach((e,n)=>{r[n]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,r},this.setFileInfo=(e,r)=>{(e!==this._fileKey||r!==this._productType)&&(this._fileKey=e,this._productType=r,this._resetLogState())},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,r=!1)=>{let n={};n.schema=new l.UP().schema(),n.reason=e,n.isFirstLogAfterLoad=this._isFirstLogForTab,n.imagesLoading="loading"===this._imagesLoadingState,n.multiplayerUserCount=this._multiplayerUserCount,n.ongoingSpotlight=this._ongoingSpotlight,n.fileKey=this._fileKey,n.productType=this._productType,n.refreshRate=this.refreshRate(),n.commentsRenderCount=this._numberOfRenderedCommentsWatermark,n.contextRestoredCount=this._contextRestoredCount,n.maxRenderLayerCount=this._maxRenderLayerCount,n.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,p.q)(this._gpuDeviceInfo,n),n.numAnimationsFromCpp=this._numAnimationsFromCpp,n.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(n.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),n.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),n.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),n.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(n),n.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,r)=>{if(r in n)throw Error(`attempt to track performance for a work item with a reserved name: ${r}`);n[r]=e.toLogParams()}),n.totalBatchTime=performance.now()-this._lastLogTime,this._lastLogTime=performance.now(),r?setTimeout(()=>{this._sendLogRequest(n)},0):this._sendLogRequest(n)},this._sendLogRequest=e=>{let r={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,o.trackEvent)(this._analyticsEventName,e,r)},this._processTimerTree=(e,r,n)=>{if(r>=this._timerDepth)return[];let a=[];for(let i of e){let e=[...n,i.name],o=e.join(".");if(!(o in this._lastRecordedHitCountByName)||!(o in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime;continue}let s=i.hitCount-this._lastRecordedHitCountByName[o];if(0===s)continue;s>i.elapsedTimes.length&&console.warn(`Logged performance for ${o} too many times in one animation frame`);let l=i.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[o];this._lastRecordedHitCountByName[o]=i.hitCount,this._lastRecordedDurationSinceLastFrame[o]=i.totalElapsedTime,a.push({path:e,elapsedTime:l});let c=r+1;c<this._timerDepth&&i.children.length>0&&(a=a.concat(this._processTimerTree(i.children,c,e)))}return a},this.onFrameStart=()=>{this._isRecording&&!this._isCanceled&&"ok"===c.y.getFullscreenCrashState()&&this._onFrameStartCallback()},this.setOnFrameStartCallback=e=>{this._onFrameStartCallback=e},this.checkNotVisibleOrRecording=()=>"visible"!==document.visibilityState||!this._isRecording,this.onMetricsEventLoopFrame=()=>{if(this.checkNotVisibleOrRecording()){this._lastKnownMetricsFrameMs=null;return}let e=performance.now();if(null!=this._lastKnownMetricsFrameMs){let r=e-this._lastKnownMetricsFrameMs;r<6e4&&this._getOrCreateDistribution("metrics_loop").add(r)}this._lastKnownMetricsFrameMs=e},this.onFrame=()=>{if("ok"!==c.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if(this.checkNotVisibleOrRecording())return"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let r=e-this._lastKnownFrameMs;if(r<6e4){for(let e of(this._getOrCreateDistribution("all").add(r),this._activeNamedEvents))this._getOrCreateDistribution(e).add(r);let e=performance.now(),n=[];for(let[e,a]of this._eventTrackers)a.didEventOccur()&&(n.push(e),this._getOrCreateDistribution(e).add(r));let a=performance.now()-e;for(let e of(i.glU?.updatePerfMode(n),this._singleFrameNamedEvents))this._getOrCreateDistribution(e).add(r);null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(r,n,a,this._fileKey,this._productType),this._singleFrameNamedEvents.clear()}}if(this._lastKnownFrameMs=e,s.rH.areTimersOpen())return this._isCanceled=!0,"canceled";let r=this._processTimerTree(s.rH.report(),0,[]);for(let e of this._processTimersForLogging(r))this._getOrCreateDistribution(e.path.join(".")).add(e.elapsedTime);return this._tsmerMetrics?.onFrame(),null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState()),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetAllDistribution=()=>this._getOrCreateDistribution("all"),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let r=e>0?"loading":"loaded";r!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=r)},this._slowFrameTracker=new _.N(m,h,g),document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return"120FPS";if(r.min<32)return"60FPS";if(r.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return{frameLength:1e3/120,fps:120};if(r.min<32)return{frameLength:1e3/60,fps:60};r.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let r=this._distributionByWorkName.get(e);return r||(r=new l.UP,this._distributionByWorkName.set(e,r)),r}addEventTracker(e,r){this._eventTrackers.set(e,r)}addTimeEvent(e,r){this._getOrCreateDistribution(e).add(r)}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:r,ongoingSpotlight:n}=e;this._ongoingSpotlight=n,this._multiplayerUserCount=r}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}class f{constructor(e,r){this._viewerMaxTimerDepth=5,this._viewer=null,this._rafHandle=-1,this._addCustomViewerLogMetrics=e=>{!function(e,r){e&&(r.optimizationExposures=JSON.stringify(Object.fromEntries(e.getAndClearHistogramBatchFields())))}(this._viewer,e)},this._addCustomSlowFrameTrackerLogMetrics=(e,r)=>{!function(e,r,n){if(e){let a=i.AiE.getAndClearHistogramBatchFields(),o=new Map;a.forEach((e,r)=>{o.set(r,e>0)}),r[_.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(new Map([...o,...e.getAndClearSlowFrameTrackerFields()]))),r[_.N.gpuMetricsCurrentFrameKey]=e.getViewerGpuMetricsCurrentFrameJSON().toString(),r[_.N.cpuTimerTreeCurrentFrameKey]=i.fZb.getCurrentFrameCpuTimerTreeJSON().toString(),n&&(r[_.N.gpuMetricsPreviousFrameKey]=e.getViewerGpuMetricsPreviousFrameJSON().toString(),r[_.N.cpuTimerTreePreviousFrameKey]=i.fZb.getPreviousFrameCpuTimerTreeJSON().toString())}}(this._viewer,e,r)},this._clearCustomSlowFrameTrackerLogMetrics=e=>{!function(e,r){e&&(i.AiE?.clearSlowFrameTrackerFields(),e.clearAllSlowFrameTrackerFields(),e.gpuMetricsNextFrame(r),i.fZb?.nextFrame(r))}(this._viewer,e)},this._frameDistributionTracker=new g("frame_distributions",function(e){return r=>{let n=[];for(let i of r){if(i.path.length>e||i.path.length<1){(0,m.$D)(a.e.CLIENT_PLATFORM,Error(`We should not go deeper than ${e} levels into the timer tree`));continue}let r=i.path[0];if("react-render"===r||r.startsWith("viewer:")){let e=i.path.map(e=>e.startsWith("viewer:")?e.substr(7):e).join(".");n.push({...i,path:[e]})}}return n}}(this._viewerMaxTimerDepth),this._viewerMaxTimerDepth,!0,null,this._addCustomViewerLogMetrics,!0,this._addCustomSlowFrameTrackerLogMetrics,this._clearCustomSlowFrameTrackerLogMetrics),this._renderingStateTimer=null,this._renderingActive=!1,this._viewerLoadSubscription=null,this._handleRenderingStart=()=>{this._renderingActive=!0,this._renderingStateTimer=new l.M4,this._renderingStateTimer.start()},this._handleRenderingStop=()=>{this._renderingStateTimer=null,this._renderingActive=!1},this._handleInitialDocumentLoad=()=>{this._frameDistributionTracker.startRecording(!0)},this._handleDidRebuildAfterReconnect=()=>{this._frameDistributionTracker.startRecording(!1)},this._handleWillRebuildAfterReconnect=()=>{this._frameDistributionTracker.stopRecordingAndLog("about-to-rebuild-scene")},this.onFrame=()=>{"ok"===c.y.getFullscreenCrashState()&&(this._frameDistributionTracker.onFrameStart(),this._recordRenderingTimeEvent(),this._rafHandle=requestAnimationFrame(this.onFrame),"canceled"===this._frameDistributionTracker.onFrame()&&cancelAnimationFrame(this._rafHandle))},this._rafHandle=requestAnimationFrame(this.onFrame),this._frameDistributionTracker.setFileInfo(e,r)}uninstall(){this._frameDistributionTracker.uninstall(),cancelAnimationFrame(this._rafHandle),this.setViewer(null)}getFrameDistributionTrackerForTest(){return this._frameDistributionTracker}setViewer(e){null!=this._viewer&&(this._viewerLoadSubscription&&(this._viewerLoadSubscription(),this._viewerLoadSubscription=null),this._viewer.off("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.off("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.off("renderingStart",this._handleRenderingStart),this._viewer.off("renderingStop",this._handleRenderingStop),this._viewer.off("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.off("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.off("scrollEvent",this._frameDistributionTracker.handleScrollEvent)),this._frameDistributionTracker.stopRecordingAndLog("changing-viewer"),this._viewer=e,null!=this._viewer&&(this._viewerLoadSubscription=(0,u.zM)(this._handleInitialDocumentLoad),this._viewer.on("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.on("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.on("renderingStart",this._handleRenderingStart),this._viewer.on("renderingStop",this._handleRenderingStop),this._viewer.on("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.on("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.on("scrollEvent",this._frameDistributionTracker.handleScrollEvent))}_recordRenderingTimeEvent(){this._renderingActive&&(this._renderingStateTimer&&6e4>this._renderingStateTimer.getElapsedTime()&&this._frameDistributionTracker.addTimeEvent("rendererActive",this._renderingStateTimer.getElapsedTime()),this._renderingStateTimer=new l.M4,this._renderingStateTimer.start())}setInternalFrameDistributionTrackerForTest(e){this._frameDistributionTracker=e}}},945104:(e,r,n)=>{n.d(r,{Ax:()=>s,Jt:()=>o});var a=n(938982),i=n(998568);class o{constructor(e,r,n){this.equals=e=>JSON.stringify(this)===JSON.stringify(e),this.result=e,this.score=r,this.text=n}}class s{constructor(e,r){this.isValidQuery=()=>!!this.forwardRegex||!!this.backwardRegex,this.matchAndSort=(e,r)=>{let n=[];return e.forEach(e=>{let a=this.matchAgainstItem(e,r);a&&n.push(a)}),n.sort((e,r)=>e.score>r.score||e.score===r.score&&e.text<r.text?-1:1)},this.matchAgainst=e=>{let r=[];return e.forEach(e=>{let n=this.matchAgainstText(e);n&&r.push(n)}),r.sort((e,r)=>e.score>r.score||e.score===r.score&&e.text<r.text?-1:1)},this.matchAgainstItem=(e,r)=>{if(!this.isValidQuery())return null;let n=r(e),a=this.forwardRegex?.exec(n),i=this.backwardRegex?.exec(this.reverseText(n));if(!a||!i)return null;let s=a.slice(1),l=i.slice(1).map(e=>this.reverseText(e)).reverse(),c=this.scoreMatch(s),d=this.scoreMatch(l),u=Math.max(c,d);return new o(c>=d?s:l,u,e)},this.matchAgainstText=e=>this.matchAgainstItem(e,e=>e),this.compileRegularExpression=(e,r)=>{let n="^(.*)",o=!1;for(let a of e){let e=a>="A"&&a<="Z"||a>="a"&&a<="z"||a>="0"&&a<="9";if(r||e){let e=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n+=`(${e})(.*?)`,o=!0}}if(!o)return null;n+="$";try{return new RegExp(n,r?"iu":"i")}catch(o){return(0,i.$D)(a.e.EXTENSIBILITY,o,{extra:{query:e,acceptsUnicode:r,regex:n}}),null}},this.reverseText=e=>{let r="";for(let n=e.length-1;n>=0;n--)r+=e[n];return r},this.scoreMatch=e=>{let r="",n=0;for(let a=0;a<e.length;a++){let i=e[a];a%2&&(""===r?(n+=10,1===a&&n++):" "===r.slice(-1)&&(n+=10)),r=i}return n},this.forwardRegex=this.compileRegularExpression(e,r),this.backwardRegex=this.compileRegularExpression(this.reverseText(e),r)}}},630677:(e,r,n)=>{n.d(r,{Bs:()=>F,DT:()=>O,Rm:()=>M,W8:()=>U,_B:()=>P,xI:()=>k});var a=n(19180),i=n(382902),o=n(7376),s=n(989232),l=n(398612),c=n(476254),d=n(637640),u=n(810503),p=n(304756),m=n(103661),_=n(272464),h=n(668542),g=n(946778),f=n(311045),E=n(540760),y=n(193795),b=n(112323),v=n(314979),T=n(967688),I=n(210853),S=n(31898),A=n(944239),w=n(238444),C=n(281690),N=n(295534);let L="google_sso_temp";var O=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e.PROTOTYPE="google_one_tap_prototype",e))(O||{}),R=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e.FIGMA_REV_LOGGED_OUT_FOOTER="figma_rev_logged_out_footer",e.FIGMA_REV_LOGGED_OUT_FOOTER_WITH_GOOGLE="figma_rev_logged_out_footer_continue_with_google",e.FIGMA_REV_LOGGED_OUT_HEADER="figma_rev_logged_out_header",e.FIGMA_REV_LOGGED_OUT_HEADER_WITH_GOOGLE="figma_rev_logged_out_header_with_google",e))(R||{});let P="/api/session/google_auth/signin",D=(0,A.D)(()=>new Promise((e,r)=>{document.cookie=L+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,l.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,s.trackEvent)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,T.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function a(){let i=(0,o.OS)(document.cookie,L);if(null!==i){let n=JSON.parse(i);document.cookie=L+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,s.trackEvent)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,T.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,s.trackEvent)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,T.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(a,250)},250)}));async function k(e,r){let n=await D();return await U(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function M({dispatch:e,origin:r,redirectUrl:n}){let a=await D();return n&&e(m.WY({redirectUrl:n})),await U(a,{dispatch:e,apiUrl:P,origin:r})}function F(e,r,n){(0,f.g)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=L+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let a=JSON.stringify({apiUrl:P,redirectPath:e});document.cookie=`${L}=${encodeURIComponent(a)}; path=/`;let i=r?d.Ay.unsafeRedirectMsTeams:d.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),i(o)}class x extends Error{}async function U(e,{dispatch:r,apiUrl:n,origin:o,formId:l}){let d=!!o&&Object.values(O).includes(o);await (0,E.sT)({googleUserInfo:e});let A={};if(l){let e=document.getElementById(l);A=(0,C.t)(e)}try{let{data:i}=await function(e,r,n){let i={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,a.k)().google_federated_cm??!1,totp_key:n};return p.Ay.post(e,i)}(n,e,A?.totp_key);return r(v.s.flash((0,T.t)("auth.sign-in-success",{email:i.meta.email}))),i.meta&&i.meta.email_domain_type?((0,s.trackEvent)("Sign Up (GTM)",{isWorkEmail:(0,w.iE)(i),sha256_email:await (0,N.qV)(i.meta.email)}),await (0,b.p)("sign_up_google_sso")):((0,s.trackEvent)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:i?.meta?.id,origin:o}),await (0,b.p)("sign_in_google_sso")),{type:"login",user:i.meta}}catch(p){let{data:n}=p,a=(0,I.J)({data:n},n?.message),s=(0,T.t)("auth.google-sso.unable-to-auth");if(n&&n.reason&&"object"==typeof n.reason&&"two_factor"===n.reason.missing)return(0,h.MZ)()&&null!=o&&(r(m.Ts({origin:o,formState:g.qB.SIGN_IN,redirectUrl:c.D?.getState().auth.redirectUrl})),r(S.to({type:y.a,data:{}}))),i.zl.set(_._G,e),r((0,h.P8)({resp:p})),{type:"mfa"};let l=c.D?.getState().auth.redirectUrl||"";if(d&&(0,f.g)("google_one_tap_login_error",o,{error:a}),a===(0,T.t)("auth.error.account-not-found")||a===(0,T.t)("auth.error.api.cannot_verify_captcha_token"))return function({userInfo:e,origin:r,dispatch:n,redirectUrl:a}){var i;null!=r&&(0,h.MZ)()?(n(m.Ts({origin:r,formState:g.qB.SIGN_UP,redirectUrl:a})),n(S.to({type:y.a,data:{}}))):c.D?.getState()?.modalShown?.type!==y.a&&(0,h.MZ)()&&(0,u.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),i={...e,origin:r},n(m.OZ({googleIdToken:i.token})),n(m.fX({googleTokenType:i.tokenType})),n(m.m9({value:i.name})),i.origin&&n(m.dl({authOrigin:i.origin})),n(m.E({formState:g.qB.VERIFY_HUMAN,prevState:g.qB.SIGN_UP,arkoseAction:g.cc.SIGN_UP,postVerificationAction:m.Sr()}))}({userInfo:e,origin:o,dispatch:r,redirectUrl:l}),{type:"signup"};if(n?.reason==="saml_required"){let e=new x(a);throw e.errorType=g.By.SAML_REQUIRED,e}throw r(v.s.error(a||s,15e3)),Error(a||(0,T.t)("auth.google-sso.unable-to-auth"))}}},115088:(e,r,n)=>{n.d(r,{H:()=>s});var a=n(289644),i=n(186606),o=n(29188);let s={trigger(e){if(o.eD)switch(e){case i.JA.GENERIC:o.eD.triggerHaptic(a.HapticType.GENERIC,1,0);break;case i.JA.LEVEL:o.eD.triggerHaptic(a.HapticType.LEVEL,1,0);break;case i.JA.SNAP:o.eD.triggerHaptic(a.HapticType.SNAP,1,0);break;default:throw Error(e)}}}},732839:(e,r,n)=>{n.d(r,{o:()=>i,p:()=>o});var a=n(848318);function i(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,a.useEffect)(()=>e.subscribe(r),[r,e])}},996202:(e,r,n)=>{n.d(r,{U:()=>s,am:()=>c,hC:()=>l});var a=n(848318),i=n(301168),o=n(353231);function s(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState();(0,o.ds)(r,i.openFile?.key,i,n,a)},[e])}function l(){let e=(0,i.Pj)();return a.useCallback((r,n)=>{let a=e.getState();(0,o.GS)(r,a.openFile?.key??"",a,n??{})},[e])}function c(){let e=(0,i.Pj)();return a.useCallback((r,n,a)=>{let i=e.getState(),s=i.openFile?.key,l=i.user&&i.user.id;(0,o.ds)(r,s,i,{userId:l,...n},a)},[e])}},354175:(e,r,n)=>{n.d(r,{cU:()=>i,wY:()=>o});var a=n(848318);let i={width:0,height:0};function o(e,r){let[n,i]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{if(!e||!e.current)return;let a=new ResizeObserver(a=>{for(let o of a)if(e.current===o.target){let e=o.contentRect.width,a=o.contentRect.height;if(n&&n.width===e&&n.height===a)continue;let s={width:o.contentRect.width,height:o.contentRect.height};i(s),r?.(s)}});return a.observe(e.current),()=>a.disconnect()},[e,r,n]),n}},436471:(e,r,n)=>{n(848318),n(865114)},907636:(e,r,n)=>{n.d(r,{C:()=>s});var a=n(848318),i=n(463117);let o=1/60*1e3;function s(e,r){let[n,s]=a.useState(0),l=a.useRef(-1);a.useEffect(()=>{r||s(0)},[r]),a.useEffect(()=>{let r;return 0===n?()=>{}:(function a(){if(!e||l.current<0)return;let i=new Date().getTime(),s=i-l.current;e.scrollTop+=s/o*n,l.current=i,r=requestAnimationFrame(a)}(),()=>{cancelAnimationFrame(r)})},[n,e]),(0,i.U3)("mousemove",a.useCallback(n=>{if(!r||!e)return;let a=e.scrollTop,{top:i,height:o}=e.getBoundingClientRect();if(o<=0)return;let c=n.clientY-i+a;c<a?(s((c-a)*.5),l.current=new Date().getTime()):c>a+o?(s((c-a-o)*.5),l.current=new Date().getTime()):(s(0),l.current=-1)},[r,e]))}},63122:(e,r,n)=>{n.d(r,{R:()=>i});var a=n(848318);function i(e,r,n){let i=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!i.current&&n(r)&&(e(),i.current=!0)},[e,n,r])}},967139:(e,r,n)=>{n.d(r,{ww:()=>i});var a=n(848318);function i(e,r){var n,i;return n="mousedown",i=[e.current],a.useEffect(()=>{function e(e){i.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,i]),e}},459633:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(848318);function i(){let e=a.useRef(null),r=function(e){let[r,n]=a.useState(!1);return a.useEffect(()=>{let r=()=>n(!0),a=()=>n(!1),i=e.current;if(i)return i.addEventListener("mouseover",r),i.addEventListener("mouseleave",a),()=>{i.removeEventListener("mouseover",r),i.removeEventListener("mouseleave",a)}},[e.current,n]),r}(e);return[a.useCallback(r=>{e.current=r},[]),r,e]}},865114:(e,r,n)=>{n.d(r,{$J:()=>a.$J,ZC:()=>a.ZC,qd:()=>a.qd});var a=n(452645)},971536:(e,r,n)=>{n.d(r,{M:()=>a.M});var a=n(433747)},865500:(e,r,n)=>{n.d(r,{x:()=>a});let a=(0,n(382902).eU)(!1)},434016:(e,r,n)=>{n.d(r,{R_:()=>C,w5:()=>w});var a=n(19180),i=n(879378),o=n.n(i),s=n(398612),l=n(637640),c=n(615233),d=n(849326),u=n(304756),p=n(867499),m=n(31898),_=n(353231),h=n(338104),g=n(422232),f=n(939794),E=n(559855),y=n(29188),b=n(656329),v=!1;let T=null,I=null,S=null,A=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function w(){return v}function C(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:i,idle_timeout_org_name:w,frame_context:C}=(0,c.Ay)();r&&n&&i&&w&&!v&&function(e,r,n,i,c,w){if((0,b.Q1)()||(0,b.Ji)()||b.Ay.isIpadNative)return;let C=`last-active-at-${e.email}`,N="idle_timeout_last_active_at_change",L=(0,s.GZ)(),O=L&&"embed"===c,R=L&&"integration"===c,P=.05*r,D=Math.min(60,r/2),k=new d.P,M=e=>{localStorage.setItem(C,e.toString()),k.sendToAllTabs(N)};M(n);let F=()=>{document.hasFocus()&&u.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:L.toString()&&!h.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&M(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!w&&w.getState().modalShown?.type===E.xn,U=()=>{if(w&&w?.getState().authedUsers.orderedIds.length===1&&((0,_.Pg)(),p.U2.clear()),O)l.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=l.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else h.z4.getIsExtension()&&(0,a.k)().dt_dev_mode_vscode_idle_timeout?(0,g.$g)():l.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);S&&A.forEach(e=>{document.removeEventListener(e,S)}),S=o()(F,1e3*P,{trailing:!1,leading:!0}),A.forEach(e=>{document.addEventListener(e,S)});let G=()=>{I&&clearTimeout(I),T&&clearTimeout(T),!x()||document.hasFocus()||y.eD||w?.dispatch(m.ES(E.eN));let n=parseInt(localStorage.getItem(C))+r-B();T=setTimeout(()=>{f.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?M(n):U()}).catch(e=>{U()})},1e3*n),O||(I=setTimeout(()=>{x()||w?.dispatch(m.to({type:E.eN,data:{orgName:i,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};k.register(N,()=>{G()}),G(),v=!0}(r,n,i,w,C?.type,e)}},932326:(e,r,n)=>{n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var a=n(402923),i=n(967688),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,i.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,i.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,i.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,a.Et)(e)&&e<43200}},615233:(e,r,n)=>{n.d(r,{AU:()=>M,Ay:()=>F,CZ:()=>R,DC:()=>b,Hk:()=>y,IX:()=>T,KI:()=>h,Lz:()=>x,O_:()=>S,Uv:()=>k,W4:()=>N,YG:()=>I,aW:()=>L,b5:()=>w,bg:()=>D,ck:()=>P,fO:()=>O,gq:()=>u,mm:()=>B,pT:()=>A,rd:()=>G,sL:()=>C,tl:()=>v,u3:()=>g,u4:()=>E,w0:()=>f});var a,i,o=n(113594),s=n(19180),l=n(781438),c=n(944239),d=n(287105);let u={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},p=(()=>{let e=JSON.parse(JSON.stringify(v().feature_flag_rules||{}));return e.hash_function=v().feature_flags_hash_function||"md5",e})(),m=(()=>{let e=JSON.parse(JSON.stringify(v().launchdarkly_client_flags||{}));return Object.freeze(e),e})(),{zoom_client_user_agent:_}=v();_&&function(e,r){if(e.navigator.userAgent!==r){let n={get:function(){return r}};try{Object.defineProperty(e.navigator,"userAgent",n)}catch(r){e.navigator=Object.create(navigator,{userAgent:n})}}}(window,_);let h=(0,c.D)(()=>p),g={};function f(){return m}function E(e,r,n){return(0,s.k)()[e]?r:n}(i||(i={})).withFeatureFlag=function(e,r){if((0,s.k)()[e])return r;let n=e=>null;return n.displayName="",n};let y=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}};function b(){return v().payment_flow_data}function v(){return window.INITIAL_OPTIONS||{}}function T(){return"local"===v().cluster_name}function I(){return"staging"===v().cluster_name}function S(){return"prod"===v().cluster_name}function A(){return(v().local_dev_on_cluster||!1)&&"staging.figma.com"===document.domain}function w(){return T()||I()||v().cluster_name?.startsWith("devenv")||"gov-staging"===v().cluster_name}a="campfire_model_enabled",Object.defineProperty(v(),a,{writable:!1,configurable:!1});let C=(0,c.n)(()=>{let e=v().cluster_name;return e?"gov"===e:"figma-gov.com"===window.location.hostname});function N(){return C()?"support-figgov@figma.com":"support@figma.com"}function L(e){return e.includes("figma-gov.com")}function O(){return C()?"static.figma-gov.com":"static.figma.com"}function R(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),`https://${O()}/${e}`}function P(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),R(`uploads/${e}`)}function D(){return v().consent_region}function k(){return function(e){switch(e){case"staging":return e;case"prod":return"production";case"gov":return"gov-prod";case"gov-staging":return"gov-staging";default:return"development"}}(v().cluster_name||"")}function M(){return v().editing_file?.editor_type??void 0}let F=v,x="https://fakepath.figma.com",U=!1;function B(){let e=[(0,l.$e)(),(0,l.bQ)()];for(let r=0;r<e.length;r++){let n=e[r];if(n){let e=(0,d.xL)(n);if(e.locale)return!function(e){let r=e.locale,n=!!e.persistLocale;if(!r||!n)return;let a=v().user_data;if(!a)return;let{id:i,locale:s}=a;o.Yv.includes(r)&&s!==r&&(U||(U=!0,fetch("/api/user",{method:"PUT",body:JSON.stringify({id:i,locale:r}),headers:{"Content-Type":"application/json"}})))}(e),(0,l.$W)(e.locale)}}let r=(0,l.Np)();if(r){let e=r.split("/")[1];if(e&&o.Yv.includes(e))return(0,l.$W)(e)}let{user_data:n}=v();if(n?.locale&&n?.locale!==o.MY)return[n?.locale,o.MY];if(!n){let e=document.documentElement.lang;if(e&&o.Yv.includes(e))return[e,o.MY]}return[o.MY]}function G(){return!!v().e2e_traffic}},839982:(e,r,n)=>{n.d(r,{fF:()=>c});var a=n(19180),i=n(615233),o=n(367590);let s=window.location.pathname;function l(e){return e.startsWith("/files/")}function c(){let e=(0,i.AU)();return!function({isAdmin:e,isDesign:r,isDesignPrototypeViewer:i,isDevMode:o,isEmbed:l,isEmbedKitV2Enabled:c,isFileBrowser:d,isFigjam:u,isSites:p,isSlides:m,isCooper:_,isIllustration:h,isUI3ForceDevOnly:g,isVSCodeExtension:f,isLoggedOutCommentUser:E,isFigmake:y,isLitmusStandalone:b}){if(g||b||E||d||e||m||p||_||h||y||f||l&&c||u||(r||o)&&!i&&!l)return!0;if(s.startsWith("/community")||s.startsWith("/proto")){let e=(0,a.k)().ui3p_community_prototype_ui3??!1;return function(e,r){Promise.resolve().then(n.bind(n,989232)).then(n=>n.trackEvent("ui3_version_decision",{isUI3:e,reason:r,pathname:s})).catch(()=>{})}(e,"community_or_proto"),e}return!0}({isAdmin:l(s)&&(s.includes("/admin/")||s.includes("/team-admin-console/")),isDesign:"design"===e,isDesignPrototypeViewer:s.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:i.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:!0===(0,a.k)().embedkit_v2,isFileBrowser:l(s),isFigjam:"whiteboard"===e,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isIllustration:!1,isFigmake:!1,isUI3ForceDevOnly:(0,o.Y)({trueOverrideUserFlag:d("force_ui3_dev_only_override_true"),falseOverrideUserFlag:d("force_ui3_dev_only_override_false"),canOverride:"prod"!==(0,i.Ay)().cluster_name,defaultValue:!1}),isVSCodeExtension:!1,isLoggedOutCommentUser:!1,isLitmusStandalone:s.startsWith("/litmus/")})?"ui2":"ui3"}function d(e){for(let r of i.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}},99496:(e,r,n)=>{n.d(r,{Cg:()=>E,Ug:()=>m,dZ:()=>h,rd:()=>f,v7:()=>y,xt:()=>b});var a=n(186606),i=n(7376);n(967688);var o=n(972487),s=n(353231),l=n(303397),c=n(476254),d=n(849326),u=n(304756);let p="keyboardLayoutPreference",m="keyboardLayoutPreference",_=new Map(Object.entries(a.aTn).map(([e,r])=>[e,r])),h=new Map(Object.entries(a.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=_.get(r);return r&&n?{layout:n}:{layout:a.aTn.UNKNOWN}}function f({layout:e}){if(!i.x4)return;let r=a.aTn[e];i.x4.setItem(p,r),new d.P().sendToOtherTabs(m,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:a.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),a.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:a.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!i.x4)return;i.x4.setItem(p,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&a.glU.reloadShortcuts(r)}function y(){return function(){if(i.x4){let e=i.x4.getItem(p);if(null!=e)return g(e)}if(!c.D)return{layout:a.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=_.get(e);if(!e||!r)return{layout:a.aTn.UNKNOWN};let n=e?r:a.aTn.UNKNOWN;return E(a.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(a.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},410725:(e,r,n)=>{n.d(r,{Rs:()=>v,ZA:()=>f,oS:()=>S,p:()=>T,rp:()=>b});var a=n(848318),i=n(19180),o=n(349048),s=n(317720),l=n(870567),c=n(614785);n(931862);var d=n(579291),u=n(349272),p=n(196008);n(989232);var m=n(865114),_=n(182317),h=n(662262);function g(){let e=a.useContext(h.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}function y(e){return Array.isArray(e)&&(1===e.length||2===e.length)&&(0,l.bu)(e[0])}function b(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],i=(y(e)?e[1]:e[2])??{},c=(0,o.zN)(n,l.lw),u=E(i),h=function(){let[e,r]=a.useState(0);return a.useCallback(()=>r(e=>e+1),[])}(),f=g(),v=i.traceId,T=function(e,r){let n=a.useRef((0,_.g)()),i=(0,m.ZC)(e),o=(0,m.ZC)(r);return void 0===i||void 0===o||i===e&&(0,l.lw)(r,o)||(n.current=(0,_.g)()),n.current}(r,c),I=a.useMemo(()=>f.client?.viewHasStaticQueries(r)?{...c,__requestId:T}:c,[c,T,r,f.client]),S=u&&I?f.mock?f.mock.useSubscription(r,I):f.client?.getViewResult(r,I)??p.F5:d.F4;return a.useEffect(()=>{if(!f.mock&&!1!==u&&I)return f.client?.subscribe(r,I,h,v)},[u,f.client,f.mock,r,v,I,h]),a.useMemo(()=>s.Qw.from(S),[S])}let v=(0,i.k)().use_subscription_v2?b:function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],i=(y(e)?e[1]:e[2])??{},o=E(i),[c,u]=a.useState(o&&n?p.F5:d.F4),m=g(),[_,h]=a.useState(n),f=i.traceId,b=c;return m.mock&&n&&(b=m.mock.useSubscription(r,n)),n&&!(0,l.lw)(n,_)&&(h(n),u(b=o?p.F5:d.F4)),a.useEffect(()=>{if(m.mock)return;if(!1===o){u(d.F4);return}if(!_)return;let e=m.client?.subscribe(r,_,e=>{u(e)},f);return()=>{e?.()}},[o,_,m.client,m.mock,r,f]),a.useMemo(()=>s.Qw.from(b),[b])};function T(e,r,n={}){let i=g(),o=E(n),[l,d]=a.useState({}),[u]=a.useState(()=>new c.A(i.client,()=>d({})));return a.useLayoutEffect(()=>{u.update(e,o?r:[])},[u,e,r,o]),a.useLayoutEffect(()=>()=>u.clear(),[u]),a.useMemo(()=>r.map(e=>({args:e,result:o?s.Qw.from(u.currentResult(e)):s.Qw.disabled()})),[u,r,o,l])}class I{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,_.g)(),this.errors=null,this._isLoading=!0,this.timer=new u.M({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function S(e,r,n){let i=a.useRef(null),o=!1!==n.enabled,s=n.subscriptionLogger,c=a.useRef(r),d=i.current;!i.current&&o&&(i.current=new I(r,e=>s.onEvent("stuck",p,e),s.stuckMs));let u=o?i.current.traceId:void 0,p=v(e,r,{enabled:o,traceId:u});if(null===d&&o&&s.onEvent("initiated",p,i.current),!(0,l.lw)(r,c.current)){let e=new I(r,e=>s.onEvent("stuck",p,e),s.stuckMs);i.current?.isLoading&&(i.current.finish(),s.onEvent("canceled",p,i.current,{nextTraceId:e.traceId})),i.current=e,s.onEvent("initiated",p,i.current),c.current=r}return a.useEffect(()=>{"loaded"===p.status?i.current?.isLoading&&(i.current.finish(),s.onEvent("loaded",p,i.current)):"errors"===p.status&&i.current?.isLoading&&(i.current.finish(),i.current.errors=p.errors,s.onEvent("error",p,i.current))},[p,p.errors,p.status,s]),a.useEffect(()=>()=>{i.current?.isLoading&&(i.current.finish(),s.onEvent("canceled",p,i.current))},[]),p}},511985:(e,r,n)=>{n.d(r,{Nc:()=>m,XJ:()=>d,ad:()=>c,f2:()=>p,h7:()=>l,zb:()=>u});var a=n(551155),i=n(403355),o=n(318147),s=n(748008);function l(e){return{id:e.key,key:e.key,libraryKey:e.library_key||(0,i.$)(e.key),name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,touchedAt:e.touched_at,lastPublishedAt:e.last_published_at??"",canView:!0,linkAccess:e.link_access,repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function c(e,r,n,a){return{userId:r,resourceType:o.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:""}}}}function d(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:o.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:s.tT.Loaded,data:e.fig_file.prototype_url}}}}}function u(e,r,n,a){return{userId:r,orgId:n??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:o.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function p(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:o.bk.FILE,file:l(e)}}function m(e,r,n,i){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:i??null,resourceType:o.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,fileExportSetting:null,isPluginAllowlisted:!1,canRead:!1,imgUrlTransformed:e.imgUrl,...a.fM}}}},329228:(e,r,n)=>{n.d(r,{DC:()=>T,En:()=>f,IT:()=>_,Jl:()=>S,QV:()=>v,gY:()=>I,mI:()=>y});var a=n(848318),i=n(382902),o=n(349048),s=n(317720),l=n(254938),c=n(870567);n(540698);var d=n(769237),u=n(6370),p=n(157949),m=n(529070);function _(e,r={}){return(0,m.uf)(e)?function(e,r){let n,o;let l=(0,d.k)(r)?e:h;[n,o]=(0,i.fp)(l),(0,d.k)(r)||(n=s.Qw.Paginated.disabled(),o=void 0);let c=a.useMemo(()=>(0,u.GC)(o),[o]);return a.useMemo(()=>[n,c],[n,c])}(e,r):(0,m.Kh)(e)?function(e,r){let n,o;let l=(0,d.k)(r)?e:h;[n,o]=(0,i.fp)(l),(0,d.k)(r)||(n=s.Qw.disabledSuspendable({release:()=>{}}),o=void 0);let c=a.useMemo(()=>(0,u.ff)(o),[o]);return a.useLayoutEffect(()=>{r.revalidateOnMount&&c.refetch()},[r.revalidateOnMount,c]),a.useMemo(()=>[n,c],[n,c])}(e,r):(0,c.bu)(e)?g((0,p.gc)(e.view)(e.args),r):g(e,r)}let h=(0,i.eU)([null,null]);function g(e,r){return(0,d.k)(r)?[(0,i.md)(e),void 0]:((0,i.md)(h),[s.Qw.disabledSuspendable({release:()=>{}}),void 0])}function f(e,r={}){let n=(0,d.k)(r),l=(0,o.wm)(()=>e,[e]),c=(0,a.useMemo)(()=>n?(0,i.eU)(e=>l.map(r=>e(r))):(0,i.eU)(()=>l.map(()=>s.Qw.disabled())),[l,n]);return(0,a.useEffect)(()=>{let e=i.zl.sub(c,()=>{});return()=>{requestAnimationFrame(e)}},[c]),(0,i.md)(c)}let E=0;setInterval(()=>{E=0},3e3);let y=function(...e){let r=e.filter(e=>"loading"===e.status).map(e=>e.suspense),n=e.filter(e=>"loading"!==e.status).map(e=>e.suspense);return r.length>0&&(E++,r.forEach(e=>e.retain()),(0,l.WE)(Promise.all(r.map(e=>e.getPromise())))),a.useEffect(()=>{n.forEach(e=>e.release())},[n]),[...e]},b={};function v(e,r,n){let i=n?.onResolveForMetrics,o=n?.metricKey,s="loading"!==e.status,c="loaded"===e.status;return"loading"===e.status&&"suspend"===r&&(o&&(n?.willSuspend(),b[o]=performance.now()),e.suspense.retain(),(0,l.WE)(e.suspense.getPromise())),a.useEffect(()=>{s&&e.suspense.release()},[s,e.suspense]),a.useEffect(()=>{if(c&&i&&o&&null!=b[o]){let e=performance.now()-b[o];delete b[o],i(e)}},[c,i,o]),e}function T(e,r){let n=a.useRef();a.useLayoutEffect(()=>{"loading"===n.current&&"loaded"===e.status&&r(e.data),n.current=e.status},[e,r])}function I(e,r){return function(e,r){let n=r?.enabled,a=(0,i.md)(e);if(!1!==n)return a}(e,r)?.mutate}function S(e){return r=>i.zl.set(e,[r])}},611057:(e,r,n)=>{n(317720)},791368:(e,r,n)=>{n.d(r,{QH:()=>d,h8:()=>l});var a=n(848318),i=n(382902),o=n(629050),s=n(540698);function l(e,r,n){let i=document.getElementById(e);if(!i)return(0,s.Lg)()||console.warn("Expected to find DOM element to snapshot:  "+e),()=>null;let o=i.cloneNode(!0);r?.(o);let l=()=>{i&&(i.style.display="none"),l=null},c=n;return function(){let e=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{e.current&&(e.current.appendChild(o),c?.(o),c=null),l?.()},[e]),a.createElement("div",{ref:e,className:[...o.classList.values()].join(" ")})}}class c{constructor(e){this.onStatusChange=e,this.deps={},this.add=(e,r)=>{if("pending"===r){let r=new Promise(e=>{setTimeout(()=>{e()},5e3)});this.deps[e]=r;return}if("resolved"===r){let r=Promise.resolve();this.deps[e]=r,this.onDependencyResolved(e,r);return}if("rejected"===r){let r=Promise.reject();this.deps[e]=r,this.onDependencyRejected(e,r);return}this.onStatusChange("pending"),r.then(n=>this.onDependencyResolved(e,r)).catch(n=>this.onDependencyRejected(e,r)),this.deps[e]=r},this.onDependencyResolved=(e,r)=>{this.deps[e]===r&&(delete this.deps[e],Object.keys(this.deps).length>0||this.onStatusChange("resolved"))},this.onDependencyRejected=(e,r)=>{this.deps[e]===r&&(delete this.deps[e],this.onStatusChange("rejected"))}}}function d(e,r){let n=(0,i.eU)("pending");n.debugLabel=`${r}:LoadingPageStatus`;let s=new c(r=>{e.set(n,r)});return{addDependency:s.add,useIsLoading:function(){return"pending"===(0,i.md)(n)},LoadablePage:function(e,r,l){let c=!1;function d(o){c||(c=!0,s.add("LoadablePage","resolved"));let d="pending"!==(0,i.md)(n);return a.useLayoutEffect(()=>{l?.()},[]),a.createElement(a.Fragment,null,d&&a.createElement(e,{...o}),!d&&a.createElement(r,null))}return d.displayName=(0,o.M)(e),d}}}},113326:(e,r,n)=>{n.d(r,{Q:()=>d,r:()=>c});var a=n(848318),i=n(536384),o=n.n(i),s=n(120846),l=n(231639);function c({setMaxWidth:e,render:r}){let[n,i]=a.useState(new Map),o=a.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);a.useLayoutEffect(()=>e(o),[o,e]);let s=a.useCallback((e,r)=>i(n=>{if(n.get(e)===r)return n;let a=new Map(n);return"number"==typeof r?a.set(e,r):a.delete(e),a}),[]);return a.createElement(a.Fragment,null,r({reportWidthOfValue:s}))}function d(e){return a.createElement(c,{setMaxWidth:e.setMaxWidth,render:({reportWidthOfValue:r})=>a.createElement(a.Fragment,null,e.options.map((n,i)=>a.createElement(u,{key:i,reportWidth:r,value:n,optionProps:{fullWidth:!0,formattedValue:e.formatOption(n),selected:!0,icon:e.getIcon(n)}})))})}function u({reportWidth:e,value:r,optionProps:n}){let i=a.useRef(null);return a.useLayoutEffect(()=>{let n=i.current;if(n){let a=()=>{e(r,n.getBoundingClientRect().width)};a();let i=new ResizeObserver(a);return i.observe(n),()=>{i.disconnect(),e(r,void 0)}}},[r,e,n.svg]),a.createElement("div",{className:l.D,"aria-hidden":!0},a.createElement(s.c$,{...n,additionalStylesClassName:o()(n.additionalStylesClassName,l.Z),forwardedRef:i}))}},611209:(e,r,n)=>{n.d(r,{$G:()=>m,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>h,S:()=>_,Y7:()=>E,ai:()=>c,f1:()=>p,kJ:()=>d,s$:()=>u});var a=n(879263),i=n(14787);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let a=Date.now()/1e3;a-n>e&&(n=a,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,i=/abort/i.test(r),o=/\/compiled_/.test(n);(0,a.Rh)("unhandled_error",{abort:i,fullscreen:o})});let c=l(30,()=>{(0,a.Rh)("context_lost")}),d=l(30,()=>{(0,a.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function p(){(0,a.Rh)("dirty_after_load")}function m(){(0,a.Rh)("consecutive_flushes")}function _(){(0,a.Rh)("consecutive_image_change_skips")}function h(){(0,a.Rh)("image_paste_error")}function g(){(0,a.Rh)("unsaved_changes_bell")}function f(e){(0,a.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,i.x)(e,!0,e.productType)}},271073:(e,r,n)=>{n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>p}),n(19180),n(7376);var a=n(656329),i=n(353231),o=n(303397),s=n(959750),l=n(226455),c=n(476254),d=n(849326),u=n(304756),p=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(p||{}),m=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(m||{});function _({navigationPreference:e,enabled:r,eventOrigin:n}){var a,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,i.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),a=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===a?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let h=[!0,1,"1","true"];function g(e){return h.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{_({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0,flags:["!figmake"]},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:a.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{_({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0,flags:["!figmake"]},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},527546:(e,r,n)=>{n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>i}),n(848318);var a=n(304756);let i=25,o="next",s="prev";function l(e,r,n,i=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(i===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,a.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:i===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},474337:(e,r,n)=>{n.d(r,{YD:()=>_}),n(848318),n(938982);var a=n(19180);n(989232);var i=n(548530);n(933454),n(898700),n(405531),n(192063),n(998568);var o=n(182317),s=n(755595);n(209595);var l=n(234472);(0,l.n)("RecentFiles"),(0,l.n)("SharedFiles"),(0,l.n)("SharedProjects"),(0,l.n)("Drafts"),(0,l.n)("OrgAllWorkspaces"),(0,l.n)("Workspace"),(0,l.n)("Team"),(0,l.n)("Folder"),(0,l.V)("Sidebar"),(0,l.V)("MainBodyContent"),(0,l.V)("FileCreateEntrypoint");let c="BEGIN_NAVIGATION",d=(0,i.O)(),u=new class e{constructor(){this.navigationMark=null,this.activeView=null,this.pendingMarks=[],this.markCounters={},this.paintedComponents=new Map([["RecentFiles",new Set([])],["SharedFiles",new Set],["SharedProjects",new Set],["OrgAllWorkspaces",new Set([])],["Workspace",new Set([])],["Team",new Set([])],["Drafts",new Set([])],["Folder",new Set([])]]),this.lastVisibilityChange="hidden"===window.visibilityState?performance.now():1/0,this.lastOnlineChanged=!1===navigator.onLine?performance.now():1/0}},p=s.z.object({isLoaded:s.z.boolean(),navigationId:s.z.string().nullable(),contextArgs:s.z.record(s.z.string(),s.z.unknown()).optional()});function m(e){let r=p.safeParse(e.detail);return r.success?r.data:(reportErrorToSentry(FigmaTeam.WAYFINDING,Error("Invalid detail for contentful paint tracker mark"),{extra:{mark:e}}),null)}function _(){(function({markName:e,isLoaded:r,contextArgs:n}){(0,a.k)().contentful_paint_performance_monitor&&performance.mark(e,{detail:{navigationId:e===c?(0,o.g)():null,isLoaded:r,contextArgs:n}})})({markName:c,isLoaded:!1})}},757685:(e,r,n)=>{function a(e,r){return+(e<r)-+(e>r)}function i(e){if(""===e||32==e.charCodeAt(e.length-1))return!1;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<32||n>126)return!1}return!0}n.d(r,{Ez:()=>a,PZ:()=>s,qO:()=>i});let o=Math.floor(Math.log10(95)+1);function s(e){let r=[];for(let n=0;n<e.length;n++){let a=(e.charCodeAt(n)-32)/95;r.push(a.toFixed(o).slice(2,2+o))}return parseFloat(`0.${r.join("")}`)}},586588:(e,r,n)=>{n.d(r,{_H:()=>a});function a(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},540882:(e,r,n)=>{n.d(r,{R:()=>o,X:()=>i});var a=n(720300);let i=(0,a.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(764),n.e(5215)]).then(n.bind(n,680409))).QuillEditor})}),o=(0,a.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(764),n.e(5215)]).then(n.bind(n,680409))).ReadOnlyQuillEditor})})},971843:(e,r,n)=>{n.d(r,{EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>u});var a=n(633890);let i=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,a.Xs)(),c=l,d=l.v2;function u(){(0,a.oI)()}window.realtimeClient=l,[].push(function(){o>0||i.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},633890:(e,r,n)=>{n.d(r,{EM:()=>h,Xs:()=>E,oI:()=>g});var a,i=n(19180),o=n(989232),s=n(615233),l=n(650120),c=n(540698);let d=!1,u=!1,p=[],m=[],_=0;function h(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function g(){u=!0}let f=-1;function E(){let e=null,r=null,n=null,a=null,p=null,_={},g=!0,E=Date.now(),y=0,b=null,v=!0,T=null,I=null,S=null;(0,i.k)().realtime_disconnect_in_background&&(I=()=>{"hidden"===document.visibilityState?S||(S=setTimeout(()=>{A(),S=null},12e4)):(S&&(clearTimeout(S),S=null),null==a&&(console.log("[Realtime] Attempting reconnect due to page visibility change."),w()))},document.addEventListener("visibilitychange",I));let A=()=>{null!=p&&clearInterval(p),null!=a&&a.close(),p=null,a=null,g=!0},w=()=>{b&&(clearTimeout(b),b=null),T&&(window.removeEventListener("online",T),T=null),R()},C=()=>{if(A(),!v||null!=b)return;let e=4+(Math.min(128,4*Math.pow(2,y))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),b=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),w()},1e3*e),y++,T=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&w()},window.addEventListener("online",T)},N=e=>{a&&a.readyState===a.OPEN&&a.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},L=e=>{let r=(0,s.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,o.trackEvent)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in _)){if(console.warn("We're not subscribed to the me channel"),(0,o.trackEvent)("Me Channel Subscription Missing"),r?.realtime_token){(0,o.trackEvent)("Me Channel Resubscribe");let e=h(r.realtime_token);_[n]=e,N(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,o.trackEvent)("Me Channel No Token");return}}if(!a||a.readyState!==a.OPEN){(0,c.nl)()||console.warn("Sending to me without open websocket"),(0,o.trackEvent)("Me Channel Websocket Missing");return}let i=JSON.stringify([{channel:n,data:e}]);a.send(`pme:${i}`)},O=e=>{delete _[e],a&&a.readyState===a.OPEN&&a.send(`uns:${e}`)},R=()=>{if(u||(0,i.k)().realtime_disconnect_in_background&&"hidden"===document.visibilityState&&d)return;A();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(a=new WebSocket(r)).onopen=e=>{for(let e in y=0,console.log(`[Realtime] Connected to ${r}.`),null!=p&&clearInterval(p),p=setInterval(()=>{a?.send("ping")},3e4+5e3*Math.random()-2500),d&&Date.now()-E>6e4&&m.forEach(e=>{setTimeout(e,0)}),d=!0,_)N(_[e])},a.onmessage=r=>{if("pong"===r.data){E=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=h(r.data.substr(4));_[e.channel]=e;return}let a={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);a={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete _[e[1]],"expired"===n){if(!g)return;g=!1,a={type:"token_expired"}}else{console.warn(r.data);return}}else{try{a=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=a.err&&(console.warn("encountered error message from realtime",a.err),C())}e&&e(a)},a.onclose=e=>{a=null,null!=p&&(clearInterval(p),p=null),C()}},P={},D=new Set,k=new Map,M={connect:R,disconnect:()=>{v=!1,A(),_={},I&&document.removeEventListener("visibilitychange",I)},setCallback:r=>{e=e=>{let n=e.method,a=Object.keys(e).filter(e=>l.C.has(e)).map(r=>({type:r,value:e[r]})),i=!1;r(e),a.forEach(r=>{let a=P[r.type];a&&Object.keys(a).map(e=>a[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let a=_[e.channel];_[e.channel]=e,a||N(e),!1!==n&&D.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&D.delete(e),!1===r&&D.has(e))return;let a=k.get(e);a&&a.size>0||(delete _[e],O(e),n&&n(e))},postToMeChannel:e=>{L(e)}},F=()=>{let e=(0,s.tl)().user_data;return e?.realtime_token?h(e.realtime_token):null},x=["post","put","delete"],U=e=>"string"==typeof e?{type:e,token:F(),methods:x}:e,B={subscriptions:_,subscribe:function(e,r){let n=U(e),a=n.token||F();if(!a)return()=>{};let i=(f+=1,`${f}:${performance.now()}`),o=P[n.type]||{},s=n.methods||x,l={};return s.forEach(e=>{l[e]=!0}),o[i]={methods:l,callback:r},P[n.type]=o,(k.get(a.channel)||new Set).add(i),M.subscribe(a,!1),()=>{let{channel:e}=a,r=k.get(e);r?.delete(i);let o=P[n.type];if(o&&(delete o[i],0===Object.keys(o).length)){let e=n.type;delete P[e]}M.unsubscribe(e,!1)}}};return{...M,v2:B}}a=function(){_>0||p.forEach(e=>{_+=1,setTimeout(()=>{try{e()}finally{_-=1}},6e4+24e4*Math.random())})},m.push(a)},464950:(e,r,n)=>{n.d(r,{F:()=>o});var a=n(891627),i=n(693220);function o(e,r=document.createElement("div")){let n=(0,i.H)(r);return(0,a.flushSync)(()=>{n.render(e)}),r.innerHTML}},395076:(e,r,n)=>{n.d(r,{iw:()=>l,ld:()=>s});var a=n(637640),i=n(615233);let o=class e{static initialize(){let r=i.Ay().user_data?.email;if(r&&(-1!==r.indexOf("@figma)")||-1!==r.indexOf("@test.figma"))){let r=new URLSearchParams(a.Ay.location.search).get("safeModeRenderLimitMs");r&&(e.getForcedRenderTimeMsValue=parseInt(r))}}getForcedRenderTimeMs(){return e.getForcedRenderTimeMsValue}};o.getForcedRenderTimeMsValue=null,o.initialize();let s=new o,l=new class{constructor(e){this.safeModeOptions=e}getForcedRenderTimeMs(){let e=this.safeModeOptions.getForcedRenderTimeMs();return null!=e?e:-1}}(s)},979890:(e,r,n)=>{n.d(r,{D8:()=>c,GG:()=>u,T9:()=>h,lt:()=>p,mv:()=>_,oj:()=>d,u2:()=>m});var a=n(848318),i=n(680184),o=n(863270),s=n(781239);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,dataOnboardingKey:a,...i}=this.props;return this.recordingKey()&&(this.props.onClick&&(i.onClick=this.onClick),this.props.onDoubleClick&&(i.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(i.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(i.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(i.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(i.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(i.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(i.onContextMenu=this.onContextClick),this.props.onKeyUp&&(i.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(i.onKeyDown=this.onKeyDown),this.props.onFocus&&(i.onFocus=this.onFocus),this.props.onBlur&&(i.onBlur=this.onBlur),this.props.onPointerDown&&(i.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(i.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(i.onPointerMove=this.onPointerMove)),n&&(i["data-testid"]=n),a&&(i["data-onboarding-key"]=a),this.node(i,r)}}class c extends l{node(e,r){return a.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return a.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return a.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class p extends l{node(e,r){return a.createElement("a",{...e,ref:r})}}p.displayName="RecordableA";class m extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto","data-onboarding-key":this.props.dataOnboardingKey})}}m.displayName="RecordableInput";class _ extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return a.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function h({children:e}){let r=(0,a.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,a.useMemo)(()=>{if(!e||!r.recordingKey)return e;let a=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>a(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return a.createElement(i.g5.Provider,{value:{useInteraction:r}},e)}function g(e){return e}_.displayName="RecordableTextarea"},295534:(e,r,n)=>{n.d(r,{We:()=>o,qV:()=>i});var a=n(936733);async function i(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let i=n[0],o=n[1],s=(0,a.D4)(i),l=(0,a.D4)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},93490:(e,r,n)=>{n.d(r,{b:()=>i});var a=n(693108);function i(e,r){let n=e[a.Ms[r]];return e[a.UC[r]]?void 0:n}},998568:(e,r,n)=>{n.d(r,{$D:()=>L,Bc:()=>I,Cp:()=>f,DZ:()=>b,NU:()=>o.NUh,Tm:()=>w,XM:()=>S,Zx:()=>g,it:()=>y,kF:()=>T,mR:()=>C,us:()=>O,uy:()=>N,wp:()=>P,xO:()=>R,xZ:()=>A,xg:()=>h,xn:()=>E,yO:()=>_});var a=n(858321),i=n(938982),o=n(186606),s=n(288996),l=n(325489),c=n(933454),d=n(615233),u=n(439023),p=n(944239),m=n(253183);let _=[/a\[b\]\.target\.className\.indexOf is not a function/,/\(event\.target\.className \|\| ""\)\.indexOf is not a function/,/XHR for ".*" failed with status/,/Endpoint requires authenticated user/],h=[/\bintercomcdn\.com\b/,/\bkaspersky-labs\.com\b/,/\bchrome-extension:\/\//,/\bmoz-extension:\/\//,/\bsafari-extension:\/\//],g=new a.b("sentry");function f(e){s.Cp(e)}function E(e){for(let r of e.exception?.values||[])for(let e of r.stacktrace?.frames||[])e.filename&&(e.filename=(0,u.Br)(e.filename));e.request?.url&&(e.request.url=(0,u.Br)(e.request.url)),"string"==typeof e.tags?.url&&(e.tags.url=(0,u.Br)(e.tags.url))}function y(e){let{category:r,data:n}=e;if("xhr"===r||"fetch"===r){let e=n?.url;if(e&&(e.match(/segment.io/)||e.startsWith("/api/figment-proxy")||e.startsWith(`${location.origin}/api/figment-proxy`)))return null;n&&e&&e.startsWith("data:")&&(n.url=`${e.substring(0,36)}... (truncated from ${e.length} characters)`)}return"navigation"===e.category&&(n?.from&&(n.from=(0,u.Br)(n.from)),n?.to&&(n.to=(0,u.Br)(n.to))),g.trigger("breadcrumb",e),e}var b=(e=>(e.Critical="critical",e.Major="major",e.Minor="minor",e.Trivial="trivial",e))(b||{});let v=(0,m.s)();function T(e,r){v.enabled&&(s.NA(e,r),c.L?.setGlobalContextProperty(e,r))}function I(e){v.enabled&&(s.Wt(e),c.L&&c.L.setGlobalContext({...e,...c.L.getGlobalContext()}))}function S(e,r){v.enabled&&s.o(e,r)}function A(e){T("file.key",e.key),null===e.fileRepoId?T("branching","not enabled"):(T("branching_repo",e.fileRepoId),null===e.sourceFileKey?T("branching","main branch"):T("branching","user branch"))}function w(e){e&&s.gV({id:e})}function C(e){e&&s.NA("org.id",e)}function N(e){e&&s.NA("server_release",e)}let L=(0,p.n)((e,r,n)=>{let a;if(!(r.reportedToSentry||r.cause?.reportedToSentry)&&!v.ignoreErrors)return r.reportedToSentry=!0,v.slogToConsole&&console.error(r,n),v.enabled&&(l.v4(function(o){if(e!==i.e.UNOWNED&&o.setTag("area",e),r.sentryTags)for(let e in r.sentryTags)o.setTag(e,r.sentryTags[e]);a=s.Cp(r,n)}),c.L&&c.L.addError(r,{captureContext:n,...e!==i.e.UNOWNED&&{area:e},...r.sentryTags})),a},"reportErrorToSentry");function O(e){v.slogToConsole&&console.error(e),v.enabled&&s.wd(e)}function R(e,r){null==r&&L(e,Error(`value is ${void 0===r?"undefined":"null"}`))}function P(){let e=(0,d.tl)().release_manifest_git_commit;v.enabled&&e&&(s.J0(),s.J5(),window.drainErrors&&window.drainErrors())}},88217:(e,r,n)=>{function a(e,r){let n=new Set,[a,i]=e.size<r.size?[e,r]:[r,e];for(let e of a)i.has(e)&&n.add(e);return n}function i(e,r){if(e.size!==r.size)return!1;for(let n of e)if(!r.has(n))return!1;return!0}function o(e,r,n){let a=new Map,[i,o]=e.size<r.size?[e,r]:[r,e];for(let[e,r]of i.entries()){let i=o.get(e);null!=i&&a.set(e,n(e,r,i))}return a}n.d(r,{iR:()=>a,wD:()=>o,yZ:()=>i})},750294:(e,r,n)=>{var a;n.d(r,{f:()=>a}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,a)=>"string"!=typeof e?r(e,a):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(a)?e.localeCompare(a,n):e.localeCompare(a),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let a=Date.parse(e),i=Date.parse(n);return a&&i?i-a:r(e,n)},e.byProperty=function(e,n=r){return(r,a)=>r[e]===a[e]?0:n(r[e],a[e])},e.byComparators=function(...e){return(r,n)=>{for(let a=0;a<e.length;a++){let i=(0,e[a])(r,n);if(0!==i)return i}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(a||(a={}))},116848:(e,r,n)=>{n.d(r,{$:()=>E,B4:()=>h,KI:()=>I,L3:()=>w,NB:()=>C,Vi:()=>_,jA:()=>A,oJ:()=>f,tu:()=>g,y7:()=>y});var a=n(848318),i=n(301168),o=n(186606),s=n(967688),l=n(952039),c=n(995218),d=n(334074),u=n(989232),p=n(140357);function m(e){let{observingSessionID:r,presenterSessionID:n}=e,a=e.allUsers.find(r=>r.sessionID===e.sessionID),i=n?e.allUsers.find(e=>e.sessionID===n):null,o=r?e.allUsers.find(e=>e.sessionID===r):null;return{isPrototypeViewer:"prototype"===e.deviceNameFilter,presentingUserId:i?.userID,presentingSessionId:i?.sessionID,observingUserId:o?.userID,observingSessionId:o?.sessionID,currentUserId:a?.userID,currentUserSessionId:a?.sessionID}}function _(){let e=(0,d.T)(),r=(0,c.HW)();return a.useCallback(()=>{e(d.N.START),r?p.hk()?.startPresenting():o.h3O.startPresenting()},[r,e])}function h(){let e=(0,c.HW)();return a.useCallback(()=>{e?p.hk()?.stopPresenting():o.h3O.stopPresenting()},[e])}function g(){let e=(0,c.HW)(),r=(0,i.wA)();return a.useCallback((n,a)=>{e?b(n,a,(0,p.hk)(),r):b(n,a,null,r)},[e,r])}function f(){let e=(0,c.HW)(),r=(0,i.wA)();return a.useCallback((n,a)=>{e?v(n,a,(0,p.hk)(),r):v(n,a,null,r)},[e,r])}function E(){let e=(0,c.HW)();return a.useCallback(r=>{e?S(r,(0,p.hk)()):S(r,null)},[e])}function y(){let e=(0,c.HW)();return a.useCallback(r=>{e?T(r,(0,p.hk)()):T(r,null)},[e])}function b(e,r,n,a){n?n.nominatePresenter(e):o.h3O.nominatePresenter(e);let i=r.allUsers.find(r=>r.sessionID===e);if(i?.name){let e=(0,s.t)("collaboration.spotlight.visual_bell.nominated_user_to_spotlight",{userName:i.name});a(l.F.enqueue({message:e,type:"nominated_presenter"}))}(0,u.trackEvent)("Spotlight Nomination Requested",{nominatedSessionID:e,nominatedUserID:i?.userID,...m(r)})}function v(e,r,n,a){n?n.cancelPresenterNomination(e):o.h3O.cancelPresenterNomination(e);let i=r.allUsers.find(r=>r.sessionID===e),c=(0,s.t)("collaboration.spotlight.visual_bell.stopped_nominating_user_to_spotlight");a(l.F.enqueue({message:c,type:"nominated_presenter"})),(0,u.trackEvent)("Spotlight Nomination Canceled",{cancelledNomineeSessionId:i?.sessionID,cancelledNomineeUserId:i?.userID,cancelledByNominee:e===r.sessionID,...m(r)})}function T(e,r){r?r.startPresenting():o.h3O.startPresenting();let n=e.sessionsNominatingCurrentUser[0],a=e.allUsers.find(e=>e.sessionID===n);(0,u.trackEvent)("Spotlight Nomination Accepted",{nominatorSessionId:a?.sessionID,nominatorUserId:a?.userID,...m(e)})}function I(e,r,n,a){let i=performance.now();e(),a&&(0,u.trackEvent)(n,{sessionId:r.sessionID,timeToActionSeconds:Math.trunc(i-a)/1e3,...m(r)})}function S(e,r){r?p.hk()?.setObservingSessionID(-1):o.h3O.observeUser(-1),(0,u.trackEvent)("Spotlight Stop Following",{...m(e)})}function A(e){return e.presenterSessionID===e.sessionID}function w(e){return -1!==e.observingSessionID}function C(e){return e.sessionsNominatingCurrentUser.length>0}},155637:(e,r,n)=>{n.d(r,{G:()=>a});var a=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(a||{})},982397:(e,r,n)=>{n.d(r,{A:()=>u});var a=n(848318),i=n(382902),o=n(978295),s=n(396872),l=n(716675);n(155637);var c=n(834561);let d=(0,i.eU)([]);function u({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:u={}}){let p=(0,i.md)(o.EA),m=(0,c.$z)({canUseCookieForAnalytics:p,geofence:u}),[_,h]=(0,a.useState)(l.An),g=(0,i.md)(d);return(0,a.useEffect)(()=>{h(e=>(e.tearDown(),m?new l.Ay:l.An))},[m]),(0,a.useEffect)(()=>{_.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,_]),(0,a.useLayoutEffect)(()=>{l.Ay.setScreenAreasToAvoid(g)},[g]),a.createElement(s.M.Provider,{value:_},e)}(0,i.eU)(null,(e,r,n)=>{let a=e(d);r(d,[...a,n])}),(0,i.eU)(null,(e,r,n)=>{let a=e(d),i=a.indexOf(n);-1!==i&&r(d,a.slice(0,i).concat(a.slice(i+1)))})},53837:(e,r,n)=>{n.d(r,{Wz:()=>a.Wz,x4:()=>a.x4});var a=n(7376)},461979:(e,r,n)=>{n.d(r,{$M:()=>y,DV:()=>h,EJ:()=>p,FS:()=>N,H9:()=>w,Qp:()=>L,Qt:()=>m,Rw:()=>C,VZ:()=>s,Vs:()=>A,YH:()=>d,Yx:()=>f,Zr:()=>i,_5:()=>l,fs:()=>I,gU:()=>S,hX:()=>c,lH:()=>u,sy:()=>v,td:()=>E,zS:()=>o});var a=n(235252);function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}function u(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let a=0;a<e.length;++a){let i=e.charCodeAt(a);if(!r(i)){n+=e.charAt(a);continue}if(!((1024&i)!=0)&&a+1<e.length){let i=e.charCodeAt(a+1);if(r(i)&&(1024&i)!=0){n+=e.charAt(a),n+=e.charAt(a+1),++a;continue}}n+="\uFFFD"}return n}(e)}function p(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function m(e){let r=[];for(let n=0;n<e.length;n++){let a=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=a.length-1,r.push(a)}return r}let _={numeric:!0,sensitivity:"base"};function h(e,r,n=_){let i=(0,a.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(i,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let g={};function f(e,r="conjunction"){let n=(0,a.Gq)().getPrimaryLocale(!1);return g[r]||(g[r]=new Intl.ListFormat(n,{type:r})),g[r].format(e)}function E(e,r,n){var a,i;return null==e&&(e=0),`${e} ${a=e,i=(i=n)||`${r}s`,1===a?r:i}`}function y(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}let b=RegExp(`[${[":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","=","%"].map(e=>"\\"+e).join("")}]`,"g");function v(e){let r=e;return encodeURIComponent(r=(r=r.replace(b,"-")).replace(/ /g,"-"))}let T=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"];function I(e){if(null==e)return;let r=function(e,r={stripLeadingHyphens:!0,stripTrailingHyphens:!0}){let n=e.toLowerCase();return n=(n=(n=(n=(n=n.normalize("NFD")).replace(/[\u0300-\u036f]/g,"")).replace(/[ .\-_\/\\:;|,&+=*]/g,"-")).replace(/[^a-z0-9\-]/g,"")).replace(/\-+/g,"-"),r.stripLeadingHyphens&&(n=n.replace(/^\-+/,"")),n=n.substring(0,100),r.stripTrailingHyphens&&(n=n.replace(/\-+$/,"")),n}(e);if(!T.includes(r))return v(r)}let S=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function A(e){for(var r=0,n=e.length>>>2,a=new Uint8Array(3*n),i=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];a[i++]=l<<2|c>>>4,d>=0&&(a[i++]=c<<4|d>>>2),u>=0&&(a[i++]=d<<6|u)}return i===a.length?a:a.subarray(0,i)}function w(e){for(var r="",n=e.length,a=0;a<n;a+=1024)r+=String.fromCharCode.apply(String,e.subarray(a,a+1024));return btoa(r)}function C(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function N(e){return e.replace(/\s+/g,"")}function L(e,r){return N(e)===N(r)}},987591:(e,r,n)=>{n.d(r,{GU:()=>l,SH:()=>o,cn:()=>i});var a=n(918777);function i(e){return e&&!!e.student_validated_at}function o(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?s(e,r):0)>0}}n(94831);let s=(e,r)=>Math.ceil((0,a.A)(e[r].createdAt).add(7,"days").diff((0,a.A)(),"days",!0));function l(e,r,n,a){let i=o(e,n);if(r||!a||!i.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let s=i.isInValidGracePeriod;return{showReminder:s,showAccessRestricted:!s}}},540698:(e,r,n)=>{n.d(r,{Lg:()=>a.Lg,Ns:()=>a.Ns,PN:()=>a.PN,QJ:()=>a.QJ,b_:()=>a.b_,lZ:()=>a.lZ,nl:()=>a.nl});var a=n(894161)},627503:(e,r,n)=>{function a(e){return i(24*e)}function i(e){return 300*Math.round(Date.now()/3e5)-3600*e}function o(e){return{seconds:Math.floor(e%60),minutes:Math.floor(e/60)}}function s(){return new Date("2024-10-10T15:00:00Z")}n.d(r,{G5:()=>a,S6:()=>i,_d:()=>o,n:()=>s})},183223:(e,r,n)=>{n.d(r,{Q:()=>o});var a=n(818995),i=n(304756);function o(e,r,n){return null==n&&(n="image/png"),i.Ay.post("/api/upnode/image",r,{rawBody:!0,params:{purpose:e,sha1:(0,a.Et)(r)},headers:{...i.Ay.requiredHeaders,"Content-Type":n}})}},274049:(e,r,n)=>{function a(e){return null==e?"":new URL(e).origin}function i(e){if(0!==e.indexOf("data:"))throw Error("Invalid data URL: `data:` prefix missing");let[r,n]=e.slice(5).split(",");if(!n)throw Error("Invalid data URL: data part missing");let a=!!r&&r.length>0,i=a&&r.endsWith(";base64"),o=i?r.slice(0,-7):a?r:void 0;return new Blob([i?function(e){let r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r.charCodeAt(e);return a}(n):decodeURIComponent(n)],{type:o})}n.d(r,{G_:()=>i,Jk:()=>a})},795234:(e,r,n)=>{n.d(r,{Rq:()=>E,YV:()=>f,_5:()=>T,q$:()=>y,td:()=>a,vh:()=>v});var a,i=n(19180),o=n(755595),s=n(979070),l=n.n(s),c=n(890446),d=n.n(c),u=n(507848),p=n.n(u),m=n(810503),_=n(304756),h=n(989232);class g{constructor(e,r,n,a=!1){this.featureFlagKey=n,this.enforce=a,this._input=null,this._output=null;let i="function"==typeof r?r(o.z):r;this.validator=new b(e,i,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:_.IF});if("string"==typeof this.featureFlagKey&&!(0,i.k)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,a=!1){let i="function"==typeof r?r(o.z):r;return new g(e,o.z.object({meta:i}),n,a)}function E(e,r,n,a=!1){let i="function"==typeof r?r(o.z):r;return new g(e,o.z.object({meta:i,pagination:o.z.object({nextPage:o.z.string().nullable(),prevPage:o.z.string().nullable()})}),n,a)}function y(e,r){return new b(e,o.z.object({meta:r}),"error")}class b{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:_.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:a,...i}=r;return{...i,data:{...e}}}throw(0,h.trackEvent)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,m.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function v(){return{_input:null,_output:null,validate:e=>e({xr:_.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,a)=>{let i=n.has(a)?a:p()(a),o=e[a];switch(void 0!==o&&(r[i]=o),typeof o){case"undefined":break;case"number":case"boolean":r[i]=o.toString();break;default:r[i]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>d()(e,(e,r)=>l()(r)))}})(a||(a={}));let T=v()},140357:(e,r,n)=>{n.d(r,{l9:()=>v,hk:()=>T,R4:()=>I,FL:()=>L,ur:()=>C,O5:()=>N});var a=n(848318),i=n(778122),o=n(197638),s=n.n(o),l=n(446470),c=n(810503),d=n(989232);class u{constructor(e,r){this._timeOfLastDisconnectMs=null,this._timeOfLastConnectionMs=null,this._timeOfFirstConnectionMs=null,this._definedConnectionAttemptEventName=e,this._definedDisconnectEventName=r}handleSocketDisconnect(e){if(null==this._timeOfLastConnectionMs)return;this._timeOfLastDisconnectMs=this.nowMs();let r=(this._timeOfLastDisconnectMs-this._timeOfLastConnectionMs)/1e3,n=this.nowMs()/1e3;d.definedAnalyticsHandler.trackDefinedEvent(this._definedDisconnectEventName,{connectionDurationSeconds:r,windowIsActive:e,sessionLengthSeconds:n})}handleSocketConnectionAttempt(e,r,n,a){if(!e&&r<3)return;let i=null==this._timeOfLastDisconnectMs?0:this._timeOfLastDisconnectMs,o=(this.nowMs()-i)/1e3;e&&(this._timeOfLastConnectionMs=this.nowMs(),null==this._timeOfFirstConnectionMs&&(this._timeOfFirstConnectionMs=this._timeOfLastConnectionMs));let s=this.nowMs()/1e3;d.definedAnalyticsHandler.trackDefinedEvent(this._definedConnectionAttemptEventName,{success:e,timeSinceDisconnectSeconds:o,numberOfConnectionAttempts:r,firstTimeConnecting:n,windowIsActive:a,sessionLengthSeconds:s})}nowMs(){return Math.round(performance.now())}}var p=n(227276),m=n(897342),_=n(38832),h=n(266144),g=n(589776),f=n(395076),E=n(540698),y=null,b=null;let v=new g.L;function T(){return y}function I(){return null}class S{bindContext(e,r){(0,m.Rx)(e,r,(0,i.iL)().WebGLEmscriptenObj)}getNewProgramId(){let e=(0,i.iL)().WebGLEmscriptenObj;return e.getNewId(e.programs)}}let A=class e{getDynamicConfigBoolean(r,n,a){return p.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getDynamicConfigNumber(r,n,a){return p.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return p.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return p.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}getExperimentNumber(r,n,a){return p.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return p.w$.getExperimentString(r,n,a,e.SourceLoggingString)}clearFeatureGatesForTesting(){p.w$.clear()}updateFeatureGateForTesting(e,r){p.w$.updateFeatureGateForTesting(e,r)}getFeatureGate(e){return p.w$.getFeatureGateFromInitialOptions(e)}setInRenderServerForViewerTests(){p.w$.setInRenderServerForViewerTests()}updateExperimentForTesting(e,r,n){p.w$.updateExperimentForTesting(e,r,n)}clearExperimentsForTesting(){p.w$.clear()}};async function w(){if(!Fig.createViewer)try{let e=Fig.tsViewerScriptURL;await (0,l.k0)(e)}catch(e){throw e}}function C(e,r,n,i){let[o,s]=a.useState(null),l=a.useRef({viewerMode:e,containerElement:r,loadTimeTracker:_.Su,statsigViewerWebConfig:new A,socketConnectionTracker:new u("prototype.multiplayer_socket_connection_attempt","prototype.multiplayer_socket_disconnect"),safeModeOptions:f.ld,emscriptenGL:new S,logError:(e,r,n,a,i)=>{switch(e){case"DEBUG":(0,c.ED)(r,n,a,i);break;case"INFO":(0,c.Lo)(r,n,a,i);break;case"WARN":(0,c.xi)(r,n,a,i);break;case"ERROR":(0,c.x1)(r,n,a,i)}},...n});a.useEffect(()=>{let e=l.current;(async function(){let{containerElement:r}=l.current;y&&!i?(JSON.stringify({...e,containerElement:null})===JSON.stringify(b)||(0,E.nl)()||console.warn("useViewer called with different options than the first call!"),r&&y.setNewContainerElement(r)):(b={...e,containerElement:null},await w(),y=await Fig.createViewer(e)),s(y)})()},[i]),a.useEffect(()=>{o&&r&&o.setNewContainerElement(r)},[o,r]);let d=r?.getBoundingClientRect();return a.useLayoutEffect(()=>{o?.forceFrame()},[o,d?.x,d?.y,d?.height,d?.width]),o}function N(e,r,n){a.useEffect(()=>(e?.on(r,n),()=>{e?.off(r,n)}),[e,r,n])}function L(e){let r=document.createElement("div");r.setAttribute("id","viewer_debug_stats"),document.body.appendChild(r),r.style.cssText=`
  font-size: 18px;
  position: fixed;
  left: 6px;
  top: 48px;
  background-color: black;
  color: white;
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  padding: 6px;
  `,setInterval(()=>{for(;r.firstChild;)r.removeChild(r.firstChild);let n=e.getStatsForDebugging();for(let e in n){let a=document.createElement("div");a.innerHTML=s().sanitize(`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${n[e]}
        </span>
      </div>
      `),r.appendChild(a)}let a=(0,h.rE)();for(let e in a){let n=document.createElement("div");n.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${a[e]}
        </span>
      </div>
      `,r.appendChild(n)}},1e3/30)}A.SourceLoggingString="viewer"},301627:(e,r,n)=>{n.d(r,{H:()=>u});var a=n(19180),i=n(167083),o=n(182317),s=n(989232),l=n(637640),c=n(615233),d=n(439023);function u(e){if(!(0,a.k)().web_vitals_report)return;let r=l.Ay.location.pathname+l.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),u=!!document.querySelector('meta[name="is_serving_resized_image"]');function p(a){let i={name:a.name,google_rating:a.rating,navigation:a.navigationType,id:a.id,value:a.value,initialPath:r,normalized_current_path:(0,d.qR)(l.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:u,statsig_client_bootstrap:!0,statsig_has_bootstrap_values:!!(0,c.tl)().statsig_bootstrap_values};(0,s.trackEvent)("Web Vital Metrics",i,{forwardToDatadog:!0,sendAsBeacon:!0})}function m(a,i){let c={name:i,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:a.timeStamp,initialPath:r,normalized_current_path:(0,d.qR)(l.Ay.location.pathname),id:(0,o.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:u};(0,s.trackEvent)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,i.fK)(p),(0,i.zB)(p),(0,i.IN)(p),(0,i.Ck)(p),(0,i.rH)(p,{reportAllChanges:!0}),document.addEventListener("DOMContentLoaded",e=>m(e,"DCL")),window.addEventListener("load",e=>m(e,"LOAD"))}},650395:(e,r,n)=>{n.d(r,{Ew:()=>w,IJ:()=>N,Vu:()=>E,WQ:()=>v,Zj:()=>A,ap:()=>b,dK:()=>T,wO:()=>y,x2:()=>C,xt:()=>f});var a=n(186606),i=n(19180),o=n(989232),s=n(637640),l=n(879263),c=n(656329),d=n(810503),u=n(227276),p=n(540698),m=n(897342),_=n(763543),h=n(944239),g=n(820780),f=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.NO_WEBGL=1]="NO_WEBGL",e[e.STENCIL_TEST_FAILURE=2]="STENCIL_TEST_FAILURE",e))(f||{});let E=(0,h.D)(()=>{if(w()!==a.w$P.WebGPU){if(c.Ay.safari||c.Ay.firefox||c.EC||(0,c.j9)()&&!(0,p.PN)())return!1;if(c.Ay.chrome){let e=(0,u.gP)("webgpu_platform_device_config").get("minimum_chromium_version",0);if(0>c.Ay.compareVersions([c.Ay.version.toString(),e.toString()])&&!(0,p.PN)())return!1}}return void 0!==navigator.gpu});function y(){if(!E())return!1;let e=w();return e!==a.w$P.WebGL2&&e!==a.w$P.WebGL1&&(!!A()||((0,c.cX)()?!!(0,i.k)().use_webgpu:(0,c.uF)()||(0,c.Zs)()?!!(0,i.k)().use_webgpu_windows_chromeos:!!((0,c.j9)()&&(0,p.PN)())&&(!!(0,i.k)().use_webgpu||!!(0,i.k)().use_webgpu_windows_chromeos)))}function b(){let e=I.getInstance().graphicsBackendOverride();return e===a.w$P.WebGL2||e!==a.w$P.WebGL1&&_.X.isWebGL2Supported()}function v(){return _.X.isWebGL2Supported()}function T(){return null==window.webGLTestResult&&(window.webGLTestResult=function(){var e=0;try{let r=function(){let e=document.createElement("canvas");try{return e.getContext("webgl")}catch(e){}return null}();r||(e=1),0!==e||r?.isContextLost()||function(e){let r=e.getExtension("WEBGL_debug_renderer_info"),n=r&&(e.getParameter(r.UNMASKED_RENDERER_WEBGL)+"").toLowerCase(),a={gpu_vendor:n?/\bamd\b|\bati\b/.test(n)?"amd":/\bnvidia\b/.test(n)?"nvidia":/\bintel\b/.test(n)?"intel":"unknown":"unknown",gpu_api:n?/direct3d9/.test(n)?"d3d9":/direct3d11/.test(n)?"d3d11":/opengl/.test(n)?"opengl":"unknown":"unknown"};(0,l.Rh)("page_load",a).catch(e=>console.error("Error trying to send tags",a,e))}(r)}catch(e){}return e}()),window.webGLTestResult}class I{constructor(){if(this._graphicsBackendOverride=a.w$P.None,(0,i.k)().webgl2_override)this._graphicsBackendOverride=a.w$P.WebGL2;else if((0,i.k)().webgl1_override)this._graphicsBackendOverride=a.w$P.WebGL1;else if((0,i.k)().webgpu_webgl_url_param&&s.Ay.location){let e=new URLSearchParams(s.Ay.location.search);"1"===e.get("force-webgpu")?this._graphicsBackendOverride=a.w$P.WebGPU:"1"===e.get("force-webgl2")?this._graphicsBackendOverride=a.w$P.WebGL2:"1"===e.get("force-webgl1")&&(this._graphicsBackendOverride=a.w$P.WebGL1)}}graphicsBackendOverride(){return this._graphicsBackendOverride}static getInstance(){return this._instance||(this._instance=new I),this._instance}static resetForTests(){this._instance=null}}class S{constructor(){this._isJSLUHDChromeOS=!1,this._isJSLUHDChromeOS=this.isJSLUHDChromeOS()}isJSLUHDChromeOS(){if(!(0,c.Zs)()||!E()||!(0,i.k)().use_webgpu_chromeos_jsl_override)return!1;let e=(0,m.zD)(b());if(!e)return!1;let r=e.getExtension("WEBGL_debug_renderer_info");if(!r)return!1;let n=e.getParameter(r.UNMASKED_RENDERER_WEBGL);return/uhd graphics \(jsl\)/i.test(n)&&/vulkan/i.test(n)}mustUseWebGPU(){return this._isJSLUHDChromeOS}static getInstance(){return this._instance||(this._instance=new S),this._instance}static reset(){this._instance=null}}let A=(0,h.D)(()=>{try{return S.getInstance().mustUseWebGPU()||I.getInstance().graphicsBackendOverride()===a.w$P.WebGPU}catch(e){return(0,d.x1)("Error checking if we must use WebGPU",e?.message??"Unknown error",{reportAsSentryError:!0}),!1}}),w=(0,h.D)(()=>I.getInstance().graphicsBackendOverride());function C(){let e=(0,m.j9)(b());return!!e?.getExtension("WEBGL_compressed_texture_astc")}function N(e){let r="webgl_not_supported",n="unknown",a="unknown",i="unknown";if(0===window.webGLTestResult){r=_.X.initializationStatus();let e=(0,g.l)();e&&(n=e.graphicsCardName,a=e.vendor,i=e.webGLVersion)}"webgpu_success"===e&&(r="webgpu_success"),o.definedAnalyticsHandler.trackDefinedEvent("rendering_and_animation.webgl_initialization",{status:r,renderer:n,vendor:a,version:i})}},927148:(e,r,n)=>{n.d(r,{kv:()=>o,zM:()=>a.zM});var a=n(909678),i=n(382902);function o(e){return!!(e&&e.isCodeFile&&!e.isSoftDeleted&&e.codeFilePath?.toString()!==".figma_internal")}(0,n(4881).Wh)(()=>(0,i.eU)(new Set))},412775:(e,r,n)=>{n.d(r,{fK:()=>c});var a=n(768618),i=n(382902),o=n(4881),s=n(927148);let l=(0,o.Wh)(()=>(0,i.eU)({}));function c(e){let r=function e(r,n,{depth:a=1/0}={}){let i=[];if(!r)return i;if(n(r)&&i.push(r),r.childrenNodes&&a>0)for(let o of r.childrenNodes)i.push(...e(o,n,{depth:a-1}));return i}((0,a.UN)().getInternalCanvas(),r=>(0,s.kv)(r)&&(!e||r.codeFileFullPathWithoutScheme?.startsWith("/"+e+"/"))),n={};for(let e of r)n[e.codeFileFullPathWithoutScheme]=e;return i.zl.set(l,n),n}},992595:(e,r,n)=>{n.d(r,{jm:()=>a}),n(848318),n(967688);let a={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages"}},647951:(e,r,n)=>{function a(e){let r=document.visibilityState;e?(delete document.visibilityState,delete document.hidden):Object.defineProperties(document,{visibilityState:{value:"hidden",configurable:!0},hidden:{value:!0,configurable:!0}}),r!==document.visibilityState&&(i=!1,document.dispatchEvent(new Event("visibilitychange",{bubbles:!0}))),i=!e}n.d(r,{R:()=>a});let i=!1;window.addEventListener("visibilitychange",function(e){i&&(e.stopPropagation(),e.stopImmediatePropagation())},{capture:!0,passive:!0})},82364:(e,r,n)=>{n.d(r,{g:()=>a});var a=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(a||{}),i=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(i||{})},102583:(e,r,n)=>{var a=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(a||{}),i=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(i||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},601745:(e,r,n)=>{n.d(r,{H:()=>i}),n(848318),n(301168);var a=n(186606);n(476254),n(67188),n(303397),n(7148),n(102583);let i=[a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE,a.NLJ.ERASER,a.NLJ.LASSO];a.NLJ.VECTOR_PENCIL,a.NLJ.HIGHLIGHTER,a.NLJ.WASHI_TAPE},566287:(e,r,n)=>{n.d(r,{VA:()=>s,ty:()=>o});var a=n(410441),i=n(27776);function o(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}function s(){return(0,a.hG)(i.kLt)+(0,a.hG)(i.M$q)}},685297:(e,r,n)=>{n.d(r,{y:()=>h}),n(559669);var a=n(848318),i=n(989232),o=n(173926),s=n(720522),l=n(967688);n(398612);var c=n(637640),d=n(287105),u=(e=>(e.SET_CANVAS_SPACE_CENTER="SET_CANVAS_SPACE_CENTER",e.SET_CURRENT_PAGE_ID="SET_CURRENT_PAGE_ID",e.ADJUST_ZOOM="ADJUST_ZOOM",e.SET_ZOOM="SET_ZOOM",e.RESET_ZOOM_TO_FIT_CANVAS_CONTENT="RESET_ZOOM_TO_FIT_CANVAS_CONTENT",e.SET_COMMENT_MODE="SET_COMMENT_MODE",e.SET_CURSOR_STYLE="SET_CURSOR_STYLE",e.SET_SCROLL_TO_PAN="SET_SCROLL_TO_PAN",e))(u||{}),p=n(566892),m=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e))(m||{});function _(e){let{access_type:r,accessed_via:n}=e,i=a.useMemo(()=>{let r={icon:p.A,message:function(e){switch(e){case"file":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_file");case"prototype":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_prototype")}}(e.type)},a={icon:p.A,message:n?(0,l.t)("proto.embeds.visible_to_org_name",{orgName:n.name}):(0,l.t)("proto.embeds.visible_to_everyone_in_your_org")};return{edit:null,view:null,org_edit:a,org_view:a,inherit:r,invite_only:r,workspace_edit:null,workspace_view:null}},[n,e.type]);if(!r)return null;let o=i[r];if(!o)return null;let{icon:c,message:d}=o;return a.createElement("div",{className:"embed_documentation_footer--documentationAccessLevel--a1Kwf"},a.createElement(s.B,{className:"embed_documentation_footer--documentationAccessLevelIcon--G-bLc",svg:c}),a.createElement("span",{className:"embed_documentation_footer--documentationAccessLevelReason--H-eVa ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},d))}function h(e){let r=`/${e.isPrototype?"proto":"file"}/${e.fileKey}${e.params.startsWith("?")?e.params:`?${e.params}`}`;return a.createElement("a",{className:"embed_documentation_footer--documentationFooter--cRlI0",target:"_blank",rel:"noopener",href:r,onClick:()=>{(0,i.trackEvent)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:e.fileKey,kind:e.isPrototype?"proto":"file",embed_host:(0,d.v6)(c.Ay.location.search).embed_host})}},a.createElement("div",{className:"embed_documentation_footer--documentationFooterRight--llo4e"},a.createElement(_,{...e,type:e.isPrototype?"prototype":"file"})),a.createElement("div",{className:"embed_documentation_footer--documentationFooterLeft--LSi6J"},a.createElement(s.B,{className:"embed_documentation_footer--documentationFooterIcon--KNE1D",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="17" viewBox="0 0 12 17"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M5.5 1.5h-2c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2h2zm-5 2c0 1.043.533 1.963 1.341 2.5C1.033 6.537.5 7.457.5 8.5c0 1.043.533 1.963 1.341 2.5C1.033 11.537.5 12.457.5 13.5c0 1.657 1.343 3 3 3 1.657 0 3-1.343 3-3v-2.764c.53.475 1.232.764 2 .764 1.657 0 3-1.343 3-3 0-1.043-.533-1.963-1.341-2.5.808-.537 1.341-1.457 1.341-2.5 0-1.657-1.343-3-3-3h-5c-1.657 0-3 1.343-3 3m1 5c0-1.105.895-2 2-2h2v4h-2c-1.105 0-2-.895-2-2m0 5c0-1.105.895-2 2-2h2v2c0 1.105-.895 2-2 2-1.105 0-2-.895-2-2m7-3c-1.105 0-2-.895-2-2 0-1.105.895-2 2-2 1.105 0 2 .895 2 2 0 1.105-.895 2-2 2m0-5h-2v-4h2c1.105 0 2 .895 2 2 0 1.105-.895 2-2 2"/></svg>'}),a.createElement("span",{className:"embed_documentation_footer--documentationFooterTitle--cJTEV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.fileName),e.touchedAt&&a.createElement("span",{className:"embed_documentation_footer--documentationFooterUpdatedAt--AroJM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,l.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(o.h1,{date:e.touchedAt})}))))}},136169:(e,r,n)=>{function a(e,r){return{id:e,...r}}n.d(r,{$T1:()=>T,BWk:()=>O,DFF:()=>v,GCV:()=>w,JUF:()=>H,KdZ:()=>S,Kze:()=>E,L6E:()=>x,LQ8:()=>G,MJs:()=>h,Nh9:()=>U,Njd:()=>_,OKV:()=>V,QKV:()=>z,QpH:()=>N,QzE:()=>B,SqV:()=>L,UDe:()=>s,Wd_:()=>i,aI5:()=>u,ar0:()=>c,b0J:()=>k,bIZ:()=>I,dvJ:()=>M,ePo:()=>C,hPP:()=>d,hib:()=>K,hoH:()=>D,j0N:()=>o,jkr:()=>R,koo:()=>F,kp0:()=>m,lLk:()=>p,s3e:()=>P,tBR:()=>b,tyv:()=>y,tzJ:()=>A,ueY:()=>j,wRI:()=>f,wRw:()=>W,y3_:()=>l,zoI:()=>g});let i=a("FigJamAdvancedDiagrammingOnboarding",{team:"figjam",queueOnBlock:!0}),o=a("NuxOnboardingOverlay",{team:"activation",queueOnBlock:!0}),s=a("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),l=a("MobileProtoDownloadModalPrompt",{team:"desktop"}),c=a("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),d=a("MultiplayerSpotlightNudgeNux",{team:"feedback"}),u=a("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),p=a("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),m=a("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),_=a("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),h=a("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),g=a("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),f=a("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),E=a("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),y=a("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),b=a("SearchWorkspaceOnboarding",{team:"scale"}),v=a("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),T=a("MobileReplyUpsellHint",{team:"desktop"}),I=a("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),S=a("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),A=a("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),w=a("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),C=a("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),N=a("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),L=a("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),O=a("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=a("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=a("AdminBillingOverviewSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_billing_overview_secondary_tab_onboarding_overlay",maxTimes:1}}),D=a("OrgAdminBillingGroupsSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_org_admin_billing_groups_secondary_tab_onboarding_overlay",maxTimes:1}}),k=a("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}}),M=a("DevModeOnboardingTooltipOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_onboarding_tooltip",maxTimes:1}}),F=a("DeveloperRFDUpsellOverlay",{team:"activation",queueOnBlock:!1,lifecycle:{userFlagName:"dev_mode_has_seen_rfd_upsell",maxTimes:10,cooldown:"MONTHLY"}}),x=a("DeveloperContextualUpsellExportOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_export_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),U=a("DeveloperContextualUpsellMeasureOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_measure_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),B=a("ConnectedProjectsAdminSettingsContentTabOverlay",{team:"workflow",lifecycle:{userFlagName:"seen_connected_projects_admin_settings_content_tab_overlay",maxTimes:1}}),G=a("ConnectedProjectsUsageOverlay",{team:"workflow"}),V=a("DtmDeprecationFileOverlay",{team:"workflow",lifecycle:{userFlagName:"seen_dtm_deprecation_file_overlay",maxTimes:1}}),H=a("ColorContrastOnboardingOverlay",{team:"developer_tools",lifecycle:{userFlagName:"has_seen_color_contrast_onboarding_overlay",maxTimes:1}}),z=a("CooperPublishTemplatesOverview",{team:"project_buzz",queueOnBlock:!0,lifecycle:{userFlagName:"seen_cooper_publish_templates_overview",maxTimes:1}}),K=a("TOSAgreementOverlay",{team:"activation",queueOnBlock:!0});a("StringManagementEntryOnboardingOverlay",{team:"growth_platform",lifecycle:{userFlagName:"seen_string_management_entry_onboarding_overlay",maxTimes:1}}),a("StringManagementIntroOnboardingOverlay",{team:"growth_platform",lifecycle:{userFlagName:"seen_string_management_intro_onboarding_overlay",maxTimes:1}}),a("StringManagementAddNewOnboardingOverlay",{team:"growth_platform",lifecycle:{userFlagName:"seen_string_management_add_new_onboarding_overlay",maxTimes:1}}),a("StringManagementFeatureOnboardingOverlay",{team:"growth_platform",lifecycle:{userFlagName:"seen_string_management_feature_onboarding_overlay",maxTimes:1}});let W=a("ViewerDevModeStatusChangedTooltipOverlay",{team:"activation",lifecycle:{userFlagName:"dev_mode_has_seen_viewer_dev_mode_status_changed_notif_overlay",maxTimes:1}}),j=a("BrowserNotificationsOnboardingOverlay",{team:"wayfinding",lifecycle:{localStorageName:"seen_browser_notifications_onboarding_overlay",maxTimes:2,cooldown:"WEEKLY"}})},204295:(e,r,n)=>{n.d(r,{dZ:()=>f,lt:()=>_,q8:()=>g,y8:()=>h});var a=n(301168),i=n(19180),o=n(382902),s=n(476254),l=n(227276),c=n(358491),d=n(180294),u=n(656320),p=n(361053),m=n(707520);let _=(0,n(944239).n)(({currentOrg:e,currentTeam:r,isViewer:n,isDisabledForViewers:a=!0})=>(!!e||!!r)&&(!!a&&!!n||!(e&&f(e))&&!!(e?e?.ai_features_disabled:r?.ai_features_disabled)));function h({isDisabledForViewers:e}){let r=s.D.getState();return!!(0,u.zg)(r.selectedView)||!r.user||_({currentOrg:o.zl.get(c.Z),currentTeam:o.zl.get(p.Me),isViewer:o.zl.get(m.hS),isDisabledForViewers:e})}function g(){let e=!_({currentOrg:(0,d.sZ)()||null,currentTeam:(0,p.ol)(),isViewer:(0,m.Td)()});return!!(0,a.d4)(e=>(0,u.zg)(e.selectedView)||!e.user)||!e}function f(e){var r;if(!e||e.k12_google_org)return!1;let n=(r=e.id,(0,l.gP)("ai_org_use_llama").get(r,void 0)),a="enabled_for_gated_users"===n&&!!(0,i.k)().ai_user_use_llama;return"enabled_for_all_users"===n||a}},706370:(e,r,n)=>{n.d(r,{u4:()=>o}),n(848318);var a=n(382902);n(870567),n(410725),n(204295),n(995218),n(180294),n(318147),n(55116),n(138528),n(748790);let i=(0,n(944239).n)(()=>a.zl.get(l));function o(){let e=i();return{loading:"loading"===e,isSlidesAiEnabled:"has_permission"===e}}var s=(e=>(e.LOADING="loading",e.HAS_PERMISSION="has_permission",e.NO_PERMISSION="no_permission",e))(s||{});let l=(0,a.eU)("loading")},14564:(e,r,n)=>{n.d(r,{WN:()=>p});var a=n(848318),i=n(301168),o=n(186606),s=n(989232),l=n(637640),c=n(103661),d=n(31898),u=n(844462);function p(){let e=(0,i.wA)();return(0,a.useCallback)(r=>{(0,s.trackEvent)("show_auth_for_logged_out_file",{actionType:function(e){switch(e){case o.rcl.SET_TOOL_DEFAULT:return"SET_TOOL_DEFAULT";case o.rcl.SET_TOOL_COMMENTS:return"SET_TOOL_COMMENTS";case o.rcl.FOLLOW_PRESENTER:return"CLICK_SIDEBAR_AVATAR";case o.rcl.ENTER_INSPECT_MODE:return"CLICK_SIDEBAR_PROPERTIES";case o.rcl.SET_TOOL_DEFAULT_DEV_HANDOFF:return"CLICK_TOGGLE_DEV_MODE";case o.rcl.PRESENT_AS_PROTOTYPE:return"CLICK_SIDEBAR_PROTOTYPE";case o.NLJ.COMMENTS:return"CLICK_TOOLBELT_COMMENTS";case o.NLJ.FRAME:return"CLICK_TOOLBELT_FRAME";case o.NLJ.SHAPE_RECTANGLE:return"CLICK_TOOLBELT_RECTANGLE";case o.NLJ.VECTOR_PEN:return"CLICK_TOOLBELT_PEN";case o.NLJ.TYPE:return"CLICK_TOOLBELT_TEXT";case"SELECT_COMMENT_SIDEBAR":return"SELECT_COMMENT_SIDEBAR";case"TOOLGROUP_CHEVRON":return"TOOLGROUP_CHEVRON";case"SHARE_BUTTON":return"SHARE_BUTTON";case"GOOGLE_SSO_BUTTON":return"GOOGLE_SSO_BUTTON";case"SIGN_UP_BUTTON_BANNER":return"SIGN_UP_BUTTON_BANNER";case"QUICK_ACTIONS_TOOL":return"QUICK_ACTIONS_TOOL";case"SIGN_UP_CTA_COMMENTS_PANEL":return"SIGN_UP_CTA_COMMENTS_PANEL";case"COMPONENT_INSERT":return"COMPONENT_INSERT";case"LEFT_PANEL_FILE_NAME_CHEVRON":return"LEFT_PANEL_FILE_NAME_CHEVRON";case"LEFT_PANEL_FIGMA_LOGO":return"LEFT_PANEL_FIGMA_LOGO";case"COMMENT_PIN_CLICK":return"COMMENT_PIN_CLICK";default:return"UNKNOWN_ACTION"}}(r)}),e(c.Ts({origin:"signed_out_edit",redirectUrl:l.Ay.location.pathname})),e((0,d.to)({type:u.x,data:{actionOrTool:r}}))},[e])}},890134:(e,r,n)=>{n.d(r,{bv:()=>E,IU:()=>f});var a=n(848318);n(301168);var i=n(410441),o=n(156974),s=n(209514),l=n(297638),c=n(967688);n(523669);var d=n(863270);n(486383),n(511067),n(637603),n(318147);var u=n(17753),p=n(335744);n(748660);var m=n(527041),_=n(701417);let h=(0,i.hG)(_.km),g=(0,i.hG)(_.hX);function f(e){return a.createElement(d.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}function E(e){let r=e.dropdownShown?.type===e.dropdownType,n=(0,c.t)("multi_select_list.filter_default"),i=null===e.selectedValue?n:e.getDisplayText(e.selectedValue),d=e.hideDefaultOption?e.values.length*h:(e.values.length+1)*h+g;return a.createElement(s.V,{dispatch:e.dispatch,type:e.dropdownType,showingDropdown:r},a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l.s.maxW200.ellipsis.overflowHidden.$},e.getSelectedDisplayText?a.createElement("span",{className:l.s.noWrap.$},e.getSelectedDisplayText(e.selectedValue)):a.createElement(a.Fragment,null,a.createElement("span",{className:l.s.noWrap.$},e.label,":")," ",a.createElement("span",{className:l.s.noWrap.$},i))),r&&a.createElement(o.gw,{stopScrollPropagation:!0,dispatch:e.dispatch,className:m.sI,style:e.dropdownShown.data.position},a.createElement(p.g1,{maxDropdownHeight:e=>Math.round(.5*e),dropdownChildrenHeight:d},!e.hideDefaultOption&&a.createElement(a.Fragment,null,a.createElement(o.rr,{checked:null===e.selectedValue,onClick:()=>e.updateFilter(null),trackingProperties:{filterType:e.dropdownType}},n),a.createElement(o.wv,null)),e.values.map(r=>a.createElement(o.ru,{key:e.getDisplayText(r),checked:e.selectedValue===r,onClick:()=>e.updateFilter(r),primaryText:e.getDisplayText(r),secondaryText:null===e.selectedValue&&e.getCount?e.getCount(r).toString():"",trackingProperties:{filterType:e.dropdownType,text:e.getDisplayText(r)}})))))}var y=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(y||{})},682524:(e,r,n)=>{n.d(r,{G:()=>s});var a=n(848318),i=n(967688),o=n(87463);function s(){return a.createElement(a.Fragment,null,a.createElement(o.E,{color:"handoff",fontWeight:"medium",fontSize:11},(0,i.tx)("checkout.dev_mode_included_text_formatted.dev_mode"))," ",a.createElement(o.E,{color:"secondary",fontSize:11},(0,i.tx)("checkout.dev_mode_included_text_formatted.included")))}},214014:(e,r,n)=>{n.d(r,{$$:()=>s,nR:()=>c,pz:()=>d,vd:()=>l});var a=n(848318),i=n(863270),o=n(190597);function s(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.xZ} ${r}`,type:"button",...n},e.children)}let l=(0,i.tf)(s);function c(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.HM} ${r}`,type:"button",...n},e.children)}function d(e){let{className:r,...n}=e;return a.createElement("button",{className:`${o.AJ} ${r}`,type:"button",...n},e.children)}(0,i.tf)(c)},550984:(e,r,n)=>{n.d(r,{GY:()=>l,N0:()=>o,We:()=>s,oz:()=>c,wI:()=>u,zq:()=>a});var a=(e=>(e[e.ROW=0]="ROW",e[e.TILE=1]="TILE",e[e.SEPARATOR=2]="SEPARATOR",e))(a||{}),i=(e=>(e.LIBRARY="library",e.PAGE="page",e.NAME_GROUP="name group",e.LOCAL_COMPONENTS="local components",e.LOCAL_TEMPLATES="local templates",e.COMPONENTS="library components",e.TEMPLATES="library templates",e.RESPONSIVE_SETS="library responsive sets",e))(i||{});function o(e){return 0===e.type&&"isSticky"in e&&e.isSticky}function s(e){return 0===e.type&&"isExpandable"in e&&e.isExpandable}function l(e){return 0===e.type&&"isButton"in e&&e.isButton}class c{constructor(e){this.allElements=[],this.isExpanded=e=>s(e)&&e.isExpanded,this.offsetTop=e}static getNextRenderedElementTop(e){if(!e||0===e.length)return 0;let r=e[e.length-1];return r.top+r.height}reset(){this.allElements=[]}getTotalHeight(){let e=0;for(let r of this.allElements)s(r)&&(e+=d(r));return c.getNextRenderedElementTop(this.allElements)+e}findExpandableElementWithKey(e){for(let r of function* e(r){for(let n of r)yield n,s(n)&&n.isExpanded&&(yield*e(n.children))}(this.allElements))if(s(r)&&r.key===e)return r;return null}getActualTop(e){let r=0;for(let n of this.allElements){if(n.key===e)return n.top+r;this.isExpanded(n)&&(r+=d(n))}return null}getRenderedElementsInView(e,r){let n=e-this.offsetTop,a=Math.ceil(r/2),i=Math.max(n-a,0),l=n+r+a,c=(e,r)=>!(e+r<i||e>l),u=(e,a)=>!(e+a<n||e>n+r),p=[],m={};for(let{element:e,actualTop:r}of function* e(r,n){for(let a of r){let r=n+a.top;if(yield{element:a,actualTop:r},s(a)&&a.isExpanded){let i=r+a.height;yield*e(a.children,i),n+=d(a)}}}(this.allElements,0))if(c(r,e.height)){m[e.key]=p.length;let n={...e,top:r};p.push(n)}let _=null,h=0;for(let e of p)if(n>0&&u(e.top,e.height)){0===e.type&&"isSticky"in e&&e.isSticky&&!(s(e)&&!e.isExpanded)?_=e:e.parent&&o(e.parent)&&(_={...e.parent,key:`${e.key}:parent`,isStaticRow:!0},p.push(_));break}return null!=_&&o(_)&&n>_.top&&(_.isFixed=!0,h=Math.max(n-_.top,0)),{elementsInView:p,stickyHeader:_&&_.isFixed?_:null,stickyHeaderOffset:h}}}let d=e=>{let r=0;if(e.isExpanded)for(let n of(r+=c.getNextRenderedElementTop(e.children),e.children))s(n)&&(r+=d(n));return r};function u(e){let r=e;for(;r&&!(s(r)&&["library","local components","local templates"].includes(r.rowType));)if(!(r=r.parent))return null;return r}},639239:(e,r,n)=>{n.d(r,{Q:()=>O});var a=n(848318),i=n(301168),o=n(382902),s=n(536384),l=n.n(s),c=n(857607),d=n(781239),u=n(561258),p=n(901558),m=n(397697),_=n(162394),h=n(97795),g=n(802348),f=n(730143),E=n(277454),y=n(689347),b=n(669465),v=n(940016),T=n(789253),I=n(329772),S=n(336004),A=n(410739),w=n(228061),C=n(693964),N=n(645801),L=n(545010);function O({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?a.createElement(R,{colIndex:r,rowIndex:n,isList:i,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):a.createElement(P,{enableKeyboardNavigation:e,isList:i,isTileSelected:o,renderedElement:s})}function R({colIndex:e,rowIndex:r,isList:n,isTileSelected:s,renderedElement:l,shouldRefocusAfterKeyboardInsert:v}){let N=a.useContext(b.U),L=(0,i.d4)(f.sS),O=(0,I.J)(l.item,l.sectionPosition,l.sectionNameForTracking),R=(0,A.n)(l.item),{isFlyoutOpen:D}=(0,T.JA)(),k=(0,g.u)({canSwap:!0,openFileKey:L??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),M=a.useCallback(()=>{D&&!R&&O()},[D,R,O]),F=a.useCallback(()=>{D||N?.onOpenFlyout(l.item,l.sectionPosition,l.sectionNameForTracking)},[D,N,l.item,l.sectionPosition,l.sectionNameForTracking]),{keyboardNavigationItem:x,setKeyboardNavigationElement:U}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,p.V)(l.item),onFocus:M}),B=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:i,sectionNameForTracking:s,sectionPosition:l,shouldRefocusAfterKeyboardInsert:d,rowIndex:u,colIndex:p,isList:g,sourceForTracking:f}){let{closeFlyout:b}=(0,T.JA)(),v=(0,o.md)(C.TG),I=(0,h.Ew)({assetKey:(0,y.u2)(i),assetLibraryKey:i.library_key,assetType:i.type,isList:g,sectionNameforTracking:s,sectionPosition:l,sourceForTracking:f??S.mZ,aiScore:i.ai_score??void 0,lexicalScore:i.lexical_score??void 0,isExample:(0,m.o)(i,v),partnerType:(0,_.X)(i.library_key)}),A=(0,w.ZV)(I);return a.useCallback(a=>{if((a.keyCode===c.Uz.ENTER||a.keyCode===c.Uz.SPACE)&&(0,E.dx)(i)){if(a.metaKey){r();return}if(e(a,i),A(a),d&&!(0===u&&0===p)){let e=g?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();b()}},[b,p,A,g,i,n,e,r,u,d])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:x,onComponentInsertSwap:k,onOpenFlyout:F,...l,shouldRefocusAfterKeyboardInsert:v}),G=a.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&(x?.focus(),F())},[F,x]),V=`componentScrollContainerTile.${e}.${r}`,H=d.rf(V,"click",G);return a.createElement(P,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:R,isTileSelected:s,onKeyDown:B,onClick:H,onSetKeyboardNavigationElement:U,renderedElement:l})}function P({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:i,onKeyDown:s,onClick:c,onSetKeyboardNavigationElement:d,renderedElement:u}){let p=(0,o.md)(v.T),m=i?.(u)??!1;a.useEffect(()=>{r?u.element=a.cloneElement(u.element,{}):u.element=a.cloneElement(u.element,{selected:m})},[r,m,u]);let _={top:u.top,left:u.left,height:r?u.height:void 0},h=l()(r?L.fJ:L.ND,{[N.QT]:!r,[L.r6]:r&&n,[L.HR]:r&&n&&p});return e||s||c?a.createElement("button",{key:u.key,style:_,className:h,onKeyDown:s,onClick:c,ref:d},u.element):a.createElement("div",{key:u.key,style:_,className:h},u.element)}},73194:(e,r,n)=>{n(848318),n(536384),n(206639),n(656329),n(297638),n(967688)},156974:(e,r,n)=>{n.d(r,{MM:()=>k,OR:()=>S,Ve:()=>I,Vq:()=>C,X3:()=>A,c$:()=>L,gS:()=>O,gw:()=>U,l4:()=>w,ms:()=>N,rr:()=>F,ru:()=>x,wv:()=>R});var a=n(848318),i=n(952647),o=n(536384),s=n.n(o),l=n(346126),c=n(857607),d=n(979309),u=n(238462),p=n(781239),m=n(540698),_=n(720522),h=n(499915),g=n(453370),f=n(142896),E=n(863270),y=n(67188),b=n(255309),v=n(954206),T=n(364616);function I(e){let[r,n]=a.useState(!1),i="label"in e,o="dropdownButton"in e;return a.createElement("div",{className:s()(b.gD,e.className,r&&b.FR,e.shouldRenderAutocompleteStyles&&b.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},i&&a.createElement("div",{className:s()(b.Ts,e.noBorder&&b.E7,e.noRightPadding&&b.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},a.createElement("div",{className:b.ep},!!e.iconLabel&&a.createElement("div",{className:b.Vi},e.iconLabel),a.createElement("p",null,e.label)),a.createElement(_.B,{className:b.tZ,svg:T.A})),o&&a.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&a.createElement(a.Fragment,null,a.createElement("div",{className:s()(b.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&b.Wh,e.optionsBelowSelector&&b.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},a.createElement(E.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},a.createElement(A,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),a.createElement(G,{closeDropdown:()=>n(!1)})))}function S(e){let[r,n]=a.useState(e.focusContainerOnMount?-1:0),i=a.useMemo(()=>a.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,a.useRef)(Array(i.length)),s=a.useRef(document.activeElement);(0,a.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=a.useCallback((e,r)=>{let a=o.current[e];a&&(a.tabIndex=-1,a.focus()),n(r)},[]),c=a.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),d=a.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:i,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===L||e.type===k)){let r=e.props;return!!(r.disabled||r.header)}return!1})(i[e])?u.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&d();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&d();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function A(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:i,onFocus:o}=S(e),{children:s,options:l,...c}=e;return a.createElement(N,{...c,onKeyDown:i,tabIndex:-1},a.Children.map(r,(e,r)=>a.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,i]=a.useState(null);return a.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),a=r.left,o=r.top;a<8?a=8:a+e.width>window.innerWidth-8&&(a=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),i([a,o])}},[e,r.left,r.top]),a.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let C=a.forwardRef(function({style:e,...r},n){let i=a.useRef(null),o=w(i,e);return a.createElement(U,{dropdownRef:(0,d.A)(i,n),style:o,...r})});class N extends p.o6{constructor(){super(...arguments),this.stopPropagationForPointerDown=e=>{(0,y.ft)()&&(0,y.dG)(e)},this.onClick=p.cZ(this,"click",e=>{if(!this.props.onClick)return p.aH;this.props.onClick(e)})}render(){return a.createElement("div",{ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],className:s()(b.Wm,this.props.className,{[b.DY]:this.props.positionAbsolute,[b._S]:this.props.positionFixed,[b.rU]:this.props.shouldRenderAutocompleteStyles,[f.s4]:this.props.preventZoom,[f.Dm]:this.props.preventEventCapture}),"data-cancel-insertable-resource-drag-and-drop":!0,"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],id:this.props.id,onClick:this.onClick,onContextMenu:y.wo,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onMouseDown:y.dG,onPointerDown:this.stopPropagationForPointerDown,onScroll:this.props.stopScrollPropagation?y.dG:this.props.onScroll,onTouchStart:y.dG,onWheel:this.props.preventZoom?void 0:y.dG,role:"menu",style:this.props.style,tabIndex:this.props.tabIndex??0},this.props.children)}}N.displayName="Dropdown";class L extends p.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=p.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=p.cZ(this,"click",e=>{this.props.href&&(0,c.oJ)(e)||(this.props.href?(0,l.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=s()(e?b.IZ:{[b.wY]:this.state.hover||this.props.simulateHover,[b.uK]:!0},this.props.className);return a.createElement("a",{ref:this.props.buttonRef,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0,"aria-disabled":this.props.disabled,className:r,"data-dropdown-tooltip":this.props.tooltip,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"data-onboarding-key":this.props.onboardingKey,"data-search-click-action":this.props["data-search-click-action"],"data-testid":this.props.recordingKey,href:this.props.href,id:this.props.id,onClick:e?void 0:this.onClick,onDragStart:this.onDragStart,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onMouseDown:this.props.onMouseDown,onPointerOut:e?void 0:this.onPointerOut,onPointerOver:e?void 0:this.onPointerOver,onPointerUp:e?void 0:this.onPointerUp,onTouchEnd:this.onTouchEnd,rel:"noopener",role:this.ariaRole(),tabIndex:-1,target:this.props.target},this.props.children)}}L.displayName="Option";let O=(0,E.tf)(L);class R extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=b.me;return this.props.className&&(e+=` ${this.props.className}`),a.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-separator"},a.createElement("div",{className:b.se}))}}R.displayName="Separator";class P extends a.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=b.jv;return this.props.className&&(e+=` ${this.props.className}`),a.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-indented-separator"},a.createElement("div",{className:b.se}))}}P.displayName="IndentedSeparator";var D=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(D||{});class k extends p.o6{render(){return a.createElement(L,{...this.props,className:s()(b.o6,"Checkbox"===this.props.displayType&&this.props.nested&&b.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?a.createElement(i.J,{mode:"dark"},a.createElement("span",{className:b.z6},a.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed}))):this.props.checked?a.createElement(_.B,{className:b.z6,svg:v.A,dataTestId:"dropdown-check-icon"}):a.createElement("span",{className:b.z6}),this.props.children)}}k.displayName="CheckableOption",k.defaultProps={displayType:"Checkmark"};class M extends p.o6{render(){return a.createElement(k,{...this.props},a.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&a.createElement("div",{className:b.pH},this.props.secondaryText))}}let F=(0,E.tf)(k),x=(0,E.tf)(M);class U extends p.o6{render(){return a.createElement(a.Fragment,null,a.createElement(N,{...this.props}),B(this.props)?a.createElement(G,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim",preventEventCapture:this.props.preventEventCapture}):a.createElement(G,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim",preventEventCapture:this.props.preventEventCapture}))}}U.displayName="DropdownWithScrim";let B=e=>!!e.closeDropdown;class G extends p.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{B(this.props)?this.props.closeDropdown():this.props.dispatch(g.oB())},this.onMouseDown=p.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=p.cZ(this,"mousemove",e=>{if((0,m.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return p.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=p.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return a.createElement("div",{className:s()(b.bv,this.props.preventEventCapture&&f.Dm),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:y.wo,"data-does-not-dismiss-modal":!0})}}},209514:(e,r,n)=>{n.d(r,{V:()=>d});var a=n(848318),i=n(720522),o=n(453370),s=n(17753),l=n(749493),c=n(364616);class d extends a.PureComponent{constructor(){super(...arguments),this.ref=a.createRef(),this.toggleDropdown=e=>{if(e.preventDefault(),e.stopPropagation(),this.props.showingDropdown)this.props.dispatch(o.oB());else{let e;let r=this.ref.current.getBoundingClientRect(),n=r.top>=window.innerHeight-200;e=this.props.isMultilevelDropdown?{targetRect:r}:{position:{top:n?"auto":r.top,bottom:n?36:"auto",left:this.props.isRightAligned?"auto":Math.min(r.left,window.innerWidth-180),right:this.props.isRightAligned?window.innerWidth-Math.max(r.right,180):"auto"}},this.props.dispatch(o.j7({type:this.props.type,data:e}))}}}render(){return a.createElement("div",{ref:this.ref,className:`${this.props.isDisabled?l.eh:l.Gb} ${this.props.className?this.props.className:""}`,onClick:this.props.isDisabled?void 0:this.toggleDropdown,"data-tooltip-type":this.props.tooltip?s.Ib.TEXT:void 0,"data-tooltip":this.props.tooltip?this.props.tooltip:void 0,"data-tooltip-show-above":!!this.props.tooltip||void 0,"data-testid":"dropdown-selector"},this.props.children,!this.props.isDisabled&&!this.props.hideChevron&&a.createElement(i.B,{className:`${l.ai} ${this.props.chevronClassName?this.props.chevronClassName:""}`,svg:c.A}))}}},912:(e,r,n)=>{n.d(r,{y:()=>v}),n(559669);var a=n(848318),i=n(534497),o=n(658029),s=n(571211),l=n(710070),c=n(804751),d=n(332174),u=n(989232),p=n(398612),m=n(464555),_=n(173926),h=n(297638),g=n(967688),f=n(87463);let E=["org_edit","org_view","inherit","invite_only"],y={org_edit:s.Y,org_view:s.Y,inherit:l.$,invite_only:l.$};function b({accessData:e,isPrototype:r}){let{access_type:n}=e;if(!E.includes(n))return null;let i="";if("org_edit"===n||"org_view"===n){let r=e.accessed_via;i=r?(0,g.t)("proto.embeds.visible_to_org_name",{orgName:r.name}):(0,g.t)("proto.embeds.visible_to_everyone_in_your_org")}else("inherit"===n||"invite_only"===n)&&(i=r?(0,g.t)("proto.embeds.visible_to_people_invited_to_this_prototype"):(0,g.t)("proto.embeds.visible_to_people_invited_to_this_file"));let o=y[n];return a.createElement(o,{className:"embed_documentation_footer--accessTypeIcon--215DQ","data-tooltip":i,"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250})}function v({accessData:e,fileKey:r,fileName:n,isPrototype:o,nodeName:s,repoName:l,params:d,touchedAt:p}){let E=a.useMemo(()=>{let e=new URL(`${window.location.origin}/${o?"proto":"file"}/${r}`);return e.search=d.startsWith("?")?d:`?${d}`,e.toString()},[r,o,d]),y=a.useRef(null);return a.createElement("div",{ref:y,className:h.s.colorBg.h24.px16.py12.flex.gap8.itemsCenter.justifyBetween.bt1.bSolid.colorBorder.zIndex1.$},a.createElement("div",{className:h.s.flex.gap8.itemsCenter.h24.wFull.overflowHidden.$},a.createElement(T,{fileKey:r,params:d,isPrototype:o}),a.createElement("div",{className:"embed_documentation_footer--footerLink--fS-Mp"},l&&a.createElement(c.L,null),a.createElement(i._,{newTab:!0,trusted:!0,className:h.s.cursorPointer.font11.lh16.fontInter.fontMedium.colorText.flex.itemsCenter.gap4.overflowHidden.$,href:E,onClick:()=>{(0,u.trackEvent)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:o?"proto":"file",embed_host:(0,m.Yw)()})}},a.createElement("span",{className:h.s.truncate.$},n),s&&a.createElement(a.Fragment,null,a.createElement("span",null,"\xb7"),a.createElement("span",{className:h.s.truncate.$},s))))),a.createElement("div",{className:h.s.flex.gap4.alignCenter.itemsCenter.cursorDefault.$},e&&a.createElement(b,{accessData:e,isPrototype:o}),null!=p&&a.createElement(f.E,{truncate:!0,fontSize:9,color:"secondary"},(0,g.tx)("proto.embeds.last_edited",{relativeTime:a.createElement(_.h1,{date:p})}))))}function T({params:e,fileKey:r,isPrototype:n,showTooltip:i}){let s=`${window.location.origin}/${n?"proto":"file"}/${r}${e.startsWith("?")?e:`?${e}`}`,l=i?{"data-tooltip":(0,g.t)("embed.footer.figma_logo_aria_label"),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250}:{};return a.createElement(o.K,{htmlAttributes:l,"aria-label":(0,g.t)("embed.footer.figma_logo_aria_label"),onClick:()=>{(0,p.FJ)(s,"_blank"),(0,u.trackEvent)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:n?"proto":"file",embed_host:(0,m.Yw)()})}},a.createElement(d.m,{className:h.s.flexShrink0.$}))}},752169:(e,r,n)=>{n.d(r,{l:()=>_});var a=n(848318),i=n(301168),o=n(773511),s=n(886911),l=n(668272),c=n(989232),d=n(398612),u=n(464555),p=n(297638),m=n(364619);function _({fileKey:e}){let r=(0,i.wA)(),n=d.R7.fullscreen,_=(0,i.d4)(e=>e.appWindow.inFullScreenMode);return n?a.createElement(o.E,{onClick:()=>{(0,c.trackEvent)("IFrame Mobile Viewer Toggle Fullscreen",{fileKey:e,source:"click",embed_host:(0,u.Yw)()}),r((0,m._M)())},className:p.s.absolute.bRadius5.colorBg.w24.h24.cursorDefault.flex.itemsCenter.justifyCenter.elevation100.$,style:{top:16,right:16}},_?a.createElement(s.p,null):a.createElement(l.O,null)):null}},264478:(e,r,n)=>{n.d(r,{$$:()=>C,CY:()=>eo,JU:()=>en,Kz:()=>ec,Lf:()=>et,M7:()=>U,NY:()=>q,N_:()=>ea,Ph:()=>ei,RW:()=>ed,Us:()=>es,VE:()=>el,Yo:()=>eu,cw:()=>x,e2:()=>A,il:()=>Q,ks:()=>Z,nR:()=>O,ny:()=>S,qM:()=>M,qZ:()=>k,rb:()=>j,s6:()=>D,tB:()=>er,tM:()=>R,vd:()=>N,vv:()=>L,wG:()=>J});var a=n(848318),i=n(907727),o=n(536384),s=n.n(o),l=n(346126),c=n(857607),d=n(178908),u=n(781239),p=n(439382),m=n(720522),_=n(401970),h=n(297638),g=n(863270),f=n(353231),E=n(17753),y=n(720861),b=n(190597),v=n(954206),T=n(663128);let I=null;function S(e){I=e}function A(e){return a.createElement("div",{className:s()(b.GC,e.reversed&&b.zi,e.className)},e.children)}class w extends u.uA{constructor(){super(...arguments),this.onKeyDown=e=>{I?.(e)||(this.props.onKeyDown?.(e),e.keyCode===c.Uz.ESCAPE&&e.target.blur())},this.onClick=u.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onPointerDown=u.Am(this,"pointerdown",e=>{this.props.onPointerDown?.(e)})}render(){let{forwardedRef:e,...r}=this.props;r.className=`${this.props.defaultClass} ${this.props.className||""}`;let n=this.props.dataTestId;return delete r.defaultClass,delete r.recordingKey,delete r.dataTestId,this.props.onClick&&this.props.recordingKey&&(r.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(r.onPointerDown=this.onPointerDown),a.createElement("button",{ref:e,onKeyDown:this.onKeyDown,...r,"data-testid":n},this.props.children)}}w.displayName="ButtonBase";let C=(0,a.forwardRef)(function({fullWidth:e,...r},n){return a.createElement(w,{forwardedRef:n,defaultClass:s()(b.xZ,e&&b.Ij),...r})}),N=(0,g.tf)(C);class L extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(w,{defaultClass:s()(b.fY,e&&b.Ij),...r})}}L.displayName="BigButtonPrimary",(0,g.tf)(L);class O extends a.Component{render(){return a.createElement(w,{defaultClass:b.HM,type:"button",...this.props})}}O.displayName="ButtonSecondary";let R=(0,g.tf)(O);class P extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(w,{defaultClass:s()(b.xJ,e&&b.Ij),type:"button",...r})}}P.displayName="BigButtonSecondary",(0,g.tf)(P);class D extends a.Component{render(){return a.createElement(w,{defaultClass:b.oC,type:"button",...this.props})}}D.displayName="ButtonSecondaryNegative";class k extends a.Component{render(){return a.createElement(w,{defaultClass:b.ky,type:"button",...this.props})}}k.displayName="ButtonNegative";let M=(0,g.tf)(k);class F extends a.Component{render(){return a.createElement(w,{defaultClass:b.OK,type:"button",...this.props})}}F.displayName="BigButtonNegative";class x extends a.Component{render(){return a.createElement(w,{defaultClass:b.I2,...this.props})}}x.displayName="ButtonWhite";let U=(0,g.tf)(x);class B extends a.Component{render(){return a.createElement(w,{defaultClass:b.rd,...this.props})}}B.displayName="ButtonInverse";class G extends a.Component{render(){let{fullWidth:e,...r}=this.props;return a.createElement(w,{defaultClass:s()(b.FO,e&&b.Ij),...r})}}G.displayName="BigButtonInverse",(0,g.tf)(G);class V extends a.Component{render(){return a.createElement(w,{defaultClass:b.OY,...this.props})}}V.displayName="ButtonGreen";class H extends a.Component{render(){let{customClassName:e,...r}=this.props;return a.createElement(w,{defaultClass:b.Iw,className:e,...r})}}H.displayName="ButtonGrey",(0,g.tf)(V);class z extends a.Component{render(){return a.createElement(w,{defaultClass:this.props.solidWhenDisabled?b.dy:b.sY,...this.props})}}z.displayName="BigButtonGreen";class K extends a.Component{render(){return a.createElement(w,{defaultClass:b.yT,...this.props})}}K.displayName="BigButtonBlack",(0,g.tf)(K);class W extends a.Component{render(){let e=`${b.xZ} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}W.displayName="ButtonLink";let j=(0,g.tf)(W);class Y extends a.Component{render(){let{fullWidth:e,...r}=this.props,n=s()(b.fY,this.props.fullWidth&&b.Ij),i=`${n} ${this.props.className||""}`;return r={...r,className:i,rel:"noopener"},a.createElement("a",{...r},this.props.children)}}Y.displayName="ButtonLink",(0,g.tf)(Y);class $ extends a.Component{render(){let e=`${b.HM} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}$.displayName="ButtonSecondaryLink";let q=(0,g.tf)($);class X extends a.Component{render(){let e=`${b.hz} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return a.createElement("a",{...r},this.props.children)}}X.displayName="BigButtonSecondaryLink";let J=118,Z=a.forwardRef(function({className:e,...r},n){return a.createElement(p.L,{className:s()(b._Z,e),...(0,d.d)(r),ref:n})});class Q extends a.Component{render(){let e=`${b.ki} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement(p.L,{...r})}}Q.displayName="BigTextInput";let ee=(0,g.h3)(p.L);class et extends a.Component{render(){return a.createElement("div",{className:this.props.className||(this.props.disabled?b.d1:b.ri)},a.createElement("label",{htmlFor:this.props.htmlName,className:s()(b.dQ,{[b.QC]:this.props.value,[b.z3]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&a.createElement(ee,{autoComplete:this.props.autoCompleteName,dataTestId:this.props.dataTestId,disabled:this.props.disabled,id:this.props.htmlName,maxLength:this.props.maxLength||50,name:this.props.htmlName,onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onKeyPress:this.props.onKeyPress,placeholder:this.props.placeholder||this.props.label,required:this.props.required,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?f._R.POPULATED_COMPLETE:f._R.NOT_POPULATED,type:this.props.type||"text",value:this.props.value}),!this.props.trackingFieldName&&a.createElement(p.L,{autoComplete:this.props.autoCompleteName,dataTestId:this.props.dataTestId,disabled:this.props.disabled,id:this.props.htmlName,maxLength:this.props.maxLength||50,name:this.props.htmlName,onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onKeyPress:this.props.onKeyPress,placeholder:this.props.placeholder||this.props.label,required:this.props.required,type:this.props.type||"text",value:this.props.value}),this.props.tooltip&&a.createElement(m.B,{className:b.G,svg:T.A,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class er extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===c.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${b.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${b.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:r,checked:n,...o}=this.props;return a.createElement("div",{className:b.HI},a.createElement("input",{...o,type:"checkbox",onFocus:this.onFocus,className:r||this.classNameForInput(),checked:n}),n?a.createElement("div",{className:b.Eg},a.createElement(_.U,{svg:e??v.A},a.createElement(i.l,null))):null)}}function en(e){let r=`${b.Pf} ${e.className||""}`;return a.createElement("label",{...e,className:r})}er.displayName="Checkbox";let ea=y.N,ei=(0,g.tf)(ea);class eo extends a.Component{render(){let{canFocus:e,trusted:r,className:n,...i}=this.props,o=`${b.MH} ${n||""}`,s={...i,className:o,rel:r?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.e)(this.props.href,e)}};return e&&(s={href:"#",tabIndex:0,...s}),a.createElement("a",{...s},this.props.children)}}eo.displayName="Link";let es=(0,g.tf)(eo);class el extends a.Component{render(){let e=`${b.X7} ${this.props.className||""}`,r={...this.props,className:e};return a.createElement("select",{...r})}}function ec(e){let r=e.multiple?8*e.multiple:e.value?e.value:0;return"x"===e.direction?a.createElement("div",{style:{width:r},className:h.s.flexShrink0.$,"aria-hidden":"true"}):a.createElement("div",{style:{height:r},className:h.s.flexShrink0.$,"aria-hidden":"true"})}el.displayName="BigSelect",ec.displayName="Spacing";let ed=(0,g.tf)(m.B),eu=(0,g.tf)(e=>a.createElement("a",{...e},e.children));(0,g.tf)(function(e){return a.createElement(w,{defaultClass:s()(b._d,e.className),...e})})},460081:(e,r,n)=>{n.d(r,{ny:()=>p});var a=n(989232),i=n(446470),o=n(615233);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:0x53d1c67aa1},bugReport:{id:0x53d1c6adf6},featureRequest:{id:0x53d1c6b4c1},account:{id:0x53d206c58a},dataPrivacy:{id:0x1623bff94217},community:{id:0x71090d38797},billing:{id:0x8d41e49e517},events:{id:0x11e3970aad17},reportAbuse:{id:0x1a704d1f0d97},other:{id:0x53d1c6e546}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,a.trackEvent)("zendesk_help_widget",r)}))}function p(e,r){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,i.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},136126:(e,r,n)=>{n.d(r,{S:()=>_,_:()=>h});var a=n(848318),i=n(658029),o=n(696483),s=n(536384),l=n.n(s),c=n(720522),d=n(967688),u=n(744577),p=n(660757),m=n(600086),_=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(_||{});function h({color:e,icon:r,fullWidth:n,rounded:s=!0,text:_,dataTestId:h,padding:g,onDismiss:f}){return a.createElement("div",{"data-testid":h,style:u.sx.if(!s,{borderRadius:"0px"}).if(void 0!==g,{padding:g+"px"}).$,className:l()({[p.ZI]:0===e,[p.z3]:1===e,[p.$e]:2===e,[p.hh]:3===e,[p.pj]:4===e,[p.Ij]:n})},r&&a.isValidElement(r)?a.createElement("div",{className:p.G},r):a.createElement(c.B,{autosize:!0,className:p.G,width:"16px",height:"12px",svg:r??m.A}),a.createElement("p",null,_),f&&a.createElement("div",{className:p.YE},a.createElement(i.K,{"aria-label":(0,d.t)("common.dismiss"),onClick:f},a.createElement(o.f,null))))}},536490:(e,r,n)=>{n.d(r,{T:()=>o});var a=n(848318),i=n(235252);let o=a.memo(function(e){let r=e.locale||(0,i.Gq)().getPrimaryLocale(!1),n=a.useMemo(()=>new Intl.ListFormat(r,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[r,e.formatStyle,e.formatType]),o=a.Children.toArray(e.children),s=n.formatToParts(o.map((e,r)=>`${r}`)).map((e,r)=>"element"===e.type?o[Number(e.value)]:"literal"===e.type?a.createElement("span",{key:`${r}_literal`},e.value):null);return a.createElement("span",{className:e.className||""},s)})},561258:(e,r,n)=>{n.d(r,{M3:()=>y,Nt:()=>I,bh:()=>v,c2:()=>T,dP:()=>E,lv:()=>A,yn:()=>S,z3:()=>b});var a=n(848318),i=n(430385),o=n(660376),s=n(871043),l=n(349048),c=n(621464),d=n(857607),u=n(238462),p=n(656329),m=n(979890);let _={preventScroll:!1,block:"nearest"},h={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class g{constructor({id:e,path:r,column:n,element:a,defaultFocusOptions:i=_,setIsFauxFocused:o,fauxClick:s,onFocusThroughKeyboardNavigation:l,keyboardItemNavigationOptions:c=h}){this.id=e,this.path=r,this.column=n,this.element=a,this.defaultFocusOptions=i,this.setIsFauxFocused=o,this.fauxClick=s,this.onFocusThroughKeyboardNavigation=l,this.navigationOptions=c}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:a,column:i}=r;try{n=P(e,a,!0)}catch(e){c.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=i??0,s=n.items[o]?.element;s&&s!==r.element&&c.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,a;let{path:o,column:l}=r;try{n=(a=P(e,o)).items[l||0]??null}catch(e){c.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){c.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){c.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(a.items[l||0]=void 0,a.items.every(s.uy)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[a,l]=(0,i.Vs)(n),c=R(e,a);if(R(e,n).children.every(s.uy))c.children[l]=void 0;else break}e.children.every(s.uy)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),this.onFocusThroughKeyboardNavigation?.(),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&O(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=O(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&L(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=L(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let f=a.createContext(null),E=a.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:i,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,useFocusOnly:p,useDisplayContents:_,stopPropagationOnEventHandle:h=!1,...g},E){let y=a.useRef({type:"parent",children:[]}),b=a.useRef(new Map),v=a.useRef(null),w=a.useCallback(e=>{v.current===e&&(v.current=null)},[]),C=a.useCallback(e=>{v.current=e},[]),N=a.useRef(null),L=a.useRef(null),O=a.useRef(u.lQ),R=a.useCallback(e=>{e===N.current&&(N.current=null,O.current(),O.current=u.lQ)},[]),P=a.useCallback((e,r)=>{N.current&&R(N.current),N.current=e,O.current=r},[R]),M=a.useCallback(e=>{h&&e.stopPropagation(),e.preventDefault()},[h]),F=a.useCallback(n=>{let a=v.current,d=N.current,u=k(n),m=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(T(n,r)){if(d&&!p){M(n);let e=D(y.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(a){M(n);let e=D(y.current,a,o);e?e?.focus():a.getItemAbove()?.focus()}}else if(I(n,r)){if(d&&!p){M(n);let e=D(y.current,d,i);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(a){M(n);let e=D(y.current,a,i);e?e?.focus():a.getItemBelow()?.focus()}else L.current&&L.current.fauxFocus()}else if(S(u,r,m)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!p){M(n);let e=D(y.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(a){M(n);let e=D(y.current,a,s);e?e?.focus():a.getItemToTheLeft()?.focus()}}else if(A(u,r,m)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!p){M(n);let e=D(y.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(a){M(n);let e=D(y.current,a,l);e?e?.focus():a.getItemToTheRight()?.focus()}}else"Enter"===u?d&&!p&&(M(n),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(a||d)&&(M(n),a&&a.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,p,o,i,s,l,M]),x=a.useMemo(()=>({tree:y.current,lookupMap:b.current,onFocusItem:C,onBlurItem:w,onFauxFocusItem:P,onFauxBlurItem:R,fauxBlurItem:()=>N.current?.fauxBlur(),blurItem:()=>v.current?.blur(),setDefaultFauxFocusedItem:e=>{L.current||(L.current=e)},fauxFocusDefaultItem:()=>{L.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[C,w,P,R,d]);return a.createElement(f.Provider,{value:x},a.createElement(m.D8,{style:_?{display:"contents"}:void 0,onKeyDown:n?e:F,forwardedRef:E,...g}))});function y({path:e,column:r=null,id:n,defaultFocusOptions:i,onFocus:o,onBlur:c,onFauxFocus:d,onFauxBlur:u,onFocusThroughKeyboardNavigation:p,fauxClick:m,disabled:_,navigationOptions:h}){let E=(0,l.zN)(e),y=(0,l.zN)(i),b=(0,l.zN)(h);if(0===E.length)throw Error("Path must be non-empty");if(E.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[v,T]=a.useState(void 0),[I,S]=a.useState(!1),[A,w]=a.useState(!1),C=a.useRef(null),{tree:N,lookupMap:L,onFocusItem:O,onBlurItem:R,onFauxFocusItem:P,onFauxBlurItem:D,setDefaultFauxFocusedItem:k,useKeyNavFauxFocusSync:M}=(0,s.sR)(a.useContext(f),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");a.useEffect(()=>{if(v&&!_){let e=()=>S(!0),r=()=>S(!1);return v.addEventListener("focus",e),v.addEventListener("blur",r),v===document.activeElement&&e(),()=>{v.removeEventListener("focus",e),v.removeEventListener("blur",r),v===document.activeElement&&r()}}},[_,v]);let F=a.useCallback(e=>{w(r=>(r&&(u?.(),D(e)),!1))},[u,D]),x=a.useCallback(e=>{w(r=>(r||(d?.(),P(e,()=>{null!==C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{F(e)},0)})),!0))},[F,d,P]),U=a.useCallback((e,r)=>{e?x(r):F(r)},[x,F]);a.useEffect(()=>()=>{null!==C.current&&clearTimeout(C.current)},[]);let B=a.useMemo(()=>null==v||_?null:new g({id:n,path:E,column:r,element:v,defaultFocusOptions:y,setIsFauxFocused:M?U:w,fauxClick:m,onFocusThroughKeyboardNavigation:p,keyboardItemNavigationOptions:b}),[v,_,n,E,r,y,M,U,m,p,b]);return a.useEffect(()=>{if(B)return B.addToTree(N,L),B.navigationOptions.fauxFocusByDefault&&k(B),()=>{B.removeFromTree(L),B.navigationOptions.fauxFocusByDefault&&k(null)}},[B,L,k,N]),a.useEffect(()=>{if(B&&I)return o?.(),O(B),()=>{c?.(),R(B)}},[B,I,o,c,O,R]),a.useEffect(()=>{if(!M&&B&&A)return d?.(),P(B,()=>{w(!1)}),()=>{u?.(),D(B)}},[B,A,d,u,P,D,M]),{setKeyboardNavigationElement:T,keyboardNavigationItem:B,isFocused:I,isFauxFocused:A}}function b(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.sR)(a.useContext(f),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.xb)(e)}},[r,n,e])}function v({preventScroll:e}={}){let{tree:r}=(0,s.sR)(a.useContext(f),"Must use `useFocusFirstItem` inside `<KeyboardNavigationProvider>");return a.useCallback(()=>{let n=function e(r){if("leaf"===r.type)return r.items.find(e=>null!=e)??null;for(let n of r.children)if(n){let r=e(n);if(r)return r}return null}(r);n?.focus({preventScroll:e})},[e,r])}function T(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=p.Ay.mac&&a;return"ArrowUp"===n||"KeyK"===n&&r&&w()||i&&"KeyP"===n}function I(e,r){let n=k(e),a=(0,d.vN)(e,d.xH.CONTROL),i=p.Ay.mac&&a;return"ArrowDown"===n||"KeyJ"===n&&r&&w()||i&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&C(n)||"KeyH"===e&&r&&w()}function A(e,r,n=!1){return"ArrowRight"===e&&C(n)||"KeyL"===e&&r&&w()}function w(){return!N(document.activeElement)}function C(e){let r=document.activeElement;return!N(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function N(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function L(e,{path:r,column:n},a){if(null==n)return;let o=P(e,r);return("left"===a?i.lq:i.M0)(o.items,n)||O(e,{path:r,column:"left"===a?1/0:-1},"left"===a?"up":"down")}function O(e,{path:r,column:n},a){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===a?i.lq:i.M0)(c.children,l);if(d){let e=("up"===a?function e(r){if("leaf"===r.type)return r;let n=(0,i.lq)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,i.M0)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,i.qg)(e.items,n||0)}}}function R(e,r,n=!1){for(let a of r){let r=e.children[a];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[a]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[a,o]=(0,i.Vs)(r),s=R(e,a,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var a,i;let o=n?.(r);return o&&(a=o.path,i=o.column,P(e,a).items[i??0])}catch(e){}}function k(e){return e.code??e.key}},882062:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(848318),i=n(457693);class o extends a.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return a.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?i.C:i.G;return a.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},135450:(e,r,n)=>{(0,n(848318).createContext)(!1)},844525:(e,r,n)=>{n.d(r,{n:()=>a.o});var a=n(511337);n(848318),n(536384),n(519932),n(222116)},511337:(e,r,n)=>{n.d(r,{o:()=>a});var a,i=n(60074);(e=>{e.set=(0,i.NC)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,i.NC)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(a||(a={}))},48908:(e,r,n)=>{n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var a=n(848318),i=n(333571),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return i._J;case"light_shimmer":return i.QH;case"shimmer_on_menu":return i.Sw;case"no_shimmer":return}};function l(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?i.ky:i.KQ} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}function c(e){return a.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${i.GE} ${e.primary?i.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},a.createElement("div",{className:s(e.animationType)}))}},851861:(e,r,n)=>{n.d(r,{x:()=>c});var a=n(848318),i=n(536384),o=n.n(i);n(540698);var s=n(297638),l=n(538562);function c({loaded:e,loadingSkeletonElement:r,showElementBeforeLoaded:n,children:i}){let c=a.useRef(e);return a.createElement("div",{className:s.s.grid.$},(e||n)&&a.createElement("div",{className:o()(s.s.gridRowEnd1.gridColumnEnd1.$)},i),a.createElement("div",{className:o()(s.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[l.X]:e,[s.s.opacity1.$]:!c.current})},r))}},345964:(e,r,n)=>{n.d(r,{a_:()=>h,dW:()=>_,kt:()=>u,nt:()=>m,qc:()=>p});var a=n(848318),i=n(536384),o=n.n(i),s=n(720522),l=n(498055),c=n(976727),d=n(62299);class u extends a.Component{render(){let e=l.PG,r=l.q5;switch(this.props.size){case"small":e=l.PG,r=l.q5;break;case"medium":e=l.$g,r=l.Mn;break;case"large":e=l.Pu,r=l.OZ;break;case"custom":e=null,r=null}return a.createElement("span",{className:o()(l.zr,e,this.props.shouldMatchTextColor?l.K_:l.h,this.props.className||""),"data-testid":this.props.testId},this.props.cssBacked?a.createElement("span",{className:o()(l.WL,r)}):this.props.imageBacked?a.createElement("img",{alt:"Loading",className:l.yM,src:"data:image/svg+xml;base64,"+btoa(c.A)}):a.createElement(s.B,{svg:this.props.altIcon||c.A,className:l.yM,autosize:!this.props.altIcon,dataTestId:"loading-spinner"}))}}function p(e){return a.createElement("div",{className:l.F},a.createElement(u,{...e}))}function m(){return a.createElement("div",{className:l.F},a.createElement(u,{size:"large"}))}function _(e){return a.createElement(u,{imageBacked:!0,...e})}u.displayName="LoadingSpinner";class h extends a.PureComponent{render(){return a.createElement("span",{className:`${l.uz} ${this.props.className||""}`},a.createElement(s.B,{svg:d.A,className:l.yM}))}}h.displayName="BlueLoadingSpinner"},217172:(e,r,n)=>{n.d(r,{R:()=>b});var a=n(848318),i=n(531788),o=n(536384),s=n.n(o),l=n(989232),c=n(383886),d=n(615233),u=n(656329),p=n(850426),m=n(967688),_=n(957872),h=n(863270);let g="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",y="mobile_download_prompt_dismissed";function b(e){let{isCompact:r}=e,n=u.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",o=(0,c.UG)(),g=!r&&!!e.renderBlockingPrompt,[b,I]=a.useState(!g),[S,A]=a.useState(!g);a.useEffect(()=>{null===o.get(y)&&(I(!1),A(!1))},[o,g]);let w=()=>{g||(I(!0),(0,l.trackEvent)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{A(!0)},300),o.set(y,!0))};return null!==o.get(y)?null:a.createElement(h.fu,{name:"Mobile Download Prompt"},a.createElement("div",{className:s()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":b,"mobile_download_prompt--overlayAnimateEnd--dBvI0":S}),style:{transitionDuration:"300ms"},onClick:w},a.createElement("div",{className:s()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":b,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":g}),onClick:e=>{e.stopPropagation()}},a.createElement("div",{className:s()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":g})},r?a.createElement(T,null):a.createElement(v,{renderBlockingPrompt:g??!1})),a.createElement("hr",{className:s()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":g})}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-"},a.createElement("img",{className:E,src:(0,d.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,m.t)("file_browser.mobile_prompt.app_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.app_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},g?(0,m.tx)("file_browser.mobile_prompt.app_description_new"):(0,m.tx)("file_browser.mobile_prompt.app_description"))),a.createElement(p.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:n,trackingDescriptor:_.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:n},(0,m.tx)("file_browser.mobile_prompt.app_action")),!g&&a.createElement(a.Fragment,null,a.createElement("img",{className:E,src:(0,d.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,m.t)("file_browser.mobile_prompt.browser_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.browser_title"))),a.createElement(i.Pw,{onClick:w,variant:"secondary"},(0,m.tx)("file_browser.mobile_prompt.browser_action")))))))}function v(e){return a.createElement(a.Fragment,null,a.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,d.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,m.t)("file_browser.mobile_prompt.image_alt")}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},a.createElement("h2",{className:g},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_body"))))}function T(){return a.createElement(a.Fragment,null,a.createElement("h2",{className:g},(0,m.tx)("file_browser.mobile_prompt.modal_title_compact")))}},847240:(e,r,n)=>{n.d(r,{Cp:()=>F,IW:()=>M,Lp:()=>B,Qv:()=>x,jq:()=>G,ne:()=>k,o_:()=>V,xD:()=>U,y2:()=>H});var a=n(848318),i=n(658029),o=n(162186),s=n(877770),l=n(696483),c=n(124810),d=n(19180),u=n(536384),p=n.n(u),m=n(989232),_=n(63163),h=n(865114),g=n(971536),f=n(615233),E=n(857607),y=n(781239),b=n(439382),v=n(720522),T=n(297638),I=n(967688),S=n(744577),A=n(523669),w=n(696786),C=n(146859),N=n(17753),L=n(698429),O=n(956371),R=n(415132),P=n(187124),D=n(720598);function k(e,r){let n=a.useCallback(e=>{setTimeout(()=>{v.current&&(v.current.focus(),e&&v.current.select())},0)},[]),i=a.useCallback(()=>{v.current&&v.current.blur()},[]),o=a.useCallback(()=>{v.current&&v.current.select()},[]);a.useImperativeHandle(r,()=>({focus:n,blur:i,select:o,searchInput:v.current}));let[s,l]=a.useState(!1),[c,d]=a.useState(!1),[u,p]=a.useState(void 0),{onFocus:m,onClick:g}=e,f=a.useCallback(()=>{m&&m(),d(!0)},[m]),b=a.useRef(!1),v=a.useRef(null),T=a.useCallback(e=>{b.current=document.activeElement!==e.target},[]),I=a.useCallback(()=>{b.current&&(v.current?.select(),f())},[f]),S=a.useCallback(()=>{e.onBlur&&e.onBlur(),d(!1)},[e]),A=y.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),w=y.v_(e.recordingKey,"keydown",r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===E.Uz.ESCAPE){v.current?.blur();return}(0,C.jr)(r,C.W0.NO)}}),N=a.useCallback((e=!1)=>{e&&l(!0),n(),g&&g()},[n,g]),L=y.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),O=y.v_(e.recordingKey+".clear","keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,h.ZC)(e.isFocused);return a.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&i():n()},[i,n,R,e.isFocused]),(0,_.h)(()=>{e.focusOnMount&&v.current&&(v.current.focus(),f()),e.selectTextOnMount&&v.current&&v.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:u,setPlaceholderWidth:p,searchInputRef:v,onMouseDown:T,onMouseUp:I,onSearchClick:N,onClearSearchClick:L,onClearSearchKeyDown:O,onFocus:m,onBlur:S,onClick:g,onSearchKeyDown:w,onSearchChange:A}}let M=a.forwardRef((e,r)=>{let n=(0,w.GS)(),{searchInputRef:i,onMouseDown:o,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:_}=k(e,r),h=(0,L.ks)(),g=h?O.vq:O.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},e.withUI3Icon?a.createElement(s.h,{className:e.iconClassName}):a.createElement(v.B,{className:e.iconClassName??O.qc,svg:R.A}),a.createElement(b.L,{ref:i,className:O.mn,dataTestId:"search-bar-input",disabled:e.disabled,maxInputLength:e.maxInputLength,onBlur:u,onChange:_,onClick:p,onFocus:d,onKeyDown:m,onMouseDown:o,onMouseUp:l,placeholder:e.placeholder||(0,I.t)("general.search"),spellCheck:!1,style:S.sx.if(e.hasTransparentBackground,S.sx.add({background:"transparent"})).if(h||e.smallFont,S.sx.if(n,S.sx.textBodyMedium,S.sx.font11.$)).$,value:e.query}),a.createElement(z,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c,customClearSearchIcon:e.customClearSearchIcon,customContainerClassName:e.customClearSearchContainerClassName}))});a.forwardRef((e,r)=>{let n=(0,w.GS)(),{searchInputRef:i,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:p,onSearchChange:m}=k(e,r),_=(0,L.ks)(),h=_?O.vq:O.rk;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${h} ${e.className||""}`},a.createElement("button",{onClick:e.onBack,className:T.s.colorBgSecondary.$},a.createElement(A.In,{icon:"chevron-left-32"})),a.createElement(b.L,{ref:i,className:O.mn,dataTestId:"search-bar-input",disabled:e.disabled,maxInputLength:e.maxInputLength,onBlur:d,onChange:m,onClick:u,onFocus:c,onKeyDown:p,onMouseDown:o,onMouseUp:s,placeholder:e.placeholder||(0,I.t)("general.search"),spellCheck:!1,style:S.sx.if(e.hasTransparentBackground,S.sx.add({background:"transparent"})).if(_||e.smallFont,S.sx.if(n,S.sx.textBodyMedium,S.sx.font11.$)).$,value:e.query}),a.createElement(z,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:p,onBlur:m,onClick:_,onSearchKeyDown:h,onSearchChange:g}=k(e,r),f=e.placeholder||(0,I.t)("general.search"),E=`${e.className||""} ${n?O.pp:O.MI}`;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:E},a.createElement(v.B,{className:O.MU,svg:R.A,onClick:()=>d()}),a.createElement(b.L,{ref:s,className:O.mn,onBlur:m,onChange:g,onClick:_,onFocus:p,onKeyDown:h,onMouseDown:l,onMouseUp:c,placeholder:f,spellCheck:!1,style:{width:n?void 0:i},value:e.query}),a.createElement("div",{className:O.ds,ref:e=>o(e?.getBoundingClientRect().width)},f),a.createElement(z,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),a.forwardRef((e,r)=>{let n=(0,g.M)(r);return a.createElement("div",{className:O.$7,onMouseDown:()=>n.current?.focus()},a.createElement(M,{...e,smallFont:!0,hasTransparentBackground:!0,className:p()(T.s.wFull.$,e.className),ref:n}))});let F=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:_}=k(e,r),h=e.placeholder||(0,I.t)("general.search"),g=`${e.className||""} ${O.W1}`,f=e.query.length>0?O.p3:O.Rt;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:g,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l},a.createElement(v.B,{className:O.mh,svg:R.A}),a.createElement(b.L,{ref:o,className:f,onBlur:u,onChange:_,onClick:p,onFocus:d,onKeyDown:m,placeholder:h,spellCheck:!1,style:{width:n?void 0:i},value:e.query}),a.createElement(z,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),x=a.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:i,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:u,onBlur:p,onClick:_,onSearchKeyDown:h,onSearchChange:g}=k(e,r);a.useEffect(()=>{m.definedAnalyticsHandler.trackDefinedEvent("search_experience.dead_code",{userId:f.Ay().user_data?.id,codeLocation:"SidebarSearchBar"})},[]);let E=e.placeholder||(0,I.t)("general.search"),y=`${e.className||""} ${O.Gh}`,v=e.query.length>0?O.r3:O.nP;return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c},a.createElement(A.In,{icon:"search-32"}),a.createElement(b.L,{ref:s,className:v,onBlur:p,onChange:g,onClick:_,onFocus:u,onKeyDown:h,placeholder:E,spellCheck:!1,style:{width:n?void 0:i},value:e.query}),a.createElement("div",{className:O.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},E),a.createElement(z,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),U=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=k(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:O.sb},a.createElement(b.L,{ref:n,className:O.vs,onBlur:l,onChange:u,onClick:c,onFocus:s,onKeyDown:d,onMouseDown:i,onMouseUp:o,placeholder:e.placeholder||(0,I.t)("general.search"),spellCheck:!1,value:e.query}),a.createElement(v.B,{className:O.Ck,svg:P.A,onClick:e.onSubmit}))}),B=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:m}=k(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:p()(e.className||O.HD,{[O.RT]:!e.extraSpacing,[O.qX]:e.extraSpacing,[O.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&a.createElement(v.B,{svg:D.A,className:O.nk}),a.createElement(b.L,{ref:n,className:e.query?O.CC:O.Vl,dataTestId:e.dataTestId,onBlur:c,onChange:m,onClick:d,onFocus:l,onKeyDown:u,onMouseDown:i,onMouseUp:o,placeholder:e.placeholder||(0,I.t)("design_systems.publishing_modal.search_placeholder"),spellCheck:!1,value:e.query}),a.createElement(z,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:y.Pt(e,"closeX")}))}),G=a.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:i,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:p}=k(e,r);return a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${O.ZG} ${e.className||""}`},a.createElement(v.B,{svg:D.A,className:O.MU}),a.createElement(b.L,{ref:n,className:O.uD,onBlur:c,onChange:p,onClick:d,onFocus:l,onKeyDown:u,onMouseDown:i,onMouseUp:o,placeholder:e.placeholder||(0,I.t)("general.search"),spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0,value:e.query}),a.createElement(z,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:y.Pt(e,"clearSearch")}))}),V=a.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:i,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:_,onSearchChange:h}=k(e,r);return a.useEffect(()=>{m.definedAnalyticsHandler.trackDefinedEvent("search_experience.dead_code",{userId:f.Ay().user_data?.id,codeLocation:"LoggedOutSearchBar"})},[]),a.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${O.ax} ${e.className||""}`},!n&&!e.query&&a.createElement("div",{className:O.JU,onClick:()=>l(!0)},a.createElement(v.B,{className:O.Qm,svg:P.A})),(n||!!e.query)&&a.createElement("div",{className:O.S_},a.createElement(b.L,{ref:i,autoFocus:!0,className:O.nA,onBlur:u,onChange:h,onClick:p,onFocus:d,onKeyDown:_,onMouseDown:o,onMouseUp:s,placeholder:e.placeholder||(0,I.t)("general.search"),spellCheck:!1,value:e.query}),a.createElement(z,{hideXIcon:!1,query:e.query,onClearSearchClick:c})))}),H=a.forwardRef((e,r)=>{let n=(0,g.M)(r);return(0,d.k)().fpl_search_input?a.createElement("div",{style:{width:248,...e.styleOverrides}},a.createElement(o.D.Lazy,{"aria-label":e.placeholder,htmlAttributes:{maxLength:e.maxInputLength},onChange:e.onChange,placeholder:e.placeholder,size:"md",value:e.query})):a.createElement("div",{className:O.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus()},a.createElement(M,{onChange:e.onChange,focusOnMount:!1,query:e.query,clearSearch:e.clearSearch,placeholder:e.placeholder,maxInputLength:e.maxInputLength,smallFont:!0,className:T.s.wFull.$,ref:n}))});function z({query:e,hideXIcon:r,withSmallXIcon:n=!1,onClearSearchClick:o,recordingKey:s,customClearSearchIcon:d,customContainerClassName:u}){return!e||r?null:a.createElement("div",{className:p()(O.i3,u)},a.createElement(i.K,{onClick:o,"aria-label":(0,I.t)("search.search_bar.clear"),recordingKey:s,htmlAttributes:{"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,I.t)("search.search_bar.clear"),"data-testid":"clearSearchButton"}},d||(n?a.createElement(l.f,null):a.createElement(c.A,null))))}},309407:(e,r,n)=>{n.d(r,{b:()=>u});var a=n(848318),i=n(143823),o=n(748059),s=n(773511),l=n(744577);let c="184px";function d(){return a.createElement("div",{style:l.sx.flex.itemsCenter.justifyCenter.add({width:c,height:"100px"}).$},a.createElement(i.k,{size:"sm"}))}function u({setToMaxWidth:e,popoverText:r,popoverContent:n,text:i,type:u="dialog"}){let[p,m]=a.useState(!1),{getTriggerProps:_,getContainerProps:h}=o.fP({isOpen:p,onOpenChange:m,type:u,openOnHover:!0,placement:"bottom",softDismiss:!0});return a.createElement("div",{style:l.sx.inlineBlock.$},a.createElement(s.E,{className:"text_with_popover--textWithPopoverButton--JjWpS",style:l.sx.radiusMedium.$,..._()},a.createElement("span",{style:l.sx.underline.add({lineHeight:"24px",padding:"0px 0.25rem",textDecorationColor:"var(--color-text-secondary, var(--fallback-color-text-secondary))",textDecorationStyle:"dashed",textUnderlineOffset:"4px"}).$},i)),a.createElement(o.mc,{"data-preferred-theme":"dark",...h({style:l.sx.colorTextOnbrand.colorBgTooltip.fontMedium.radiusMedium.add({boxShadow:"var(--elevation-300-tooltip)",letterSpacing:"0.055px",lineHeight:"var(--body-medium-lineHeight, 16px)",maxWidth:c}).if(e,{minWidth:c}).if(r,{padding:"var(--spacer-1, 0.3rem) var(--spacer-2, 0.5rem)"},{padding:"var(--spacer-2, 0.5rem)"}).$})},a.createElement(a.Suspense,{fallback:a.createElement(d,null)},r,n)))}},999556:(e,r,n)=>{n.d(r,{NU:()=>m});var a=n(848318),i=n(410725),o=n(316528),s=n(555772),l=n(696207),c=n(229498),d=n(240176),u=n(318147),p=n(55116);function m({file:e,...r}){var n,m;let _=(0,i.Rs)(p.sMs,{key:e.key}),h=(n=e.editor_type,m=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?m?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:m?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===_.status)return a.createElement(l.q,{...r});if(!_.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return a.createElement(o.N,{thumbnailType:h,...r})}return a.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:h,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},555772:(e,r,n)=>{n.d(r,{V:()=>y});var a=n(848318),i=n(144230),o=n(382902),s=n(536384),l=n.n(s),c=n(918777),d=n(775292),u=n(230618),p=n(68376),m=n(696207),_=n(229498),h=n(297638),g=n(304024),f=n(188961);let E=(0,o.eU)({});function y({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:s,size:y,borderRadius:b,noBorder:v,addtlStyles:T,draggable:I,disableSmartBackground:S,hideUntilLoaded:A=!0}){let w=!S&&r!==_.F.DEFAULT_DESIGN&&r!==_.F.DEFAULT_WHITEBOARD&&r!==_.F.SLIDES&&r!==_.F.COOPER,{latestThumbnailUrl:C,smartBackgroundColor:N}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[i,s]=(0,o.fp)(E),l=!e||(0,c.A)(e).isBefore((0,c.A)().subtract(4,"seconds")),d=!n||r&&!!i[r],[u,p]=a.useState(l&&r&&d?r:null),m=a.useCallback(e=>{if(!n||i[e])p(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=h.s.fixed.hidden.$,r.onload=()=>{let n=(0,g.J)(r);n&&s(r=>({...r,[e]:n})),p(e),r.remove()},r.src=e,document.body.appendChild(r)}},[p,n,i,s]);a.useLayoutEffect(()=>{if(r){if(e){let n=(0,c.A)(e).diff((0,c.A)().subtract(4,"seconds"));if(n<=0){m(r);return}{let e=setTimeout(()=>{m(r)},n);return()=>clearTimeout(e)}}m(r)}else p(null)},[e,r,m]);let _=n&&u?i[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:_}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:w});if(r===_.F.OFFLINE)return a.createElement(p.A,{size:y,borderRadius:b,noBorder:v});let L=r!==_.F.SLIDES?(0,i.C)(s):void 0,O=r===_.F.DEFAULT_DESIGN||r===_.F.DEFAULT_WHITEBOARD||r===_.F.COOPER;return a.createElement(m.q,{borderRadius:b,backgroundClassName:l()({[f.Kf]:r===_.F.WHITEBOARD||r===_.F.DEFAULT_WHITEBOARD,[f._k]:r===_.F.DEFAULT_DESIGN&&(!L||"transparent"===L),[f.gc]:r===_.F.PROTOTYPE||r===_.F.SLIDES||r===_.F.SITES&&!(w&&N)&&(!L||"transparent"===L)}),noBorder:v,backgroundColor:w?N:L},null!==C&&a.createElement(d.B,{enabled:A},a.createElement(u.oW,{src:C,alt:"",draggable:!!I,className:l()(h.s.hFull.wFull.$,f.pQ,{[h.s.p10.$]:O&&y!==_.y.SMALL,[h.s.p4.$]:O&&y===_.y.SMALL,[h.s.py12.$]:O&&r===_.F.COOPER,[h.s.px6.$]:O&&r===_.F.COOPER}),...S?{}:{crossOrigin:"anonymous"},additionalTrackingProperties:{thumbnailFileType:r},style:T})))}},699342:(e,r,n)=>{n.d(r,{L:()=>g});var a=n(848318),i=n(762217),o=n(347701),s=n(536384),l=n.n(s),c=n(781239),d=n(720522),u=n(642014),p=n(394882),m=n(99033),_=n(769773);let h=e=>e.stopPropagation();a.forwardRef((e,r)=>a.createElement(i.o,{eventListeners:["onClick"]},a.createElement(g,{...e,children:void 0,recordingKey:e.recordingKey,forwardedRef:r}),e.children));class g extends c.uA{constructor(){super(...arguments),this.wrapperRef=a.createRef(),this.buttonRef=a.createRef(),this.setButtonRef=e=>{(0,p.cZ)(this.buttonRef,e),(0,p.cZ)(this.props.forwardedRef,e)},this.onClick=c.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))}}render(){let e,r="";r=this.props.selected?m.wH:this.props.enabled?m.Sn:m.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?a.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=a.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=a.createElement(a.Fragment,null,!this.props.hidden&&e,this.props.text&&a.createElement("span",{className:this.props.textStyle||(this.props.svg?m.Pf:m.Qq)},this.props.text),this.props.showIndicator&&a.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:m.q3}),this.props.showChevron&&(this.props.isUI3?a.createElement("div",{className:m.VI},a.createElement(o.O,null)):this.props.positionOnChevron?a.createElement("div",{className:m.FH,ref:this.props.chevronRef},a.createElement(d.B,{svg:_.A,className:l()(m.cN,m.Ot)})):a.createElement(d.B,{svg:_.A,className:m.cN})),this.props.children);return a.createElement("button",{ref:this.setButtonRef,"aria-controls":this.props["aria-controls"],"aria-expanded":this.props["aria-expanded"],"aria-haspopup":this.props["aria-haspopup"],"aria-label":this.props.ariaLabel,className:l()(r,this.props.narrow?m.sc:null,this.props.className),"data-fullscreen-intercept":!0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"]?this.props["data-tooltip-offset-x"]:this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-show-right":this.props["data-tooltip-show-right"],"data-tooltip-slides":this.props["data-tooltip-slides"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip-type":this.props["data-tooltip-type"],id:this.props.id,onClick:h,onKeyDown:this.onKeyDown,onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0},n)}}g.displayName="TopBarAction",g.defaultProps={enabled:!0,hidden:!1}},579898:(e,r,n)=>{n.d(r,{h:()=>u});var a=n(848318),i=n(536384),o=n.n(i),s=n(979309),l=n(345249),c=n(297638),d=n(17753);function u({as:e,text:r,className:n,elementRef:i,...u}){let p=a.useRef(null),m=(0,s.A)(i,p),_=(0,l.NG)({text:r,textRef:p,disabled:!r});return a.createElement(e||"div",{...u,className:o()(c.s.truncate.$,n),"data-tooltip-type":r&&_&&d.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-immediately":!0,ref:m},r)}},328238:(e,r,n)=>{n.d(r,{dN:()=>o,zm:()=>s}),n(848318);var a=n(382902);n(755860);let i=(0,a.eU)(null),o=(0,a.eU)(null);function s(){let e=(0,a.md)(i),r=(0,a.md)(o);return null!==e&&null!==r}},688826:(e,r,n)=>{n.d(r,{TH:()=>i});var a=n(848318);n(382902),n(536384),n(967688),n(518136),n(324698);let i=a.createContext(!1)},948015:(e,r,n)=>{n.d(r,{n2:()=>o}),n(848318);var a=n(382902);let i=(0,a.eU)({isShowing:!1,isFigjamDLTBanner:!1}),o=(0,a.eU)(e=>{let r=e(i);return r.isShowing&&"view_only"===r.bannerType})},324698:(e,r,n)=>{n.d(r,{f:()=>i});var a=n(382902);let i=(0,a.eU)(null);(0,a.eU)(null)},843484:(e,r,n)=>{n.d(r,{$v:()=>d,Kh:()=>m,O_:()=>c,Q:()=>u,lW:()=>h}),n(848318),n(301168);var a=n(186606),i=n(382902),o=n(755860),s=n(511067),l=n(231159);function c(e){switch(e){case a.NLJ.SELECT:return"set-tool-default";case a.NLJ.HAND:return"set-tool-hand";case a.NLJ.SCALE:return"set-tool-scale";case a.NLJ.LASSO:return"set-tool-lasso";case a.NLJ.MULTISELECT:return"set-tool-multiselect";case a.NLJ.COMMENTS:return"set-tool-comments";case a.NLJ.FRAME:return"set-tool-frame";case a.NLJ.SLICE:return"set-tool-slice";case a.NLJ.SHAPE_STAR:return"set-tool-star";case a.NLJ.SHAPE_LINE:return"set-tool-line";case a.NLJ.SHAPE_ARROW:return"set-tool-arrow";case a.NLJ.SHAPE_ELLIPSE:return"set-tool-ellipse";case a.NLJ.SHAPE_RECTANGLE:return"set-tool-rectangle";case a.NLJ.SHAPE_REGULAR_POLYGON:return"set-tool-regular-polygon";case a.NLJ.VECTOR_PEN:return"set-tool-pen";case a.NLJ.VECTOR_PENCIL:return"set-tool-pencil";case a.NLJ.BRUSH:return"set-tool-brush";case a.NLJ.ERASER:return"set-tool-eraser";case a.NLJ.HIGHLIGHTER:return"set-tool-highlighter";case a.NLJ.VECTOR_BEND:return"set-tool-bend";case a.NLJ.VECTOR_CUT:return"set-tool-cut";case a.NLJ.OFFSET_PATH:return"set-tool-offset-path";case a.NLJ.VECTOR_LASSO:return"set-tool-vector-lasso";case a.NLJ.VECTOR_PAINT_BUCKET:return"set-tool-paint-bucket";case a.NLJ.VECTOR_VAR_WIDTH_POINT:return"set-tool-var-width-point";case a.NLJ.SHAPE_BUILDER:return"set-tool-shape-builder";case a.NLJ.TYPE:return"set-tool-type";case a.NLJ.IMAGE_OR_VIDEO:return"place";case a.NLJ.STICKY:return"set-tool-sticky";case a.NLJ.STAMP:return"set-tool-stamp";case a.NLJ.SECTION:return"set-tool-section";case a.NLJ.TABLE:return"set-tool-table";case a.NLJ.CONNECTOR_ELBOWED:return"set-tool-connector-elbowed";case a.NLJ.CONNECTOR_STRAIGHT:return"set-tool-connector-straight";case a.NLJ.CONNECTOR_CURVED:return"set-tool-connector-curved";case a.NLJ.CODE_BLOCK:return"set-tool-code-block";case a.NLJ.WASHI_TAPE:return"set-tool-washi-tape";case a.NLJ.SHAPE_WHITEBOARD_SQUARE:return"set-tool-shape-whiteboard-square";case a.NLJ.SHAPE_WHITEBOARD_ELLIPSE:return"set-tool-shape-whiteboard-ellipse";case a.NLJ.SHAPE_WHITEBOARD_DIAMOND:return"set-tool-shape-whiteboard-diamond";case a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP:return"set-tool-shape-whiteboard-triangle-up";case a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN:return"set-tool-shape-whiteboard-triangle-down";case a.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE:return"set-tool-shape-whiteboard-rounded-rectangle";case a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT:return"set-tool-shape-whiteboard-parallelogram-right";case a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT:return"set-tool-shape-whiteboard-parallelogram-left";case a.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE:return"set-tool-shape-whiteboard-eng-database";case a.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE:return"set-tool-shape-whiteboard-eng-queue";case a.NLJ.SHAPE_WHITEBOARD_ENG_FILE:return"set-tool-shape-whiteboard-eng-file";case a.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER:return"set-tool-shape-whiteboard-eng-folder";case a.NLJ.SHAPE_WHITEBOARD_TRAPEZOID:return"set-tool-shape-whiteboard-trapezoid";case a.NLJ.SHAPE_WHITEBOARD_STAR:return"set-tool-shape-whiteboard-star";case a.NLJ.SHAPE_WHITEBOARD_SHIELD:return"set-tool-shape-whiteboard-shield";case a.NLJ.SHAPE_WHITEBOARD_HEXAGON:return"set-tool-shape-whiteboard-hexagon";case a.NLJ.SHAPE_WHITEBOARD_PENTAGON:return"set-tool-shape-whiteboard-pentagon";case a.NLJ.SHAPE_WHITEBOARD_OCTAGON:return"set-tool-shape-whiteboard-octagon";case a.NLJ.SHAPE_WHITEBOARD_PLUS:return"set-tool-shape-whiteboard-plus";case a.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS:return"set-tool-shape-whiteboard-predefined-process";case a.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT:return"set-tool-shape-whiteboard-manual-input";case a.NLJ.SHAPE_WHITEBOARD_CHEVRON:return"set-tool-shape-whiteboard-chevron";case a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE:return"set-tool-shape-whiteboard-document-single";case a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE:return"set-tool-shape-whiteboard-document-multiple";case a.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT:return"set-tool-shape-whiteboard-arrow-left";case a.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT:return"set-tool-shape-whiteboard-arrow-right";case a.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION:return"set-tool-shape-whiteboard-summing-junction";case a.NLJ.SHAPE_WHITEBOARD_OR:return"set-tool-shape-whiteboard-or";case a.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE:return"set-tool-shape-whiteboard-speech-bubble";case a.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE:return"set-tool-shape-whiteboard-internal-storage";case a.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS:return"set-tool-mindmap-tree-nucleus";case a.NLJ.ANNOTATE:return"set-tool-annotate";case a.NLJ.MEASURE:return"set-tool-measure";case a.NLJ.DROPPER_COLOR:return"toggle-dropper";case a.NLJ.SLIDES_POLL:return"set-tool-slides-poll";case a.NLJ.SLIDES_EMBED:return"set-tool-slides-embed";case a.NLJ.SLIDES_FACEPILE:return"set-tool-slides-facepile";case a.NLJ.SLIDES_ALIGNMENT_SCALE:return"set-tool-slides-alignment-scale";case a.NLJ.SLIDES_YOUTUBE:return"set-tool-slides-youtube";case a.NLJ.SLIDE_NUMBER:return"set-tool-slide-number";case a.NLJ.SITES_RESPONSIVE_SET:return"set-tool-sites-responsive-set";case a.NLJ.SITES_LINK:return"set-tool-sites-link";case a.NLJ.CODE_COMPONENT:return"set-tool-code-component";case a.NLJ.SITES_EMBED:return"set-tool-sites-embed";case a.NLJ.JSX:return"set-tool-jsx";default:return console.warn("Unsupported tool",e),"set-tool-default"}}function d(e){o.VU.get(e,"toolbar")()}n(197696);let u=(0,l.bt)(e=>e.mirror.appModel.topLevelMode),p=(0,l.bt)(e=>e.mirror.appModel.activeCanvasEditModeType),m=(0,l.bt)(e=>e.mirror.appModel.currentTool),_=(0,i.eU)(e=>e(m),(e,r,n)=>{d(c(n))}),h={readOnlyOverlayInfoAtom:s.xc,activeToolIdAtom:_,readOnlyTopLevelModeAtom:u,readOnlyEditModeTypeAtom:p}},763716:(e,r,n)=>{n.d(r,{rM:()=>c});var a=n(848318),i=n(301168),o=n(382902),s=n(952039),l=n(453370);function c({activeToolIdAtom:e,readOnlyOverlayInfoAtom:r,readOnlyTopLevelModeAtom:n,readOnlyEditModeTypeAtom:c},u){let p=(0,o.md)(r),[m,_]=(0,o.fp)(e),h=(0,o.md)(n),g=(0,o.md)(c),f=p?.type!==void 0,E=function(){let e=(0,i.wA)();return(0,a.useCallback)(r=>{var n;if(!r?.overlayId){e(l.oB());return}let a=r.anchorClientRect;e(l.j7({type:(n=r.overlayId,`${d}${String(n)}`),data:{targetRect:{top:a.top,left:a.left+74,width:a.width},items:r.items,selectedToolId:r.selectedToolId,recordingKey:r.recordingKey}})),e(s.F.clearAll())},[e])}(),y=u||E,b=(0,a.useCallback)(()=>{y(null)},[y]);(0,a.useEffect)(()=>{f||b()},[f,b]);let v=(0,a.useCallback)(e=>{_(e),b()},[_,b]);return{activeToolId:m,dropdownShown:p,openOverlay:e=>{y(e)},closeOpenOverlay:b,activateTool:v,topLevelMode:h,editModeType:g}}let d="TOOLBAR_STATE_OVERLAY_DROPDOWN_TYPE_"},968325:(e,r,n)=>{n.d(r,{f:()=>c});var a=n(848318);n(149334);var i=n(615233),o=n(274049);n(720522),n(967688);var s=n(677334),l=n(41415);function c({width:e=16,height:r=16}){return a.createElement("svg",{width:e,height:r,viewBox:"0 0 16 16",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}(0,i.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),(0,i.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),s.M4.Query({fetch:async e=>e?(await l.$.getFaviconForUrlProxy({url:(0,o.Jk)(e)})).data.meta??null:null})},899806:(e,r,n)=>{n.d(r,{V:()=>b,n:()=>y});var a=n(848318),i=n(301168),o=n(536384),s=n.n(o),l=n(642014),c=n(967688),d=n(995218),u=n(499668),p=n(613733),m=n(407638),_=n(125952),h=n(498633),g=n(915738),f=n(980297),E=n(83071);function y(e){let r;let n=(0,i.d4)(r=>r.authedUsers.byId[e.userId]),o=(0,i.d4)(r=>e.profileId?r.authedProfilesById[e.profileId]:null),s=(0,i.d4)(r=>e.orgId?r.orgById[e.orgId]:null),c=(0,i.d4)(r=>e.teamId?r.teams[e.teamId]:null),y=(0,i.d4)(e=>e.orgById),b=(0,i.d4)(e=>e.orgUsersByOrgId),v=(0,i.d4)(e=>e.fileByKey),T=a.useMemo(()=>!!(0,m.userIsAMemberOfAnOrg)({user:n,orgById:y,orgUsersByOrgId:b,fileByKey:v},e.userId),[v,y,b,e.userId,n]),I="whiteboard"===(0,d.lg)(),S=(0,u.DQ)(u.Pw.GROUP_6),A=S?!e.forceAvatar:!e.forceAvatar&&T,w=16===e.size?h.oi:32===e.size?h.YV:h.D8,C=null;e.skipExternalTeamsIcon||(r=16===e.size?a.createElement(l.t,{svg:E.A}):a.createElement(l.t,{svg:g.A,fallbackSvg:f.A})),A||e.skipUserIcon||(e.personalSpaceIcon&&e.personalSpaceIcon1x?(r=a.createElement(l.t,{svg:e.personalSpaceIcon,fallbackSvg:e.personalSpaceIcon1x}),C="personalSpaceIcon"):n&&(r=a.createElement("div",{className:h.zc},a.createElement(_.Ro,{size:e.size??24,entity:o||n}),a.createElement("div",{className:w})),C="user"));let N=s||c;return(N&&(r=a.createElement("div",{className:h.zc},a.createElement(_.Ro,{size:e.size??24,entity:N,className:I&&!e.forceNoWhiteboardBorder?h.VT:void 0}),!I&&a.createElement("div",{className:w})),C="orgOrTeam"),(0,p.u8)({oldValue:C,newValue:"orgOrTeam",label:p.A5.WorkspaceIcon.avatarTracker,enableFullRead:S,contextArgs:{userHasOrgMembership:T,useExternalTeamsIcon:A,skipUserIcon:e.skipUserIcon},maxReports:10}),r)?a.createElement("div",{className:`${16===e.size?h.t7:h.kL} ${e.className||""}`,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],"data-tooltip-show-immediately":e["data-tooltip-show-immediately"],"data-tooltip-max-width":e["data-tooltip-max-width"],"data-tooltip-offset-y":e["data-tooltip-offset-y"]},r):null}function b(e){let{onClick:r,className:n,iconClassName:i,...o}=e;return a.createElement("button",{className:s()(h.UD,n),onClick:r,tabIndex:0,"aria-label":(0,c.t)("fullscreen.toolbar.back-to-files-button"),"data-fullscreen-intercept":!0},a.createElement(y,{...o,className:i}))}},381656:(e,r,n)=>{n.d(r,{j:()=>x});var a=n(848318),i=n(615233),o=n(560596),s=n(382902),l=n(536384),c=n.n(l),d=n(398612),u=n(354175),p=n(656329),m=n(264478),_=n(720522),h=n(967688),g=n(957872),f=n(863270),E=n(353231),y=n(978295),b=n(426669),v=n(920194);let T="base_cookie_banner--container--nUKFl",I="base_cookie_banner--body--lPBYi",S="base_cookie_banner--actions--1LAhr",A="base_cookie_banner--dismiss--gdSyk",w="base_cookie_banner--container__community--oc-bP",C="base_cookie_banner--container__fileViewer--522-P",N="base_cookie_banner--dismissIcon--0O2Nl",L="base_cookie_banner--container__prototype--A1a4y",O="base_cookie_banner--container__auth--okjXC",R="base_cookie_banner--container__authOrCommunity--cqdOl";function P(e){let[r,n]=a.useState(e.showBanner),{trackEvent:i}=(0,f.j6)(),o=a.useRef(null),l=(0,s.Xr)(y.P4),d=(0,u.wY)(o)??u.cU,p=r?d.height+(e.verticalPadding||0):0;a.useEffect(()=>{l(p)},[p,l]);let b=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},P=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!0}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},D=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),i(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:c()(T,e.variant===v.a.COMMUNITY&&[R,w],e.variant===v.a.FILE_VIEWER&&C,e.variant===v.a.PROTOTYPE&&L,e.variant===v.a.AUTH&&[R,O]),role:"region",ref:o,"aria-label":(0,h.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},a.createElement("div",{className:I},(0,h.tx)("cookies.explicit_consent_body")," ",a.createElement(m.Yo,{href:(0,h.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,h.tx)("cookies.cookies_settings"))),a.createElement("div",{className:S},a.createElement(e.SecondaryButton,{onClick:b,"data-testid":"cookie-opt-out-button"},(0,h.tx)("cookies.do_not_allow_cookies")),a.createElement(e.PrimaryButton,{onClick:P,"data-testid":"cookie-opt-in-button"},(0,h.tx)("cookies.allow_all_cookies"))),a.createElement("div",{className:A},a.createElement("button",{onClick:D,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(_.B,{className:N,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function D(e){let r=(0,s.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),i.Ay().user_data?.id&&(n=!0),((0,i.Ay)().is_embed||(0,d.GZ)())&&(n=!0),p.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&p.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||p.Ay.isIpadNative)?null:a.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},a.createElement(P,{...e,showBanner:r===y.S6.NO}))}function k(e){let[r,n]=a.useState(e.showBanner),[i,o]=a.useState(!1),l=a.useRef(null),d=a.useRef(),p=(0,s.Xr)(y.P4),h=(0,u.wY)(l)??u.cU,b=r?h.height+(e.verticalPadding||0):0;a.useEffect(()=>{p(b)},[b,p]);let{trackEvent:P}=(0,f.j6)(),D=a.useRef(P);D.current=P,a.useEffect(()=>()=>{clearTimeout(d.current)},[]);let k=a.useCallback(e=>{l.current?.contains(e.target)||(o(!0),window.removeEventListener("click",k),d.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),M=a.useCallback(async()=>{clearTimeout(d.current),i&&(await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[i]);a.useEffect(()=>{if(r)return window.addEventListener("click",k),window.addEventListener("beforeunload",M),()=>{window.removeEventListener("beforeunload",M),window.removeEventListener("click",k)}},[r,k,M]);let F=async()=>{n(!1),window.removeEventListener("click",k),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!1}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},x=async()=>{n(!1),window.removeEventListener("click",k),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?a.createElement("div",{className:c()(T,e.variant===v.a.COMMUNITY&&[R,w],e.variant===v.a.FILE_VIEWER&&C,e.variant===v.a.PROTOTYPE&&L,e.variant===v.a.AUTH&&[R,O]),role:"region","aria-label":"Consent Manager",ref:l,"data-testid":"cookie-banner"},a.createElement("div",{className:I},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",a.createElement(m.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",a.createElement("b",null,"California Residents")," can learn how personal information is"," ",a.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",a.createElement(m.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",a.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",a.createElement(m.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),a.createElement("div",{className:S},a.createElement(e.SecondaryButton,{onClick:F,"data-testid":"cookie-opt-out-button"},"Opt out")),a.createElement("div",{className:A},a.createElement("button",{onClick:x,type:"button","data-testid":"cookie-dismiss-button"},a.createElement(_.B,{className:N,svg:e.dismissIcon})))):e.persistentMessage&&a.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function M(e){let r=(0,s.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),i.Ay().user_data?.id&&(n=!0),((0,i.Ay)().is_embed||(0,d.GZ)())&&(n=!0),p.Ay.isMeetDevice&&(n=!0),a.useEffect(()=>{!n&&p.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||p.Ay.isIpadNative)?null:a.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},a.createElement(k,{...e,showBanner:r===y.S6.NO}))}var F=n(172808);let x=a.memo(function(){return"implicit"===(0,i.Ay)().consent_region?a.createElement(M,{variant:v.a.PROTOTYPE,dismissIcon:F.A,SecondaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):"explicit"===(0,i.Ay)().consent_region?a.createElement(D,{variant:v.a.PROTOTYPE,dismissIcon:F.A,PrimaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"primary","data-testid":e["data-testid"]},e.children),SecondaryButton:e=>a.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):null})},97481:(e,r,n)=>{n.d(r,{DI:()=>a,VI:()=>m,bJ:()=>h,d6:()=>_,nt:()=>g});var a,i=n(317720),o=n(410725),s=n(640483),l=n(318147),c=n(55116),d=n(677334),u=n(254028),p=n(596224);function m(e){return{canCreateDesignFileWithReasons:e.canCreateDesignFileWithReasons,canCreateFigjamFileWithReasons:e.canCreateFigjamFileWithReasons,canCreateSlidesFileWithReasons:e.canCreateSlidesFileWithReasons,canCreateSitesFileWithReasons:e.canCreateSitesFileWithReasons,canCreateCooperFileWithReasons:e.canCreateCooperFileWithReasons,canCreateFigmakeFileWithReasons:e.canCreateFigmakeFileWithReasons}}function _(e,r){let n={[l._Y.DESIGN]:e.canCreateDesignFileWithReasons,[l._Y.WHITEBOARD]:e.canCreateFigjamFileWithReasons,[l._Y.SLIDES]:e.canCreateSlidesFileWithReasons,[l._Y.SITES]:(0,p.oz)()?e.canCreateSitesFileWithReasons:null,[l._Y.COOPER]:(0,s.HH)()?e.canCreateCooperFileWithReasons:null,[l._Y.FIGMAKE]:(0,u.aI)()?e.canCreateFigmakeFileWithReasons:null}[r];return!!n&&n.result}async function h(e,r){let{project:n}=await d.M4.fetch(c.zCd.Query({projectId:e}));return!!n&&_(n,r)}function g(e){let r=(0,o.Rs)(c.zCd,{projectId:e},{enabled:!!e});return i.Qw.useTransform(r,e=>e.project)}(e=>{function r(e,r){function n(e){return"boolean"==typeof e?{result:e,publicDenyReasons:[]}:e}let a={canCreateCooperFileWithReasons:n(e),canCreateDesignFileWithReasons:n(e),canCreateFigjamFileWithReasons:n(e),canCreateSlidesFileWithReasons:n(e),canCreateSitesFileWithReasons:n(e),canCreateFigmakeFileWithReasons:n(e)};return r&&Object.entries(r).forEach(([e,r])=>{a[e]=n(r)}),a}e.generate=r,e.enabled=function(){return r(!0)},e.disabled=function(){return r(!1)}})(a||(a={}))},171506:(e,r,n)=>{n(848318),n(97481),n(318147)},178806:(e,r,n)=>{n.d(r,{$z:()=>d,Ih:()=>m,Me:()=>h,c:()=>p,e6:()=>u,lR:()=>_});var a=n(531788),i=n(773511),o=n(353317),s=n(658029),l=n(323209),c=n(863270);let d=(0,c.tf)(a.$n);(0,c.tf)(a.$n.Link);let u=(0,c.tf)(i.E),p=(0,c.tf)(a.WW),m=(0,c.tf)(a.IK),_=(0,c.tf)(a.Pw);(0,c.tf)(o.d);let h=(0,c.tf)(s.K);(0,c.tf)(l.f)},302941:(e,r,n)=>{n.d(r,{S:()=>o});var a=n(979890),i=n(531631);let o={div:(0,i.G)("Inaccessible","div",{"data-fpl-audit":!0}),button:(0,i.G)("Inaccessible","button",{"data-fpl-audit":!0,type:"button"}),span:(0,i.G)("Inaccessible","span",{"data-fpl-audit":!0}),recordableDiv:(0,i.G)("Inaccessible",a.D8,{"data-fpl-audit":!0}),recordableButton:(0,i.G)("Inaccessible",a.GG,{"data-fpl-audit":!0,type:"button"}),recordableSpan:(0,i.G)("Inaccessible",a.oj,{"data-fpl-audit":!0})}},850426:(e,r,n)=>{n.d(r,{Ph:()=>s,o:()=>c,pW:()=>l});var a=n(469508),i=n(534497),o=n(863270);let s=(0,o.tf)(a.N),l=(0,o.tf)(a.N.Button),c=(0,o.tf)(i._)},212274:(e,r,n)=>{n.d(r,{Bs:()=>u,Jq:()=>d,Sv:()=>c,Zs:()=>o});var a=n(944239),i=n(561180);function o(e,r="A"){return e.replace(/\w/g,r)}let s="\uFEFF\u2005\uFEFF\xb7\uFEFF\u2005",l=e=>Math.ceil(2.1*e/10.18),c=(0,a.D)(e=>{let r=[],n=e.split(""),a=0;if(n.forEach(e=>{if(" "===e){for(let e=0;e<l(a);e++)r.push(s);a=0}else a++;r.push(i.kn[e]??e)}),a>0)for(let e=0;e<l(a);e++)r.push(s);return r.join("")});function d(e,r="[~",n="~]"){return[r,...e,n]}function u(e){return e.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join("").split("").map(e=>"0"===e?"\u200B":"\u200C").join("")}},518052:(e,r,n)=>{n.d(r,{K:()=>g});var a=n(848318),i=n(143823),o=n(413927),s=n(536384),l=n.n(s),c=n(720522),d=n(297638),u=n(178806),p=n(190597),m=n(297691),_=(e=>(e[e.BUTTON=0]="BUTTON",e[e.ICON_BUTTON=1]="ICON_BUTTON",e[e.ICON_TEXT_BUTTON=2]="ICON_TEXT_BUTTON",e[e.CUSTOM=3]="CUSTOM",e[e.CUSTOM_BUTTON=4]="CUSTOM_BUTTON",e))(_||{});function h(e){switch(e.action.kind){case 0:return a.createElement(a.Fragment,null,e.action.displayText);case 1:return a.createElement(c.B,{svg:e.action.icon});case 2:return a.createElement(a.Fragment,null,a.createElement(c.B,{svg:e.action.icon,className:e.action.svgStyleClass,style:{alignSelf:"center",paddingRight:"5px"}}),a.createElement("div",null,e.action.displayText));default:return null}}function g(e){if(3===e.action.kind)return a.createElement("div",{className:l()(e.action.showOnMobile?null:m.a,e.action.hideOnDesktop?m.i:null),key:e.action.key},e.action.element);let r="isLoading"in e.action&&!0===e.action.isLoading,n=a.createElement(u.e6,{className:l()(d.s.flex.itemsCenter.justifyCenter.$,e.action.showOnMobile?null:m.a,e.action.hideOnDesktop?m.i:null,"styleClass"in e.action?e.action.styleClass:null,p.HM),key:e.action.key,htmlAttributes:{"data-test-id":"dataTestId"in e.action?e.action.dataTestId:void 0,"data-onboarding-key":"data-onboarding-key"in e.action?e.action["data-onboarding-key"]:void 0,"data-tooltip":"data-tooltip"in e.action?e.action["data-tooltip"]:void 0,"data-tooltip-type":"data-tooltip-type"in e.action?e.action["data-tooltip-type"]:void 0},innerText:"displayText"in e.action?e.action.displayText:void 0,onClick:"onClick"in e.action?e.action.onClick:void 0,"aria-label":"ariaLabel"in e.action?e.action.ariaLabel:void 0},r?a.createElement("span",{className:d.s.px4.$},a.createElement(i.k,null)):a.createElement(h,{action:e.action}));return e.action.editorThemeMode?a.createElement(o.v,{mode:e.action.editorThemeMode},n):n}},352317:(e,r,n)=>{n.d(r,{$:()=>o,W:()=>s});var a=n(848318),i=n(303397);class o{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,r){let n,a;this.tapCallback=r;let i=e=>{a=Date.now(),n=e},o=()=>{a=void 0,n=void 0},s=e=>{n&&a&&Date.now()-a<500&&(this.tapCallback?.(n,e),o())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&i({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&n){let r=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:r.screenX,screenY:r.screenY}],{0:{screenX:n.x,screenY:n.y}},10)&&o()}else o()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",e=>s(e),this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{i({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",e=>s(e),this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,r){this.tapCallback?this.tapCallback=r:this.installTapGestureRecognizer(e,r)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,r){let n=Date.now(),a=0;for(let i=e.length-1;i>=0;i--)if(Math.abs(e[i]-n)<r)a++;else break;return a}installMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]=n;let a=[],i=!1,o=()=>{let e=Date.now();if(a.push(e),i=this.numTapsInRecencyThreshold(a,500)===r.numTaps)a=[];else for(;a.length>r.numTaps;)a.shift()},s=()=>{i&&(this.multiTapCallbacks[r.numTaps]?.(),i=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&o()},this.multiTapTouchStartListeners,r.numTaps),this.replaceEventListener(e,"touchend",s,this.multiTapTouchEndListeners,r.numTaps),this.replaceEventListener(e,"mousedown",o,this.multiTapMouseDownListeners,r.numTaps),this.replaceEventListener(e,"mouseup",s,this.multiTapMouseUpListeners,r.numTaps)}updateMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]?this.multiTapCallbacks[r.numTaps]=n:this.installMultiTapGestureRecognizer(e,r,n)}installMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.set(n,r);let a=null,o=null,s=e=>{if(null==o){for(let r of(o={},e))o[r.identifier]={screenX:r.screenX,screenY:r.screenY};a=setTimeout(()=>{let r;1===e.length&&(r={x:e[0].screenX,y:e[0].screenY}),this.multiTouchLongPressCallbacks.get(n)?.(r),i.Y5&&i.Y5.cancelPendingGestures&&i.Y5.cancelPendingGestures()},500)}},l=()=>{null!=a&&(clearTimeout(a),a=null,o=null)},c=e=>{e.length===n&&o?this.didMoveTooMuch(e,o,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===n?s(e.touches):l()},this.multiTouchLongPressTouchStartListeners,n),this.replaceEventListener(e,"touchmove",e=>c(e.touches),this.multiTouchLongPressTouchMoveListeners,n),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,n),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,n),this.replaceEventListener(e,"pointerdown",e=>{1===n&&"touch"!==e.pointerType?s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,n),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&c([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,n),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,n),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,n)}updateMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.has(n)?this.multiTouchLongPressCallbacks.set(n,r):this.installMultiTouchLongPressGestureRecognizer(e,r,n)}uninstallMultiTouchLongPressGestureRecognizer(e,r){this.multiTouchLongPressCallbacks.has(r)&&(this.multiTouchLongPressCallbacks.delete(r),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[r],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[r],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[r],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[r],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[r],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[r],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[r],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[r],!0))}replaceEventListener(e,r,n,a,i){a[i]&&e.removeEventListener(r,a[i],!0),a[i]=n,e.addEventListener(r,a[i],!0)}didMoveTooMuch(e,r,n){for(let a of e){let e=r[a.identifier];if(void 0===e||Math.hypot(e.screenX-a.screenX,e.screenY-a.screenY)>n)return!0}return!1}}let s=a.createContext(new o)},47440:(e,r,n)=>{n.d(r,{Z:()=>G});var a=n(848318),i=n(301168),o=n(801438),s=n(458612),l=n(2446),c=n(232167),d=n(218742),u=n(536070),p=n(868326),m=n(749233),_=n(491967),h=n(516686),g=n(122019),f=n(451657),E=n(203282),y=n(424172),b=n(248559),v=n(187782),T=n(138807),I=n(952647),S=n(320953),A=n(82433),w=n(19180),C=n(989232),N=n(813009),L=n(615233),O=n(952039),R=n(185772),P=n(113752),D=n(79943),k=n(696786),M=n(839368);let F={offscreen:{position:"x10l6tqk",clipPath:"x1nj6f5o",$$css:!0},displayContents:{display:"xjp7ctv",$$css:!0}},x={root:"visual-bell-root",button:"visual-bell-button",secondaryButton:"visual-bell-secondary-button",dismissButton:"visual-bell-dismiss-button",message:"visual-bell-message"};function U({children:e,testId:r,hidden:n}){return a.createElement("span",{...A.Ay.props(n?F.offscreen:F.displayContents)},a.createElement(o.QB,{htmlAttributes:{"data-testid":r}},e))}function B({offscreen:e,srOnly:r,children:n}){return r?a.createElement(s.E,null,n):a.createElement("span",{...A.Ay.props(e&&F.offscreen)},n)}function G(e){let{positioner:r=B}=e,n=(0,i.wA)(),{bell:s,queueDepth:l}=(0,N.R)(e=>({bell:e.visualBell[0],queueDepth:e.visualBell.length})),c=function(e){let r=(0,a.useMemo)(()=>{let e=[1,2,3];return()=>(e.push(e.shift()),e)},[]);return(0,a.useMemo)(r,[r,e])}(s),[d,u]=(0,L.u4)("fpl_canvas_keyboard_controls",c,[void 0,void 0]),p=s?.onDequeue,m=s?.onDismiss,_=(0,a.useRef)(!1);(0,a.useEffect)(()=>()=>{p&&!_.current&&p(P.WX.DISMISS),_.current=!1},[p]);let h=(0,a.useCallback)(e=>{"dismiss"===e&&m?.(),!_.current&&p&&(_.current=!0,p?.(function(e){switch(e){case"dismiss":return P.WX.DISMISS;case"timeout":return P.WX.TIMEOUT;case"action":return P.WX.ACTION_BUTTON_CLICKED}}(e))),n(O.F.dequeue({}))},[n,p,m]),g=(0,i.d4)(e=>s?.progressKey?e.progress[s.progressKey]:void 0),f=s?(0,R.zC)(s,g):null,E=s?.count?a.createElement(o.y_,null,s.count):null,[y,b]=(0,R.hB)(s||null),v=function(e,r){let n=performance.now(),i=(0,a.useMemo)(()=>n,[e]);return(0,a.useMemo)(()=>e?(0,D.L)(e,r):1/0,[e,r])-(n-i)}(s,l),T=function(e,r){let n=(0,a.useRef)(void 0),i=!!e&&!e.delay,[o,s]=(0,a.useState)(i);return((0,a.useEffect)(()=>{if(e?.delay){let n=setTimeout(()=>s(!0),e.delay);return r||e.button||C.definedAnalyticsHandler.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e.type,description:"delay exists but no message was included",visualBellInstance:"fpl_visual_bell"}),()=>clearTimeout(n)}},[e,r]),e!==n.current)?(n.current=e,s(i),r||e?.button||C.definedAnalyticsHandler.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e?.type,description:"Remembered bell current does not match but no message exists",visualBellInstance:"deprecated_fpl_visual_bell"}),i):o}(s,f),S=!!s?.role,A=a.createElement(I.J,{mode:"dark"},a.createElement(o.bL,{timeout:v,onClose:h,variant:s?.error?"danger":void 0,htmlAttributes:{"data-testid":x.root}},s?.icon&&a.createElement(H,{error:s.error,iconShape:s.iconShape,iconURL:s.iconURL,progress:g,icon:s.icon}),a.createElement(U,{key:d,testId:x.message},a.createElement("span",null,f),a.createElement("span",null,E)),a.createElement(U,{hidden:!0,key:u}),y&&a.createElement(V,{key:`${s.id}-primary`,bellId:s.id,"data-testid":x.button,...y}),b&&a.createElement(V,{key:`${s.id}-secondary`,bellId:s.id,"data-testid":x.secondaryButton,...b}),(s?.onDismiss||s?.error)&&a.createElement(o.Rz,{htmlAttributes:{"data-testid":x.dismissButton}}))),k=!T||!f&&!E&&!s?.button,M=(0,w.k)().fpl_hide_missing_alert?k:!T;return a.useEffect(()=>{s&&!M&&C.definedAnalyticsHandler.trackDefinedEvent("fpl.visual_bell_shown",{bellId:s.id,bellType:s.type,bellMessage:s.messageComponentKey?s.messageComponentKey:s.i18n?`VisualBellTxMessageType.${s.i18n.id}`:s.message?s.message:"[unknown]"})},[s,M]),a.createElement(r,{offscreen:M,srOnly:S,shouldRequestMobileNativeBottomOffset:!!s},A)}function V({bellId:e,editScope:r,text:n,action:i,Initialize:s,...l}){let c=s?.(),d=(0,a.useMemo)(()=>{let n=r=>i(r,e,c);return r&&(n=S.nc.user(r,n)),n},[i,e,r,c]);return a.createElement(o.rA,{...l,action:d},n)}function H(e){return(0,k.GS)()&&e.icon!==P.zX.FROM_URL?a.createElement(z,{icon:e.icon,progress:e.progress}):a.createElement(M.H,{...e})}function z({icon:e,progress:r}){switch(e){case P.zX.CHECK:return a.createElement(l.g,null);case P.zX.GREEN_CHECK:return a.createElement(c.g,{style:{"--color-icon":"var(--color-icon-success)"}});case P.zX.CHECK_WITH_CIRCLE:return a.createElement(d.W,null);case P.zX.EXCLAMATION:return a.createElement(u.r,null);case P.zX.UNDO:case P.zX.RETURN_TO_INSTANCE:return a.createElement(p.E,null);case P.zX.SPINNER:case P.zX.IMAGE_BACKED_SPINNER:return a.createElement(o.y$,null);case P.zX.PROGRESS:return a.createElement(o.ke,{progressFraction:(0,R.OT)(r)});case P.zX.FROM_URL:return a.createElement(m.w,null);case P.zX.NOTES_ON_RECTANGLE:return a.createElement(_.w,null);case P.zX.STACK_SELECTION:return a.createElement(h.v,null);case P.zX.CLOSE_FILLED:return a.createElement(g.C,{style:{"--color-icon":"var(--color-icon-danger)"}});case P.zX.EYEDROPPER:return a.createElement(f.G,null);case P.zX.BRUSH:return a.createElement(E.g,null);case P.zX.SPARKLE:return a.createElement(y.V,null);case P.zX.PICK:return a.createElement(b.o,null);case P.zX.WARNING_EXCLAMATION_WITH_TRIANGLE:return a.createElement(v.e,null);case P.zX.OFFLINE:return a.createElement(T.V,null);case P.zX.NONE:case void 0:return a.createElement(a.Fragment,null)}}},486250:(e,r,n)=>{n.d(r,{sL:()=>s});var a=n(19180),i=n(524050);let o=e=>{let r=new URL(e);return((0,a.k)().notif_file_url_cleanup?(0,i.PU)(r.pathname.split("/")[1]):"file"===r.pathname.split("/")[1])&&r.hash.length>1&&"#-1"!==r.hash};function s(e){if(!1===o(e))return null;let r=new URL(e),n=r.pathname.split("/");return n.length<3?null:{fileKey:n[2],threadId:r.hash.slice(1),deeplink:e}}},124213:(e,r,n)=>{n.d(r,{P4:()=>i,Q_:()=>l,lA:()=>o,qG:()=>s});var a=n(382902);(0,a.eU)([]),(0,a.eU)(!1),(0,a.eU)(null,()=>{}),(0,a.eU)(null),(0,a.eU)(""),(0,a.eU)({}),n(551011).KL;let i=n(335239).P4;n(764670).f;let o=n(255130).lA;n(559537).Ah;let s=n(559537).qG;n(375484).u,n(375484).j;let l=n(559537).Q_;n(595112).s0,n(947943).hi},109161:(e,r,n)=>{n.d(r,{B9:()=>a,Py:()=>o,hB:()=>i}),n(980849).pS,n(980849).qs,n(980849).ux;let a=n(980849).B9,i=n(489232).hB,o=n(980849).Py},597803:(e,r,n)=>{n.d(r,{hH:()=>a}),(0,n(382902).eU)(!1),n(970040).D,n(906329).Xl,n(906329).GV,n(369231).p3,n(369231).gJ,n(369231).Xu,n(559537)._5,n(927148).zM,n(559537).NC;let a=n(559537).hH;n(304738).C5},285908:(e,r,n)=>{n.d(r,{i:()=>I});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(2446),d=n(413927);n(82433);var u=n(19180),p=n(615233),m=n(178806),_=n(850426),h=n(967688),g=n(418534),f=n(679617),E=n(863270),y=n(594950),b=n(872240),v=n(446951),T=n(74583);let I=(0,v.Ju)(function(e){let r=(0,i.wA)(),n=o.hS(e),{hideCTA:p,team:v,onClose:I}=e,w=!!(0,u.k)().bake_starter_rollout,C=w?(0,h.tx)("figmake.paywall.title_rollout"):(0,h.tx)("figmake.paywall.title"),N=w?(0,h.tx)("figmake.paywall.subtitle_rollout"):(0,h.tx)("figmake.paywall.feature.available_on_full_seats"),L=w?(0,h.tx)("figmake.paywall.footer_credits_rollout_learn_more",{learnMoreLink:a.createElement(_.Ph,{href:A,newTab:!0},(0,h.tx)("figmake.paywall.learn_more"))}):(0,h.tx)("figmake.paywall.footer_credits"),O=[(0,h.tx)("figmake.paywall.feature.prototypes"),(0,h.tx)("figmake.paywall.feature.prompt_design"),(0,h.tx)("figmake.paywall.feature.ai_outputs")];return a.createElement(s.bL,{manager:n,width:408},a.createElement(l.Wk,{className:"x15fnm84 xwxc41k x78zum5 xdt5ytf x1665zp3 x87ps6o"},a.createElement(E.fu,{name:"figmake_paywall_modal",properties:{teamId:v.id}},a.createElement(d.v,{mode:"bake-filebrowser"},a.createElement("div",{className:"xh8yej3 x1n2onr6 xamitd3"},a.createElement(T.J,{className:"x5yr21d xh8yej3 xl1xv1r x8ozjh4 x47corl x9f619 x1ci220x x7xtdkp",src:S})),a.createElement("div",{className:"x78zum5 xdt5ytf x17d4w8g"},a.createElement("p",{className:"x122x9cr xwsyq91 xk50ysn xcgk4ki"},C),a.createElement("div",{className:"x4z9k3i xo1l8bm x1o2sk6j x78zum5"},!w&&a.createElement(g.B,{type:y.ud.EXPERT,size:"24.small",removeBackgroundColor:!0}),a.createElement("div",null,N)),O.map((e,r)=>a.createElement("div",{key:r,className:"x4z9k3i xo1l8bm x1o2sk6j x78zum5"},a.createElement(c.g,{style:{"--color-icon":"var(--color-icon-brand)",minWidth:"24px"}}),a.createElement("div",null,e)))),p||w?null:a.createElement("div",{className:"x78zum5 xdt5ytf x167g77z"},a.createElement(m.e6,{onClick:()=>{r(f.WX({teamId:v.id,openInNewTab:!0,entryPoint:b.TN.FIGMAKE_MODAL})),I()},className:"x78zum5 xl56j7k x6s0dn4 x1vqgdyp x19y5rnk x4z9k3i x1o2sk6j xu5wzci x1tk3asg xk50ysn"},(0,h.tx)("figmake.paywall.upgrade_button")),a.createElement(_.o,{href:A,newTab:!0,className:"x78zum5 xl56j7k x6s0dn4 x1vqgdyp x19y5rnk x4z9k3i x1o2sk6j xv2f06h xt0e3qv x1akne3o x1oo3vh0"},(0,h.tx)("figmake.paywall.learn_more"))),a.createElement("div",{className:"x1j6dyjg x1d3mw78 x1n0bwc9 xamitd3 x2b8uid x1yuz8eb xt0e3qv"},a.createElement("p",null,L))))))}),S=(0,p.ck)("a2151b55cc069625817d2ed13b404e0dd2417f1c"),A="https://help.figma.com/hc/articles/31722591905559-Figma-Make-FAQs"},812051:(e,r,n)=>{n.d(r,{$H:()=>a,G7:()=>s,VW:()=>o,a6:()=>l,sy:()=>i}),n(959110).O,n(984931).e;let a=n(260069).$;n(189377).X,n(830940).ts;let i=n(829120).s,o=n(829120).V,s=n(683834).G,l=n(683834).a;n(745374).Sn},825567:(e,r,n)=>{function a(e){return!!e.find(e=>e.event?.interactionType==="ON_CLICK"&&e.actions?.find(e=>"NAVIGATE"===e.navigationType||"NONE"===e.connectionType||"URL"===e.connectionType))??!1}function i(e){return e.some(e=>e.event?.interactionType==="ON_CLICK"&&e.actions?.length===1&&(e.actions[0]?.connectionType==="URL"||e.actions[0]?.navigationType==="NAVIGATE"||e.actions[0]?.connectionType==="NONE"))}n.d(r,{p4:()=>a,zL:()=>i})},173895:(e,r,n)=>{async function a(e,r,n,o=0,s={},c=!1,d={shouldAdjustFontSize:!1}){if(!("children"in r)||!r.children?.length||"COMPONENT"===r.type)return;let u=s[r.id]?.wasConvertedToVertical,p=l(r),m=c||"INSTANCE"===r.type,_=p&&"paddingLeft"in r?r.paddingLeft:0,h=p&&"paddingRight"in r?r.paddingRight:0,g=0===o?n-_-h:Math.min(n,r.width-_-h);if(!(g<1))for(let a=0;a<r.children.length;a++){let l=r.children[a];l&&await i(e,l,!!u,m,d,s,g,n,o)}}async function i(e,r,n,s,d={shouldAdjustFontSize:!1},u,p,m,_){let{id:h,type:g,width:f}=r,E=u[h];if(!E)return;let y=!s&&("TEXT"===r.type?!r.textStyleId&&d.shouldAdjustFontSize&&f>p:f>p),b=l(r),v=c(r),T=c(r)&&((E.width??0)<=4||(E.height??0)<=4),I=("TEXT"===g||v)&&!T,S=b&&!s;!n&&"layoutSizingVertical"in r&&E.layoutSizingVertical!==r.layoutSizingVertical&&E.layoutSizingVertical&&(r.layoutSizingVertical=E.layoutSizingVertical),T&&"paddingLeft"in r&&(E.height??0)>(E.width??0)&&(r.resize(Math.max(f,1),Math.max(E.width??0,1)),"FILL"===E.layoutSizingVertical&&"layoutSizingHorizontal"in r&&(r.layoutSizingHorizontal="FILL")),y&&function(e,r,n,a,i){let o,s;if(!("layoutPositioning"in e))return;let{type:l,layoutPositioning:c,width:d,height:u,x:p}=e,m="ABSOLUTE"===c;m&&(o=p+d/2,s=p+d);let _="HUG"===r.layoutSizingHorizontal,h="HUG"===r.layoutSizingVertical,g=Math.floor(n),f=Math.floor(u/d*n);if(a&&g>0&&f>0&&("FIXED"===r.layoutSizingHorizontal&&"FIXED"===r.layoutSizingVertical?e.rescale(g/d):e.resize(g,f)),i&&(e.maxWidth=g),h&&(e.layoutSizingVertical="HUG"),_&&("TEXT"===l?e.layoutSizingHorizontal="FIXED":e.layoutSizingHorizontal="HUG"),m&&"constraints"in e){let r=e.constraints?.horizontal;if("CENTER"===r){let r=(o??0)-(e.x+e.width/2);e.x=e.x+r}else if("MAX"===r){let r=(s??0)-(e.x+e.width);e.x=e.x+r}}}(r,E,p,I,S),d.shouldAdjustFontSize&&"TEXT"===r.type&&await o(e,r),(I||S||b)&&await a(e,r,m,_+1,u,s,d)}async function o(e,r){let{characters:n,fontSize:a,lineHeight:i,textStyleId:o}=r;if(a===e.mixed||o)return;let l=Math.ceil(r.width/(.618*a)),c=Math.floor(n.length/l);if(a>=24&&c>=2&&l<10){let n=r.width/6.18;if(Math.abs(n-a)>=8&&n>=24&&(await s(e,r),r.fontSize=Math.round(n),i&&i!==e.mixed&&"PIXELS"===i.unit)){let e=i.value/a;r.lineHeight={value:Math.round(n*e),unit:"PIXELS"}}}}async function s(e,r){let n=[];async function a(r){let a=r&&r.family+"|"+r.style;if(!n.includes(a))return n.push(a),await e.loadFontAsync(r)}if("TEXT"===r.type){let{characters:n,fontName:i}=r;if(i===e.mixed)for(let e of r.getRangeAllFontNames(0,n.length))await a(e);else await a(i)}}function l(e){return"layoutMode"in e&&("VERTICAL"===e.layoutMode||"HORIZONTAL"===e.layoutMode)}function c(e){let{type:r}=e,n=!0;return"children"in e&&e.children?.length&&(n=e.children.every(e=>c(e))),null.includes(r)&&n}n(261357)},123078:(e,r,n)=>{n.d(r,{b:()=>a,zQ:()=>i}),n(848318),n(891627),n(301168),n(553547),n(768618),n(382902),n(536384),n(996202),n(781239),n(156974),n(297638),n(967688),n(324762),n(660865),n(531288),n(601167),n(511067),n(335744),n(764670),n(173895);let a=430,i=1024;function o(e){let{title:r,width:n,disabled:a,onClick:i,icon:o}=e;return React.createElement(ddown.Option,{disabled:a,onClick:a?void 0:i,recordingKey:joinKeys("breakpointDropdownAction",r)},React.createElement("div",{className:cx_DEPRECATED.flex.flexRow.justifyBetween.wFull.alignCenter.$},React.createElement("div",{className:cx_DEPRECATED.flex.flexRow.itemsCenter.gap4.$},o,r),n&&React.createElement("div",{className:cx_DEPRECATED.colorTextMenuTertiary.textBodyMedium.contentCenter.$},n)))}},993583:(e,r,n)=>{n.d(r,{BG:()=>s,Ct:()=>o});var a=n(496912),i=n(810399);async function o(e){return(await l(e)).files}function*s(e,r){for(let n of Array.from(e).sort((e,r)=>!e.nodePosition&&r.nodePosition?-1:e.nodePosition&&!r.nodePosition?1:e.nodePosition||r.nodePosition?(e.nodePosition?.y??0)-(r.nodePosition?.y??0):0)){if(!(0,a.gu)()&&!r)break;yield(async()=>{let e=await l([n]);if((0,a.gu)()||r)return await new Promise(e=>setTimeout(e,0)),e})()}}async function l(e){let r={},n={cacheHits:0,fillAssets:0,generatedSvgs:0,generatedImages:0,flattenedFills:0};return await Promise.all(e.map(async e=>{let a=await i.po.instance.getAssetData(e);if(a.data)switch(r[e.filename]=a.data,a.fromCache&&n.cacheHits++,e.type){case"GENERATED_ASSET":"SVG"===e.exportSetting.format?n.generatedSvgs++:n.generatedImages++;break;case"PAINT_ASSET":n.fillAssets++;break;case"PAINT_FILL_ASSET":n.flattenedFills++}})),{files:r,totals:n}}},551011:(e,r,n)=>{n.d(r,{KL:()=>o});var a=n(382902),i=n(4881);(0,i.Wh)(()=>(0,a.eU)({}));let o=(0,a.eU)({});(0,a.eU)(!1),(0,a.E3)("codeDrawerTab","console"),(0,a.E3)("codeDrawerHeight",300),(0,i.Wh)(()=>(0,a.eU)("")),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(0))},255130:(e,r,n)=>{n.d(r,{lA:()=>s}),n(848318),n(301168),n(186606);var a=n(382902);n(286003),n(493228),n(125761);var i=n(4881),o=n(273664);n(392665),(0,o.H)(""),(0,o.q)(),(0,i.Wh)(()=>(0,a.eU)({})),(0,i.Wh)(()=>(0,a.eU)({}));let s=(0,a.eU)(null)},897659:(e,r,n)=>{n.d(r,{Ho:()=>m,a5:()=>p,lV:()=>u});var a=n(92454),i=n(938982),o=n(998568),s=n(967688),l=n(8578),c=n(101872),d=n(277311);l.B.RATE_LIMIT_EXCEEDED,(0,s.tx)("ai.error.rate_limited"),l.B.CONTENT_LENGTH_LIMIT,(0,s.tx)("ai.error.chat_content_length_limit"),l.B.UNSAFE_OR_HARMFUL_CONTENT,(0,s.tx)("figmake.errors.unsafe_or_harmful"),l.B.GENERIC,(0,s.tx)("figmake.errors.generic"),l.B.OFFLINE,(0,s.tx)("ai.error.offline"),l.B.METER_EXCEEDED,(0,s.tx)("ai.error.generic"),l.B.NOT_IMPLEMENTED,(0,s.tx)("ai.error.not_implemented"),l.B.NETWORK_ERROR,(0,s.tx)("ai.error.network_error"),l.B.UNCLOSED_TAGS_BENIGN,(0,s.tx)("ai.error.generic"),d.T_.ATTACHMENTS_TOO_LARGE,(0,s.tx)("ai.error.attachments_too_large"),d.T_.MAX_CONTENT_LENGTH_EXCEEDED,(0,s.tx)("ai.error.chat_content_length_limit"),d.T_.PROMPT_ENHANCEMENT_FAILED,(0,s.tx)("ai.error.prompt_enhancement_failed");var u=(e=>(e.FIGMAKE="figmake",e.CODE_IN_SITES="code_in_sites",e.AI_ASSISTANT="ai_assistant",e))(u||{}),p=(e=>(e.SEND_MESSAGE="send_message",e.PREVIEW="preview",e.FORMAT="format",e.EDIT_LOCALLY="edit_locally",e.LINT="lint",e.RESIZE_PANEL="resize_panel",e))(p||{});function m(e,r,n,s){let l=e;e instanceof a.G1&&(l=(0,c.Gx)(e)),"reportToSentry"in l&&!l.reportToSentry||((0,o.kF)("chatFeatureType",r),(0,o.kF)("userAction",n),(0,o.$D)(i.e.AI_FOR_PRODUCTION,l,{extra:s}))}},559537:(e,r,n)=>{n.d(r,{Ah:()=>g,NC:()=>I,Q_:()=>y,_5:()=>T,hH:()=>v,qG:()=>f}),n(848318);var a=n(660376),i=n(186606);n(320953),n(768618);var o=n(382902),s=n(476254),l=n(637640);n(461979);var c=n(182317),d=n(454805),u=n(967688),p=n(952039),m=n(552807),_=n(730143),h=n(4881);n(111592);let g=(0,h.Wh)(()=>(0,o.eU)([])),f=((0,h.Wh)(()=>(0,o.eU)([])),(0,o.eU)(e=>e(g).filter(e=>"error"!==e.status).length>=b)),E=(0,o.eU)(e=>{let r=e(_.yV);return!!(r?.canEdit&&r?.canEditCanvas)}),y=(0,o.eU)(null,(e,r)=>{if(e(E)){let n=e(g);r(g,[...n,{status:"pending",uniqueId:(0,c.g)()}])}}),b=3;function v(e){function r(e,n=!0){s.D.dispatch(p.F.enqueue({type:"figmake_attachment_failed_to_load",message:e,timeoutOverride:5e3,error:n,button:{text:(0,u.t)("figmake.attachments.learn_more_button"),action:()=>{l.Ay.unsafeRedirect("https://help.figma.com/hc/articles/31722591905559","_blank")}}}))}switch(e){case i.FDn.MORE_THAN_ONE_HIGHLEVEL_NODE_FOUND:r((0,u.t)("figmake.attachments.attachment_not_in_frame_toast"));break;case i.FDn.INSERTED_NODES_TOO_LARGE:r((0,u.t)("figmake.attachments.attachment_too_large_toast"),!1);break;case i.FDn.MAXIMUM_ATTACHMENTS_EXCEEDED:r((0,u.t)("figmake.attachments.too_many_attachments_toast",{max_num:b}));break;case i.FDn.USER_PASTED_FIGMA_LINK_IN_CHAT:r((0,u.t)("figmake.attachments.cant_read_figma_link_toast"),!1);break;case i.FDn.DESIGN_2_REACT_STATE_GROUP:r((0,u.t)("figmake.attachments.failure_state_group"));break;case i.FDn.DESIGN_2_REACT_OTHER:case i.FDn.OTHER:r((0,u.t)("figmake.attachments.generic_failed_to_load_attachment_toast"));break;default:(0,a.xb)(e)}}function T(e){o.zl.set(g,e=>{let r=e.find(e=>"pending"===e.status);return r?e.filter(e=>e.uniqueId!==r.uniqueId):e}),v(e)}function I(e){if(!e)return null;let r=(0,m._G)(new d.Mi(e.size.x,e.size.y),e.guid,!0,i.tvY.TRANSPARENT);return r?(0,m.Pv)(r.pixels,r.pixelSize):null}},277311:(e,r,n)=>{n.d(r,{T_:()=>i}),n(382902);var a=n(273664),i=(e=>(e.ATTACHMENTS_TOO_LARGE="attachments_too_large",e.MAX_CONTENT_LENGTH_EXCEEDED="max_content_length_exceeded",e.PROMPT_ENHANCEMENT_FAILED="prompt_enhancement_failed",e))(i||{});(0,a.q)()},668940:(e,r,n)=>{n(848318),n(614092),n(162293)},906329:(e,r,n)=>{n.d(r,{GV:()=>l,Xl:()=>s});var a=n(382902),i=n(4881),o=(e=>(e.LOADING="loading",e.AUTH="auth",e.CREATE_PROJECT="create_project",e.CONNECT_TO_EXISTING_PROJECTS="connect_to_existing_projects",e.CONNECTED_PROJECT="connected_project",e.CONNECTING_TO_PROJECT="connecting_to_project",e))(o||{});(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)("loading"));let s=(0,i.Wh)(()=>(0,a.eU)(!1)),l=(0,i.Wh)(()=>(0,a.eU)(!1));var c=(e=>(e.INIT="init",e.DEPLOYING="deploying",e))(c||{});(0,i.Wh)(()=>(0,a.eU)("init")),(0,i.Wh)(()=>(0,a.eU)(!0))},111592:(e,r,n)=>{n(320953),n(579407)},162293:(e,r,n)=>{n(909678),n(186606),n(260986),n(125761)},481694:(e,r,n)=>{n(186606),n(320953),n(768618);var a=n(382902);n(303397);var i=n(4881);n(927148),n(412775),n(444747),(0,i.Wh)(()=>(0,a.eU)({}))},444747:(e,r,n)=>{n(476254),n(182317),n(353231)},316631:(e,r,n)=>{n.d(r,{p:()=>d});var a=n(848318),i=n(320953),o=n(82433),s=n(760683),l=n(182656);let c={input:{borderRadius:"x12oqio5",padding:"xfawy5m",margin:"x1c5nz5h",border:"xoqcfqf",backgroundColor:"xjbqb8w",":focus_outline":"x8mb37l",$$css:!0},fullWidth:{width:"xh8yej3",$$css:!0},fitContent:e=>[{width:"x1bl4301",maxWidth:"x193iq5w",minWidth:"xeuugli",textOverflow:"xlyipyv",overflow:"xb3r6kr",overflowX:null,overflowY:null,whiteSpace:"xuxw1ft",":focus_overflow":"x1vnbn7a",":focus_overflowX":null,":focus_overflowY":null,":focus_textOverflow":"xq30480",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`${e}px`)}],secondaryInput:{color:"x1n0bwc9",":focus_backgroundColor":"x1ge1adn",":focus_color":"x6ox5p5",$$css:!0}};function d({disabled:e,codeFile:r,fullWidth:n=!0,theme:d="default"}){let u=r?.name||"",[p,m]=a.useState(u),_=a.useRef(null),h=(0,l.si)();a.useEffect(()=>{m(u)},[u]);let g=a.useRef(null),[f,E]=a.useState(0);return a.useEffect(()=>{g.current&&E(Math.max(g.current.offsetWidth+1,1))},[p]),a.createElement(a.Fragment,null,!n&&a.createElement("div",{className:"x10l6tqk xlshs6z x193iq5w",ref:g},p),a.createElement("input",{type:"text",value:p,onChange:e=>{m(e.target.value)},onFocus:e=>{e.target.select()},onBlur:()=>{let e=function(e){if(!e)return"";let r=s.x5.find(r=>e.endsWith(r));return(r?e.substring(0,e.length-r.length):e).replace(/[^a-zA-Z0-9]/g,"_")+(r||".tsx")}(p);!e||h(u,e)?m(u):(m(e),r&&i.l7.user("edit-code-file-name",()=>{r.setHasBeenManuallyRenamed(!0),r.name=e}))},onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&(e.preventDefault(),_.current?.blur())},...o.Ay.props(c.input,n?c.fullWidth:[c.fitContent(f)],"secondary"===d&&c.secondaryInput),disabled:e,ref:_}))}},233229:(e,r,n)=>{n(186606),n(672154),n(768618),n(382902),n(702038),n(947943)},947943:(e,r,n)=>{n.d(r,{UM:()=>c,hi:()=>l}),n(848318);var a=n(186606),i=n(382902),o=n(4881),s=n(10082);n(554326),(0,i.eU)(null),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCodeNodeIds),(0,s.SG)(()=>a.Ez5.codeSelection().fullscreenCodeNodeIds),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCodeNodeSize),(0,s.SG)(()=>a.Ez5.codeSelection().fullscreenCodeNodeSize),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCodeNodeBreakpoint),(0,s.SG)(()=>a.Ez5.codeSelection().fullscreenCodeNodeBreakpoint),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCodeNodeClipContents),(0,s.SG)(()=>a.Ez5.codeSelection().fullscreenCodeNodeClipContents),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCodeNodeName),(0,s.SG)(()=>a.Ez5.codeSelection().selectedCanvasNodeIds),(0,s.vv)(()=>a.Ez5?.codeSelection()?.showMainComponent,!1),(0,i.E3)("previouslySelectedInstance",null),(0,s.vv)(()=>a.Ez5?.codeSelection()?.selectedCodeFileNodeId,null),(0,s.vv)(()=>a.Ez5?.codeSelection()?.fullscreenCodeFileNodeId,null);let l=(0,i.E3)("codeWindowPanelConfiguration","chat");function c(){a.Ez5?.closeCodeWindow()}(0,i.E3)("codeFullViewPanelConfiguration","chat"),(0,s.hR)([],{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),(0,i.E3)("scaleLinearly",!0),(0,o.rt)(null)},980849:(e,r,n)=>{let a;n.d(r,{AF:()=>y,Ac:()=>m,B9:()=>S,Nx:()=>E,Py:()=>A,Y3:()=>T,c2:()=>h,pS:()=>p,qs:()=>g,uH:()=>_,ux:()=>f});var i=n(660376);n(19180);var o=n(562127),s=n(786485);n(791455);let l=0,c=new Map,d=new Map,u=new Set;function p({entrypointsOrIdentifierToFileName:e,filesystem:r,tailwind:n,minify:a,shadcn:i=!1,noWrapper:o=!1,jsxDev:s=!1}){return b({type:"BUNDLE",entrypointsOrIdentifierToFileName:e,filesystem:r,tailwind:n,minify:a,shadcn:i,noWrapper:o,jsxDev:s})}function m(e){return b({type:"LINT",fileName:e})}function _(e,r,n){return b({type:"AUTOCOMPLETE",fileName:e,position:r,explicit:n})}function h(e,r){return b({type:"QUICK_INFO",fileName:e,position:r})}function g(e){return b({type:"STATIC_ANALYZE",sourceCode:e})}function f(e,r){return b({type:"REFACTOR",sourceCode:e,operations:r})}function E(e){u.add(e)}function y(e){u.delete(e)}function b(e){let r=l++,s=new Promise((e,n)=>{c.set(r,e),d.set(r,n)});return function e(r){let s=function(){if(!a){let r=Fig.devtoolsWorkerURL;r&&((a=(0,o.x)(r)).onmessage=async r=>{switch(r.data.type){case"INITIALIZE_LS_RESULT":v(r.data.messageId,!0);break;case"FORMAT_RESULT":v(r.data.messageId,r.data.changes);break;case"BUNDLE_RESULT":v(r.data.messageId,r.data.bundle);break;case"UPDATE_FILES_RESULT":v(r.data.messageId,r.data.updatedFiles);break;case"LINT_RESULT":v(r.data.messageId,r.data.diagnostics);break;case"AUTOCOMPLETE_RESULT":v(r.data.messageId,r.data.completions);break;case"QUICK_INFO_RESULT":v(r.data.messageId,r.data.hoverData);break;case"STATIC_ANALYZE_RESULT":v(r.data.messageId,r.data.results);break;case"ERROR_RESULT":!function(e,r){let n=d.get(e);n&&(n(r),c.delete(e),d.delete(e))}(r.data.messageId,Error(r.data.error));break;case"DEPENDENCY_TYPES_STATUS":!function(e){for(let r of u)r(e)}(r.data);break;case"REFACTOR_RESULT":v(r.data.messageId,r.data.updatedSourceCode);break;case"RESOLVE_ASSET":{let n=await I(r.data.assetPath);e({type:"RESOLVE_ASSET_RESULT",messageId:r.data.messageId,contents:n});break}case"GET_SVG":{let{svgForDomId:a}=await Promise.all([n.e(650),n.e(8427),n.e(9880),n.e(7402)]).then(n.bind(n,169880)),i=a(r.data.id);e({type:"GET_SVG_RESULT",messageId:r.data.messageId,svg:i});break}case"GET_CODE_EDITING_SNIPPET_RESULT":v(r.data.messageId,r.data.codeSnippet);break;case"UPDATE_IMAGES_TO_ESM_IMPORTS_RESULT":v(r.data.messageId,r.data.result);break;case"OPTIMIZE_CODE_RESULT":v(r.data.messageId,r.data.reactCode);break;default:(0,i.xb)(r.data)}})}return a}();if(!s)throw Error("Devtools worker not available");s.postMessage(r)}({...e,messageId:r}),s}function v(e,r){let n=c.get(e);n&&(n(r),c.delete(e),d.delete(e))}function T(e){return b({type:"GET_CODE_EDITING_SNIPPET",selectedElementAndParents:e})}async function I(e){if(e.endsWith(".png")){let r=(0,s.F)(),n=e.slice(0,-4),a=r.getImageByHash(n);if(a)return await a.getBytesAsync()}return new Uint8Array}function S(...e){return b({type:"UPDATE_IMAGES_TO_ESM_IMPORTS",args:e})}function A(e,r){return b({type:"OPTIMIZE_CODE_REQUEST",reactCode:e,refactorJsx:r})}},99190:(e,r,n)=>{n.d(r,{i:()=>d});var a=n(100433),i=n(398612);let o=/\b((?:https?):\/\/[^\s/$.?#].[^\s]*)\b/gi,s=a.Pe.define(),l=a.sU.define({create:()=>!1,update(e,r){let n=e;return r.effects.forEach(e=>{e.is(s)&&(n=e.value)}),n}}),c=a.Lz.baseTheme({".cm-hyper-link-underline":{textDecoration:"underline"},".cm-hyper-link-underline-meta-key-down":{cursor:"pointer",backgroundColor:"var(--color-bg-secondary)"}}),d=[l,a.Z9.fromClass(class{constructor(e){this.decorator=new a.dT({regexp:o,decorate:(e,r,n,i,o)=>{let s=i[0],c=`cm-hyper-link-underline${o.state.field(l)?" cm-hyper-link-underline-meta-key-down":""}`;e(r,n,a.NZ.mark({class:c,attributes:{title:`Open ${s} in new tab (cmd-click)`,"aria-label":`Open ${s} in new tab`,role:"link",tabindex:"0","data-href":s},inclusive:!0}))}}),this.decorations=this.decorator.createDeco(e)}update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=this.decorator.updateDeco(e,this.decorations)),e.transactions.some(e=>e.effects.some(e=>e.is(s)))&&(this.decorations=this.decorator.createDeco(e.view))}},{decorations:e=>e.decorations,eventHandlers:{keydown:(e,r)=>("Meta"===e.key&&r.dispatch({effects:[s.of(!0)]}),!1),keyup:(e,r)=>("Meta"===e.key&&r.dispatch({effects:[s.of(!1)]}),!1),click(e,r){let n;if(!e.metaKey)return!1;let a=r.posAtCoords(e);if(!a||(this.decorations.between(a,a,(e,r,a)=>(n=a,!1)),!n))return!1;let o=n.spec.attributes?.["data-href"];return o&&(0,i.FJ)(o,"_blank","noopener"),r.dispatch({selection:{anchor:a}}),!0}}}),c]},407902:(e,r,n)=>{n.d(r,{$5:()=>i});var a=n(660376);function i(e){if(!e.editingInfo.definitelyHasNoStyleAttribute)return!1;switch(e.editingInfo.classNameAttribute.type){case"static":case"not-set":return!0;case"dynamic":case"dynamic-identifier":case"unknown":return!1;default:(0,a.xb)(e.editingInfo.classNameAttribute)}}},667309:(e,r,n)=>{n.d(r,{w:()=>u});var a=n(660376),i=n(354427),o=n(768618),s=n(382902),l=n(989232),c=n(980849),d=n(407902);class u{constructor(){this._unsubscribes=[],this.selectedElementIdAtom=(0,s.eU)(e=>e(this._latestInspectedElementUIEventAtom)?.selectedElement?.figmaFiberId??null),this.selectedElementInfoAtom=(0,s.eU)(e=>e(this._latestInspectedElementUIEventAtom)?.selectedElement??null),this.selectedElementClassToStyles=new Map,this.hasPopoverOpenAtom=(0,s.eU)(!1),this._bundledSourceCode=null,this.jsxCallIDToCharacterOffset=new Map,this.codeFileNodeIdsWithRecentlyAddedImageAssetImports=new Set,this.editedSourceCodeClassNames=null,this._directManipulationEnabledAtom=(0,s.eU)(!1),this._latestInspectedElementUIEventAtom=(0,s.eU)(null),this._editingSnippetAtom=(0,s.eU)({snippet:null,isLoading:!0}),this.flowAnalytics=null,this.selectedElementAnalytics=null,this._unsubscribes.push(s.zl.sub(this.selectedElementIdAtom,()=>{this.selectedElementIdChanged()})),this._unsubscribes.push(s.zl.sub(this._directManipulationEnabledAtom,()=>{this.enabledChanged()}))}destroy(){for(let e of this._unsubscribes)e();this._unsubscribes=[]}get directManipulationEnabledAtom(){return this._directManipulationEnabledAtom}directManipulationEnabled(){return s.zl.get(this._directManipulationEnabledAtom)}get latestInspectedElementUIEvent(){return this._latestInspectedElementUIEventAtom}addClassStyleFromLocalEdit(e,r){this.selectedElementClassToStyles.set(e,r)}get editingSnippetAtom(){return this._editingSnippetAtom}get bundledSourceCode(){return this._bundledSourceCode}async fetchNewCodeSnippet(){let e=s.zl.get(this.selectedElementInfoAtom);if(!e)return s.zl.set(this._editingSnippetAtom,{snippet:null,isLoading:!1}),null;let r=[];for(let n of e.elementAndParentSources){let e=this.translateBundledSourceCodeToCurrentCodeFileOffsets(n);if(!e)return s.zl.set(this._editingSnippetAtom,{snippet:null,isLoading:!1}),null;r.push(e)}s.zl.set(this._editingSnippetAtom,e=>({...e,isLoading:!0}));let n=await (0,c.Y3)(r),a=s.zl.get(this.selectedElementInfoAtom);if((a?.figmaFiberId??null)!==e.figmaFiberId)return null;if(s.zl.set(this._editingSnippetAtom,{snippet:n,isLoading:!1}),a&&this.selectedElementAnalytics){this.selectedElementAnalytics.classNamesEditable=!!n&&(0,d.$5)(n);let e=a.elementAndParentSources[0].sourceCodeJSXCallId;this.selectedElementAnalytics.isEditingSupportedComponent=!!n&&n.sourceCodeJSXCallId!==e}return n}translateBundledSourceCodeToCurrentCodeFileOffsets(e){let{fullFilePath:r,line:n,column:a,sourceCodeJSXCallId:i}=e,o=this.jsxCallToCharacterOffsetInBundleCode({sourceCodeJSXCallId:i,fullFilePath:r,line:n,column:a});if(null===o)return null;let s=this.getCharacterOffsetInCurrentCodeFile(i,r,o);return null===s?null:{sourceCodeJSXCallId:i,widecharPosition:s,fullFilePath:r}}jsxCallToCharacterOffsetInBundleCode({sourceCodeJSXCallId:e,fullFilePath:r,line:n,column:a}){let i=this.jsxCallIDToCharacterOffset.get(e);if(void 0!==i)return i;let o=this.bundledSourceCode?.codeFilesystem?.["file://"+r]??null;if(null===o)return null;let s=0,l=n-1;for(let e of o){if(0===l)break;s++,"\n"===e&&l--}if(0!==l)return null;let c=s+a;return this.jsxCallIDToCharacterOffset.set(e,c),c}getCharacterOffsetInCurrentCodeFile(e,r,n){let a=this.bundledSourceCode?.codeFilesystemMetadata?.["file://"+r];if(!a?.collaborativeSourceCodeVersion||!a?.codeFileNodeGUID)return null;let{collaborativeSourceCodeVersion:i,codeFileNodeGUID:s}=a,l=(0,o.UN)(),c=l.get(s)?.collaborativeSourceCode;return c&&c.adjustWidecharPositionFromPreviousVersion(i,n)||null}processEvent(e,r){if(this._bundledSourceCode=r,"elementChanged"===e.type){if(s.zl.set(this._directManipulationEnabledAtom,!0),s.zl.set(this._latestInspectedElementUIEventAtom,r=>this.memoizeEventPieces(e,r)),e.selectedElement)for(let r of e.selectedElement.classToStyles)this.selectedElementClassToStyles.set(r.className,r)}else"enabledChanged"===e.type?(s.zl.set(this._directManipulationEnabledAtom,e.enabled),e.enabled||s.zl.set(this._latestInspectedElementUIEventAtom,null)):(0,a.xb)(e)}selectedElementIdChanged(){let e=s.zl.get(this.selectedElementIdAtom),r=null!==e;if(this.selectedElementClassToStyles.clear(),s.zl.set(this._editingSnippetAtom,{snippet:null,isLoading:r}),this.editedSourceCodeClassNames=null,r&&this.fetchNewCodeSnippet(),this.selectedElementAnalytics&&(this.fireAnalyticsEventSelectionEnded(this.selectedElementAnalytics,this.getOrCreateFlowAnalytics()),this.selectedElementAnalytics=null),e){let r=s.zl.get(this.selectedElementInfoAtom);r&&(this.selectedElementAnalytics={elementId:e,elementIdForAnalytics:`${e}_${this.getOrCreateFlowAnalytics().flowId}`,elementTagName:r.tagName,isTextContainer:r.isTextContainer,editedProperties:[],imagesSwappedFromSources:[],numberOfGoToSourceClicks:0});let n=this.getOrCreateFlowAnalytics();n.numberOfSelectedElements++}}enabledChanged(){this.directManipulationEnabled()?this.getOrCreateFlowAnalytics():this.flowAnalytics&&(this.selectedElementAnalytics&&(this.fireAnalyticsEventSelectionEnded(this.selectedElementAnalytics,this.flowAnalytics),this.selectedElementAnalytics=null),this.fireAnalyticsEventFlowFinished(this.flowAnalytics),this.flowAnalytics=null)}fireAnalyticsEventSelectionEnded(e,r){l.definedAnalyticsHandler.trackDefinedEvent("sites.point_and_edit.selection_ended",{flowId:r.flowId,elementId:e.elementIdForAnalytics,elementTagName:e.elementTagName,isTextContainer:e.isTextContainer,isEditingSupportedComponent:e.isEditingSupportedComponent,classNamesEditable:e.classNamesEditable,imageEditable:e.imageEditable,editedProperties:e.editedProperties.join(","),numberOfPropertyEdits:e.editedProperties.length,imagesSwappedFromSources:e.imagesSwappedFromSources.join(","),numberOfImageSwaps:e.imagesSwappedFromSources.length,numberOfGoToSourceClicks:e.numberOfGoToSourceClicks})}fireAnalyticsEventPropertyEdited(e,r){let{flowId:n}=this.getOrCreateFlowAnalytics();l.definedAnalyticsHandler.trackDefinedEvent("sites.point_and_edit.property_edited",{flowId:n,elementId:e.elementIdForAnalytics,elementTagName:e.elementId,propertyEdited:r})}fireAnalyticsEventFlowFinished(e){l.definedAnalyticsHandler.trackDefinedEvent("sites.point_and_edit.flow_finished",{flowId:e.flowId,numberOfSelectedElements:e.numberOfSelectedElements,numberOfPropertyEdits:e.numberOfPropertyEdits,numberOfImageSwaps:e.numberOfImageSwaps,numberOfGoToSourceClicks:e.numberOfGoToSourceClicks})}memoizeEventPieces(e,r){return r&&(r.selectedElement&&e.selectedElement&&((0,i.c2)(r.selectedElement.rect,e.selectedElement.rect)&&(e.selectedElement.rect=r.selectedElement.rect),(0,i.c2)(r.selectedElement.elementAndParentSources,e.selectedElement.elementAndParentSources)&&(e.selectedElement.elementAndParentSources=r.selectedElement.elementAndParentSources),(0,i.c2)(r.selectedElement.computedStyles,e.selectedElement.computedStyles)&&(e.selectedElement.computedStyles=r.selectedElement.computedStyles),(0,i.c2)(r.selectedElement,e.selectedElement)&&(e.selectedElement=r.selectedElement)),(0,i.c2)(r.hoveredElement,e.hoveredElement)&&(e.hoveredElement=r.hoveredElement)),e}updateAnalyticsSelectedElementCanEditImage(e,r){this.selectedElementAnalytics&&this.selectedElementAnalytics.elementId===r&&(this.selectedElementAnalytics.imageEditable=e)}updateAnalyticsRecordClassNameEdit(e){this.selectedElementAnalytics&&!this.selectedElementAnalytics.editedProperties.includes(e)&&(this.selectedElementAnalytics.editedProperties.push(e),this.fireAnalyticsEventPropertyEdited(this.selectedElementAnalytics,e),this.getOrCreateFlowAnalytics().numberOfPropertyEdits++)}updateAnalyticsRecordGoToSourceClick(){this.selectedElementAnalytics&&this.selectedElementAnalytics.numberOfGoToSourceClicks++,this.getOrCreateFlowAnalytics().numberOfGoToSourceClicks++}updateAnalyticsRecordImageSwappedFromSource(e){this.selectedElementAnalytics&&this.selectedElementAnalytics.imagesSwappedFromSources.push(e),this.getOrCreateFlowAnalytics().numberOfImageSwaps++}getOrCreateFlowAnalytics(){return this.flowAnalytics||(this.flowAnalytics={flowId:Math.random().toString(36).substring(2),numberOfSelectedElements:0,numberOfPropertyEdits:0,numberOfImageSwaps:0,numberOfGoToSourceClicks:0}),this.flowAnalytics}}},392665:(e,r,n)=>{var a=n(382902),i=n(4881),o=(e=>(e.PREVIEW="preview",e.CODE="code",e))(o||{});(0,i.Wh)(()=>(0,a.eU)("preview"))},182656:(e,r,n)=>{n.d(r,{si:()=>m});var a=n(848318),i=n(301168);n(909678),n(938982),n(186606),n(672154),n(320953),n(768618);var o=n(382902);n(476254),n(998568);var s=n(967688),l=n(952039);n(453370);var c=n(688055);n(286003),n(355755),n(493228),n(125761);var d=n(4881);n(554326),n(614092);var u=n(98157);n(980849),n(595112),n(551011),n(668940),n(233229),n(947943);var p=(e=>(e.BUILD="build",e.RUNTIME="runtime",e))(p||{});function m(){let e=(0,i.wA)(),r=(0,o.md)(c.Mk[u.PW.CODE_FILE].local);return(0,a.useCallback)((n,a)=>{if(a){if(n===a)return!1;if(Object.values(r).map(e=>e.name.toLowerCase()).filter(Boolean).includes(a.toLowerCase()))return e(l.F.enqueue({message:(0,s.t)("sites.code_components.code_file_duplicate_name"),type:"code-file-rename",error:!0})),!0}return!1},[e,r])}(0,d.Wh)(()=>(0,o.eU)([])),(0,o.eU)(null)},489232:(e,r,n)=>{n.d(r,{hB:()=>A});var a=n(750327),i=n(186606),o=n(19180),s=n(382902),l=n(476254),c=n(461979),d=n(292855),u=n(439952),p=n(4881),m=n(993583),_=n(444274),h=n(449831),g=n(975085),f=n(709799),E=n(320486);let y=[],b=[],v=[],T=[],I=[];function S(){let e=2-(y?.length??0)-(b?.length??0);if(e<=0)return;let r=Array.from({length:e},()=>new w({compactDOM:!1}));y.push(...r)}function A({compactDOM:e=!1,isMcpGeneration:r=!1,assets:n,activeBreakpoint:a}={}){if(e){let e=function(){let e=new w({assets:n,compactDOM:!0,isMcpGeneration:r});return e.configure(void 0,a),T.push(e),e};return T.length<4?Promise.resolve(e()):new Promise(r=>{I.push(()=>{r(e())})})}{let e=function(){let e=y.pop();return b.push(e),S(),e.configure(n,a),e};return(S(),y.length>0)?Promise.resolve(e()):new Promise(r=>{v.push(()=>{r(e())})})}}class w{constructor({isMcpGeneration:e,compactDOM:r,assets:n}={}){this.isConsumed=!1,this.isDestroyed=!1,this.sitePreviewIframeManager=new f.fj,this.compactDOM=r??!1,this.assets=n??new Map,this.history=new g.a({url:"/_snapshot"}),r?this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.history,options:{compactDOM:!0,isMcpGeneration:e,independentRootNode:!0,useGuidUrls:!0,skipPreviewUpdateListener:!0,ignorePreviewClosedWhenGeneratingAssets:!0,neverCombineSVGAndPNG:!0,onlyFlattenSVGIfVectorLike:!0,generateFullAssets:!0,labs:{runtimeDebugTools:!1}},imageAssetsHolder:this.assets,skipSetPreviewedNode:!0}):this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.history,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,labs:{runtimeDebugTools:!1}},imageAssetsHolder:this.assets,skipSetPreviewedNode:!0}),this.iframe=document.createElement("iframe"),this.iframe.style.position="absolute",this.iframe.style.pointerEvents="none",this.iframe.style.opacity="0",this.iframe.style.top="0px",this.iframe.style.left="0px",this.iframe.src=s.zl.get(f.jD),this.sitePreviewIframeManager.mountIframe(this.iframe,{compactDOM:r,useReactDev:!0}),document.body.appendChild(this.iframe)}configure(e,r){for(let[n,a]of(this.activeBreakpoint=r,this.iframe.style.width=`${this.activeBreakpoint?.width??1200}px`,this.iframe.style.height=`${this.activeBreakpoint?.height??1080}px`,e??[]))this.assets.set(n,a)}async snapshot({guid:e,code:r,exportName:n,width:a,height:i,minWidth:o,maxWidth:s,minHeight:l,maxHeight:c,props:d,styles:p,instanceSwapProps:_,isDirectManipulationOnCanvasEnabled:h}){try{this.consume();let g=await C(e,_??{}),f=g.bundle,E=g.assetInstructions,y=await (0,m.Ct)(E);f.files=y;let b=await L(),v=[p??"",b].join("\n"),T=new Blob([r],{type:"text/javascript"}),I=new Blob([v],{type:"text/css"}),S=await this.sitesPreview.snapshotDOMToPNG({code:T,exportName:n,width:a,height:i,minWidth:o,maxWidth:s,minHeight:l,maxHeight:c,props:d,activeBreakpoint:this.activeBreakpoint,styles:I,instanceSwapProps:_,referencedWebsiteBundle:f,isDirectManipulationOnCanvasEnabled:h});return{imageSet:await (0,u.UD)(new Uint8Array(await S.png.arrayBuffer()),"image/png","Code Component Preview "+Date.now()),totalWidth:S.totalWidth,totalHeight:S.totalHeight,layoutWidth:S.layoutWidth,layoutHeight:S.layoutHeight,offsetX:S.offsetX,offsetY:S.offsetY,directManipulationSnapshot:S.directManipulationSnapshot}}finally{this.destroy()}}async analyzeCodeFile({code:e}){try{return this.consume(),await this.sitesPreview.analyzeCodeFile({code:e})}finally{this.destroy()}}async serializeHTML(e){if(!this.compactDOM)throw Error("Attempting to serialize HTML from a non-compact DOM sandbox");try{return this.history.restartAt({url:e}),await new Promise((e,r)=>{this.sitesPreview.onReceiveHTML=r=>{r.styles=r.styles.filter(e=>e.id!==E.Mq),e(r)},this.consume()})}finally{this.destroy()}}consume(){if(this.isConsumed)throw Error("Attempting to reuse an offscreen sandbox");this.isConsumed=!0}destroy(){this.isConsumed&&(this.isDestroyed=!0,this.sitesPreview?.unmount(),document.body.removeChild(this.iframe),function(e){if(e.compactDOM){let r=T.indexOf(e);-1!==r&&T.splice(r,1),I.length>0&&I.shift()()}else{let r=b.indexOf(e);-1!==r&&b.splice(r,1),S(),v.length>0&&v.shift()()}}(this))}}async function C(e,r){return await (0,_.LE)(Object.entries(r??{}).filter(([e,r])=>"-1:-1"!==r).map(([e,r])=>r).concat([e]),!1,!1,!0)}let N=(0,p.Wh)(()=>(0,s.eU)({}));async function L(){let e=i.t8O?.getLocalTextStyleFontInfo();if(!e)return"";let r=new Set,n=(0,o.k)().bake_ds_import_plan_enabled;return(await Promise.all(e.filter(e=>{if(e.source!==i.jXp.GOOGLE&&!n)return!1;let a=`${e.id}|${e.family}|${e.style}`;return!r.has(a)&&(r.add(a),!0)}).map(async e=>{if(e.source===i.jXp.GOOGLE){let r=`${h.FF}/${e.id}`;return[(0,a.tb)({family:`${e.family}:${e.style}`,style:e.italic?"italic":"normal",url:r}),(0,a.tb)({family:e.family,style:e.style,url:r})]}{let r=`${e.id}|${e.family}|${e.style}`,n=s.zl.get(N),i=n[r];if(!i){let a=l.D.getState(),o=await (0,d.M1)({source:e.source,id:e.id,postscriptName:e.postscript,fileKey:a.openFile?.key,teamId:a.currentTeamId,orgId:a.currentUserOrgId});i=(0,c.H9)(o),s.zl.set(N,{...n,[r]:i})}return i?[(0,a.lY)({family:e.family,style:e.italic?"italic":"normal",fontBase64:i})]:[]}}))).flat().filter(Boolean).join("\n")}},302404:(e,r,n)=>{n.d(r,{SW:()=>i});var a=n(975776);let i=[/^(https?:\/\/(www\.)?youtube\.com\/.*)/,/^(https?:\/\/(www\.)?youtu\.be\/.*)/];a.ol.YOUTUBE,a.Of.SHOW_UI,a.Of.AUTOPLAY,a.Of.ALLOW_FULLSCREEN,a.w2.URL,a.ol.YOUTUBE,a.Of.SHOW_UI,a.Of.AUTOPLAY,a.Of.ALLOW_FULLSCREEN,a.w2.HTML},304738:(e,r,n)=>{n.d(r,{C5:()=>l}),n(848318);var a=n(301168);n(113867),n(938982),n(382902),n(398612),n(998568);var i=n(453370);n(355755);var o=n(209595);n(175957),n(352355),n(481694),n(947943);var s=n(791455);function l(){let e=(0,o._6)(),r=(0,a.wA)(),n=(0,s.Oc)();return a=>{if("fullscreen"!==e.view||!n)return;let o={...e,figmakeView:a};r((0,i.$T)(o))}}},791455:(e,r,n)=>{n.d(r,{B5:()=>_,Jh:()=>u,Oc:()=>m,YE:()=>p,aI:()=>d});var a=n(848318),i=n(301168);n(186606);var o=n(19180),s=n(476254),l=n(259964),c=n(175957);function d(){return!!(0,o.k)().bake}function u(e){return!!d()&&"fullscreen"===e.view&&e.editorType===l.nT.Figmake}function p(){let e=s.D.getState().selectedView;return!!e&&u(e)}function m(){return(0,i.d4)(e=>u(e.selectedView))}function _(e){let r=m();return(0,a.useMemo)(()=>r&&"fullscreen"===e.view&&e.figmakeView===c.f0.FULLSCREEN_PREVIEW,[r,e])}},779517:(e,r,n)=>{n.d(r,{N:()=>u,n:()=>d});var a=n(848318),i=n(314884),o=n(428762),s=n(307040),l=n(967688),c=n(123078);function d(e){return e<c.b?a.createElement(i.D,null):e>=c.b&&e<c.zQ?a.createElement(o.P,null):a.createElement(s.X,null)}function u(e){return e<c.b?(0,l.t)("sites.breakpoint_bar.add_mobile_breakpoint"):e>=c.b&&e<c.zQ?(0,l.t)("sites.breakpoint_bar.add_tablet_breakpoint"):(0,l.t)("sites.breakpoint_bar.add_desktop_breakpoint")}},745374:(e,r,n)=>{n.d(r,{Sn:()=>c,ou:()=>l});var a=n(301168),i=n(186606),o=n(433166),s=n(461109);let l=[i.Nfd.CODE,i.Nfd.SETTINGS];function c(){let e=(0,a.d4)(e=>(0,o.T)(e.progressBarState.mode)),r=(0,a.d4)(e=>e.mirror.appModel.isReadOnly||e.mirror.appModel.topLevelMode===i.lyf.HISTORY);return{fileLoading:e,readOnlyUser:e?void 0:r}}[...l.map(e=>(0,s.R)(e))]},595112:(e,r,n)=>{n.d(r,{Nl:()=>g,s0:()=>m});var a=n(186606),i=n(19180),o=n(382902),s=n(476254),l=n(453370),c=n(433166),d=n(4881),u=n(231159),p=n(745374);let m=(0,d.Wh)(()=>(0,o.eU)(e=>e(_),(e,r,n)=>{let o=s.D.getState().selectedView;if(!o)return;if(n===a.Nfd.DAKOTA&&!(0,i.k)().dakota){console.error("A sites view was accessed that a user did not have permission to access",n);return}let c={...o,sitesView:n};s.D.dispatch((0,l.$T)(c))})),_=(0,u.bt)(e=>{let r=e.selectedView,n=(0,c.T)(e?.progressBarState?.mode),o=e.mirror.appModel.isReadOnly||e.mirror.appModel.topLevelMode===a.lyf.HISTORY;if(n||!r||!r.sitesView)return a.Nfd.FILE;if(o&&p.ou.includes(r.sitesView)){console.error(`'Requested sites view is not available for read-only users. Redirecting to the file view. Tried to access view=${r.sitesView}`);let e={...r,sitesView:void 0};return s.D.dispatch((0,l.$T)(e)),a.Nfd.FILE}if(r.sitesView===a.Nfd.DAKOTA&&!(0,i.k)().dakota){console.error("A sites view was accessed that a user did not have permission to access",r.sitesView);let e={...r,sitesView:void 0};return s.D.dispatch((0,l.$T)(e)),a.Nfd.FILE}return r.sitesView??a.Nfd.FILE});var h=(e=>(e.FIND="find",e.INSERT="insert",e))(h||{});let g=(0,d.Wh)(()=>(0,o.eU)(void 0));(0,d.Wh)(()=>(0,o.eU)(!1))},139883:(e,r,n)=>{n.d(r,{h0:()=>o});var a=n(382902),i=n(4881);let o=(0,a.eU)(!0);(0,a.eU)(!0),(0,a.eU)(!0),(0,i.Wh)(()=>(0,a.eU)(null))},16184:(e,r,n)=>{n.d(r,{M:()=>b});var a=n(848318),i=n(301168),o=n(162796),s=n(309488),l=n(93275),c=n(2446),d=n(413927);n(82433);var u=n(615233),p=n(178806),m=n(850426),_=n(967688),h=n(679617),g=n(863270),f=n(872240),E=n(446951),y=n(74583);let b=(0,E.Ju)(function(e){let r=(0,i.wA)(),n=o.hS(e),{hideCTA:u,team:E,onClose:b}=e,T=[(0,_.tx)("sites.starter_modal.feature.responsive_breakpoints"),(0,_.tx)("sites.starter_modal.feature.templates"),(0,_.tx)("sites.starter_modal.feature.preset_interactions",{moreLink:(0,_.tx)("sites.starter_modal.feature.custom.learn_more_link")})];return a.createElement(s.bL,{manager:n,width:408},a.createElement(l.Wk,{className:"x15fnm84 xwxc41k x78zum5 xdt5ytf x1665zp3 x87ps6o"},a.createElement(g.fu,{name:"sites_paywall_modal"},a.createElement(d.v,{mode:"seascape"},a.createElement("div",{className:"x1r1mewj xyajsyi x19y5rnk"},a.createElement(y.J,{className:"x5yr21d xh8yej3 xl1xv1r x8ozjh4 x19y5rnk x47corl",src:v})),a.createElement("div",{className:"x78zum5 xdt5ytf x17d4w8g"},a.createElement("p",{className:"x122x9cr xwsyq91 xk50ysn xcgk4ki"},(0,_.tx)("sites.starter_modal.title")),T.map((e,r)=>a.createElement("div",{key:r,className:"x4z9k3i xo1l8bm x1o2sk6j x78zum5"},a.createElement(c.g,{style:{"--color-icon":"var(--color-icon-brand)",minWidth:"24px"}}),a.createElement("div",null,e)))),u?null:a.createElement("div",{className:"x78zum5 xdt5ytf x167g77z"},a.createElement(p.e6,{onClick:()=>{r(h.WX({teamId:E.id,openInNewTab:!0,entryPoint:f.TN.SITES_MODAL})),b()},className:"x78zum5 xl56j7k x6s0dn4 x1vqgdyp x19y5rnk x4z9k3i x1o2sk6j xu5wzci x1tk3asg xk50ysn"},(0,_.tx)("sites.starter_modal.upgrade")),a.createElement(m.o,{href:"https://help.figma.com/hc/articles/31230436657815",newTab:!0,className:"x78zum5 xl56j7k x6s0dn4 x1vqgdyp x19y5rnk x4z9k3i x1o2sk6j xv2f06h xt0e3qv x1akne3o"},(0,_.tx)("sites.starter_modal.learn_more"))),a.createElement("div",{className:"x1j6dyjg x1d3mw78 x1n0bwc9 xamitd3 x2b8uid xafpxmx x1yuz8eb xwya9rg"},a.createElement("p",null,(0,_.tx)("sites.starter_modal.footer")))))))}),v=(0,u.ck)("6d9d43af72441d7be4344d8d679d852139ebfaf7")},560801:(e,r,n)=>{n.d(r,{f:()=>p});var a=n(848318);n(889276);var i=n(382902);n(561258);var o=n(297638),s=n(925085),l=n(260288),c=n(83087);n(820067);var d=n(249673);n(496912),n(718374),n(440046);let u=(0,i.eU)(new Set),p=((0,i.eU)(null),(0,i.eU)(null));(0,i.eU)(e=>{let r=e(u),n=e(p);if(!n)return[];let{nodeByGuidMap:a,currentRoot:i}=n;if(void 0===a[i])return[];let o=[],s=(e,n)=>{let i=a[e];if(!i)return;let l=r.has(e);o.push(function(e,r,n){let a=e.id,i=!e.children||0===e.children.length;return{id:a,name:e.name,indent:n,isExpanded:r,isLeaf:i,leftBadges:"SVG"===e.type||"IMAGE"===e.type?[{type:"info",value:e.type}]:[{type:"type",value:e.type}],primaryId:a,secondaryId:"",longName:e.name,rightBadges:[],memoryFraction:null}}(i,l,n)),l&&i.children.forEach(e=>s(e,n+1))};return s(i,0),o}),a.memo(function({id:e,primaryId:r,name:n,index:i,isSelected:u,style:p,isLeaf:m,isExpanded:_,indent:h,leftBadges:g,onSelect:f,toggleExpanded:E}){return a.createElement(d.Z,{keyboardNavigationPath:[i],isSelected:u,isLeaf:m,isExpanded:_,indent:h,style:p,select:()=>f(e),toggleExpanded:r=>E(e,r)},a.createElement(l.IV,{badges:g}),a.createElement(c.nK,{id:r}),a.createElement("div",{title:n,className:o.s.ellipsis.noWrap.overflowHidden.$},n),a.createElement(s.M,null))})},369231:(e,r,n)=>{n.d(r,{Xu:()=>c,gJ:()=>l,p3:()=>s});var a=n(19180),i=n(730143),o=n(254028);function s(){return(0,o.aI)()&&!!(0,a.k)().bake_sb}function l(){let e=(0,i.q5)();return!!e&&!!e.org&&!!e.org.supabaseDisabled}function c(){let e=s(),r=l();return e&&!r}},855892:(e,r,n)=>{n.d(r,{TT:()=>m,lA:()=>p,rY:()=>h});var a=n(938982),i=n(870567),o=n(410725),s=n(998568),l=n(55116),c=n(677334),d=n(600254),u=n(369231);function p(e){let r=(0,u.p3)(),n=(0,o.Rs)(l.SK$,{fileKey:e},{enabled:!!e&&r});if(!r)return{isLoading:!1,authenticated:!1,expired:!1,org:void 0};if("loading"===n.status)return{isLoading:!0,authenticated:!1,expired:!1,org:void 0};let a=n.data?.supabaseAuth;return a&&a.status===i.tT.Loaded&&a.data?{isLoading:!1,authenticated:a.data.authorized,expired:a.data.expired,org:a.data.org}:{isLoading:!1,authenticated:!1,expired:!1,org:void 0}}c.M4.Query({fetch:async e=>{let{fileKey:r}=e;if(!(0,u.p3)()||!r)return{authenticated:!1,expired:!1,org:void 0};try{let e=await d.R.getFileAuthorized({fileKey:r});return{authenticated:e.data.meta?.authorized,expired:e.data.meta?.expired,org:e.data.meta?.org}}catch(e){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,e),{authenticated:!1,expired:!1,org:void 0}}},key:"isFigMakeFileAuthenticated",gcPolicy:"onUnmount"}),c.M4.Query({fetch:async e=>{let{fileKey:r,projectId:n}=e;if(!(0,u.p3)()||!r||!n)return null;try{return(await d.R.getProject({fileKey:r,projectId:n})).data.meta}catch(e){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,e),null}},key:"getSupabaseProject",gcPolicy:"onUnmount"});let m=c.M4.Query({fetch:async e=>{let{fileKey:r}=e;if(!(0,u.p3)()||!r)return{connectedProject:void 0,expired:!1,ownerId:void 0,isConnectedNonOwner:!1};try{let e=await d.R.getConnection({fileKey:r});return{connectedProject:e.data.meta?.connection,expired:e.data.meta?.expired,ownerId:e.data.meta?.owner_id,isConnectedNonOwner:e.data.meta?.is_connected_non_owner}}catch(e){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,e),{connectedProject:void 0,expired:!1,ownerId:void 0,isConnectedNonOwner:!1}}},key:"getSupabaseConnectedProject",gcPolicy:"onUnmount"}),_=c.M4.Query({fetch:async e=>{let{fileKey:r}=e;if(!(0,u.p3)()||!r)return{existingProjects:[]};try{return{existingProjects:(await d.R.getExistingProjects({fileKey:r})).data.meta}}catch(e){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,e),{existingProjects:[]}}},key:"getSupabaseExistingProjects",gcPolicy:"onUnmount"});c.M4.Query({fetch:async e=>{let{fileKey:r,functionName:n}=e;if(!(0,u.p3)()||!r||!n)return[];try{return(await d.R.getFunctionLogs({fileKey:r,functionName:n})).data.meta.result}catch(e){return(0,s.$D)(a.e.AI_FOR_PRODUCTION,e),[]}},key:"getSupabaseFunctionLogs",refetchIntervalMs:8e3,stalenessPolicy:"never",gcPolicy:"default"});let h=c.M4.Mutation(async(e,{query:r})=>{let{fileKey:n}=e;if((0,u.p3)())return r.mutate(m({fileKey:n}),e=>{e.connectedProject=void 0,e.expired=!1,e.ownerId=void 0,e.isConnectedNonOwner=!1}),await d.R.disconnectFile({fileKey:n})});c.M4.Mutation((e,{query:r})=>{let{fileKey:n}=e;(0,u.p3)()&&(r.mutate(_({fileKey:n}),e=>{e.existingProjects=[]}),c.M4.fetch(_({fileKey:n}),{policy:"networkOnly"}))})},57679:(e,r,n)=>{n.d(r,{Yr:()=>a});let a="/api/integrations/supabase/authorize"},496912:(e,r,n)=>{n.d(r,{Dw:()=>b,_b:()=>A,gu:()=>g,o7:()=>C,q9:()=>T,uP:()=>f});var a=n(660376),i=n(186606),o=n(768618),s=n(19180),l=n(382902),c=n(476254),d=n(522679),u=n(353231),p=n(4881),m=n(421952),_=n(975085),h=n(764670);function g(){return null!==l.zl.get(A)}function f(e){l.zl.set(A,null),(0,s.k)().sts_sprig_targeted_feedback&&e&&l.zl.get(h.K)&&e("track","sites_responsive_set_edit")}let E=(0,p.Wh)(()=>(0,l.eU)(null)),y=(0,l.eU)(!1);var b=(e=>(e[e.Modal=0]="Modal",e[e.Iframe=1]="Iframe",e[e.None=2]="None",e))(b||{});let v=(0,p.Wh)(()=>(0,l.eU)(0)),T=(0,l.eU)(null,(e,r,n)=>{if(2===e(v)&&2!==n&&e(y)){let r=e(E);(0,a.vA)(!!r,"sitePreviewState should not be null"),r.history.refresh(),l.zl.set(y,!1)}r(v,n)});function I(){return i.Ez5?.prototypingEditorState().prototypeViewMode.getCopy()===i.dBj.PRESENT?"fullscreen":"modal"}let S=(0,p.Wh)(()=>(0,l.eU)(I()));(0,p.Wh)(()=>(0,l.eU)(0)),(0,p.Wh)(()=>(0,l.eU)(null));let A=(0,l.eU)(e=>e(E),(e,r,n)=>{var i;let s;let l=e(E);if(!l?.startingNodeId&&n?.startingNodeId&&function(e){if(!e)return;let r=c.D.getState(),n=r.openFile?.key,a=r.user&&r.user.id;(0,u.ds)("sites_view_preview",n,r,{userId:a,mode:e})}(n.mode),n){let e=(0,o.UN)().get(n.startingNodeId);(0,a.vA)(!!e,`Node with id ${n.startingNodeId} not found`);let r=(0,d.lB)(e),i=(0,d.if)(e)&&r?r:e.name;s={...n,history:new _.a({url:i})}}else s=null;null!==s&&r(S,s?.mode??I()),r(E,s),i=s,new Promise(e=>{w=e}),null===i&&w(null)});(0,l.eU)(e=>{let r=e(E)?.history;if(r)return(0,m.sF)(e(r.currentAtom).url).id}),Promise.resolve(null);let w=e=>{};function C(e){w(e)}},709799:(e,r,n)=>{n.d(r,{fj:()=>M,jD:()=>k}),n(848318);var a=n(336690),i=n(660376),o=n(186606),s=n(320953),l=n(768618),c=n(19180),d=n(382902),u=n(989232),p=n(315933),m=n(476254),_=n(615233),h=n(540698),g=n(182317),f=n(984094),E=n(597147),y=n(730143),b=n(4881),v=n(560801),T=n(421952),I=n(993583),S=n(444274),A=n(219209),w=n(667309);n(301168),n(297638),n(967688),n(952039);let C=(0,d.eU)([]);var N=n(791455);n(975085);var L=n(496912),O=n(302267),R=n(857505),P=n(116491);let D=new EventTarget,k=(0,b.Wh)(()=>(0,d.eU)(function(){if(document.baseURI.startsWith("http://localhost:9000/"))return"http://localhost:8045/preview_page_v1.html";let e=`${(0,g.g)()}-figmaiframepreview`;return`https://${e}.${(0,T.nC)()}/preview_page.html`}()));class M{constructor(){this.messageChannel=new MessageChannel,this.sitesPreview=null,this._iframe=null}regenerateMessageChannel(){this.messageChannel=new MessageChannel}createSitesPreview({history:e,onError:r,onIframeReady:n,onCloseRequested:a,onInspectElementEvent:o,skipSetPreviewedNode:s,onConsoleLog:l,options:c,imageAssetsHolder:d}){return(0,i.vA)(!this.sitesPreview,"SitesPreview already exists"),this.sitesPreview=new F({history:e,options:c,onError:r,onIframeReady:n,onCloseRequested:a,onInspectElementEvent:o,skipSetPreviewedNode:s,onConsoleLog:l,messageChannel:this.messageChannel,iframe:this._iframe,imageAssetsHolder:d}),this.sitesPreview}resetSitesPreview(){this.sitesPreview?.unmount(),this.sitesPreview=null}mountIframe(e,r={}){this._iframe=e,this.sitesPreview?.resetIframeInternal(e);let n=(0,c.k)().sts_component_preview_frame&&r.useReactDev?new URL(Fig.codeComponentsPreviewIFrameURL||"/webpack/code_components_preview_iframe.js",document.baseURI).href:new URL(Fig.previewIframeURL||"/webpack/preview_iframe.js",document.baseURI).href;e.onload=()=>{let a=()=>{e.contentWindow.postMessage({type:"iframe-init",initScriptURL:n,previewIframeInitialOptions:function({renderOptions:e}){let r=(0,_.Ay)(),n=(0,c.k)().internal_only_debug_tools?{"X-Figma-Debug-Log-To-Datadog":"1","X-Figma-Debug-User-ID":r.user_data?.id,"X-Figma-Debug-User-Email":r.user_data?.email}:void 0,a=(0,N.YE)()?"figmake":"sites";return{cluster_name:r.cluster_name,release_manifest_git_commit:r.release_manifest_git_commit,user_id:r.user_data?.id,org_id:r.org_id,local_dev_on_cluster:r.local_dev_on_cluster,sites_preview_sentry_dsn:r.sites_preview_sentry_dsn||r.frontend_sentry_dsn,file_key:d.zl.get(y.ze),render_options:JSON.stringify(e),reporting_domain:(0,u.getReportingDomain)(),analyticsHeaders:n,feature_name:a,inTest:(0,h.nl)(),bake_runtime_enabled:(0,c.k)().bake_runtime_enabled??!1}}({renderOptions:r})},new URL(e.src).origin,[this.messageChannel.port2])};try{a()}catch(e){if("DataCloneError"===e.name){this.regenerateMessageChannel(),this.sitesPreview?.setupMessageChannel(this.messageChannel),a(),this.sitesPreview?.sendMessage("setLocation",{historyState:{url:this.sitesPreview.history.current.url}});return}throw e}}}}class F{constructor({history:e,options:r,onIframeReady:n,onCloseRequested:a,onError:i,onConsoleLog:o,skipSetPreviewedNode:s,imageAssetsHolder:l=null,onInspectElementEvent:c,messageChannel:d,iframe:u}){this._iframe=null,this.onIframeReady=null,this.onError=null,this.onConsoleLog=null,this.onReceiveHTML=null,this.onInspectElementEvent=null,this.fetchMaterializedNodePropsPromise=null,this.perfTracker=new R.g(L._b),this.website=null,this.clonedNodes=new Map,this.setupMessageChannel(d),this.history=e,this.onIframeReady=n??null,this.onCloseRequested=a||null,this.onConsoleLog=o||null,this.onError=i||null,this.onInspectElementEvent=c??null,this.imageAssetsHolder=l,this._iframe=u,this.directManipulationEditor=new w.w,this.eventTarget=new EventTarget,this.pageRenderedPromise=null,this.skipSetPreviewedNode=s,r.skipPreviewUpdateListener||(0,E.g)(async e=>{let r=await (0,S.c3)(this.website,e);this.website=r,this.sendMessage("pushPageData",{website:{...this.website,flatteningTypes:void 0}})}),e.addPopStateListener(e=>{this.sendMessage("setLocation",{historyState:e})}),e.addRefreshListener(()=>{this.sendMessage("refresh",{})}),this.options=r,this.sendMessage("setOptions",{options:r});let p=this.showLayoutDebugStyles.bind(this);D.addEventListener("showLayoutDebugStyles",p),this.removeListeners=()=>{D.removeEventListener("showLayoutDebugStyles",p)}}set files(e){for(let[r,n]of(this.website&&(this.website.files=e),Object.entries(e)))this.imageAssetsHolder?.set(r,n)}setupMessageChannel(e){this.messagePort=e.port1,this.sitesMessagePort=new O.J(this.messagePort,{status:e=>{this.eventTarget.dispatchEvent(new CustomEvent("status",{detail:e})),e.isReady&&this.onIframeReady?.(),e.error&&(console.error("[SitesPreview] ready: "+e.isReady+(e.error?", error: "+e.error:"")),(0,P.X)({name:"status_error",message:e.error,origin:"status",reduxState:m.D?.getState()}))},getPage:e=>this.getPage(e.url),pageRendered:e=>{e.url&&this.eventTarget.dispatchEvent(new CustomEvent("pageRendered",{detail:e}))},historyPush:e=>{this.history.push(e.historyState)},historyBack:()=>{this.history.back()},historyForward:()=>{this.history.forward()},requestClose:()=>{this.onCloseRequested?.()},nodeDebugInformation:e=>{let r=d.zl.get(v.f);r&&(r.nodeByGuidMap[e.materializedNode.id]=e.materializedNode,d.zl.set(v.f,{currentRoot:r.currentRoot,nodeByGuidMap:r.nodeByGuidMap}))},runtimeExpansionError:e=>{e.missingKeys.forEach(r=>{u.definedAnalyticsHandler.trackDefinedEvent("sites.runtime_expansion_error",{error:"missingKey",field:r}),e.extraKeys.forEach(e=>{u.definedAnalyticsHandler.trackDefinedEvent("sites.runtime_expansion_error",{error:"extraKey",field:e})}),e.differentKeys.forEach(e=>{u.definedAnalyticsHandler.trackDefinedEvent("sites.runtime_expansion_error",{error:"differingKey",field:e.key})})})},perfEvent:e=>{this.perfTracker.record(e.eventName)},timerEvent:e=>{"timer_start"===e.eventName?p.sn.start(`sites.runtime.${e.timerName}`):"timer_stop"===e.eventName&&p.sn.stop(`sites.runtime.${e.timerName}`)},testingMaterializedNodeProps:e=>{this.eventTarget.dispatchEvent(new CustomEvent("testingMaterializedNodeProps",{detail:e}))},testEventEmitted:e=>{this.eventTarget.dispatchEvent(new CustomEvent("testEventEmitted",{detail:e}))},renderComponentError:e=>{e.error&&this.onError?.(e.error),(0,P.X)({name:e.error.name,message:e.error.message,origin:"render-component-error",reduxState:m.D?.getState()})},handleConsoleLog:e=>{this.onConsoleLog?.(e.type,e.message)},handleReactError:e=>{if((0,h.nl)())throw console.error("Caught error from sites preview",e.error.name,e.error.message),e;(0,P.X)({name:e.error.name,message:e.error.message,origin:"handle-react-error",boundary:e.boundary,reduxState:m.D?.getState()})},focusEvent:async e=>{let r=d.zl.get(L._b);if(!r||"modal"!==r.mode)return;let{type:n}=e;await new Promise(e=>requestAnimationFrame(e)),"focus"===n?d.zl.set(L.q9,L.Dw.Iframe):"blur"===n&&d.zl.set(L.q9,L.Dw.None)},resize:e=>{this.eventTarget.dispatchEvent(new CustomEvent("resize",{detail:e}))},updateMaterializationErrors:e=>{d.zl.set(C,e.errors)},inspectElementEvent:e=>{this.onInspectElementEvent&&this.onInspectElementEvent(e)}})}fetchMaterializedNodeProps(){return this.fetchMaterializedNodePropsPromise?this.fetchMaterializedNodePropsPromise:new Promise(e=>{this.eventTarget.addEventListener("testingMaterializedNodeProps",r=>{e(r.detail),this.fetchMaterializedNodePropsPromise=null},{once:!0}),this.sendMessage("testingRequestMaterializedNodePropsMessage",{method:"testingRequestMaterializedNodePropsMessage"})})}listenForTestEvent(e){return new Promise(r=>{this.eventTarget.addEventListener("testEventEmitted",e=>{r(e.detail)},{once:!0}),this.sendMessage("listenForTestEvent",{eventName:e})})}oncePageRendered(){return this.pageRenderedPromise||(this.pageRenderedPromise=new Promise(e=>{this.eventTarget.addEventListener("pageRendered",r=>{this.pageRenderedPromise=null,e(r.detail)},{once:!0})})),this.pageRenderedPromise}once(e){return new Promise(r=>{this.eventTarget.addEventListener(e,e=>{this.pageRenderedPromise=null,r(e.detail)},{once:!0})})}debugGetMaterializedTree(e,r){return this.sendMessage("materializationDebug",{website:e,url:r})}sendMessage(e,r){return this.sitesMessagePort.sendMessage(e,r)}getPage(e){return new Promise(async(r,n)=>{if("/_snapshot"===e||"/_sandbox"===e)return;let{id:a,cmsSlug:s}=(0,T.sF)(e,this.options.useGuidUrls);if(!a)return n(Error(`Could not load page. Id for url not found ${e}`));this.perfTracker.record("bundle_generation_start");let{bundle:d,assetInstructions:u}=await (0,S.LE)([a],this.options.neverCombineSVGAndPNG,this.options.onlyFlattenSVGIfVectorLike,void 0,this.options.isMcpGeneration);this.perfTracker.record("bundle_generation_stop");let p=null;if((0,c.k)().dakota_preview&&(p=await (0,f.f)(d),await (0,f.v)(d,u,p,a,s),(0,c.k)().internal_only_debug_tools&&console.log("Generated CMS bundle:",p)),this.website=d,this.options.generateFullAssets&&(this.files=await (0,I.Ct)(u)),(0,c.k)().internal_only_debug_tools&&console.log("Generated site result:",{bundle:d,assetInstructions:u}),this.skipSetPreviewedNode||new o.vNG((0,l.UN)().scene).sitesPreviewObserverReference().setPreviewedNodeID(a),r({website:d,cmsBundle:p}),this.perfTracker.record("asset_generation_start",{totalAssetInstructions:u.length}),!this.options.generateFullAssets)for(let e of(0,I.BG)(u,this.options.ignorePreviewClosedWhenGeneratingAssets??!1)){let r=await e;if(r){let{files:e,totals:n}=r;this.perfTracker.updateStats({totalAssetFiles:Object.keys(e).length,totalAssetCacheHits:n.cacheHits,totalFillAssets:n.fillAssets,totalFlattenedFillAssets:n.flattenedFills,totalGeneratedAssetImages:n.generatedImages,totalGeneratedAssetSvgs:n.generatedSvgs}),(0,i.vA)(!!this.website,"Website data not set. Unable to add asset files."),this.files={...this.website.files,...e},setTimeout(()=>{this.sendMessage("pushAssetData",{files:e})},0)}}this.perfTracker.record("asset_generation_stop"),(0,L.o7)(this),this.onReceiveHTML&&setTimeout(async()=>{let e=await this.sendMessage("getHTML",{});this.onReceiveHTML&&this.onReceiveHTML({html:e.html,styles:e.styles,assets:e.assets})},500)})}async debugCompareLayout(e,r,n){let o=this.clonedNodes.get(e);o?.clone||(o=new x((0,T.sF)(e).id),(0,i.vA)(!!o.clone));let s=await (0,a._p)({id:o.clone.guid},r,n,{threshold:1});this.sendMessage("setDebugStyles",{debugStyles:(0,a.q5)(s)}),o.remove()}get iframe(){return this._iframe}resetIframeInternal(e){this._iframe=e}unmount(){(0,E.g)(null),this.removeListeners(),this._iframe=null,this.directManipulationEditor.destroy()}setOptions(e){this.options!==e&&(this.options=e,this.sendMessage("setOptions",{options:e}))}async unsafeEval(e,...r){if(!(0,h.lZ)())throw Error("unsafeEval is only available in interaction tests");"function"==typeof e&&(e=`(${e.toString()}).apply(this, ${JSON.stringify(r)})`);try{return(await this.sendMessage("unsafeEval",{code:e})).data}catch(e){return String(e)}}snapshotDOMToPNG({code:e,exportName:r,width:n,height:a,minWidth:i,maxWidth:o,minHeight:s,maxHeight:l,props:c,styles:d,instanceSwapProps:u,referencedWebsiteBundle:p,withBaseStyles:m,activeBreakpoint:_,isDirectManipulationOnCanvasEnabled:h}){return this.sendMessage("snapshotDOMToPNG",{code:e,exportName:r,width:n,height:a,minWidth:i,maxWidth:o,minHeight:s,maxHeight:l,props:c,styles:d,instanceSwapProps:u,referencedWebsiteBundle:p,withBaseStyles:m,activeBreakpoint:_,isDirectManipulationOnCanvasEnabled:h})}snapshotPage({maxSnapshotWidth:e,maxSnapshotHeight:r}){return this.sendMessage("snapshotPage",{maxSnapshotWidth:e,maxSnapshotHeight:r})}renderComponent({code:e,props:r,nodeId:n,codeExportName:a,styles:i,withBaseStyles:o,instanceSwapPropertyGuids:s,referencedWebsiteBundle:l,activeBreakpoint:c,clipContents:d,allowScaling:u,scaleLinearly:p,width:m,height:_}){return this.sendMessage("renderComponent",{nodeId:n,codeExportName:a,code:e,styles:i,props:r,withBaseStyles:o,instanceSwapPropertyGuids:s,referencedWebsiteBundle:l,activeBreakpoint:c,clipContents:d,allowScaling:u,scaleLinearly:p,width:m,height:_}).finally(()=>{(0,L.o7)(this),(0,h.nl)()&&window.dispatchEvent(new CustomEvent(A.U5))})}analyzeCodeFile({code:e}){return this.sendMessage("analyzeCodeFile",{code:e})}setDirectManipulationEnabled(e){this.sendMessage("setDirectManipulationElementEnabled",{enabled:e}),this.directManipulationEditor.processEvent({type:"enabledChanged",enabled:e},null)}async showLayoutDebugStyles(){let e=this.history.current.url,{elementData:r,windowSize:n}=await this.sendMessage("getElementLayoutData",{});this.debugCompareLayout(e,r,n)}}class x{constructor(e){this.clone=s.l7.system("sites-debug-compare-layout",()=>(0,l.UN)().get((0,l.UN)().get(e).clone())),setTimeout(()=>{this.remove()},1e3)}remove(){this.clone,s.l7.system("sites-debug-compare-layout",()=>{this.clone?.removeSelfAndChildren()}),this.clone=null}}},335239:(e,r,n)=>{n.d(r,{P4:()=>u,PR:()=>d});var a=n(195124),i=n(382902),o=n(159563),s=n(615233),l=n(734235),c=n(546021);function d(e){let r=(0,c.Qf)(e);if(!r)return!1;if(r.childCount>1)return!0;let n=(0,a.O5)(e,r.guid),i=1===n.length?n[0]:void 0;if(i&&i.childCount>2)return!0;for(let e of i?.childrenNodes??[])if(e.childrenNodes&&e.childCount>0)return!0;return!1}let u=(0,i.eU)(!0);(0,i.eU)(null),(0,i.eU)(Math.random()),(0,i.eU)((0,s.Ay)().sites_template_picker_urls??void 0),(0,i.eU)({type:l.k.TEXT,id:"explore",text:"Explore"});let p=(0,i.eU)({});(0,i.eU)(e=>e(p),(e,r,n,a)=>{r(p,(0,o.Ay)(e=>{e[n]=a}))})},486792:(e,r,n)=>{function a(e){return e&&"CANVAS"===e.type?e.childrenNodes.filter(e=>e.isResponsiveSet):[]}function i(e){let r=a(e),n=e?.defaultResponsiveSetId;return r.reverse().sort((e,r)=>n===e.guid?-1:n===r.guid?1:0)}n.d(r,{Vl:()=>a,Yo:()=>i}),n(768618),n(19180)},106066:(e,r,n)=>{n.d(r,{Ve:()=>d,eF:()=>m,qe:()=>u});var a,i=n(660376),o=n(871043),s=n(186606),l=n(553547);function c(e){return e?e.filter(e=>"NONE"!==e.connectionType&&"URL"!==e.connectionType&&!("INTERNAL_NODE"===e.connectionType&&"NAVIGATE"===e.navigationType)&&!e.linkParam):[]}function d(e){let r=a.getClickInteraction(e.prototypeInteractions);(0,i.vA)(!!r,"Expected a click interaction to exist");let n=c(r.actions);if(0===n.length)e.prototypeInteractions=p(e.prototypeInteractions);else{r.actions=n;let a=p(e.prototypeInteractions);e.prototypeInteractions=a.concat(r)}}function u(e,r){let n;if(!(e&&!(e.isResponsiveSet||e.isBreakpointFrame||e.isStateGroup||e.isSection||e.isHTMLWidget)))return;let i=a.getClickInteraction(e.prototypeInteractions),d=a.getMatchingAction(i),u=d?.openUrlInNewTab;if(r?.connectionType==="URL"&&d?.connectionType==="URL"&&(0,o.uy)(r.openUrlInNewTab)&&(0,o.Vq)(u)&&(r.openUrlInNewTab=u),i){let e=c(i.actions);i.actions=e.concat(r?[r]:[]),n=i}else n=function({id:e,action:r}){let n=e??null;if(!e){let e=s.glU.generateUniqueID();if(!e)throw Error("Failed to generate a unique id");n=l.sH(e)}if(!n)throw Error("No interaction ID");return{id:n,event:{interactionType:"ON_CLICK"},stateManagementVersion:1,actions:[r]}}({action:r});let m=p(e.prototypeInteractions);e.prototypeInteractions=m.concat(n)}function p(e){return e.filter(e=>e.event?.interactionType!=="ON_CLICK")}function m(e){return e.filter(e=>!e.actions?.find(e=>"NONE"===e.connectionType))}(e=>{e.getClickInteraction=function(e){return e.find(e=>e.event?.interactionType==="ON_CLICK")??null},e.getMatchingAction=function(e){return e?.actions?.find(e=>"URL"===e.connectionType||"NAVIGATE"===e.navigationType)??null}})(a||(a={}))},764670:(e,r,n)=>{n.d(r,{K:()=>o,f:()=>s});var a=n(382902),i=n(4881);let o=(0,i.Wh)(()=>(0,a.eU)(!1)),s=(0,i.Wh)(()=>(0,a.eU)(!1))},254028:(e,r,n)=>{n.d(r,{Jh:()=>o,Oc:()=>i,YE:()=>s,aI:()=>a});let a=n(791455).aI,i=n(791455).Oc;n(791455).B5;let o=n(791455).Jh,s=n(791455).YE},159016:(e,r,n)=>{n.d(r,{$e:()=>i,Nl:()=>o,s0:()=>a}),n(186606),(0,n(382902).eU)(!1);let a=n(595112).s0;var i=(e=>(e.FIND="find",e.INSERT="insert",e))(i||{});let o=n(595112).Nl;n(139883).h0},976089:(e,r,n)=>{n.d(r,{M:()=>a});let a=n(16184).M;n(812343).V},157777:(e,r,n)=>{n.d(r,{e:()=>a}),n(121964).k;let a=n(121964).e},320486:(e,r,n)=>{n.d(r,{IU:()=>i,Mq:()=>c,PR:()=>l,bC:()=>o,cw:()=>s});var a=n(848318);let i=n(421952).IU;n(486792).Vl,n(486792).Yo;let o=n(567973).b;n(825567).p4,n(825567).zL,n(243074).zb,n(243074).jT,n(243074).K8;let s=n(555649).c;n(444274).UM,n(444274).B3,n(444274).mm,a.createContext(void 0),n(18595).z,n(106066).qe,n(106066).Ve,n(106066).eF;let l=n(335239).PR,c=n(750327).Tl},690298:(e,r,n)=>{var a=(e=>(e.SLIDES_GENERATE_OUTLINE="slides-generate-outline",e))(a||{})},399e3:(e,r,n)=>{n.d(r,{E:()=>a});var a=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(a||{})},689386:(e,r,n)=>{var a=n(304756),i=n(780922);(0,n(944239).n)(async({fileKey:e,selectedGuids:r})=>{let n=function({fileKey:e,selectedGuids:r}){let n=new URL(`/api/file_proxy/file/${e}/canvas`,window.location.origin);return r?.length&&n.searchParams.set("nodes_to_extract",r.join(",")),n.pathname+n.search}({fileKey:e,selectedGuids:r}),[o]=await (0,i.n)(n,(e,r)=>a.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e));return o})},912344:(e,r,n)=>{n.d(r,{d:()=>m});var a=n(848318),i=n(324762),o=n(995218),s=n(696786),l=n(730143),c=n(689134),d=n(944239),u=n(464205),p=n(242583);function m(){let e=(0,o.Em)(),r=(0,s.GS)(),n=(0,l.Kf)(),a=(0,c.y)().transform(e=>e?.canCreateSlidesFileWithReasons.result).unwrapOr(!1);return!!e&&!!r&&!!a&&!!n}(0,d.n)(()=>{let e=m(),r=(0,p.N)(),n=(0,i.Tv)(),o=(0,u.A)();return(0,a.useMemo)(()=>!!e&&(n.length?!!o.length:r.size>0),[e,n.length,r.size,o.length])})},756672:(e,r,n)=>{n.d(r,{sO:()=>o});var a=n(301168);n(540698),n(686464),n(614092),n(927036);var i=n(600122);function o(){return(0,a.d4)(e=>(0,i.P)(e.selectedView))}},288853:(e,r,n)=>{n.d(r,{Jb:()=>_,Wj:()=>h,Xe:()=>g,_Q:()=>f});var a=n(848318),i=n(301168),o=n(186606),s=n(619124),l=n(553547),c=n(768618),d=n(349048),u=n(355755),p=n(554326),m=n(614092);function _(){let e=(0,i.d4)(e=>e.mirror.sceneGraphSelection);return(0,a.useMemo)(()=>{let r=new Set;Object.keys(e).forEach(e=>{let n=(0,c.UN)().get(e),a=n?.containingSlideId;a&&(0,l.fn)((0,l.sH)(a))&&r.add(a)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function h(){let e=(0,u.KH)();return(0,d.k9)(()=>{let r=(0,c.UN)();return e&&r?Object.keys(e).filter(e=>r.get(e)?.isSlideOrTemplate()??!1):[]},[e])}function g(){let e=(0,p.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]).flat();return(0,m.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if((0,s.Y)(r)&&!r.isSkippedSlide)return n}return null},e)}function f(){let e=function(){let e=(0,p.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]).flat(),r=new Set(function(){let e=(0,u.KH)();return(0,d.k9)(()=>{let r=(0,c.UN)(),n=new Set;return Object.keys(e).forEach(e=>{let a=r.get(e)?.containingSlideId;a&&n.add(a)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let a of e)if(r.has(a)&&(n.push(a),r.delete(a)),0===r.size)break;return n}();return(0,m.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if((0,s.Y)(r)&&!r.isSkippedSlide)return n}return null},e)}},242583:(e,r,n)=>{n.d(r,{N:()=>o});var a=n(186606),i=n(554326);function o(){return(0,i.ut)(a.Ez5?.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas,new Set([]))}},300656:(e,r,n)=>{n.d(r,{f:()=>i});var a=n(318147);function i(e){return e===a._Y.SLIDES}},685060:(e,r,n)=>{n.d(r,{$u:()=>E,oY:()=>f,rY:()=>g});var a=n(848318),i=n(301168),o=n(186606),s=n(619124);n(553547);var l=n(382902),c=n(967688),d=n(952039);n(376732);var u=n(554326),p=n(614092),m=n(535884),_=n(379889),h=n(387970);function g(e){return e.reduce((e,r)=>e.concat(r),[])}function f(e,r){if(!o.Ez5||!o.Egt)return"";let n=o.Ez5.singleSlideView().focusedNodeId.getCopy(),{row:a,col:i}=o.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,h.Sz)(a,i,r,!1);if(!s)return"";o.Ez5.singleSlideView()?.isFocusedNodeViewEnabled()&&o.Ez5.singleSlideView().focusNodeInFocusedNodeView(s,!0);let l=e.get(s),c=e.get(n);return l&&c?.sourceLibraryKey&&(l.sourceLibraryKey=c.sourceLibraryKey),o.Egt.replaceSelection([s],!0),s}function E(){let e=(0,i.wA)(),{numSkippedSlides:r,numTotalSlides:n}=function(){let e=(0,u.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]);return(0,p.wA)((e,r)=>r.flat().reduce(({numSkippedSlides:r,numTotalSlides:n},a)=>{let i=e.get(a);return(0,s.Y)(i)&&(n+=1,i.isSkippedSlide&&(r+=1)),{numSkippedSlides:r,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}(),h=(0,_.Xm)(),g=(0,l.md)((0,m.y6)(h)).productComponents.modified.erroneous;return(0,a.useCallback)(a=>{0===n?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_no_slides"),onDismiss:()=>{}})):r>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_skipped_slides"),onDismiss:()=>{}})):g.length>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_variant_error_slides"),onDismiss:()=>{}})):a()},[e,g.length,r,n])}},929083:(e,r,n)=>{n.d(r,{R4:()=>a,w1:()=>i,wl:()=>o});let a="slides-template-preview",i="slides-template-publish-item",o="agreed_to_slides_ai_terms"},894219:(e,r,n)=>{n.d(r,{j:()=>M});var a=n(848318),i=n(19180),o=n(382902),s=n(656329),l=n(781239),c=n(459403),d=n(511067),u=n(125761),p=n(628017),m=n(655771),_=n(553007),h=n(436432),g=n(185753),f=n(465228),E=n(7249),y=n(301168),b=n(658029),v=n(48710),T=n(810503),I=n(967688),S=n(422444),A=n(209595),w=n(656320),C=n(259964),N=n(17753);function L(){let e=(0,A._6)(),r=(0,y.Pj)(),n=(0,y.wA)(),i=(0,w.U2)(e),o=a.useCallback(()=>{if(!i){(0,T.x1)("OpenInSlidesEditorButton","No fileKey found for view",{selectedView:e},{reportAsSentryError:!0});return}let a=(0,w.xS)(r.getState(),{view:"fullscreen",fileKey:i,editorType:C.nT.Slides});n(S.V3({url:a}))},[n,i,e,r]);return a.createElement(b.K,{"aria-label":(0,I.t)("viewer.menu_bar.open_in_figma_slides"),onClick:o,htmlAttributes:{"data-tooltip":(0,I.t)("viewer.menu_bar.open_in_figma_slides"),"data-tooltip-type":N.Ib.TEXT},size:"lg"},a.createElement(v.E,null))}var O=n(323209),R=n(239547),P=n(52161);function D({showComments:e,recordingKey:r,showAuthCommentsModal:n}){let i=(0,y.wA)(),o=(0,u.iZ)(),s=(0,I.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"});return a.createElement(O.f,{onChange:()=>{if(!o){n();return}e?i(P.BZ()):i(P._b())},"aria-label":s,recordingKey:r,onIcon:a.createElement(R.f,null),offIcon:a.createElement(R.f,null),variant:"highlighted",checked:e,htmlAttributes:{"data-tooltip":s,"data-tooltip-type":N.Ib.TEXT,"data-testid":"prototype-header-comments-button"},size:"lg"})}var k=n(454783);function M({file:e,fadeBehavior:r,showProgressBar:n,showComments:y,multiplayer:b,recordingKey:v,shouldShowUI:T,showAuthCommentsModal:I}){let S=(0,u.iZ)(),A=(0,d.Um)(),w=a.useRef(null),C=(0,c.ck)(),N=(0,_.dH)(),O=(0,s.o4)(),R=(0,o.md)(m.jH),P=(0,o.md)(m.M);return a.createElement(f.D,{fileName:e.name,headerRef:w,fadeBehavior:r,showProgressBar:n,shouldShowUI:T||"loading"===P||R,rightColumn:a.createElement(a.Fragment,null,b&&a.createElement(p.Cv,{dropdownShown:A,multiplayer:b,user:S}),a.createElement("div",{className:k.fi},(!N||C)&&a.createElement(a.Fragment,null,a.createElement(D,{showComments:y,recordingKey:l.Pt(v,"comments-button"),showAuthCommentsModal:I}),a.createElement(L,null)),!O&&(0,i.k)().prototype_preload_offline&&a.createElement(g.w,null),a.createElement(E.A,null)),a.createElement(h.o,{headerRef:w,fileKey:e.key}))})}},436432:(e,r,n)=>{n.d(r,{o:()=>g});var a=n(848318),i=n(301168),o=n(637640),s=n(354175),l=n(656329),c=n(103661),d=n(967688),u=n(31898),p=n(180294),m=n(125761),_=n(844462),h=n(139801);function g({headerRef:e,fileKey:r}){let n=(0,m.iZ)(),g=(0,p.sZ)(),f=(0,i.wA)(),[E,y]=a.useState((0,d.t)("viewer.menu_bar.share")),[b,v]=a.useState((0,d.t)("viewer.menu_bar.log_in"));(0,s.wY)(e,({width:e})=>{e>970?(y((0,d.t)("viewer.menu_bar.share_presentation")),v((0,d.t)("viewer.menu_bar.log_in_or_create_account"))):(y((0,d.t)("viewer.menu_bar.share")),v((0,d.t)("viewer.menu_bar.log_in")))});let T=a.useCallback(()=>{f(c.Ts({origin:"prototype_header_nav",redirectUrl:o.Ay.location.pathname})),f(u.to({type:_.x,data:{}}))},[f]),I=!(0,l.C8)()&&!l.rr,S=a.useCallback(()=>I,[I]),A=g?.is_slides_disabled;return a.createElement(h.wh,{user:n,shareText:E,loginText:b,fileKey:r,showDefaultAuthModal:T,sharingDisabled:A,tooltip:A?(0,d.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):void 0,getShouldShowGoogleSSOButton:S,ssoOrigin:h.Tk})}},185753:(e,r,n)=>{n.d(r,{w:()=>c});var a=n(848318),i=n(658029),o=n(958760),s=n(382902),l=n(655771);function c({onPreloadStart:e}){let r=(0,s.md)(l.M),n=(0,l.s7)(e);return"none"===r?a.createElement(i.K,{onClick:n.callback,"aria-label":n.displayText,size:"lg"},a.createElement(o.b,null)):a.createElement(l.ez,{isSlides:!0})}},465228:(e,r,n)=>{n.d(r,{D:()=>A});var a=n(848318),i=n(301168),o=n(658029),s=n(332174),l=n(536384),c=n.n(l),d=n(398612),u=n(637640),p=n(287105),m=n(720522),_=n(302941),h=n(967688),g=n(244534),f=n(92338),E=n(313405),y=n(17753),b=n(553007),v=n(454783),T=n(107247),I=n(688699);let S=(0,f.ck)();function A({fileName:e,headerRef:r,showProgressBar:n,fadeBehavior:o,disableHeaderFade:s,shouldShowUI:l,hideTopLeftIcon:d,headerClassName:u,leftColumn:p,rightColumn:m}){let f=(0,i.wA)(),y=(0,b.dH)(),I=e=>{e.preventDefault(),f((0,E._P)({name:"Prototype Logo Clicked"})),f((0,g.eH)())};return n?a.createElement("div",{className:v.uH},!d&&a.createElement(w,{onClick:I})):a.createElement(_.S.div,{className:c()(v.wx,u,{[v.Wc]:!l&&!s}),ref:r,role:"region","aria-label":(0,h.t)("viewer.menu_bar.accessible_label"),onBlurCapture:o?.handleHeaderOrFooterBlur,onFocusCapture:o?.handleHeaderOrFooterFocus,onMouseMove:o?.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:v.Cd},!d&&a.createElement(w,{onClick:I}),(!y||S)&&a.createElement("h1",{className:c()(d?T.Y_:T.DD),dir:"auto"},e),p),a.createElement("div",{className:v.SP}),a.createElement("div",{className:c()(v.DK,T.DK)},m))}function w({onClick:e}){return d.GZ()&&!S&&null==(0,p.qg)(u.Ay.location.search).fullscreen?a.createElement("a",{"aria-label":(0,h.t)("proto.file_browser"),href:"/",onClick:e,className:v.m_},a.createElement(m.B,{svg:I.A})):a.createElement("div",{className:c()(v.kT)},a.createElement(o.K,{onClick:e,"aria-label":(0,h.t)("proto.file_browser"),htmlAttributes:{"data-tooltip":(0,h.t)("proto.file_browser"),"data-tooltip-type":y.Ib.TEXT},size:"lg"},a.createElement(s.m,null)))}},7249:(e,r,n)=>{n.d(r,{A:()=>_});var a=n(848318),i=n(301168),o=n(658029),s=n(886911),l=n(668272),c=n(398612),d=n(238462),u=n(967688),p=n(364619),m=n(17753);function _(){let e;let r=(0,i.wA)(),n=(0,i.d4)(e=>e.appWindow.inFullScreenMode),_=c.R7.fullscreen?()=>{r((0,p._M)())}:d.lQ,h=c.R7.fullscreen;return e=h?n?(0,u.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),a.createElement(o.K,{"aria-label":e,onClick:_,disabled:!h,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":m.Ib.TEXT},size:"lg"},n?a.createElement(s.p,null):a.createElement(l.O,null))}},79555:(e,r,n)=>{n.d(r,{CK:()=>b,NQ:()=>y,PG:()=>I,Vz:()=>T,o9:()=>S,rR:()=>v});var a=n(848318),i=n(301168),o=n(672154),s=n(186606),l=n(320953),c=n(382902),d=n(206639),u=n(813147),p=n(303397),m=n(489082),_=n(426299),h=n(963307);n(788903);var g=n(355755),f=n(273555);n(447071),n(246164);var E=n(303010);function y(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function b(){let[e]=(0,h.lJ)("imageOverlayPaint");return a.useCallback((r,n)=>{_.Tm.clearCache();let a=[r];e&&(0,m.hS)(e)&&a.push(e),p.Y5.updateSelectionProperties({fillPaints:a},{shouldCommit:n})},[e])}function v(e){let r=(0,c.md)(E.E_);return a.useCallback((n,a)=>{r&&n.color?l.l7.user("slides-edit-theme-color",()=>T(r.varId,r.modeId,n)):e(n,a)},[r,e])}function T(e,r,n){s.CWU?.setVariableValueForMode(e,r,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function I(e){let r=(0,i.wA)(),n=(0,c.md)(E.E_);return a.useCallback(async a=>{let i=await r((0,u.Oe)(a)),c=o.sD.fromString(i);c&&(n?l.l7.user("slides-edit-theme-color",()=>{s.Ez5?.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(n?.varId||"",n?.modeId||"",i)}):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:o.sD.toKiwi(c)},dataType:"ALIAS",resolvedDataType:"COLOR"}},f.zk.YES))},[r,n,e])}function S(e,r){let n=(0,i.wA)(),o=(0,c.md)(E.E_),s=(0,g.eY)();return a.useCallback((a,i)=>{o?n((0,u.nh)({style:a,callback:e=>{let n=s.get(e),a=(0,d.AW)(n?.fills);a&&r&&l.l7.user("slides-edit-theme-color",()=>r(o.varId||"",o.modeId||"",y(a)))}})):n(u.AV({style:a,inheritStyleKeyField:e,fromSearch:i?.fromSearch}))},[n,o,e,s,r])}n(835020),n(927036)},185610:(e,r,n)=>{n.d(r,{qm:()=>_});var a=n(848318);n(301168);var i=n(773511);n(320953),n(553547),n(382902);var o=n(536384),s=n.n(o);n(206639);var l=n(615233),c=n(781239),d=n(540698);n(41830),n(156137),n(401970);var u=n(297638);n(967688),n(244534),n(323201),n(632727),n(489082),n(511067);var p=n(17753);n(52463),n(175393),n(303010),n(835020),n(927036),n(79555),n(941108);var m=n(887835);(0,l.ck)("bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb");function _({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:l,onContextMenu:_,isSelected:h,editIcon:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){let v=(0,c.rf)(b,"contextmenu",e=>{_&&_(e)});return a.createElement("div",{className:s()(m.k8,{[m.wH]:h}),"data-tooltip-type":p.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},g&&f&&y&&a.createElement(i.E,{className:s()(m.Lq,{[m.Sn]:E,[m.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,a=r.left+n,i=r.top+n;Math.pow(e.clientX-a,2)+Math.pow(e.clientY-i,2)<=n*n&&y()}},recordingKey:c.Pt(b,"edit")},g),a.createElement(i.E,{htmlAttributes:{onContextMenu:v},onClick:l,className:u.s.w24.h24.relative.$,recordingKey:b,"aria-label":e},a.createElement("div",{className:m.Le,style:{background:e}}),a.createElement("div",{className:m.f$,style:{opacity:void 0!==r?1-r:0}})))}},941108:(e,r,n)=>{n.d(r,{Ph:()=>J,jP:()=>K});var a=n(848318),i=n(301168),o=n(658029),s=n(93275),l=n(879169),c=n(622518),d=n(773511),u=n(696375),p=n(303476),m=n(186606),_=n(320953);n(82433);var h=n(382902),g=n(443054),f=n(238462),E=n(781239),y=n(156137),b=n(439382),v=n(297638),T=n(967688),I=n(303397),S=n(643841),A=n(959750),w=n(426299),C=n(963307),N=n(788903),L=n(511067),O=n(355755),R=n(555958),P=n(273555),D=n(17753),k=n(764872),M=n(866281),F=n(938448),x=n(666312),U=n(431412),B=n(491892),G=n(50652),V=n(79555),H=n(303010),z=n(887835);let K=M.qo,W={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var j=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(j||{});function Y(){return a.createElement(o.K,{actionOnPointerDown:!0,onClick:m.t2E?.rotateGradient90Degrees,"aria-label":(0,T.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),"data-tooltip-type":D.Ib.TEXT}},a.createElement(u.R,null))}function $({editVar:e}){let r=a.useCallback(()=>_.l7.user("slides-delete-theme-color",()=>{e&&m.CWU?.deleteVariable(e.varId)}),[e]);return e?a.createElement(o.K,{onClick:r,"aria-label":(0,T.t)("slides.properties_panel.color_picker.delete_template_color")},a.createElement(p.i,null)):null}function q({paint:e,onChange:r}){let n=(0,w.bn)(e.type),i=(0,w.x$)(e);return n&&i?a.createElement("div",{className:v.s.flex.pl8.$},a.createElement(Y,null),a.createElement(x.n,{gradientPaint:i,onChange:r})):null}function X({title:e,rightButtons:r}){return a.createElement(s.Y9,null,a.createElement(s.hE,null,e),r&&a.createElement(s.jk,null,a.createElement("div",null,r)))}function J({paint:e,onChange:r,onClose:n,initialPosition:o,enableGradients:d,hideCustomColorPickerFillTypeToggle:u,inheritStyleKeyField:p}){let _=(0,V.PG)(r),g=(0,V.o9)(p,V.Vz),b=["custom_color","library"],[v,S,A]=l.t.useTabs({custom_color:b.includes("custom_color"),library:b.includes("library")},{defaultActive:()=>"custom_color"}),N=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),L=(0,C.kl)("numSelectedByType"),O=a.useMemo(()=>{if(L)return(0,G.aZ)(m.rrT.FILL,L)},[L]),R=(0,h.md)(H.E_),P=a.useMemo(()=>new Set,[]),D=a.useCallback(()=>{N===m.m1T.GRADIENT&&I.Y5.triggerAction("leave-edit-mode"),n()},[N,n]),k="slidesCustomColorPicker",M=(0,w.bn)(e.type),F=R?(0,T.t)("slides.properties_panel.text_style.edit_template_color"):M?(0,T.t)("slides.properties_panel.fill.fill_type_gradient"):(0,T.t)("slides.properties_panel.fill.fill_type_color");return a.createElement(y.k,{name:"slides_custom_color_picker"},a.createElement(c.bL,{defaultPosition:o,onClose:D,recordingKey:k},a.createElement(s.vo,{allowOverflow:!0},a.createElement(X,{title:F,rightButtons:a.createElement($,{editVar:R})}),a.createElement(s.nB,{padding:0},a.createElement("div",{className:"x78zum5 x1qughib xe8ttls x1kgkb76"},a.createElement(l.t.TabStrip,{manager:A},a.createElement(l.t.Tab,{...v.custom_color},(0,T.tx)("fullscreen.properties_panel.color_picker.custom")),a.createElement(l.t.Tab,{...v.library},(0,T.tx)("fullscreen.properties_panel.color_picker.libraries"))),a.createElement(q,{paint:e,onChange:r})),a.createElement(l.t.TabPanel,{...S.custom_color},a.createElement(Z,{paint:e,onPaintChange:r,enableGradients:d,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:u})),a.createElement(l.t.TabPanel,{...S.library},a.createElement(B.Rp,{selectedItem:null,resolvedType:m.rXF.COLOR,disabledVariableIds:P,pickerType:"color-picker",recordingKey:E.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:_,onStyleSelected:g,onClose:f.lQ,variableScopes:O})),a.createElement(ee,{recordingKey:E.Pt(k,"rename")})))))}function Z({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:s}){let l=(0,i.wA)(),c=(0,L.Um)(),d=(0,O.dH)(),u=(0,S.Ep)(),p=(0,g.C)(),_=(0,A.Ku)(),h=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),f=a.useRef(null),[E,y]=a.useState((0,w.bn)(e.type)?1:0),b=(0,w.Ou)(e),v=(0,w.x$)(e),T=(0,O.p8)("currentSelectedGradientStop"),C=(0,w.iC)(b||v||W,T),N=n=>{e.type!==n&&r(w.Tm.initPaint(n,W.color,e,"slides-custom-color-picker"),!(0,w.bn)(e.type)&&(0,w.bn)(n)?P.zk.NO:P.zk.YES)};return a.createElement(a.Fragment,null,!s&&n&&a.createElement(Q,{panelType:E,onPanelTypeChange:e=>{E!==e&&(N(0===e?"SOLID":"GRADIENT_LINEAR"),y(e),1===e?I.Y5.triggerAction("toggle-gradient-edit-mode"):h===m.m1T.GRADIENT&&I.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===E&&v&&a.createElement(k.vL,{name:"Slides color picker",ref:f,handleKeyDown:e=>{v&&(0,F.T_)(e,v,h,T,r)},focusOnMount:!0,forceUpdate:p},a.createElement("div",{className:z.Xr},a.createElement(U.i,{paint:v,onChange:r,currentSelectedGradientStop:T,colorProfile:u,hasFocus:!!f.current&&f.current.hasFocus(),dispatch:l,recordingKey:o}))),a.createElement(M.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:C,colorFormat:_,currentTool:d,dispatch:l,displayType:M.sX.FULL,dropdownShown:c,dropperDisabled:!1,onColorChange:(n,a)=>{(0,F.n8)(n,e,T,r,a)},recordingKey:o}))}function Q({panelType:e,onPanelTypeChange:r,recordingKey:n}){let i=[{type:0,label:(0,T.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,T.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return a.createElement("div",{className:v.s.wFull.py8.bb1.bSolid.colorBorder.$},a.createElement("div",{className:z.X9},i.map(({type:i,label:o,optionRecordingKey:s})=>a.createElement(d.E,{key:i,className:e===i?z.wH:void 0,onClick:()=>r(i),recordingKey:E.Pt(n,s)},o))))}function ee({recordingKey:e}){let r=(0,h.md)(H.E_),n=(0,N.tZ)(r?.varId),[i,o]=a.useState(n??"");a.useEffect(()=>{o(n??"")},[n]);let s=a.useRef(null),l=a.useCallback(()=>{m.CWU?.renameVariable(r?.varId??"",R.rh(i))},[r,i]);return r?a.createElement("div",{className:v.s.px16.py12.flex.itemsCenter.bt1.bSolid.colorBorder.$},a.createElement("span",{className:v.s.colorTextSecondary.textBodyMedium.w64.$},(0,T.tx)("slides.properties_panel.color_picker.rename_color_label")),a.createElement(b.L,{ref:s,className:z.Kv,"data-1p-ignore":!0,delay:50,name:"variableName",onBlur:_.nc.user("slides-rename-theme-color",l),onChange:e=>{o(e.target.value)},onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&s.current?.blur()},placeholder:(0,T.t)("slides.properties_panel.color_picker.rename_color_placeholder"),recordingKey:e,value:i})):null}},74003:(e,r,n)=>{n(848318),n(626912),n(720722),n(903832)},238775:(e,r,n)=>{n.d(r,{it:()=>c});var a=n(848318);n(673786);var i=n(803565);n(186606),n(320953),n(553547);var o=n(206639),s=n(323201),l=n(506428);function c(){let e=(0,l.yM)().colorText;return a.useMemo(()=>{if(e){let r=s.F.parse(e);if(r.a>0)return(0,i.oU)(r)}return(0,i.oU)(o.Uv)},[e])}n(14850),n(714327),n(643726)},387970:(e,r,n)=>{n.d(r,{Sz:()=>c});var a=n(186606),i=n(553547);n(768618);var o=n(382902),s=n(106040),l=n(303397);function c(e,r,n,d=!0){let u=a.AlE?.getMutableActiveDocument();if(!u)return console.error("slide deck utils","No active document"),null;let p=o.zl.get(s.BT),m=p[e]?.[r-1]||p[e-1]?.[(p[e-1]?.length||0)-1]||p[e+1]?.[0]||p[e]?.[0]||p[0]?.[0];if(!a.glU||!a.eLE)return null;let _=m&&(0,i.fn)((0,i.sH)(m))?a.glU.duplicateAsBlankSlide(u,m,e,r,n):a.eLE.createSlideAtCoord(u,e,r,n);return d&&l.Y5.commit(),setTimeout(()=>{a.Ez5&&!a.Ez5.singleSlideView().isFocusedNodeViewEnabled()&&a.Ez5.singleSlideView().panToNodeIfOutsideViewport(_,.6)},0),_}},658700:(e,r,n)=>{n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>m,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>v});var a=n(382902),i=n(4881),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e.OUTLINE_GENERATION="OUTLINE_GENERATION",e))(o||{});let s=(0,i.Wh)(()=>(0,a.eU)(!1));(0,i.Wh)(()=>(0,a.eU)(!1));let l=(0,a.eU)({type:"ALL"});(0,a.eU)("");let c=(0,a.eU)({});(0,a.eU)(e=>e(c),(e,r,n,a)=>{r(c,e=>({...e,[n]:a}))}),(0,a.eU)(null,(e,r)=>{r(c,{})}),(0,a.eU)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],p=[...u,"CLEARED"];function m(e){return u.includes(e)}let _={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:p,PUBLISH_TEMPLATE_ERRORED:p,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:p,UNPUBLISH_ERRORED:p,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:p,PUBLISH_HUB_FILE_ERRORED:p},h=(0,a.eU)({state:"CLEARED"}),g=(0,a.eU)(e=>e(h).state),f=(0,a.eU)(e=>{let r=e(h);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,a.eU)(null,(e,r,n)=>{let a=e(g),{state:i}=n;if(_[a].includes(i))r(h,n);else throw Error(`Invalid state transition from ${a} to ${i}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)(null)),(0,i.Wh)(()=>(0,a.eU)({type:"NONE"})),(0,i.Wh)(()=>(0,a.eU)(""));let v=(0,i.Wh)(()=>(0,a.eU)(!1));(0,i.Wh)(()=>(0,a.eU)(null))},753024:(e,r,n)=>{var a=n(677334),i=n(324747),o=n(71584);a.M4.Query({fetch:async e=>await o.A.getCommunityShelves({shelfType:i.cS.SLIDES_TEMPLATE_MODAL}).then(e=>e.data.meta)}),a.M4.Query({fetch:async e=>await o.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})})},494942:(e,r,n)=>{n.d(r,{Jv:()=>u,YW:()=>d});var a=n(848318);n(301168),n(938982),n(186606),n(320953),n(768618),n(382902),n(317720),n(7376),n(116389),n(82009),n(615233),n(810503);var i=n(6068);n(514019),n(813147),n(63443),n(425835),n(353231),n(303397),n(730143),n(125761),n(543177),n(318147),n(677334),n(614092);var o=n(193743);n(152545),n(475166),n(603592),n(335950),n(208624);var s=n(668777);n(953413),n(690298),n(756672),n(74003),n(658700),n(753024);(0,i.f)(),new o.CN({keys:["name"],ignoreLocation:!0});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e.OUTLINE_TO_DECK="OUTLINE_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}a.createContext(null)},303010:(e,r,n)=>{n.d(r,{Dh:()=>d,Dq:()=>l,E_:()=>u,TN:()=>s,i1:()=>c});var a=n(382902),i=n(4881),o=n(10082);let s=(0,o.hR)([],{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),l=(0,o.hR)({},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,a.Iz)(e=>(0,o.hR)({id:e,data:null},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}));function d(e){let r=c(e);return a.zl.get(r).data}(0,i.Wh)(()=>(0,a.M2)((0,a.eU)({})));let u=(0,i.Wh)(()=>(0,a.eU)(null))},835020:(e,r,n)=>{n.d(r,{UZ:()=>v,Xo:()=>y,k1:()=>I,kO:()=>f,lK:()=>T});var a=n(848318),i=n(871043),o=n(672154),s=n(186606),l=n(553547),c=n(382902);n(206639);var d=n(757685),u=n(231159),p=n(277454);n(285722);var m=n(439796),_=n(537508),h=n(809701),g=n(303010);function f(e){let r=(0,g.i1)(e),{data:n}=(0,c.md)(r);return!n}let E=(0,u.bt)(e=>e.library.local.styles);function y(e){let r=(0,c.md)(E),n=(0,g.i1)(e),{data:i}=(0,c.md)(n);return a.useMemo(()=>{if(!e)return[];if(!(0,h.X_)(e))return console.warn("Expected local theme",e),[];if(!i)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(i?.styleGUIDs||[]);return n.size>0?(0,p.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,d.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,i,r])}function b(e){let r=(0,c.md)(m.Cg),n=(0,g.i1)(e),{data:a}=(0,c.md)(n);return e?(0,h.X_)(e)?a?(a.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}function v(e){let r=(0,g.i1)(e),{data:n}=(0,c.md)(r),i=n?.variableSetID||"";return a.useMemo(()=>o.gr.isValid(i)?s.CWU?.getVariableSetDefaultMode(i)??"":"",[i])}function T(e){let r=function(e){let r=b(e);return(0,a.useMemo)(()=>{let n=s.Ez5?.slideThemeLibBindings().getBlackColorVariableId(e),a=s.Ez5?.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let i of[n,a]){if(e.node_id===i)return -1;if(r.node_id===i)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=v(e),o=(0,h.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU?.getLocalVariableInfo(e):s.CWU?.getSubscribedVariableInfo(e);if(r&&r.modeValues&&r.modeValues[n]&&r.modeValues[n].type===s.Z_n.COLOR&&r.modeValues[n].value){let a={color:r.modeValues[n].value,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,paint:a}}}).filter(i.Vq)}function I(e){let r=(0,g.i1)(e),{data:n}=(0,c.md)(r),i=n?.variableSetID||"",o=v(e),l=b(e),d=(0,_.ay)();return(0,a.useCallback)(e=>{if(i){let r=d(i,l,s.rXF.COLOR,"",s.HS4.SLIDES_THEME);return r&&s.CWU?.setVariableValueForMode(r,o,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:e}),r}return null},[d,i,o,l])}},927036:(e,r,n)=>{n.d(r,{s1:()=>s});var a=n(489082),i=n(963307),o=n(614092);function s(){let e=function(){let[e]=(0,i.lJ)("themeId");return e}(),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,a.hS)(e)?e:r}},809701:(e,r,n)=>{function a(e){return e.length>0&&!e.includes("/")}function i(e){return"TEXT"===e||"GRID"===e}n.d(r,{Rc:()=>i,X_:()=>a})},2801:(e,r,n)=>{n.d(r,{PF:()=>g,fx:()=>f});var a=n(186606),i=n(768618),o=n(382902),s=n(476254);n(63122);var l=n(810503);n(66699),n(967688),n(952039),n(113752);var c=n(565294),d=n(911433),u=n(67308);n(730143);var p=n(318147),m=n(361053),_=n(434289);n(689386),n(756672);var h=n(464205);function g(e,r){!function(e,r){let n=o.zl.get(m.Me),a=s.D.getState(),i=(0,u.Kl)(a);e(c.zE({state:i,from:_.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:p._Y.SLIDES,team:n??void 0,openNewFileIn:_.ai.NEW_TAB,newFileDataLocalStorageKey:r}))}(e,r)}function f(e,r,n=!1){return new Promise((s,c)=>{if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),c();return}let u=(0,i.UN)(),p=u.getDirectlySelectedNodes(),m=[];if(n&&p.length)m=u.getDirectlySelectedNodes().filter(e=>(0,h.o)(e)).map(e=>e.guid);else{let e=a.Ez5?.slideLikeNodeObserverState();e&&(m=[...e.slideLikeNodeIdsOnCanvas.getCopy()])}let _=u.getCurrentPage()?.guid;if(!_||0===m.length){(0,l.x1)("storeFigmaContentForSlidesCreation","No page guid or empty target node ids",{pageGuid:_,targetNodeIds:m},{reportAsSentryError:!0}),c();return}s(o.zl.set(d.u2,{fileKey:e.key,fileVersion:r,pageGuid:_,selectedNodeIds:m}))})}},643726:(e,r,n)=>{n(301168),n(553547),n(768618),n(813009),n(990063),n(489082),n(601167),n(614092),n(700436),n(246164),n(288853),n(685060)},514974:(e,r,n)=>{n.d(r,{KL:()=>a,Z3:()=>_});var a,i=n(848318),o=n(439682),s=n(871043),l=n(186606),c=n(349048),d=n(355755),u=n(614092),p=n(835020),m=n(114165);function _({themeId:e,styleId:r,options:n,onPreviewGenerated:a}){let _=function(e){let r=(0,u.Fk)((e,r)=>{let n;let a=e.get(r);if(!a)return;let i=a.fontSize,o=a.lineHeightOrMixed;if("mixed"===o)n=i;else switch(o.units){case"RAW":n=i*o.value;break;case"PIXELS":n=o.value;break;case"PERCENT":n=i*o.value/100}return{name:a.name,fontFamily:a.fontName.family,fontStyle:a.fontName.style,fontSize:i,lineHeight:n}},e);return(0,c.k9)(()=>r,[r])}(r);!function({themeId:e,styleId:r,styleMetadata:n,options:a,onPreviewGenerated:c}){let u=function({themeId:e,minPreviewHeight:r,maxPreviewHeight:n,defaultPreviewHeight:a}){let o=function(e){let r=(0,p.Xo)(e),n=(0,d.eY)();return i.useMemo(()=>{let e=r.map(e=>n.get(e.node_id)?.fontSize).filter(s.Vq);if(e.length)return{min:Math.min(...e),max:Math.max(...e)}},[r,n])}(e);return i.useMemo(()=>{if(!o)return new class{getPreviewHeight(e){return a}};let{min:e,max:i}=o;return new class{getPreviewHeight(o){let s=function(e,r,n,a,i){if(!(e<r)&&!(e>n)&&!(a>=i)&&!(r>=n))return(e-r)/(n-r)*(i-a)+a}(o,e,i,r,n);return s?Math.round(s):a}}},[o,r,n,a])}({themeId:e,minPreviewHeight:a.minHeight,maxPreviewHeight:a.maxHeight,defaultPreviewHeight:Math.round((a.minHeight+a.maxHeight)/2)}),{fontsAreLoading:_,checkFontsAreLoading:g}=(0,m.B)();i.useEffect(()=>{g()},[n,g]),i.useEffect(()=>{let e=new AbortController;return(async()=>{if(_||!l.glU||!l.vXe)return;if(!n||!l.vXe.fontIsLoaded(n.fontFamily,n.fontStyle)){c(null);return}let i=u.getPreviewHeight(n.fontSize),s=n.name;a.maxWidth&&(s=l.glU.truncateText(n.fontFamily,i,n.lineHeight*(i/n.fontSize),a.maxWidth,1,s));let d=await (0,o.Z)(h({styleId:r,textToRender:s,textColor:a.color,styleMetadata:n}),e.signal);if(!d){c(null);return}c({preview:d,previewHeight:i})})(),()=>e.abort()},[_,r,n,a,u,c])}({themeId:e,styleId:r,styleMetadata:_,options:n,onPreviewGenerated:a})}(e=>{e.MIN_THEME_TEXT_STYLE_PREVIEW_HEIGHT=12,e.MAX_THEME_TEXT_STYLE_PREVIEW_HEIGHT=22})(a||(a={}));let h=async({styleId:e,textToRender:r,textColor:n,styleMetadata:a,maxRetries:i=5,delayMs:o=200})=>{for(let s=1;s<=i;s++){if(!l.Ez5)return null;try{let i=l.Ez5.slideThemeStylePreview().generateTextPreview(e,r,n,a.fontFamily,a.fontStyle);if(i)return i;await new Promise(e=>setTimeout(e,o))}catch(e){console.warn(`Text preview generation attempt ${s} failed:`,e),await new Promise(e=>setTimeout(e,o))}}return console.warn("All retry attempts failed for text preview generation"),null}},809651:(e,r,n)=>{n.d(r,{Q$:()=>g,Us:()=>_,nn:()=>f,zY:()=>h});var a=n(848318),i=n(301168),o=n(536384),s=n.n(o),l=n(170954),c=n(511067),d=n(125761),u=n(73515),p=n(585719),m=n(166178),_=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(_||{}),h=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(h||{});function g(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:i})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,i.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=a.useCallback(({emoji:n,addOnly:a})=>{let i=o(n);i?a||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:i})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return a.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:i}=b(e.feedReactions,r),o=a.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=a.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=a.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:a.createElement("div",{className:m.KD},a.createElement(p.Kb,{reactions:i,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=a.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:i,emojiPicker:o}=T(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?a.createElement("div",{className:m.$S}):a.createElement(a.Fragment,null,a.createElement("div",{ref:r,className:s()(1===e.type?m.D5:m.HL)},a.createElement(p.ny,{onClick:i,selected:n,styleClassName:m.$S,selectedStyleClassName:m.Qi})),n&&o)}let b=(e,r)=>{let n=a.useMemo(()=>{let n={};if(!r)return n;for(let a of e)a.user.id===r.id&&(n[a.emoji]=a.id);return n},[e,r]),i=a.useCallback(e=>n[e],[n]);return{reactionsWithSelected:a.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:a,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!i(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:a.handle,id:a.id,img_url:a.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,i]),existingReactionIdForCurrentUser:i}},v=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,T=(e,r,n,i)=>{let o=(0,c.BK)(v(r,e?.id)),s=a.useCallback(e=>{i(e.shortcodes),o.hide()},[o,i]),l=n.current&&a.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},298944:(e,r,n)=>{n.d(r,{Wu:()=>b});var a=n(848318),i=n(301168),o=n(989232),s=n(304756),l=n(156974),c=n(967688),d=n(31898),u=n(170954),p=n(125761),m=n(138528),_=n(446951),h=n(414607),g=n(271762);let f=(0,_.Ju)(function(e){let r=(0,c.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,c.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),a.createElement(h.Rw,{destructive:!0,confirmationTitle:(0,c.tx)("fig_feed.delete_post"),confirmText:(0,c.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},a.createElement("p",null,r))},"PostConfirmDeleteModal");var E=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(E||{});let y=e=>{let r=(0,p.iZ)(),n=(r&&r.id===e.creator.id)??!1,a=(0,m.D6)("useUserPostPermissions");return{canDelete:n,canAdminDelete:(0,m.j_)(a).unwrapOr(!1)}};function b(e){let r=(0,i.wA)(),n=a.useCallback(()=>r(u.Y9()),[r]),{feedPost:p}=e,{canDelete:m,canAdminDelete:_}=y(p),h=p.comments.length,E=p.reactions.length,b=a.useCallback(()=>{r((0,d.AS)()),s.Ay.del(`/api/feed_posts/post_uuid/${p.publicUuid}`).then(()=>{(0,o.trackEvent)("Team Feed Post Deleted",{postUuid:p.publicUuid}),n()})},[r,p.publicUuid,n]),T=a.useCallback(()=>{r((0,d.to)({type:f,data:{onConfirm:b,numComments:h,numReactions:E},showModalsBeneath:!0}))},[r,b,h,E]);if(!m&&!_)return null;let I=m?(0,c.tx)("fig_feed.delete_ellipsis"):(0,c.tx)("fig_feed.delete_admin_ellipsis"),S=[(!!m||!!_)&&a.createElement(l.c$,{key:"delete",onClick:T},I)];return a.createElement(g.V,{dropdownId:v("user_post_context_menu",e.feedPost.publicUuid,e.source),options:S,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let v=(e,r,n)=>e+r+n},483438:(e,r,n)=>{n.d(r,{i:()=>a});let a=[]},469700:(e,r,n)=>{n.d(r,{n:()=>s});var a=n(848318),i=n(125952),o=n(792700);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return a.createElement(i.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},813790:(e,r,n)=>{n.d(r,{Ac:()=>j,D2:()=>en,bJ:()=>x,dO:()=>Z});var a=n(938982),i=n(186606),o=n(19180),s=n(382902),l=n(476254),c=n(998568),d=n(107712),u=n(204295),p=n(533737),m=n(892887),_=n(654574),h=n(638345),g=n(517776),f=n(748628),E=n(887836),y=n(730143),b=n(4881),v=n(231159),T=n(734974),I=n(664068),S=n(9768),A=n(120015),w=n(514263),C=n(621543),N=n(637417),L=n(600163),O=n(37278),R=n(235356),P=n(102303),D=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(D||{});let k="used_figjam_ai_generate",M="used_figjam_ai_generate_modal_v2",F=(0,s.eU)(!1),x=(0,s.eU)(null,(e,r)=>{r(F,!0),r(Y,void 0)}),U=(0,s.eU)(null,(e,r)=>{r(z),r(F,!1)}),B=(0,s.eU)(!1),G=(0,s.eU)(null,(e,r)=>{r(z),r(B,!0)}),V=(0,v.bt)(()=>(0,C.Uy)()&&!(0,o.k)().figjam_generate_handbrake&&!(0,u.y8)({isDisabledForViewers:!0})),H=(0,s.eU)(e=>e(V)?e(F)?"top-bar":e(S.P)!==A.iH.TRUE||e(B)||e(T.l5)!==I.fD.NONE?"none":"new-file":"none"),z=(0,s.eU)(null,(e,r)=>{r(W),r(Y,void 0)});(0,s.eU)(null,(e,r)=>{let n=e(H);"top-bar"===n?r(U):"new-file"===n&&r(G)});let K=(0,s.eU)(null,(e,r)=>{e(et).abort(),r(et,new AbortController),r(Z,{status:L.c.NONE})});(0,s.eU)(null,(e,r)=>{r(z),r(B,!1),r(F,!1)});let W=(0,s.eU)(null,(e,r)=>{r(K),r(q,void 0),r(X,(0,R.Xi)()),r(J,i.VIy.BASIC)});(0,b.Wh)(()=>(0,s.eU)(!1));let j=(0,s.eU)(""),Y=(0,s.eU)(void 0),$=(0,s.eU)(""),q=(0,s.eU)(void 0),X=(0,s.eU)((0,R.Xi)()),J=(0,s.eU)(i.VIy.BASIC),Z=(0,s.eU)({status:L.c.NONE}),Q=(0,s.eU)(null),ee=(0,b.Wh)(()=>(0,s.eU)(!1));(0,s.eU)(null,(e,r,n)=>{r(ee,n)});let et=(0,s.eU)(new AbortController),er=(0,s.eU)(null,async(e,r,{fileKey:n,prompt:i,stage:s,useCaseCategory:u,useCase:b,subtitle:v,entrypoint:T,fromGenerateModalV2:I,pageNodeId:S})=>{let A;if(null===n&&(0,c.$D)(a.e.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!i)return{status:L.c.NONE};r(N.Mg,e=>e+1),e((0,g.r1)(k)).data||l.D.dispatch(p.b({[k]:!0}));let D=e((0,g.r1)(M)).data;I&&!D&&l.D.dispatch(p.b({[M]:!0})),r(K);let F=e(et).signal,x={orgId:e(h._s),teamId:e(y.As)||null,fileKey:n,userId:e(E.kS)||null,trackingSessionId:(0,d.f)(),fileSeq:e(f.J)?.toString()||null};r(Z,{status:L.c.LOADING}),r(q,u),r(Q,S);let U="board";try{globalThis.AI_DEBUG_XML&&(0,o.k)().figjam_text_to_template_debug?U="board":(U=await (0,w.P)({prompt:i,signal:F,authInfo:x})||"board",(0,o.k)().figjam_text_to_visual_timeline||"timeline"!==U||(U="gantt"),(0,C.$B)()||"mindmap"!==U||(U="board"))}catch(o){let e=(0,P.E$)(o,P.ez.GENERATE);return A={status:L.c.ERROR,type:U,errorMessage:e.message,trace:o.trace},(0,N.h5)(n,0,1,i,"inappropriate",s,T,u,b,v),(0,N.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(a.e.AI_PRODUCTIVITY,o),r(Z,A),A}u&&(u===C.es.FLOW_CHART?U="diagram":u===C.es.GANTT_CHART?U="gantt":u===C.es.ORG_CHART&&(U="orgchart"));let B=e($),G=B&&i.includes(B)?B:void 0;r($,""),(0,N.h5)(n,0,1,i,U,s,T,u,b,v,G);try{A=await (0,m.B)(()=>e(N.LX)||"null",n,_.T.AI,async()=>{let r;if("board"===U){let a=e(h._s);r=await (0,O.L)({prompt:i,signal:F,fileKey:n,authInfo:x,orgId:a})}else{let r=e(J),n=e(X),a=U;await (0,R.$D)({prompt:i,signal:F,visualType:a,authInfo:x,ganttColor:n,ganttType:r})}let a=e(N.LX);return(0,N.lx)(n,0,i,U,a),{status:L.c.SUCCESS,type:U,trace:r}})}catch(e){if(e?.name==="AbortError")A={status:L.c.NONE};else{let r=(0,P.E$)(e,P.ez.GENERATE);A={status:L.c.ERROR,type:U,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(a.e.AI_PRODUCTIVITY,e),(0,N.fK)(n,r.message)}}return r(Z,A),A});(0,s.eU)(null,(e,r,{prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:p})=>{let m=e(y.ze);if(null===m||0===m.length){(0,c.$D)(a.e.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(er,{fileKey:m,prompt:n,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:p})});let en=(0,s.eU)(null,(e,r,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})=>{r(er,{fileKey:n,prompt:a,stage:i,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})})},263418:(e,r,n)=>{n.d(r,{$t:()=>_,HZ:()=>h}),n(848318),n(301168),n(768618);var a=n(382902),i=n(476254),o=n(204295);n(706370);var s=n(565294),l=n(911433),c=n(67308);n(859480);var d=n(730143),u=n(318147),p=n(361053),m=n(434289);function _({dispatch:e,pageGuids:r,fileKey:n,source:o}){let _=a.zl.get(d.ze),h=a.zl.get(p.Me),f=i.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,currentTeam:i,source:o,checkIsViewer:c}){if(!g({checkIsViewer:c}))return;let d=a.zl.set(l.s5,e);n(s.zE({state:r,from:o,editorType:u._Y.SLIDES,team:i,openNewFileIn:m.ai.NEW_TAB,slidesAiNewFileData:{source:o},newFileDataLocalStorageKey:d}))}({figjamData:{figjamFileKey:n||_,pageGuids:r},newFileState:(0,c.Kl)(f),dispatch:e,currentTeam:h,source:o,checkIsViewer:!1})}function h(){return g({checkIsViewer:!1})}function g({checkIsViewer:e}){if((0,o.y8)({isDisabledForViewers:e}))return!1;if(!e){let e=a.zl.get(d.yV),r=!a.zl.get(p.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(399e3),n(350075)},621543:(e,r,n)=>{n.d(r,{Zj:()=>l,i_:()=>c,Dl:()=>d,es:()=>o,$B:()=>m,Uy:()=>p}),n(848318),n(430385);var a=n(19180);n(967688);var i=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(i||{}),o=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(o||{}),s=(e=>(e.IN_EDITOR="in_editor",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(s||{}),l=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(l||{});let c="figjam_ai_diagram",d="figjam_ai_template";var u=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(u||{});function p(){return!!(0,a.k)().figjam_text_to_visual}function m(){return!!(0,a.k)().figjam_text_to_visual_mindmap}},891512:(e,r,n)=>{n.d(r,{OU:()=>s,RA:()=>o}),n(19180),n(656329);var a=n(107712);n(204295),n(180294);var i=n(811085);let o=new Set([i.Ph,i.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,a.f)(),fileSeq:null}}},637417:(e,r,n)=>{n.d(r,{F9:()=>u,LX:()=>_,Mg:()=>h,fK:()=>m,h5:()=>d,lx:()=>p});var a=n(382902),i=n(989232),o=n(295534),s=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(s||{}),l=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(l||{});let c=e=>"board"===e?"template":"visual";function d(e,r,n,s,l,d,u,p,m,_,g){let f="inappropriate"===l?l:c(l);(0,o.qV)(s).then(o=>{(0,i.trackEvent)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:o,outputType:f,oneClickPromptUseCase:m,oneClickPromptUseCaseCategory:p,oneClickPromptUseCaseSubCategory:_,numCharactersInput:s.length,localOutputId:a.zl.get(h),stage:d,uiTriggeredFrom:u,autocompletePromptAddition:g},{forwardToDatadog:!0})})}function u(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,i.trackEvent)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:a.zl.get(h)},{forwardToDatadog:!0})})}function p(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,i.trackEvent)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:a.zl.get(h)},{forwardToDatadog:!0})})}function m(e,r){(0,i.trackEvent)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let _=(0,a.eU)(null),h=(0,a.eU)(0)},441825:(e,r,n)=>{n.d(r,{Vn:()=>c,mr:()=>s});var a=n(476254),i=n(353231),o=n(67308),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=a.D.getState(),s=o.d1(n)?.key??"";(0,i.ds)(e,s,n,{...r})}},350075:(e,r,n)=>{n(301168),n(891512)},102303:(e,r,n)=>{n.d(r,{E$:()=>d,ez:()=>l}),n(848318),n(301168);var a=n(92454),i=n(158239);n(19180),n(637640);var o=n(967688);n(952039);var s=n(944239),l=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(l||{}),c=(e=>(e.Reload="reload",e.Trace="trace",e))(c||{});let d=(0,s.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,o.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_summary.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"sticky-cluster-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_cluster.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"generate-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_generate.unknown_error"),not_implemented:(0,o.t)("ai.error.not_implemented")}},s="generic",l=!0;if(e instanceof i.CortexErrorV2)i.ClientContentLengthLimitExceededError.isInstance(e)||i.ProviderContentLengthLimitExceededError.isInstance(e)?s="content_length_limit_exceeded":i.OutOfDateFeatureVersionError.isInstance(e)?"figjam_summarize"===e.featureName&&(s="figjam_summarize_out_of_date"):i.ProviderRateLimitExceededError.isInstance(e)||i.CortexRateLimitExceededError.isInstance(e)?s="rate_limit_exceeded":i.ProviderServiceIssueError.isInstance(e)||i.ProviderServiceBusyError.isInstance(e)?s="service_issue":i.OfflineError.isInstance(e)?(s="offline",l=!1):i.UnsafeOrHarmfulPromptError.isInstance(e)||i.ProviderUnsafeOrHarmfulContentError.isInstance(e)?(s="unsafe_or_harmful_content",l=!1):i.UnauthorizedError.isInstance(e)?(s="unauthorized",l=!1):i.NotImplementedError.isInstance(e)?(s="not_implemented",l=!1):i.FigjamVisualParsingError.isInstance(e)?(s="generic",l=!1):e?.statusCode===429?s="rate_limit_exceeded":e?.statusCode===403&&(s="ai_opt_out_error");else if(e instanceof a.G1)switch(e.type){case"content_length_limit_exceeded":s="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":s="figjam_summarize_out_of_date";break;case"rate_limit_exceeded":s="rate_limit_exceeded";break;case"service_issue":s="service_issue";break;case"offline":s="offline",l=!1;break;case"unsafe_or_harmful_content":case"figjam_generate_moderation_api_unsafe_or_harmful_content":s="unsafe_or_harmful_content",l=!1;break;case"unauthorized":s="unauthorized",l=!1;break;case"figjam_visual_parsing_error":s="generic",l=!1;break;case"generic":if(429===e.data.status){s="rate_limit_exceeded";break}403===e.data.status&&(s="ai_opt_out_error")}let c=n[r],d=c[s]??c.generic;return{type:s,message:d,reportToSentry:l}})},996775:(e,r,n)=>{n.d(r,{Z9:()=>g,iN:()=>E});var a=n(848318);n(301168);var i=n(186606),o=n(382902),s=n(206639),l=n(716793);n(865114),n(183603);var c=n(329228);n(910314),n(967688),n(952039);var d=n(730143),u=n(55116);n(407638),n(361053);var p=n(537256);n(232977);var m=n(944239);n(371264);var _=n(877994),h=n(418866);let g=(0,m.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:i}=function(e){let r=(0,a.useRef)(),{uuid:n,palette:i}=function(e){let r={uuid:p.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===p.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=i;let o=i?.baseColors.join(":")||"";return(0,a.useMemo)(()=>{let a,i;let c=r.current;return"loaded"===e.status&&c&&n!==p.fJ&&(a=o.split(":").map(e=>(0,s.tK)(e)).filter(f),i=(0,l.Eg)(a)),{loadedPaletteVariations:i,loadedColorPalette:c}},[n,o,e.status])}(r),m=(0,o.Xr)(h.$R);return((0,a.useEffect)(()=>{m(n)},[n,m]),i&&n)?{type:p.Yv.CUSTOM,variations:n,uuid:i.uuid,name:i.name,isTeamDefault:i.isTeamDefault}:{type:p.Yv.DEFAULT,uuid:p.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===p.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,s.DA)(e,r)):(0,_.zS)(e,r)===i.daH.CUSTOM)}},418866:(e,r,n)=>{n.d(r,{$R:()=>c,Jq:()=>s,Uh:()=>d,db:()=>u,rN:()=>l});var a=n(186606),i=n(768618),o=n(382902);n(183603),n(967688),n(952039),n(232977);let s=(0,o.eU)(-1),l=(0,o.eU)([]);(0,o.eU)(!1);let c=(0,o.eU)(void 0);function d(e){switch(e){case a.Z6A.STICKY:return["sticky"];case a.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function u(){let e=o.zl.get(c);if(!e)return;let r=e.base;if(!r)return;let n=(0,i.UN)().getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),a=new Map;n.forEach(e=>{e.immutableFrameShape&&(e=e.immutableFrameShape);let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,i=r||n;i&&(a.has(i)?a.set(i,a.get(i)+1):a.set(i,1))});let s=Array.from(a.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,d=r.sort(()=>Math.random()-.5);s.forEach((e,r)=>{l.set(e[0],d[r%d.length])}),n.forEach(e=>{if(e.immutableFrameShape&&(e=e.immutableFrameShape),e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.eU)(0)},9473:(e,r,n)=>{n.d(r,{UM:()=>l,zW:()=>c});var a=n(848318),i=n(536384),o=n.n(i),s=n(781239);n(720522);let l="dlt_banner_shortcut_button",c=(0,a.memo)((0,a.forwardRef)(function(e,r){let{shortcut:n,onClick:i,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,p=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",i),m=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return a.createElement("button",{ref:r,className:m,onClick:p,"data-element-target":d},n)}))},166758:(e,r,n)=>{var a=n(848318),i=n(301168),o=n(186606),s=n(386700),l=n(9473);(0,a.memo)(function(e){let r=(0,i.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,a.useCallback)(()=>{r?o.glU?.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU?.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return a.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,i.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,a.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return a.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,a.memo)(function(e){let r=(0,a.useRef)(null),n=(0,i.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,a.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},a=e.x+100,i=e.y-200;s.CB.handleShortcutPressWithType({viewportX:a,viewportY:i,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(a,i)},[n]);return a.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},570775:(e,r,n)=>{n.d(r,{hx:()=>i}),n(848318),n(301168),n(536384);var a=n(781239);function i(e){return a.Pt("delightfulToolbar",e)}n(30575),n(489082),n(731560)},371264:(e,r,n)=>{n.d(r,{Dq:()=>u,E$:()=>m,GJ:()=>p,LX:()=>f,T7:()=>g,XQ:()=>l,n6:()=>_,ns:()=>h,qB:()=>c,zQ:()=>d});var a=n(186606),i=n(323201),o=n(877994),s=n(59296);s.uM,s.wv,s.Iz,s.g5;let l=[{type:"SOLID",color:(0,o.BV)(a.daH.BLACK,"base")}],c=s.wv,d=1,u=[{type:"SOLID",color:(0,o.BV)(a.daH.HIGHLIGHT_YELLOW,"highlight")}],p=[{type:"SOLID",color:(0,o.BV)(a.daH.WHITE,"base")}];function m(){return(0,o.BV)(a.Ez5?.uiState().showUI3Colors.getCopy()?a.daH.STICKY_GRAY_UI3:a.daH.STICKY_GRAY_LIGHT,"sticky")}let _=i.F.parse((0,o.Mr)(a.daH.WHITE)),h=i.F.parse((0,o.Mr)(a.daH.GRAY_DARK,"rgba(0,0,0,0)")),g=a.xbm.SOLID,f=(0,o.BV)(a.daH.GRAY,"baseLight")},670288:(e,r,n)=>{n.d(r,{nS:()=>a});let a=n(848318).createContext({state:{draggedTool:void 0,draggedToolCanCancel:!0,shouldFinishClick:!0},dispatch:()=>null})},170911:(e,r,n)=>{n.d(r,{hv:()=>s}),n(382902);var a=n(428941),i=n(355755),o=n(707520);function s(e={}){let{isEnabledForViewers:r}=e,n=(0,i.aV)(),l=(0,o.Td)(),c=(0,a.N)();return n||l&&!r||c&&!r}n(345394),n(854673),n(817710)},921478:(e,r,n)=>{n.d(r,{Hm:()=>f});var a=n(848318),i=n(301168),o=n(186606),s=n(986368),l=n(353231),c=n(459403),d=n(17753),u=n(570775),p=n(218233),m=n(240808),_=n(817697),h=n(62053),g=n(731560);function f(){let e=(0,i.d4)(e=>e.universalInsertModal.showing),r=(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,f=(0,i.wA)(),E=(0,a.useCallback)(()=>{n?(f(s.KE()),o.glU?.triggerActionInUserEditScope("set-tool-default",{source:h.fK})):(o.glU?.triggerActionInUserEditScope("clear-tool",{source:h.fK}),f(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:h.fK},"action_open_universal_insert_modal"))},[f,n]);return a.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:g.Zh},a.createElement(m.I,{toolType:"universal-insert",recordingKey:(0,u.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?g.vy:g.pN,onClick:E,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:h.yl},e=>a.createElement(p.gd,{toolType:"universal-insert",inactiveIcon:a.createElement(_.lV,null),hoveredIcon:a.createElement(_.AZ,null),activeIcon:a.createElement(_.cN,null),isSelected:n,isHovered:e})))}},636256:(e,r,n)=>{n.d(r,{x:()=>H});var a=n(848318),i=n(301168),o=n(382902),s=n(536384),l=n.n(s),c=n(615233),d=n(146968),u=n(297638),p=n(558038),m=n(968602),_=n(459403),h=n(127340),g=n(180294),f=n(125761),E=n(922484),y=n(475166),b=n(17753),v=n(791985),T=n(102382),I=n(345394),S=n(570775),A=n(993766),w=n(921478),C=n(134700),N=n(218233),L=n(542448),O=n(240808),R=n(817697),P=n(62053),D=n(658466),k=n(27776),M=n(694413),F=n(731560);let x=k.YCy,U=[{src:(0,c.ck)("9cd2eb2ff31cb221dce81ca1e67aa51e12b24166"),zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:(0,c.ck)("276fdbb8f6edbcb958f84235ebfc58b63eab0fc2"),zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:(0,c.ck)("94db9cf93e2a26f927d5f1a7f066f8b045985011"),zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:(0,c.ck)("004b50b1460d47029608e9aaa66c09c1c94c6741"),zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function B({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let i=(0,A.ws)(e);return a.createElement("div",{className:l()(F.z6,F.ac,M.JY),style:{width:112*r}},U.map((e,o)=>{var s,l;let c=i[o];return a.createElement(V,{key:c?.id||e.src,zIndex:x+1+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?a.createElement(C.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):a.createElement("img",{src:e.src,alt:"",className:M.VF}))}))}function G({onClick:e,isSelected:r,isHovered:n}){return a.createElement("div",{className:u.s.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},a.createElement(O.I,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":b.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},a.createElement(N.gd,{toolType:"universal-insert-collage",inactiveIcon:a.createElement(R.nX,null),hoveredIcon:a.createElement(R.ZH,null),activeIcon:a.createElement(R.cs,null),isSelected:r,isHovered:n})))}function V({zIndex:e,width:r,height:n,transform:i,isModalOpen:o,children:s}){return a.createElement("div",{className:l()(M.s,{[M.r3]:o}),style:{zIndex:e,width:r,height:n,transform:i}},a.createElement("div",{className:M.f_},s))}function H(e,r){let[n,i]=(0,a.useState)(!1),o=(0,a.useRef)(!1),s=(0,a.useRef)([]);return s.current=r,(0,a.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),i(!0)}())},[e]),n}function z({toolbarIconScale:e}){let r=(0,f.TA)(),[n,s]=(0,a.useState)(!1),l=(0,i.wA)(),c=(0,A.NT)(),d=(0,o.md)(I.c5),u=(0,h.XM)(),b=(0,g.sZ)(),w=(0,i.d4)(e=>e.universalInsertModal.showing),N=(0,m.fG)(),R=(0,D.r)(w,d?.stage!=="FULL"?T.p.MORE:void 0);(0,a.useEffect)(()=>{l(v.cd.fetchTemplatesMetadata({key:y.$A.FigJam,orgId:b?.id})),l(v.cd.fetchWidgetsMetadata({key:y.$A.FigJam})),s(!0)},[l,b?.id]);let k=(0,E.oh)(p.fC),x=(0,E.oh)(v.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:y.$A.FigJam})),U=(0,E.oh)(v.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:y.$A.FigJam})),V=H(!n||k||x||U,c.map(e=>(0,C.h)(e,N,r??void 0)))?c.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",z=u&&d?.stage==="MINIMIZED_ZERO"||d?.stage==="MINIMIZED"||d?.stage==="CUT_OFF";return a.createElement(L.XN,{alignment:"CENTER"},a.createElement(O.I,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-collage"),isSelected:w,className:_.pb.isGoogleClassroomIntegration()?F.vy:F.qs,onClick:R,ariaLabel:"browse-all-resources-dlt",onboardingKey:P.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:w},r=>a.createElement(L.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},a.createElement("div",{className:M.Ge,"data-element-target":P.b,"data-cancel-insertable-resource-drag-and-drop":!0},!z&&a.createElement(B,{key:V,recentItems:c,toolbarIconScale:e,isModalOpen:w}),a.createElement(G,{onClick:R,isSelected:w,isHovered:r})))))}function K(){return a.createElement(L.XN,{alignment:"CENTER"},a.createElement("div",{"data-element-target":P.b,className:M.V6},a.createElement(w.Hm,null)))}(0,a.memo)(function({toolbarIconScale:e}){return a.createElement(d.tH,{fallback:a.createElement(K,null),boundaryKey:"UniversalInsertCollage"},a.createElement(z,{toolbarIconScale:e}))})},334676:(e,r,n)=>{n(848318),n(204295)},218233:(e,r,n)=>{n.d(r,{gd:()=>i});var a=n(848318);function i({toolType:e,inactiveIcon:r,hoveredIcon:n,activeIcon:i,isHovered:o,isSelected:l}){return a.createElement(s,{toolType:e},a.createElement("div",{className:"dlt_hoverable_icon--centeredIcon--clLyK"},l?i:o?n:r))}let o=a.createContext({enableHiding:!1,visibleTool:"text"});function s({toolType:e,children:r}){let n=a.useContext(o);return a.createElement(a.Fragment,null,n.enableHiding&&n.visibleTool!==e?null:r)}},542448:(e,r,n)=>{n.d(r,{XN:()=>s,ti:()=>l});var a=n(848318);n(382902);var i=n(536384),o=n.n(i);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:i,innerRef:s}){return a.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs toolbar--passthruLayout--fN4I1",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:i,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:i,noScaleAnimation:s,isRightEdge:l}){return a.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 toolbar--passthruLayout--fN4I1",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":i,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(66699),n(967688),n(661205),n(259550),n(996775),n(840963),n(782288),n(920274)},240808:(e,r,n)=>{n.d(r,{I:()=>E});var a=n(848318),i=n(536384),o=n.n(i),s=n(857607),l=n(781239),c=n(979890),d=n(675257),u=n(670288),p=n(170911),m=n(208902),_=n(761070),h=n(528206),g=n(731560);let f=(0,a.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:i,tooltipOffset:m={offsetX:0,offsetY:12},tooltipLocation:f="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:v=h.J,isDisabled:T=!1,clickOnMouseDown:I=!1,inTabOrder:S=!0,ariaLabel:A,isHovered:w,isEnabledForViewers:C=!1,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:k,...M},F)=>{let{state:x,dispatch:U}=(0,a.useContext)(u.nS),B=(0,p.hv)({isEnabledForViewers:C})||T,G=x.draggedTool===e,V=A||M["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!I&&n(e)};return a.createElement(c.D8,{className:o()(g.Zh,g.$y,{[g.ll]:B}),"data-fullscreen-intercept":!0,"data-onboarding-key":b,"data-testid":k,"data-tooltip":M["data-tooltip"],"data-tooltip-bottom-flip-margin":M["data-tooltip-bottom-flip-margin"],"data-tooltip-offset-x":M["data-tooltip-offset-x"]??m.offsetX,"data-tooltip-offset-y":M["data-tooltip-offset-y"]??m.offsetY,"data-tooltip-show-above":"above"===f||void 0,"data-tooltip-show-below":"below"===f||void 0,"data-tooltip-show-left":"left"===f||void 0,"data-tooltip-submenu-open":D,"data-tooltip-type":G?null:M["data-tooltip-type"],onClick:B?void 0:H,onMouseEnter:N,onMouseLeave:O,onMouseMove:L,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),I?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onTouchEnd:P,onTouchStart:R,recordingKey:y},a.createElement(v,{className:E,isHovering:w,isSelected:r,disabled:B,isDragging:G,"aria-hidden":!0},i),a.createElement(c.D8,{"aria-disabled":B,"aria-hidden":!S,"aria-label":V&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(V):void 0,className:o()(g.yG,g.dR,{[g.ll]:B,[g.vu]:r,[g.Lt]:"select"===e,[g.sD]:"hand"===e}),"data-fullscreen-intercept":!0,forwardedRef:F,onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!I&&n(e)},role:S?"button":void 0,tabIndex:S&&!B?0:-1}))}),E=(0,a.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},i)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:p}=(0,m.W)(n.onClick,r),_="function"==typeof e?e(o,s):e;return a.createElement(f,{...n,ref:i,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:p},_)})},840963:(e,r,n)=>{var a=n(136169);a.lLk.id,a.kp0.id,a.Njd.id,a.MJs.id,a.zoI.id,a.wRI.id,a.Kze.id,a.Wd_.id},597933:(e,r,n)=>{n.d(r,{B:()=>s});var a=n(186606),i=n(382902);let o=a.cxo.SELECTION,s=(0,i.eU)(o)},854673:(e,r,n)=>{n.d(r,{Vi:()=>o});var a=n(301168),i=n(186606);function o(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===i.NLJ.COMMENTS)}n(19180),n(970981),n(564510)},521174:(e,r,n)=>{n.d(r,{qV:()=>l,ym:()=>s});var a=n(353231);let i={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,i)=>{(0,a.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},i)},s=(e,r)=>o(i.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(i.changes_volume,e,{volume:r})},878624:(e,r,n)=>{n.d(r,{$_:()=>c,I8:()=>d,P0:()=>i,_s:()=>o,c4:()=>l,om:()=>u});var a=n(716748);function i(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await a.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:a}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:a||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},438673:(e,r,n)=>{n.d(r,{FR:()=>s,P$:()=>i,YI:()=>o});var a=n(7148);function i(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function o(e){return e<10?`0${e}`:`${e}`}function s(){let e=(0,a.F4)();return!!e?.shouldShowTimerOnTheLeft}},48226:(e,r,n)=>{var a=n(382902),i=n(7376),o=n(231159),s=n(438673);function l(){let e=(0,i.DN)().get("last-timer-set-time")||180;return{seconds:(0,s.YI)(e%60),minutes:(0,s.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,a.um)(l(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let a=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),i=1===a.length?"0"+a:a;return{...n,minutes:i};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return l();default:return n}});let c=(0,o.bt)(e=>e.timer),d=(0,a.eU)({});(0,a.yu)((0,a.eU)(e=>(e(d),Math.max(0,Math.ceil((0,s.P$)(e(c).time)/1e3))),(e,r,n)=>{r(d,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=a.zl.get(c);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},596414:(e,r,n)=>{n.d(r,{V3:()=>w,w:()=>A,HG:()=>C});var a=n(848318);n(301168);var i=n(658029),o=n(124810);n(186606);var s=n(84966),l=n(978877),c=n(740705),d=n(955635),u=n(781239),p=n(755534),m=n(967688),_=n(744577);n(340132);var h=n(130953),g=n(636524),f=n(614092),E=n(839866),y=n(243277),b=n(331945),v=n(274455),T=n(983747);n(531288),n(601167);var I=n(27776),S=n(10897);let A=32,w=7.5,C=256;var N=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(N||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function R({numTotalVotes:e,isMostVoted:r}){return a.createElement("span",{className:S.TK},a.createElement("span",null,(0,m.tx)("voting.pin.votes",{numVotes:e})),r&&a.createElement("img",{src:v.Ys,className:S.C0,alt:(0,m.t)("voting.pin.medal_img_alt")}))}function P({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:i,padding:o}){let s=a.useRef(null);return a.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,i,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),a.createElement("div",{className:S.D9,style:{transform:`scale(${i})`},"aria-hidden":!0},a.createElement("span",{style:o,ref:s},a.createElement(R,{numTotalVotes:r,isMostVoted:n})))}function D({userId:e,nodeVotes:r}){let n=r.length>3,i=n?r.slice(0,2):r,o=r.length-2;return a.createElement("li",{key:e,className:S.QE},a.createElement(k,{userId:e}),a.createElement("div",{className:S.WK},i.map(e=>a.createElement(F,{key:e,stampId:e})),n&&a.createElement("span",{className:S._v},o)))}function k({userId:e}){let{user:r,loading:n}=(0,g.wW)(e);return a.createElement(a.Fragment,null,a.createElement(b.v,{userId:e,user:r,loading:n,size:24,loadingClassName:S.SD}),a.createElement(b.m,{userId:e,user:r,loading:n,defaultClassName:S.nT,loadingClassName:S.fK}))}function M({overflowCount:e}){return a.createElement("li",{className:S.Qf},a.createElement("div",{className:S.EA},a.createElement(v.xL,null)),a.createElement("span",{className:S.iG},(0,m.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function F({stampId:e}){let r=(0,d.fU)(),n=(0,f.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),i=(()=>{let e=y.WJ.find(e=>e.label===n);return e&&(0,E.k6)(e,r)||y.tR})(),o=n?(0,m.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,m.t)("voting.pin.stamp_preview_alt_without_type");return a.createElement("img",{className:S.O8,src:i,alt:o})}a.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:d,selectPin:g,deselectPin:f,viewportSize:E,currentUserId:y,recordingKey:b}){let v=(0,a.useRef)(null),C=(0,a.useRef)(null),[N,L]=(0,a.useState)(0),[k,F]=(0,a.useState)(!1),[x,U]=(0,a.useState)(!0),[B,G]=(0,a.useState)(0),[V,H]=(0,a.useState)(!1),z=(0,T.oC)(e),K={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[E],W={large:1,medium:.9,small:.8,xSmall:.7}[E];(0,a.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,h.n3)(e.target,v.current)||f()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,f,e.guid]);let j=r?_.sx.colorBgvotingtertiary.$.backgroundColor:_.sx.colorBg.$.backgroundColor,Y={default:{transform:`scale(${W})`,backgroundColor:j,borderColor:j,opacity:1,...K},dimmed:{transform:`scale(${W})`,backgroundColor:j,borderColor:j,opacity:.5,...K},hovered:{transform:"scale(1)",backgroundColor:j,borderColor:j,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:j,..._.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},$={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,a.useMemo)(()=>{let r=(0,T.zi)(y);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,y]),X=q.length>3,J=X?q.slice(0,2):q,Z=X?q.slice(2):[],Q={hovered:{height:`${A}px`},selected:{height:"auto"}},ee=(0,a.useCallback)(e=>{let r=0!==e;r!==k&&F(r);let n=C.current?.getScrollHeight(),a=C.current?.getTrackHeight(),i=void 0===n||void 0===a||O({clientHeight:a,scrollHeight:n,scrollTop:e});i!==x&&U(i)},[k,x]),et=(0,a.useCallback)(e=>{if(!e||!C.current){F(!1),U(!0);return}let r=C.current.getScrollTop(),n=C.current.getScrollHeight(),a=C.current.getTrackHeight();F(0!==r),U(O({clientHeight:a,scrollHeight:n,scrollTop:r}))},[]);return a.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},a.createElement("div",{role:"button",tabIndex:0,className:S.UD,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:u.rf(b,"click",g),ref:v,style:{transform:`translateX(${10-N}px)`},id:e.guid},a.createElement(l.P.div,{className:S.yM,initial:!1,animate:n,variants:Y},a.createElement("p",{className:S.wx},a.createElement(R,{numTotalVotes:z,isMostVoted:r}),a.createElement(l.P.span,{className:S.cG,initial:!1,animate:n,variants:$},"selected"===n&&a.createElement(i.K,{onClick:e=>{e.stopPropagation(),f(),d(!1)},"aria-label":(0,m.t)("general.close")},a.createElement(o.A,null)))),a.createElement(c.N,null,["selected","hovered"].includes(n)&&a.createElement(a.Fragment,null,a.createElement(l.P.div,{className:S.W0,animate:"selected"===n&&k&&!V?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),a.createElement(l.P.div,{className:S.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/W})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/W})`}},a.createElement(p.P,{ref:C,maxHeight:A*w,width:240,allowScrollAndZoomOver:!0,onScroll:ee,onCanScrollChange:et,forceRerenderCount:B},a.createElement("ul",{className:S.hQ},J.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})),X&&a.createElement(l.P.div,{initial:!1,animate:n,variants:Q,onAnimationStart:()=>H(!0),onAnimationComplete:()=>{H(!1),G(e=>e+1)}},"hovered"===n&&a.createElement(M,{overflowCount:q.length-J.length}),"selected"===n&&Z.map(([e,r])=>a.createElement(D,{key:e,userId:e,nodeVotes:r})))))),a.createElement(l.P.div,{className:S.W0,animate:"selected"!==n||x||V?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),a.createElement(P,{reportWidth:L,numTotalVotes:z,isMostVoted:r,scale:W,padding:K}))})},274455:(e,r,n)=>{n.d(r,{Ys:()=>o,xL:()=>s});var a=n(848318),i=n(615233);(0,i.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4");let o=(0,i.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function s(){return a.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},366022:(e,r,n)=>{n(848318),n(301168),n(870567)},983747:(e,r,n)=>{n.d(r,{oC:()=>i,zi:()=>o}),n(848318),n(301168),n(186606),n(382902),n(656329),n(967688),n(31898),n(456028),n(381673),n(303397),n(730143),n(318147),n(361053),n(520779),n(274016),n(271238),n(264524),n(23897),n(969641),n(366022);var a=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(a||{});function i(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function o(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},23897:(e,r,n)=>{n.d(r,{Fn:()=>s,OO:()=>l,qM:()=>o}),n(848318),n(301168),n(186606);var a=n(382902);n(996202),n(340132),n(127340);var i=n(4881);n(48226),n(264524),n(969641),n(366022);let o=(0,i.Wh)(()=>(0,a.eU)(!1));var s=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(s||{}),l=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(l||{})},877994:(e,r,n)=>{n.d(r,{AF:()=>H,BV:()=>G,Cn:()=>U,Cz:()=>K,Mr:()=>z,TS:()=>x,V_:()=>V,zS:()=>B});var a=n(938982),i=n(186606),o=n(19180),s=n(998568),l=n(967688),c=n(323201),d=n(188365),u=n(645637),p=n(728075);let m=["base","baseLight","sticky","highlight","widget","pencilUI3","codeBlockTheme"];function _({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let h=i.Hdj.V700,g=new Map;function f(e){return 0===g.size&&function(){let e=i.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!m.includes(r)){(0,s.$D)(a.e.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}g.set(r,n)}}(),g.get(e)??h}let E=_({colorsToCSS:new Map([[i.daH.BLACK,p.jR],[i.daH.GRAY_DARK,p.vh],[i.daH.RED,p.N0],[i.daH.ORANGE,p.qm],[i.daH.YELLOW,p.Sb],[i.daH.GREEN,p.RO],[i.daH.BLUE,p.k0],[i.daH.VIOLET,p.zt],[i.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,p.Ws],[i.daH.GRAY_DARK,p._M],[i.daH.BLUE,p.jc],[i.daH.VIOLET,p.mO],[i.daH.WHITE,p.az],[i.daH.RED,p.Af],[i.daH.ORANGE,p.n7],[i.daH.YELLOW,p.p5],[i.daH.GREEN,p.R2]])});function y(e=!1){return i.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=f("base");return _({colorsToCSS:new Map([[i.daH.BLACK,p.jR],[i.daH.GRAY_DARK,p.vh],[i.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.RED,(0,u.W)(u.r.RED,e)],[i.daH.PINK,(0,u.W)(u.r.PINK,e)],[i.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.TEAL,(0,u.W)(u.r.TEAL,e)],[i.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[i.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=_({colorsToCSS:new Map([[i.daH.GRAY,p.Z6],[i.daH.GRAY_LIGHT,p.xr],[i.daH.RED_LIGHT,p.Po],[i.daH.ORANGE_LIGHT,p.is],[i.daH.YELLOW_LIGHT,p.Qw],[i.daH.GREEN_LIGHT,p.bu],[i.daH.BLUE_LIGHT,p.oW],[i.daH.VIOLET_LIGHT,p.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.GRAY,p._M],[i.daH.GRAY_LIGHT,p.A4],[i.daH.BLUE_LIGHT,p.X8],[i.daH.VIOLET_LIGHT,p.eN],[i.daH.RED_LIGHT,p._P],[i.daH.ORANGE_LIGHT,p.LL],[i.daH.YELLOW_LIGHT,p.fU],[i.daH.GREEN_LIGHT,p.c6]])});function v(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("baseLight");return _({colorsToCSS:new Map([[i.daH.GRAY,p.Z6],[i.daH.GRAY_LIGHT,p.U8],[i.daH.YELLOW_LIGHT,(0,u.W)(u.r.YELLOW,e)],[i.daH.ORANGE_LIGHT,(0,u.W)(u.r.ORANGE,e)],[i.daH.RED_LIGHT,(0,u.W)(u.r.RED,e)],[i.daH.PINK_LIGHT,(0,u.W)(u.r.PINK,e)],[i.daH.VIOLET_LIGHT,(0,u.W)(u.r.VIOLET,e)],[i.daH.BLUE_LIGHT,(0,u.W)(u.r.BLUE,e)],[i.daH.TEAL_LIGHT,(0,u.W)(u.r.TEAL,e)],[i.daH.GREEN_LIGHT,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let T=_({colorsToCSS:new Map([[i.daH.STICKY_GRAY,p.oK],[i.daH.STICKY_RED,p.SW],[i.daH.STICKY_ORANGE,p.B9],[i.daH.STICKY_YELLOW,p.Pp],[i.daH.STICKY_GREEN,p.k7],[i.daH.STICKY_BLUE,p.JI],[i.daH.STICKY_VIOLET,p._x],[i.daH.STICKY_PINK,p.a6],[i.daH.STICKY_GRAY_LIGHT,p.Uw]]),lightDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,p.FQ],[i.daH.STICKY_GRAY,p.fh],[i.daH.STICKY_BLUE,p.yG],[i.daH.STICKY_VIOLET,p.DN],[i.daH.STICKY_RED,p.pZ],[i.daH.STICKY_PINK,p.i4],[i.daH.STICKY_ORANGE,p.Q2],[i.daH.STICKY_YELLOW,p.iU],[i.daH.STICKY_GREEN,p.h3]]),darkDisplayColors:new Map([[i.daH.STICKY_GRAY_LIGHT,p.PQ],[i.daH.STICKY_GRAY,p.T2],[i.daH.STICKY_BLUE,p.o$],[i.daH.STICKY_VIOLET,p.Zz],[i.daH.STICKY_RED,p.$b],[i.daH.STICKY_PINK,p.Q1],[i.daH.STICKY_ORANGE,p.aT],[i.daH.STICKY_YELLOW,p.K4],[i.daH.STICKY_GREEN,p.nL]])});function I(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("sticky");return _({colorsToCSS:new Map([[i.daH.WHITE,p.t1],[i.daH.STICKY_GRAY_UI3,p.Dd],[i.daH.STICKY_YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.STICKY_ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.STICKY_RED,(0,u.W)(u.r.RED,e)],[i.daH.STICKY_PINK,(0,u.W)(u.r.PINK,e)],[i.daH.STICKY_VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.STICKY_BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.STICKY_TEAL,(0,u.W)(u.r.TEAL,e)],[i.daH.STICKY_GREEN,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():T}function S(){return _({colorsToCSS:new Map([[i.daH.CODE_BLOCK_DRACULA,p.B8],[i.daH.CODE_BLOCK_DUOTONE_LIGHT,p.Tn],[i.daH.CODE_BLOCK_DUOTONE_SEA,p.OF],[i.daH.CODE_BLOCK_DUOTONE_SPACE,p.Zv],[i.daH.CODE_BLOCK_DUOTONE_EARTH,p.L5],[i.daH.CODE_BLOCK_DUOTONE_FOREST,p.QE]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}let A=_({colorsToCSS:new Map([[i.daH.HIGHLIGHT_GRAY,p.g$],[i.daH.HIGHLIGHT_RED,p.vD],[i.daH.HIGHLIGHT_ORANGE,p.Ah],[i.daH.HIGHLIGHT_YELLOW,p.wO],[i.daH.HIGHLIGHT_GREEN,p.Td],[i.daH.HIGHLIGHT_BLUE,p.qH],[i.daH.HIGHLIGHT_VIOLET,p.fV],[i.daH.HIGHLIGHT_WHITE,p.nG]]),lightDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,p.qt],[i.daH.HIGHLIGHT_YELLOW,p.DE],[i.daH.HIGHLIGHT_GREEN,p.ev],[i.daH.HIGHLIGHT_BLUE,p.vY],[i.daH.HIGHLIGHT_VIOLET,p.gn],[i.daH.HIGHLIGHT_ORANGE,p.xu],[i.daH.HIGHLIGHT_GRAY,p.AN],[i.daH.HIGHLIGHT_WHITE,p.wl]]),darkDisplayColors:new Map([[i.daH.HIGHLIGHT_RED,p.qt],[i.daH.HIGHLIGHT_YELLOW,p.DE],[i.daH.HIGHLIGHT_GREEN,p.ev],[i.daH.HIGHLIGHT_BLUE,p.vY],[i.daH.HIGHLIGHT_VIOLET,p.gn],[i.daH.HIGHLIGHT_ORANGE,p.xu],[i.daH.HIGHLIGHT_GRAY,p.AN],[i.daH.HIGHLIGHT_WHITE,p.wl]])}),w=_({colorsToCSS:new Map([[i.daH.BLACK,p.jR],[i.daH.RED,p.N0],[i.daH.ORANGE,p.qm],[i.daH.YELLOW,p.Sb],[i.daH.GREEN,p.RO],[i.daH.BLUE,p.k0],[i.daH.VIOLET,p.zt],[i.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[i.daH.BLACK,p.Ws],[i.daH.BLUE,p.jc],[i.daH.VIOLET,p.mO],[i.daH.WHITE,p.az],[i.daH.RED,p.Af],[i.daH.ORANGE,p.n7],[i.daH.YELLOW,p.p5],[i.daH.GREEN,p.R2]])});function C(){return i.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("pencilUI3");return _({colorsToCSS:new Map([[i.daH.BLACK,p.jR],[i.daH.RED,(0,u.W)(u.r.RED,e)],[i.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[i.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[i.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[i.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[i.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[i.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():w}i.daH.BLACK,i.daH.WHITE,i.daH.GRAY_DARK,i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.BLUE,i.daH.BLUE_LIGHT,i.daH.VIOLET,i.daH.VIOLET_LIGHT,i.daH.RED,i.daH.RED_LIGHT,i.daH.ORANGE,i.daH.ORANGE_LIGHT,i.daH.YELLOW,i.daH.YELLOW_LIGHT,i.daH.GREEN,i.daH.GREEN_LIGHT,i.daH.PINK,i.daH.PINK_LIGHT,i.daH.INDIGO,i.daH.INDIGO_LIGHT,i.daH.COBALT,i.daH.COBALT_LIGHT,i.daH.TEAL,i.daH.TEAL_LIGHT,i.daH.OLIVE,i.daH.OLIVE_LIGHT,i.daH.STICKY_GRAY_LIGHT,i.daH.STICKY_GRAY,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_RED,i.daH.STICKY_PINK,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_COBALT,i.daH.STICKY_INDIGO,i.daH.STICKY_TEAL,i.daH.STICKY_OLIVE,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_WHITE,i.daH.CODE_BLOCK_DRACULA,i.daH.CODE_BLOCK_DUOTONE_LIGHT,i.daH.CODE_BLOCK_DUOTONE_SEA,i.daH.CODE_BLOCK_DUOTONE_SPACE,i.daH.CODE_BLOCK_DUOTONE_EARTH,i.daH.CODE_BLOCK_DUOTONE_FOREST;let N=(0,o.k)().figjam_ui3_color_palette_v2?[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.TEAL,i.daH.BLUE,i.daH.VIOLET,i.daH.PINK,i.daH.WHITE]:[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.GREEN,i.daH.TEAL,i.daH.BLUE,i.daH.VIOLET,i.daH.PINK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.WHITE],L=[i.daH.BLACK,i.daH.GRAY_DARK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],O=(0,o.k)().figjam_ui3_color_palette_v2?[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT,i.daH.GREEN_LIGHT,i.daH.TEAL_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT,i.daH.PINK_LIGHT]:[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.GREEN_LIGHT,i.daH.TEAL_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT,i.daH.PINK_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT],R=[i.daH.GRAY,i.daH.GRAY_LIGHT,i.daH.RED_LIGHT,i.daH.ORANGE_LIGHT,i.daH.YELLOW_LIGHT,i.daH.GREEN_LIGHT,i.daH.BLUE_LIGHT,i.daH.VIOLET_LIGHT],P=[i.daH.BLACK,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE],D=[i.daH.STICKY_GRAY,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_GRAY_LIGHT],k=(0,o.k)().figjam_ui3_color_palette_v2?[i.daH.WHITE,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW,i.daH.STICKY_GREEN,i.daH.STICKY_TEAL,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK]:[i.daH.WHITE,i.daH.STICKY_GRAY_UI3,i.daH.STICKY_GREEN,i.daH.STICKY_TEAL,i.daH.STICKY_BLUE,i.daH.STICKY_VIOLET,i.daH.STICKY_PINK,i.daH.STICKY_RED,i.daH.STICKY_ORANGE,i.daH.STICKY_YELLOW],M=[i.daH.HIGHLIGHT_GRAY,i.daH.HIGHLIGHT_RED,i.daH.HIGHLIGHT_ORANGE,i.daH.HIGHLIGHT_YELLOW,i.daH.HIGHLIGHT_GREEN,i.daH.HIGHLIGHT_BLUE,i.daH.HIGHLIGHT_VIOLET,i.daH.HIGHLIGHT_WHITE],F=[i.daH.CODE_BLOCK_DRACULA,i.daH.CODE_BLOCK_DUOTONE_LIGHT,i.daH.CODE_BLOCK_DUOTONE_SEA,i.daH.CODE_BLOCK_DUOTONE_EARTH,i.daH.CODE_BLOCK_DUOTONE_SPACE,i.daH.CODE_BLOCK_DUOTONE_FOREST];function x(e){switch(e){case"widget":case"base":return(i.Ez5?.uiState().showUI3Colors.getCopy()?N:L).map(e=>G(e,"base"));case"baseLight":return(i.Ez5?.uiState().showUI3Colors.getCopy()?O:R).map(e=>G(e,"baseLight"));case"sticky":return(i.Ez5?.uiState().showUI3Colors.getCopy()?k:D).map(e=>G(e,"sticky"));case"highlight":return M.map(e=>G(e,"highlight"));case"pencilUI3":return P.map(e=>G(e,"pencilUI3"));case"codeBlockTheme":return F.map(e=>G(e,"codeBlockTheme"))}}function U(e){return"base"===e}function B(e,r,n=i.daH.CUSTOM){let a;let o=c.F.format(e);switch(r){case"widget":case"base":a=y().CSS_TO_COLOR.get(o);break;case"baseLight":a=v().CSS_TO_COLOR.get(o);break;case"sticky":a=I().CSS_TO_COLOR.get(o);break;case"highlight":a=A.CSS_TO_COLOR.get(o);break;case"pencilUI3":a=C().CSS_TO_COLOR.get(o);break;case"codeBlockTheme":a=S().CSS_TO_COLOR.get(o)}return a??n}function G(e,r){let n;switch(r){case"widget":case"base":n=y().COLOR_TO_CSS.get(e);break;case"baseLight":n=v().COLOR_TO_CSS.get(e);break;case"sticky":n=I().COLOR_TO_CSS.get(e);break;case"highlight":n=A.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=C().COLOR_TO_CSS.get(e);break;case"codeBlockTheme":n=S().COLOR_TO_CSS.get(e)}return n?c.F.parse(n):void 0}function V(e,r="base",n=(0,l.t)("whiteboard.colors.custom")){let a=Array.isArray(e)?e[0]:e,o=B(a,r);return"base"===r&&o===i.daH.CUSTOM&&(o=B(a,"baseLight")),function(e){switch(e){case i.daH.BLACK:return(0,l.t)("whiteboard.colors.black");case i.daH.WHITE:return(0,l.t)("whiteboard.colors.white");case i.daH.GRAY_DARK:return(0,l.t)("whiteboard.colors.dark_gray");case i.daH.GRAY:return(0,l.t)("whiteboard.colors.gray");case i.daH.GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case i.daH.YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.YELLOW_LIGHT:return(0,l.t)("whiteboard.colors.light_yellow");case i.daH.ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.ORANGE_LIGHT:return(0,l.t)("whiteboard.colors.light_orange");case i.daH.RED:return(0,l.t)("whiteboard.colors.red");case i.daH.RED_LIGHT:return(0,l.t)("whiteboard.colors.light_red");case i.daH.PINK:return(0,l.t)("whiteboard.colors.pink");case i.daH.PINK_LIGHT:return(0,l.t)("whiteboard.colors.light_pink");case i.daH.VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.VIOLET_LIGHT:return(0,l.t)("whiteboard.colors.light_violet");case i.daH.INDIGO:return(0,l.t)("whiteboard.colors.indigo");case i.daH.INDIGO_LIGHT:return(0,l.t)("whiteboard.colors.light_indigo");case i.daH.COBALT:return(0,l.t)("whiteboard.colors.cobalt");case i.daH.COBALT_LIGHT:return(0,l.t)("whiteboard.colors.light_cobalt");case i.daH.BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.BLUE_LIGHT:return(0,l.t)("whiteboard.colors.light_blue");case i.daH.TEAL:return(0,l.t)("whiteboard.colors.teal");case i.daH.TEAL_LIGHT:return(0,l.t)("whiteboard.colors.light_teal");case i.daH.GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.GREEN_LIGHT:return(0,l.t)("whiteboard.colors.light_green");case i.daH.OLIVE:return(0,l.t)("whiteboard.colors.olive");case i.daH.OLIVE_LIGHT:return(0,l.t)("whiteboard.colors.light_olive");case i.daH.STICKY_GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case i.daH.STICKY_GRAY:case i.daH.STICKY_GRAY_UI3:return(0,l.t)("whiteboard.colors.gray");case i.daH.STICKY_BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.STICKY_VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.STICKY_RED:return(0,l.t)("whiteboard.colors.red");case i.daH.STICKY_PINK:return(0,l.t)("whiteboard.colors.pink");case i.daH.STICKY_ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.STICKY_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.STICKY_GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.STICKY_COBALT:return(0,l.t)("whiteboard.colors.cobalt");case i.daH.STICKY_INDIGO:return(0,l.t)("whiteboard.colors.indigo");case i.daH.STICKY_TEAL:return(0,l.t)("whiteboard.colors.teal");case i.daH.STICKY_OLIVE:return(0,l.t)("whiteboard.colors.olive");case i.daH.HIGHLIGHT_RED:return(0,l.t)("whiteboard.colors.pink");case i.daH.HIGHLIGHT_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case i.daH.HIGHLIGHT_GREEN:return(0,l.t)("whiteboard.colors.green");case i.daH.HIGHLIGHT_BLUE:return(0,l.t)("whiteboard.colors.blue");case i.daH.HIGHLIGHT_VIOLET:return(0,l.t)("whiteboard.colors.violet");case i.daH.HIGHLIGHT_ORANGE:return(0,l.t)("whiteboard.colors.orange");case i.daH.HIGHLIGHT_GRAY:return(0,l.t)("whiteboard.colors.gray");case i.daH.HIGHLIGHT_WHITE:return(0,l.t)("whiteboard.colors.white");case i.daH.CODE_BLOCK_DRACULA:case i.daH.CODE_BLOCK_DUOTONE_EARTH:case i.daH.CODE_BLOCK_DUOTONE_FOREST:case i.daH.CODE_BLOCK_DUOTONE_LIGHT:case i.daH.CODE_BLOCK_DUOTONE_SEA:case i.daH.CODE_BLOCK_DUOTONE_SPACE:return d.A$.format((0,d.X0)(e));default:return}}(o)??n}function H(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,l.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,l.t)("whiteboard.colors.palette.light",{index:n});default:return(0,l.t)("whiteboard.colors.palette.base",{index:n})}}function z(e,r="rgba(255, 255, 255, 1)"){return y().COLOR_TO_CSS.get(e)??r}function K(e,r,n){let a;let o={...e,a:1},s=B(o,r);if(s===i.daH.NONE||s===i.daH.CUSTOM)return c.F.format(o);switch(r){case"baseLight":a=v();break;case"sticky":a=I();break;case"highlight":a=A;break;case"pencilUI3":a=C();break;case"codeBlockTheme":a=S();break;default:a=y()}return("light"===n?a.LIGHT_DISPLAY.get(s):a.DARK_DISPLAY.get(s))??c.F.format(o)}},289520:(e,r,n)=>{n.d(r,{ZE:()=>O});var a=n(848318),i=n(536384),o=n.n(i),s=n(206639),l=n(813009),c=n(781239),d=n(979890),u=n(182317),p=n(967688),m=n(323201),_=n(632727),h=n(574422),g=n(537256),f=n(17753),E=n(996775),y=n(782288),b=n(12080),v=n(920274),T=n(164710),I=n(747174),S=n(877994),A=n(256579),w=n(270307),C=n(788567);function N(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let L={right:I.nm,center:void 0,left:I.Gu};function O({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,paletteType:o,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:p,dropperDisabled:m,optionSize:_,customOpacity:h,ariaLabel:f,alignment:y,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:T,isColorPopoverOpen:I,shouldDisableDataTooltip:A,setIsColorPopoverOpen:w,positionX:C,positionY:N,colorButtonSizeOverride:L,swatchStyle:O,shouldRenderCirclesWithContentBoxSizing:P}){let D=(0,l.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),k={name:"figjam_node_color_change",properties:{node_type:D&&1===Object.keys(D).length&&Object.keys(D).pop()||"MIXED",...D}},{variations:M,type:F}=(0,E.Z9)(),x=(F===g.Yv.DEFAULT?(0,S.TS)(o):M[o].slice()).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,o):(0,S.AF)(r,o)})),U=x.length;if("base"===o){let e=(F===g.Yv.DEFAULT?(0,S.TS)("baseLight"):M.baseLight).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,"baseLight"):(0,S.AF)(r,"baseLight")}));x.push(...e)}return a.createElement(R,{additionalContentsTop:s,alignment:y,analytics:k,ariaLabel:f,buttonBackground:d,buttonCaretType:p,buttonClassName:u,buttonSize:c,colorButtonSizeOverride:L,customOpacity:h,dropperDisabled:m,fixedNumColumns:U,inlineButtonTooltip:b,isColorPopoverOpen:I,onColorChange:e=>r(e.option),onOpacityChange:n,onlyShowCustomColorPopover:T,optionSize:_,options:x,palettePickerPopoverWrapper:v,paletteType:o,positionX:C,positionY:N,recordingKey:i,setIsColorPopoverOpen:w,shouldDisableDataTooltip:A,shouldRenderCirclesWithContentBoxSizing:P,swatchStyle:O,value:{option:e}})}function R({value:e,onColorChange:r,onOpacityChange:n,recordingKey:i,additionalContentsTop:o,additionalContentsBottom:l,options:d,inlineButtonTooltip:u,paletteType:m,fixedNumColumns:_,buttonSize:h,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:b,optionSize:I,isDesignInlineMenu:A,analytics:w,customOpacity:C,ariaLabel:N,alignment:L,positionX:O,positionY:R,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:k,isColorPopoverOpen:M,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,customOptions:G,customOptionsHeader:V,swatchStyle:H,shouldRenderCirclesWithContentBoxSizing:z,colorButtonSizeOverride:K}){let[W,j]=a.useState(!1),Y={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return C&&(Y.a=C),a.useEffect(()=>{F&&F(W)},[W,F]),B||W?a.createElement(T.v,{alignment:L,analytics:w,color:Y,dropperDisabled:b,isOpen:W,onClose:()=>{j(!1)},onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},positionX:O,positionY:R,recordingKey:(0,c.Pt)(i,"customColorPopover"),shouldCloseOnEscape:x,showOpacity:null!=C,target:a.createElement(y.$n,{active:"light"===g?"LOUD":"NORMAL",ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,m).toLocaleLowerCase()}),buttonChildrenStyle:K?.buttonChildrenSize,buttonStyle:K?.buttonSize,caret:E,className:f,onClick:()=>j(!W),recordingKey:(0,c.Pt)(i,"colorSelectorButton"),role:"combobox",tooltip:u||(0,S.V_)(e.option,m,(0,p.t)("whiteboard.inline_menu.color"))},a.createElement(v.cd,{size:h,value:e.option,paletteType:m,background:g,shouldRenderCirclesWithContentBoxSizing:z,swatchStyle:H})),theme:"dark"}):a.createElement(D,{additionalContentsBottom:l,additionalContentsTop:o,alignment:L,analytics:w,ariaLabel:N,buttonBackground:g,buttonCaretType:E,buttonClassName:f,buttonSize:h,colorButtonSizeOverride:K,customOptions:G,customOptionsHeader:V,fixedNumColumns:_,hasNonWhiteboardColors:U,inlineButtonTooltip:u,isColorPopoverOpen:M,isDesignInlineMenu:A,onColorChange:r,onCustomColor:()=>j(!0),optionSize:I,options:d,palettePickerPopoverWrapper:P,paletteType:m,positionX:O,positionY:R,recordingKey:i,setIsColorPopoverOpen:F,shouldDisableDataTooltip:k,shouldRenderCirclesWithContentBoxSizing:z,swatchStyle:H,value:e})}function P({id:e,shouldDisableDataTooltip:r,paletteType:n,customColor:i,onPointerUp:s,isFocused:l,recordingKey:c,shouldRenderCirclesWithContentBoxSizing:u}){return i?a.createElement(d.GG,{id:e,...r?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(C.s,{[w.H]:l}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),recordingKey:c,onPointerUp:s},a.createElement(v.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:i,selectionState:"selected_custom",paletteType:n,background:"dark",size:"medium",shouldRenderCirclesWithContentBoxSizing:u})):a.createElement(d.GG,{id:e,key:"custom-color",recordingKey:c,onPointerUp:s,role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),className:o()(C.s,{[w.H]:l})},a.createElement(v.ZI,{shouldDisableDataTooltip:r,shouldRenderCirclesWithContentBoxSizing:u}))}function D({value:e,onColorChange:r,onCustomColor:n,recordingKey:i,additionalContentsTop:l,additionalContentsBottom:g,options:T,inlineButtonTooltip:I,paletteType:O,buttonSize:R,buttonClassName:D,buttonCaretType:k="down",buttonBackground:M="dark",optionSize:F,isDesignInlineMenu:x,fixedNumColumns:U,analytics:B,ariaLabel:G,alignment:V="center",palettePickerPopoverWrapper:H,shouldDisableDataTooltip:z,positionX:K,positionY:W,isColorPopoverOpen:j,setIsColorPopoverOpen:Y,hasNonWhiteboardColors:$,customOptions:q,customOptionsHeader:X,colorButtonSizeOverride:J,swatchStyle:Z,shouldRenderCirclesWithContentBoxSizing:Q}){let ee=a.useRef((0,u.g)()),et=a.useRef((0,u.g)()),er=N(e.option),en=(0,E.iN)(er,O),ea=(0,E.iN)(er,"baseLight")&&"base"===O,ei=$?function(e,r){try{return!r.find(r=>{let n=N(r.option),a=N(e.option);return n&&a&&(0,s.DA)(n,a)})}catch(e){return console.error(e),!1}}(e,T):en&&ea,eo=()=>{j&&n()},{derivedNumColumnsInGrid:es,swatchGrid:el}=(({fixedNumColumns:e})=>{if(e)return{swatchGrid:(0,v.Wj)(e,G,ee.current),derivedNumColumnsInGrid:e};let{swatchGrid:r,numColumns:n}=(0,v.lX)(T.length,G,ee.current);return{derivedNumColumnsInGrid:n,swatchGrid:r}})({fixedNumColumns:U});return a.createElement(b.Fn,{OptionWrapper:el,PopoverWrapper:H||b.wM,additionalContentsBottom:g,additionalContentsTop:l,additionalOptionId:et.current,additionalOptionOnChange:n,additionalOptions:(r=!1)=>a.createElement(A.R,{customOption:a.createElement(P,{id:et.current,paletteType:O,shouldDisableDataTooltip:z??!1,customColor:ei?e.option:void 0,onPointerUp:eo,isFocused:r,recordingKey:(0,c.Pt)(i,"colorSelectorCustomOption"),shouldRenderCirclesWithContentBoxSizing:Q??!1}),paletteType:O,numOptions:T.length,numColumns:es}),customOptions:q,customOptionsHeader:X,onChange:e=>{r(e),B&&h.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:_.z5.format(e.option),...B.properties})},onToggleMenuOpen:Y,optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),options:T,positionX:K??L[V],positionY:W,renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>a.createElement(y.$n,{active:s?"light"===M?"LOUD":"NORMAL":"NONE",ariaActiveDescendant:l,ariaControls:ee.current,ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,O).toLocaleLowerCase()}),buttonChildrenStyle:J?.buttonChildrenSize,buttonStyle:J?.buttonSize,caret:k,className:D,isDesignInlineMenu:x,isNewSubmenu:"light"===M,onKeyDown:o,onPointerDown:n,recordingKey:(0,c.Pt)(i,"colorSelectorButton"),role:"combobox",tooltip:I||(0,S.V_)(e.option,O,(0,p.t)("whiteboard.inline_menu.color"))},a.createElement(v.cd,{size:R,value:e.option,paletteType:O,background:M,ref:r,swatchStyle:Z,shouldRenderCirclesWithContentBoxSizing:Q})),renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>a.createElement(d.GG,{id:n,...z?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":e.tooltip||(0,S.V_)(e.option,O),"data-tooltip-show-above":!0},className:o()(C.s,{[w.H]:l}),key:m.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,S.V_)(e.option,O),onPointerUp:e=>{j&&r(e)},recordingKey:(0,c.Pt)(i,"colorSelectorOption",m.F.format(e.option)),tabIndex:-1},a.createElement(v.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:O,size:F,background:"dark",shouldRenderCirclesWithContentBoxSizing:Q})),value:e})}},782288:(e,r,n)=>{n.d(r,{$n:()=>g,W1:()=>h,wv:()=>E});var a=n(848318),i=n(536384),o=n.n(i),s=n(979890),l=n(720522),c=n(17753),d=n(138111),u=n(734045),p=n(260831),m=n(154709),_=n(343650);function h({marginBottom:e,size:r,children:n,padding:i,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:m,onFocus:_,propagateInputToFullscreen:h,testID:g,focusableDivTestId:f,darkModePreferred:E,editorTheme:y}){return a.createElement("div",{ref:s,"aria-hidden":u,"aria-label":l,className:p.bH,"data-editor-theme":y,"data-fullscreen-intercept":h,"data-preferred-theme":E?"dark":void 0,"data-testid":f,onBlurCapture:m,onFocus:_,role:c,tabIndex:d},a.createElement("div",{className:o()(p.zr,{[p.EX]:"small"===r}),style:{paddingRight:i,paddingLeft:i,marginBottom:e},"data-testid":g},n))}a.forwardRef((e,r)=>{let{id:n,svg:i,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerUp:_,onPointerDown:h,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:v,tooltipShortcutActionKey:T,tooltipType:I,resourceId:S,recordingKey:A,active:w="NONE",focused:C,disabled:N,svgStyle:L,buttonStyle:O,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:k,role:M,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:G}=e;return a.createElement(g,{ref:r,active:w,ariaActiveDescendant:B,ariaControls:G,ariaLabel:k,blurOnClick:c,buttonChildrenStyle:R,buttonStyle:O,caret:y,className:o()({[p.$9]:N}),disabled:N,focused:C,id:n,isNewSubmenu:D,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerDown:h,onPointerUp:_,onboardingKey:x,recordingKey:A,resourceId:S,role:M,size:b,tabIndex:F,testId:U,tooltip:v,tooltipShortcutActionKey:T,tooltipType:I},a.createElement(l.B,{svg:i,width:f,height:E,style:L,useOriginalSrcFills_DEPRECATED:P}))});let g=a.forwardRef((e,r)=>{let{id:n,children:i,onClick:l,onMouseEnter:m,onMouseLeave:_,onPointerUp:h,onPointerDown:g,onKeyDown:E,blurOnClick:b,disabled:v=!1,caret:T="none",animateCaret:I=!1,size:S="large",buttonStyle:A,buttonChildrenStyle:w,isNewSubmenu:C,isDesignInlineMenu:N,recordingKey:L,active:O="NONE",focused:R,tooltip:P,tooltipShortcutActionKey:D,tooltipType:k,tooltipMaxWidth:M,resourceId:F,testId:x,className:U="",ariaLabel:B,role:G,tabIndex:V,onboardingKey:H}=e,{ariaControls:z,ariaActiveDescendant:K}=e,W=(0,u._r)(),j=a.Children.toArray(i),Y=1===j.length&&"string"==typeof j[0].props.children,$=function({tooltip:e,shouldShowTooltips:r,tooltipType:n}){return e&&r?n||c.Ib.TEXT:void 0}({tooltip:P,shouldShowTooltips:W,tooltipType:k}),q="combobox"===G&&"NONE"!==O;return a.createElement(s.GG,{"aria-activedescendant":q?K:void 0,"aria-checked":"switch"===G?"NONE"!==O:void 0,"aria-controls":z,"aria-expanded":"combobox"===G?"NONE"!==O:void 0,"aria-label":function({ariaLabel:e,actualTooltipType:r,tooltip:n}){return e??(0,d.En)({"data-tooltip-type":r??c.Ib.TEXT,"data-tooltip":n??""})}({ariaLabel:B,actualTooltipType:$,tooltip:P}),"aria-owns":q?z:void 0,"aria-pressed":"button"===G||null==G?"NONE"!==O:void 0,className:o()({[p.x6]:!0,[p.BB]:!0,[p._T]:C,[p.Hh]:N,[p.cN]:"none"!==T&&!!i,[p.Ec]:"none"!==T&&!i,[p.EX]:"small"===S,[p.Pq]:"SOFT"===O,[p.k1]:"NORMAL"===O,[p.F$]:"LOUD"===O,[p.zt]:Y,[p.gK]:!v,[p.bI]:R,[U]:!!U}),"data-fullscreen-intercept":null==E?"true":void 0,"data-onboarding-key":H,"data-resource-id":F||void 0,"data-tooltip":P,"data-tooltip-max-width":M,"data-tooltip-shortcut-key":D,"data-tooltip-show-above":!0,"data-tooltip-type":$,dataTestId:x,forwardedRef:r,id:n,onClick:f(l,v),onKeyDown:f(E,v),onMouseEnter:f(m,v),onMouseLeave:f(_,v),onMouseUp:!v&&b?e=>{e.currentTarget.blur()}:void 0,onPointerDown:f(g,v),onPointerUp:f(h,v),recordingKey:L,role:G,style:A,tabIndex:function(e,r){return void 0!==e?e:"option"===r?-1:0}(V,G)},a.createElement("div",{className:o()({[p.LJ]:Y,[p.Qq]:!Y,[p.Hh]:N,[p.EX]:"small"===S}),style:w},i),"none"!==T&&a.createElement(y,{caret:T,animateCaret:I,active:O}))});function f(e,r){return r?void 0:e}function E({size:e="tall",margin:r}){return a.createElement("div",{className:p.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}let y=a.memo(({caret:e,animateCaret:r,active:n})=>a.createElement(l.B,{className:o()({[p.OW]:!0,[p.Ln]:r,[p.y9]:r&&"LOUD"===n}),svg:"up"===e?_.A:m.A}))},12080:(e,r,n)=>{n.d(r,{Fn:()=>g,wM:()=>h});var a=n(848318),i=n(86956),o=n(857607),s=n(540698),l=n(182317),c=n(303397),d=n(146859),u=n(782288),p=n(768360),m=n(599095),_=(e=>(e.fontFamilyControl="fontFamilyControl",e))(_||{});function h({children:e,padding:r}){return a.createElement(u.W1,{padding:r},a.createElement("div",{className:m.ec},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:_,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return a.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:m.Wh},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:v,additionalContentsBottom:T,PopoverWrapper:I=h,positionX:S,positionY:A,responsivePositionY:w,popoverClassName:C,onToggleMenuOpen:N,parentComponent:L,customOptions:O,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:k}){let M=(0,a.useRef)(null),[F,x]=(0,a.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[G,V]=(0,a.useState)(0),[H,z]=(0,a.useState)(!1),K=k?k.focusedIndexOverride:G,W=k?k.setFocusedIndexOverride:V,j=k?k.isFocusedByKeyboardOverride:H,Y=k?k.setIsFocusedByKeyboardOverride:z,$=n.length+(O?O.length:0)+(null!=E?1:0),[q]=(0,a.useState)(()=>{let e=Array($);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),X=new i.W,[J,Z]=(0,a.useState)(!0);return a.useEffect(()=>{N&&N(U)},[U,N]),a.createElement(p.A,{target:_({value:e,ref:D??M,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(K>=0&&K<n.length?r(n[K],e):K===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(Y(!0),U&&$){let r=K;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=$?r=0:r<0&&(r=$-1),W(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:Y(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{Y(!1),B(!U),L&&"fontFamilyControl"===L&&((0,s.nl)()?Z(!0):(Z(!1),X.reset(),X.scheduleOnce(()=>{Z(!0)},250)))},active:U,activeOptionId:null!=K?q[K]:void 0}),onClose:()=>{L&&"fontFamilyControl"===L&&X.reset(),B(!1)},renderPopoverContents:i=>{let o=(n,a)=>{let i=e=>r(n,e),o=e=>{i(e),B(!1)};return u({value:n,id:q[a],onClick:e=>{(!L||"fontFamilyControl"!==L||J)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:j&&K===a})},s=n.map(o),l=O?.map((e,r)=>o(e,r+s.length));return l?a.createElement(I,{side:i},v,a.createElement(f,null,s),R,a.createElement(f,null,l,E?.(j&&K===s.length+l.length)),T):a.createElement(I,{side:i},v,a.createElement(f,null,s,E?.(j&&K===s.length)),T)},isOpen:U,positionX:S,positionY:A,responsivePositionY:w,className:C})}},920274:(e,r,n)=>{n.d(r,{cd:()=>A,ZI:()=>w,lX:()=>O,Wj:()=>L});var a=n(848318),i=n(536384),o=n.n(i);n(206639);var s=n(781239),l=n(979890),c=n(454805),d=n(720522);n(642014);var u=n(967688),p=n(552807),m=n(17753),_=n(877994);let h="swatch--colorCircle--MdzUZ",g="swatch--selected--B4IKr",f="swatch--circleWrapper--grusN",E="swatch--swatch--qSnpF",y="swatch--swatchBorderOnDarkBackground--dOArC",b="swatch--small--PX3Sv",v="swatch--large--jAe-V",T="swatch--xsmall--hPL9b",I="swatch--circleContentBoxSizing--BTH3i";var S=n(954184);let A=a.forwardRef(({value:e,paletteType:r,background:n="dark",size:i="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:p,role:S,ariaLabel:A,ariaSelected:w,shouldRenderCirclesWithContentBoxSizing:C=!1},N)=>{let L,O=null;return Array.isArray(e)&&e[1]&&(O=a.createElement("div",{className:"swatch--secondarySwatch--l8c8G",style:{background:(0,_.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),L=Array.isArray(e)?e.length<=2&&e[0]?(0,_.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,_.Cz)(e,r,n),a.createElement("div",{ref:N,className:o()({[h]:!0,[g]:"selected"===s,"swatch--selectedCustomLight--cNeeq":"selected_custom"===s&&"light"===n,"swatch--selectedCustomDark--Obz01":"selected_custom"===s&&"dark"===n,[v]:"large"===i,[b]:"small"===i,[T]:"xsmall"===i,[I]:C,"swatch--accessible--xtYuq":!!S}),...S?{role:S,tabIndex:w?0:-1,"aria-selected":w,"aria-label":A}:{}},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()(E,{"swatch--swatchBorderOnLightBackground--aPkrH":"light"===n,[y]:"dark"===n}),style:{background:L,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":p?m.Ib.TEXT:void 0,"data-tooltip":p,"data-testid":"colorCircle","data-clickable":!0}),O))});function w({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:i,selectionState:c,size:d="medium",shouldRenderCirclesWithContentBoxSizing:p=!1}){return a.createElement(l.D8,{...i?{}:{"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[h]:!0,[g]:"selected"===c,[v]:"large"===d,[b]:"small"===d,[T]:"xsmall"===d,[I]:p}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()("swatch--customSwatch---Nq7y swatch--swatch--qSnpF",y),style:r,"data-clickable":!0})))}let C=a.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:i,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},p)=>a.createElement("div",{ref:p,className:o()({[h]:!0,[g]:"selected"===n,[b]:"small"===r})},a.createElement("div",{className:f},a.createElement(l.D8,{className:o()(E,y),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...i},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?m.Ib.TEXT:void 0,"data-tooltip":u}))));function N({children:e,numColumns:r=4,ariaLabel:n,id:i}){return a.createElement("div",{className:"swatch--swatchGrid--y6deW",style:{"--columns":r},"aria-label":n,role:"listbox",id:i,"data-fullscreen-intercept":!0},e)}function L(e,r,n){return function({children:i}){return a.createElement(N,{numColumns:e,ariaLabel:r,id:n},i)}}function O(e,r,n){let i;return{swatchGrid:function({children:e}){return a.createElement(N,{numColumns:i,ariaLabel:r,id:n},e)},numColumns:i=e<6?e:6===e?3:e<=8?4:5}}a.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:i="unselected",hovered:s,onClick:l,onMouseEnter:_,onMouseLeave:h,onPointerUp:g},f)=>{let[E,y]=a.useState(""),v=a.useCallback(e=>{let r=p.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&y(p.Pv(r.pixels,r.pixelSize))},[]);return a.useEffect(()=>{e&&v(e)},[e,v]),a.createElement("div",{style:{position:"relative"},onMouseEnter:_,onMouseLeave:h,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},a.createElement(C,{value:E,size:n,selectionState:i,onClick:l,onPointerUp:g,ref:f}),s&&a.createElement("div",{className:"swatch--swatchOverlayContainer--0Ye8z"},a.createElement(d.B,{svg:S.A,style:{fill:"dark"===r?"white":void 0},className:o()({"swatch--swatchOverlay--QA2QQ swatch--swatch--qSnpF":!0,"swatch--backgroundLight--ZkW6n":"light"===r,"swatch--backgroundDark--mMH1v":"dark"===r,[b]:"small"===n})})))})},747174:(e,r,n)=>{n.d(r,{Mj:()=>m,T1:()=>u,DH:()=>p,Al:()=>l,Gu:()=>c,nm:()=>d});var a=n(848318);n(349048),n(536384);var i=n(354175),o=n(563029),s=n(956755);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,p=(e,r,n)=>e.height+e.y+n;function m({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:p,onMouseLeave:m,style:_,offset:h=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:v,setSizeChanged:T,closeOnEsc:I=!1,useDropdownZIndex:S=!1}){let[A,w]=a.useState({x:0,y:0}),[C,N]=a.useState(!1),L=a.useRef(null),O=a.useCallback(e=>{let r=0!==e.width||0!==e.height;N(r),d&&d(e),r||w({x:0,y:0})},[d]),R=(0,i.wY)(L,O)??i.cU;(0,s.Y)(c,{ignore:[r?.current,L.current],closeOnEsc:I});let P=(0,o.$)(C)&&C,D=(0,o.$)(R);a.useEffect(()=>T&&T(D),[T,D]),a.useLayoutEffect(()=>{(P||C&&!v)&&R&&w(r=>{let n,a;let i=0!==r.x||0!==r.y?[r.x,r.y]:void 0;return E?[n,a]=E(e,R,h,i):(n=g(e,R,h),a=f(e,R,h)),{x:n,y:a}})},[v,h,g,E,f,R,C,e,P]);let{x:k,y:M}=A;return a.useEffect(()=>{C&&b&&b(k,M,R,h)},[k,M,R,b,h,C]),a.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${k}px, ${M}px, 0)`,..._,...C?{}:{opacity:0},...S?{zIndex:14}:{}},onMouseEnter:p,onMouseLeave:m,ref:e=>{L.current=e,y&&y(e)}},n)}},695596:(e,r,n)=>{n.d(r,{w:()=>u});var a=n(382902),i=n(656329),o=n(995218),s=n(324747),l=n(259964),c=n(71584),d=n(707520);let u=(0,a.eU)(e=>{let r=e(o.u8)===l.nT.Whiteboard,n=e(d.hS);return r&&!n&&!i.Xb}),p=(0,a.eU)(async()=>await c.A.getCommunityShelves({shelfType:s.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,a.Rq)(p)},89035:(e,r,n)=>{n.d(r,{BQ:()=>s});var a=n(453370),i=n(142896);n(968602);var o=n(303397);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(a.j7({type:i.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(152545)},391159:(e,r,n)=>{n.d(r,{Gn:()=>l,Rg:()=>d});var a=n(382902),i=n(989232),o=n(182317),s=n(271708);(0,a.eU)(void 0),(0,a.eU)(void 0),(0,a.eU)(""),(0,a.eU)({state:"inactive"}),(0,a.eU)(!1);let l=(0,a.E3)(s.Ec,[],{subscribeToChanges:!0}),c=(0,i.getAnalyticsAnonymousId)()??(0,o.g)(),d=(0,a.eU)(c)},271708:(e,r,n)=>{n.d(r,{Ec:()=>p});var a=n(410441),i=n(712190),o=n(27776),s=n(645728),l=n(437082),c=n(943701),d=n(569339),u=n(381071);(0,a.jz)(o.Np$),(0,a.jz)(o.K_L),(0,a.jz)(o.pUJ),(0,a.jz)(o.e7),(0,a.jz)(o.hIF);let p="recent-diagramming-shapes-figjam";l.A,d.A,s.A,c.A,u.A,i.XD,i.vO,i.Mm,i.sF},122347:(e,r,n)=>{n.d(r,{KE:()=>e6});var a,i=n(848318);n(947239),n(938982),n(673786);var o=n(186606);n(320953),n(19180);var s=n(382902),l=n(946678),c=n.n(l),d=n(518290);n(989232),n(615233),n(998568),n(910314);var u=n(967688);(e=>{e.AWS=function(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none"},i.createElement("rect",{width:"100",height:"100"}),i.createElement("g",{clipPath:"url(#clip0_1_45297)"},i.createElement("path",{d:"M28.4523 41.8662C28.4523 43.0846 28.5841 44.0725 28.8146 44.797C29.078 45.5215 29.4073 46.3118 29.8684 47.168C30.033 47.4315 30.0989 47.6949 30.0989 47.9255C30.0989 48.2548 29.9013 48.5841 29.4732 48.9134L27.3986 50.2965C27.1022 50.4941 26.8058 50.5929 26.5423 50.5929C26.213 50.5929 25.8837 50.4282 25.5544 50.1318C25.0934 49.6379 24.6982 49.111 24.3689 48.5841C24.0396 48.0242 23.7103 47.3986 23.3481 46.6412C20.7794 49.6708 17.5522 51.1856 13.6664 51.1856C10.9002 51.1856 8.69381 50.3953 7.0802 48.8146C5.46658 47.2339 4.64331 45.1263 4.64331 42.4919C4.64331 39.6927 5.63124 37.4205 7.64002 35.7081C9.64881 33.9957 12.3162 33.1395 15.7081 33.1395C16.8277 33.1395 17.9803 33.2383 19.1988 33.4029C20.4172 33.5676 21.6686 33.831 22.9858 34.1274V31.7235C22.9858 29.2207 22.4589 27.4754 21.4381 26.4545C20.3843 25.4337 18.606 24.9397 16.0703 24.9397C14.9177 24.9397 13.7322 25.0714 12.5138 25.3678C11.2953 25.6642 10.1098 26.0264 8.95726 26.4874C8.43036 26.718 8.03519 26.8497 7.80468 26.9156C7.57416 26.9814 7.4095 27.0143 7.27778 27.0143C6.81675 27.0143 6.58623 26.685 6.58623 25.9935V24.3799C6.58623 23.853 6.65209 23.4578 6.81675 23.2273C6.9814 22.9968 7.27778 22.7663 7.73881 22.5357C8.89139 21.943 10.2745 21.449 11.8881 21.0539C13.5017 20.6258 15.2141 20.4282 17.0253 20.4282C20.9441 20.4282 23.8091 21.3173 25.6532 23.0956C27.4644 24.8738 28.3865 27.5742 28.3865 31.1966V41.8662H28.4523ZM15.0824 46.8717C16.1691 46.8717 17.2888 46.6741 18.4743 46.2789C19.6598 45.8837 20.7136 45.1593 21.6027 44.1713C22.1296 43.5456 22.5248 42.8541 22.7224 42.0638C22.92 41.2734 23.0517 40.3184 23.0517 39.1988V37.8157C22.0967 37.5852 21.0758 37.3876 20.022 37.2558C18.9682 37.1241 17.9474 37.0583 16.9265 37.0583C14.7202 37.0583 13.1065 37.4864 12.0198 38.3755C10.9331 39.2646 10.4062 40.516 10.4062 42.1626C10.4062 43.7103 10.8014 44.8629 11.6247 45.6532C12.415 46.4765 13.5676 46.8717 15.0824 46.8717ZM41.5259 50.4282C40.9331 50.4282 40.538 50.3294 40.2745 50.0989C40.0111 49.9013 39.7806 49.4403 39.583 48.8146L31.8442 23.359C31.6466 22.7004 31.5478 22.2723 31.5478 22.0418C31.5478 21.5149 31.8113 21.2185 32.3382 21.2185H35.5654C36.1911 21.2185 36.6192 21.3173 36.8497 21.5478C37.1132 21.7454 37.3107 22.2064 37.5083 22.8321L43.0407 44.6324L48.1779 22.8321C48.3426 22.1735 48.5402 21.7454 48.8036 21.5478C49.0671 21.3502 49.5281 21.2185 50.1209 21.2185H52.7553C53.381 21.2185 53.8091 21.3173 54.0726 21.5478C54.336 21.7454 54.5665 22.2064 54.6983 22.8321L59.9013 44.8958L65.5984 22.8321C65.796 22.1735 66.0265 21.7454 66.257 21.5478C66.5204 21.3502 66.9485 21.2185 67.5413 21.2185H70.6039C71.1308 21.2185 71.4271 21.482 71.4271 22.0418C71.4271 22.2064 71.3942 22.3711 71.3613 22.5687C71.3283 22.7663 71.2625 23.0297 71.1308 23.3919L63.1944 48.8475C62.9968 49.5061 62.7663 49.9342 62.5029 50.1318C62.2394 50.3294 61.8113 50.4611 61.2515 50.4611H58.4194C57.7938 50.4611 57.3657 50.3623 57.1022 50.1318C56.8388 49.9013 56.6082 49.4732 56.4765 48.8146L51.3722 27.5742L46.3009 48.7817C46.1362 49.4403 45.9386 49.8684 45.6752 50.0989C45.4117 50.3294 44.9507 50.4282 44.358 50.4282H41.5259ZM83.8421 51.3173C82.1297 51.3173 80.4173 51.1198 78.7707 50.7246C77.1242 50.3294 75.8399 49.9013 74.9837 49.4073C74.4568 49.111 74.0945 48.7817 73.9628 48.4853C73.8311 48.1889 73.7652 47.8596 73.7652 47.5632V45.8837C73.7652 45.1922 74.0287 44.8629 74.5226 44.8629C74.7202 44.8629 74.9178 44.8958 75.1154 44.9617C75.313 45.0275 75.6094 45.1593 75.9387 45.291C77.0583 45.7849 78.2768 46.1801 79.5611 46.4436C80.8783 46.707 82.1626 46.8387 83.4798 46.8387C85.5545 46.8387 87.1681 46.4765 88.2878 45.752C89.4074 45.0275 90.0002 43.9737 90.0002 42.6236C90.0002 41.7015 89.7038 40.9441 89.111 40.3184C88.5183 39.6927 87.3986 39.1329 85.785 38.606L81.01 37.1241C78.6061 36.3667 76.8278 35.2471 75.7411 33.7652C74.6544 32.3162 74.0945 30.7026 74.0945 28.9902C74.0945 27.6071 74.3909 26.3887 74.9837 25.3349C75.5764 24.2811 76.3668 23.359 77.3547 22.6345C78.3426 21.8771 79.4623 21.3173 80.7795 20.9221C82.0967 20.527 83.4798 20.3623 84.9288 20.3623C85.6533 20.3623 86.4107 20.3952 87.1352 20.494C87.8926 20.5928 88.5841 20.7245 89.2757 20.8563C89.9343 21.0209 90.56 21.1856 91.1527 21.3832C91.7455 21.5807 92.2065 21.7783 92.5358 21.9759C92.9969 22.2394 93.3262 22.5028 93.5238 22.7992C93.7214 23.0626 93.8201 23.4249 93.8201 23.8859V25.4337C93.8201 26.1252 93.5567 26.4874 93.0627 26.4874C92.7993 26.4874 92.3712 26.3557 91.8114 26.0923C89.9343 25.2361 87.8267 24.808 85.4886 24.808C83.6116 24.808 82.1297 25.1044 81.1088 25.73C80.088 26.3557 79.5611 27.3107 79.5611 28.6609C79.5611 29.583 79.8904 30.3733 80.549 30.999C81.2076 31.6247 82.4261 32.2504 84.1714 32.8102L88.8476 34.2921C91.2186 35.0495 92.931 36.1033 93.9519 37.4534C94.9727 38.8036 95.4667 40.3514 95.4667 42.0638C95.4667 43.4798 95.1703 44.7641 94.6105 45.8837C94.0177 47.0034 93.2274 47.9913 92.2065 48.7817C91.1857 49.6049 89.9672 50.1977 88.5512 50.6258C87.0693 51.0868 85.5216 51.3173 83.8421 51.3173Z",fill:"#252F3E"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.066 67.3222C79.2317 75.3244 63.4908 79.5725 49.9562 79.5725C30.988 79.5725 13.8969 72.5582 0.987961 60.9007C-0.032896 59.9786 0.889169 58.7272 2.10761 59.4517C16.0703 67.5527 33.2932 72.4594 51.1088 72.4594C63.1285 72.4594 76.3338 69.9567 88.4853 64.8195C90.2965 63.9962 91.8443 66.005 90.066 67.3222Z",fill:"#FF9900"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94.5775 62.1846C93.1945 60.4064 85.4228 61.3284 81.8992 61.7565C80.8454 61.8883 80.6807 60.9662 81.6357 60.2747C87.8267 55.9278 98.0024 57.1792 99.1879 58.6281C100.373 60.11 98.8586 70.2856 93.0627 75.1594C92.1736 75.9168 91.3174 75.5217 91.7126 74.5337C93.0298 71.2736 95.9606 63.93 94.5775 62.1846Z",fill:"#FF9900"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_1_45297"},i.createElement("rect",{width:"100.11",height:"59.9342",fill:"white",transform:"translate(0 20)"}))))},e.Azure=function(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none"},i.createElement("rect",{width:"100",height:"100"}),i.createElement("path",{d:"M37.1708 13.7265H59.9541L36.3028 83.8026C36.0598 84.5227 35.597 85.1484 34.9796 85.5917C34.3623 86.0349 33.6215 86.2734 32.8615 86.2736H15.1305C14.5546 86.2737 13.9871 86.1366 13.4747 85.8738C12.9624 85.611 12.5199 85.2299 12.1841 84.7622C11.8482 84.2945 11.6285 83.7535 11.5432 83.184C11.4579 82.6146 11.5094 82.033 11.6935 81.4873L33.7286 16.1975C33.9716 15.4771 34.4344 14.8511 35.052 14.4076C35.6695 13.9642 36.4106 13.7265 37.1708 13.7265Z",fill:"url(#paint0_linear_1_45304)"}),i.createElement("path",{d:"M70.2781 60.7285H34.1493C33.8134 60.7281 33.4852 60.8289 33.2074 61.0178C32.9296 61.2066 32.7152 61.4747 32.5919 61.7872C32.4687 62.0996 32.4424 62.442 32.5166 62.7696C32.5907 63.0972 32.7617 63.3949 33.0074 63.6239L56.2229 85.2924C56.8989 85.9229 57.7888 86.2735 58.7132 86.2733H79.1707L70.2781 60.7285Z",fill:"#0078D4"}),i.createElement("path",{d:"M37.1709 13.7256C36.4023 13.7227 35.6529 13.9655 35.0322 14.4188C34.4115 14.872 33.952 15.5118 33.7207 16.2447L11.7206 81.427C11.5241 81.9746 11.4625 82.5614 11.5408 83.1379C11.6191 83.7144 11.8351 84.2635 12.1706 84.7389C12.506 85.2142 12.951 85.6018 13.4679 85.8687C13.9847 86.1357 14.5583 86.2743 15.1401 86.2727H33.3287C34.0061 86.1517 34.6393 85.853 35.1635 85.4072C35.6877 84.9614 36.0842 84.3844 36.3125 83.7352L40.6997 70.8054L56.371 85.4222C57.0277 85.9654 57.8515 86.2658 58.7037 86.2727H79.0851L70.1461 60.728L44.0877 60.7341L60.0364 13.7256H37.1709Z",fill:"url(#paint1_linear_1_45304)"}),i.createElement("path",{d:"M66.2705 16.1931C66.0279 15.4739 65.5657 14.8489 64.9491 14.4062C64.3325 13.9636 63.5926 13.7255 62.8335 13.7256H37.4419C38.2009 13.7256 38.9408 13.9637 39.5574 14.4064C40.1739 14.849 40.6361 15.4739 40.8789 16.1931L62.9149 81.4856C63.0991 82.0313 63.1507 82.613 63.0655 83.1827C62.9803 83.7523 62.7606 84.2934 62.4248 84.7613C62.0889 85.2292 61.6464 85.6104 61.134 85.8734C60.6215 86.1364 60.0539 86.2736 59.4779 86.2736H84.8704C85.4463 86.2734 86.0139 86.1361 86.5262 85.8731C87.0385 85.6101 87.4809 85.2289 87.8166 84.761C88.1524 84.2931 88.372 83.752 88.4572 83.1825C88.5423 82.6129 88.4907 82.0312 88.3065 81.4856L66.2705 16.1931Z",fill:"url(#paint2_linear_1_45304)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_1_45304",x1:"45.4746",y1:"19.1025",x2:"21.8137",y2:"89.0027",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#114A8B"}),i.createElement("stop",{offset:"1",stopColor:"#0669BC"})),i.createElement("linearGradient",{id:"paint1_linear_1_45304",x1:"52.8657",y1:"51.677",x2:"47.3926",y2:"53.5276",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:"0.3"}),i.createElement("stop",{offset:"0.071",stopOpacity:"0.2"}),i.createElement("stop",{offset:"0.321",stopOpacity:"0.1"}),i.createElement("stop",{offset:"0.623",stopOpacity:"0.05"}),i.createElement("stop",{offset:"1",stopOpacity:"0"})),i.createElement("linearGradient",{id:"paint2_linear_1_45304",x1:"49.8555",y1:"17.0628",x2:"75.8281",y2:"86.2587",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#3CCBF4"}),i.createElement("stop",{offset:"1",stopColor:"#2892DF"}))))},e.GoogleCloud=function(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none"},i.createElement("rect",{width:"100",height:"100"}),i.createElement("path",{d:"M62.4184 33.9607H65.2209L73.2082 26.2159L73.6006 22.9278C69.0249 19.0118 63.4953 16.2915 57.534 15.0239C51.5727 13.7562 45.3765 13.9831 39.5308 15.683C33.685 17.383 28.3827 20.4999 24.1247 24.7393C19.8667 28.9787 16.7935 34.2007 15.1956 39.912C16.0854 39.5583 17.0711 39.501 17.9981 39.7489L33.9726 37.1945C33.9726 37.1945 34.7853 35.8901 35.2057 35.9716C38.6285 32.3266 43.3588 30.0881 48.4281 29.7142C53.4975 29.3404 58.5225 30.8595 62.4745 33.9607H62.4184Z",fill:"#EA4335"}),i.createElement("path",{d:"M84.5879 39.9121C82.752 33.3565 78.9825 27.4632 73.742 22.9551L62.5319 33.8249C64.8682 35.676 66.7405 38.0173 68.0076 40.6722C69.2747 43.3272 69.9035 46.2265 69.8465 49.1514V51.0809C71.1567 51.0809 72.4541 51.3311 73.6646 51.8173C74.875 52.3034 75.9749 53.016 76.9013 53.9144C77.8278 54.8127 78.5627 55.8792 79.0641 57.0529C79.5655 58.2266 79.8236 59.4846 79.8236 60.755C79.8236 62.0255 79.5655 63.2835 79.0641 64.4572C78.5627 65.6309 77.8278 66.6974 76.9013 67.5957C75.9749 68.494 74.875 69.2066 73.6646 69.6928C72.4541 70.179 71.1567 70.4292 69.8465 70.4292H49.8924L47.9026 72.3858V83.9894L49.8924 85.9188H69.8465C75.4186 85.9608 80.8567 84.2627 85.3564 81.0756C89.856 77.8885 93.1782 73.3817 94.8315 68.2219C96.4848 63.0621 96.3814 57.5233 94.5366 52.4248C92.6918 47.3264 89.2035 42.9392 84.5879 39.9121Z",fill:"#4285F4"}),i.createElement("path",{d:"M29.9106 85.8093H49.8647V70.3198H29.9106C28.489 70.3195 27.084 70.0229 25.7909 69.4502L22.9883 70.2926L14.945 78.0374L14.2444 80.7549C18.7549 84.0574 24.2587 85.8331 29.9106 85.8093Z",fill:"#34A853"}),i.createElement("path",{d:"M29.9108 35.5666C24.5042 35.5979 19.2427 37.2658 14.8611 40.3374C10.4796 43.4089 7.19679 47.7307 5.47131 52.6992C3.74583 57.6676 3.6638 63.0345 5.23668 68.0503C6.80957 73.0662 9.95882 77.4804 14.2446 80.6765L25.8191 69.4534C24.3482 68.809 23.0605 67.8282 22.0665 66.5952C21.0724 65.3622 20.4018 63.9138 20.112 62.3742C19.8222 60.8346 19.9219 59.2498 20.4027 57.7558C20.8834 56.2618 21.7308 54.9032 22.872 53.7965C24.0133 52.6899 25.4145 51.8682 26.9553 51.4021C28.496 50.936 30.1304 50.8392 31.7182 51.1202C33.306 51.4012 34.7998 52.0516 36.0714 53.0154C37.343 53.9793 38.3545 55.2279 39.0191 56.6541L50.5936 45.431C48.1642 42.3514 45.033 39.8585 41.445 38.1473C37.857 36.436 33.9093 35.5527 29.9108 35.5666Z",fill:"#FBBC05"}))},e.Kubernetes=function(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none"},i.createElement("rect",{width:"100",height:"100"}),i.createElement("path",{d:"M49.7013 8.00735C48.941 8.0456 48.1961 8.23389 47.5103 8.56115L17.6123 22.8303C16.8385 23.1994 16.1586 23.7365 15.623 24.4017C15.0875 25.0669 14.7101 25.8431 14.5189 26.6726L7.14291 58.7246C6.97258 59.4631 6.95352 60.228 7.08685 60.9739C7.22018 61.7198 7.50319 62.4316 7.91913 63.0673C8.01998 63.2226 8.12845 63.3731 8.24415 63.5179L28.9383 89.2184C29.4739 89.8834 30.154 90.4204 30.9278 90.7893C31.7016 91.1583 32.5495 91.3498 33.4083 91.3496L66.5946 91.342C67.4531 91.3426 68.3007 91.1517 69.0745 90.7834C69.8484 90.4151 70.5285 89.8789 71.0646 89.2146L91.7511 63.5103C92.287 62.845 92.6647 62.0685 92.856 61.2386C93.0473 60.4088 93.0474 59.5469 92.8561 58.717L85.4686 26.6649C85.2775 25.8354 84.9001 25.0593 84.3645 24.3941C83.829 23.7289 83.149 23.1918 82.3752 22.8226L52.4735 8.56115C51.6108 8.14948 50.6576 7.95905 49.7013 8.00735Z",fill:"#326CE5"}),i.createElement("path",{d:"M49.9976 18.915C49.0093 18.9151 48.208 19.8043 48.2081 20.9011C48.2081 20.9179 48.2116 20.934 48.2119 20.9508C48.2105 21.0998 48.2033 21.2793 48.2081 21.4091C48.2317 22.0417 48.3697 22.5259 48.4528 23.1087C48.6034 24.3562 48.7295 25.3902 48.6517 26.3513C48.576 26.7138 48.3087 27.0452 48.0704 27.2756L48.0284 28.0319C46.9545 28.1207 45.8733 28.2835 44.7935 28.5284C40.1469 29.5822 36.1463 31.9729 33.1005 35.2008C32.9028 35.0661 32.5571 34.8184 32.4542 34.7425C32.1347 34.7856 31.8118 34.884 31.3912 34.6394C30.5904 34.1009 29.861 33.3576 28.9784 32.4623C28.574 32.034 28.2812 31.6262 27.8007 31.2134C27.6916 31.1196 27.5251 30.9928 27.4031 30.8964C27.0274 30.5972 26.5844 30.4412 26.1565 30.4266C25.6064 30.4078 25.0768 30.6226 24.7303 31.0568C24.1142 31.8287 24.3114 33.0084 25.17 33.6921C25.1787 33.6991 25.188 33.7045 25.1968 33.7112C25.3147 33.8068 25.4592 33.9292 25.5677 34.0092C26.0775 34.3852 26.5433 34.5777 27.0513 34.8762C28.1216 35.5364 29.0088 36.0838 29.7126 36.7438C29.9874 37.0364 30.0355 37.552 30.072 37.775L30.6456 38.2868C27.5752 42.9023 26.1541 48.6033 26.9939 54.4122L26.2445 54.6299C26.0469 54.8847 25.7678 55.2856 25.4759 55.4052C24.5551 55.6949 23.5188 55.8013 22.2678 55.9323C21.6804 55.9811 21.1736 55.952 20.5509 56.0698C20.4138 56.0957 20.2229 56.1454 20.0729 56.1805C20.0677 56.1816 20.0628 56.1832 20.0576 56.1844C20.0495 56.1863 20.0387 56.1902 20.0309 56.192C18.9761 56.4466 18.2985 57.4149 18.5167 58.369C18.7348 59.3234 19.7651 59.9037 20.8262 59.6753C20.8339 59.6735 20.845 59.6732 20.853 59.6714C20.865 59.6687 20.8755 59.6629 20.8874 59.66C21.0353 59.6276 21.2207 59.5915 21.3501 59.5569C21.9623 59.3931 22.4057 59.1526 22.956 58.942C24.1401 58.5178 25.1208 58.1634 26.0762 58.0253C26.4753 57.9941 26.8957 58.2712 27.1048 58.3881L27.8849 58.2545C29.6799 63.8134 33.4417 68.3064 38.2052 71.1257L37.8801 71.9049C37.9973 72.2074 38.1265 72.6168 38.0392 72.9155C37.6919 73.8152 37.0969 74.7648 36.4195 75.8235C36.0914 76.3126 35.7557 76.6922 35.4597 77.252C35.3889 77.3859 35.2987 77.5917 35.2303 77.7332C34.7704 78.7161 35.1077 79.8482 35.9912 80.2731C36.8802 80.7006 37.9838 80.2497 38.4614 79.2648C38.4621 79.2634 38.4645 79.2624 38.4652 79.261C38.4657 79.2599 38.4647 79.2582 38.4652 79.2571C38.5332 79.1175 38.6296 78.934 38.6869 78.8026C38.9405 78.2225 39.0249 77.7253 39.2032 77.1641C39.6766 75.9761 39.9368 74.7296 40.5886 73.9529C40.7671 73.7402 41.0581 73.6584 41.3598 73.5778L41.7651 72.8444C45.9178 74.4366 50.566 74.8638 55.2094 73.8107C56.2686 73.5705 57.2913 73.2596 58.2799 72.8865C58.3938 73.0883 58.6055 73.4762 58.6622 73.5739C58.9688 73.6736 59.3034 73.725 59.5761 74.1277C60.0638 74.9599 60.3973 75.9444 60.8035 77.1336C60.9819 77.6947 61.07 78.1919 61.3236 78.7721C61.3814 78.9043 61.4772 79.0905 61.5453 79.2304C62.0219 80.2185 63.1289 80.671 64.0193 80.2425C64.9027 79.8175 65.2404 78.6855 64.7802 77.7027C64.7118 77.5611 64.6178 77.3554 64.547 77.2214C64.2509 76.6617 63.9153 76.2859 63.5872 75.7968C62.9097 74.7381 62.3478 73.8587 62.0004 72.959C61.8551 72.495 62.0249 72.2064 62.138 71.9049C62.0703 71.8273 61.9253 71.3891 61.8398 71.183C66.7901 68.2634 70.4415 63.6028 72.1563 58.2201C72.3878 58.2565 72.7903 58.3276 72.921 58.3538C73.1901 58.1765 73.4376 57.9451 73.9228 57.9833C74.8783 58.1213 75.8589 58.4758 77.043 58.9C77.5934 59.1105 78.0368 59.355 78.649 59.5187C78.7784 59.5533 78.9637 59.5856 79.1117 59.618C79.1236 59.6209 79.1341 59.6267 79.1461 59.6294C79.1541 59.6312 79.1652 59.6315 79.1728 59.6333C80.234 59.8614 81.2644 59.2814 81.4824 58.327C81.7003 57.3729 81.023 56.4043 79.9682 56.15C79.8147 56.1152 79.5972 56.056 79.4481 56.0278C78.8254 55.91 78.3187 55.939 77.7313 55.8903C76.4802 55.7593 75.4439 55.6529 74.5232 55.3632C74.1477 55.2177 73.8806 54.7715 73.7508 54.5879L73.0281 54.3778C73.4028 51.6701 73.3017 48.8521 72.6533 46.0325C71.9989 43.1867 70.8424 40.5839 69.2999 38.2907C69.4853 38.1223 69.8354 37.8127 69.9346 37.7216C69.9637 37.4009 69.9387 37.0646 70.2711 36.7094C70.9749 36.0494 71.8622 35.502 72.9325 34.8418C73.4405 34.5433 73.9101 34.3508 74.4199 33.9748C74.5352 33.8897 74.6926 33.7551 74.8138 33.6578C75.6722 32.9738 75.8698 31.7941 75.2535 31.0224C74.6372 30.2507 73.4429 30.178 72.5845 30.862C72.4623 30.9587 72.2965 31.0848 72.1868 31.179C71.7064 31.5919 71.4097 31.9996 71.0053 32.4279C70.1228 33.3233 69.3933 34.0703 68.5925 34.6088C68.2455 34.8106 67.7372 34.7408 67.5066 34.7272L66.8259 35.2123C62.9448 31.1472 57.6606 28.5482 51.9707 28.0433C51.9548 27.8051 51.9339 27.3746 51.9286 27.2451C51.6957 27.0224 51.4143 26.8323 51.3436 26.3513C51.2657 25.3902 51.3957 24.3562 51.5462 23.1087C51.6293 22.5259 51.7674 22.0417 51.791 21.4091C51.7963 21.2653 51.7877 21.0566 51.7871 20.9011C51.787 19.8043 50.9859 18.9149 49.9976 18.915ZM47.7569 32.7793L47.2254 42.1559L47.1872 42.175C47.1515 43.0138 46.4604 43.6836 45.6118 43.6836C45.2642 43.6836 44.9433 43.5721 44.6826 43.3819L44.6673 43.3895L36.9701 37.9393C39.3358 35.6157 42.3616 33.8987 45.8489 33.1078C46.4859 32.9633 47.1226 32.8561 47.7569 32.7793ZM52.2422 32.7793C56.3135 33.2795 60.0787 35.1209 62.964 37.9431L55.3165 43.359L55.2897 43.3475C54.6109 43.8427 53.6545 43.7198 53.1255 43.0572C52.9087 42.7858 52.795 42.4666 52.7813 42.1444L52.7737 42.1406L52.2422 32.7793ZM34.1788 41.4416L41.2068 47.7207L41.1992 47.7589C41.8335 48.3097 41.9271 49.2656 41.398 49.9283C41.1813 50.1997 40.8912 50.3818 40.5797 50.4668L40.5721 50.4973L31.5633 53.0945C31.1048 48.9066 32.093 44.8357 34.1788 41.4416ZM65.7668 41.4454C66.811 43.1361 67.6017 45.0243 68.0725 47.0714C68.5376 49.0939 68.6543 51.1128 68.4625 53.0639L59.4079 50.4591L59.4002 50.4209C58.5894 50.1996 58.0911 49.3758 58.2799 48.5495C58.3572 48.211 58.5371 47.9246 58.7808 47.713L58.777 47.6939L65.7668 41.4454ZM48.5561 48.2057H51.4354L53.2249 50.44L52.5825 53.2282L49.9976 54.4695L47.4051 53.2244L46.7627 50.4362L48.5561 48.2057ZM57.7866 55.8521C57.909 55.8459 58.0308 55.8569 58.1499 55.8788L58.1652 55.8597L67.4836 57.4333C66.1199 61.2604 63.5103 64.5758 60.0235 66.7945L56.4062 58.0673L56.4177 58.052C56.0854 57.2808 56.4179 56.3765 57.1824 56.0087C57.3782 55.9145 57.5827 55.8624 57.7866 55.8521ZM42.136 55.8903C42.8471 55.9002 43.485 56.3932 43.6502 57.1163C43.7275 57.4548 43.6899 57.7902 43.5622 58.0864L43.589 58.1208L40.01 66.7602C36.6638 64.6154 33.9985 61.404 32.5728 57.4639L41.811 55.8979L41.8263 55.917C41.9296 55.898 42.0344 55.8888 42.136 55.8903ZM49.9403 59.6753C50.188 59.6662 50.4393 59.7169 50.6782 59.8319C50.9914 59.9825 51.2334 60.2197 51.3856 60.5041H51.4201L55.9741 68.7233C55.3831 68.9212 54.7755 69.0904 54.154 69.2313C50.6711 70.0212 47.1993 69.7819 44.0555 68.7119L48.5981 60.5079H48.6058C48.8784 59.9989 49.3953 59.6953 49.9403 59.6753Z",fill:"white",stroke:"white",strokeWidth:"0.25"}))}})(a||(a={})),n(526867),n(303397),n(554326),n(720722),n(854673);var p=n(391159);n(271708);var m=n(967299),_=n(548998),h=n(230648),g=n(485486),f=n(869015),E=n(727959),y=n(128515),b=n(500132),v=n(925484),T=n(147518),I=n(392992),S=n(431743),A=n(994593),w=n(166826),C=n(352300),N=n(915158),L=n(933038),O=n(108966),R=n(368101),P=n(263509),D=n(549171),k=n(434087),M=n(330644),F=n(925669),x=n(923403),U=n(287422),B=n(903264),G=n(226755),V=n(977719),H=n(295373),z=n(334222),K=n(625634),W=n(781308),j=n(887861),Y=n(959985),$=n(533429),q=n(352971),X=n(576386),J=n(451894),Z=n(630129),Q=n(918253),ee=n(226191),et=n(651805),er=n(827825),en=n(633698),ea=n(356560),ei=n(955852),eo=n(64390),es=n(219151),el=n(32938),ec=n(827072),ed=n(26015),eu=n(113386),ep=n(837144),em=n(261637),e_=n(867224),eh=n(770285),eg=n(682370),ef=n(650509),eE=n(494989),ey=n(485106),eb=n(707383),ev=n(373800),eT=n(267196),eI=n(54279),eS=n(514675),eA=n(166970),ew=n(481432),eC=n(885536),eN=n(216436),eL=n(20479),eO=n(118314),eR=n(765281),eP=n(494199),eD=n(797876),ek=n(672615),eM=n(316663),eF=n(918765),ex=n(70414),eU=n(687811),eB=n(650385),eG=n(412745),eV=n(428383),eH=n(549059),ez=n(976161),eK=n(690776),eW=n(540057),ej=n(434476),eY=n(107636),e$=n(345114),eq=n(208900),eX=n(166073),eJ=n(805688),eZ=n(542915),eQ=n(851908),e0=n(885408),e1=n(738587),e2=n(553770),e3=n(419921),e8=n(538752);function e6(e,r,n){if(r===o.VTL.NO)return;let a=n??s.zl.get(p.Rg);if(r===o.VTL.YES_WITHOUT_REORDER){let r=s.zl.get(p.Gn).map(r=>r.id===e?{...r,lastAddedAtByUserId:{...r.lastAddedAtByUserId,[a]:Date.now()}}:r);s.zl.set(p.Gn,r);return}let[[i],l]=c()(s.zl.get(p.Gn),r=>r.id===e),d={id:e,lastAddedAtByUserId:{...i?.lastAddedAtByUserId||{},[a]:Date.now()}};s.zl.set(p.Gn,[d,...l])}m.A,_.A,h.A,g.A,f.A,E.A,y.A,b.A,v.A,T.A,I.A,S.A,A.A,w.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A,U.A,B.A,G.A,V.A,H.A,z.A,K.A,W.A,j.A,Y.A,$.A,q.A,X.A,J.A,Z.A,Q.A,ee.A,et.A,er.A,en.A,ea.A,ei.A,eo.A,es.A,el.A,ec.A,ed.A,eu.A,ep.A,em.A,e_.A,eh.A,eg.A,ef.A,eE.A,ey.A,eb.A,ev.A,eT.A,eI.A,eS.A,eA.A,ew.A,eC.A,eN.A,eL.A,eO.A,eR.A,eP.A,eD.A,ek.A,eM.A,eF.A,ex.A,eU.A,eB.A,eG.A,eV.A,eH.A,ez.A,eK.A,eW.A,ej.A,eY.A,e$.A,eq.A,eX.A,eJ.A,eZ.A,eQ.A,e0.A,e1.A,e2.A,e3.A,e8.A,(0,d.A)(()=>({advanced:{activity:(0,u.t)("whiteboard.shapes_sidebar.shapes.activity"),archive:(0,u.t)("whiteboard.shapes_sidebar.shapes.archive"),authentication:(0,u.t)("whiteboard.shapes_sidebar.shapes.authentication"),chat:(0,u.t)("whiteboard.shapes_sidebar.shapes.chat"),cloud:(0,u.t)("whiteboard.shapes_sidebar.shapes.cloud"),compute:(0,u.t)("whiteboard.shapes_sidebar.shapes.compute"),database:(0,u.t)("whiteboard.shapes_sidebar.shapes.database"),desktop:(0,u.t)("whiteboard.shapes_sidebar.shapes.desktop"),email:(0,u.t)("whiteboard.shapes_sidebar.shapes.email"),file:(0,u.t)("whiteboard.shapes_sidebar.shapes.file"),frontEndService:(0,u.t)("whiteboard.shapes_sidebar.shapes.frontEndService"),instant:(0,u.t)("whiteboard.shapes_sidebar.shapes.instant"),location:(0,u.t)("whiteboard.shapes_sidebar.shapes.location"),mobile:(0,u.t)("whiteboard.shapes_sidebar.shapes.mobile"),package:(0,u.t)("whiteboard.shapes_sidebar.shapes.package"),payment:(0,u.t)("whiteboard.shapes_sidebar.shapes.payment"),security:(0,u.t)("whiteboard.shapes_sidebar.shapes.security"),send:(0,u.t)("whiteboard.shapes_sidebar.shapes.send"),server:(0,u.t)("whiteboard.shapes_sidebar.shapes.server"),service:(0,u.t)("whiteboard.shapes_sidebar.shapes.service"),settings:(0,u.t)("whiteboard.shapes_sidebar.shapes.settings"),storage:(0,u.t)("whiteboard.shapes_sidebar.shapes.storage"),terminal:(0,u.t)("whiteboard.shapes_sidebar.shapes.terminal"),user:(0,u.t)("whiteboard.shapes_sidebar.shapes.user"),wallet:(0,u.t)("whiteboard.shapes_sidebar.shapes.wallet"),web:(0,u.t)("whiteboard.shapes_sidebar.shapes.web")}})),(0,d.A)(()=>({advanced:(0,u.t)("whiteboard.shapes_sidebar.section_title.advanced")}));var e4=(e=>(e[e.SelectedShape=0]="SelectedShape",e[e.ClosedPanel=1]="ClosedPanel",e[e.ClearedSearch=2]="ClearedSearch",e))(e4||{})},659891:(e,r,n)=>{n(848318),n(301168),n(186606),n(382902),n(910314),n(31898),n(381673),n(303397),n(972382),n(730143),n(625844),n(982323),n(125761),n(318147),n(554326),n(138528),n(679996),n(520779),n(720722),n(386252),n(293493),n(274016);var a=n(944239);n(345394),n(391159),n(122347),n(787735),(0,a.n)(e=>"developer"===e)},938627:(e,r,n)=>{n(848318),n(186606),n(989232),n(843484),n(760641),n(659891)},817697:(e,r,n)=>{n.d(r,{AZ:()=>R,ZH:()=>k,cN:()=>P,cs:()=>M,lV:()=>O,nX:()=>D});var a=n(848318),i=n(803565),o=n(186606),s=n(19180),l=n(382902),c=n(536384),d=n.n(c),u=n(656329),p=n(910314),m=n(297638),_=n(323201),h=n(886635),g=n(731560);a.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:i=!0,stickyAnimationState:o=h.k.DEFAULT},s)=>{let l=!i||o===h.k.DRAG_RETURN_TO_DLT,c=o===h.k.DRAG_ON_CANVAS,u=4===n,p=o===h.k.DRAG_RETURN_TO_DLT,m=o===h.k.DRAG_ON_CANVAS,_=16,f=25;r<1&&(u?(_=24,f=32):_=32);let E={[g.Sk]:1===n,[g.gz]:2===n,[g.eB]:3===n,[g.ID]:u};return a.createElement("div",{className:d()({[g.xI]:2===n,[g.t3]:3===n,[g.iD]:u}),style:{width:116*r,height:116*r}},a.createElement("div",{className:d()({...E,[g.ZJ]:!0,[g.B4]:l&&1===n||c&&2===n,[g.i0]:m,[g.BE]:p,[g.rh]:!p&&!i&&2===n}),style:{top:_*r,left:f*r,width:104*r,height:104*r},ref:s},a.createElement("div",{className:d()({[g.uh]:!0,[g.WX]:!0})},a.createElement("svg",{className:g.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none"},a.createElement("g",null,a.createElement("path",{className:d()(g.Wq,{[g.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),a.createElement("g",{className:g.BN},a.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},a.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),a.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},a.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:g.cq}),a.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},a.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:g.cq}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),a.createElement("defs",null,a.createElement("clipPath",{id:`stickyMaskV3-${n}`},a.createElement("path",{className:g.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),a.createElement("path",{className:g.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),a.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),a.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"1.5"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"4"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),a.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),a.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),a.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let f="#699BF7";function E({toolbarIconScale:e,children:r,isBeingDraggedForPlacement:n}){let i=u.Ay.safari&&n;return a.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",className:d()({[g.WX]:!i,[g.$d]:!0})},r)}let y=new Map([[o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[o.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),b=2/38,v=.5/38,T=8/38;function I(){let e=(0,l.md)(p.lC),r=(0,l.md)(p.U9);return a.useMemo(()=>S(e,r),[r,e])}let S=(e,r)=>r===o.xbm.NONE?"#000000":_.F.format(e);function A(e){let r=_.F.parse(e),n=o.DV9?.getShapeWithTextStrokeColorForFill(i.oU(r));return n?_.F.format((0,i.aH)(n)):"#757575"}function w(e){return a.useMemo(()=>A(e),[e])}function C(e,r){if(!r)return{};let{styleType:n,isDragging:a}=r,i=function(e){let r=y.get(e);return void 0===r?112:r}(e);return{strokeWidth:n===o.xbm.NONE?i*v:i*b,strokeOpacity:n===o.xbm.NONE?.2:1,strokeDasharray:n===o.xbm.DASHED?`${i*T} ${i*T}`:"",strokeLinecap:"round",className:m.s.if(a,m.s.hidden).$}}function N(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:a,isDragging:i}=r;return r?{stroke:(0,s.k)().figjam_track_stroke_color?S(l.zl.get(p.lC),l.zl.get(p.U9)):A(e),strokeWidth:function(e,r,n=!1){return n&&(e===o.xbm.SOLID||e===o.xbm.DASHED)?4*r:0}(n,a,i),strokeDasharray:function(e,r,n=!1){return n&&e===o.xbm.DASHED?`${16*r} ${10*r}`:""}(n,a,i),strokeLinecap:"round"}:{}}function L(e){return!!e&&e.styleType===o.xbm.NONE}function O(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function R(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),a.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),a.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),a.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function P(){return a.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none"},a.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),a.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),a.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),a.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),a.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),a.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function D(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function k(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),a.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function M(){return a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),a.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},l)=>{let c=I(),d=w(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:g.cq,ref:l,...N(e,n)}),a.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},l)=>{let c=I(),d=w(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:g.cq,ref:l,...N(e,n)}),a.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},l)=>{let c=I(),d=w(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:g.cq,ref:l,...N(e,n)}),a.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))}),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:L(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),a.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:i},o)=>a.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!i},a.createElement("path",{d:L(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:g.cq,ref:o}),a.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...N(e,n)})))},817710:(e,r,n)=>{n.d(r,{gT:()=>i,hV:()=>o});var a=n(382902);(0,n(231159).bt)(e=>e.universalInsertModal.showing);let i=(0,a.eU)(!1),o=(0,a.eU)(!1)},528206:(e,r,n)=>{n.d(r,{J:()=>l});var a=n(848318),i=n(536384),o=n.n(i),s=n(731560);function l({className:e,disabled:r,isDragging:n,children:i,"aria-hidden":l}){return a.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n,[s.ll]:r}),"data-fullscreen-intercept":!0},i)}},62053:(e,r,n)=>{n.d(r,{H1:()=>s,HY:()=>i,NZ:()=>l,b:()=>d,fK:()=>o,tV:()=>c,yl:()=>u});var a=n(186606);let i="delightful-toolbar",o="delightful_toolbar";a.NLJ.VECTOR_PENCIL;let s=14,l="delightful-toolbar-stamp-button",c="action_open_universal_insert_collage_modal",d="delightful-toolbar-universal-insert-button-icon",u="delightful-toolbar-universal-insert"},970981:(e,r,n)=>{n.d(r,{BG:()=>i});var a=n(186606);function i(e){return(e===a.NLJ.VECTOR_PENCIL||e===a.NLJ.ERASER||e===a.NLJ.HIGHLIGHTER||e===a.NLJ.WASHI_TAPE)&&(e===a.NLJ.VECTOR_PENCIL||e===a.NLJ.HIGHLIGHTER)}n(656329)},590641:(e,r,n)=>{n.d(r,{L:()=>d});var a=n(19180),i=n(656329),o=n(227276),s=n(459403),l=n(125761),c=n(200300);function d(){let e=!(!(0,l.iZ)()||(0,i.Wv)()||(0,s.ck)()),r=(0,o.I7)("exp_figjam_ui3_toolbelt",void 0,!0).getConfig().getValue("ui3_toolbelt",!1),n=(0,c.o3)(c.nt.figjamUI3Toolbelt);return!!(0,a.k)().figjam_ui3_toolbelt_dev||!!e&&(r||n)}},792220:(e,r,n)=>{n.d(r,{C:()=>s});var a=n(656329),i=n(355755),o=n(125761);function s(){let e=(0,i.aV)(),r=(0,o.iZ)();return!e&&!a.Ay.isIpadNative&&!!r}},476077:(e,r,n)=>{n.d(r,{G:()=>d});var a=n(382902),i=n(817710),o=n(590641),s=n(480959),l=n(123863),c=n(741358);function d(){let e=function(){let e=(0,o.L)(),r=(0,a.md)(i.hV),n=(0,a.md)(i.gT);return e?r:n}(),r=(0,c.z)(),n=(0,s.w)(),d=(0,l.g)();return!e&&(n||r||d)}},480959:(e,r,n)=>{n.d(r,{w:()=>o});var a=n(425835),i=n(707520);function o(){let e=(0,a.kD)(),r=(0,a.tS)(),n=(0,i.Td)();return!!e&&r&&n}},123863:(e,r,n)=>{n.d(r,{g:()=>s});var a=n(428941),i=n(355755),o=n(792220);function s(){let e=(0,i.aV)(),r=(0,o.C)(),n=(0,a.N)();return!e&&r&&n}},741358:(e,r,n)=>{n.d(r,{z:()=>l});var a=n(355755),i=n(707520),o=n(382293),s=n(792220);function l(){let e=(0,a.aV)(),r=(0,s.C)(),n=(0,o.vt)(),l=(0,i.Td)();return!e&&r&&l&&!n}},620847:(e,r,n)=>{n.d(r,{_:()=>m});var a=n(301168),i=n(382902),o=n(995218),s=n(887836),l=n(686464),c=n(355755),d=n(590641),u=n(123863),p=n(741358);function m(){let e=(0,a.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)()&&e,n=(0,d.L)(),m=(0,c.aV)(),_=(0,i.md)(s.VF),h=(0,l.q)(),g=(0,a.d4)(e=>e.mirror?.appModel.isReadOnly),f=(0,p.z)(),E=(0,u.g)();return n?r&&!m&&_&&h:r&&(!g||f||E)}},712190:(e,r,n)=>{n.d(r,{Mm:()=>o,XD:()=>s,sF:()=>c,vO:()=>l});var a=n(848318);let i="#B3B3B3",o=a.forwardRef(({color:e=i,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:31*r,height:33*r,viewBox:"0 0 31 33",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3484 1.24428C20.5997 0.752516 21.2022 0.557643 21.6939 0.809017L29.4918 4.79506C30.3786 5.24836 30.5855 6.42412 29.9068 7.15295L23.8487 13.6581C23.4723 14.0623 22.8395 14.0848 22.4354 13.7084C22.0312 13.3321 22.0087 12.6993 22.3851 12.2951L26.7031 7.65837C23.3565 7.93 21.1523 9.25901 19.5061 11.1229C17.5967 13.2849 16.3954 16.2071 15.1574 19.3441C15.1068 19.4724 15.056 19.6011 15.0052 19.7301C13.8426 22.6811 12.6142 25.7988 10.6634 28.215C8.56933 30.8086 5.65676 32.5872 1.2261 32.7215C0.674068 32.7382 0.212997 32.3043 0.196269 31.7522C0.17954 31.2002 0.613489 30.7391 1.16552 30.7224C4.98486 30.6067 7.36139 29.1209 9.10725 26.9586C10.8608 24.7867 11.9886 21.9273 13.1934 18.8727C13.2278 18.7852 13.2624 18.6976 13.297 18.6099C14.5122 15.5307 15.8266 12.2679 18.0071 9.799C20.0405 7.49663 22.7904 5.91827 26.7668 5.64826L20.7836 2.58984C20.2918 2.33847 20.097 1.73604 20.3484 1.24428Z",fill:e,ref:n}))),s=a.forwardRef(({color:e=i,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:31*r,height:34*r,viewBox:"0 0 32 34",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:n}))),l=a.forwardRef(({color:e=i,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:28*r,height:30*r,viewBox:"0 0 28 30",fill:"none"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8987 2.17466C17.3465 2.18604 16.8897 1.74765 16.8783 1.19548C16.8669 0.643314 17.3053 0.186467 17.8575 0.175085L26.341 0.000216699C26.8931 -0.011165 27.35 0.427228 27.3614 0.979396L27.5362 9.46288C27.5476 10.015 27.1092 10.4719 26.5571 10.4833C26.0049 10.4947 25.548 10.0563 25.5367 9.50409L25.4197 3.82765L1.73377 29.4084C1.35854 29.8137 0.725841 29.838 0.320597 29.4628C-0.0846483 29.0875 -0.108983 28.4548 0.266244 28.0496L24.3476 2.04173L17.8987 2.17466Z",fill:e,ref:n}))),c=a.forwardRef(({color:e=i,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:28*r,height:30*r,viewBox:"-1 -1 31 33",fill:"none"},a.createElement("line",{x1:"1",y1:"30",x2:"28",y2:"1",stroke:e,strokeWidth:2,strokeLinecap:"round",ref:n})));a.forwardRef(({color:e=i,toolbarIconScale:r=1},n)=>a.createElement("svg",{width:28*r,height:24*r,viewBox:"0 0 17 12",fill:"none"},a.createElement("path",{d:"M1.5 10.9999C1.5 11.2761 1.27614 11.4999 1 11.4999C0.723858 11.4999 0.5 11.2761 0.5 10.9999C0.5 7.14238 3.62715 4.01523 7.48468 4.01523H15.2961L12.1458 0.85288C11.9509 0.657247 11.9515 0.340665 12.1471 0.145775C12.3427 -0.0491153 12.6593 -0.0485136 12.8542 0.147119L16.8542 4.16236C16.9478 4.25631 17.0002 4.38359 17 4.5162C16.9997 4.64881 16.9468 4.77589 16.8529 4.86948L12.8529 8.85408C12.6572 9.04897 12.3406 9.04836 12.1458 8.85272C11.9509 8.65708 11.9515 8.3405 12.1471 8.14561L15.2896 5.01523H7.48468C4.17943 5.01523 1.5 7.69466 1.5 10.9999Z",stroke:e,strokeWidth:1,fill:"none",ref:n})))},564510:(e,r,n)=>{var a=n(848318),i=n(186606);n(967688),n(271708),n(817697),n(62053),a.createContext({hoveredShape:null,onMouseEnter:()=>{},onMouseLeave:()=>{},draggedShape:null,shouldDragCancel:!1,onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{}}),Array.from(new Map([["SQUARE",i.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",i.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",i.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",i.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",i.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",i.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",i.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",i.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",i.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",i.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",i.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",i.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",i.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",i.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",i.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",i.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",i.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",i.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",i.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",i.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",i.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",i.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",i.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",i.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e]),i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,i.NLJ.SHAPE_WHITEBOARD_ELLIPSE,i.NLJ.SHAPE_WHITEBOARD_SQUARE},98154:(e,r,n)=>{n.d(r,{X:()=>l}),n(848318),n(301168),n(656329);var a=n(130953),i=n(386700),o=n(513445),s=n(62053);function l({source:e,openedViaHover:r=!1,offsetFromToolbelt:n=s.H1}){let l=(0,a.Tc)(s.NZ),c=(0,a.Tc)(s.HY),d=l||c;if(d){let a=d.getBoundingClientRect(),s=a.x+a.width/2,l=a.y-(o.l+2)-n;i.CB.handleShortcutPressWithType({viewportX:s,viewportY:l,source:e,openedViaHover:r,wheelType:"STAMP"}),i.CB.handleShortcutRelease(s,l)}}},74079:(e,r,n)=>{n.d(r,{mI:()=>s});var a=n(848318),i=n(661699),o=n(620847);function s(){let e=(0,o._)(),r=l(),n=r?r.width:null;return(0,a.useMemo)(()=>e&&"number"==typeof n?n:0,[n,e])}let l=()=>(function(e){let r=(0,o._)(),[n,i]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{if(!e)return;let r=new ResizeObserver(r=>{for(let n of r)e===n.target&&i(e.getBoundingClientRect())});return i(e.getBoundingClientRect()),r.observe(e),()=>r.disconnect()},[e,i]),(0,a.useLayoutEffect)(()=>{if(!e)return;let r=()=>{i(e.getBoundingClientRect())};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[e]),r&&n})(i.C()?.whiteboardToolbeltNode)},120015:(e,r,n)=>{n.d(r,{iH:()=>a}),n(848318),n(301168),n(186606),n(895531),n(436471),n(865114),n(795240),n(262709),n(353231),n(48736),n(46641),n(601167),n(730143),n(752181),n(656320),n(625537),n(589673);var a=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(a||{})},923659:(e,r,n)=>{n.d(r,{bj:()=>b});var a=n(186606),i=n(320953),o=n(382902),s=n(566841),l=n(686464),c=n(410151);let d=(0,o.eU)(null),u=(0,o.eU)(null),p=(0,o.eU)({x:0,y:0}),m=(0,o.eU)(null),_=(0,o.eU)(!1),h=(0,o.eU)(!1);(0,o.eU)(e=>e(u)),(0,o.eU)(e=>e(h)),(0,o.eU)(e=>e(p));let g=(0,o.eU)(!1),f="new_preview",E=null;function y(){E&&E.abort(f),E=null}(0,o.eU)(null,async(e,r,n,i)=>{let o=!e(_)&&(0,c.t)(n.template,e(u));if(e(h)||o||e(g))return!1;r(T),r(_,!0),r(d,i.previewManager),r(u,n.template),y();let s=(E||(E=new TaskController({priority:"background"})),E);function b(r){return scheduler.postTask(()=>!!((0,c.t)(n.template,e(u))&&e(l.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===f)return!1;throw e})}s.setPriority(i.priority);let v=e(d),I=(async()=>{try{let o=await e(S(n)),s=v?.nodeType===a.Z6A.SECTION?v.options:null,l=i?.position||null;if(!await b(()=>a.Hyj.prepareTemplatePreview(o,s,l))||!await b(()=>a.Hyj.insertTemplatePreview(i.moveViewportAfterPreview,i.viewportOptions||null)))return!1;let c=a.Hyj.getTemplatePreviewSize();return r(p,c),r(_,!1),!0}catch(a){throw(0,c.t)(n.template,e(u))&&r(T),a}})();return r(m,I),await I});let b=(0,o.eU)(null,async(e,r,n)=>{let o=e(m);if(!o||e(h))return!1;r(h,!0);try{if(!await o||!e(l.w))return!1;return await scheduler.postTask((0,i.nc)(n.editScopeType,"commit-figjam-template-preview",()=>a.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(u,null),r(g,!0),r(I),!0}finally{r(h,!1)}}),v=(0,o.eU)(null,(e,r)=>{r(g,!1),e(_)&&(y(),r(T))}),T=(0,o.eU)(null,(e,r)=>{r(u,null),r(m,null),r(_,!1),r(h,!1),e(l.w)&&a.Hyj.clearTemplatePreview()});(0,o.eU)(null,(e,r)=>{r(v),r(T)});let I=(0,o.eU)(null,(e,r)=>{r(d,null),a.Hyj.clearSectionPreviewSupport()}),S=(0,o.Iz)(e=>(0,o.eU)(async()=>await (0,s.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,c.t)(e.template,r.template))},589673:(e,r,n)=>{n(967688),n(752181),n(431063),n(177755)},833420:(e,r,n)=>{r.EY=r.Yf=r.uA=r.Y1=void 0,n(427626);var a=n(652954);Object.defineProperty(r,"Y1",{enumerable:!0,get:function(){return a.AutoLayout}}),n(446613);var i=n(543912);Object.defineProperty(r,"uA",{enumerable:!0,get:function(){return i.Component}});var o=n(332171);Object.defineProperty(r,"Yf",{enumerable:!0,get:function(){return o.ComponentSet}}),n(761594),n(379065),n(405365),n(68962),n(45509),n(853291);var s=n(366800);Object.defineProperty(r,"EY",{enumerable:!0,get:function(){return s.Text}}),n(781963),n(501678),n(966286),n(921262)},652954:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let a=n(56636),i=n(848318),o=n(505206),s=n(427626),l=n(141760),c=n(236352),d=n(640534);function u(e,r,n){let{style:a,overlayStyle:i,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},a),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:i,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=i.forwardRef(function(e,r){let{attributes:n,children:l}=e,p=(0,a.__rest)(e,["attributes","children"]),m=i.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},p),{parent:m}));let _=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),p)),h=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},_),{parent:m})),g=u(_,m,i.Children.count(l)>0);return i.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:_}},(0,s.domNodeFromFrame)({figmaLayerName:_.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([h,r])}))})},505206:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.css=r.ABSOLUTE_CLASS=r.getInvalidFillParentCheckerRef=r.warnInvalidConstraints=r.mergeRefs=r.isAutoLayout=r.ParentContext=void 0;let a=n(848318),i=n(808292),o=n(491186).A;function s(e){return(0,i.exists)(e)&&"autolayout"===e.type}r.ParentContext=a.createContext(null),r.isAutoLayout=s,r.mergeRefs=function(e){return r=>{for(let n of e)"function"==typeof n?n(r):null!=n&&(n.current=r)}},r.warnInvalidConstraints=function(e){let{parent:r}=e;e.x&&0!==e.x&&s(r)&&console.warn(`'x=${JSON.stringify(e.x)}' is being used inside an AutoLayout. Constraints are only valid when inside a Frame`),e.y&&0!==e.y&&s(r)&&console.warn(`'y=${JSON.stringify(e.y)}' is being used inside an AutoLayout. Constraints are only valid when inside a Frame`)},r.getInvalidFillParentCheckerRef=function(e){return r=>{let{name:n,parent:a,width:o,height:s,length:l,direction:c}=e;if("fill-parent"!==o&&"fill-parent"!==s&&"fill-parent"!==l||!(0,i.exists)(r))return;let d=r.parentElement,u=(0,i.exists)(null==d?void 0:d.dataset.layer);if((0,i.exists)(a)&&!u)console.warn(`Layer "${n}" has 'fill-parent' set, but is wrapped in a non figma-react element. To fix this you can replace the wrapper element with a react Fragment (<></>) or a figma-react <AutoLayout> instead. Or you can add a <FigmaReact> tag between the wrapper and "${n}".`);else if((0,i.exists)(a)&&"frame"===a.type){let e,r;"fill-parent"===o&&(e="width",r="x={{ type: 'left-right', leftOffset: 0 rightOffset: 0 }}"),"fill-parent"===s&&(e="height",r="y={{ type: 'top-bottom', topOffset: 0 bottomOffset: 0 }}"),"fill-parent"===l&&(e=l,r="vertical"===c?"y={{ type: 'top-bottom', topOffset: 0 bottomOffset: 0 }}":"x={{ type: 'left-right', leftOffset: 0 rightOffset: 0 }}"),console.warn(`Layer "${n}" has ${e}="fill-parent" set, but "fill-parent" is not valid when the parent is a Frame. Either use <AutoLayout> for the parent or use ${r} instead of ${e}="fill-parent"`)}}},r.ABSOLUTE_CLASS="fg-absolute";let l=o({key:"figma-codegen",nonce:window.INITIAL_OPTIONS.csp_nonce});r.css=function(e){let n=(null==e?void 0:e.position)==="absolute",a=(0,l.css)(e);return n?`${a} ${r.ABSOLUTE_CLASS}`:a}},346406:(e,r,n)=>{n.d(r,{_:()=>s});var a=n(382769),i=n(667696),o=n(911891);class s{constructor(){this.queues_={},o.r.forEach(e=>{this.queues_[e]=new i.C}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(e,r){if(void 0!==(r=Object.assign({},r)).signal){if(null===r.signal||!("aborted"in r.signal)||"function"!=typeof r.signal.addEventListener)return Promise.reject(TypeError("'signal' is not a valid 'AbortSignal'"));if(r.signal&&r.signal.priority&&!o.r.includes(r.signal.priority))return Promise.reject(TypeError(`Invalid task priority: '${r.signal.priority}'`))}if(void 0!==r.priority&&(null===r.priority||!o.r.includes(r.priority)))return Promise.reject(TypeError(`Invalid task priority: '${r.priority}'`));if(void 0===r.delay&&(r.delay=0),r.delay=Number(r.delay),r.delay<0)return Promise.reject(TypeError("'delay' must be a positive number."));let n={callback:e,options:r,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&!this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},a=new Promise((e,r)=>{n.resolve=e,n.reject=r});return this.schedule_(n),a}schedule_(e){let r=e.options.signal;if(r){if(r.aborted){e.reject(new DOMException("The task was aborted.","AbortError"));return}e.abortCallback=()=>{e.onTaskAborted()},r.addEventListener("abort",e.abortCallback)}if(e.options.delay>0){e.hostCallback=new a.g(()=>{e.hostCallback=null,this.onTaskDelayExpired_(e)},null,e.options.delay);return}this.pushTask_(e),this.scheduleHostCallbackIfNeeded_()}onTaskDelayExpired_(e){this.pushTask_(e),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(e){let r=this.signals_.get(e);if(void 0===r)throw Error("Attempting to change priority on an unregistered signal");if(r===e.priority)return;let n=this.queues_[r];this.queues_[e.priority].merge(n,r=>r.options.signal===e),this.signals_.set(e,e.priority)}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){let e=this.nextTaskPriority_();null!=e&&("background"!==e&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new a.g(()=>{this.schedulerEntryCallback_()},e,0)))}pushTask_(e){let r;if(r=e.options.priority?e.options.priority:e.options.signal&&e.options.signal.priority?e.options.signal.priority:"user-visible",!o.r.includes(r))throw TypeError(`Invalid task priority: ${r}`);if(e.options.signal&&e.options.signal.priority){let r=e.options.signal;this.signals_.has(r)||(r.addEventListener("prioritychange",()=>{this.onPriorityChange_(r)}),this.signals_.set(r,r.priority))}this.queues_[r].push(e)}runNextTask_(){let e=null;do{let r=this.nextTaskPriority_();if(null==r)return;e=this.queues_[r].takeNextTask()}while(e.isAborted())try{let r=e.callback();e.resolve(r)}catch(r){e.reject(r)}finally{e.onTaskCompleted()}}nextTaskPriority_(){for(let e=0;e<o.r.length;e++){let r=o.r[e];if(!this.queues_[r].isEmpty())return r}return null}}},712503:(e,r,n)=>{n.d(r,{i:()=>o,w:()=>i});var a=n(911891);class i extends Event{constructor(e,r){if(!r||!a.r.includes(r.previousPriority))throw TypeError(`Invalid task priority: '${r.previousPriority}'`);super(e),this.previousPriority=r.previousPriority}}class o extends AbortController{constructor(e={}){if(super(),null==e&&(e={}),"object"!=typeof e)throw TypeError("'init' is not an object");let r=void 0===e.priority?"user-visible":e.priority;if(!a.r.includes(r))throw TypeError(`Invalid task priority: '${r}'`);this.priority_=r,this.isPriorityChanging_=!1,function(e){let r=e.signal;Object.defineProperties(r,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),r.addEventListener("prioritychange",e=>{r.onprioritychange&&r.onprioritychange(e)})}(this)}setPriority(e){if(!a.r.includes(e))throw TypeError("Invalid task priority: "+e);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority===e)return;this.isPriorityChanging_=!0;let r=this.priority_;this.priority_=e;let n=new i("prioritychange",{previousPriority:r});this.signal.dispatchEvent(n),this.isPriorityChanging_=!1}}},491383:(e,r,n)=>{n.d(r,{Tj:()=>a}),n(82433);let a={bg:"var(--xp1z7en)",bgAssistive:"var(--xkqspef)",bgAssistiveHover:"var(--xrs1oqh)",bgAssistivePressed:"var(--x1v751g3)",bgAssistiveSecondary:"var(--x872b3y)",bgAssistiveTertiary:"var(--x1715ifn)",bgBrand:"var(--xznhjno)",bgBrandHover:"var(--x1bkwq79)",bgBrandPressed:"var(--x1yk8dxs)",bgBrandSecondary:"var(--x88e7g0)",bgBrandTertiary:"var(--xzt4mmc)",bgComponent:"var(--x1s20yk6)",bgComponentHover:"var(--x1e42dxd)",bgComponentPressed:"var(--x1f6f292)",bgComponentSecondary:"var(--x1y6jtj8)",bgComponentTertiary:"var(--x1rmyiv1)",bgComponentTertiaryHover:"var(--xiiz0be)",bgDanger:"var(--x1a2hwto)",bgDangerHover:"var(--x10dk80x)",bgDangerPressed:"var(--xarpv2q)",bgDangerSecondary:"var(--xdhzrkq)",bgDangerTertiary:"var(--x3rvex)",bgDesign:"var(--xj7amjv)",bgDesignHover:"var(--x1n32kkc)",bgDesignPressed:"var(--x1yvizo7)",bgDesignSecondary:"var(--xumjsby)",bgDesignTertiary:"var(--x1gxi5op)",bgDesktopBackgrounded:"var(--xrdnlov)",bgDesktopBackgroundedDisabled:"var(--xjb3d21)",bgDesktopBackgroundedHover:"var(--xbgjlli)",bgDesktopBackgroundedPressed:"var(--xrj74at)",bgDesktopBackgroundedSecondary:"var(--x1sw5d2v)",bgDesktopBackgroundedTertiary:"var(--x1afvzib)",bgDesktopForeground:"var(--x1i5g9qg)",bgDesktopForegroundDisabled:"var(--x137tovj)",bgDesktopForegroundHover:"var(--x4jdk4a)",bgDesktopForegroundPressed:"var(--xp46n8d)",bgDesktopForegroundSecondary:"var(--x1mzelhl)",bgDesktopForegroundTertiary:"var(--x1rhtp7f)",bgDesktopFullscreen:"var(--x19ak431)",bgDesktopFullscreenDisabled:"var(--xs548fu)",bgDesktopFullscreenHover:"var(--x5lb10x)",bgDesktopFullscreenPressed:"var(--xnh7jcz)",bgDesktopFullscreenSecondary:"var(--x1g20mz)",bgDesktopFullscreenTertiary:"var(--xdw0daf)",bgDisabled:"var(--xgwpav8)",bgDisabledSecondary:"var(--xm29n2f)",bgElevated:"var(--x14ma859)",bgElevatedHover:"var(--xn7tb2)",bgFigjam:"var(--x13gc2df)",bgFigjamHover:"var(--x1godfoe)",bgFigjamPressed:"var(--x11b92up)",bgFigjamSecondary:"var(--x16w5nxc)",bgFigjamTertiary:"var(--x5khlaw)",bgFs:"var(--x12abm5p)",bgFsAssistive:"var(--xe1upak)",bgFsAssistiveSecondary:"var(--x11ogvo1)",bgFsAssistiveTertiary:"var(--xpfnyv9)",bgFsComponent:"var(--x1gz4tvc)",bgFsComponentSecondary:"var(--x1hpy6p2)",bgFsComponentTertiary:"var(--x1ox6upo)",bgFsDesign:"var(--xx7cj47)",bgFsDesignSecondary:"var(--xuwp2ks)",bgFsDesignTertiary:"var(--x1pc9hzf)",bgFsMeasure:"var(--xx9as9h)",bgFsMeasureHover:"var(--xcms85x)",bgFsMeasureSecondary:"var(--x1n95nbh)",bgFsMeasureTertiary:"var(--xlgz2k0)",bgFsSelected:"var(--x19jxdqu)",bgFsSelectedSecondary:"var(--x14qbctr)",bgFsTertiary:"var(--xd7r8z5)",bgHandoff:"var(--x6oit1w)",bgHandoffHover:"var(--xd9k3ew)",bgHandoffPressed:"var(--x1gtdfap)",bgHandoffSecondary:"var(--x1l25mbs)",bgHandoffTertiary:"var(--x26eov)",bgHover:"var(--xew6hgh)",bgInfo:"var(--x1i2e4ki)",bgInverse:"var(--xd3sayf)",bgMeasure:"var(--x1hmm3wk)",bgMeasureHover:"var(--xl6f1hu)",bgMeasurePressed:"var(--x1p4ioyz)",bgMeasureSecondary:"var(--x1903zyw)",bgMeasureTertiary:"var(--x196vtnw)",bgMenu:"var(--x76lalo)",bgMenuDisabled:"var(--x788v3r)",bgMenuHover:"var(--xbse0ua)",bgMenuPressed:"var(--x16mozyl)",bgMenuSecondary:"var(--x3czsry)",bgMenuSelected:"var(--x881pox)",bgMenuSelectedHover:"var(--x1kp8jk7)",bgMenuSelectedPressed:"var(--x1q3oxia)",bgMenuSelectedSecondary:"var(--xr37xmm)",bgMenuSelectedTertiary:"var(--x7zyygo)",bgMenuTertiary:"var(--xedas2c)",bgOnselected:"var(--x18ogj1g)",bgOnselectedHover:"var(--x103p9ha)",bgOnselectedPressed:"var(--xquxm60)",bgPressed:"var(--xh7jg82)",bgSecondary:"var(--xt341mt)",bgSecondaryHover:"var(--x1chpa49)",bgSecondaryPressed:"var(--x1ouq215)",bgSelected:"var(--xt5e0wg)",bgSelectedHover:"var(--x1267qt1)",bgSelectedPressed:"var(--xfy7fhp)",bgSelectedSecondary:"var(--x1ou1ba6)",bgSelectedStrong:"var(--x1fwib8l)",bgSelectedTertiary:"var(--x10c8pdy)",bgStrongHover:"var(--x1jldmgy)",bgStrongPressed:"var(--x1tk4kzk)",bgSuccess:"var(--x1tkfiha)",bgSuccessHover:"var(--xnzlmwo)",bgSuccessPressed:"var(--x1o5hprf)",bgSuccessSecondary:"var(--x1u04af3)",bgSuccessTertiary:"var(--x15xgdlu)",bgTertiary:"var(--x1fwoq0)",bgToolbar:"var(--xt3evaj)",bgToolbarDisabled:"var(--x20shzx)",bgToolbarHover:"var(--xecejxa)",bgToolbarPressed:"var(--xgm5k16)",bgToolbarSecondary:"var(--xz6o0ac)",bgToolbarSelected:"var(--xx4drbu)",bgToolbarSelectedHover:"var(--xb6h5v5)",bgToolbarSelectedPressed:"var(--xqv80ln)",bgToolbarSelectedSecondary:"var(--x1uzoihm)",bgToolbarSelectedTertiary:"var(--xdjyzpm)",bgToolbarTertiary:"var(--x1089tse)",bgTooltip:"var(--x1lzicsm)",bgTooltipDisabled:"var(--xzrrqfv)",bgTooltipHover:"var(--x1e0pnj4)",bgTooltipPressed:"var(--xtdc6yd)",bgTooltipSecondary:"var(--xmmc9y5)",bgTooltipSelected:"var(--xxfz60a)",bgTooltipSelectedHover:"var(--xin7w92)",bgTooltipSelectedPressed:"var(--x14tz0nj)",bgTooltipSelectedSecondary:"var(--x1gaela8)",bgTooltipSelectedTertiary:"var(--x1bzkni1)",bgTooltipTertiary:"var(--x1ppaiml)",bgTransparentHover:"var(--x14f2dr8)",bgTransparentPressed:"var(--x12yipjg)",bgWarning:"var(--x1erydca)",bgWarningHover:"var(--xct77kp)",bgWarningPressed:"var(--x1810f85)",bgWarningSecondary:"var(--xa165oi)",bgWarningTertiary:"var(--x1imp591)",bghoverondarkcanvas:"var(--x1kr3hfy)",bghoveronlightcanvas:"var(--x1b0vpvu)",bghovertransparent:"var(--xbgii0n)",bginspectpadding:"var(--x1x8aiup)",bginspectpaddingtertiary:"var(--x1ulkidh)",bginspectspacing:"var(--xsys07q)",bgsecondaryoncanvas:"var(--xqplr57)",bgselectedarea:"var(--xrsktmh)",bgswitchoff:"var(--x1hfn6in)",bgtoolbarmodeswitcher:"var(--x10exyb7)",bgtoolbarmodeswitcherHover:"var(--xt0yjrg)",bgtransparent:"var(--x1a6shn9)",bgtransparentSecondaryHover:"var(--x144ebg8)",bgtransparentSecondaryPressed:"var(--xpj5jr2)",bgtransparentsecondary:"var(--xo7qbfu)",bgvoting:"var(--x12d3tyu)",bgvotingsecondary:"var(--x7omdll)",bgvotingtertiary:"var(--xwq3kga)",bgvotingwheeldial:"var(--x7f8yif)",bgvotingwheelhover:"var(--xv4et58)",border:"var(--xnwjt7a)",borderAssistive:"var(--xzvut4d)",borderAssistiveStrong:"var(--x1svdxfv)",borderBrand:"var(--x1ehtixw)",borderBrandStrong:"var(--xhgjq7m)",borderComponent:"var(--x1wdsjgz)",borderComponentHover:"var(--xrghtiy)",borderComponentSelected:"var(--x1a9ckoh)",borderComponentStrong:"var(--xh3xwy6)",borderDanger:"var(--x1hbxvg6)",borderDangerStrong:"var(--x5jevv0)",borderDesign:"var(--x1gzu65y)",borderDesignStrong:"var(--xesth0)",borderDesktopBackgrounded:"var(--x17ihvml)",borderDesktopBackgroundedDisabled:"var(--xahwq6b)",borderDesktopBackgroundedStrong:"var(--x1cygc0z)",borderDesktopForeground:"var(--xfo3pvd)",borderDesktopForegroundDisabled:"var(--x237v4c)",borderDesktopForegroundStrong:"var(--x104lz4e)",borderDesktopFullscreen:"var(--xxlollq)",borderDesktopFullscreenDisabled:"var(--x8mfyoj)",borderDesktopFullscreenStrong:"var(--xaft15i)",borderDisabled:"var(--x1du9j5l)",borderDisabledStrong:"var(--x1ud8svn)",borderFigjam:"var(--x1i5hqyi)",borderFigjamStrong:"var(--x160v4lt)",borderFs:"var(--x4isf5l)",borderFsAssistive:"var(--x1nsjzm3)",borderFsAssistiveStrong:"var(--x1ql1cgn)",borderFsComponent:"var(--x19gg8u0)",borderFsComponentStrong:"var(--xbg6jmb)",borderFsDesign:"var(--x2qnxed)",borderFsDesignStrong:"var(--x1cbeci5)",borderFsMeasure:"var(--x1de6q98)",borderFsMeasureStrong:"var(--x1q4w0cy)",borderFsOnassistive:"var(--x1doswui)",borderFsOnassistiveStrong:"var(--x1jjbeav)",borderFsOncomponent:"var(--x1iei904)",borderFsOncomponentStrong:"var(--x14j157f)",borderFsOndesign:"var(--x162732o)",borderFsOndesignStrong:"var(--x1dl6nxt)",borderFsOnmeasure:"var(--x7xuy1h)",borderFsOnmeasureStrong:"var(--x97len5)",borderFsOnselected:"var(--x1hlfcjg)",borderFsOnselectedStrong:"var(--x15idh1k)",borderFsSelected:"var(--x1hj5nnh)",borderFsSelectedStrong:"var(--x1rzt145)",borderFsStrong:"var(--x1r79yza)",borderHandoff:"var(--x19i56st)",borderHandoffStrong:"var(--x53xnx)",borderMeasure:"var(--x1erl4d6)",borderMeasureStrong:"var(--x1212hw0)",borderMenu:"var(--xoqfh4n)",borderMenuDisabled:"var(--x1r9251t)",borderMenuDisabledStrong:"var(--xwlihyy)",borderMenuOnselected:"var(--x1qkpn0e)",borderMenuOnselectedStrong:"var(--x1mt4rmy)",borderMenuSelected:"var(--x7dnc7r)",borderMenuSelectedStrong:"var(--xvtj27v)",borderMenuStrong:"var(--x14chc6m)",borderOnassistive:"var(--xgquwui)",borderOnassistiveStrong:"var(--x1t7jjtq)",borderOnbrand:"var(--xqfymjw)",borderOnbrandStrong:"var(--x9amtsg)",borderOncomponent:"var(--xkwo2g3)",borderOncomponentStrong:"var(--xwl5l31)",borderOndanger:"var(--xrolbre)",borderOndangerStrong:"var(--xv3obaw)",borderOndesign:"var(--x1ubpxpa)",borderOndesignStrong:"var(--xt807j3)",borderOnfigjam:"var(--x12g10nv)",borderOnfigjamStrong:"var(--xvza0up)",borderOnmeasure:"var(--x1am969l)",borderOnmeasureStrong:"var(--x1ux53yw)",borderOnselected:"var(--x1nsuqxc)",borderOnselectedStrong:"var(--x11qaf6q)",borderOnsuccess:"var(--x1sx22tp)",borderOnsuccessStrong:"var(--x11fvheq)",borderOnwarning:"var(--xq9xdi7)",borderOnwarningStrong:"var(--xhj1qq4)",borderSelected:"var(--xq3x21d)",borderSelectedStrong:"var(--xtx0gs8)",borderStrong:"var(--x1hq9kds)",borderSuccess:"var(--xn8ykkm)",borderSuccessStrong:"var(--x1ii9lqw)",borderToolbar:"var(--xo0rqh8)",borderToolbarDisabled:"var(--x1ka5rtr)",borderToolbarOnselected:"var(--x2r69gc)",borderToolbarSelected:"var(--xbrj0nl)",borderToolbarSelectedStrong:"var(--x2e2a7x)",borderToolbarStrong:"var(--x1blpa84)",borderTooltip:"var(--x1o68niw)",borderTooltipDisabled:"var(--x1224nx2)",borderTooltipDisabledStrong:"var(--x1laspt7)",borderTooltipOnselected:"var(--x17a5kdx)",borderTooltipOnselectedStrong:"var(--x1tcycxo)",borderTooltipSelected:"var(--xty87m3)",borderTooltipSelectedStrong:"var(--x15ftufy)",borderTooltipStrong:"var(--x1mlf28t)",borderWarning:"var(--x1cx54ly)",borderWarningStrong:"var(--x1yrvl5j)",borderinspectpadding:"var(--x43qbu5)",borderinspectspacing:"var(--x1b7zfi8)",borderplacecrosshair:"var(--x1kfpd9i)",borderselectedec:"var(--xkf9a0g)",bordertranslucent:"var(--x1jtz2c1)",bordertranslucentstrong:"var(--x1riu0mj)",code:"var(--x1nwr8ji)",codeaccent:"var(--x89iv96)",codeattribute:"var(--xvzr10c)",codeclassname:"var(--x1e32kfs)",codecomment:"var(--x1l6hmgh)",codeproperty:"var(--x1f1xexn)",codestring:"var(--xbd780o)",codestylename:"var(--x1qs3u08)",codetag:"var(--xpwcmfe)",codevalue:"var(--xnntl75)",codevariable:"var(--x17hnwyz)",conditionalborder:"var(--x1p4b41l)",fillplacecrosshair:"var(--x3720mv)",fsAutoFillHighlight:"var(--xgfcwfz)",fsBorderDesignShadowStrong:"var(--x10czis6)",fsBorderPlaceholder:"var(--x3f47ba)",fsBorderSelectedImmutableNode:"var(--x1a82cat)",fsBorderSelectedImmutableNodeSecondary:"var(--x1qyu4zn)",fsCanvasDefaultFill:"var(--x1h3hrav)",fsCodeNodeBorder:"var(--x1q708bh)",fsCodeNodeBorderSecondary:"var(--x1f4rxwa)",fsCodeNodeTextErrorOnDarkCanvas:"var(--x1udwble)",fsCodeNodeTextErrorOnLightCanvas:"var(--x1ufc1vp)",fsCodeNodeTextOnDarkCanvas:"var(--x1eml9nq)",fsCodeNodeTextOnLightCanvas:"var(--xnltbbl)",fsDevHandoffAutolayoutPadding:"var(--x1qqctz6)",fsDevHandoffAutolayoutSpacing:"var(--x9msbpz)",fsFrameDefaultFill:"var(--xkyx1m0)",fsIconOnDarkCanvas:"var(--x1o0hg2y)",fsIconOnDarkCanvasSecondary:"var(--xplppg)",fsIconOnLightCanvas:"var(--x175uwpt)",fsIconOnLightCanvasSecondary:"var(--x1fyi101)",fsNodeHandle:"var(--x120do3m)",fsNodeLabelNoBG:"var(--xwoxxt)",fsNodeSymbolSelectedSecondary:"var(--xuhfy07)",fsShapeDefaultFill:"var(--xmednuu)",fsSitesResponsiveSetTextOnDarkCanvas:"var(--xb8ui87)",fsSitesResponsiveSetTextOnLightCanvas:"var(--x1bsfr2u)",fsSnappingOverlay:"var(--x1c3msxq)",fsStickyAuthorTextOnDark:"var(--xo3qpa9)",fsStickyAuthorTextOnLight:"var(--xpcd4r4)",fsTextComponentOnDarkCanvas:"var(--x1pd49li)",fsTextComponentOnLightCanvas:"var(--x1moqi9h)",fsTextOnDarkCanvas:"var(--xmj1zt4)",fsTextOnDarkCanvasSecondary:"var(--x1shvic0)",fsTextOnLightCanvas:"var(--xmdzcem)",fsTextOnLightCanvasSecondary:"var(--x1thdjyv)",fsTextSelectedOnDarkCanvas:"var(--x1dvhoxj)",fsTextSelectedOnLightCanvas:"var(--x17rc4ea)",fsVectorInactive:"var(--x1k36rtg)",fsWidgetFrameTextOnDarkCanvas:"var(--x7a3xc7)",fsWidgetFrameTextOnLightCanvas:"var(--x1vrjuo4)",fsWidgetFrameTextSelectedOnDarkCanvas:"var(--x2gt7nl)",fsWidgetFrameTextSelectedOnLightCanvas:"var(--x146fm3u)",icon:"var(--xao8hs5)",iconAssistive:"var(--xbzcbx4)",iconAssistivePressed:"var(--x7blxze)",iconAssistiveSecondary:"var(--x13b7ik)",iconAssistiveTertiary:"var(--xfdvvhm)",iconBrand:"var(--x1wxt8mt)",iconBrandPressed:"var(--xqex5pl)",iconBrandSecondary:"var(--x124n2qp)",iconBrandTertiary:"var(--x17sndl7)",iconComponent:"var(--xe2mbh0)",iconComponentPressed:"var(--x1j6jx71)",iconComponentSecondary:"var(--x8km10y)",iconComponentTertiary:"var(--x1g1xkdo)",iconDanger:"var(--xsz8057)",iconDangerHover:"var(--xfkkhwn)",iconDangerPressed:"var(--xuzdlb3)",iconDangerSecondary:"var(--x1byasb7)",iconDangerSecondaryHover:"var(--xgrmvo8)",iconDangerTertiary:"var(--x2402hh)",iconDesign:"var(--x102hfqm)",iconDesignPressed:"var(--x11pi6cn)",iconDesignSecondary:"var(--xzca3i8)",iconDesignTertiary:"var(--x1g3n3bp)",iconDesktopBackgrounded:"var(--xf9rtbh)",iconDesktopBackgroundedDanger:"var(--x1ea8i4o)",iconDesktopBackgroundedDisabled:"var(--x1o36gsf)",iconDesktopBackgroundedHover:"var(--x1dqxi1s)",iconDesktopBackgroundedOndisabled:"var(--xat3win)",iconDesktopBackgroundedSecondary:"var(--x1lllyym)",iconDesktopBackgroundedSecondaryHover:"var(--xo8l1pf)",iconDesktopBackgroundedTertiary:"var(--x112v7p)",iconDesktopBackgroundedTertiaryHover:"var(--x19xm7gc)",iconDesktopBackgroundedWarning:"var(--x5z7bmg)",iconDesktopForeground:"var(--x1ahs4yr)",iconDesktopForegroundDanger:"var(--xgxu6t)",iconDesktopForegroundDisabled:"var(--x1qeg5s)",iconDesktopForegroundHover:"var(--x6f02hu)",iconDesktopForegroundOndisabled:"var(--xlczyyl)",iconDesktopForegroundSecondary:"var(--x1avnms3)",iconDesktopForegroundSecondaryHover:"var(--x1hr26nb)",iconDesktopForegroundTertiary:"var(--x1nign6t)",iconDesktopForegroundTertiaryHover:"var(--x15xmeek)",iconDesktopForegroundWarning:"var(--x14aly51)",iconDesktopFullscreen:"var(--x12bcu9i)",iconDesktopFullscreenDanger:"var(--xx17f60)",iconDesktopFullscreenDisabled:"var(--xgqsq9j)",iconDesktopFullscreenHover:"var(--xhdhimd)",iconDesktopFullscreenOndisabled:"var(--x1iapgo3)",iconDesktopFullscreenSecondary:"var(--xib1rhl)",iconDesktopFullscreenSecondaryHover:"var(--x29x2vv)",iconDesktopFullscreenTertiary:"var(--x1d88lx5)",iconDesktopFullscreenTertiaryHover:"var(--xvoyg30)",iconDesktopFullscreenWarning:"var(--x1lxzljv)",iconDisabled:"var(--xohazba)",iconFigjam:"var(--x1us7pal)",iconFigjamPressed:"var(--x8adrzh)",iconFigjamSecondary:"var(--xfhe6u8)",iconFigjamTertiary:"var(--xhqfd3w)",iconFs:"var(--x18nj76x)",iconFsAssistive:"var(--x1iw6vle)",iconFsComponent:"var(--x27dm5f)",iconFsDesign:"var(--xmsnot3)",iconFsMeasure:"var(--x1tk7i7z)",iconFsOnassistive:"var(--x1t5c0ke)",iconFsOncomponent:"var(--x1yugctc)",iconFsOndesign:"var(--xwe7usi)",iconFsOnmeasure:"var(--x19m8l2a)",iconFsOnselected:"var(--xwsmlrj)",iconFsSecondary:"var(--xrl3bri)",iconFsSelected:"var(--x184crqu)",iconFsTertiary:"var(--xm2avld)",iconHandoff:"var(--x37cp4j)",iconHandoffPressed:"var(--x1l8wfj6)",iconHandoffSecondary:"var(--xrogby4)",iconHandoffTertiary:"var(--x17ww8f6)",iconHover:"var(--x1io1drl)",iconMeasure:"var(--x1uzm60i)",iconMeasureHover:"var(--x103tmov)",iconMeasurePressed:"var(--x1cn82nc)",iconMeasureSecondary:"var(--x1ds09jr)",iconMeasureSecondaryHover:"var(--x3e3jmx)",iconMeasureTertiary:"var(--x1l03ure)",iconMenu:"var(--x1x5h53g)",iconMenuDanger:"var(--x1vhw91p)",iconMenuDisabled:"var(--x9uokow)",iconMenuHover:"var(--xmk0raz)",iconMenuOndisabled:"var(--x1dbvt32)",iconMenuOnselected:"var(--xni2u7y)",iconMenuPressed:"var(--x12i6web)",iconMenuSecondary:"var(--xo94zg5)",iconMenuSecondaryHover:"var(--x1id7r54)",iconMenuSelected:"var(--x1kkv5v)",iconMenuSelectedSecondary:"var(--xu1r3cw)",iconMenuSelectedTertiary:"var(--x10ygwiu)",iconMenuTertiary:"var(--x1h8sg45)",iconMenuTertiaryHover:"var(--xrxtbw5)",iconMenuWarning:"var(--x18yjd39)",iconOnassistive:"var(--x1ogcrb9)",iconOnassistiveSecondary:"var(--x17ej6yy)",iconOnassistiveTertiary:"var(--x1jeawts)",iconOnbrand:"var(--xlt51lg)",iconOnbrandSecondary:"var(--x10b1v4s)",iconOnbrandTertiary:"var(--xgveitg)",iconOncomponent:"var(--x1l91f5y)",iconOncomponentSecondary:"var(--x3mtql8)",iconOncomponentTertiary:"var(--xjnvwvz)",iconOndanger:"var(--xj6t2c)",iconOndangerSecondary:"var(--x1oo7ebl)",iconOndangerTertiary:"var(--xw6nw5f)",iconOndesign:"var(--x1oo8xo7)",iconOndesignSecondary:"var(--x9xcemc)",iconOndesignTertiary:"var(--x1lp440z)",iconOndisabled:"var(--x1e99kav)",iconOnfigjam:"var(--x1kiydjr)",iconOnfigjamSecondary:"var(--xqq8lft)",iconOnfigjamTertiary:"var(--x11zaz0j)",iconOninverse:"var(--xqw1cv2)",iconOnmeasure:"var(--x1tygmtk)",iconOnmeasureSecondary:"var(--x1u1x2vr)",iconOnmeasureTertiary:"var(--x1ahirhs)",iconOnselected:"var(--xk0o2me)",iconOnselectedSecondary:"var(--x1rxbjmg)",iconOnselectedStrong:"var(--x39ak4s)",iconOnselectedTertiary:"var(--xfoaugn)",iconOnsuccess:"var(--x1f83cgy)",iconOnsuccessSecondary:"var(--x9wcmy6)",iconOnsuccessTertiary:"var(--xbe0ouc)",iconOnwarning:"var(--x1nl4dnz)",iconOnwarningSecondary:"var(--x17vdfko)",iconOnwarningTertiary:"var(--x1phbito)",iconPressed:"var(--x1pgez1h)",iconSecondary:"var(--x1e4vtdy)",iconSecondaryHover:"var(--x1hwh7bg)",iconSelected:"var(--x1ulj4gh)",iconSelectedSecondary:"var(--xrgqk1m)",iconSelectedTertiary:"var(--x12cvlry)",iconSuccess:"var(--x1clfsvw)",iconSuccessPressed:"var(--x1mallav)",iconSuccessSecondary:"var(--xexzcsy)",iconSuccessTertiary:"var(--xu4ig7b)",iconTertiary:"var(--xoz0shn)",iconTertiaryHover:"var(--x1f8c5p6)",iconToolbar:"var(--xjt2osq)",iconToolbarDanger:"var(--x14t9d4g)",iconToolbarDisabled:"var(--xq1ylvy)",iconToolbarHover:"var(--xj8zzl9)",iconToolbarOndisabled:"var(--x1jkb1ob)",iconToolbarOnselected:"var(--x1engum3)",iconToolbarPressed:"var(--x15kj266)",iconToolbarSecondary:"var(--xnnnhpq)",iconToolbarSecondaryHover:"var(--x10a9ouh)",iconToolbarSelected:"var(--xndam5o)",iconToolbarSelectedSecondary:"var(--x1uube9s)",iconToolbarSelectedTertiary:"var(--x162192)",iconToolbarTertiary:"var(--x180i6jw)",iconToolbarTertiaryHover:"var(--x1ktrhhd)",iconToolbarWarning:"var(--x1foblfr)",iconTooltip:"var(--x15eo82l)",iconTooltipDanger:"var(--x1eg64ks)",iconTooltipDisabled:"var(--x12ym7x3)",iconTooltipHover:"var(--x17xa40d)",iconTooltipOndisabled:"var(--x17texpm)",iconTooltipOnselected:"var(--x1wknkj3)",iconTooltipPressed:"var(--x13rmuf4)",iconTooltipSecondary:"var(--xapra2h)",iconTooltipSecondaryHover:"var(--x1wvqc7p)",iconTooltipSelected:"var(--x1m42u4w)",iconTooltipSelectedSecondary:"var(--x1x81w14)",iconTooltipSelectedTertiary:"var(--xbd2upz)",iconTooltipTertiary:"var(--x1mx6gzn)",iconTooltipTertiaryHover:"var(--xbu5ie7)",iconTooltipWarning:"var(--xarbiio)",iconWarning:"var(--x19sbyw3)",iconWarningPressed:"var(--xuc83lf)",iconWarningSecondary:"var(--x1oevq5p)",iconWarningTertiary:"var(--xxmx066)",icondesignfilesecondary:"var(--x1fes5eo)",iconfavorite:"var(--x1h5dy0f)",iconfigjamfilesecondary:"var(--x7z3pt4)",iconondarkcanvas:"var(--xfsv8gp)",icononlightcanvas:"var(--xj191tb)",icononvoting:"var(--xbvxwke)",iconprototypefile:"var(--x1adzk1g)",iconprototypefilesecondary:"var(--x1txzlb7)",iconpublishedfile:"var(--xz6op65)",iconpublishedfilesecondary:"var(--xox067x)",loading:"var(--x1u1vt35)",loadingmenu:"var(--x1g2ljr1)",loadingsecondary:"var(--x1l9g9by)",loadingsecondarymenu:"var(--x59gv68)",modalbackdrop:"var(--x1jlex4m)",multiplayerblue:"var(--x6icwve)",multiplayerbluehover:"var(--xdmw4of)",multiplayerbluesecondary:"var(--x1eryx23)",multiplayergreen:"var(--xppdnef)",multiplayergreenhover:"var(--x1437ddr)",multiplayergreensecondary:"var(--x3m9139)",multiplayergrey:"var(--x161r39p)",multiplayergreyhover:"var(--x15iiqpy)",multiplayergreysecondary:"var(--x1hgyw0f)",multiplayerpink:"var(--x16s3ung)",multiplayerpinkhover:"var(--x1brss0o)",multiplayerpinksecondary:"var(--x1jact4y)",multiplayerpurple:"var(--x17rnvy2)",multiplayerpurplehover:"var(--xjf1zhn)",multiplayerpurplesecondary:"var(--xg9475m)",multiplayerred:"var(--x7zxyc)",multiplayerredhover:"var(--xezg6vf)",multiplayerredsecondary:"var(--xj8almw)",multiplayeryellow:"var(--x1xiyfrn)",multiplayeryellowhover:"var(--x190h7mp)",multiplayeryellowsecondary:"var(--xtbhlas)",nodehandle:"var(--xb11838)",prototypeloadingbackdrop:"var(--xt9f6o5)",scrollbar:"var(--x190krbz)",shadow:"var(--x9unui5)",tablenodehoveredprimary:"var(--x1nqhen9)",tablenodehoveredsecondary:"var(--xy7hrib)",tablenodeselected:"var(--x1mfnsbf)",text:"var(--x1fx47jz)",textAssistive:"var(--xriflk3)",textAssistivePressed:"var(--x1atrp57)",textAssistiveSecondary:"var(--xxmx9e8)",textAssistiveTertiary:"var(--xs0yw5r)",textBrand:"var(--x1puwod6)",textBrandSecondary:"var(--x1wu6l2g)",textBrandTertiary:"var(--x9o00bb)",textComponent:"var(--x18v7ko)",textComponentPressed:"var(--x1ipc9l2)",textComponentSecondary:"var(--xn5rrlt)",textComponentTertiary:"var(--x1jn4ert)",textDanger:"var(--xwllxrk)",textDangerSecondary:"var(--x13kgzvy)",textDangerTertiary:"var(--x1gzuwta)",textDesign:"var(--x166yins)",textDesignPressed:"var(--x1itmf7u)",textDesignSecondary:"var(--xum8tfy)",textDesignTertiary:"var(--x1nq9kpf)",textDesktopBackgrounded:"var(--x1obsyhp)",textDesktopBackgroundedDanger:"var(--x1bbw3mk)",textDesktopBackgroundedDisabled:"var(--xstc1wy)",textDesktopBackgroundedHover:"var(--xyvw6nv)",textDesktopBackgroundedOndisabled:"var(--x1abd5j0)",textDesktopBackgroundedSecondary:"var(--xqy29jg)",textDesktopBackgroundedSecondaryHover:"var(--x1w8jr5x)",textDesktopBackgroundedTertiary:"var(--x18kj1v0)",textDesktopBackgroundedTertiaryHover:"var(--x7wvhq8)",textDesktopBackgroundedWarning:"var(--x56f0rg)",textDesktopForeground:"var(--xlp2enu)",textDesktopForegroundDanger:"var(--x1ysuwca)",textDesktopForegroundDisabled:"var(--x1kib46n)",textDesktopForegroundHover:"var(--x15rbo3a)",textDesktopForegroundOndisabled:"var(--xar7qpf)",textDesktopForegroundSecondary:"var(--x1blvtpa)",textDesktopForegroundSecondaryHover:"var(--xvf8ki8)",textDesktopForegroundTertiary:"var(--xckkday)",textDesktopForegroundTertiaryHover:"var(--x1kb9x41)",textDesktopForegroundWarning:"var(--x2j4ul8)",textDesktopFullscreen:"var(--xoocbt3)",textDesktopFullscreenDanger:"var(--xzxndo8)",textDesktopFullscreenDisabled:"var(--x1ay80ol)",textDesktopFullscreenHover:"var(--x1g424w9)",textDesktopFullscreenOndisabled:"var(--x1bdh4o5)",textDesktopFullscreenSecondary:"var(--xxjzc0h)",textDesktopFullscreenSecondaryHover:"var(--xk9u4x1)",textDesktopFullscreenTertiary:"var(--x2z7dd1)",textDesktopFullscreenTertiaryHover:"var(--x1ne0rzd)",textDesktopFullscreenWarning:"var(--xcft7ok)",textDisabled:"var(--x13be15p)",textFigjam:"var(--x1mfa7yz)",textFigjamPressed:"var(--x75we2q)",textFigjamSecondary:"var(--xsku40b)",textFigjamTertiary:"var(--x1iopwbx)",textFs:"var(--x1lb5myj)",textFsAssistive:"var(--x1vmrank)",textFsComponent:"var(--x16ubwaq)",textFsDesign:"var(--xv0bakv)",textFsMeasure:"var(--x1q1ip0o)",textFsOnassistive:"var(--xg5n90h)",textFsOncomponent:"var(--xq2atwt)",textFsOndesign:"var(--xtlbz86)",textFsOnmeasure:"var(--xynm5w2)",textFsOnselected:"var(--x13syd1n)",textFsSecondary:"var(--xgwh55s)",textFsSelected:"var(--x1dfh53m)",textFsTertiary:"var(--x15vpf6q)",textHandoff:"var(--x1g7126q)",textHandoffSecondary:"var(--x1y0m7c7)",textHandoffTertiary:"var(--x133ki8z)",textHover:"var(--x99tre4)",textMeasure:"var(--xdyquc6)",textMeasureSecondary:"var(--x2713q6)",textMeasureTertiary:"var(--xmdj4jv)",textMenu:"var(--x1qry0by)",textMenuDanger:"var(--xpcxvfl)",textMenuDisabled:"var(--xwaljtb)",textMenuHover:"var(--x14hrq2m)",textMenuOndisabled:"var(--xc4qwwf)",textMenuOnselected:"var(--xwpdmt3)",textMenuSecondary:"var(--x1nik6c)",textMenuSecondaryHover:"var(--x16h57nj)",textMenuSelected:"var(--x1rx2pap)",textMenuSelectedSecondary:"var(--x7m7hec)",textMenuSelectedTertiary:"var(--x1shyhpk)",textMenuTertiary:"var(--x10clc03)",textMenuTertiaryHover:"var(--x5h7obu)",textMenuWarning:"var(--xc6f64s)",textOnassistive:"var(--x3uq7su)",textOnassistiveSecondary:"var(--xtfb39c)",textOnassistiveTertiary:"var(--xp4gyzo)",textOnbrand:"var(--x1nwgk92)",textOnbrandSecondary:"var(--x10q9bg1)",textOnbrandTertiary:"var(--x190kumn)",textOncomponent:"var(--x1elxa0)",textOncomponentSecondary:"var(--x1peev9v)",textOncomponentTertiary:"var(--x1vyu4v4)",textOndanger:"var(--x7alrgf)",textOndangerSecondary:"var(--xk6sook)",textOndangerTertiary:"var(--xooi2o2)",textOndesign:"var(--x1t21jry)",textOndesignSecondary:"var(--x2u5b7d)",textOndesignTertiary:"var(--xs9vdrn)",textOndisabled:"var(--x1bdcbhe)",textOnfigjam:"var(--x1c93ntj)",textOnfigjamSecondary:"var(--x1g2hh99)",textOnfigjamTertiary:"var(--xjz2n9i)",textOninverse:"var(--x1djshts)",textOnmeasure:"var(--xi5lv4r)",textOnmeasureSecondary:"var(--xvzoyex)",textOnmeasureTertiary:"var(--xzzx4ka)",textOnselected:"var(--x11mkxiq)",textOnselectedSecondary:"var(--x15hce04)",textOnselectedStrong:"var(--x74srz)",textOnselectedTertiary:"var(--xo9ivy7)",textOnsuccess:"var(--x1dsmhnv)",textOnsuccessSecondary:"var(--x1bjos82)",textOnsuccessTertiary:"var(--xglgqhl)",textOnwarning:"var(--x1tfk618)",textOnwarningSecondary:"var(--xm6zqty)",textOnwarningTertiary:"var(--x1x9xvou)",textSecondary:"var(--x81xuyh)",textSecondaryHover:"var(--xrv3lfq)",textSelected:"var(--xl60ei4)",textSelectedSecondary:"var(--x157yf95)",textSelectedTertiary:"var(--x1phac9g)",textSuccess:"var(--xqfiq8l)",textSuccessSecondary:"var(--x1o6swe7)",textSuccessTertiary:"var(--x1s13qbz)",textTertiary:"var(--xowo857)",textTertiaryHover:"var(--x1vx6zcg)",textToolbar:"var(--x12kclpj)",textToolbarDanger:"var(--xg91cy1)",textToolbarDisabled:"var(--x1x0pmbk)",textToolbarHover:"var(--x1t0vfmj)",textToolbarOndisabled:"var(--x1ez4q0x)",textToolbarOnselected:"var(--x1if1srv)",textToolbarSecondary:"var(--x11umenh)",textToolbarSecondaryHover:"var(--xo1xesb)",textToolbarSelected:"var(--xzxh5xp)",textToolbarSelectedSecondary:"var(--xbkh22v)",textToolbarSelectedTertiary:"var(--x1p35yj0)",textToolbarTertiary:"var(--xzg2jvv)",textToolbarTertiaryHover:"var(--x1y0kx5h)",textToolbarWarning:"var(--x39xibb)",textTooltip:"var(--xaquizb)",textTooltipDanger:"var(--xbir0ai)",textTooltipDisabled:"var(--xtet54d)",textTooltipHover:"var(--x1s1o5gu)",textTooltipOndisabled:"var(--x1gncfj2)",textTooltipOnselected:"var(--x877r6w)",textTooltipSecondary:"var(--x1ufmx5w)",textTooltipSecondaryHover:"var(--x1htxe8b)",textTooltipSelected:"var(--xinacsy)",textTooltipSelectedSecondary:"var(--x1o3qe3j)",textTooltipSelectedTertiary:"var(--xltnoa4)",textTooltipTertiary:"var(--x4rrocq)",textTooltipTertiaryHover:"var(--xtg29pq)",textTooltipWarning:"var(--x19bod75)",textWarning:"var(--x673bm9)",textWarningSecondary:"var(--x1xyd2yb)",textWarningTertiary:"var(--xxrdt37)",texthighlight:"var(--x17tk8ib)",textondarkcanvas:"var(--xnx7ugf)",textondarkcanvassecondary:"var(--x1mgnvjv)",textoninspectpadding:"var(--x1tlbvcq)",textoninspectspacing:"var(--x1incs1x)",textonlightcanvas:"var(--x81mwgf)",textonlightcanvassecondary:"var(--xx0bkfd)",textonmultiplayerblue:"var(--x5xrsnu)",textonmultiplayergreen:"var(--x1t7dii5)",textonmultiplayergrey:"var(--x1tjulds)",textonmultiplayerpink:"var(--x1o2scti)",textonmultiplayerpurple:"var(--x1plo7qh)",textonmultiplayerred:"var(--xilpd0s)",textonmultiplayeryellow:"var(--x1cmm6uo)",textonvoting:"var(--x16rqmbq)",__themeName__:"x1n2w6nl"}},452645:(e,r,n)=>{n.d(r,{$J:()=>s,ZC:()=>i,qd:()=>o});var a=n(848318);function i(e){let r=(0,a.useRef)();return(0,a.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,a.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}function s(e){let[r,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{n(e)},[e]),r}},433747:(e,r,n)=>{n.d(r,{M:()=>i});var a=n(848318);function i(e){let r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(e,()=>r.current),r}},54929:(e,r,n)=>{function a(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>a,nL:()=>c});let i=Object.create(null);function o(e,r){if(-1!==(e in i?i[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);i[e]||(i[e]=[]),i[e].push(r)}function s(e,r){let n=e in i?i[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);i[e].splice(n,1),0===i[e].length&&delete i[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,a={}){a.record||(e=>e);let i=a.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(i(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},382902:(e,r,n)=>{n.d(r,{An:()=>d.A,Ut:()=>s.Ut,eU:()=>o.eU,Iz:()=>S,p6:()=>p.p6,zl:()=>u.z,Zb:()=>h.Z,t_:()=>s.t_,S_:()=>E.S,E3:()=>m.l,E2:()=>m.E,um:()=>s.um,tx:()=>s.tx,xP:()=>b.x,Rq:()=>s.Rq,mg:()=>s.mg,fp:()=>I,md:()=>T,mC:()=>A,AY:()=>c.AY,Xr:()=>i.Xr,Pj:()=>i.Pj,Hj:()=>_.H,yu:()=>g.y,M2:()=>f.M,LJ:()=>y.L,FZ:()=>v.F,tP:()=>p.tP});var a=n(848318),i=n(801517),o=n(921637),s=n(981555),l=n(468557),c=n(515691),d=n(409924),u=n(115715),p=n(30258);Symbol();var m=n(119668),_=n(478647),h=n(776703),g=n(416812),f=n(916184),E=n(600429),y=n(710733),b=n(412190),v=n(485846);function T(e,r){let n=(0,i.Pj)(),[[o,s,c],d]=(0,a.useReducer)(r=>{let a=n.get(e);return Object.is(r[0],a)&&r[1]===n&&r[2]===e?r:[a,n,e]},void 0,()=>[n.get(e),n,e]),u=n.get(e);(s!==n||c!==e)&&(d(),u=n.get(e));let p=r?.deferToFrame??!1;return(0,a.useEffect)(()=>{let r;let a=n.sub(e,()=>{p?(void 0!==r&&cancelAnimationFrame(r),r=requestAnimationFrame(d)):d()});return d(),()=>{void 0!==r&&cancelAnimationFrame(r),a()}},[n,e,p]),(0,a.useDebugValue)(u),u instanceof Promise?(0,l.Y)(u):u}function I(e,r){return[T(e,r),(0,i.Xr)(e)]}function S(e,r){let n=(0,s.Iz)(e,r);return n.removeAll=()=>{n.setShouldRemove(()=>!0),n.setShouldRemove(null)},n}function A(e,r){let n=(0,a.useMemo)(()=>(0,o.eU)(e),[e]);return T(r||n)}},418193:(e,r,n)=>{function a(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let a=0,i=n.length;a<i;a++)if(n[a]!=r.args[a]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function i(e){let r=new WeakMap;return n=>{let a=r.get(n);if(a)return a;let i=e(n);return r.set(n,i),i}}n.d(r,{cm:()=>i,xx:()=>a})},894161:(e,r,n)=>{n.d(r,{Lg:()=>d,Ns:()=>a.k3,PN:()=>c,QJ:()=>p,b_:()=>i,lZ:()=>l,nl:()=>s});var a=n(54929);let i=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,a.k3)()}function d(){try{return!1}catch{return!1}}o&&new URLSearchParams(window.location.search).get("mode");let u="/test/eval/view"===window.location.pathname;function p(){return u}},800085:(e,r,n)=>{n.r(r),n.d(r,{coerce:()=>o,filteredArray:()=>s,ignore:()=>i});var a=n(189067);function i(e){return a.z.any().transform(e=>e)}let o={...a.z.coerce,null:e=>a.z.preprocess(e=>void 0===e?null:e,e),undefined:e=>a.z.preprocess(e=>{if(null!==e)return e},e)};function s(e){return a.z.array(a.z.unknown()).transform(r=>r.filter(r=>e.safeParse(r).success))}},225859:(e,r,n)=>{n(749214),n(848318),n(433747),n(278802),n(82433)},100433:(e,r,n)=>{n.d(r,{NZ:()=>d.NZ,$t:()=>c.$t,Lz:()=>d.Lz,ij:()=>i.i,t$:()=>h.t$,dT:()=>d.dT,CH:()=>s,L0:()=>u.L0,Pe:()=>c.Pe,sU:()=>c.sU,Z9:()=>d.Z9,$w:()=>_.$w,yU:()=>_.yU,oQ:()=>l.o,DH:()=>_.DH,AZ:()=>m.A,sg:()=>p.s,Hg:()=>u.Hg,ve:()=>u.ve,b6:()=>E.b6,Ux:()=>d.Ux,Mg:()=>E.Mg,UY:()=>E.UY,Q2:()=>f.Q2,w4:()=>d.w4,pX:()=>y,bu:()=>g.bu,qf:()=>d.qf,yh:()=>u.yh,Aw:()=>u.Aw,$P:()=>u.$P,Ri:()=>u.Ri,vX:()=>d.vX,g4:()=>f.g4});var a=n(848318),i=n(606277);n(40470);let o=(0,a.forwardRef)((e,r)=>{let{className:n,value:o="",selection:s,extensions:l=[],onChange:c,onStatistics:d,onCreateEditor:u,onUpdate:p,autoFocus:m,theme:_="light",height:h,minHeight:g,maxHeight:f,width:E,minWidth:y,maxWidth:b,basicSetup:v,placeholder:T,indentWithTab:I,editable:S,readOnly:A,root:w,initialState:C,...N}=e,L=(0,a.useRef)(null),{state:O,view:R,container:P}=(0,i.q)({container:L.current,root:w,value:o,autoFocus:m,theme:_,height:h,minHeight:g,maxHeight:f,width:E,minWidth:y,maxWidth:b,basicSetup:v,placeholder:T,indentWithTab:I,editable:S,readOnly:A,selection:s,onChange:c,onStatistics:d,onCreateEditor:u,onUpdate:p,extensions:l,initialState:C});if((0,a.useImperativeHandle)(r,()=>({editor:L.current,state:O,view:R}),[L,P,O,R]),"string"!=typeof o)throw Error(`value must be typeof string but got ${typeof o}`);let D="string"==typeof _?`cm-theme-${_}`:"cm-theme";return a.createElement("div",{ref:L,className:`${D}${n?` ${n}`:""}`,...N})});o.displayName="CodeMirror";let s=o;var l=n(504480),c=n(59696),d=n(37366),u=n(616405);n(694037);var p=n(380509),m=n(952693),_=n(576710),h=n(401644),g=n(548481),f=n(831678),E=n(85340);let y={json:async()=>(await n.e(9268).then(n.bind(n,489268))).json(),css:async()=>(await n.e(3018).then(n.bind(n,543018))).css(),html:async()=>(await Promise.all([n.e(3018),n.e(5673)]).then(n.bind(n,995673))).html(),markdown:async()=>(await Promise.all([n.e(3018),n.e(5673),n.e(2520)]).then(n.bind(n,752520))).markdown()}},760893:(e,r,n)=>{n.d(r,{$y:()=>c,Cs:()=>s,Yy:()=>d,aq:()=>l});var a=n(749214),i=n(848318),o=n(389182);let s=(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"full-width",...e}));s.displayName="Banner.FullWidth",(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inline",...e})).displayName="Banner.Inline";let l=(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"informational",...e}));l.displayName="Banner.Informational";let c=(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inset-modal",...e}));c.displayName="Banner.InsetModal";let d=(0,i.forwardRef)((e,r)=>(0,a.jsx)(o.b,{ref:r,type:"inset",...e}));d.displayName="Banner.Inset"},291483:(e,r,n)=>{n.d(r,{JU:()=>h,UC:()=>g,Y9:()=>_,bL:()=>m});var a=n(749214),i=n(848318),o=n(723372),s=n(994019),l=n(678145),c=n(347701),d=n(808943),u=n(47825),p=n(785496);let m=(0,i.forwardRef)((e,r)=>(0,a.jsx)(s.bL,{...e,className:(0,o.A)(p.sQ,{[p.dH]:"fill"===e.height}),ref:r}));m.displayName="Collapse.Root";let _=(0,i.forwardRef)(({size:e="md",width:r="fill",variant:n="default",htmlAttributes:i,...s},l)=>(0,a.jsx)("div",{className:(0,o.A)(p.Xk,{[p.Jt]:"md"===e,[p.tU]:"lg"===e,[p.G0]:"fit"===r,[p.SO]:"fill"===r,[p.DW]:"leftPanel"===n}),ref:l,...u.r,...i,...s}));_.displayName="Collapse.Header";let h=(0,i.forwardRef)(({children:e,size:r="md",...n},i)=>{let m=(0,l.$)(s.bN,"CollapseContext","Collapse.Root");return(0,a.jsxs)(s.JU,{...u.r,...n,ref:i,className:p.WO,children:[(0,a.jsx)("span",{className:(0,o.A)(p.Z4),children:m.isOpen?(0,a.jsx)(c.O,{"aria-hidden":!0}):(0,a.jsx)(d.k,{"aria-hidden":!0})}),(0,a.jsx)("span",{className:(0,o.A)(p.Ci,{[p.xS]:"md"===r,[p.P8]:"lg"===r}),children:e})]})});h.displayName="Collapse.Label",(0,i.forwardRef)((e,r)=>(0,a.jsx)(s.X0,{className:p.Mm,...e,ref:r,...u.r})).displayName="Collapse.Trail";let g=(0,i.forwardRef)((e,r)=>(0,a.jsx)(s.UC,{className:p.rY,ref:r,...u.r,...e}));g.displayName="Collapse.Content",(0,i.forwardRef)((e,r)=>(0,a.jsx)(s.YJ,{className:p.lm,ref:r,...u.r,...e})).displayName="Collapse.Group"},661915:(e,r,n)=>{n.d(r,{S:()=>o}),n(749214);var a=n(848318);let i=(0,a.createContext)("dark");function o(){return(0,a.useContext)(i)}},814177:(e,r,n)=>{n.d(r,{B:()=>i});var a=n(749214);let i=(0,n(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.577 3.584a.5.5 0 0 1 .139.693l-6 9a.5.5 0 0 1-.77.076l-3.6-3.6a.5.5 0 1 1 .708-.707l3.168 3.169 5.662-8.493a.5.5 0 0 1 .693-.138M5 14.5a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 5.5 18h13a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},534497:(e,r,n)=>{n.d(r,{_:()=>d});var a=n(749214),i=n(848318),o=n(680184),s=n(47825),l=n(352212);let c=(0,i.createContext)(void 0);c.Provider;let d=(0,i.forwardRef)(({recordingKey:e,children:r,href:n,trusted:d,newTab:u,onClick:p,htmlAttributes:m,..._},h)=>{let g=(0,i.useContext)(c),f=d??function(e){if(!l.A)return!1;try{let r=window.location.origin;return new URL(e,r).origin===r}catch{return!1}}(n)?"noopener":"noopener nofollow noreferrer ugc",E=(0,o.Qv)(p||g?e=>{g?.(e),p?.(e)}:void 0,{eventName:"click",recordingKey:e},[p,g]);return(0,a.jsx)("a",{target:u?"_blank":void 0,rel:f,...s.r,...m,..._,ref:h,onClick:E,href:n,children:r})});d.displayName="LinkPrimitive"},168323:(e,r,n)=>{n.d(r,{ME:()=>O,MJ:()=>v,Ov:()=>N,Q$:()=>L,YJ:()=>w,ZP:()=>b,b:()=>E,bL:()=>I,g8:()=>y,hE:()=>S,mc:()=>T,q7:()=>C,r1:()=>A,rm:()=>R,wv:()=>P});var a=n(749214),i=n(848318),o=n(730455),s=n(952647),l=n(723372),c=n(661915),d=n(597564),u=n(88706),p=n(422482),m=n(50011),_=n(500886),h=n(756177),g=n(470716),f=n(841824);let E=e=>(0,_.b)({...e,offset:4});function y(e){let{version:r}=(0,o.DP)();return(0,a.jsx)(_.g8,{offset:{mainAxis:"ui2"===r?0:4,alignmentAxis:-8},...e})}y.displayName="Menu.SubMenu";let b=(0,i.forwardRef)(({children:e,hasChecked:r,...n},i)=>(0,a.jsx)(_.ZP,{className:f.iM,...n,ref:i,hasChecked:r,children:(0,a.jsxs)("span",{className:f.p$,children:[(0,a.jsxs)("span",{className:f.AR,children:[void 0!==r&&(0,a.jsx)(d.c,{className:f.CT,"aria-hidden":!0}),e]}),(0,a.jsx)("span",{className:f.zc,children:(0,a.jsx)(p.R,{})})]})}));b.displayName="Menu.SubTrigger";let v=(0,i.forwardRef)(({children:e,...r},n)=>{let i=(0,c.S)(),{color:d}=(0,o.GA)();return(0,a.jsx)(_.MJ,{className:(0,l.A)([f.kL,"light"===("dark"===i?"dark":d)?f.BB:f.XT]),...r,ref:n,children:(0,a.jsxs)(s.J,{mode:"dark"===i?"dark":void 0,children:[(0,a.jsx)(_.LJ,{className:f.Th,direction:"up",children:(0,a.jsx)(m.a,{})}),e,(0,a.jsx)(_.LJ,{className:f.Th,direction:"down",children:(0,a.jsx)(u.r,{})})]})})});v.displayName="Menu.SubContainer";let T=(0,i.forwardRef)(({children:e,...r},n)=>{let i=(0,c.S)(),{color:d}=(0,o.GA)(),{fpl_consistent_menu_indent_by_default:p}=(0,h.Q)();return(0,a.jsx)(_.mc,{className:(0,l.A)(f.kL,"light"===("dark"===i?"dark":d)?f.BB:f.XT,{[f.Ji]:p&&!r.rareUseIndentOptOut}),...r,ref:n,children:(0,a.jsxs)(s.J,{mode:"dark"===i?"dark":void 0,children:[(0,a.jsx)(_.LJ,{className:f.Th,direction:"up",children:(0,a.jsx)(m.a,{})}),e,(0,a.jsx)(_.LJ,{className:f.Th,direction:"down",children:(0,a.jsx)(u.r,{})})]})})});function I(e){return(0,a.jsx)(_.bL,{...e})}T.displayName="Menu.Container",I.displayName="Menu.Root";let S=(0,i.forwardRef)((e,r)=>(0,a.jsx)(_.hE,{className:f.DD,...e,ref:r}));S.displayName="Menu.Title";let A=(0,i.forwardRef)((e,r)=>(0,a.jsx)(_.hE,{className:g.s,...e,ref:r}));A.displayName="Menu.HiddenTitle";let w=(0,i.forwardRef)((e,r)=>(0,a.jsx)(_.YJ,{className:f.Os,...e,ref:r}));w.displayName="Menu.Group";let C=(0,i.forwardRef)(({children:e,...r},n)=>(0,a.jsx)(_.q7,{className:f.AS,...r,ref:n,children:(0,a.jsx)("span",{className:f.rv,children:e})}));function N(e){return(0,a.jsx)("span",{className:f.Pq,...e})}function L(e){return(0,a.jsx)("span",{className:f._5,...e})}function O(e){return(0,a.jsx)("div",{className:f.Sv,...e})}function R(e){return(0,a.jsx)("div",{className:f.Sv,...e})}function P(){return(0,a.jsx)("li",{className:f.me,role:"separator"})}C.displayName="Menu.Item",(0,i.forwardRef)(({children:e,...r},n)=>(0,a.jsx)(_.N_,{className:f.AS,...r,ref:n,children:(0,a.jsx)("span",{className:f.rv,children:e})})).displayName="Menu.Link",N.displayName="Menu.ItemTrail",L.displayName="Menu.ItemLead",O.displayName="Menu.SubText",R.displayName="Menu.Shortcut",P.displayName="Menu.Separator"},748059:(e,r,n)=>{n.d(r,{Uk:()=>E,fP:()=>b,mc:()=>v,nK:()=>y});var a=n(749214),i=n(848318),o=n(533713),s=n(647435),l=n(542280),c=n(730455),d=n(282631),u=n(723372),p=n(762217),m=n(396750),_=n(585886),h=n(756177),g=n(477575),f=n(470716);let E=(0,i.createContext)(void 0);function y({children:e}){let r=(0,i.useRef)(null);return(0,a.jsx)("div",{className:f.P,ref:r,children:(0,a.jsx)(E.Provider,{value:r,children:e})})}function b({type:e,softDismiss:r,provideOwnDismiss:n,provideOwnClick:a,isOpen:c,openOnHover:d=!1,openOnFocus:u=!1,offset:p=8,arrowPadding:m=0,middleware:_,config2025CuratorHacks:h,...f}){let E=(0,i.useId)(),y=(0,i.useRef)(null),[b,v]=(0,i.useState)(E),{refs:T,floatingStyles:I,context:S}=(0,o.we)({...f,middleware:_?_?.concat([s.UE({element:y,padding:m})]):[(0,s.cY)(p),(0,s.UU)({padding:8,fallbackAxisSideDirection:"start"}),(0,s.UE)({element:y,padding:m})],open:c,whileElementsMounted:l.ll}),A=void 0===r?"listbox"===e||"menu"===e||"tooltip"===e:r,w=(0,o.kp)(S,{enabled:"tutorial"!==e&&!a}),C=(0,o.s9)(S,{enabled:!n,outsidePress:r}),N=(0,o.Mk)(S,{enabled:d,move:!1,delay:{open:500,close:0},handleClose:(0,o.iB)({requireIntent:!1,blockPointerEvents:!0,buffer:1})}),L=(0,o.iQ)(S,{enabled:u}),{getReferenceProps:O,getFloatingProps:R}=(0,o.bv)([w,C,N,L]),P=(0,i.useCallback)(({style:r,ref:n,...a}={})=>(a.id&&v(a.id),{isOpen:c,type:e,context:S,useSoftDismiss:A,id:b,role:({dialog:"dialog",grid:"grid",tree:"tree",listbox:"listbox",menu:"presentation",tutorial:"dialog",tooltip:"dialog"})[e],ref:(0,g.Px)([T.setFloating,n]),style:{...r,...I},config2025CuratorHacks:h,...a,...R({})}),[b,S,A,I,R,c,T.setFloating,e,h]),D=(0,i.useCallback)(()=>({ref:y,context:S}),[S,y]);return{getTriggerProps:(0,i.useCallback)(({ref:r,...n}={})=>{let a=(0,g.Px)([T.setReference,r]);if("tutorial"===e){let{onClick:e,...r}=O({ref:a,"aria-details":b});return r}return O({...n,ref:a,"aria-controls":b,"aria-haspopup":"tooltip"===e?"dialog":e,"aria-expanded":c})},[b,O,c,T.setReference,e]),getArrowProps:D,getContainerProps:P,context:S}}y.displayName="PopoverOutlet",(0,i.forwardRef)(({fill:e="var(--color-bg)",...r},n)=>{let s=(0,i.useRef)(),l=(0,o.SV)([s,n]);return(0,a.jsx)(o.ie,{ref:l,tipRadius:1,fill:e,...r})}).displayName="PopoverPrimitive.Arrow";let v=(0,i.forwardRef)(({isOpen:e,type:r,children:n,context:s,useSoftDismiss:l,style:g,config2025CuratorHacks:f,className:b,...v},T)=>{let I=(0,i.useContext)(E),S="listbox"===r||"menu"===r,[A,w]=(0,m.q)(),{version:C}=(0,c.DP)(),{fpl_popover_fullscreen_events:N}=(0,h.Q)(),L=N?[_.Dm,_.s7,_.yM]:[],O={dialog:"var(--z-index-window)",grid:"var(--z-index-window)",tree:"var(--z-index-window)",listbox:"var(--z-index-dropdown)",menu:f?"9":"var(--z-index-dropdown)",tutorial:"var(--z-index-window)",tooltip:"var(--z-index-tooltip)"};return e||"listbox"!==r?e?l?(0,a.jsx)(p.o,{display:"contents",eventListeners:S?["onKeyDown","onKeyUp","onKeyPress"]:[],children:(0,a.jsx)(o.XF,{root:I,children:(0,a.jsx)(d.J,{enabled:"ui3"===C,children:(0,a.jsx)(o.zR,{style:{zIndex:O[r],isolation:"isolate"},lockScroll:!0,children:(0,a.jsx)(y,{children:(0,a.jsx)(o.s3,{context:s,modal:S,children:(0,a.jsx)("div",{ref:T,style:g,className:(0,u.A)(b,...L),...v,children:n})})})})})})}):(0,a.jsx)(w,{value:A,children:(0,a.jsx)(o.XF,{root:I,children:(0,a.jsx)(y,{children:(0,a.jsx)("section",{"aria-labelledby":A,ref:T,...v,style:{...g,zIndex:O[r]},children:n})})})}):null:(0,a.jsx)("div",{style:{display:"none"},children:n})});v.displayName="PopoverPrimitive.Container"},815107:(e,r,n)=>{n.d(r,{Lh:()=>o}),n(749214);var a=n(848318);let i=(0,a.createContext)({back:"Back",close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed",select:"Select an option",hasChecked:"Contains checked item",warning:"Warning:",danger:"Danger:",moveRowToTop:"Move to top",moveRowToBottom:"Move to bottom",moveRowUp:"Move up",moveRowDown:"Move down"});function o(e){return(0,a.useContext)(i)[e]}},658839:(e,r,n)=>{n.d(r,{DX:()=>_,Kg:()=>h,PU:()=>p,U1:()=>f,ds:()=>g});var a=n(749214),i=n(848318),o=n(891627),s=n(477575),l=n(352212),c=n(339372);let d=new Set,u=(0,i.createContext)(l.A?document.body:null);function p(){return Array.from(d)}function m(){return(0,i.useContext)(u)}function _(){let e=m();if(null==e)throw Error("Attempted to use WindowOutlet before it was rendered. If you need to use this hook before the WindowOutletProvider has rendered, use `useWindowOutletOrNull` instead.");return e}function h({children:e}){let r=m();return r?(0,o.createPortal)(e,r):null}function g({children:e}){let[r,n]=(0,i.useState)(null);return(0,a.jsxs)(u.Provider,{value:r,children:[e,(0,a.jsx)("div",{className:c.g,ref:n})]})}function f(e){let r=(0,i.useRef)(null);return(0,i.useCallback)(n=>{(0,s.cZ)(e,n),null==n?d.delete(r.current):d.add(n),r.current=n},[e])}h.displayName="WindowOutlet",g.displayName="WindowOutletProvider"},672154:(e,r,n)=>{n.d(r,{GU:()=>d,Kw:()=>m,PK:()=>u,Tq:()=>i,Ws:()=>c,YB:()=>g,_H:()=>o,cd:()=>l,eJ:()=>a,gr:()=>_,sD:()=>p});var a,i,o,s,l,c,d,u,p,m,_,h,g,f=n(673786),E=n(553547),y=n(660376);function b(e,r){function n(r,n){return r.startsWith(e)?n(r.slice(e.length)):null}function a(e){return r.fromString(e)}function i(e){return n(e,e=>a(e)?null:E.sH(e))}function o(e){return n(e,e=>a(e))}function s(r){return e+E.dI(r)}function l(n){return e+r.toString(n)}return{toString:function(e){return e},toKiwi:function(e){return n(e,e=>{let r=a(e);if(r)return{assetRef:r};let n=E.sH(e);if(n)return{guid:n}})??{guid:E.Hr}},toGuidObjIfLocal:i,toGuidStrIfLocal:function(e){return n(e,e=>a(e)?null:e)},toRefIfSubscribed:o,fromString:function(e){return n(e,r=>E.sH(r)||a(r)?e:null)},fromLocalNodeIdObj:s,fromLocalNodeIdStr:function(r){return E.sH(r)?e+r:null},fromRef:l,fromKiwi:function(e){if(!e)return null;let{guid:n,assetRef:a}=e;if(n&&!a)return s(n);if(!n&&a){let e=r.fromKiwi(a);if(e)return l(e)}return null},isValid:function(e){let n=i(e);if(n)return E.fn(n);let a=o(e);return!!a&&r.isValid(a)}}}!function(e){let r=b("CodeLibraryId:",f.sS);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(a||(a={})),function(e){let r=b("CodeFileId:",f.VP);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(i||(i={})),function(e){let r=b("CodeComponentId:",f.kY);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(o||(o={})),function(e){let r=b("ManagedStringId:",f.iF);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(s||(s={})),function(e){let r=b("ResponsiveSetId:",f.I0);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(l||(l={})),function(e){let r=b("SymbolId:",f.Uw);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(c||(c={})),function(e){let r=b("StateGroupId:",f.Kj);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(d||(d={})),function(e){let r=b("StyleId:",f.$y);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid,e.fromBindingsObj=function(r){return r.guid&&r.guid!==E.AD?e.fromLocalNodeIdStr(r.guid):e.fromRef(r.ref)}}(u||(u={})),function(e){let r=b("VariableID:",f.M4);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(p||(p={})),function(e){let r=b("VariableOverrideId:",f.cI);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(m||(m={})),function(e){let r="VariableSetID:",n=b("VariableCollectionId:",f.iV),a=b(r,f.iV);function i({current:e,deprecated:n}){return a=>a.startsWith(r)?n(a):e(a)}e.INVALID=n.fromLocalNodeIdStr(E.AD),e.toString=n.toString,e.toKiwi=i({current:n.toKiwi,deprecated:a.toKiwi}),e.toGuidObjIfLocal=i({current:n.toGuidObjIfLocal,deprecated:a.toGuidObjIfLocal}),e.toGuidStrIfLocal=i({current:n.toGuidStrIfLocal,deprecated:a.toGuidStrIfLocal}),e.toRefIfSubscribed=i({current:n.toRefIfSubscribed,deprecated:a.toRefIfSubscribed}),e.fromString=i({current:n.fromString,deprecated:a.fromString}),e.fromLocalNodeIdObj=n.fromLocalNodeIdObj,e.fromLocalNodeIdStr=n.fromLocalNodeIdStr,e.fromRef=n.fromRef,e.fromKiwi=n.fromKiwi,e.isValid=i({current:n.isValid,deprecated:a.isValid})}(_||(_={})),function(e){let r=b("ModuleId:",f.UG);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(h||(h={})),function(e){e.fromKiwi=e=>{if(e.guid)return{type:"guid",guid:E.dI(e.guid)};if(e.stateGroupId){let r=d.fromKiwi(e.stateGroupId);if(r)return{type:"stateGroup",stateGroupId:r}}if(e.symbolId){let r=c.fromKiwi(e.symbolId);if(r)return{type:"symbol",symbolId:r}}(0,y.KF)(!1,"Unhandled CanvasNodeId type")},e.toGuidStrIfLocal=e=>{switch(e.type){case"guid":return e.guid;case"symbol":return c.toGuidStrIfLocal(e.symbolId);case"stateGroup":return d.toGuidStrIfLocal(e.stateGroupId)}},e.toRefIfSubscribed=e=>{switch(e.type){case"guid":return null;case"symbol":return c.toRefIfSubscribed(e.symbolId);case"stateGroup":return d.toRefIfSubscribed(e.stateGroupId)}},e.toString=e=>{switch(e.type){case"guid":return e.guid;case"symbol":return c.toString(e.symbolId);case"stateGroup":return d.toString(e.stateGroupId)}},e.fromString=e=>{let r=c.fromString(e);if(r)return{type:"symbol",symbolId:r};let n=d.fromString(e);return n?{type:"stateGroup",stateGroupId:n}:E.sH(e)?{type:"guid",guid:e}:null}}(g||(g={}))},307650:(e,r,n)=>{n.d(r,{K0:()=>I,wL:()=>b,x1:()=>y});var a=n(887048),i=n(660376),o=n(186606),s=n(209108),l=n(297870),c=n(672154),d=n(705237),u=n(222099),p=n(746937),m=n(17586),_=n(553547),h=n(167165),g=n(731448),f=n(126788);function E(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}let y=1;class b extends Error{}class v extends Error{}function T(){if(!o.UNF||!o.Fk7)throw new b;if(!o.mSn)throw new v;return{NodeTsApi:o.UNF,NodeTsApiGenerated:o.Fk7,SceneGraphTsApi:o.mSn}}class I{get nodeContext(){return this._nodeContext}get scene(){if(this.sceneType===u.G)return o.AlE.getActiveDocument();switch((0,i.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return o.glU.getDetachedComponentsScene();case o.juq.LIVE_FILE:return o.AlE.getDocumentByIndex(0);case o.juq.HISTORY:return o.AlE.getDocumentByIndex(y);case o.juq.PLAYGROUND:return o.glU.getPlaygroundScene();case o.juq.FIRST_DRAFT:return o.XJn.getOrCreateFDScene();case o.juq.LINTER:return o.mHF.getOrCreateLinterScene();case o.juq.AUTO_SUGGEST:throw Error("Auto suggest scene should be retrieved via TSAutoSuggestSceneGraph");default:(0,i.xb)(this.sceneType)}}get isValidScene(){return -1!==this.scene}getNodes(e){return e.map(e=>this.get(e)).filter(e=>null!=e)}getFromStablePath(e){let r=o.UNF?.setGlobalUnstableNodeByStablePath(this.scene,e,this.nodeContext);return o.UNF?.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getFromDeveloperFriendlyId(e){let r=o.UNF?.setGlobalUnstableNodeByDeveloperFriendlyId(this.scene,e);return o.UNF?.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getCurrentPage(){let e=o.mSn?.getCurrentPage(this.nodeContext,this.scene);return e?this.getInternal(e,!1):null}async setCurrentPageAsync(e){if(this.sceneType!==u.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageAsync(e,this.nodeContext);let n=await r;if(n)throw Error(n)}async setCurrentPageFromNodeAsync(e){if(this.sceneType!==u.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageFromNodeAsync(e,this.nodeContext),await r}createNode(e,r={tracking:o.HzA.TRACK}){let n=a.w.NodeType[e],i=null;if(o.CUU?i=o.CUU.createNode(n,r,this.nodeContext,this.scene):o.mSn&&(i=o.mSn.createNode(n,r,this.scene)),!i)throw Error(`Cannot create node with type ${e}`);return this.getInternal(i,!1)}createNodeFromSVG(e,r={tracking:o.HzA.TRACK}){let n=o.CUU?.createNodeFromSVG(e,r,this.nodeContext,this.scene);if(!n)throw Error("Cannot create node from SVG");return this.getInternal(n,!1)}createComponentFromNode(e){let r=o.CUU?.createSymbolFromNode(e,this.nodeContext);if(!r)throw Error(`Cannot create component from node ${e}`);return this.getInternal(r,!1)}isDeveloperFriendlyIdAGuidPath(e){return o.CUU?.isDeveloperFriendlyIdAGuidPath(e)??!1}guidFromDeveloperFriendlyId(e){return o.CUU?.guidFromDeveloperFriendlyId(e,this.scene)??""}developerFriendlyIdFromGuid(e){return o.CUU?.developerFriendlyIdFromGuid(e,this.scene)??""}setChangeListenersConfig(e){this.changeListeners.config=e}onChange(e,r){return this.changeListeners.add(e,r)}onDelete(e){return this.deleteListeners.add(e),()=>this.deleteListeners?.delete(e)}triggerChange(){this.changeListeners.trigger()}triggerDeleteCallbacks(e){for(let r of this.deleteListeners)r(e)}getVariableNode(e){return this.getVariableFacetInternal(e,!0)??void 0}getCodeFileNode(e){if(!e)return;if(!o.mSn)throw new v;let r=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.CODE_FILE);if(r)return this.get(r)??void 0}getCodeComponentNode(e){if(!e)return;if(!o.mSn)throw new v;let r=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.CODE_COMPONENT);if(r)return this.get(r)??void 0}getLocalVariableNodes(e){return(o.CWU?.getLocalVariablesInfoForScene(this.scene)??[]).map(e=>this.getVariableFacetInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted).filter(r=>e?.resolvedDataType===void 0||r.variableResolvedType===e.resolvedDataType)}createVariable(e,r,n){let a=(0,d.WI)(n),i=o.CUU?.createVariable(this.scene,e,r,a),s=i?c.sD.fromString(i):null;if(!s)throw Error("Failed to create variable");return this.getVariableFacetInternal(s,!1)}getVariableCollectionNode(e){return this.getVariableCollectionFacetInternal(e,!0)??void 0}getLocalVariableCollectionNodes(e){return(o.CWU?.getLocalVariableSetsInfoForScene(this.scene)??[]).map(e=>this.getVariableCollectionFacetInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted)}createVariableCollection(e){let r=o.CUU?.createVariableCollection(this.scene,e),n=r?c.gr.fromString(r):null;if(!n)throw Error("Failed to create variable collection");return this.getVariableCollectionFacetInternal(n,!1)}getStyleNode(e){return this.getStyleFacetInternal(e,!0)??void 0}getStyleNodeByRef(e){if(o.Pt4)return this.getStyleFacetInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,e.key,e.version),!0)??void 0}getLocalStyleNodes(e){let r=a.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");return(o.glU?o.glU.getAllLocalStyles(this.scene,r):[]).map(e=>this.getStyleNodeByRef({key:e.styleKey,version:e.versionHash})).filter(e=>!!e)}createStyle(e){let r=a.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");if(!o.CUU||!o.Pt4)throw Error("Failed to create style");let n=o.CUU.createStyle(r,this.nodeContext,this.scene);if(!n)throw Error("Failed to create style");return this.getStyleFacetInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,n.key,n.version),!1)}getDirectlySelectedNodes(){return this.getCurrentPage()?.directlySelectedNodes||[]}getInternal(e,r){if(!e)return null;let n=T(),a=(0,l.G)(e,0),i=(0,l.G)(e,e.indexOf(":")+1);return r&&(n.NodeTsApi.setGlobalUnstableNodeByID(this.scene,a,i,this.nodeContext),!n.NodeTsApi.exists(this.nodeContext))?null:new p.D(e,this,n)}getVariableFacetInternal(e,r){if(!e)return null;let n=T(),a=n.SceneGraphTsApi.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE)??_.AD,i=(0,l.G)(a,0),s=(0,l.G)(a,a.indexOf(":")+1);if(r&&(n.NodeTsApi.setGlobalUnstableNodeByID(this.scene,i,s,this.nodeContext),!n.NodeTsApi.exists(this.nodeContext)))return null;let c=new p.D(a,this,n);return(0,h.v)(c)?c:null}getVariableCollectionFacetInternal(e,r){if(!e)return null;let n=T(),a=n.SceneGraphTsApi.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE_SET)??_.AD,i=(0,l.G)(a,0),s=(0,l.G)(a,a.indexOf(":")+1);if(r&&(n.NodeTsApi.setGlobalUnstableNodeByID(this.scene,i,s,this.nodeContext),!n.NodeTsApi.exists(this.nodeContext)))return null;let c=new p.D(a,this,n);return(0,g.v)(c)?c:null}getStyleFacetInternal(e,r){if(!e)return null;let n=T(),a=n.SceneGraphTsApi.getGUIDForAssetId(this.scene,e,o.PWo.STYLE)??_.AD,i=(0,l.G)(a,0),s=(0,l.G)(a,a.indexOf(":")+1);if(r&&(n.NodeTsApi.setGlobalUnstableNodeByID(this.scene,i,s,this.nodeContext),!n.NodeTsApi.exists(this.nodeContext)))return null;let c=new p.D(a,this,n);return(0,f.G)(c)?c:null}applyTextStylingActionToNodes(e,r){return o.CUU?.applyTextStylingActionToNodes(e,this.nodeContext,r)}getSlideGrid(){let e=o.CUU?.getSlideGrid(this.scene);return e?e.map(e=>e.map(e=>this.getInternal(e,!1))):[]}setSlideGrid(e){let r=e.map(e=>e.map(e=>e.guid));o.CUU?.setSlideGrid(r,this.nodeContext,this.scene)}updateDerivedSymbolDataOnPrimaryInstances(e){o.Egt?.updateDerivedSymbolDataOnPrimaryInstances(e,this.scene)}updateAll(){new o.vNG(this.scene).updateAll()}runWithPluginContext(e,...r){let n=this.nodeContext;this._nodeContext=o.Sie.PLUGIN;try{return e(...r)}finally{this._nodeContext=n}}combineAsVariants(e,r,n){let a=o.NfO.groupNodes(o.fHP.STATE_GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}group(e,r,n){let a=o.NfO.groupNodes(o.fHP.GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}union(e,r,n){let a=o.NfO.groupNodes(o.fHP.UNION,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}subtract(e,r,n){let a=o.NfO.groupNodes(o.fHP.SUBTRACT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}intersect(e,r,n){let a=o.NfO.groupNodes(o.fHP.INTERSECT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}exclude(e,r,n){let a=o.NfO.groupNodes(o.fHP.XOR,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(a,!1)}flatten(e,r,n){let a=o.NfO.flattenNodes(e.map(e=>e.guid),r?.sessionID??-1,r?.localID??-1,n??-1,this.scene);return this.getInternal(a,!1)}ungroup(e){return o.NfO.ungroupNode(e.guid,this.scene).map(e=>this.getInternal(e,!1))}constructor(e,r=u.G){E(this,"sceneType",void 0),E(this,"_nodeContext",void 0),E(this,"getSceneType",void 0),E(this,"getSceneTypeDebugString",void 0),E(this,"get",void 0),E(this,"getOrThrow",void 0),E(this,"getRoot",void 0),E(this,"getInternalCanvas",void 0),E(this,"setCurrentPage_DEPRECATED",void 0),E(this,"changeListeners",void 0),E(this,"deleteListeners",void 0),this.sceneType=r,this.getSceneType=()=>this.sceneType,this.getSceneTypeDebugString=()=>{if(this.sceneType===u.G)return"CURRENT_DOCUMENT";switch((0,i.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return"DETACHED_COMPONENTS";case o.juq.LIVE_FILE:return"LIVE_FILE";case o.juq.HISTORY:return"HISTORY";case o.juq.PLAYGROUND:return"PLAYGROUND";case o.juq.FIRST_DRAFT:return"FIRST_DRAFT";case o.juq.LINTER:return"LINTER";case o.juq.AUTO_SUGGEST:return"AUTO_SUGGEST";default:(0,i.xb)(this.sceneType)}},this.get=e=>this.getInternal(e,!0),this.getOrThrow=e=>this.getInternal(e,!1),this.getRoot=()=>this.getInternal("0:0",!1),this.getInternalCanvas=()=>{let e=o.mSn?.getInternalCanvas(this.scene);return e?this.getInternal(e,!1):null},this.setCurrentPage_DEPRECATED=e=>{let r=o.CUU.setCurrentPageAsync(e,this.nodeContext);if(r)throw Error(r)},this.changeListeners=new m.P(m.Q),this.deleteListeners=new Set,this._nodeContext=e}}},604801:(e,r,n)=>{n.d(r,{a:()=>o});var a=n(861868);let i=class{fontResourceStatusChanged(e,r,n){(0,a.dF)(e,r,n)}};function o(){new i}},803565:(e,r,n)=>{function a(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,a=[0,0,0];for(let i=0;i<3;i++){let o=e.h+-(1/3*(i-1));o<0&&o++,o>1&&o--,6*o<1?a[i]=n+(r-n)*6*o:2*o<1?a[i]=r:3*o<2?a[i]=n+(r-n)*(2/3-o)*6:a[i]=n}return{r:a[0],g:a[1],b:a[2],a:e.a}}function i(e){let r=e.r,n=e.g,a=e.b,i=Math.min(Math.min(r,n),a),o=Math.max(Math.max(r,n),a),s=o-i,l=0;o===i?l=0:r===o?l=(n-a)/s:n===o?l=2+(a-r)/s:a===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(i+o)/2;return{h:l/=360,s:o===i?0:c<=.5?s/(o+i):s/(2-o-i),l:c,a:e.a}}function o(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,a=n*(1-Math.abs(r%2-1)),i=e.s<=0?0:r<1?n:r<2?a:r<3?0:r<4?0:r<5?a:n,o=e.s<=0?0:r<1?a:r<2?n:r<3?n:r<4?a:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?a:r<4?n:r<5?n:a,l=e.v-n;return{r:i+l,g:o+l,b:s+l,a:e.a}}function s(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function l(e){return"l"in e?a(e):o(e)}function c(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function d(e,r){let n=i(e),o=360*n.h;return a({...n,h:(o+r)%360/360})}function u(e){return 255&(e>0?255*e+.5:0)}function p(e,r,n){return u(e)|u(r)<<8|u(n)<<16|-0x1000000}function m(e){return u(e.red)|u(e.green)<<8|u(e.blue)<<16|u(e.alpha)<<24}function _(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function h(e,r){let n=e.alpha,a=r.alpha,i=n*(1-a),o=i+a,s=i/o,l=a/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,r){let n=[];for(let a=0;a<3;a++)n.push(e[a][0]*r[0]+e[a][1]*r[1]+e[a][2]*r[2]);return n}function y(e){return b({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function b(e){let r=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.000000008881761,-.10556134232365635,-.0638541747717059],[1.000000054672411,-.0894841820949658,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),a=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:a[0],g:a[1],b:a[2],a:e.a}}n.d(r,{Ad:()=>d,I0:()=>y,Ih:()=>c,QR:()=>p,R0:()=>_,aH:()=>f,au:()=>h,bi:()=>m,kE:()=>o,oB:()=>i,oU:()=>g,oq:()=>b,qN:()=>s,w_:()=>l})},988402:(e,r,n)=>{var a,i,o,s;n.d(r,{RR:()=>a,uN:()=>i}),function(e){e.VISIBLE="visible",e.TEXT="text-data",e.OVERRIDDEN_SYMBOL_ID="overridden-symbol-id",e.SLOT_CONTENT_ID="slot-content-id"}(a||(a={})),function(e){e.TYPED="typed",e.VARIANT="variant"}(i||(i={})),function(e){e.DEFAULT="default",e.SLIDER="slider",e.INPUT="input",e.SELECT="select"}(o||(o={})),function(e){e.GPT="GPT",e.FS="FRAGMENT_SEARCH"}(s||(s={}))},73115:(e,r,n)=>{n.d(r,{EV:()=>c,Yp:()=>s,hx:()=>l});var a=n(570216),i=n(348104),o=n(241052);class s extends(0,o.G)((0,a.WZ)(i.X)){get isAlive(){return this.setGlobalNodeID(),this.bindings.NodeTsApi.exists(this.sceneGraph.nodeContext)}get tracking(){return this.setGlobalNodeID(),this.bindings.NodeTsApi.getTracking(this.sceneGraph.nodeContext)}get isSoftDeleted(){return this.setGlobalNodeID(),this.bindings.NodeTsApi.getIsSoftDeleted(this.sceneGraph.nodeContext)}set name(e){this.setGlobalNodeID();let r=this.bindings.NodeTsApi.setName(e,this.sceneGraph.nodeContext);if(r)throw Error(r)}get name(){return this.setGlobalNodeID(),this.bindings.NodeTsApi.getName(this.sceneGraph.nodeContext)}removeSelfAndChildren(){if(this.setGlobalNodeID(),!this.bindings.NodeTsApi.removeSelfAndChildren(this.sceneGraph.nodeContext))throw Error("Removing this node is not allowed")}}function l(e){return e}function c(e){return e}},17145:(e,r,n)=>{function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{$C:()=>R,A1:()=>m,A2:()=>K,Ag:()=>P,Bj:()=>Y,Bz:()=>J,CJ:()=>e_,EU:()=>f,Fe:()=>F,Gh:()=>$,IW:()=>u,Iz:()=>ea,LY:()=>b,Lz:()=>M,M0:()=>ei,RN:()=>i,RU:()=>q,Rx:()=>G,S_:()=>U,TC:()=>k,Ud:()=>V,V3:()=>X,Vm:()=>L,W3:()=>N,WF:()=>j,Z3:()=>x,ZD:()=>S,_L:()=>y,a5:()=>s,aO:()=>H,b_:()=>en,be:()=>eo,c2:()=>C,d1:()=>es,dJ:()=>et,d_:()=>ep,di:()=>o,eZ:()=>g,jw:()=>c,k0:()=>h,l5:()=>A,lM:()=>D,mk:()=>B,nn:()=>ee,p6:()=>v,pG:()=>ec,qP:()=>ed,qQ:()=>W,qV:()=>el,rb:()=>O,rf:()=>T,rm:()=>l,sG:()=>em,tO:()=>d,tg:()=>p,tz:()=>I,uG:()=>eu,uH:()=>er,vv:()=>Q,w4:()=>w,wm:()=>z,xJ:()=>_,yR:()=>Z,yy:()=>E});class i{onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onIntentionalEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class o{readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class s{logShadowReadSuggestionsOnPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class l{generateRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateSessionId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onExplicitDismiss(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFullOrPartialAccept(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class c{jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoOptionalJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class d{rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getAnnotationTextContent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class u{clearCodeSnapshotsFromMessages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class p{handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class m{openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class _{trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class h{convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class g{startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class f{requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openCooperExportModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFplDebug(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findCodebaseSuggestions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFeatureFlagBisectorModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTemplatePublishModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMagicLinkSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showUpscaleImageSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEditGlueError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodesLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithReloadButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showFragmentSearchSuggestion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError__DEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFileLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}enableCodegenMcpServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToCmsItemPage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncBrushStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncPenStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncCurrentToolSetSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToWebEventListener(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getVariableSetNumberOfModesAllowed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultStateKeyForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardDiagrammingShapeToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isOrgUserGatedForLlama(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}upscaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasAiRenameLayersPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}logFullscreenActionToDatadogRum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}designToCodeFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}bulkExportDesignsToReact(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDirectExportCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewCms(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesInsertsOverlay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesFindOverlay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setAnnotationEditingIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSlotPreferredContentPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class E{fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class y{connect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}disconnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}send(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class b{getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class v{getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLinterContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isLinterContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isInteractiveInspectionEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isChangingInspectionValues(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onUnexpectedEditInFocusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class T{nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class I{createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class S{updateViolationsForNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}isDesignLinterEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class A{setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class w{getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldBlockPdfImports(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class C{selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}slidesViewChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class N{setSitesViewState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSitesViewState(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class L{getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class O{resolveThumbnailRequest(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectThumbnailRequest(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class R{isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class P{pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class D{reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class k{showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}validateCopyBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class M{handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class F{clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class x{getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class U{onUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onRedo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class B{dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class G{trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class V{getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class H{isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3ColorsInitialValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class z{readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class K{decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}init(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class W{createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyVideoPermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}contextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class j{autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Y{getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ${markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class q{submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isVariableAvailableInLibraryAsset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class X{copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyImagePermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}staticAssetWithPath(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class J{rgbaToThumbhash(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}thumbhashToRgba(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{rgba:new Uint8Array,width:0,height:0}}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Z{readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class Q{getParsedCodeTokens(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getBackgroundColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLineNumberColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCursorColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ee{onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class et{prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getWCAG2Contrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}announceNodeCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceSingleNodeDeleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceMultipleNodesDeleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceTextSelection(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceToolSelected(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceTableCellTextSelection(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceNodeResized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceNodeMoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceSelectionBoxResized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceSelectionBoxMoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceViewportPanned(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceViewportZoomed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class er{onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class en{isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ea{clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ei{updatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateDirtyResponsiveSets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setLeftPanelTabToCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCodeWindowPanelToChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markNodeAsDesignToReact(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markCodeNodesDirty(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncNodeSourceCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getAutomaticCodeFileNameForNodeName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}updateCodeSnapshotState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cleanupCodeSnapshotOverlays(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTimestampForCodeSnapshotInvalidatedAt(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}isCodeSnapshotStale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}resnapshotIfStale(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateDerivedCodeFileDebounced(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSupabaseDeployNudge(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setAutoDeploySupabase(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeAttachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pushAttachmentSourceCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pushAttachmentError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateOnePendingAttachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSprigUserCreatedCodeLayerAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldHideDefaultSetOnCreation(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}prewarmSandboxPool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getCodeLayersDefaultEntryPointFile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class eo{isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class es{getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class el{calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ec{isZombieStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ed{storeVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class eu{trackUserActionTimings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}requestFrameTiming(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class ep{syncChangedSubscribedConsumptions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class em{syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}class e_{windowSetupComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}windowHandleBeforeTick(...e){if(this.shouldThrow)throw Error("Method not implemented.")}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyWindow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usingMultiTouchPointerEvents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}writeClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}clearClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryToReadFromClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadSubstringFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToDetectSpreadsheetDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}tryToDetectLineDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}setCanvasView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){a(this,"shouldThrow",void 0),this.shouldThrow=e}}},647882:(e,r,n)=>{n.d(r,{D7:()=>m,K:()=>l,MJ:()=>i,Nc:()=>o,PT:()=>f,SJ:()=>E,T_:()=>p,V1:()=>u,cp:()=>_,qI:()=>c,rj:()=>d});var a=n(660376);let i="https://help.figma.com/hc/en-us/articles/32801027692183-Troubleshoot-the-Figma-Font-installer",o="https://help.figma.com/hc/en-us/articles/360039956894-Add-a-font-to-Figma-Design#h_01HHJPRGW7HM4KP1G53T9K1G95";function s({baseUrl:e,shouldUseLocalFontIndex:r}){return void 0!==e?e:r?"http://localhost:8003/font":window.location?.hostname==="figma-gov.com"?"https://static.figma-gov.com/font":"https://static.figma.com/font"}function l(e){return`${s(e)}/${function(e){let r=e.shouldUse250317Index?"798305269cb5be7625b77c5a0ed170a8":"168b60c183c56896337507ffc5acc38f";switch(e.format){case"json":return`index_${r}.json`;case"kiwi":return`index_${r}.kiwi.json`;default:(0,a.xb)(e.format)}}(e)}`}let c="SFPro",d="SF Pro",u="SF Pro Rounded",p="SF Compact",m="SF Compact Rounded";function _(e,r){return`${s(r)}/${e}`}let h={thin:100,extralight:200,light:300,regular:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},g={100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Black"};function f(e){return{fontWeight:h[e.replace(/italic/gi,"").replace(/ /g,"").toLowerCase()]??400,italic:e.includes("Italic")}}function E(e,r){if(!e)return r?"Italic":"Regular";let n=g[e]??"Regular";return r?"Regular"===n?"Italic":`${n} Italic`:n}},708959:(e,r,n)=>{n.d(r,{GP:()=>i,ri:()=>o});var a=n(318818);function i(e){return(0,a.C_)("fillPaints",{data:[e],blobs:[]})}function o(e){let r=(0,a.dG)("fillPaints",e);return r?.data??[]}},195124:(e,r,n)=>{n.d(r,{DS:()=>d,F0:()=>p,GI:()=>h,Ji:()=>b,MT:()=>_,O5:()=>E,Ql:()=>y,Si:()=>l,UP:()=>T,bV:()=>f,hD:()=>c,hV:()=>o,kh:()=>v,oY:()=>m,rV:()=>u});var a=n(531908);n(19180);var i=n(768618);function o(e,r){let n=r(e);if("stop"===n||"skip"===n)return n;for(let n of e.childrenNodes)if("stop"===o(n,r))return"stop"}function s(e,r){return e.get(r)?.parentNode||null}function l(e,r,n){let a=s(e,r);for(;a;){if("CANVAS"===a.type||"DOCUMENT"===a.type)return;if("stop"===n(a))break;a=a.parentNode}}function c(e,r,n){let a=e.get(r);a&&"stop"!==n(a)&&l(e,r,n)}function d(e,r){let n=[];return l(e,r,e=>{n.push(e)}),n}function u(e,r,n){if(r===n)return!0;let a=s(e,n);for(;a;){if(a.guid===r)return!0;a=a.parentNode}return!1}function p(e,r){let n=0,a=e.get(r)||null;for(;a&&"CANVAS"!==a.type&&"DOCUMENT"!==a.type;)n++,a=s(e,a.guid);return n}function m(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function _(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function h(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function g(e,r){return r&&"CANVAS"===r.type&&r.visible&&(0,a.F)(e.type)&&e.visible}function f(e,r){let n=[],a=e.get(r);if(!a)return n;for(let r of a.uiOrderedChildren){let i=e.get(r);g(i,a)&&n.push(i)}return n}function E(e,r){let n=[],a=e.get(r);if(!a)return[];for(let r of a.uiOrderedChildren){let i=e.get(r);i&&i.isResponsiveSet&&g(i,a)&&n.push(i)}return n}function y(e,r){let n=null;return l(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&g(e,r))return n=e,"stop"}}}),n}function b(e){let r=null,n=e.parentNode;for(;n;){if(n.isStackOrFixedSizeContainer){r=n;break}n=n.parentNode}return r}function v(e,r){let n=null;return c(e,r,e=>{let r=e.parentNode;r&&r&&("CANVAS"===r.type||"SECTION"===r.type)&&r.visible&&(0,a.F)(e.type)&&e.visible&&"SECTION"!==e.type&&(n=e)}),n}function T(){let e=(0,i.UN)(),r=[];return o(e.getRoot(),e=>{r.push(e.guid)}),r}},693108:(e,r,n)=>{n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>a});var a,i=n(673786);!function(e){e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID"}(a||(a={}));let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,i.n3)(r[0]),a=(0,i.IA)(r[1]);return n===i.n3.INVALID?null:{key:n,version:a}}},778122:(e,r,n)=>{n.d(r,{N4:()=>l,eS:()=>c,iL:()=>s,jS:()=>d});var a=n(289121),i=n(186606);let o={};function s(){return o}function l({isProduction:e,executeEmscriptenJS:r}){let n,i;let s=(0,a.n)();(o={}).instantiateWasm=function(e,r){return n=e,i=r,{}},s.Module=o;let l=!1;e||Object.defineProperty(o,"wasmOffsetData",{get:()=>(l=!0,{offset_map:{},func_starts:[],name_map:{},import_functions:0}),set:()=>{}});try{r(),l&&(o.emscripten_realloc_buffer??o.growMemory)(0x60000000)}finally{delete s.Module}if(void 0===n)throw Error('Expected WebAssembly code to set "imports"');if(void 0===i)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:n,receiveInstance:i,getReservedHeapSize:()=>o.HEAPU8.buffer.byteLength}}function c(){let e=(0,a.n)(),r=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,r}function d({callMain:e,tsApisForCpp:r,registerRefreshCallback:n,leakBindings:s}){let l=(0,a.n)();try{l.tsapi_init=(e,r)=>{(0,i.LQj)(e),n?.(r)},l.tsApisForCpp=r,o.jsHelpers=r.jsHelpers,e()}finally{s||(delete l.tsapi_init,delete l.tsApisForCpp)}}},947239:(e,r,n)=>{n.r(r),n.d(r,{BOOLEAN_TYPE_REPR:()=>a.oo,COMPONENT_PREFIX:()=>i.FE,CUSTOM_IMAGE_TYPE_STR:()=>a.Vk,IMAGE_NAME_FORMAT:()=>i.Ii,IMAGE_TYPE_REPR:()=>a.dX,STRING_TYPE_REPR:()=>a.NU,cleanComponentPropNameForUsage:()=>i.j3,extractModifiersFromProp:()=>i.rB,filterComponentProps:()=>l.A,getComponentInfoById:()=>a.Ye,getComponentInfoByIdUncached:()=>a.Z1,getComponentJSXName:()=>i.WG,getInstanceIdsForDef:()=>i.wn,getInstanceNodeProps:()=>c.Y,getNestedImageNodes:()=>i._j,getNodeParentPath:()=>o.yu,getTypeInfoCached:()=>a.NY,groupByCommonPrefixSorted:()=>i.hM,isPartOfGroup:()=>o.Se,moveNumbersToEnd:()=>s.wP,resetTypeInfoCache:()=>a.UY,toCamelCase:()=>s.Cb,toTitleCase:()=>s.Sn,usagePropsToRawProps:()=>c.R});var a=n(671520),i=n(380731),o=n(507043),s=n(741010),l=n(791890),c=n(982800)},171351:(e,r,n)=>{n(794973),n(288768),n(345622)},345622:(e,r,n)=>{async function a(){return await n.e(1470).then(n.bind(n,161470))}n.d(r,{_o:()=>a}),n(718827),n(288768)},158442:(e,r,n)=>{n(870879);var a=n(288768);n(171351),a.Q_,a.cq,a.Eo,a.SR,a.ut},49153:(e,r,n)=>{n.d(r,{_o:()=>i._o,f6:()=>a.f6}),n(158442);var a=n(288768);n(718827),n(870879),n(171351);var i=n(345622)},130198:(e,r,n)=>{n.r(r),n.d(r,{CallMethodRecord:()=>s.D1,CreateNodeRecord:()=>s.ao,JSXPatchInsertSchema:()=>i.Gv,JSXPatchRemovePropSchema:()=>i.eL,JSXPatchRemoveSchema:()=>i.NT,JSXPatchReplaceChildSchema:()=>i.B6,JSXPatchReplaceSchema:()=>i.pf,JSXPatchSchema:()=>i.lF,JSXPatchSetPropSchema:()=>i.MU,JSXPatchSetSpreadSchema:()=>i._0,JSXPatchSetTextSchema:()=>i.uC,JSXPathSchema:()=>i.u5,ReconciliationRuntime:()=>p.i,SceneNodeRecord:()=>s.sU,SceneNodeShim:()=>m.u,SerializerOptionsSchema:()=>s.Y_,SetPropertyRecord:()=>s.tV,applyFieldSerializersToDeclarativeNode:()=>g.Ri,createSerializerContext:()=>f.o,defaultOptions:()=>s.KQ,deserializeJSX:()=>a.LZ,deserializeJSXElement:()=>a.BZ,diffJSX:()=>i.dr,fieldSerializerOrdering:()=>h.bO,generateComponentsSchema:()=>c.D,generateSchema:()=>l.B,getNodeSerializers:()=>o.a,getReactFunctionComponentDefinition:()=>d.g,reconcileConstraints:()=>E.nh,reconcileFallbackWidthAndHeightIfHug:()=>E.m6,reconcileJSX:()=>a.Go,reconcileJSXElement:()=>a.m,reconcileWidthAndHeight:()=>E.LL,reconcileXY:()=>E.Cu,serializeEditsJS:()=>u.h,serializeJSX:()=>a.oy,serializeJSXElement:()=>a.ul,writeNonTextProps:()=>_.eH});var a=n(226975),i=n(114882),o=n(529701),s=n(686181),l=n(219421),c=n(339226),d=n(155910),u=n(423965),p=n(340821),m=n(901672),_=n(586441),h=n(146155),g=n(725536),f=n(231399),E=n(861780)},876747:(e,r,n)=>{n.d(r,{Ed:()=>a.Ed});var a=n(797778);n(653645),n(186606),n(768618),n(454550),n(666314)},653645:(e,r,n)=>{n.d(r,{KY:()=>d,Pm:()=>g,c1:()=>l,h:()=>c,iz:()=>p,jd:()=>u,qK:()=>h,rt:()=>_,s$:()=>f,v6:()=>m});var a=n(660376),i=n(454550),o=n(729543),s=n(666314);function l(e){let r=e.slice(1).join(o.rR);if("transparent"===r)return[];let n=r.split("/"),a=n[0],l=n[1]??"",c=i.Fy[a]??(0,o.G2)(a);if(!c||!c.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!i.KF[l])return c;let d=(0,s.QW)(c);return d&&i.KF[l]&&(d.a=i.KF[l]??1),d}function c(e){return i.UF[e]||`[${e.toFixed(0)}px]`}function d(e){return i._L[e]||`[${e.toFixed(0)}px]`}function u(e){return i.hN[e]||`[${e.toFixed(0)}]`}function p(e){let r=e.toLowerCase(),n=i.c[r];if(n)return n;if(/^#[0-9A-Fa-f]{3}$/.test(r)){let e="#"+r.slice(1).split("").map(e=>e+e).join(""),n=i.c[e];if(n)return n}return`[${r}]`}function m(e,r){let n=i.uZ[e];return!r?.alwaysUsePreciseValues&&e>=999?"-full":"string"==typeof n?n?`-${n}`:"":`-[${e.toFixed(0)}px]`}function _(e,r){switch(r){case"PIXELS":{let r=i.dP[e];if(r)return r;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[r,n]of Object.entries(i.u0))if(Math.round(100*n)===Math.round(e))return r;return`[${e.toFixed(0)}%]`;default:(0,a.xb)(r)}}function h(e){let r=parseFloat(e.toFixed(2)).toString();return["0","2","4","8"].includes(r)?`${r}`:`[${r}px]`}function g(e){let r=parseFloat(e.toFixed(2));return i.dJ[r]||`[${r.toString()}]`}function f(e,r){return r<0?`-${e}-${c(-r)}`:`${e}-${c(r)}`}},729543:(e,r,n)=>{n.d(r,{G2:()=>l,Hc:()=>o,kX:()=>s,mu:()=>u,rR:()=>d});var a=n(202832);let i=/^\[(?:([a-z-]+):)?(.+)\]$/i;function o(e,r=0){let n=i.exec(e);if(n&&n[2].endsWith("px")){let e=n[2].slice(0,n[2].length-2);if(r>0){let r=Number(e);return isNaN(r)?null:Number(r.toFixed(2))}return a.y$.isInteger(e)?Number(e):null}return null}function s(e){let r=i.exec(e);if(r&&r[2].endsWith("%")){let e=r[2].slice(0,r[2].length-1);return a.y$.isInteger(e)?Number(e):null}return null}function l(e){let r=i.exec(e);return r&&r[2].startsWith("#")?r[2]:null}let c=/\s+/,d="-";function u(e){let r=(0,a.QP)(e),n=r.includes("flex-col")?"vertical":"horizontal";return r.split(c).map(e=>({...function(e){let r=!1,n=e.split(d);return""===n[0]&&1!==n.length&&(r=!0,n.shift()),{classParts:n,isNegative:r,className:e}}(e),flexDirection:n}))}},400747:(e,r,n)=>{n.d(r,{J3:()=>a.J3});var a=n(686181);n(836074),n(510445),n(898247)},666314:(e,r,n)=>{n.d(r,{QW:()=>i,si:()=>c});var a=n(189067);function i(e){if(!e)return null;e=e.replace(/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(e,r,n,a,i)=>"#"+r+r+n+n+a+a+(i?i+i:""));let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);if(r)return{r:parseInt(r[1],16)/255,g:parseInt(r[2],16)/255,b:parseInt(r[3],16)/255,a:void 0===r[4]?1:parseInt(r[4],16)/255};let n=/^rgba\(\s*([0-9.]+),\s*([0-9.]+),\s*([0-9.]+),\s*([0-9.]+)\s*\)$/i.exec(e);return n?{r:parseFloat(n[1])||0,g:parseFloat(n[2])||0,b:parseFloat(n[3])||0,a:parseFloat(n[4])||0}:null}a.z.object({r:a.z.number().min(0).max(1),g:a.z.number().min(0).max(1),b:a.z.number().min(0).max(1),a:a.z.number().min(0).max(1)}).describe("@name(RGBA)");let o=e=>("00"+Math.round(255*e).toString(16).toUpperCase()).substr(-2),s=e=>`${o(e.r)}${o(e.g)}${o(e.b)}`,l=(e,r=1)=>`${o(e.r)}${o(e.g)}${o(e.b)}${o(e.a*r)}`;function c(e,r=1){if(1===e.a&&1===r){let r=s(e);return r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]?`#${r[0]}${r[2]}${r[4]}`:`#${r}`}{let n=l(e,r);return n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]?`#${n[0]}${n[2]}${n[4]}${n[6]}`:`#${n}`}}},349277:(e,r,n)=>{n.d(r,{A$:()=>l.A$,CM:()=>l.CM,CN:()=>s.CN,DA:()=>l.DA,Dz:()=>s.Dz,Ep:()=>s.Ep,Ff:()=>d.Ff,Gg:()=>d.Gg,IO:()=>l.IO,If:()=>l.If,JO:()=>l.JO,LP:()=>o.LP,LY:()=>d.LY,NE:()=>l.NE,Ob:()=>l.Ob,QV:()=>c.Q,Qn:()=>l.Qn,Zj:()=>l.Zj,Zw:()=>o.Zw,_0:()=>s._0,ai:()=>d.ai,df:()=>i.d,eZ:()=>l.eZ,fJ:()=>o.fJ,fL:()=>l.fL,g5:()=>l.g5,gG:()=>d.gG,k9:()=>s.k9,n2:()=>s.n2,o6:()=>l.o6,oA:()=>l.oA,pD:()=>s.pD,pM:()=>a.pM,q:()=>l.q,rV:()=>l.rV,s8:()=>s.s8,sj:()=>l.sj,sl:()=>l.sl,uf:()=>l.uf,xe:()=>s.xe,xy:()=>l.xy});var a=n(270327),i=n(486207);n(444935);var o=n(466255),s=n(717840),l=n(389318),c=n(65647),d=n(129053)},695640:(e,r,n)=>{n.d(r,{$V:()=>function e(r,n){return!_(r.parentNode)&&(r.parentNode===n||e(r.parentNode,n))},CB:()=>_,FI:()=>m,FZ:()=>a,Fo:()=>v,Id:()=>k,JE:()=>A,N6:()=>S,OS:()=>F,Og:()=>N,Sh:()=>h,Si:()=>b,TA:()=>L,VL:()=>g,Z:()=>V,fN:()=>function e(r){if(!x(r)||(0,s.P)(r)||(0,l._)(r)||_(r.parentNode)||r.w>=128||r.h>=128||r.w<.01||r.h<.01||r.w/r.h>2||r.h/r.w>2)return!1;if(w(r)&&r.children){let n=!0;for(let a of r.children)if("GROUP"===a.type){if(!e(a)){n=!1;break}}else if(!C(a)&&!M(a)){n=!1;break}return n}return!1},fY:()=>function e(r){if(_(r.parentNode))return!1;let n=k(r);if(r.w>=n.w||r.h>=n.h/2||r.w<.01||r.h<.01)return!1;if(w(r)&&r.children){if(1===r.children.length){let n=r.children[0];if(!1===n.visible)return!1;if("TEXT"===n.type||"FRAME"===n.type&&n.children&&1===n.children.length&&e(n.children[0]))return!0}if(r.children.length>1&&r.children.length<5){for(let n of r.children)if(!1!==n.visible&&("TEXT"!==n.type&&"GROUP"!==n.type&&"RECTANGLE"!==n.type&&"ROUNDED_RECTANGLE"!==n.type&&!F(n)||"GROUP"===n.type&&!e(n)))return!1;let n=!0;for(let e of r.children)if(!F(e)){n=!1;break}return!n}}return!1},hb:()=>E,j0:()=>O,nP:()=>P,nf:()=>x,rm:()=>B,rq:()=>G,u_:()=>w,ul:()=>f,yM:()=>function e(r,n){if(r.children)for(let a of r.children)e(a,n);n(r)},yV:()=>R});var a,i=n(642457),o=n(724612),s=n(243674),l=n(593328);function c(e,r,n,a,i,o,s){try{var l=e[o](s),c=l.value}catch(e){n(e);return}l.done?r(c):Promise.resolve(c).then(a,i)}function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(r){d(e,r,n[r])})}return e}function p(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n})(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}),e}class m extends Error{toString(){return"Error: Found loose node on page"}constructor(e){super(),d(this,"looseNodeInfo",void 0),this.name="FoundLooseNodeOnPageError",this.looseNodeInfo=e}}function _(e){return"CANVAS"===e.type}function h(e,r){for(let n of r.children){let r=g(e,n);if(r)return r}return null}function g(e,r){if(r.id===e)return r;if(!r.children)return null;for(let n of r.children){let r=g(e,n);if(r)return r}return null}function f(e,r){let n=[e];for(;n.length>0;){let e=n.pop();r(e),e.children&&n.push(...e.children)}}function E(e,r){return y.apply(this,arguments)}function y(){var e;return e=function*(e,r){let n=[e];for(;n.length>0;){let e=n.pop();yield r(e),e.children&&n.push(...e.children)}},(y=function(){var r=this,n=arguments;return new Promise(function(a,i){var o=e.apply(r,n);function s(e){c(o,a,i,s,l,"next",e)}function l(e){c(o,a,i,s,l,"throw",e)}s(void 0)})}).apply(this,arguments)}function b(e,r){if(_(e.parentNode))return;let n=e.parentNode;for(;n&&"CANVAS"!==n.type&&!("BREAK"===r(n)||_(n.parentNode));)n="parentNode"in n?n.parentNode:void 0}function v(e,r,{includeSelf:n}={includeSelf:!0}){let a=[];return f(e,i=>{r(i)&&(n||i!==e)&&a.push(i)}),a}function T(e){var r;return p(u({},e),{children:null===(r=e.children)||void 0===r?void 0:r.map(T)})}function I(e,r,n){if(e.id===r)return{parent:n,node:e};if(e.children)for(let n of e.children){let a=I(n,r,e);if(a)return a}return null}function S(e,r){let{parent:n,node:a}=I(e,r)||{};for(;n&&"CANVAS"!==n.type&&"SECTION"!==n.type;){var i,o;a=n,n=null===(i=I(e,null!==(o=n.id)&&void 0!==o?o:""))||void 0===i?void 0:i.parent}return null!=a?a:e}function A(e){return"FRAME"===e.type||"INSTANCE"===e.type||"SYMBOL"===e.type}function w(e){var r;return["GROUP","BOOLEAN_OPERATION"].includes(null!==(r=e.type)&&void 0!==r?r:"")||A(e)}function C(e){var r;return["VECTOR","BOOLEAN_OPERATION","ELLIPSE","STAR","REGULAR_POLYGON","RECTANGLE","ROUNDED_RECTANGLE","LINE"].includes(null!==(r=e.type)&&void 0!==r?r:"")}function N(e){return["CANVAS","SECTION"].includes(e.type)}function L(e){var r,n;return"FRAME"===e.type&&((null===(r=e.parentNode)||void 0===r?void 0:r.type)==="CANVAS"||(null===(n=e.parentNode)||void 0===n?void 0:n.type)==="SECTION")}function O(e){if(w(e)&&e.children&&e.children.length>0){let r=!0;for(let n of e.children)if(!("VECTOR"===n.type&&(0,i.bB)(n.name))){r=!1;break}if(r)return!0}return!1}function R(e,r){var n;let a=(null!==(n=e.parentNode.children)&&void 0!==n?n:[]).filter(r=>r!==e),i=[];for(let n of a){if(n===e)continue;let a={x:n.x,y:n.y,width:n.w,height:n.h},s={x:e.x,y:e.y,width:e.w,height:e.h};r?(0,o.oP)(s,a)&&i.push(n):(0,o.oP)(a,s)&&i.push(n)}return i}function P(e){return A(e)&&N(e.parentNode)}!function(e){e.CONTINUE="CONTINUE",e.BREAK="BREAK"}(a||(a={}));let D=["CANVAS","SECTION","SLIDE_ROW"];function k(e){if(D.includes(e.parentNode.type)&&P(e))return e;if(_(e.parentNode))throw new m(e);return k(e.parentNode)}function M(e){return"TEXT"===e.type&&!!e.characters&&Number.isInteger(parseInt(e.characters))}function F(e){if(_(e.parentNode))return!1;let r=k(e);if(e.w>=r.w||e.h>=r.h||e.w<.01||e.h<.01)return!1;if(C(e)||M(e))return!0;if(w(e)&&e.children){let r=!0;for(let n of e.children)if("GROUP"===n.type){if(!F(n)){r=!1;break}}else if(!C(n)&&!M(n)){r=!1;break}return r}return!1}function x(e){let r=!0;return e.visible||void 0===e.visible||(r=!1),b(e,e=>e.visible||void 0===e.visible?"CONTINUE":(r=!1,"BREAK")),r}function U(e){return e.localID<0||e.sessionID<0?null:`${e.sessionID}:${e.localID}`}function B(e,r){var n;let a=[],i=null===(n=e.interactions)||void 0===n?void 0:n.flatMap(n=>{let i;if(!e.id||!n)return[];let o=function(e,r){var n;if(e.isDeleted)return null;let a=null===(n=e.actions)||void 0===n?void 0:n.find(e=>"BACK"===e.connectionType||"CLOSE"===e.connectionType||"INTERNAL_NODE"===e.connectionType&&e.transitionNodeID&&("NAVIGATE"===e.navigationType||"OVERLAY"===e.navigationType));if(!a)return null;let i=null,o=a.connectionType,s=a.navigationType;if("BACK"===o||"CLOSE"===o)i={buttonID:r,navigationType:o,destinationScreenID:null,score:0,rationale:""};else if("INTERNAL_NODE"===o&&("NAVIGATE"===s||"OVERLAY"===s)&&a.transitionNodeID){let e=U(a.transitionNodeID);if(!e)return null;i={buttonID:r,navigationType:({NAVIGATE:"NAVIGATE",OVERLAY:"OPEN_POPUP"})[s],destinationScreenID:e,score:10,rationale:"existing interaction"}}return i}(n,e.id);if(!o)return[];let s=r?r.get(o.buttonID):o.buttonID;if(!s)return[];if(n.id&&(i=U(n.id)),!o.destinationScreenID)return i&&a.push(i),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:null,score:10,rationale:""}];{let e=r?r.get(o.destinationScreenID):o.destinationScreenID;return e?(i&&a.push(i),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:e,score:10,rationale:"existing interaction"}]):[]}});return{interactionMappings:null!=i?i:[],interactionIds:a}}function G(e){let r=e.children.map(e=>(function e(r){var n;let{parentNode:a}=r,i=function(e,r){if(null==e)return{};var n,a,i=function(e,r){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,["parentNode"]);return i.children=null===(n=r.children)||void 0===n?void 0:n.map(e),i})(e));r.forEach(e=>{f(e,e=>{if(e.children)for(let r of e.children)r.parentNode=e})});let n=p(u({},e),{children:r});return n.children.forEach(e=>{e.parentNode=n}),n}function V(e,r){let n=null!=e?e:0,a=null!=r?r:0;return 0===n?0:0===a?null:n/a}},6406:(e,r,n)=>{n.d(r,{__:()=>p}),n(354427);n(947239),n(876747);var a=n(202832),i=n(524818),o=n(921011);function s(...e){return(0,a.QP)(e.join(" "))}function l({type:e,props:r,children:n}){let a=[],{description:i,w:l,aspect:c,className:d,sharedPluginData:u}=r,p=36;if("string"==typeof l){let e=(0,o.qM)("w",l);e&&a.push(e),l in o.tr&&(p=o.tr[l])}else"number"==typeof l&&(p=l,a.push((0,o.vE)("w",l)));return"video"===c?a.push((0,o.vE)("h",9*p/16)):a.push((0,o.vE)("h",p)),{type:e,props:{name:i??"Image description",sharedPluginData:{...u??{},isImage:"true",description:i},className:s("flex p-2 bg-[#eee]",...a,d??"")},children:n??[]}}function c({type:e,props:r,children:n}){let{name:a,className:i}=r,l="string"==typeof i?i:"",c={className:s(o.Wo,(0,o.xe)(l),l)};return a&&"string"==typeof a&&(c.name=a),{type:e,props:c,children:n}}function d({type:e,props:r}){let{className:n,msg:a}=r;return{type:e,props:{className:s("flex justify-center items-center",("string"==typeof n?n:"")??"","border bg-red-100 border-red-100")},children:[{type:"Text",props:{},children:[a]}]}}i.Xo,i.Ls,i.W7,i.jJ,i.wv,i._A,i.Fj,i.O5,n(593758);var u=n(768618);function p({rootNodes:{includeSelection:e,dsKitKey:r,pageChildrenName:n,useAllPages:a}={}}){let i=[],o=(0,u.UN)();if(r?.type==="1P_LIBRARY"||r?.type==="USER_LIBRARY"){let e=o.getInternalCanvas();e&&i.push(e)}if(a){let e=o.getInternalCanvas();o.getRoot().childrenNodes.forEach(r=>{"CANVAS"===r.type&&r.guid!==e?.guid&&i.push(r)})}else{let e=o.getCurrentPage(),n=r?.type==="LOCAL"&&r.pageId?o.get(r.pageId):e;n&&i.push(n)}if(0===i.length||i.some(e=>!e||"CANVAS"!==e.type))return[];let s=[];for(let r of i)if(r){if(e&&s.push(...r.directlySelectedNodes),n)for(let e of r.reversedChildrenNodes){var l,c;l=e.name,c=n,(l=l.replace(/[^0-9a-z]/gi,"").toLowerCase())===(c=c.replace(/[^0-9a-z]/gi,"").toLowerCase())&&s.push(e)}else s.push(r)}return s}n(818222),n(858321);var m=n(189067);m.z.object({runtimeDuration:m.z.number(),firstByteReceivedAtOffset:m.z.number(),jsxStreamDuration:m.z.number(),numComponents:m.z.number(),componentLookupSuccesses:m.z.number(),primitiveComponents:m.z.number(),componentLookupFailures:m.z.number(),numImages:m.z.number(),imageFailures:m.z.number(),imageSuccesses:m.z.number(),imageBlocked:m.z.number(),firstImageLoadedAtOffset:m.z.number(),lastStreamByteReceivedAtOffset:m.z.number(),imageDurations:m.z.array(m.z.object({start:m.z.number(),end:m.z.number(),duration:m.z.number(),status:m.z.enum(["success","failure","blocked"])}))})},834177:(e,r,n)=>{var a;n.d(r,{hD:()=>a,zM:()=>i}),function(e){e.VIEW_TOOL="view_tool",e.EDIT_TOOL="edit_tool",e.MULTI_EDIT_TOOL="multi_edit_tool",e.STR_REPLACE_EDITOR="str_replace_editor",e.FAST_APPLY_TOOL="fast_apply_tool",e.WRITE_TOOL="write_tool",e.SUPABASE_CONNECT="supabase_connect",e.CREATE_SUPABASE_SECRET="create_supabase_secret",e.UNSPLASH_TOOL="unsplash_tool",e.DIFF_TOOL="diffTool",e.REWRITE_TOOL="rewriteTool",e.ZERO_TO_ONE_TOOL="zeroToOneTool",e.DOCS_TOOL="docsTool",e.DEPRECATED_TOOL="deprecatedTool"}(a||(a={}));let i="imports"},909678:(e,r,n)=>{n.d(r,{zM:()=>i.zM,OX:()=>a.OX});var a=n(113867);n(186606),n(320953);var i=n(834177)},113867:(e,r,n)=>{n.d(r,{OX:()=>o});var a=n(186606);n(265813);class i{clearCodeSnapshotsFromMessages(e){return e.map(e=>{if(e.type===a.K$p.ASSISTANT_MESSAGE){let r=function(e){try{return JSON.parse(e)}catch(e){return{plainText:""}}}(e.textContent);return r.codeSnapshot=void 0,{...e,textContent:JSON.stringify(r)}}return e})}}new i;let o=()=>{new i}},265813:(e,r,n)=>{n.d(r,{EK:()=>q,b0:()=>P});var a=n(189067),i=n(734341),o=n(304081);let s=a.z.object({plainText:a.z.string(),code:a.z.string().optional(),codeFilePath:a.z.string().optional(),hidden:a.z.boolean().optional().describe("Used to hide automatic error handling messages, which are obfuscated from the user."),modelConfigVersion:a.z.string().optional().describe("Identifies the model config version used in the exchange this message belongs to.")}),l=a.z.object({codeFileGuid:a.z.string(),fullFilePath:a.z.string(),code:a.z.string()}),c=a.z.object({hubFileId:a.z.string(),hubFileName:a.z.string(),creatorName:a.z.string()}),d=a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("node"),guid:a.z.string(),code:a.z.string().describe("Design2React output").optional(),codeFiles:a.z.array(l).optional(),communityAttribution:c.optional(),image:a.z.string().describe("Image data URI").optional()}),a.z.object({type:a.z.literal("image"),guid:a.z.string(),image:a.z.string().describe("Image data URI").optional(),imageHash:a.z.string().describe("Hash of the image").optional()})]),u=a.z.object({filePath:a.z.string(),snippetStartLine:a.z.number().describe("A 1-indexed line number for the start of the snippet"),tagLine:a.z.number().describe("The line that the selected element / tag is on. Also 1-indexed"),snippet:a.z.string(),tagName:a.z.string(),fileImports:a.z.string().optional(),componentHeader:a.z.string().optional()}),p=s.merge(a.z.object({files:a.z.record(a.z.string(),a.z.string()).optional(),imports:d.array().optional(),libraryKey:a.z.string().optional(),inspectedElement:u.optional(),errors:a.z.array(a.z.string()).optional(),requestUuid:a.z.string().optional(),retryType:a.z.enum(["unclosed_tags_benign","mid_stream_request_exceeds_context_limit"]).optional()})),m=a.z.object({role:a.z.literal("user"),content:a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("content")}).merge(p)]),nodeThumbnailBase64:a.z.string().optional()}),_=a.z.enum(["plan","work","summary","message","code"]),h=a.z.object({codeSnapshotKey:a.z.string(),fileVersionId:a.z.string().optional()}),g=a.z.object({id:a.z.string().optional(),oldString:a.z.string().optional(),newString:a.z.string().optional(),done:a.z.boolean().optional(),error:a.z.string().optional()}),f=s.merge(a.z.object({mode:_.optional(),reasoning:a.z.array(a.z.union([a.z.object({text:a.z.string(),signature:a.z.string().optional()}),a.z.object({data:a.z.string()})])).optional(),signedReasoning:a.z.object({text:a.z.string(),signature:a.z.string().optional()}).optional(),redactedReasoning:a.z.string().optional(),codeSnapshot:h.optional(),title:a.z.string().optional(),edits:a.z.record(a.z.string(),g).optional()})),E=a.z.object({type:a.z.literal("toolCall"),toolCallId:a.z.string(),toolName:a.z.string(),partialArgs:a.z.record(a.z.string(),a.z.any())}),y=a.z.object({type:a.z.literal("toolCallStart"),toolCallId:a.z.string(),toolName:a.z.string()}),b=a.z.object({type:a.z.literal("toolCallDelta"),toolCallId:a.z.string(),toolName:a.z.string(),argsTextDelta:a.z.string()}),v=a.z.object({type:a.z.literal("toolCalls"),toolCalls:a.z.array(E)}),T=a.z.object({role:a.z.literal("assistant"),content:a.z.union([a.z.object({type:a.z.literal("content")}).merge(f),v]),toolCalls:a.z.array(E).optional()}),I=a.z.object({toolCallId:a.z.string(),toolName:a.z.string(),result:a.z.any()}),S=a.z.object({role:a.z.literal("toolResults"),content:I.array()}),A=a.z.object({role:a.z.literal("tool")}).merge(I),w=a.z.object({path:a.z.string(),addedLines:a.z.number(),removedLines:a.z.number()}),C=a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("restore"),restoredTo:a.z.string().optional(),codeSnapshot:h.optional(),title:a.z.string().optional()}).merge(s),a.z.object({type:a.z.literal("manual_edit"),changedFiles:a.z.array(w),codeSnapshot:h.optional(),title:a.z.string().optional()}).merge(s),a.z.object({type:a.z.literal("duplicated_file"),plainText:a.z.string(),fileKeyHash:a.z.string()}).merge(s)]),N=a.z.object({role:a.z.literal("system"),content:C.optional()}),L=a.z.discriminatedUnion("role",[T,m,S,A,N]),O=a.z.object({totalSummarized:a.z.number(),summary:a.z.string()}),R=a.z.object({force:a.z.boolean().optional()}).merge(O),P=a.z.object({chats:L.array(),files:a.z.record(a.z.string(),a.z.string()),chatCompression:R.optional(),systemPromptOverride:a.z.string().optional(),supabase:a.z.object({projectId:a.z.string().optional(),publicAnonKey:a.z.string().optional(),makeNamespace:a.z.string().optional(),isConnectedNonOwner:a.z.boolean().optional(),secrets:a.z.array(a.z.string()).optional()}).optional(),supabaseEnabled:a.z.boolean().optional(),rawUserChatDetails:o.B.optional(),model:a.z.enum([i.H.CLAUDE_3_7_SONNET,i.H.CLAUDE_4_SONNET]).optional(),entrypointFilePath:a.z.string().optional(),multiFileCodeLayersEnabled:a.z.boolean().optional()});P.extend({configKey:a.z.string()});var D=n(406872);let k=a.z.object({type:a.z.literal("chat-compression")}).merge(O),M=a.z.object({type:a.z.literal("toolResult")}).merge(I),F=a.z.object({type:a.z.literal("message"),message:a.z.string()}),x=a.z.object({type:a.z.literal("plan"),message:a.z.string(),title:a.z.string().optional()}),U=a.z.object({type:a.z.literal("work"),message:a.z.string()}),B=a.z.object({type:a.z.literal("summary"),message:a.z.string()});a.z.discriminatedUnion("type",[F,x,U,B]);let G=a.z.object({type:a.z.literal("reasoning"),reasoning:a.z.string()}),V=a.z.object({type:a.z.literal("reasoning-signature"),signature:a.z.string()}),H=a.z.object({type:a.z.literal("redacted-reasoning"),data:a.z.string()});a.z.discriminatedUnion("type",[G,V,H]);let z=a.z.discriminatedUnion("type",[a.z.object({type:a.z.literal("rewrite")}),a.z.object({type:a.z.literal("edit")})]),K=a.z.object({type:a.z.literal("code"),code:a.z.string(),file:a.z.string(),reset:a.z.boolean().optional(),editType:z.optional(),excludeFromMessageHistory:a.z.boolean().optional()}),W=a.z.object({type:a.z.literal("codeDiffVisualizationDelta"),id:a.z.string(),old_str:a.z.string(),new_str:a.z.string(),path:a.z.string()}),j=a.z.object({type:a.z.literal("codeDiffVisualizationDone"),id:a.z.string()});a.z.discriminatedUnion("type",[W,j]);let Y=a.z.object({type:a.z.literal("editedFiles"),files:a.z.array(a.z.string())}),$=a.z.union([y,b,D._W,M,F,G,V,H,a.z.object({type:a.z.literal("heartbeat")})]),q=a.z.union([$,x,U,B,K,W,j,k,Y,a.z.object({type:a.z.literal("requestUuid"),requestId:a.z.string()}),a.z.object({type:a.z.literal("modelConfigVersion"),version:a.z.string()})]);a.z.object({files:a.z.record(a.z.string(),a.z.string())})},81538:(e,r,n)=>{n.d(r,{$7:()=>u,Ao:()=>g,CN:()=>d,Rf:()=>c,Sy:()=>a,Wz:()=>m,wR:()=>p,yq:()=>h});var a,i=n(186606),o=n(320953),s=n(195124);n(768618);var l=n(351626);function c(e,r){return e&&e.isAlive&&e.visible?"TEXT"===e.type&&e.visible?{textNodes:[{node:e,isLockedInCanvas:r||e.locked}],imageNodes:[]}:e.childrenNodes.reduce((e,n)=>{if(!n.isAlive)return e;if("TEXT"===n.type&&n.visible){let a={node:n,isLockedInCanvas:r||n.locked};e.textNodes.push(a)}else if((0,l.R)(n)){let a={node:n,isLockedInCanvas:r||n.locked};e.imageNodes.push(a)}else if(n.childrenNodes&&n.visible){let a=c(n,r||n.locked);e.textNodes.push(...a.textNodes),e.imageNodes.push(...a.imageNodes)}return e},{textNodes:[],imageNodes:[]}):{textNodes:[],imageNodes:[]}}function d(e){if(0===e.length)return{numTextLayers:0,totalNumCharacters:0};let r=0,n=0,a=new Set(e.map(e=>e.guid));for(let i of e)(0,s.hV)(i,e=>{if(e.guid!==i.guid&&a.has(e.guid))return"stop";"TEXT"===e.type&&(r++,n+=e.textContent.length)});return{numTextLayers:r,totalNumCharacters:n}}function u(e,r,n){let a;if(!e)return{status:2,commitId:void 0};let s=!1,l=!0,c=e.textNodes,d=Object.values(r);return(o.l7.ai("content-fill",()=>{c.filter((e,r)=>!n.has(r)).forEach((e,r)=>{if(e.isLockedInCanvas)return;let n=d[r];if(!n)return;let o=i.biQ.setTextContentOnTextNode(e.node.guid,n);if(o){if(!i.glU)throw Error("Fullscreen is not available");i.glU.requestNextCommitMergeWithPrevious(i.zvt.CONTENT_FILL_INSERT_AND_GENERATE),a=i.glU.commit()}else!1===o&&(s=!0);l=l&&!o})}),s)?{status:1,commitId:a}:l?{status:3,commitId:a}:{status:0,commitId:a}}function p(e){return function(e){if(0===e.length)return[];let r=[];for(let n=0;n<e[0].length;n++)r.push({textNodes:[],imageNodes:[]});return e.forEach(e=>{e.forEach((e,n)=>{r[n].textNodes.push(...e.textNodes)})}),r}(e.map(e=>{let r=[];return e.childrenNodes.forEach(n=>{r.push(c(n,n.locked||e.locked))}),r}))}function m(e,r){return 0===e.length?0:r?e[0].childrenNodes.filter(e=>("INSTANCE"===e.type||"FRAME"===e.type||"TEXT"===e.type)&&"AUTO"===e.stackPositioning).length:e.length}function _(e){if("TEXT"!==e.type)return!1;let r=e.textContent.trim();return 0!==r.length&&(r.length>1||![33,34,35,37,38,39,40,41,42,43,44,45,46,47,58,59,60,61,62,63,64,91,93,94,95,95,96,123,124,125,126,183,903,8213,8226,8231,8901,8967,9087,9144,9145,9472,9473,9474,9475,9479,9482,9550,9551,9552,9553,9588,9590,9592,9593,9594,9597,9599,12539,65074,65097,65098,65099,65100,65101,65102,65103,65372].includes(r.charCodeAt(0)))}function h(e){if(0===e.length)return null;let r=e[0],n="TEXT_LAYER_",a=new Set;return r.textNodes.forEach((e,r)=>{_(e.node)||a.add(r)}),{fieldsToUserInstructions:r.textNodes.filter(e=>_(e.node)).map((e,r)=>({defId:e.node.guid,fieldName:`${n}${r}`,instructions:""})),fieldsToValues:e.map(e=>({fields:e.textNodes.filter(e=>_(e.node)).map((e,r)=>({defId:e.node.guid,fieldName:`${n}${r}`,value:e.node.textContent}))})),nodesToSkip:a}}function g(e){for(let r of e)for(let e of r.textNodes)if(i.biQ.nodeHasMissingFonts(e.node.guid))return!0;return!1}n(130198),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.MISSING_FONT=1]="MISSING_FONT",e[e.EMPTY_NODE=2]="EMPTY_NODE",e[e.FAILED=3]="FAILED"}(a||(a={}))},92454:(e,r,n)=>{var a;function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{G1:()=>o}),function(e){e.UNCLOSED_TAGS_BENIGN="unclosed_tags_benign",e.MID_STREAM_REQUEST_EXCEEDS_CONTEXT_LIMIT="mid_stream_request_exceeds_context_limit"}(a||(a={}));class o extends Error{constructor(e,r,n,a,o){super(n??function(e){let r=e.message;return"string"==typeof r?r:void 0}(r)??`CortexError of type ${e}`),i(this,"type",void 0),i(this,"data",void 0),i(this,"trace",void 0),i(this,"metadata",void 0),i(this,"sentryTags",void 0),null!=a&&(this.stack=a),void 0!==o&&(this.trace=o),this.type=e,this.data=r}}},158239:(e,r,n)=>{n.r(r),n.d(r,{CLIPTextImageEmbeddingsAPIError:()=>o.dW,CLIPTextImageEmbeddingsInvalidSchemaError:()=>o.jr,ClientContentLengthLimitExceededError:()=>o.j0,ClientNoTextSelectedError:()=>o.b6,ContentFillIncorrectNumberOfResultsError:()=>o.Es,ContentFillParsingError:()=>o.Dr,CortexClientError:()=>o.jG,CortexErrorV2:()=>a.G,CortexFetchError:()=>o.oS,CortexProviderAPIError:()=>o.HW,CortexProviderSDKError:()=>o.HA,CortexRateLimitExceededError:()=>o.qD,CortexServerError:()=>o.XA,CortexSetupError:()=>o.BA,CortexTaskError:()=>o.R6,FigjamClusterToolNotCalledError:()=>o.dJ,FigjamTemplateParsingError:()=>o.dr,FigjamVisualParsingError:()=>o.b3,GeneratePromptNoKitKeyOrIsLocalError:()=>o.gU,GeneratePromptNoTemplateError:()=>o.Bq,ImageCreationError:()=>o.Bv,ImageRequestError:()=>o.Nv,InvalidCoreFunctionArgumentError:()=>o.oW,InvalidDataContentError:()=>o.tm,InvalidImageSizeError:()=>o.AY,InvalidModelError:()=>o.DT,InvalidPromptArgumentError:()=>o.x0,InvalidProviderError:()=>o.d8,MeterExceededError:()=>o.NZ,NoFallbackError:()=>o.Gx,NotImplementedError:()=>o.EH,OfflineError:()=>o.M_,OutOfDateFeatureVersionError:()=>o.CV,PayloadTooLargeError:()=>o.O3,ProviderContentLengthLimitExceededError:()=>o.FA,ProviderEmptyResponseError:()=>o.cD,ProviderInvalidResponseDataError:()=>o.ES,ProviderInvalidToolArgumentsError:()=>o.ns,ProviderNoContentGeneratedError:()=>o.de,ProviderNoObjectGeneratedError:()=>o.$F,ProviderNoSuchToolError:()=>o.UR,ProviderOverloadedError:()=>o.BR,ProviderParseResponseError:()=>o.o6,ProviderRateLimitExceededError:()=>o.Mm,ProviderResponseClientError:()=>o.U,ProviderResponseServerError:()=>o.Ay,ProviderServiceBusyError:()=>o.u8,ProviderServiceIssueError:()=>o.c5,ProviderSetupError:()=>o.br,ProviderTimedOutError:()=>o.Tn,ProviderUnhealthyError:()=>o.QK,ProviderUnsafeOrHarmfulContentError:()=>o.v9,StreamingJSONParseError:()=>o.mP,TimedOutError:()=>o.On,TooManyEmbeddingValuesForCallError:()=>o.Ch,UnauthorizedError:()=>o.D_,UnsafeOrHarmfulPromptError:()=>o.bt,UnsupportedFunctionalityError:()=>o.b8,deserializeCortexErrorV2:()=>i.j,isSerializedCortexErrorV2:()=>i.G});var a=n(794070),i=n(219497),o=n(546187)},391277:(e,r,n)=>{n.d(r,{H:()=>m,KU:()=>D,L6:()=>R,Qp:()=>M,TM:()=>C,XM:()=>L,bv:()=>l,jR:()=>s,k8:()=>k,pp:()=>A,r6:()=>S,tl:()=>v});var a=n(189067),i=n(314451);a.z.object({prompt_data:a.z.string(),negative_prompt_data:a.z.string().default("blurry, bad"),cfg_scale:a.z.number().default(10),seed:a.z.number().default(20),steps:a.z.number().default(50),style_preset:a.z.string().default("photographic"),height:a.z.number().default(512),width:a.z.number().default(512),additionalPrefix:a.z.string().optional().default("")}),a.z.object({image:a.z.string(),metadata:a.z.object({height:a.z.number(),width:a.z.number()})}),a.z.object({componentQueries:a.z.array(a.z.string())});let o=a.z.union([a.z.object({role:a.z.union([a.z.literal("assistant"),a.z.literal("system")]),content:a.z.string()}),a.z.object({role:a.z.literal("user"),content:a.z.union([a.z.string(),a.z.array(a.z.union([a.z.object({type:a.z.literal("text"),text:a.z.string()}),a.z.object({type:a.z.literal("image"),image:a.z.string()})]))])})]),s=a.z.object({userPrompt:a.z.string(),kitKey:a.z.string().nullable().optional(),isLocal:a.z.boolean().nullable().optional(),isDirectGenerationCompatible:a.z.boolean().nullable().optional(),extraMessagesFigmateOnly:a.z.array(o).optional(),componentQueries:a.z.array(a.z.string()).optional()});a.z.string(),a.z.object({recommendedKitKey:a.z.string()});let l=a.z.object({presets:a.z.array(a.z.string()).optional(),theme:a.z.record(a.z.any()).optional(),jsx:a.z.string().optional(),dsKit:a.z.object({kitKey:a.z.string(),isLocal:a.z.boolean(),isDirectGenLibrary:a.z.boolean()}).optional(),trace:i.B.optional()});a.z.object({userPrompt:a.z.string()}),a.z.object({content:a.z.string()});let c=a.z.object({version:a.z.literal(2),darkMode:a.z.boolean(),fontFamilies:a.z.object({title:a.z.array(a.z.string()),body:a.z.array(a.z.string()),label:a.z.array(a.z.string())}),brandColor:a.z.string(),colors:a.z.object({text:a.z.string().array(),background:a.z.string().array(),border:a.z.string().array()}),borderRadii:a.z.array(a.z.number()),spacing:a.z.array(a.z.number())});c.omit({version:!0}).keyof();let d=a.z.object({fontFamilies:a.z.array(a.z.string()),colors:a.z.array(a.z.string()),borderRadii:a.z.array(a.z.number()),spacing:a.z.array(a.z.number())}),u=a.z.union([c,d]),p=a.z.object({prompt:a.z.string()}),m=a.z.object({userPrompt:a.z.string(),promptHistory:a.z.array(p).optional(),storedInitialPrompt:a.z.string(),jsx:a.z.string(),jsxInsertReplace:a.z.string().optional(),currentTheme:u,kitKey:a.z.string(),isLocal:a.z.boolean()}),_=a.z.object({type:a.z.literal("text_or_image"),affectedId:a.z.string(),content:a.z.string()}),h=a.z.enum(["font","layout","component","other"]),g=a.z.object({type:a.z.literal("theme"),content:c.partial()}),f=a.z.object({type:a.z.literal("iCantDoThis"),rationaleCategory:h.optional()}),E=[a.z.object({type:a.z.literal("remove"),affectedId:a.z.string()}),a.z.object({type:a.z.literal("move"),affectedId:a.z.string(),insertBehavior:a.z.enum(["above","below"]),destinationId:a.z.string()}),a.z.object({type:a.z.literal("replaceClasses"),affectedId:a.z.string(),classes:a.z.string().array()})],y=[a.z.object({type:a.z.literal("insert"),affectedId:a.z.string(),insertBehavior:a.z.enum(["above","below"]),jsxToInsert:a.z.string()}),a.z.object({type:a.z.literal("replace"),affectedId:a.z.string(),jsxToInsert:a.z.string()})],b=a.z.discriminatedUnion("type",[_,...E,...y,g,f]),v=a.z.object({action:b.optional(),cortex_error:a.z.object({type:a.z.string(),data:a.z.any()}).optional(),trace:i.B.optional()}),T=a.z.object({key:a.z.string(),name:a.z.string(),is_local:a.z.boolean(),description:a.z.string()});a.z.object({meta:a.z.object({kits:a.z.array(T)}),error:a.z.boolean().optional(),message:a.z.string().optional()});let I=a.z.enum(["normal","transparent","segment"]),S=a.z.object({imageB64:a.z.string()}),A=a.z.object({conflictScore:a.z.number(),reasoning:a.z.string()}),w=a.z.object({imageB64:a.z.string(),jsx:a.z.string()}),C=a.z.object({requests:a.z.array(w)}),N=a.z.object({isMobileDesign:a.z.boolean(),components:a.z.array(a.z.object({guid:a.z.string(),name:a.z.string()}))}),L=a.z.object({responses:a.z.array(N.nullable())}),O=a.z.object({imageB64:a.z.string(),jsx:a.z.string(),isStateGroup:a.z.boolean()}),R=a.z.object({requests:a.z.array(O)}),P=a.z.object({componentName:a.z.string(),componentDescription:a.z.string(),nodeIdsToPropertyNames:a.z.array(a.z.object({id:a.z.string(),propertyName:a.z.string()}))}),D=a.z.object({responses:a.z.array(P.nullable())}),k=a.z.object({id:a.z.string().optional(),initialUserPrompt:a.z.string().optional(),jsxJSON:a.z.string().optional(),prompt:a.z.string().optional(),desc:a.z.string().optional(),transparent:a.z.boolean().optional(),background:I.optional(),height:a.z.number(),width:a.z.number(),description:a.z.string().optional()}),M=a.z.object({image:a.z.string(),foregroundImage:a.z.string().optional(),description:a.z.string(),trace:i.B.optional()})},426085:(e,r,n)=>{n.d(r,{aC:()=>u,e3:()=>d});var a,i,o=n(189067);!function(e){e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded"}(a||(a={})),function(e){e.DESIGN="design",e.SLIDES="slides",e.FIGJAM="figjam"}(i||(i={}));let s=o.z.object({id:o.z.string(),text:o.z.string()}).array(),l=o.z.object({tone:o.z.nativeEnum(a),weight:o.z.number()}).array(),c=o.z.enum(["design","slides","figjam"]),d=o.z.union([o.z.object({text:o.z.string(),tones:l,productType:c.optional()}),o.z.object({texts:s,tones:l,productType:c.optional()})]),u=o.z.object({id:o.z.string().optional(),delta:o.z.string()})},430385:(e,r,n)=>{n.d(r,{AM:()=>m,Af:()=>L,Bq:()=>function e(r,n=[]){for(let a=0;a<r.length;a++){let i=r[a];Array.isArray(i)?e(i,n):n.push(i)}return n},Ef:()=>u,GK:()=>E,Jk:()=>c,KQ:()=>g,Kg:()=>l,LN:()=>b,M0:()=>I,N9:()=>s,RP:()=>N,TR:()=>C,Ul:()=>v,Vs:()=>w,WI:()=>T,_j:()=>o,g6:()=>O,hR:()=>_,k4:()=>p,lX:()=>R,lq:()=>S,lu:()=>d,my:()=>y,qg:()=>A,v7:()=>f});var a=n(871043),i=n(376852);function o(e){return Array.isArray(e)?e:[e]}function s(e,r){-1===e.indexOf(r)&&e.push(r)}function l(e,r){-1===e.indexOf(r)&&e.unshift(r)}function c(e,r){let n=e.indexOf(r);-1!==n&&e.splice(n,1)}function d(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function u(e){for(let r=1;r<e.length;r++)if(void 0===e[r]||e[r]!==e[r-1])return!1;return!0}function p(e,r){let n,a,i=e.length;for(;0!==i;)a=Math.floor((r?function(e=Date.now()){return(9301*e+49297)%233280/233280}(r):Math.random())*i),i-=1,n=e[i],e[i]=e[a],e[a]=n;return e}function m(e,r,n=!1){return _(e,e=>e[r],n)}function _(e,r,n=!1,a,i=!1){e.sort((e,o)=>{if(r(e)===r(o)&&a){let r=i?-1:1;return a(e)<a(o)?-r:r}let s=n?-1:1;return r(e)<r(o)?-s:s})}let h=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function g(e,r,n={}){f(e,e=>e[r],n)}function f(e,r,n={},a){let i=e=>{let n=r(e);return n&&n.toLowerCase?n.toLowerCase():""},o=e=>{if(!a)return"";let r=a(e);return r&&r.toLowerCase?r.toLowerCase():""},s=n.isDescending?-1:1;n.useExpensiveNaturalComparison?e.sort((e,r)=>h.compare(i(e),i(r))*s):e.sort((e,r)=>{if(i(e)===i(r)&&a){let a=n.isSecondaryDescending?-1:1;return o(e)<o(r)?-a:a}return i(e)<i(r)?-s:s})}function E(e,r,n=!1){return e.sort((e,a)=>{let i=new Date(r(e)).getTime()<new Date(r(a)).getTime()?1:-1;return n?-i:i})}function y(e,r,n=!1){return E(e,e=>e[r],n)}function b(e){return E(e,e=>e.created_at)}function v(e,...r){return e.sort((e,n)=>{for(let a of r){let r=a(e,n);if(0!==r)return r}return 0})}function T(e){return e.filter(a.Vq)}function I(e,r,n=a.Vq){for(let a=r+1;a<e.length;a++){let r=e[a];if(n(r,a))return r}}function S(e,r,n=a.Vq){for(let a=r-1;a>=0;a--){let r=e[a];if(n(r,a))return r}}function A(e,r,n="left",o=a.Vq){r=(0,i.qE)(r,0,e.length-1);for(let a=0;r-a>=0||r+a<e.length;a++){let[i,s]="left"===n?[r-a,r+a]:[r+a,r-a];if(i>=0&&i<e.length){let r=e[i];if(o(r,i))return r}if(s>=0&&s<e.length){let r=e[s];if(o(r,s))return r}}}function w(e){let r=[...e],n=(0,a.sR)(r.pop(),"input must be non-empty");return[r,n]}function C(e,r,n=String){let a={};r.forEach((e,r)=>{a[n(e)]=r});let i=0,o=0,s=[];for(;;){let l=e[i],c=r[o];if(void 0===l||void 0===c){if(void 0===l&&void 0===c)return s;void 0!==l&&void 0===c?(s.push({hasBoth:!1,left:l,right:void 0}),i++):void 0===l&&void 0!==c&&(s.push({hasBoth:!1,left:void 0,right:c}),o++)}else{let e=a[n(l)];void 0===e||e<o?(s.push({hasBoth:!1,left:l,right:void 0}),i++):(e===o?(s.push({hasBoth:!0,left:l,right:c}),i++):s.push({hasBoth:!1,left:void 0,right:c}),o++)}}}function N(e,r){let n=[];for(let a of e){let e=r(a);null!=e&&n.push(e)}return n}function L(e,r){for(let n of e){let e=r(n);if(null!=e)return e}}function O(e,r){return e.includes(r)?e.filter(e=>e!==r):e.concat(r)}async function R(e,r){let n=e.map(r);return await Promise.all(n)}},376852:(e,r,n)=>{function a(e,r,n){return Math.min(Math.max(e,r),n)}function i(e,r,n){return e=null==r?e:Math.max(e,r),null==n?e:Math.min(e,n)}function o(e,r){if(e===r)return e;if(e>r)throw Error("random: start must be larger than end");return Math.random()*(r-e+1)+e}function s(e,r,n){let a=null!=r,i=a?r:e,o=a?e:0;n=null==n?Math.sign(i-o):n;let{result:s}=Array.from({length:Math.abs((i-o)/(n||1))}).reduce(({result:e,current:r})=>({result:[...e,r],current:r+n}),{current:o,result:[]});return s}function l(e,r){let n=[];for(let a=0;a<e;++a)n.push(r(a));return n}function c(e,r,n=1e-6){return Math.abs(e-r)<n}function d(e,r){return(e%r+r)%r}function u(e,r){return Math.round(e/r)*r}function p(e,r,n,a){let i;if(1e-8>Math.abs(e)){if(e=r,r=n,n=a,1e-8>Math.abs(e))return(e=r,r=n,1e-8>Math.abs(e))?[]:[-r/e];let i=r*r-4*e*n;return 1e-8>Math.abs(i)?[-r/(2*e)]:i>0?[(-r+Math.sqrt(i))/(2*e),(-r-Math.sqrt(i))/(2*e)]:[]}let o=(3*e*n-r*r)/(3*e*e),s=(2*r*r*r-9*e*r*n+27*e*e*a)/(27*e*e*e);if(1e-8>Math.abs(o))i=[Math.cbrt(-s)];else if(1e-8>Math.abs(s))i=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{let e=s*s/4+o*o*o/27;if(1e-8>Math.abs(e))i=[-1.5*s/o,3*s/o];else if(e>0){let r=Math.cbrt(-s/2-Math.sqrt(e));i=[r-o/(3*r)]}else{let e=2*Math.sqrt(-o/3),r=Math.acos(3*s/o/e)/3,n=2*Math.PI/3;i=[e*Math.cos(r),e*Math.cos(r-n),e*Math.cos(r-2*n)]}}for(let n=0;n<i.length;n++)i[n]-=r/(3*e);return i}n.d(r,{Ae:()=>p,KY:()=>i,M9:()=>l,YE:()=>u,_g:()=>d,qE:()=>a,xN:()=>c,y1:()=>s,yT:()=>o})},871043:(e,r,n)=>{function a(e){return null==e}function i(e){return!a(e)}function o(e,r){if(a(e))throw Error(r??"Expected value not to be nullish");return e}n.d(r,{Vq:()=>i,sR:()=>o,uy:()=>a})},328813:(e,r,n)=>{function a(e){for(let r in e)return!1;return!0}function i(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,a]of Object.entries(r))null!=a&&(n[e]=a);return n}function s(e,r){let n={};for(let[a,i]of Object.entries(e).sort(r))n[a]=i;return n}n.d(r,{Dy:()=>function e(r,n,a){for(let i in r){let o=""===a?i:a+"."+i;Array.isArray(r[i])?n[o]=JSON.stringify(r[i]):"object"==typeof r[i]&&null!==r[i]?e(r[i],n,o):n[o]=r[i]}},Im:()=>a,b$:()=>o,mf:()=>s,o:()=>i})},431160:(e,r,n)=>{function a(e){return new Promise(r=>{let n=Array(e.length),a=e.length,i=()=>{0===a&&r(n)};for(let r=0;r<e.length;r++)e[r].then(e=>{n[r]={type:"resolve",resolve:e,reject:void 0},a--,i()},e=>{n[r]={type:"reject",resolve:void 0,reject:e},a--,i()});i()})}function i(e,r){return new Promise(n=>{let a=0,i=e.length,o=()=>{0===i&&n(s)},s=Array(e.length),l=r=>{let n=e[r];return void 0!==n&&(n().then(e=>{s[r]={type:"resolve",resolve:e,reject:void 0},i--,c(),o()},e=>{s[r]={type:"reject",resolve:void 0,reject:e},i--,c(),o()}),!0)},c=()=>{let e=l(a);return a++,e};for(let e=0;e<r&&c();e++);o()})}function o(e){let r=null;return()=>(null===r&&(r=e()).catch(()=>r=null),r)}n.d(r,{Ed:()=>i,Kt:()=>o,_7:()=>a})},402923:(e,r,n)=>{function a(e){return"object"==typeof e&&null!==e}function i(e){return"number"==typeof e}n.d(r,{Et:()=>i,UU:()=>a})},336690:(e,r,n)=>{n.d(r,{_p:()=>u,q5:()=>m});var a=n(660376),i=n(376852),o=n(186606),s=n(320953),l=n(768618),c=n(476583);async function d(e,r,n,a){let i=s.l7.testSetup("sites-compare-layout",()=>{let n=function e(r){return"INSTANCE"===r.type&&(r=(0,l.UN)().get(r.detachInstance())),r.childrenNodes?.map(e),r}((0,c.X)(e)),a=r.width,i=n.stackVerticalLayoutSize===o.mKm.HUG_CONTENT?n.size.y:r.height;return(n.size.x!==a||n.size.y!==i)&&n.resizeWithConstraints(a,i),n});try{return await n(i)}finally{s.l7.testSetup("sites-compare-layout",()=>{a?.keepClone?i.name=`cloned: ${i.name}`:i?.removeSelfAndChildren()})}}async function u(e,r,n,o={}){let c;await document.fonts.ready;let m=e?(0,l.UN)().get(e.id):void 0;if(!m)throw Error("node not found");o={...o,debugOutlines:!0};let _=n.width;if((0,a.KF)(void 0!==_,"Expect site preview window size to be defined"),m.isResponsiveSet){let e=m.childrenNodes.sort((e,r)=>e.size.x-r.size.x),r=e[0].size.x;for(let n of(m=e[0],e)){let e=n.size.x;e<=_&&e>r&&(r=e,m=n)}}if(!m)throw Error("node not found");return await d(m,r.rect,e=>{s.l7.testSetup("sites-compare-layout",()=>{c=[...function(e,r){let n=h(e),a=[];return f((e,r)=>{if(!e||!r)return;let{node:n}=e;"TEXT"===n.type&&("HEIGHT"===n.textAutoResize?((0,i.xN)(e.rect.height,r.rect.height,.1*e.rect.height)||a.push(p("textsize",e,r)),n.textAutoResize="NONE",n.resizeWithConstraints(n.size.x,r.rect.height)):"WIDTH_AND_HEIGHT"===n.textAutoResize&&((0,i.xN)(e.rect.width,r.rect.width,.1*e.rect.width)&&(0,i.xN)(e.rect.height,r.rect.height,.1*e.rect.height)||a.push(p("textsize",e,r)),n.textAutoResize="NONE",n.resizeWithConstraints(r.rect.width,r.rect.height)))},n,r),a}(e,r),...function(e,r,n){let a=h(e),{threshold:o}=n,s=[],l=0,c=0;return f((e,r,n)=>{if(!e||!r){s.push(p("missing",e,r));return}if("VECTOR"===e.node.type||r.isDisplayContents)return;let a=e.rect.x+e.rect.width,d=e.rect.y+e.rect.height,u=r.rect.x+r.rect.width,m=r.rect.y+r.rect.height,_=!!n?.skipPosition||((0,i.xN)(e.rect.x,r.rect.x,o)||(0,i.xN)(a,u,o))&&((0,i.xN)(e.rect.y,r.rect.y,o)||(0,i.xN)(d,m,o)),h=(0,i.xN)(e.rect.width,r.rect.width,o)&&(0,i.xN)(e.rect.height,r.rect.height,o),g=e.rect.width*e.rect.height,f=function(e,r){let n=Math.min(e.x,r.x),a=Math.min(e.y,r.y),i=Math.max(e.x+e.width,r.x+r.width)-n,o=Math.max(e.y+e.height,r.y+r.height)-a;return{x:n,y:a,width:i,height:o}}(e.rect,r.rect),E=f.width*f.height,y=function(e,r){let n=(0,i.qE)(e.x,r.x,r.x+r.width),a=(0,i.qE)(e.x+e.width,r.x,r.x+r.width)-n,o=(0,i.qE)(e.y,r.y,r.y+r.height),s=(0,i.qE)(e.y+e.height,r.y,r.y+r.height)-o;return{x:n,y:o,width:a,height:s}}(e.rect,r.rect),b=Math.min(1,(E-y.width*y.height)/g)*(e?.areaFraction??0);return _||s.push(p("position",e,r)),h||(s.push(p("size",e,r)),c+=b),h&&_||(l+=b),{hasSamePosition:_}},a,r),{differences:s,layoutDifferenceScore:l,sizeDifferenceScore:c}}(e,r,o).differences]})},o),c}function p(e,r,n){return{type:e,node:r,element:n}}function m(e,r=!1){let n=[];for(let{type:a,element:i}of e)i&&("position"===a?n.push({id:i.id,prop:"outline",value:"dashed rgba(255, 156, 0, 0.75) 1px"}):"size"===a?n.push({id:i.id,prop:"outline",value:"dashed red 1px"}):"textsize"===a&&r&&n.push({id:i.id,prop:"outline",value:"dashed blue"}));return n}function _(e){var r;return(r=e).id&&(r.id.match(/^node-(.*)[0-9]+_[0-9]+$/)||r.id.match(/;node-[0-9]+_[0-9]+$/))?[e]:[...e.children].map(_).flat()}function h(e){let r=e.absoluteBoundingBox;return(0,a.vA)(null!==e.absoluteRenderBounds,"Node being compared should not be clipped."),function e(r,n,a,i){let o=r.childrenNodes.filter(e=>e.visible),s=function(e,r){let{x:n,y:a,width:i,height:o}=e;return{x:n-r.x,y:a-r.y,width:i,height:o}}(function(e){let{x:r,y:n,w:a,h:i}=e;return{x:r,y:n,width:a,height:i}}(function(e,r){if(!e.parentNode?.bordersTakeSpace||!e.strokePaints.data.length)return r;let{x:n,y:a,w:i,h:o}=r,s="OUTSIDE"===e.strokeAlign?1:"CENTER"===e.strokeAlign?.5:0,l=r=>(e.borderStrokeWeightsIndependent?r:e.strokeWeight)*s,c=l(e.borderLeftWeight),d=l(e.borderRightWeight),u=l(e.borderTopWeight),p=l(e.borderBottomWeight),m=e.relativeTransform,_=e=>({x:e.x*m.m00+e.y*m.m01,y:e.x*m.m10+e.y*m.m11}),h=_({x:-c,y:-u}),g=_({x:d,y:-u}),f=_({x:-c,y:p}),E=_({x:d,y:p}),y=Math.min(h.x,g.x,f.x,E.x),b=Math.max(h.x,g.x,f.x,E.x),v=Math.min(h.y,g.y,f.y,E.y);return{x:n+y,y:a+v,w:i-y+b,h:o-v+Math.max(h.y,g.y,f.y,E.y)}}(r,r.absoluteBoundingBox)),n),l=g(r);for(let e of o)l+=g(e);let c=e=>i*(0===l?0:g(e)/l),d=[...a,r.name];return{id:r.guid,name:d.join(" > "),node:r,children:o.map(r=>e(r,n,d,c(r))),rect:s,areaFraction:c(r)}}(e,r,[],1)}function g(e){return(e.absoluteRenderBounds?.w??0)*(e.absoluteRenderBounds?.h??0)}function f(e,r,n,a){let i=e(r,n,a);if(!r||!n)return;let o=n.isFlattenedToImage?[]:r.children,s=!!i&&"object"==typeof i&&"hasSamePosition"in i&&!i.hasSamePosition;for(let r=0;r<Math.max(n.children.length,o.length);r++)f(e,o[r],n.children[r],{skipPosition:s})}},750327:(e,r,n)=>{n.d(r,{z8:()=>a.z,Tl:()=>o.T,tb:()=>s.t,lY:()=>s.l});var a=n(787562);function i(e,r,n=1){return{m00:n,m01:0,m02:e,m10:0,m11:n,m12:r}}i(0,0,.5),i(0,50,.5),i(0,-150),i(0,150),i(-150,0),i(150,0),n(641981);var o=n(221917),s=n(124),l=n(881096),c=n(566575),d=n(441081);class u{static kEpsilon=1e-6;static kEpsilonSqr=this.kEpsilon*this.kEpsilon;m00;m01;m02;m10;m11;m12;constructor(){this.m00=this.m01=this.m02=this.m10=this.m11=this.m12=0}static identity(){return this.fromNumbers(1,0,0,0,1,0)}static fromNumbers(e,r,n,a,i,o){let s=new u;return s.m00=e,s.m01=r,s.m02=n,s.m10=a,s.m11=i,s.m12=o,s}static copy(e){let r=new u;return r.m00=e.m00,r.m01=e.m01,r.m02=e.m02,r.m10=e.m10,r.m11=e.m11,r.m12=e.m12,r}static fromArray(e){let r=new u;return r.m00=e[0][0],r.m01=e[0][1],r.m02=e[0][2],r.m10=e[1][0],r.m11=e[1][1],r.m12=e[1][2],r}static fromVectors(e,r,n){let a=new u;return a.m00=r.x,a.m01=n.x,a.m02=e.x,a.m10=r.y,a.m11=n.y,a.m12=e.y,a}axisX(){return new d.Mi(this.m00,this.m10)}axisY(){return new d.Mi(this.m01,this.m11)}offset(){return new d.Mi(this.m02,this.m12)}toDegrees(){return 180*Math.atan2(this.m10,this.m00)/Math.PI}toScale(){let{m00:e,m01:r,m10:n,m11:a}=this;return new d.Mi(Math.sqrt(e*e+n*n),Math.sqrt(r*r+a*a))}hasNaN(){return this.m00!=this.m00&&this.m01!=this.m01&&this.m02!=this.m02&&this.m10!=this.m10&&this.m11!=this.m11&&this.m12!=this.m12}translate(e,r){this.m02=e*this.m00+r*this.m01+this.m02,this.m12=e*this.m10+r*this.m11+this.m12}rotate(e){if(0===e)return;let r=Math.sin(e),n=Math.cos(e),a=n*this.m00+r*this.m01,i=n*this.m01-r*this.m00,o=n*this.m10+r*this.m11,s=n*this.m11-r*this.m10;this.m00=a,this.m01=i,this.m10=o,this.m11=s}scale(e,r){this.m00*=e,this.m01*=r,this.m10*=e,this.m11*=r}multiply(e){let r=this.m00*e.m00+this.m01*e.m10,n=this.m00*e.m01+this.m01*e.m11,a=this.m00*e.m02+this.m01*e.m12+this.m02,i=this.m10*e.m00+this.m11*e.m10,o=this.m10*e.m01+this.m11*e.m11,s=this.m10*e.m02+this.m11*e.m12+this.m12;this.m00=r,this.m01=n,this.m02=a,this.m10=i,this.m11=o,this.m12=s}determinant(){return this.m00*this.m11-this.m01*this.m10}invert(){let e=1/this.determinant();if(!isFinite(e))return!1;let r=u.fromNumbers(this.m11*e,-this.m01*e,(this.m01*this.m12-this.m11*this.m02)*e,-this.m10*e,this.m00*e,(this.m10*this.m02-this.m00*this.m12)*e);return!r.hasNaN()&&(this.m00=r.m00,this.m01=r.m01,this.m02=r.m02,this.m10=r.m10,this.m11=r.m11,this.m12=r.m12,!0)}transformRect(e){if(e.isInvalid())return e;if(0===this.axisX().y&&0===this.axisY().x)return l.r.computeBounds(this.transformPoint(e.topLeft()),this.transformPoint(e.bottomRight()));let r=[this.transformPoint(e.topLeft()),this.transformPoint(e.topRight()),this.transformPoint(e.bottomLeft()),this.transformPoint(e.bottomRight())];return l.r.computeBoundsFromPointArray(r)}transformPoint(e){return new d.Mi(this.m00*e.x+this.m01*e.y+this.m02,this.m10*e.x+this.m11*e.y+this.m12)}toSvgTransform(){return`matrix(${(0,c.aT)(this.m00)} ${(0,c.aT)(this.m10)} ${(0,c.aT)(this.m01)} ${(0,c.aT)(this.m11)} ${(0,c.aT)(this.m02)} ${(0,c.aT)(this.m12)})`}toMatrix(){return[[this.m00,this.m01,this.m02],[this.m10,this.m11,this.m12]]}transformDirection(e){return new d.Mi(this.m00*e.x+this.m01*e.y,this.m10*e.x+this.m11*e.y)}inverseTransformPoint(e){let r=1/this.determinant();if(!isFinite(r))return d.Mi.invalid();let n=new d.Mi((this.m11*e.x-this.m01*e.y+this.m01*this.m12-this.m11*this.m02)*r,(this.m00*e.y-this.m10*e.x+this.m10*this.m02-this.m00*this.m12)*r);return n.hasNaN()?d.Mi.invalid():n}static fromTransform(e){return u.fromNumbers(e[0][0],e[0][1],e[0][2],e[1][0],e[1][1],e[1][2])}toTransform(){return[[this.m00,this.m01,this.m02],[this.m10,this.m11,this.m12]]}}n(52814)}}]);

//# debugId=91bf604f-9e02-56c9-bf00-817bf6902ee9

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/6803-605dfffb3106c47d.min.js.map