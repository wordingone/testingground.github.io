!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b79c1899-f406-4a4f-9b9d-08fba83c5fc9",e._sentryDebugIdIdentifier="sentry-dbid-b79c1899-f406-4a4f-9b9d-08fba83c5fc9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9067],{74172:function(e,t,n){n.d(t,{$F:function(){return m},AW:function(){return x},Ju:function(){return y},KM:function(){return N},Ph:function(){return h},Qk:function(){return f},TG:function(){return b},VD:function(){return j},Xi:function(){return w},cq:function(){return p},h_:function(){return v},kt:function(){return g},vW:function(){return C}});var a=n(57437),i=n(3032),s=n(2265),l=n(80502),o=n(15327),r=n(77565),d=n(9738),c=n(7207),u=n(70464);let v=i.fC,m=i.xz,f=i.ZA,p=i.Uv,h=i.Tr;i.Ee;let g=s.forwardRef((e,t)=>{let{className:n,inset:s,children:d,direction:c="right",...u}=e;return(0,a.jsxs)(i.fF,{ref:t,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:text-primary focus:bg-slate-100 data-[state=open]:bg-slate-100",s&&"pl-8",n,{"opacity-50 cursor-not-allowed":u.disabled}),...u,children:["left"===c&&(0,a.jsx)(o.Z,{className:"mr-auto",style:{fontSize:10}}),d,"right"===c&&(0,a.jsx)(r.Z,{className:"ml-auto",style:{fontSize:10}})]})});g.displayName=i.fF.displayName;let b=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-black shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})});b.displayName=i.tu.displayName;let x=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...o}=e;return(0,a.jsx)(i.Uv,{children:(0,a.jsx)(i.VY,{ref:t,sideOffset:s,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-black shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})})});x.displayName=i.VY.displayName;let w=s.forwardRef((e,t)=>{let{className:n,inset:s,...o}=e;return(0,a.jsx)(i.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",n),...o})});w.displayName=i.ck.displayName,s.forwardRef((e,t)=>{let{className:n,children:s,checked:o,...r}=e;return(0,a.jsxs)(i.oC,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:o,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),s]})}).displayName=i.oC.displayName,s.forwardRef((e,t)=>{let{className:n,children:s,...o}=e;return(0,a.jsxs)(i.Rk,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4 fill-current"})})}),s]})}).displayName=i.Rk.displayName;let y=s.forwardRef((e,t)=>{let{className:n,inset:s,...o}=e;return(0,a.jsx)(i.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",n),...o})});y.displayName=i.__.displayName;let j=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-slate-100",n),...s})});j.displayName=i.Z0.displayName;let N=e=>{let{className:t,...n}=e;return(0,a.jsx)("span",{className:(0,l.cn)("ml-auto text-xs tracking-widest opacity-60",t),...n})};function C(e){var t;let{options:n,onChange:i,value:s,zIndex:o}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(m,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,l.cn)("cursor-pointer flex flex-row items-center gap-2 border border-gray-200 rounded-md px-3 py-1"),children:[null===(t=n.find(e=>e.value===s))||void 0===t?void 0:t.label,(0,a.jsx)("span",{className:"text-xs",children:(0,a.jsx)(u.Z,{})})]})}),(0,a.jsx)(x,{style:o?{zIndex:o}:void 0,children:n.map(e=>(0,a.jsx)(w,{onClick:()=>{i(e.value)},children:e.label},e.value))})]})}N.displayName="DropdownMenuShortcut"},17299:function(e,t,n){var a=n(57437),i=n(80502),s=n(2265),l=n(61935);let o=(0,s.forwardRef)(function(e,t){let{variant:n="primary",className:s,disabled:o,children:r,icon:d,type:c="button",loading:u=!1,...v}=e,m=o||u;return(0,a.jsxs)("button",{ref:t,className:(0,i.cn)("transition-all flex items-center justify-center h-8 font-medium text-sm px-3 py-2 rounded-lg w-auto min-w-max",{"text-white":["primary","destructive"].includes(n),"text-primary":["secondary","tertiary"].includes(n)},m?"bg-disabled cursor-not-allowed text-disabled-text":{"bg-primary hover:bg-primary-focus":"primary"===n,"bg-secondary hover:bg-secondary-focus":"secondary"===n,"hover:bg-tertiary-focus":"tertiary"===n,"bg-destructive hover:bg-destructive-focus hover:opacity-75":"destructive"===n},s),type:c,disabled:m,...v,children:[(d||u)&&(0,a.jsx)("span",{className:(0,i.cn)("mr-2",{"mr-0":!r}),children:u?(0,a.jsx)(l.Z,{className:"animate-spin"}):d}),r&&d?(0,a.jsx)("span",{className:"ml-1",children:r}):r]})});t.Z=o},79067:function(e,t,n){n.d(t,{Z:function(){return U}});var a=n(57437),i=n(61340),s=n(24610),l=n(49638),o=n(1005),r=n(67187),d=n(9738),c=n(62272),u=n(22623),v=n(61935),m=n(30166),f=n(33145),p=n(2265),h=n(22122),g=n(10541),b=n(80502),x=n(50510),w=n(25092),y=n(94508),j=(n(76865),n(73879)),N=n(39760),C=n(74172);function _(e){var t,n,i,s,l,o,r;let{conversationId:d,widgetPreferences:c,messages:u}=e,{setEmailDialogOpen:v}=(0,g.K)(e=>({setEmailDialogOpen:e.setEmailDialogOpen})),m=null!==(l=null==c?void 0:null===(t=c.chatHeaderSettings)||void 0===t?void 0:t.sendTranscriptAsEmail)&&void 0!==l&&l?"Save transcript":"Download transcript",f=async()=>{if(d)try{var e;let t="Conversation\nDownloaded on ".concat(new Date().toISOString(),"\n\n");u.forEach(e=>{t+="\n[".concat(e.role,"]\n").concat(e.text,"\n")}),(null==c?void 0:null===(e=c.chatHeaderSettings)||void 0===e?void 0:e.sendTranscriptAsEmail)?v(!0):(0,y.Sv)("conversation.txt",t,"text/plain")}catch(e){console.error("Error downloading conversation ",e)}},p=null!==(o=null==c?void 0:null===(n=c.chatHeaderSettings)||void 0===n?void 0:n.enableDownloadTranscript)&&void 0!==o&&o,b=null!==(r=null==c?void 0:null===(i=c.chatHeaderSettings)||void 0===i?void 0:i.showDownloadButton)&&void 0!==r&&r;return p||b?b?(0,a.jsx)(h.iU,{content:m,children:(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 mr-2 rounded-full close-widget-button outline-none",role:"button","aria-label":m,onClick:f,tabIndex:2,children:(0,a.jsx)(j.Z,{"aria-hidden":"true",className:"text-xl"})})}):(0,a.jsxs)(C.h_,{children:[(0,a.jsx)(C.$F,{asChild:!0,children:(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 mr-2 rounded-full close-widget-button outline-none",role:"button","aria-label":"Chat options menu",tabIndex:2,children:(0,a.jsx)(N.Z,{"aria-hidden":"true",className:"text-xl"})})}),(0,a.jsx)(C.AW,{className:"bg-white",align:"end",children:(null==c?void 0:null===(s=c.chatHeaderSettings)||void 0===s?void 0:s.enableDownloadTranscript)&&(0,a.jsx)(C.Xi,{onClick:f,children:"Download Transcript"})})]}):null}var S=n(30725),k=n(17299),I=n(17588),D=n(22048);function E(e){let{closeDialog:t}=e,n=(0,x.Wl)(),[i,s]=(0,p.useState)(""),[l,o]=(0,p.useState)(null),{conversationId:r,getUserIdAuthHeaders:c}=(0,g.K)(e=>({conversationId:e.conversationId,getUserIdAuthHeaders:e.getUserIdAuthHeaders})),u=async e=>{if(!(0,y.vV)(e)){o("Please enter a valid email address");return}let a=await n("/conversation/email_transcript",{conversation_id:r,email:e},c());a.error&&D.uT("Error sending conversation transcript",{level:"error",extra:{conversationId:r,email:e,error:a.error}}),o(null),t()};return(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 top-0 frosted-glass z-30 flex flex-col items-center justify-center text-black",children:(0,a.jsxs)("div",{className:"w-1/2 flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)("h2",{className:"text-center",children:"Please enter your email address to receive a transcript of this chat."}),(0,a.jsx)(S.t7,{className:"bg-white",value:i,onChange:e=>s(e.target.value),placeholder:"Email",type:"email",onKeyDown:e=>{"Enter"===e.key&&u(i)}}),l&&(0,a.jsx)("p",{className:"text-red-500",children:l}),(0,a.jsxs)("div",{className:"flex flex-row itesm-center justify-center gap-2",children:[(0,a.jsx)(k.Z,{className:"team-theme-bg hover:opacity-75 hover:bg-inherit!",onClick:()=>{t()},icon:(0,a.jsx)(I.Z,{}),children:"Cancel"}),(0,a.jsx)(k.Z,{className:"team-theme-bg hover:opacity-75 hover:bg-inherit!",onClick:()=>{u(i)},icon:(0,a.jsx)(d.Z,{}),children:"Submit"})]})]})})}function O(e){let{conversationId:t}=e,n=(0,x.g1)(),{setExperimentValues:a}=(0,g.K)(e=>({setExperimentValues:e.setExperimentValues}));return(0,p.useEffect)(()=>{t&&(async()=>{a(await n("/experiment/values",{conversation_id:t}))})()},[t]),null}let R=(0,m.default)(()=>Promise.all([n.e(4896),n.e(2851),n.e(7459),n.e(4160),n.e(4063)]).then(n.bind(n,96620)),{loadableGenerated:{webpack:()=>[96620]}}),A=(0,m.default)(()=>n.e(3666).then(n.bind(n,73666)),{loadableGenerated:{webpack:()=>[73666]}}),T=(0,m.default)(()=>n.e(519).then(n.bind(n,50519)),{loadableGenerated:{webpack:()=>[50519]}});function Z(e){var t,n,s,l;let{createNewConversation:o,widgetPreferences:r,namespace:d,metadata:c,localizationData:u,enableKeyDown:v}=e;return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{onClick:()=>o(),onKeyDown:e=>("Enter"===e.code||"Space"===e.code)&&v&&o(),tabIndex:0,role:"button",className:"chat-new-message-button text-sm bg-white bg-opacity-10 hover:bg-opacity-30 new-message-button transition-all rounded-lg flex items-center justify-center h-12 font-medium px-6","aria-label":"Start new conversation",children:[(null==r?void 0:null===(t=r.settings)||void 0===t?void 0:t.newMessageIconUrl)?(0,a.jsx)(f.default,{src:(0,x.np)(null==r?void 0:null===(n=r.settings)||void 0===n?void 0:n.newMessageIconUrl),alt:"".concat(d," chat icon"),height:24,width:24,className:"chat-new-message-icon mr-2","aria-hidden":"true",unoptimized:!0}):(0,a.jsx)(i.Z,{className:"mr-2 chat-new-message-icon","aria-hidden":"true"}),(null==u?void 0:u.newConversation)||(0,w.O)(null!==(l=null==r?void 0:null===(s=r.settings)||void 0===s?void 0:s.startNewConversationText)&&void 0!==l?l:"Send us a new message",["nivoda","noom","flink","finn"].includes(d)?null==c?void 0:c.locale:"en")]})})}var U=function(e){var t,n,i,m,j,N,C,S,k,I,D,U,z,M,H;let L=(0,x.g1)(),W=(0,x.Wl)(),[P,K]=(0,p.useState)([]),[V,F]=(0,p.useState)(!1),[G,B]=(0,p.useState)(),[Y,J]=(0,p.useState)(!1),[X,$]=(0,p.useState)(),{conversationId:q,setConversationId:Q,namespace:ee,metadata:et,getUserIdAuthHeaders:en,isSandbox:ea,isClosed:ei,addMetadata:es,localizationData:el,setIsChatInputDisabled:eo,isConversationUrlVisible:er,chatSessionDuration:ed,startNewConversation:ec,setStartNewConversation:eu,widgetLocation:ev,messages:em,widgetPreferences:ef,setWidgetPreferences:ep,shouldShowRipplingCSAT:eh,setShouldShowRipplingCSAT:eg,isSurveyOpen:eb,setSurveyOpen:ex,isResolved:ew,setIsResolved:ey,isEmailDialogOpen:ej,setEmailDialogOpen:eN,userId:eC,setUserId:e_,widgetTheme:eS}=(0,g.K)(e=>({conversationId:e.conversationId,setConversationId:e.setConversationId,namespace:e.namespace,metadata:e.metadata,getUserIdAuthHeaders:e.getUserIdAuthHeaders,isSandbox:e.isSandbox,isClosed:e.isClosed,addMetadata:e.addMetadata,localizationData:e.localizationData,setIsChatInputDisabled:e.setIsChatInputDisabled,isConversationUrlVisible:e.isConversationUrlVisible,chatSessionDuration:e.chatSessionDuration,startNewConversation:e.startNewConversation,setStartNewConversation:e.setStartNewConversation,widgetLocation:e.widgetLocation,messages:e.messages,widgetPreferences:e.widgetPreferences,setWidgetPreferences:e.setWidgetPreferences,shouldShowRipplingCSAT:e.shouldShowRipplingCSAT,setShouldShowRipplingCSAT:e.setShouldShowRipplingCSAT,isSurveyOpen:e.isSurveyOpen,setSurveyOpen:e.setSurveyOpen,isResolved:e.isResolved,setIsResolved:e.setIsResolved,isEmailDialogOpen:e.isEmailDialogOpen,setEmailDialogOpen:e.setEmailDialogOpen,userId:e.userId,setUserId:e.setUserId,widgetTheme:e.widgetTheme}));(0,p.useEffect)(()=>{(0,x.LE)((0,b.IA)(ee),"BASE",eS).then(e=>{"error"in e||ep(e)})},[ee,eS]),(0,p.useEffect)(()=>{var e;(0,b.SL)(ee,!0,null!==(e=null==el?void 0:el.locale)&&void 0!==e?e:null==et?void 0:et.locale,eS).then(e=>$(e))},[ee,null==el?void 0:el.locale,null==et?void 0:et.locale,eS]);let ek=async()=>{let e={...et};if("bilt"===ee&&e.token)try{let t=await W("/external/bilt_user_details",{token:e.token});t.status_tier&&(e.currentTierName=t.status_tier),t.first_name&&(e.firstName=t.first_name)}catch(e){}else if("substack"===ee&&e.token)try{let t=await W("/external/substack_bestseller_tier",{token:e.token});void 0!==t.bestseller_tier&&(e.bestseller_tier=t.bestseller_tier)}catch(e){}else["rippling","fi","dutchie"].includes(ee)&&(e.widget_location=(0,b.TO)());"agent_assist"===ev&&(e._decagon_channel="Agent Assist");let t=await W("/conversation/new",{flow_id:ea?"".concat(ee,"_test"):ee,metadata:e},en());Q(t.conversation_id),t.generated_user_id&&e_(t.generated_user_id),F(!1),eo(!1),ex(!1),ey(null),(null==et?void 0:et._is_decagon_admin_portal)&&"nivoda"!==ee&&es({user_type:void 0})};(0,p.useEffect)(()=>{let e=async()=>{var e,t,n;if(!ef||(null==ef?void 0:ef.disableChangingConversation)&&!(null==et?void 0:et._is_decagon_admin_portal))return;let a=null!==(t=(await L("/conversation/user",{},en())).conversations)&&void 0!==t?t:[],i="eventbrite"===ee&&!(null==et?void 0:et.user_type)||"bilt"===ee&&(null==et?void 0:et.fraudFlow),s=(null!==(n=null!=ed?ed:null==ef?void 0:null===(e=ef.conversationsSettings)||void 0===e?void 0:e.chatSessionDuration)&&void 0!==n?n:24)*36e5;0===a.length||new Date("".concat(a[0].created_at,"Z")).getTime()<Date.now()-s||i?await ek():Q(a[0].id)};q||e()},[!!ef]),(0,p.useEffect)(()=>{let e=async()=>{var e;let t=await L("/conversation/user",{},en());"error"in t&&B((null==et?void 0:et.user_device)==="mobile"?"Please reopen this interface.":"Please refresh this page.");let n=null!==(e=t.conversations)&&void 0!==e?e:[];K(n=n.filter(e=>new Date(e.created_at).getTime()>Date.now()-7776e6))};q||e()},[q,eC]),(0,p.useEffect)(()=>{(async()=>{ec&&(await ek(),eu(!1))})()},[ec,ek,eu]);let eI=!!q||null===q,eD=!!q&&((null==ef?void 0:null===(t=ef.closingSurveySettings)||void 0===t?void 0:t.enableOnWidgetClose)||["alarm","podium","shipbob","eventbrite","hertz","affirm","oura","riot_games","nivoda","easypark","eight_sleep","headway","rippling"].includes(ee)&&("eventbrite"!==ee||em.filter(e=>"AI"===e.role).length>((null===(n=em[0])||void 0===n?void 0:n.role)==="AI"?1:0))),eE="widget"===e.surface||!e.surface,eO="embed"===e.surface&&!!q&&(null==ef?void 0:null===(i=ef.closingSurveySettings)||void 0===i?void 0:i.enableOnEmbedWidgetClose),eR="mobile"===e.surface&&!!q&&(null==ef?void 0:null===(m=ef.closingSurveySettings)||void 0===m?void 0:m.enableOnMobileWidgetClose),eA=e.onClose||eO||eR,eT=eE||"embed"===e.surface&&(null==ef?void 0:null===(j=ef.chatHeaderSettings)||void 0===j?void 0:j.enableEmbedMinimizeButton)||"mobile"===e.surface&&(null==ef?void 0:null===(N=ef.chatHeaderSettings)||void 0===N?void 0:N.enableMobileMinimizeButton),eZ=eE&&eD||eO||eR,eU=(0,p.useCallback)(async()=>{if(eh)return;let e=await W("/external/rippling_send_csat_field",{conversation_id:q});eg(e.send_csat),!V&&e.send_csat&&(ex(!0),F(!0))},[q,V]);q&&ei&&"rippling"===ee&&eU();let ez=()=>{window.webkit&&window.webkit.messageHandlers.iosListener&&window.webkit.messageHandlers.iosListener.postMessage("closeChatWindow"),window.Android&&window.Android.postMessage("closeChatWindow"),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("closeChatWindow")},eM=!eI,eH=null!==(M=null==ef?void 0:null===(C=ef.conversationsSettings)||void 0===C?void 0:C.startNewConversationLocation)&&void 0!==M?M:"top",eL=(null==ef?void 0:null===(S=ef.settings)||void 0===S?void 0:S.exitIcon)==="shrink"?s.Z:l.Z,eW=!(null==ef?void 0:null===(k=ef.closingSurveySettings)||void 0===k?void 0:k.enableForClosedConversations)&&ei,eP=(null==ef?void 0:null===(I=ef.closingSurveySettings)||void 0===I?void 0:I.isSurveyOptional)&&eb;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{conversationId:q}),(0,a.jsxs)("div",{className:"transition-all z-50 overflow-hidden flex-shrink-0 text-black team-theme-bg-light team-theme-header",style:{minHeight:(0,y.b6)([[eI&&"ramp"===ee,80],[eI&&"notion"===ee,48],[eI,64],[!1,64],["notion"===ee,100],["bottom"===eH,100]],144),...(null==et?void 0:et.user_device)==="mobile"&&"rippling"===ee&&{background:"#fdb71c"}},role:"banner","aria-label":"Chat header",children:[(0,a.jsxs)("div",{className:"px-4 py-4 flex items-center widget-header-text",children:[eI?(0,a.jsxs)(a.Fragment,{children:[(!(null==ef?void 0:ef.disableChangingConversation)||(null==et?void 0:et._is_decagon_admin_portal))&&(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 rounded-full menu-widget-button",onClick:()=>{Q(void 0),F(!1)},onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&(Q(void 0),F(!1))},tabIndex:1,role:"button","aria-label":"Return to list of conversations",children:(0,a.jsx)(o.Z,{"aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"text-lg font-semibold flex flex-grow gap-3 ml-3 items-center chat-with",children:[(null==ef?void 0:null===(D=ef.chatHeaderSettings)||void 0===D?void 0:D.enableHeaderImage)&&(0,a.jsx)(f.default,{src:(0,x.np)("/avatars/".concat((0,b.IA)(ee),".png")),alt:"".concat(ee," logo"),height:36,width:36,unoptimized:!0}),(null==el?void 0:el.chatTitle)||(null==ef?void 0:null===(U=ef.chatHeaderSettings)||void 0===U?void 0:U.title)||X,"rippling"===ee&&"https://app.rippling.com/"===(0,b.TO)()&&(0,a.jsx)("span",{className:"ml-3 transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 rounded-full",role:"link","aria-label":"Open Help Center in new tab",children:(0,a.jsx)(r.Z,{onClick:()=>{window.open("https://help.rippling.com/","_blank","noreferrer")},"aria-hidden":"true"})}),["faire","faire_staging","faire_testing"].includes(ee)&&er&&(0,a.jsx)(h.pn,{children:(0,a.jsxs)(h.u,{children:[(0,a.jsx)(h.aJ,{asChild:!0,children:(0,a.jsx)("span",{className:"pb-0.5 ml-1 transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-6 h-6 rounded-full",onClick:()=>{let e="https://decagon.ai/admin/conversations#".concat(q);navigator.clipboard.writeText(e).then(()=>{J(!0),setTimeout(()=>J(!1),2e3)})},role:"button","aria-label":Y?"URL copied":"Copy conversation URL",children:Y?(0,a.jsx)(d.Z,{"aria-hidden":"true"}):(0,a.jsx)(c.Z,{"aria-hidden":"true"})})}),(0,a.jsx)(h._v,{className:"frosted-glass",side:"right",children:(0,a.jsx)("div",{className:"text-sm w-19 py-2 text-black",children:Y?"URL Copied!":"Copy URL"})})]})})]})]}):(0,a.jsx)("div",{className:"text-lg font-semibold flex-grow transition-all ml-2 my-conversations",role:"heading","aria-level":1,children:(null==el?void 0:el.conversationHistoryTitle)||(0,w.O)(null!==(H=null==ef?void 0:null===(z=ef.conversationsSettings)||void 0===z?void 0:z.conversationHistoryTitle)&&void 0!==H?H:"My conversations",["nivoda","noom","flink","finn"].includes(ee)?null==et?void 0:et.locale:"en")}),eI&&(0,a.jsx)(_,{conversationId:q,messages:em,widgetPreferences:ef}),eA?(0,a.jsxs)(a.Fragment,{children:[eT&&(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 rounded-full close-widget-button",onClick:()=>{var t,n;eD?null===(t=e.postMessage)||void 0===t||t.call(e,{type:"USER_ACTION",payload:{eventName:"DECAGON_MINIMIZE"}}):null===(n=e.postMessage)||void 0===n||n.call(e,{type:"USER_ACTION",payload:{eventName:"DECAGON_CLOSE",isConversationClosed:ei}}),e.onClose&&e.onClose(eD)},onKeyDown:t=>{("Enter"===t.code||"Space"===t.code)&&e.onClose&&e.onClose(eD)},tabIndex:2,role:"button","aria-label":eD?"Minimize chat window":"Close chat window",children:eD?(0,a.jsx)(u.Z,{"aria-hidden":"true"}):(0,a.jsx)(eL,{"aria-hidden":"true"})}),eZ&&(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 rounded-full close-widget-button ml-2",onClick:()=>{var t;if(null===(t=e.postMessage)||void 0===t||t.call(e,{type:"USER_ACTION",payload:{eventName:"DECAGON_CLOSE",isConversationClosed:ei}}),eW||eP){e.onClose&&e.onClose();return}ex(!0)},onKeyDown:t=>{if("Enter"===t.code||"Space"===t.code){if(eW||eP){e.onClose&&e.onClose();return}ex(!0)}},tabIndex:3,role:"button","aria-label":"Open feedback survey",children:(0,a.jsx)(eL,{"aria-hidden":"true"})})]}):["saturn","rippling","noom","nivoda"].includes(ee)&&(null==et?void 0:et.user_device)==="mobile"&&(0,a.jsx)("div",{className:"transition-all cursor-pointer hover:bg-opacity-20 bg-opacity-0 bg-black flex items-center justify-center w-8 h-8 rounded-full",..."noom"===ee?{onTouchStart:ez}:{onClick:ez},role:"button","aria-label":"Close mobile chat window",children:(0,a.jsx)(eL,{"aria-hidden":"true"})})]}),eM&&"top"===eH&&(0,a.jsx)(Z,{createNewConversation:ek,widgetPreferences:ef,namespace:ee,metadata:et,localizationData:el,enableKeyDown:null!=e.onClose})]}),eI?null===q?(0,a.jsxs)("div",{className:"flex-grow flex flex-col chat-interface-loading",role:"status","aria-label":"Loading conversation",children:[(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center text-3xl text-slate-300",children:(0,a.jsx)(v.Z,{"aria-hidden":"true"})}),(0,a.jsx)("div",{className:"skeleton-box h-16 rounded-lg m-5","aria-hidden":"true"})]}):(0,a.jsx)(R,{},q):(0,a.jsx)(A,{conversations:P,errorMessage:G}),eM&&"bottom"===eH&&(0,a.jsx)("div",{className:"flex justify-center mb-5",children:(0,a.jsx)(Z,{createNewConversation:ek,widgetPreferences:ef,namespace:ee,metadata:et,localizationData:el,enableKeyDown:null!=e.onClose})}),eb&&(0,a.jsx)(T,{onCloseConversation:()=>{var t,n;null===(t=e.postMessage)||void 0===t||t.call(e,{type:"USER_ACTION",payload:{eventName:"DECAGON_SURVEY_CLOSED"}}),Q(void 0),F(!1),ey(null),e.onClose&&e.onClose(),ex(!1),(null==ef?void 0:null===(n=ef.ratingSettings)||void 0===n?void 0:n.markConversationClosed)&&W("/chat/close",{conversation_id:q},en())},onBack:()=>{ex(!1)},localizationData:el}),ej&&(0,a.jsx)(E,{closeDialog:()=>{eN(!1)}})]})}}}]);