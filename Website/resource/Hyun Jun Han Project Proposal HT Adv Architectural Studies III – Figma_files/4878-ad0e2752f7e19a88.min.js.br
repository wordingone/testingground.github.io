"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5af0fe85-e406-5d85-8762-f82566778e58")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[4878],{827767:(e,t,a)=>{a.d(t,{T:()=>h});var n=a(19180),i=a(382902),r=a(317720),l=a(190243),o=a(918777),c=a(615233),s=a(748008),d=a(740495),u=a(131650),m=a(318147),_=a(55116),f=a(138528);let p=(0,i.Iz)(e=>(0,i.eU)(t=>e?t(_.WF4.Query({orgId:e})).transform(({org:e})=>!!s.oA(e?.isSalesAssistedPlanProperty)?.value&&!(0,s.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty)&&s.oA(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==m.Lb.SEATS_MODEL_BILLING_2025):r.Qw.disabled()));function h(e,t){let a=(0,d.CT)(),r=(0,l.Xf)(e?.id),m=(0,u.n)(),_=(0,i.md)(p(e?.id??null)),h=(0,f.D6)("useProductTermsEligibility"),E=(0,f.j_)(h).unwrapOr(!1),b=r.data?.analyze_data_contract_v2_start,k=b?(0,o.A)(b):null,w=(0,o.A)(),v=!!k&&w.isBefore(k)&&90>=k.diff(w,"day"),g=!!k&&w.isBefore(k)&&30>=k.diff(w,"day"),y=(0,o.A)((0,c.tl)().analyze_data_flow_v2_until),C=!!e&&(0,o.A)(e.created_at).isBefore(y),N=(0,s.oA)(_),A=(0,n.k)().terms_of_service_may_2025_update,T=!!(e?.id&&(E||t)&&C&&v&&a&&N&&(m||A&&g));return"loading"===r.status||"loading"===_.status||N?.status==="loading"?(0,s.Xm)():(0,s.gB)({isEligible:T,orgTermsInfo:{organizationName:e?.name??"organization",renewalDate:k}})}},374200:(e,t,a)=>{a.d(t,{L:()=>h,I:()=>E});var n=a(848318),i=a(911734),r=a(700574),l=a(809543),o=a(580181),c=a(350808),s=a(863270),d=a(806362),u=a(869439),m=a(352185);let _="resource_page_header--resourceHeaderAvatar--FI-3x",f="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",p="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function h({publishers:e,size:t=32,showFigmaPartnerBadge:a,openInNewTab:r=!1}){let h=(0,m.AG)(),E=(0,o.Om)()??void 0,b=(0,o.tv)()??void 0,k=h?2:3;return e.length<5?n.createElement(n.Fragment,null,e.map((e,i)=>{let o=(0,l.RE)(e.profile_handle,h,E,b);return n.createElement("div",{key:e.id,className:f,"data-testid":"resource-header-avatar-"+i},n.createElement(s.o3,{to:o.to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},key:e.id,target:r?"_blank":"_self"},n.createElement(d.e,{entity:e,size:t,style:{zIndex:k-i},adtlClassName:_})),a&&n.createElement("div",{className:p,style:{zIndex:k-i}},(0,u.C2)(e,!0)))})):n.createElement(n.Fragment,null,e.slice(0,3).map((e,t)=>{let r=(0,l.RE)(e.profile_handle,h,E,b);return n.createElement("div",{className:f,key:e.id,"data-testid":"resource-header-avatar-"+t},n.createElement(i.N_,{to:r.to,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(d.e,{entity:e,style:{zIndex:3-t},adtlClassName:_})),a&&n.createElement("div",{className:p,style:{zIndex:3-t}},(0,u.C2)(e,!0)))}),n.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},n.createElement(c.e,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function E({publishers:e,useSmallWidth:t=!1,removeByLabel:a=!1,openInNewTab:i=!1}){return n.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,r.kc)(e,t,a,i))}},519267:(e,t,a)=>{a.d(t,{N:()=>s});var n=a(848318),i=a(301168),r=a(410725),l=a(182317),o=a(55116),c=a(474132);function s(){let e=n.useMemo(()=>(0,l.g)(),[]),t=(0,i.d4)(c.kY),a=(0,r.Rs)(o.gfM,{cacheNonce:e});return n.useMemo(()=>{if("loaded"===a.status){let e=a.data?.lockClient;if(e)return e.lock}return t},[a,t])}},691112:(e,t,a)=>{a.d(t,{E:()=>r});var n=a(925040);let i=(0,n.Mz)(e=>e.dropdownShown,e=>e?.type),r=e=>(0,n.Mz)(i,t=>t===e)},510029:(e,t,a)=>{a.d(t,{d:()=>q});var n=a(848318),i=a(301168),r=a(144230),l=a(1511),o=a(124810),c=a(408193),s=a(169930),d=a(989232),u=a(775292),m=a(410725),_=a(238462),f=a(182317),p=a(230618),h=a(345964),E=a(755534),b=a(223931),k=a(967688),w=a(744577),v=a(847461),g=a(431698),y=a(858488),C=a(412865),N=a(125761),A=a(55116),T=a(765330),I=a(302982),P=a(892750),R=a(46503),x=a(767950),M=a(691063),D=a(853977),F=a(181344),B=a(649567);let S="quick_reply_thread_view--headerButton--wmkPJ",L=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},O=null,q=(0,n.forwardRef)((e,t)=>{let a=(0,m.Rs)(A.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return n.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},n.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},n.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},n.createElement("div",{className:S},!e.fileBrowser&&n.createElement(b.J,{"aria-label":(0,k.t)("quick_reply.navigate_back"),onClick:e.onClose},n.createElement(l.C,null))),n.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===a.status&&a.data.file&&a.data.file.name),n.createElement("div",{className:S},e.fileBrowser?n.createElement(b.J,{"aria-label":(0,k.t)("quick_reply.close"),onClick:e.onClose},n.createElement(o.A,null)):n.createElement("div",{style:{display:"none"}},n.createElement(b.J,{"aria-label":(0,k.t)("quick_reply.more")},n.createElement(c.J,null))))),n.createElement(U,{quickReplyInfo:e.quickReplyInfo,result:a,hideOverflowMenu:e.fileBrowser})))});function U(e){let t=(0,N.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?n.createElement(h.qc,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?n.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,k.t)("quick_reply.unable_to_load_thread")):n.createElement(H,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function H(e){let{quickReplyInfo:t,result:a,user:l}=e,{fileKey:o,threadId:c}=t,m=(0,y.dr)({args:{fileKey:o,rootId:c},subscription:a}),_=(0,i.wA)(),{file:f}=a.data,h=(0,n.useMemo)(()=>(0,T.mp)({currentOrgId:f.org?.id,teamId:f.teamId,fileKey:o,users:[]}),[f.org?.id,f.teamId,o]),{mobileCommentThread:E}=f,{currentUserCommentReadStatus:w}=f,N=E.find(e=>e.id===c),A=n.useMemo(()=>E.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[E]),P=(0,i.d4)(e=>e.comments.savingCommentUuids),R=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!N)return n.createElement("div",null,(0,k.t)("quick_reply.unable_to_load_thread"));let x=E.map(e=>(0,C.G9)(l.id,N,e,w??C.gj,P,R,e.attachments)),M={id:N.id,key:o,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:x,messageMeta:x[0].message_meta,page:N.clientMeta?.pageId||null,isActive:!0,replyCount:E.length-1,isCanvasMention:!1,pageName:N.clientMeta?.pageId||null,sidebarItemType:I.kT.COMMENT_THREAD},D={api:m,status:a.status,data:L,threads:{status:a.status,data:[M],errors:a.errors},errors:a.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return n.createElement(g.kR,{value:D},n.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=x.some(e=>e.isUnread);O=setTimeout(()=>{m.commentReceipts&&e&&(_(v.AY({receiptsAPI:m.commentReceipts,thread:M})),(0,d.trackEvent)("Comment Thread Read",{commentThreadId:c,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{O&&clearTimeout(O)}},n.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},n.createElement(u.B,null,n.createElement(p.oW,{src:A||void 0,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,r.C)(f.checkpointClientMeta)},alt:"thumbnail"})),n.createElement("div",{className:"quick_reply_thread_view--openFileButton--RBtVz"},n.createElement(b.J,{"aria-label":(0,k.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${o}?fuid=${l.id}&#${c}`;window.location.href=e}},n.createElement(s.V,null)))),n.createElement(z,{loadedComments:x,user:l,quickReplyInfo:t,commentMentionables:h,hideOverflowMenu:e.hideOverflowMenu})))}function z(e){let{loadedComments:t,user:a,quickReplyInfo:r,commentMentionables:l,hideOverflowMenu:o}=e,{fileKey:c,threadId:s}=r,d=(0,i.wA)();(0,n.useEffect)(()=>{d(v.Fm({threadId:s}))},[d,s]);let u=(0,i.d4)(e=>e.comments.typeahead),m=(0,i.d4)(e=>e.comments.editingComment),p=(0,i.d4)(e=>e.comments.activeThread?.id),h=(0,i.d4)(e=>e.comments.threads),b=p&&h[p]||null,y=b?.reply.messageMeta||[],{submitReply:C,updateMessage:N,submitEdit:A}=function(e){let t=(0,i.wA)(),a=(0,g.I_)().writeAPI,r=g.GH()?.threads;return{submitReply:n.useCallback(e=>{if(!a){console.error("Calling submitReply with no write API");return}r&&"loaded"===r.status&&r.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,i,r,l)=>v.dB(a,t,n,i,r,l,e.uuid,F.y),t(v.lV({...e,commentsWriteApi:a,commentsConfiguration:F.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,r,a]),updateMessage:n.useCallback(a=>{t(v.k7({threadId:e,messageMeta:a}))},[t,e]),submitEdit:n.useCallback((e,a)=>{t(v._v({comment:e,messageMeta:a}))},[t])}}(s),T=(0,R._B)(),S=n.useRef(null),L=n.useRef(null),O=n.useRef(null),[q,U]=n.useState(null),[H,z]=n.useState(n.useRef(null)),$=n.useRef(null),j=0,V=0,Q=0;$.current&&$.current.offsetParent&&(j=$.current.offsetWidth,V=$.current.offsetLeft,Q=$.current.offsetParent.clientHeight-$.current.offsetTop);let Y=e=>e||{x:0,y:0},X=n.useRef(null);(0,n.useEffect)(()=>{X.current&&X.current.scrollToBottom()},[]);let J=[...new Set(t.map(e=>e.user.handle))],K=t.find(e=>e.id===s);return K?n.createElement(n.Fragment,null,n.createElement("div",{style:w.sx.flex1.$}),n.createElement(E.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:X,enableScrollShadow:!0},n.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,i)=>n.createElement(x.I,{key:`thread-comment-${e.id}`,allowAttachments:!1,comment:e,dispatch:d,editingComment:m,editorOnClear:T.editorOnClear,editorOnInsert:T.editorOnInsert,editorRef:O,editorType:"comment-editor-thread",hideEmojiPicker:!1,hideReactions:!1,hideResolve:!1,hyperlinkLocation:q,index:i,isQuickReplyThreadView:!0,mentionables:l,mountInputFocused:!0,overflowMenuActions:o?[]:void 0,prevAuthor:0===i?null:t[i-1].user_id,setHyperlinkEditorRef:z,setHyperlinkLocation:U,setIsEditorFocused:_.lQ,setResolved:_.lQ,showEditedIndicator:!!e.edited_at,submitEdit:A,thread:{comments:t,key:c,id:s},threadPosition:{x:0,y:0},typeahead:u,user:a,viewportPositionFromClientPosition:Y})))),n.createElement(M.K,{allowAttachments:!1,authorNames:J,className:B.MJ,dispatch:d,editingExistingComment:!1,editorOnClear:T.editorOnInsert,editorOnInsert:T.editorOnClear,editorRef:L,editorType:"comment-editor-reply",fileKey:c,hideEmojiPicker:!1,hyperlinkLocation:q,isDisabled:!1,isEmojiPickerDisabled:null!==m,mentionables:l,messageMeta:y,mountInputFocused:!0,onCancel:_.lQ,onComposeFocus:void 0,onSubmit:()=>{C({threadId:s,threadUuid:K.uuid||void 0,uuid:(0,f.g)()})},placeholderText:(0,k.t)("comments.reply"),recordingKey:I.Dw.quickReply,replyContainerRef:$,setHyperlinkEditorRef:z,setHyperlinkLocation:U,setIsEditorFocused:_.lQ,submitText:(0,k.t)("comments.reply"),threadId:s,threadPosition:null,typeahead:u,updateMessage:N,user:a,viewportPositionFromClientPosition:Y}),n.createElement(P.rf,{decoratorsRef:S,onClear:T.onClear,onInsert:T.onInsert,width:j,direction:D.ri.UPWARDS,positionFromBottom:{left:V,bottom:Q}})):null}},574860:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(848318),i=a(536384),r=a.n(i),l=a(720522),o=a(297638),c=a(364616);let s=n.forwardRef((e,t)=>{let a=o.s.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return n.createElement("button",{className:r()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,n.createElement(l.B,{svg:c.A,className:a}))})},223931:(e,t,a)=>{a.d(t,{J:()=>r});var n=a(848318),i=a(773511);let r=n.forwardRef(function({children:e,...t},a){return n.createElement(i.E,{...t,ref:a,className:"icon_button_32--iconButton--gFcI9"},n.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))})},984799:(e,t,a)=>{a.d(t,{H:()=>r});var n=a(848318),i=a(238462);let r=n.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:i.lQ,onMouseMove:i.lQ,onRemove:i.lQ})},36937:(e,t,a)=>{a.d(t,{IP:()=>eX,fd:()=>n,he:()=>eQ,e8:()=>eY,ql:()=>eV});var n,i=a(848318),r=a(301168),l=a(559389),o=a(879169),c=a(143823),s=a(773511),d=a(19180),u=a(536384),m=a.n(u),_=a(29188),f=a(524050),p=a(637640),h=a(898700),E=a(865114),b=a(304756),k=a(755534),w=a(967688),v=a(952039),g=a(453370),y=a(422444),C=a(30575),N=a(353231),A=a(797975),T=a(730143),I=a(180294),P=a(672940),R=a(125761),x=a(656320),M=a(392903),D=a(788792),F=a(721014),B=a(271617),S=a(531788),L=a(458612),O=a(197638),q=a.n(O),U=a(343651),H=a(615233),z=a(173926),$=a(720522),j=a(314979),V=a(235252),Q=a(912873),Y=a(61717),X=a(125952),J=a(776412),K=a(984799);let W="block_kit_row--rowContainer--hsQo5",G="block_kit_row--rowWidth--kC8ex",Z="block_kit_row--metadataContainer--tcs33",ee="block_kit_row--usersContainerStructuredView--PUPYI",et="block_kit_row--quickReplyChevron--0rKX3",ea="block_kit_row--chevronIcon--2uviD",en="block_kit_row--imagePreview--CqQsi";var ei=a(987294);function er(e){return i.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:q().sanitize(e.block.html_text)}})}function el(e){let t=(0,U.UF)(e.block.emoji_shortcode)[0];return t.meta?i.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):i.createElement(i.Fragment,null)}function eo(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?i.createElement(er,{key:t,block:e}):i.createElement(el,{key:t,block:e})):[]}function ec(e){let{block:t,size:a}=e;return i.createElement(X.Ro,{entity:{...t,id:t.entity_id},size:a,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function es(e){let{block:t}=e;return i.createElement("div",{className:`${en} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,Y.A)()})`}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:a,blue:n,alpha:i}=e;return`rgba(${255*t|0}, ${255*a|0}, ${255*n|0}, ${i})`})(t.background_color)}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function ed(e){let{block:t}=e;return i.createElement("div",{className:"block_kit_row--square--vD5SO"},i.createElement("div",{className:en,style:{backgroundImage:`url(${t.img_url})`}}))}function eu(e){let{avatars:t,icon:a}=e;return 0===t.length?null:t.length>1?i.createElement("div",{className:ee},i.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},i.createElement(ec,{block:t[1],size:Q.Pf.MEDIUM})),i.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},i.createElement(ec,{block:t[0],size:Q.Pf.MEDIUM})),a&&i.createElement(em,{icon:a})):i.createElement("div",{className:ee},i.createElement(ec,{block:t[0],size:Q.Pf.LARGE}),a&&i.createElement(em,{icon:a}))}function em(e){let{icon:t}=e,a=new Set([(0,H.ck)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return i.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?i.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${a.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?i.createElement(el,{block:t}):"AvatarBlock"===t._block_type?i.createElement(ec,{block:t,size:Q.Pf.SMALL16}):void 0)}function e_(e){let t=(0,r.wA)(),{block:a,callbacks:n,isPrimary:l=!0,isDisabled:o,setIsDisabled:c}=e,s=async e=>{try{c(!0);let t=(await n.buildNotificationActionRequest(a.notification_action)).data.meta.updated_notification_blob;a.hide_after_action?n.hideNotification(e):(n.followLinkIfPossible(),t&&n.updateNotification(t.notification_id,t))}catch(n){let e=n.message||("resolve"===a.notification_action?(0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,w.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(j.s.error(e))}finally{c(!1)}},d=eo([a.text]);return i.createElement(S.IK,{variant:l?"primary":"secondary",onClick:()=>{s(a.screenreader_action_success_announcement)},disabled:o},d)}function ef(e){let{block:t,actionBlockCallbacks:a}=e,[n,r]=i.useState(!1);return i.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},i.createElement(e_,{block:t.secondary_action,callbacks:a,isPrimary:!1,isDisabled:n,setIsDisabled:r}),i.createElement(e_,{block:t.primary_action,callbacks:a,isPrimary:!0,isDisabled:n,setIsDisabled:r}))}function ep(e){let{block:t,plan:a,shouldShowChevron:n,userLastViewedTimestamp:r}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return i.createElement(eh,{block:t,plan:a,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return i.createElement(eE,{block:t,shouldShowChevron:n,userLastViewedTimestamp:r})}}function eh(e){let{block:t,plan:a,shouldShowChevron:n}=e;return i.createElement(i.Fragment,null,i.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--content--52-rY"},i.createElement("div",null,eo(t.title)),i.createElement("div",{className:Z},i.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&i.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},eo(t.description)),i.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},a&&i.createElement(i.Fragment,null,i.createElement(J.H,{entityId:a.id.toString(),entityName:a.name,imgUrl:a.img_url||void 0}),(0,M.gN)(a.name,21),i.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),i.createElement(z.h1,{date:t.created_at,style:"short"}))),n&&i.createElement("div",{className:et},i.createElement($.B,{svg:ei.A,className:ea}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return i.createElement(ec,{block:e,size:Q.Pf.XLARGE});case"ImageThumbnailBlock":return i.createElement(ed,{block:e});case"FileThumbnailBlock":return i.createElement(es,{block:e})}})())}function eE(e){let{block:t,shouldShowChevron:a,userLastViewedTimestamp:n}=e;return i.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},i.createElement("div",{className:"block_kit_row--title--gqwu-"},eo(t.title)),i.createElement(eg,{createdAt:t.created_at,lastSeenTimestamp:n})),i.createElement("div",{className:Z},i.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},eo(t.subtitle)),t.description&&i.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},eo(t.description)),a&&i.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},i.createElement("div",{className:et},i.createElement($.B,{svg:ei.A,className:ea})))))}function eb(e){let{notification:t}=e,a=(0,w.t)("user_notifications.unread_notifcation_sr");return i.createElement("div",{className:m()("block_kit_row--rowTop--4zNja",G)},t.is_unread?i.createElement("div",{className:"block_kit_row--unreadDotStructuredView--WluAp"}):null,i.createElement(eu,{avatars:t.avatars,icon:t.icon}),t.is_unread?i.createElement(L.E,null,a):null,e.children)}function ek(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e;return i.createElement(eb,{notification:a},i.createElement(ep,{block:t.body,plan:!0===n?void 0:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function ew(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e,{shouldShowChevron:r}=i.useContext(K.H);return i.createElement(eb,{notification:a},i.createElement(ep,{block:t.body,plan:!0===n?void 0:a.plan,shouldShowChevron:r(a),userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function ev(e){let{attachment:t,notification:a,actionBlockCallbacks:n}=e;return i.createElement(i.Fragment,null,i.createElement(eb,{notification:a},i.createElement(ep,{block:t.body,plan:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp})),i.createElement(ef,{block:t.actions,actionBlockCallbacks:n}))}function eg(e){let{createdAt:t,lastSeenTimestamp:a}=e,n=ey(t,a),r=(0,z.Ak)(t,"narrow");if("today"!==n&&"new"!==n){let e=new Date(t),a={};a=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},r=new Intl.DateTimeFormat((0,V.Gq)().getPrimaryLocale(!1),a).format(e)}return i.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},r)}function ey(e,t){let a=new Date(e),n=new Date,i=new Date(n);return(i.setDate(n.getDate()-1),t&&new Date(t)<a)?"new":eC(a,n)?"today":eC(a,i)?"yesterday":a>=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7)?"last_week":"older"}function eC(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var eN=(e=>(e.NEW="new",e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(eN||{});let eA={new:(0,w.tx)("user_notifications.new"),today:(0,w.tx)("user_notifications.today"),yesterday:(0,w.tx)("user_notifications.yesterday"),last_week:(0,w.tx)("user_notifications.last_7_days"),older:(0,w.tx)("user_notifications.older")};function eT(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eI=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eI||{});let eP={actionable:(0,w.tx)("user_notifications.pending"),actioned:(0,w.tx)("user_notifications.done")};var eR=a(989232),ex=a(810503),eM=a(706688);function eD(e){let t=e.preferred_attachments.find(e=>eM.p.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eF(e){let t;let a=(0,r.wA)(),[n,l]=(0,i.useState)(!1),o=(0,r.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:u,onMouseMove:_,onRemove:f}=i.useContext(K.H),p=e.notification;i.useEffect(()=>()=>{f(p)},[f,p]);try{t=eD(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let h=e=>{_(e)},E=async n=>{(0,eR.trackEvent)("file_browser_notification_clicked",{notification_id:p.notification_id,notification_type:p.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),b(n);let i=c(p);if((0,d.k)().notif_new_read_api)try{await D.sr.markNotificationAsRead({notification_id:p.notification_id,currentView:o}),i||e.followLinkOnClickCallback(),e.updateNotificationCallback(p.notification_id,{...p,is_unread:!1})}catch(e){a(j.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))}else g("resolve").then(({data:t})=>{if(i||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}},e=>{a(j.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},b=e=>{e.stopPropagation()},k=t=>{l(!0),e.onHide&&e.onHide(),t&&a(v.F.enqueue({message:t,error:!1,role:"status",timeoutOverride:1}))},g=(e,t=o)=>{if((0,d.k)().notif_new_actionable_api)switch(e){case"resolve":return D.sr.acceptNotification({notification_id:p.notification_id,currentView:t});case"reject":return D.sr.rejectNotification({notification_id:p.notification_id,currentView:t});default:(0,ex.x1)("Unknown notification action",e)}return D.sr.updateNotification({notification_id:p.notification_id,notification_action:e,currentView:t})},y=(t,a)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:k,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:g};return i.createElement(ev,{attachment:t,notification:a,actionBlockCallbacks:n})}case"ClientActionableAttachment":return i.createElement(ew,{attachment:t,notification:a});case"BodyAndThumbnailAttachment":case"BodyAttachment":return i.createElement(ek,{attachment:t,notification:a,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),k(null)}},C="ActionableAttachment"===t._block_type?i.createElement("div",{className:W,tabIndex:0,onMouseMove:h},y(t,p)):i.createElement(s.E,{className:m()(W,G),htmlAttributes:{onMouseEnter:t=>{u(t,p,async()=>{if((0,d.k)().notif_new_read_api)try{await D.sr.markNotificationAsRead({notification_id:p.notification_id,currentView:o+"_quickreply"}),e.updateNotificationCallback(p.notification_id,{...p,is_unread:!1})}catch(e){(0,ex.x1)("Error marking notification as read",e)}else g("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}})})},onMouseMove:h},onClick:E},y(t,p));return!n&&C||null}var eB=a(608940),eS=a(211766),eL=a(238462),eO=a(454805),eq=a(510029),eU=a(486250);let eH=class e{constructor(){this.circularBuffer=new eB.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,a){a-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=a)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eO.Mi(window.innerWidth,window.innerHeight)}};function ez(e){let[t,a]=(0,i.useState)(null),[n,r]=(0,i.useState)(0),l=(0,T.q5)(),o=i.useRef(eL.lQ),c=i.useRef(eL.lQ),s=i.useRef(null),u=i.useRef(null),m=(0,eU.zr)(l,t),_=i.useRef({notificationId:"",mouseLocationHistory:new eH,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,i.useEffect)(()=>{u.current&&u.current.addEventListener("mouseover",e=>{clearTimeout(_.current?.scheduledShowQuickReply)})},[t]);let f=()=>{clearTimeout(_.current?.scheduledMarkAsRead),_.current.scheduledMarkAsRead=setTimeout(()=>{c.current=o.current},1e3)},p=i.useMemo(()=>{function e(e,t,n){let i=window.innerWidth>900&&window.innerHeight>650;_.current.notificationId=e.notification_id,i&&(0,eU.UC)(e)?(a((0,eU.AS)(e)),r(t),o.current=n):(a(null),o.current=eL.lQ),_.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,a,n)=>{let i=!1;if(a.notification_id!==_.current.notificationId&&u.current){let e=u.current.getBoundingClientRect(),a=new eO.Mi(e.left,e.top),n=new eO.Mi(e.left,e.bottom),r=[_.current.mouseLocationHistory.getLocation50msAgo(),a,n];i=(0,eS.y)(new eO.Mi(t.clientX,t.clientY),r)}let r=t.target;if(i){var l;l=()=>{e(a,r.getBoundingClientRect().bottom,n)},clearTimeout(_.current?.scheduledShowQuickReply),_.current&&(_.current.scheduledShowQuickReply=setTimeout(l,500))}else clearTimeout(_.current?.scheduledShowQuickReply),e(a,r.getBoundingClientRect().bottom,n)},onMouseMove:e=>{_.current.mouseLocationHistory.push(new eO.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===_.current.notificationId&&a(null)}}},[u]);if(!(0,d.k)().desktop_quickreply_filebrowser)return i.createElement(i.Fragment,null,e.children);let h=Math.max(0,n-(s.current?.getBoundingClientRect().y??0)-(u.current?.getBoundingClientRect().height??640));return i.createElement(i.Fragment,null,i.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:s},t&&!m&&i.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:h,maxHeight:640,minHeight:450},onMouseEnter:()=>{f()},onMouseLeave:()=>{clearTimeout(_.current?.scheduledMarkAsRead),c.current(),c.current=eL.lQ,o.current=eL.lQ}},i.createElement(eq.d,{quickReplyInfo:t,onClose:()=>a(null),fileBrowser:!0,ref:u}))),i.createElement(K.H.Provider,{value:p},e.children))}eH.BUFFER_CAPACITY=10,eH.DESIRED_DURATION_MS=50,eH.THROTTLE_DURATION_MS=eH.DESIRED_DURATION_MS/eH.BUFFER_CAPACITY;let e$="user_notifications_dropdown--dateHeader---l8oH",ej="user_notifications_dropdown--markAllReadButton--TwhKK text--fontPos11--2LvXf text--_fontBase--QdLsd";function eV(e,t){let a=(0,r.wA)(),n=(0,r.d4)(e=>e.user.id),o=(0,r.d4)(e=>e.user.community_profile_id),c=(0,r.d4)(e=>e.authedUsers.byId[n]?.plans),s=i.useMemo(()=>void 0!==c&&(new Map(c.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[c,t]),d=(0,r.d4)(e=>e.userNotifications.communityProfileBellStates),u=(0,r.d4)(e=>e.selectedView.view),[m,f]=(0,i.useState)(new Map),[p,E]=(0,i.useState)(!0),k=(0,h.F)(d);i.useEffect(()=>{let i=(0,l.s)(()=>{e?o&&(k.current[o]&&a((0,M.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:o})),D.sr.getCommunityServerDriven({currentView:u}).then(({data:e})=>{y(e.meta)}).catch(e=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),a(g.oB())})):((0,M.Zo)(!1,M.td,n),D.sr.getServerDrivenPlan({currentPlanId:t,currentView:u,isPlanOrg:s}).then(({data:e})=>{y(e.meta)}).catch(e=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),a(g.oB())}))},800,!0);E(!0),i()},[t,k,u,a,e,s,o,n]);let y=e=>{let t=new Map,a=!1;e.forEach(e=>{t.set(e.notification_id,e),!a&&e.filters.is_priority&&(a=!0)}),f(t),E(!1)};return{notificationFeedMap:m,isFetchingNotifications:p,markAllAsReadFn:()=>{(e?b.Ay.post("/api/user_notifications/community/mark_read",{currentView:u,source:_.S8?"desktopbell":"web"}):b.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:u,is_plan_org:s,source:_.S8?"desktopbell":"web"})).then(()=>{f(new Map(Array.from(m,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{f(new Map(m.set(e,t)))}}}function eQ(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eY(e){return e.some(e=>e.filters.is_priority)}function eX(e){let[t,a]=(0,i.useState)(M.td),{notificationFeedMap:r,isFetchingNotifications:l,markAllAsReadFn:c,updateNotification:s}=eV(!!e.inCommunity,t),[d,u]=(0,i.useState)([]),_=t===M.td?B.a:t,f=eQ([...r.values()],d),p=(0,C.Ow)(),h=eY(f),[b,k,w]=o.t.useTabs({all:!0,priority:!!p&&h,unread:!0}),v=(0,E.ZC)(w.activeTab);i.useEffect(()=>{w.activeTab!==v&&(0,N.qD)({name:"user_notifications_filter_viewed",filter_type:w.activeTab,dropdown_location:"web"})},[v,w.activeTab]);let g=e=>{e.stopPropagation()},y=e=>{e===B.a&&(e=M.td),(0,N.FE)(e,"notifications",void 0),a(e)},A=i.useMemo(()=>f.filter(e=>e.filters.is_priority),[f]),T=i.useMemo(()=>f.filter(e=>e.is_unread),[f]),I=t=>i.createElement(n.Feed,{notifications:t,currentPlanFilter:_,currentNotificationFilter:w.activeTab,hiddenNotificationIds:d,setHiddenNotificationIds:u,isFetchingNotifications:l,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:s});return i.createElement("div",{className:m()(0!==r.size||l?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:g,onClick:g,"data-onboarding-key":F.fD},i.createElement(ez,null,i.createElement(n.Header,{selectedPlan:t,onPlanFilterUpdate:e=>y(e),inCommunity:!!e.inCommunity,markAllAsReadFn:c,inDesktopTray:!1}),i.createElement(n.FilterToggle,{notificationFilter:w.activeTab,toggleNotificationFilter:e=>{(0,N.Cu)({filter_type:e},"user_notifications_filter_clicked")},isFetchingNotifications:l,notifications:f,markAllAsReadFn:c,tabManager:w,tabPropsMap:b}),i.createElement(o.t.TabPanel,{...k.all},I(f)),i.createElement(o.t.TabPanel,{...k.priority},I(A)),i.createElement(o.t.TabPanel,{...k.unread},I(T))))}function eJ(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return i.createElement("h3",{className:e$},eA[e.notificationDateGroup])}function a(e){return(0,C.Ow)()?i.createElement("h3",{className:e$},eP[e.notificationPriorityGroup]):null}e.Feed=function(e){let n=(0,R.Pc)(),l=(0,r.d4)(e=>n?e.authedUsers.byId[n.id]?.plans:null),o=(0,r.Pj)(),s=(0,r.wA)(),d=(0,P.FC)(),u=(0,T.q5)(),m=(0,I.sZ)(),h=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},E=!1;if(n&&!e.inCommunity&&l?.length===1&&(E=!0,e.currentPlanFilter===B.a)){let t=l[0].plan_id;for(let a of e.notifications)if(a.plan?.id.toString()!==t){E=!1;break}}let b=i.useCallback(t=>()=>{var a,n;if(!t.deeplink)return;let i=new URL(t.deeplink.href),r=i.pathname;if(r.includes("project"))a=r.split("project/")[1],(0,N.xr)("file_browser_folder_click",a,null,d,{selectedView:"notifications",planFilterId:e.currentPlanFilter===B.a?null:e.currentPlanFilter});else if(r.includes("team"))n=r.split("team/")[1],(0,N._J)("file_browser_team_click",n,d,{selectedView:"notifications",planFilterId:e.currentPlanFilter===B.a?null:e.currentPlanFilter});else if((0,f.ek)(r)){let t=(0,f.zv)(r);t&&s(y.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===B.a?void 0:e.currentPlanFilter||void 0}}))}s(g.oB());let l=!!u&&u.key===(0,f.zv)(i.pathname);if(!_.eD&&l)s((0,A.H)({params:i.searchParams.toString(),hash:i.hash}));else if(t.deeplink.use_unsafe)p.Ay.unsafeRedirect(i.href,_.eD?void 0:"_blank");else if(e.inDesktopTray)p.Ay.redirect(i.href);else try{let e=(0,x.vU)(o.getState(),r);if("teamFeed"===e.view){m&&t.plan?.id.toString()===m.id?s(g.$T(e)):p.Ay.redirect(i.href,_.eD?void 0:"_blank");return}p.Ay.redirect(i.href,_.eD?void 0:"_blank");return}catch{p.Ay.redirect(i.href,_.eD?void 0:"_blank")}},[s,u,e.currentPlanFilter,e.inDesktopTray,d,o,m]);if(e.isFetchingNotifications)return i.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},i.createElement(c.k,null));if(0===e.notifications.length)return i.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,w.tx)("user_notifications.dropdown.no_notifications"));{var v;let n,r;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eT(t))-Number(eT(e)));let l=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=ey((v=e.notifications)[0].preferred_attachments[0].body.created_at,v[0].filters.user_last_viewed_timestamp)===ey(v[v.length-1].preferred_attachments[0].body.created_at,v[0].filters.user_last_viewed_timestamp),c=e=>{let a;let r=null;if(!o)try{a=eD(e);let l=ey(a.body.created_at,e.filters.user_last_viewed_timestamp);l!==n&&(n=l,r=i.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:l}))}catch(e){console.error("Skipping date header, unsupported notification")}return r},s=e=>{let t=null,n=eT(e)?"actionable":"actioned";return n!==r&&(r=n,t=i.createElement(a,{key:`priority-${e.notification_id}`,notificationPriorityGroup:n})),t};return i.createElement(k.P,{className:`${e.fillParent?"":l}`},i.createElement("div",null,e.notifications.map(t=>{let a=null;return a="priority"===e.currentNotificationFilter?s(t):c(t),i.createElement(i.Fragment,{key:`row-container-${t.notification_id}`},a,i.createElement(eF,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:E,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>h(t.notification_id),followLinkOnClickCallback:b(t)}))})))}},e.UnreadBar=function(e){return eJ(e.isFetchingNotifications,e.notifications)?i.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return i.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,w.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),eJ(e.isFetchingNotifications,e.notifications)&&i.createElement(s.E,{onClick:e.markAllAsReadFn,className:ej},(0,w.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=a,e.Header=function(e){let t=(0,T.q5)(),a=!e.inDesktopTray&&(!!t||!!(0,d.k)().notif_settings_button);return i.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?i.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.t)("user_notification.community_notifications")):i.createElement(i.Fragment,null,i.createElement(B.j,{currentPlanFilter:e.selectedPlan===M.td?B.a:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:a})),e.children)},e.FilterToggle=function(e){let t=i.createElement(o.t.TabStrip,{manager:e.tabManager},i.createElement(o.t.Tab,{...e.tabPropsMap.all},(0,w.t)("user_notification.all")),i.createElement(o.t.Tab,{...e.tabPropsMap.priority},function(e){let t=e.reduce((e,t)=>e+Number(eT(t)),0);return 0===t?(0,w.t)("user_notifications.requests_empty"):(0,w.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),i.createElement(o.t.Tab,{...e.tabPropsMap.unread},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,w.t)("user_notifications.unread_empty"):(0,w.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications)));return e.isFetchingNotifications?null:i.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},t,eJ(e.isFetchingNotifications,e.notifications)&&i.createElement(s.E,{onClick:e.markAllAsReadFn,className:ej},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))}})(n||(n={}))},271617:(e,t,a)=>{a.d(t,{a:()=>P,j:()=>R});var n=a(848318),i=a(301168),r=a(168323),l=a(658029),o=a(748059),c=a(773511),s=a(52495),d=a(282631),u=a(19180),m=a(720522),_=a(967688),f=a(453370),p=a(31898),h=a(353231),E=a(730143),b=a(125761),k=a(715880),w=a(392903),v=a(129723),g=a(17753),y=a(2122);let C="notifs_plan_filter--boldTitle--ZUcpT",N="notifs_plan_filter--planFilterContainer--E2TSh",A="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var T=a(364616),I=a(824007);let P="ALL_PLANS_FILTER";function R(e){let{currentPlanFilter:t,onPlanFilterUpdate:a}=e,R=(0,i.wA)(),x=(0,E.q5)(),M=(0,n.useRef)(null),D=!!(0,u.k)().limited_plan_spaces,{getTriggerProps:F,manager:B}=r.b(),S=(0,b.iZ)(),L=(0,i.d4)(e=>D?e.plans:S?e.authedUsers.byId[S.id]?.plans:null),O=(0,i.d4)(k.P),q=(0,i.d4)(e=>e.orgById),U=()=>{R(f.oB()),(0,h.Cu)({userId:S?.id,fileKey:x?.key,eventName:"Notification Settings Button Clicked"}),R(p.to({type:y.s,data:{tab:y.c.NOTIFICATIONS}}))};if(!S||!L||L.length<=1)return n.createElement("div",{className:N},n.createElement("h1",{className:C},(0,_.t)("user_notification.all_notifications")),e.displaySettings&&L?.length===1&&n.createElement(l.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},onClick:U},n.createElement(s.I,null)));let H=L.map(e=>e.plan_id);H.unshift(P);let z=(e,t)=>e===P?(0,_.t)("user_notification.all_notifications"):t[e],$=L.reduce((e,t)=>{if(D&&"plan_type"in t){let a="";if(t.plan_type===v.O.ORG){let e=q[t.plan_id];a=e?.name??a}else{let e=O[t.plan_id];a=e?.name??a}e[t.plan_id]=a}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),j=(e,t)=>{e.stopPropagation(),a(t)},V=H.map(e=>n.createElement(r.q7,{key:e,onClick:t=>{j(t,e)}},e===t&&n.createElement("span",{className:"notifs_plan_filter--fillMenu--Ar-HO"},n.createElement(m.B,{svg:I.A})),n.createElement("span",{className:`${e===t?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${A}`},z(e,$))));return n.createElement("div",{className:N,ref:M},n.createElement(o.nK,null,n.createElement(r.bL,{manager:B},n.createElement(c.E,{"aria-label":(0,_.t)("user_notifications.notif_filter_label",{planName:z(t,$)}),className:"notifs_plan_filter--dropdownButton--hQgHc",...F()},n.createElement("span",{className:[C,A].join(" ")},(0,w.gN)(z(t,$),35)),n.createElement(m.B,{svg:T.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),n.createElement(d.J,null,n.createElement(r.mc,null,V)))),e.displaySettings&&n.createElement(l.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},onClick:U},n.createElement(s.I,null)))}},87826:(e,t,a)=>{a.d(t,{dV:()=>H});var n=a(848318),i=a(301168),r=a(309488),l=a(93275),o=a(162796),c=a(803565),s=a(186606),d=a(382902),u=a(536384),m=a.n(u),_=a(141760),f=a(206639),p=a(182317),h=a(439382),E=a(720522),b=a(178806),k=a(967688),w=a(87463),v=a(31898),g=a(863270),y=a(355755),C=a(125761),N=a(361053),A=a(537256),T=a(259964),I=a(17753),P=a(991675),R=a(446951),x=a(597933),M=a(877994),D=a(920274),F=a(164710),B=a(996775),S=a(418866);let L="edit_color_palette_modal--modalLabel--AVogh text--fontPos11--2LvXf text--_fontBase--QdLsd",O="edit_color_palette_modal--colorCircleOuter--ZJqke";var q=a(209810);function U({onSave:e,onCancel:t,palette:a,enableSubmitWithNoChanges:o,manager:u,isPaletteEyedropperActive:g,theme:y}){let P=(0,i.wA)(),[R,U]=n.useState(a?.name||""),[z,$]=(0,d.fp)(S.Jq),j=n.useMemo(()=>a?.baseColors||(0,M.Vk)(),[a?.baseColors]),[V,Q]=(0,d.fp)(S.rN),Y=(0,d.Xr)(x.B),X=!(0,f.$K)(j,V)||o,[J,K]=n.useState(!1);n.useEffect(()=>($(-1),Q(j),Y(s.cxo.EDIT_PALETTE_MODAL),()=>{$(-1),Q(j),Y(s.cxo.SELECTION)}),[$,Q,Y,j]);let W=(0,i.d4)(e=>{let t=e.selectedView;return"fullscreen"!==t.view||t.editorType!==T.nT.Whiteboard}),G=n.useCallback(e=>{Q([...V,e])},[V,Q]),Z=n.useCallback((e,t)=>{Q([...V.slice(0,e),t,...V.slice(e+1)])},[V,Q]),ee=e=>{Q([...V.slice(0,e),...V.slice(e+1)])},et=()=>{$(-1)},ea=n.useCallback(e=>{P(v.$O({type:H.type,data:{palette:{uuid:e,name:R,baseColors:V},enableSubmitWithNoChanges:!0,theme:y}}))},[P,R,V,y]),en=(0,N.cD)(),ei=(0,C.TA)(),er=(0,B.Bw)(),el=n.useCallback(()=>{let t=V.some((e,t)=>V.some((a,n)=>t!==n&&(0,f.DA)(e,a)));if(K(t),t)return;let n=V.map(e=>(0,_.colorToHex)(e,1));if(R&&ei&&n.length){let t=a?.uuid||(0,p.g)();a?(0,S.NK)({name:R,teamId:en,baseColors:n,uuid:t},P,()=>ea(t)):((0,S.cl)({name:R,teamId:en,uuid:t,baseColors:n,creatorId:ei,isTeamDefault:!1,canRead:!0},P,()=>ea(t)),er(t,n.length,!0)),e()}},[V,R,ei,a,e,en,P,ea,er]),eo=n.useMemo(()=>Array(V.length).fill(null).map(e=>n.createRef()),[V.length]),ec=n.createRef();eo.push(ec);let es=function(e){let t=(0,f.tK)(f.ol.MULTIPLAYER_PURPLE)||f.Uv;if(!e)return t;let a=(0,c.oB)(e),n=360*a.h,i={...a,h:(n+40)%360/360};return(0,c.In)(i)}(V.length>0?V[V.length-1]:null),ed=V.length>=A.I_,eu=R&&R.trim()&&V.length>0&&(!a||X||R!==a.name),em=a?(0,k.t)("whiteboard.color_palettes.modal.edit_palette"):(0,k.t)("whiteboard.color_palettes.modal.create_palette");return n.createElement(r.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(l.vo,{allowOverflow:!0},n.createElement(l.Y9,null,n.createElement(l.hE,null,em)),n.createElement(l.nB,null,n.createElement("p",{className:L},(0,k.tx)("whiteboard.color_palettes.modal.name")),n.createElement("div",{className:"edit_color_palette_modal--nameInput--iRWoM text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(h.L,{placeholder:(0,k.t)("whiteboard.color_palettes.modal.palette_name"),value:R||"",onChange:e=>{U(e.target.value)},maxLength:100,height:16,dataTestId:"palette-name-input"})),n.createElement("div",{className:"edit_color_palette_modal--colorsContainer--VNvss"},n.createElement("p",{className:L},(0,k.tx)("whiteboard.color_palettes.modal.colors")),n.createElement("p",{className:"edit_color_palette_modal--modalDescription--SeVmv text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,k.tx)("whiteboard.color_palettes.modal.choose_up_to_9_colors")),J&&n.createElement("p",{className:"edit_color_palette_modal--modalDescriptionError--W6hs7 text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,k.tx)("whiteboard.color_palettes.modal.duplicate_colors")),n.createElement("div",{className:"edit_color_palette_modal--colorPaletteContainer--aQ-En"},V.map((e,t)=>n.createElement("div",{className:O,ref:eo[t],key:"wrapper"+e+"-"+t},n.createElement("button",{className:m()({"edit_color_palette_modal--deleteColorButton--rWqOY":!0,"edit_color_palette_modal--deleteColorButtonDisabled--dwsFr":z===t}),onClick:()=>ee(t),"data-testid":`delete-color-button-${t}`},n.createElement(E.B,{svg:q.A,height:"16px",width:"16px",autosize:!0})),n.createElement(F.v,{target:n.createElement(D.cd,{key:e+"-"+t,size:"large",value:e,selectionState:z===t?"selected":"unselected",onClick:()=>{$(t)},paletteType:"base",background:"light"}),color:e,onColorChange:e=>Z(z,e),theme:y,isOpen:!g&&z===t,onClose:()=>et(),dropperDisabled:W}))),!ed&&n.createElement("div",{className:O,ref:ec,"data-tooltip-type":I.Ib.TEXT,"data-tooltip":(0,k.t)("whiteboard.color_palettes.modal.add_color")},n.createElement(D.HL,{size:"large",value:D.WW,swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"},onClick:()=>{$(V.length),G(es)},dataTestId:"add-color-button",fallbackSvg:D.xY}))))),n.createElement(l.wi,null,n.createElement(l.jk,null,n.createElement(w.E,{color:"secondary"},(0,k.tx)("whiteboard.color_palettes.modal.palettes_visible_to_everyone")),n.createElement(b.$z,{variant:"secondary",onClick:t},(0,k.tx)("whiteboard.color_palettes.modal.cancel")),n.createElement(b.$z,{variant:"primary",disabled:!eu,type:"submit",onClick:el,htmlAttributes:{"data-testid":"save-button"}},(0,k.tx)("whiteboard.color_palettes.modal.save_palette"))))))}let H=(0,R.Ju)(function({palette:e,theme:t,enableSubmitWithNoChanges:a,...r}){let l=(0,i.wA)(),c=(0,C.TA)(),u=(0,N.cD)(),_=o.hS(r),f=(0,y.dH)(),p=(0,d.md)(x.B),h=f===s.NLJ.DROPPER_COLOR&&p===s.cxo.EDIT_PALETTE_MODAL,E=n.useCallback(()=>{l(v.Lo())},[l]);return n.createElement("div",{className:m()("edit_color_palette_modal--headerModalTransitionContainer--C-CFV",{"edit_color_palette_modal--hidden--EDk-H":h})},n.createElement(g.fu,{name:P.e0.FIGJAM_EDIT_PALETTE_MODAL,properties:{userId:c,teamId:u,type:e?"edit palette":"new palette"}},n.createElement(U,{onSave:E,onCancel:E,palette:e,enableSubmitWithNoChanges:a,manager:_,isPaletteEyedropperActive:h,theme:t})))},"EditColorPaletteModal")},200843:(e,t,a)=>{a.d(t,{j:()=>L});var n=a(848318),i=a(301168),r=a(162796),l=a(309488),o=a(93275),c=a(143823),s=a(193675),d=a(658029),u=a(555973),m=a(303476),_=a(329228),f=a(178806),p=a(967688),h=a(925085),E=a(31898),b=a(863270),k=a(632727),w=a(125761),v=a(55116),g=a(361053),y=a(537256),C=a(17753),N=a(991675),A=a(446951),T=a(414607),I=a(418866),P=a(639088);let R=(0,A.Ju)(function({paletteUuid:e}){let t=(0,i.wA)();return n.createElement(T.Rw,{size:300,confirmText:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_button"),confirmationTitle:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_title"),popStack:!0,destructive:!0,onConfirm:()=>{(0,I.RN)(e,t)}},n.createElement("div",{className:P.jE},(0,p.tx)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_content")))},"DeleteColorPaletteConfirmationModal");var x=a(877994),M=a(920274),D=a(996775),F=a(87826);let B=(0,A.Ju)(function({paletteName:e,paletteUuid:t}){let a=(0,i.wA)(),r=(0,g.cD)(),l=(0,i.d4)(e=>e.teams[r]?.name);return l||console.error("No team name found for team id",r),n.createElement(T.Rw,{size:360,confirmationTitle:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.title"),confirmText:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.confirm_button"),content:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.description",{teamName:l,paletteName:e||(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.this_palette")}),onConfirm:()=>{t===y.fJ?(0,I.In)(r,a):(0,I.dq)(r,t,a)},popStack:!0})},"MakePaletteTeamDefaultConfirmationModal");function S({palette:e,theme:t,showMakeDefaultButton:a}){let r=(0,i.wA)(),l=e.uuid===y.fJ,o=e.name||(0,p.t)("whiteboard.color_palettes.unnamed_palette");return n.createElement(h.Y,{width:"fill-parent",direction:"vertical",spacing:"4px"},n.createElement(h.Y,{direction:"horizontal",spacing:"8px"},n.createElement("div",null,o),e.isTeamDefault&&n.createElement(s.E,{variant:"brandOutline"},(0,p.t)("whiteboard.color_palettes.manage_modal.default"))),n.createElement(h.Y,{direction:"horizontal",width:"fill-parent",horizontalAlignItems:"space-between"},n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"0px"},e.baseColors.map(e=>n.createElement(M.cd,{key:e,value:k.z5.parse(e),paletteType:"base",background:"light"}))),n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"8px"},!l&&n.createElement(n.Fragment,null,n.createElement(d.K,{onClick:()=>{r(E.$O({type:F.dV.type,data:{palette:{uuid:e.uuid,name:e.name,baseColors:(0,D.$v)(e?.baseColors),isTeamDefault:e.isTeamDefault},theme:t}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip"),htmlAttributes:{"data-testid":"edit-color-palette-button-"+e.uuid,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip")}},n.createElement(u.L,null)),n.createElement(d.K,{onClick:()=>{r(E.$O({type:R.type,data:{paletteUuid:e.uuid}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip"),htmlAttributes:{"data-testid":"delete-color-palette-button-"+e.uuid,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip")}},n.createElement(m.i,null))),a&&n.createElement(f.$z,{variant:"secondary",disabled:e.isTeamDefault,onClick:()=>{r(E.$O({type:B.type,data:{paletteUuid:e.uuid,paletteName:e.name}}))},htmlAttributes:{"data-testid":"make-palette-team-default-button-"+e.uuid}},(0,p.tx)("whiteboard.color_palettes.modal.set_default")))))}let L=(0,A.Ju)(function({showMakeDefaultButton:e,entryPoint:t,theme:a,...s}){let d=(0,w.TA)(),u=(0,g.cD)(),m=r.hS(s),h=(0,i.wA)(),[C]=(0,_.IT)((0,v.iP2)({teamId:u}),{enabled:!!u});return n.createElement(b.fu,{name:N.e0.FIGJAM_MANAGE_PALETTES_MODAL,properties:{entryPoint:t,userId:d,teamId:u}},n.createElement(l.bL,{width:"fit-content",height:"dynamic",manager:m},n.createElement(o.vo,null,n.createElement(o.Y9,null,n.createElement(o.hE,null,(0,p.t)("whiteboard.color_palettes.manage_modal.color_palettes"))),n.createElement(o.nB,{padding:16},n.createElement("div",{className:"manage_color_palettes_modal--subheader--2Aol7"},n.createElement("div",{className:"manage_color_palettes_modal--manageText---c1Ro"},(0,p.tx)("whiteboard.color_palettes.manage_modal.manage_your_teams_color_palettes")),n.createElement(f.$z,{variant:"primary",onClick:()=>{h(E.$O({type:F.dV.type,data:{theme:a}}))},htmlAttributes:{"data-testid":"create-color-palette-button"}},(0,p.tx)("whiteboard.color_palettes.manage_modal.create_new_palette"))),n.createElement("div",{className:"manage_color_palettes_modal--paletteRowsOuter--d2OIk"},"loaded"===C.status&&C.data.colorPalettesForTeam?n.createElement(n.Fragment,null,n.createElement(S,{key:y.fJ,palette:{uuid:y.fJ,name:(0,p.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,x.TS)("base").map(e=>k.z5.format(e)),isTeamDefault:C.data.colorPalettesForTeam.every(e=>!e.isTeamDefault)},theme:a,showMakeDefaultButton:e}),C.data.colorPalettesForTeam.map(t=>n.createElement(S,{key:t.uuid,palette:t,theme:a,showMakeDefaultButton:e}))):n.createElement(c.k,{size:"lg",htmlAttributes:{"data-testid":"loading-spinner"}}))))))},"ManageColorPalettesModal")},826331:(e,t,a)=>{a.d(t,{V:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 6A1.5 1.5 0 0 0 6 7.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 0-1 0v1A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm4.146 3.146a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708l1.647-1.646H9.5a.5.5 0 0 1 0-1h3.793l-1.647-1.646a.5.5 0 0 1 0-.708",clipRule:"evenodd"})})})},555973:(e,t,a)=>{a.d(t,{L:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4.008 5.124a1 1 0 0 1 1.116-1.116l3.66.457-.124.992-2.636-.329L5 5l.128 1.024.33 2.636a1 1 0 0 0 .285.583l7.403 7.403 3.5-3.5-7.403-7.403a1 1 0 0 0-.583-.286l.124-.992a2 2 0 0 1 1.166.57l9.55 9.55a2 2 0 0 1 0 2.83L17.414 19.5a2 2 0 0 1-2.828 0l-9.55-9.55a2 2 0 0 1-.57-1.166zm13.346 8.73-3.5 3.5 1.439 1.439a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414z",clipRule:"evenodd"})})})},228921:(e,t,a)=>{a.d(t,{a:()=>l});var n=a(749214),i=a(848318),r=a(58153);let l=(0,i.memo)(function(e){return(0,r.O)()?(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14m6-7a6 6 0 1 1-12 0 6 6 0 0 1 12 0m-5.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})}):(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 18a6.5 6.5 0 1 0 0-13 6.5 6.5 0 0 0 0 13m5.5-6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-5-3a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12 11.293z",clipRule:"evenodd"})})})}}]);

//# debugId=5af0fe85-e406-5d85-8762-f82566778e58

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/4878-ad0e2752f7e19a88.min.js.map